<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Chapter&nbsp;3 Tutorial</title>
    <link rel="stylesheet" href="mvl.css" type="text/css">
    <meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2">
    <link rel="start" href="index.html" title="{book-title}">
    <link rel="up" href="" title="">
    <link rel="prev" href="installing.html" title="Chapter&nbsp;2 Installing and Upgrading MySQL">
    <link rel="next" href="programs.html" title="Chapter&nbsp;4 MySQL Programs">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script></head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
    <table width="100%" summary="Navigation header">
        <tbody><tr>
            <th colspan="3" align="center">Chapter&nbsp;3 Tutorial</th>
        </tr>
        <tr>
            <td width="20%" align="left"><a accesskey="p" href="installing.html">Prev</a>&nbsp;</td>
            <th width="60%" align="center"></th>
            <td width="20%" align="right">&nbsp;<a accesskey="n" href="programs.html">Next</a></td>
        </tr>
        </tbody></table>
    <hr>
</div>
<div class="chapter">
    <div class="titlepage">
        <div>
            <div>
                <h1 class="title"><a name="tutorial"></a>Chapter&nbsp;3&nbsp;Tutorial</h1>

            </div>

        </div>

    </div>
    <div class="toc">
        <p><b>Table of Contents</b></p><p style="color:blue;">目录</p><dl class="toc"><dt><span class="section"><a href="tutorial.html#connecting-disconnecting">3.1 Connecting to and Disconnecting from the Server</a></span></dt><dt><span class="section"><a href="tutorial.html#entering-queries">3.2 Entering Queries</a></span></dt><dt><span class="section"><a href="tutorial.html#database-use">3.3 Creating and Using a Database</a></span></dt><dd><dl><dt><span class="section"><a href="tutorial.html#creating-database">3.3.1 Creating and Selecting a Database</a></span></dt><dt><span class="section"><a href="tutorial.html#creating-tables">3.3.2 Creating a Table</a></span></dt><dt><span class="section"><a href="tutorial.html#loading-tables">3.3.3 Loading Data into a Table</a></span></dt><dt><span class="section"><a href="tutorial.html#retrieving-data">3.3.4 Retrieving Information from a Table</a></span></dt></dl></dd><dt><span class="section"><a href="tutorial.html#getting-information">3.4 Getting Information About Databases and Tables</a></span></dt><dt><span class="section"><a href="tutorial.html#batch-mode">3.5 Using mysql in Batch Mode</a></span></dt><dt><span class="section"><a href="tutorial.html#examples">3.6 Examples of Common Queries</a></span></dt><dd><dl><dt><span class="section"><a href="tutorial.html#example-maximum-column">3.6.1 The Maximum Value for a Column</a></span></dt><dt><span class="section"><a href="tutorial.html#example-maximum-row">3.6.2 The Row Holding the Maximum of a Certain Column</a></span></dt><dt><span class="section"><a href="tutorial.html#example-maximum-column-group">3.6.3 Maximum of Column per Group</a></span></dt><dt><span class="section"><a href="tutorial.html#example-maximum-column-group-row">3.6.4 The Rows Holding the Group-wise Maximum of a Certain Column</a></span></dt><dt><span class="section"><a href="tutorial.html#example-user-variables">3.6.5 Using User-Defined Variables</a></span></dt><dt><span class="section"><a href="tutorial.html#example-foreign-keys">3.6.6 Using Foreign Keys</a></span></dt><dt><span class="section"><a href="tutorial.html#searching-on-two-keys">3.6.7 Searching on Two Keys</a></span></dt><dt><span class="section"><a href="tutorial.html#calculating-days">3.6.8 Calculating Visits Per Day</a></span></dt><dt><span class="section"><a href="tutorial.html#example-auto-increment">3.6.9 Using AUTO_INCREMENT</a></span></dt></dl></dd><dt><span class="section"><a href="tutorial.html#apache">3.7 Using MySQL with Apache</a></span></dt></dl>
    </div>
    <a class="indexterm" name="idm140286948078992"></a><a class="indexterm" name="idm140286948077920"></a><a class="indexterm" name="idm140286948076432"></a><a class="indexterm" name="idm140286948074944"></a><p>
    This chapter provides a tutorial introduction to MySQL by showing
    how to use the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client program to create and
    use a simple database. <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> (sometimes referred
    to as the <span class="quote">“<span class="quote">terminal monitor</span>”</span> or just
    <span class="quote">“<span class="quote">monitor</span>”</span>) is an interactive program that enables you
    to connect to a MySQL server, run queries, and view the results.
    <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> may also be used in batch mode: you place
    your queries in a file beforehand, then tell
    <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> to execute the contents of the file. Both
    ways of using <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> are covered here.
</p><p style="color:blue;">本章通过演示如何使用mysql客户机程序创建和使用一个简单的数据库，向您介绍mysql。mysql（有时称为“终端监视器”或“监视器”）是一个交互式程序，它使您能够连接到mysql服务器、运行查询和查看结果。mysql也可以在批处理模式下使用：您事先将查询放在文件中，然后告诉mysql执行文件的内容。这里介绍了使用mysql的两种方法。</p><p>
    To see a list of options provided by <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>,
    invoke it with the <a class="link" href="programs.html#option_mysql_help"><code class="option">--help</code></a> option:
</p><p style="color:blue;">要查看mysql提供的选项列表，请使用--help选项调用它：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --help</code></strong>
</pre><p>
    This chapter assumes that <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is installed on
    your machine and that a MySQL server is available to which you can
    connect. If this is not true, contact your MySQL administrator. (If
    <span class="emphasis"><em>you</em></span> are the administrator, you need to consult
    the relevant portions of this manual, such as
    <a class="xref" href="server-administration.html" title="Chapter&nbsp;5&nbsp;MySQL Server Administration">Chapter&nbsp;5, <i>MySQL Server Administration</i></a>.)
</p><p style="color:blue;">本章假设mysql已安装在您的计算机上，并且可以连接到mysql服务器。如果不是这样，请与mysql管理员联系。（如果您是管理员，则需要参考本手册的相关部分，如第5章MySQL服务器管理。）</p><p>
    This chapter describes the entire process of setting up and using a
    database. If you are interested only in accessing an existing
    database, you may want to skip the sections that describe how to
    create the database and the tables it contains.
</p><p style="color:blue;">本章描述了建立和使用数据库的整个过程。如果您只对访问现有数据库感兴趣，您可能希望跳过描述如何创建数据库及其所包含的表的部分。</p><p>
    Because this chapter is tutorial in nature, many details are
    necessarily omitted. Consult the relevant sections of the manual for
    more information on the topics covered here.
</p><p style="color:blue;">因为本章本质上是教程，所以许多细节都必须省略。有关此处所述主题的更多信息，请参阅手册的相关章节。</p>
    <div class="section">

        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="connecting-disconnecting"></a>3.1&nbsp;Connecting to and Disconnecting from the Server</h2>
                </div>
            </div>
        </div>
        <a class="indexterm" name="idm140286948055600"></a><a class="indexterm" name="idm140286948054112"></a><a class="indexterm" name="idm140286948052624"></a><a class="indexterm" name="idm140286948051136"></a><p>
        To connect to the server, you will usually need to provide a MySQL
        user name when you invoke <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and, most
        likely, a password. If the server runs on a machine other than the
        one where you log in, you will also need to specify a host name.
        Contact your administrator to find out what connection parameters
        you should use to connect (that is, what host, user name, and
        password to use). Once you know the proper parameters, you should
        be able to connect like this:
    </p><p style="color:blue;">要连接到服务器，通常在调用mysql时需要提供mysql用户名，而且很可能还需要提供密码。如果服务器在您登录的计算机以外的计算机上运行，则还需要指定主机名。请与管理员联系，以了解应使用哪些连接参数进行连接（即，要使用的主机、用户名和密码）。一旦知道正确的参数，就应该能够这样连接：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p</code></strong>
Enter password: <strong class="userinput"><code>********</code></strong>
</pre><p>
        <em class="replaceable"><code>host</code></em> and
        <em class="replaceable"><code>user</code></em> represent the host name where your
        MySQL server is running and the user name of your MySQL account.
        Substitute appropriate values for your setup. The
        <code class="literal">********</code> represents your password; enter it
        when <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> displays the <code class="literal">Enter
        password:</code> prompt.
    </p><p style="color:blue;">host和user表示运行mysql服务器的主机名和mysql帐户的用户名。为您的设置替换适当的值。*******代表您的密码；当mysql显示enter password:提示时输入它。</p><p>
        If that works, you should see some introductory information
        followed by a <code class="literal">mysql&gt;</code> prompt:
    </p><p style="color:blue;">如果可以，您应该看到一些介绍性信息，然后是mysql&gt;提示：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p</code></strong>
Enter password: <strong class="userinput"><code>********</code></strong>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 25338 to server version: 5.7.29-standard

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt;
</pre><p>
        The <code class="literal">mysql&gt;</code> prompt tells you that
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is ready for you to enter SQL statements.
    </p><p style="color:blue;">mysql&gt;提示符告诉您mysql已经准备好输入sql语句了。</p><p>
        If you are logging in on the same machine that MySQL is running
        on, you can omit the host, and simply use the following:
    </p><p style="color:blue;">如果您正在运行mysql的同一台计算机上登录，则可以省略主机，只需使用以下命令：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u <em class="replaceable"><code>user</code></em> -p</code></strong>
</pre><p>
        If, when you attempt to log in, you get an error message such as
        <span class="errortext">ERROR 2002 (HY000): Can't connect to local MySQL server
      through socket '/tmp/mysql.sock' (2)</span>, it means that
        the MySQL server daemon (Unix) or service (Windows) is not
        running. Consult the administrator or see the section of
        <a class="xref" href="installing.html" title="Chapter&nbsp;2&nbsp;Installing and Upgrading MySQL">Chapter&nbsp;2, <i>Installing and Upgrading MySQL</i></a> that is appropriate to your operating
        system.
    </p><p style="color:blue;">如果尝试登录时收到错误消息，如error 2002（hy000）：无法通过socket'/tmp/mysql.sock'（2）连接到本地mysql服务器，则表示mysql服务器守护程序（unix）或服务（windows）未运行。请咨询管理员或参阅第2章“安装和升级适合您的操作系统的MySQL”一节。</p><p>
        For help with other problems often encountered when trying to log
        in, see <a class="xref" href="error-handling.html#common-errors" title="B.4.2&nbsp;Common Errors When Using MySQL Programs">Section&nbsp;B.4.2, “Common Errors When Using MySQL Programs”</a>.
    </p><p style="color:blue;">有关尝试登录时经常遇到的其他问题的帮助，请参阅B.4.2节“使用MySQL程序时的常见错误”。</p><p>
        Some MySQL installations permit users to connect as the anonymous
        (unnamed) user to the server running on the local host. If this is
        the case on your machine, you should be able to connect to that
        server by invoking <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> without any options:
    </p><p style="color:blue;">有些mysql安装允许用户作为匿名（未命名）用户连接到本地主机上运行的服务器。如果您的计算机上是这种情况，则应该可以通过调用mysql连接到该服务器，而无需任何选项：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql</code></strong>
</pre><p>
        After you have connected successfully, you can disconnect any time
        by typing <code class="literal">QUIT</code> (or <code class="literal">\q</code>) at
        the <code class="literal">mysql&gt;</code> prompt:
    </p><p style="color:blue;">成功连接后，您可以通过在mysql&gt;提示符下键入quit（或q）随时断开连接：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>QUIT</code></strong>
Bye
</pre><p>
        On Unix, you can also disconnect by pressing Control+D.
    </p><p style="color:blue;">在unix上，也可以通过按control+d断开连接。</p><p>
        Most examples in the following sections assume that you are
        connected to the server. They indicate this by the
        <code class="literal">mysql&gt;</code> prompt.
    </p><p style="color:blue;">以下部分中的大多数示例假定您已连接到服务器。它们通过mysql&gt;提示来指示这一点。</p>
    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="entering-queries"></a>3.2&nbsp;Entering Queries</h2>

                </div>

            </div>

        </div>
        <a class="indexterm" name="idm140286948016304"></a><a class="indexterm" name="idm140286948014816"></a><a class="indexterm" name="idm140286948013328"></a><p>
        Make sure that you are connected to the server, as discussed in
        the previous section. Doing so does not in itself select any
        database to work with, but that is okay. At this point, it is more
        important to find out a little about how to issue queries than to
        jump right in creating tables, loading data into them, and
        retrieving data from them. This section describes the basic
        principles of entering queries, using several queries you can try
        out to familiarize yourself with how <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        works.
    </p><p style="color:blue;">如前一节所述，确保已连接到服务器。这样做本身不会选择任何要使用的数据库，但这是可以的。此时，了解如何发出查询比直接创建表、将数据加载到表中并从表中检索数据更重要。本节介绍输入查询的基本原则，您可以尝试使用几个查询来熟悉mysql的工作原理。</p><p>
        Here is a simple query that asks the server to tell you its
        version number and the current date. Type it in as shown here
        following the <code class="literal">mysql&gt;</code> prompt and press Enter:
    </p><p style="color:blue;">这里有一个简单的查询，要求服务器告诉您它的版本号和当前日期。在mysql&gt;提示下，按如下所示键入并按enter键：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION(), CURRENT_DATE;</code></strong>
+--------------+--------------+
| VERSION()    | CURRENT_DATE |
+--------------+--------------+
| 5.7.1-m4-log | 2012-12-25   |
+--------------+--------------+
1 row in set (0.01 sec)
mysql&gt;
</pre><p>
        This query illustrates several things about
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>:
    </p><p style="color:blue;">这个查询说明了mysql的几个方面：</p>
        <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                A query normally consists of an SQL statement followed by a
                semicolon. (There are some exceptions where a semicolon may be
                omitted. <code class="literal">QUIT</code>, mentioned earlier, is one of
                them. We'll get to others later.)
            </p><p style="color:blue;">查询通常由SQL语句和分号组成。（在某些情况下，分号可以省略。前面提到的戒烟就是其中之一。我们稍后再联系其他人。）</p></li><li class="listitem"><p>
                When you issue a query, <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> sends it to
                the server for execution and displays the results, then prints
                another <code class="literal">mysql&gt;</code> prompt to indicate that
                it is ready for another query.
            </p><p style="color:blue;">当您发出一个查询时，mysql将其发送到服务器执行并显示结果，然后打印另一个mysql&gt;提示符，以指示它已准备好进行另一个查询。</p></li><li class="listitem"><p>
                <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> displays query output in tabular form
                (rows and columns). The first row contains labels for the
                columns. The rows following are the query results. Normally,
                column labels are the names of the columns you fetch from
                database tables. If you're retrieving the value of an
                expression rather than a table column (as in the example just
                shown), <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> labels the column using the
                expression itself.
            </p><p style="color:blue;">mysql以表格形式（行和列）显示查询输出。第一行包含列的标签。下面的行是查询结果。通常，列标签是从数据库表中获取的列的名称。如果要检索表达式的值而不是表列（如刚刚显示的示例所示），mysql将使用表达式本身标记列。</p></li><li class="listitem"><p>
                <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> shows how many rows were returned and
                how long the query took to execute, which gives you a rough
                idea of server performance. These values are imprecise because
                they represent wall clock time (not CPU or machine time), and
                because they are affected by factors such as server load and
                network latency. (For brevity, the <span class="quote">“<span class="quote">rows in set</span>”</span>
                line is sometimes not shown in the remaining examples in this
                chapter.)
            </p><p style="color:blue;">mysql显示了返回的行数和执行查询所需的时间，这让您大致了解了服务器性能。这些值不精确，因为它们表示墙时钟时间（而不是CPU或机器时间），并且它们受服务器负载和网络延迟等因素的影响。（为简洁起见，本章余下的示例中有时不显示“rows in set”行。）</p></li></ul>
        </div>
        <p>
            Keywords may be entered in any lettercase. The following queries
            are equivalent:
        </p><p style="color:blue;">关键字可以输入任何字母大小写。以下查询是等效的：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION(), CURRENT_DATE;</code></strong>
mysql&gt; <strong class="userinput"><code>select version(), current_date;</code></strong>
mysql&gt; <strong class="userinput"><code>SeLeCt vErSiOn(), current_DATE;</code></strong>
</pre><p>
        Here is another query. It demonstrates that you can use
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> as a simple calculator:
    </p><p style="color:blue;">这是另一个问题。它演示了可以将mysql用作一个简单的计算器：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SIN(PI()/4), (4+1)*5;</code></strong>
+------------------+---------+
| SIN(PI()/4)      | (4+1)*5 |
+------------------+---------+
| 0.70710678118655 |      25 |
+------------------+---------+
1 row in set (0.02 sec)
</pre><p>
        The queries shown thus far have been relatively short, single-line
        statements. You can even enter multiple statements on a single
        line. Just end each one with a semicolon:
    </p><p style="color:blue;">到目前为止显示的查询都是相对较短的单行语句。您甚至可以在一行中输入多个语句。用分号结尾：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION(); SELECT NOW();</code></strong>
+------------------+
| VERSION()        |
+------------------+
| 5.7.10-ndb-7.5.1 |
+------------------+
1 row in set (0.00 sec)

+---------------------+
| NOW()               |
+---------------------+
| 2016-01-29 18:02:55 |
+---------------------+
1 row in set (0.00 sec)
</pre><p>
        A query need not be given all on a single line, so lengthy queries
        that require several lines are not a problem.
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> determines where your statement ends by
        looking for the terminating semicolon, not by looking for the end
        of the input line. (In other words, <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        accepts free-format input: it collects input lines but does not
        execute them until it sees the semicolon.)
    </p><p style="color:blue;">一个查询不需要全部放在一行上，因此需要几行的冗长查询不是问题。mysql通过查找结束分号而不是输入行的结尾来确定语句的结束位置。（换句话说，mysql接受自由格式的输入：它收集输入行，但在看到分号之前不会执行它们。）</p><p>
        Here is a simple multiple-line statement:
    </p><p style="color:blue;">下面是一个简单的多行语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>USER()</code></strong>
    -&gt; <strong class="userinput"><code>,</code></strong>
    -&gt; <strong class="userinput"><code>CURRENT_DATE;</code></strong>
+---------------+--------------+
| USER()        | CURRENT_DATE |
+---------------+--------------+
| jon@localhost | 2010-08-06   |
+---------------+--------------+
</pre><p>
        In this example, notice how the prompt changes from
        <code class="literal">mysql&gt;</code> to <code class="literal">-&gt;</code> after you
        enter the first line of a multiple-line query. This is how
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> indicates that it has not yet seen a
        complete statement and is waiting for the rest. The prompt is your
        friend, because it provides valuable feedback. If you use that
        feedback, you can always be aware of what <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        is waiting for.
    </p><p style="color:blue;">在本例中，请注意在您输入多行查询的第一行后，提示如何从mysql&gt;更改为-&gt;。这就是mysql表示它还没有看到完整的语句并在等待其他语句的方式。提示是你的朋友，因为它提供了有价值的反馈。如果你使用了这个反馈，你可以随时知道mysql在等待什么。</p><p>
        If you decide you do not want to execute a query that you are in
        the process of entering, cancel it by typing
        <code class="literal">\c</code>:
    </p><p style="color:blue;">如果决定不执行正在输入的查询，请键入以下命令取消该查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>USER()</code></strong>
    -&gt; <strong class="userinput"><code>\c</code></strong>
mysql&gt;
</pre><p>
        Here, too, notice the prompt. It switches back to
        <code class="literal">mysql&gt;</code> after you type <code class="literal">\c</code>,
        providing feedback to indicate that <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is
        ready for a new query.
    </p><p style="color:blue;">这里，也注意提示。在您键入\c之后，它会切换回mysql&gt;，提供反馈以指示mysql已准备好进行新的查询。</p><p>
        The following table shows each of the prompts you may see and
        summarizes what they mean about the state that
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is in.
    </p><p style="color:blue;">下表显示了您可能看到的每个提示，并总结了它们对mysql所处状态的意义。</p><a class="indexterm" name="idm140286947961920"></a>
        <div class="informaltable">
            <table summary="MySQL prompts and the meaning of each prompt."><colgroup><col width="10%"><col width="80%"></colgroup><thead><tr>
                <th scope="col">Prompt</th>
                <th scope="col">Meaning</th>
            </tr></thead><tbody><tr>
                <td scope="row"><code class="literal">mysql&gt;</code></td>
                <td>Ready for new query</td>
            </tr><tr>
                <td scope="row"><code class="literal">-&gt;</code></td>
                <td>Waiting for next line of multiple-line query</td>
            </tr><tr>
                <td scope="row"><code class="literal">'&gt;</code></td>
                <td>Waiting for next line, waiting for completion of a string that began
                    with a single quote (<code class="literal">'</code>)</td>
            </tr><tr>
                <td scope="row"><code class="literal">"&gt;</code></td>
                <td>Waiting for next line, waiting for completion of a string that began
                    with a double quote (<code class="literal">"</code>)</td>
            </tr><tr>
                <td scope="row"><code class="literal">`&gt;</code></td>
                <td>Waiting for next line, waiting for completion of an identifier that
                    began with a backtick (<code class="literal">`</code>)</td>
            </tr><tr>
                <td scope="row"><code class="literal">/*&gt;</code></td>
                <td>Waiting for next line, waiting for completion of a comment that began
                    with <code class="literal">/*</code></td>
            </tr></tbody></table>
        </div>
        <p>
            Multiple-line statements commonly occur by accident when you
            intend to issue a query on a single line, but forget the
            terminating semicolon. In this case, <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
            waits for more input:
        </p><p style="color:blue;">当您打算在一行上发出查询时，通常会意外地出现多行语句，但请忘记终止分号。在这种情况下，mysql将等待更多的输入：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER()</code></strong>
    -&gt;
</pre><p>
        If this happens to you (you think you've entered a statement but
        the only response is a <code class="literal">-&gt;</code> prompt), most
        likely <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is waiting for the semicolon. If
        you don't notice what the prompt is telling you, you might sit
        there for a while before realizing what you need to do. Enter a
        semicolon to complete the statement, and <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        executes it:
    </p><p style="color:blue;">如果发生这种情况（您认为您输入了一个语句，但唯一的响应是一个-&gt;提示符），那么mysql很可能正在等待分号。如果你没有注意到提示告诉你的是什么，你可能会在意识到你需要做什么之前坐在那里一会儿。输入分号以完成语句，mysql执行它：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER()</code></strong>
    -&gt; <strong class="userinput"><code>;</code></strong>
+---------------+
| USER()        |
+---------------+
| jon@localhost |
+---------------+
</pre><p>
        The <code class="literal">'&gt;</code> and <code class="literal">"&gt;</code> prompts
        occur during string collection (another way of saying that MySQL
        is waiting for completion of a string). In MySQL, you can write
        strings surrounded by either <code class="literal">'</code> or
        <code class="literal">"</code> characters (for example,
        <code class="literal">'hello'</code> or <code class="literal">"goodbye"</code>), and
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> lets you enter strings that span multiple
        lines. When you see a <code class="literal">'&gt;</code> or
        <code class="literal">"&gt;</code> prompt, it means that you have entered a
        line containing a string that begins with a <code class="literal">'</code>
        or <code class="literal">"</code> quote character, but have not yet entered
        the matching quote that terminates the string. This often
        indicates that you have inadvertently left out a quote character.
        For example:
    </p><p style="color:blue;">“&gt;和”&gt;提示出现在字符串收集期间（另一种说法是mysql正在等待字符串完成）。在mysql中，您可以编写由'或'字符（例如，'hello'或'goodbye'字符）包围的字符串，mysql允许您输入跨多行的字符串。当您看到“&gt;或”&gt;提示时，这意味着您输入了一行，其中包含以“或”引号字符开头的字符串，但尚未输入终止该字符串的匹配引号。这通常表示您无意中遗漏了引号字符。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM my_table WHERE name = 'Smith AND age &lt; 30;</code></strong>
    '&gt;
</pre><p>
        If you enter this <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> statement,
        then press <span class="keycap"><strong>Enter</strong></span> and wait for the result, nothing
        happens. Instead of wondering why this query takes so long, notice
        the clue provided by the <code class="literal">'&gt;</code> prompt. It tells
        you that <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> expects to see the rest of an
        unterminated string. (Do you see the error in the statement? The
        string <code class="literal">'Smith</code> is missing the second single
        quotation mark.)
    </p><p style="color:blue;">如果输入此select语句，然后按enter并等待结果，则不会发生任何事情。不要想知道为什么这个查询需要这么长时间，请注意“&gt;提示符提供的线索。它告诉您mysql希望看到未终止字符串的其余部分。（你看到陈述中的错误了吗？字符串“smith缺少第二个单引号。）</p><p>
        At this point, what do you do? The simplest thing is to cancel the
        query. However, you cannot just type <code class="literal">\c</code> in this
        case, because <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> interprets it as part of
        the string that it is collecting. Instead, enter the closing quote
        character (so <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> knows you've finished the
        string), then type <code class="literal">\c</code>:
    </p><p style="color:blue;">在这一点上，你做什么？最简单的事情就是取消查询。但是，在这种情况下不能只键入\c，因为mysql将其解释为它正在收集的字符串的一部分。相反，请输入右引号字符（这样MySQL就知道您已经完成了字符串），然后键入\c：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM my_table WHERE name = 'Smith AND age &lt; 30;</code></strong>
    '&gt; <strong class="userinput"><code>'\c</code></strong>
mysql&gt;
</pre><p>
        The prompt changes back to <code class="literal">mysql&gt;</code>,
        indicating that <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is ready for a new query.
    </p><p style="color:blue;">提示变回mysql&gt;，表示mysql已准备好进行新的查询。</p><p>
        The <code class="literal">`&gt;</code> prompt is similar to the
        <code class="literal">'&gt;</code> and <code class="literal">"&gt;</code> prompts, but
        indicates that you have begun but not completed a backtick-quoted
        identifier.
    </p><p style="color:blue;">“&gt;提示类似于”&gt;和“&gt;提示，但表示您已经开始但尚未完成一个反勾引号的标识符。</p><p>
        It is important to know what the <code class="literal">'&gt;</code>,
        <code class="literal">"&gt;</code>, and <code class="literal">`&gt;</code> prompts
        signify, because if you mistakenly enter an unterminated string,
        any further lines you type appear to be ignored by
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>—including a line containing
        <code class="literal">QUIT</code>. This can be quite confusing, especially
        if you do not know that you need to supply the terminating quote
        before you can cancel the current query.
    </p><p style="color:blue;">很重要的一点是要知道“&gt;”&gt;和“&gt;提示意味着什么，因为如果您错误地输入了一个未终止的字符串，mysql将忽略您键入的任何其他行，包括包含quit的行。这可能会非常混乱，特别是如果您不知道需要在取消当前查询之前提供终止报价。</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

            <div class="admon-title">
                Note
            </div>
            <p>
                Multiline statements from this point on are written without the
                secondary (<code class="literal">-&gt;</code> or other) prompts, to make
                it easier to copy and paste the statements to try for yourself.
            </p><p style="color:blue;">从这一点开始，多行语句都是在没有第二个（-&gt;）或其他提示的情况下编写的，这样可以更容易地复制和粘贴语句以供自己尝试。</p>
        </div>

    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="database-use"></a>3.3&nbsp;Creating and Using a Database</h2>

                </div>

            </div>

        </div>
        <div class="toc">
            <dl class="toc"><dt><span class="section"><a href="tutorial.html#creating-database">3.3.1 Creating and Selecting a Database</a></span></dt><dt><span class="section"><a href="tutorial.html#creating-tables">3.3.2 Creating a Table</a></span></dt><dt><span class="section"><a href="tutorial.html#loading-tables">3.3.3 Loading Data into a Table</a></span></dt><dt><span class="section"><a href="tutorial.html#retrieving-data">3.3.4 Retrieving Information from a Table</a></span></dt></dl>
        </div>
        <a class="indexterm" name="idm140286947889024"></a><a class="indexterm" name="idm140286947887568"></a><a class="indexterm" name="idm140286947886080"></a><p>
        Once you know how to enter SQL statements, you are ready to access
        a database.
    </p><p style="color:blue;">一旦知道如何输入sql语句，就可以访问数据库了。</p><p>
        Suppose that you have several pets in your home (your menagerie)
        and you would like to keep track of various types of information
        about them. You can do so by creating tables to hold your data and
        loading them with the desired information. Then you can answer
        different sorts of questions about your animals by retrieving data
        from the tables. This section shows you how to perform the
        following operations:
    </p><p style="color:blue;">假设你家里（你的动物园）有几只宠物，你想跟踪它们的各种信息。您可以通过创建表来保存数据，并用所需的信息加载它们。然后你可以通过从表格中检索数据来回答关于你的动物的各种问题。本节介绍如何执行以下操作：</p>
        <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                Create a database
            </p><p style="color:blue;">创建数据库</p></li><li class="listitem"><p>
                Create a table
            </p><p style="color:blue;">创建表</p></li><li class="listitem"><p>
                Load data into the table
            </p><p style="color:blue;">将数据加载到表中</p></li><li class="listitem"><p>
                Retrieve data from the table in various ways
            </p><p style="color:blue;">以各种方式从表中检索数据</p></li><li class="listitem"><p>
                Use multiple tables
            </p><p style="color:blue;">使用多个表</p></li></ul>
        </div>
        <p>
            The menagerie database is simple (deliberately), but it is not
            difficult to think of real-world situations in which a similar
            type of database might be used. For example, a database like this
            could be used by a farmer to keep track of livestock, or by a
            veterinarian to keep track of patient records. A menagerie
            distribution containing some of the queries and sample data used
            in the following sections can be obtained from the MySQL website.
            It is available in both compressed <span class="command"><strong>tar</strong></span> file and
            Zip formats at <a class="ulink" href="https://dev.mysql.com/doc/" target="_top">https://dev.mysql.com/doc/</a>.
        </p><p style="color:blue;">动物园数据库很简单（故意），但不难想象在现实世界中可能会使用类似类型的数据库。例如，这样的数据库可以被农民用来跟踪牲畜，也可以被兽医用来跟踪病人记录。可以从mysql网站获得包含以下部分中使用的一些查询和示例数据的动物园发行版。它以压缩tar文件和zip格式在https://dev.mysql.com/doc/上提供。</p><p>
        Use the <a class="link" href="sql-syntax.html#show" title="13.7.5&nbsp;SHOW Syntax"><code class="literal">SHOW</code></a> statement to find out
        what databases currently exist on the server:
    </p><p style="color:blue;">使用Stand语句查找服务器上当前存在的数据库：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW DATABASES;</code></strong>
+----------+
| Database |
+----------+
| mysql    |
| test     |
| tmp      |
+----------+
</pre><p>
        The <code class="literal">mysql</code> database describes user access
        privileges. The <code class="literal">test</code> database often is
        available as a workspace for users to try things out.
    </p><p style="color:blue;">mysql数据库描述了用户访问权限。测试数据库通常可以作为用户尝试的工作区。</p><p>
        The list of databases displayed by the statement may be different
        on your machine; <a class="link" href="sql-syntax.html#show-databases" title="13.7.5.14&nbsp;SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a>
        does not show databases that you have no privileges for if you do
        not have the <a class="link" href="sql-syntax.html#show-databases" title="13.7.5.14&nbsp;SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a>
        privilege. See <a class="xref" href="sql-syntax.html#show-databases" title="13.7.5.14&nbsp;SHOW DATABASES Syntax">Section&nbsp;13.7.5.14, “SHOW DATABASES Syntax”</a>.
    </p><p style="color:blue;">语句显示的数据库列表在您的计算机上可能不同；如果您没有“显示数据库”权限，则“显示数据库”不会显示您没有权限的数据库。见第13.7.5.14节“显示数据库语法”。</p><p>
        If the <code class="literal">test</code> database exists, try to access it:
    </p><p style="color:blue;">如果存在测试数据库，请尝试访问它：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>USE test</code></strong>
Database changed
</pre><p>
        <a class="link" href="sql-syntax.html#use" title="13.8.4&nbsp;USE Syntax"><code class="literal">USE</code></a>, like <code class="literal">QUIT</code>,
        does not require a semicolon. (You can terminate such statements
        with a semicolon if you like; it does no harm.) The
        <a class="link" href="sql-syntax.html#use" title="13.8.4&nbsp;USE Syntax"><code class="literal">USE</code></a> statement is special in another
        way, too: it must be given on a single line.
    </p><p style="color:blue;">像quit一样，use不需要分号。（如果愿意的话，可以用分号来终止这些语句；这样做不会造成伤害。）use语句在另一方面也很特殊：它必须在一行上给出。</p><p>
        You can use the <code class="literal">test</code> database (if you have
        access to it) for the examples that follow, but anything you
        create in that database can be removed by anyone else with access
        to it. For this reason, you should probably ask your MySQL
        administrator for permission to use a database of your own.
        Suppose that you want to call yours <code class="literal">menagerie</code>.
        The administrator needs to execute a statement like this:
    </p><p style="color:blue;">您可以在下面的示例中使用测试数据库（如果您有权访问它），但是您在该数据库中创建的任何内容都可以被其他有权访问它的人删除。因此，您可能应该请求mysql管理员允许您使用自己的数据库。假设你想给你的动物园打电话。管理员需要执行如下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>GRANT ALL ON menagerie.* TO 'your_mysql_name'@'your_client_host';</code></strong>
</pre><p>
        where <code class="literal">your_mysql_name</code> is the MySQL user name
        assigned to you and <code class="literal">your_client_host</code> is the
        host from which you connect to the server.
    </p><p style="color:blue;">其中，mysql_name是分配给您的mysql用户名，而您的_client_host是连接到服务器的主机。</p>
        <div class="section">

            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="creating-database"></a>3.3.1&nbsp;Creating and Selecting a Database</h3>
                    </div>
                </div>
            </div>
            <a class="indexterm" name="idm140286947853536"></a><a class="indexterm" name="idm140286947852080"></a><p>
            If the administrator creates your database for you when setting
            up your permissions, you can begin using it. Otherwise, you need
            to create it yourself:
        </p><p style="color:blue;">如果管理员在设置权限时为您创建数据库，您可以开始使用它。否则，您需要自己创建它：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE DATABASE menagerie;</code></strong>
</pre><p>
            Under Unix, database names are case-sensitive (unlike SQL
            keywords), so you must always refer to your database as
            <code class="literal">menagerie</code>, not as
            <code class="literal">Menagerie</code>, <code class="literal">MENAGERIE</code>, or
            some other variant. This is also true for table names. (Under
            Windows, this restriction does not apply, although you must
            refer to databases and tables using the same lettercase
            throughout a given query. However, for a variety of reasons, the
            recommended best practice is always to use the same lettercase
            that was used when the database was created.)
        </p><p style="color:blue;">在unix下，数据库名称是区分大小写的（与sql关键字不同），因此必须始终将数据库引用为动物园，而不是动物园、动物园或其他变量。对于表名也是如此。（在windows下，此限制不适用，尽管在给定查询中必须使用相同的字母大小写引用数据库和表。但是，由于各种原因，建议的最佳做法始终是使用创建数据库时使用的同一个字母大小写。）</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    If you get an error such as <span class="errortext">ERROR 1044 (42000):
          Access denied for user 'micah'@'localhost' to database
          'menagerie'</span> when attempting to create a database,
                    this means that your user account does not have the necessary
                    privileges to do so. Discuss this with the administrator or
                    see <a class="xref" href="security.html#access-control" title="6.2&nbsp;Access Control and Account Management">Section&nbsp;6.2, “Access Control and Account Management”</a>.
                </p><p style="color:blue;">如果在尝试创建数据库时遇到错误1044（42000）：拒绝用户“micah”@“localhost”访问数据库“menagerie”，则表示您的用户帐户没有创建数据库所需的权限。与管理员讨论或参见第6.2节“访问控制和帐户管理”。</p>
            </div>
            <p>
                Creating a database does not select it for use; you must do that
                explicitly. To make <code class="literal">menagerie</code> the current
                database, use this statement:
            </p><p style="color:blue;">创建数据库不会选择要使用的数据库；您必须显式地这样做。要使动物园成为当前数据库，请使用以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>USE menagerie</code></strong>
Database changed
</pre><p>
            Your database needs to be created only once, but you must select
            it for use each time you begin a <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
            session. You can do this by issuing a
            <a class="link" href="sql-syntax.html#use" title="13.8.4&nbsp;USE Syntax"><code class="literal">USE</code></a> statement as shown in the
            example. Alternatively, you can select the database on the
            command line when you invoke <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>. Just
            specify its name after any connection parameters that you might
            need to provide. For example:
        </p><p style="color:blue;">您的数据库只需要创建一次，但每次启动mysql会话时都必须选择使用它。您可以通过发出use语句来完成此操作，如示例中所示。或者，可以在调用mysql时在命令行上选择数据库。只需在您可能需要提供的任何连接参数之后指定其名称。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p menagerie</code></strong>
Enter password: <strong class="userinput"><code>********</code></strong>
</pre>
            <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Important
                </div>
                <p>
                    <code class="literal">menagerie</code> in the command just shown is
                    <span class="bold"><strong>not</strong></span> your password. If you
                    want to supply your password on the command line after the
                    <code class="literal">-p</code> option, you must do so with no
                    intervening space (for example, as
                    <code class="literal">-p<em class="replaceable"><code>password</code></em></code>, not
                    as <code class="literal">-p <em class="replaceable"><code>password</code></em></code>).
                    However, putting your password on the command line is not
                    recommended, because doing so exposes it to snooping by other
                    users logged in on your machine.
                </p><p style="color:blue;">刚才显示的命令中的动物园不是您的密码。如果要在命令行中-p选项之后提供密码，则必须在没有中间空格的情况下提供（例如，as-p password，而不是as-p password）。但是，不建议将您的密码放在命令行中，因为这样做会暴露给登录到您的计算机上的其他用户的窥探。</p>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                <div class="admon-title">
                    Note
                </div>
                <p>
                    You can see at any time which database is currently selected
                    using <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>
                    <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a>.
                </p><p style="color:blue;">您可以随时使用select database（）查看当前选择的数据库。</p>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="creating-tables"></a>3.3.2&nbsp;Creating a Table</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286947822592"></a><a class="indexterm" name="idm140286947821104"></a><p>
            Creating the database is the easy part, but at this point it is
            empty, as <a class="link" href="sql-syntax.html#show-tables" title="13.7.5.37&nbsp;SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a> tells you:
        </p><p style="color:blue;">创建数据库很简单，但此时它是空的，如show tables所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
Empty set (0.00 sec)
</pre><p>
            The harder part is deciding what the structure of your database
            should be: what tables you need and what columns should be in
            each of them.
        </p><p style="color:blue;">更难的是决定数据库的结构应该是什么：需要哪些表，每个表中应该有哪些列。</p><p>
            You want a table that contains a record for each of your pets.
            This can be called the <code class="literal">pet</code> table, and it
            should contain, as a bare minimum, each animal's name. Because
            the name by itself is not very interesting, the table should
            contain other information. For example, if more than one person
            in your family keeps pets, you might want to list each animal's
            owner. You might also want to record some basic descriptive
            information such as species and sex.
        </p><p style="color:blue;">你想要一张桌子，里面有你每只宠物的记录。这可以称为宠物桌，它应该包含，作为最低限度，每个动物的名字。由于名称本身不是很有趣，所以表应该包含其他信息。例如，如果您家中有多个人养宠物，您可能需要列出每个动物的主人。您可能还需要记录一些基本的描述性信息，如物种和性别。</p><p>
            How about age? That might be of interest, but it is not a good
            thing to store in a database. Age changes as time passes, which
            means you'd have to update your records often. Instead, it is
            better to store a fixed value such as date of birth. Then,
            whenever you need age, you can calculate it as the difference
            between the current date and the birth date. MySQL provides
            functions for doing date arithmetic, so this is not difficult.
            Storing birth date rather than age has other advantages, too:
        </p><p style="color:blue;">年龄怎么样？这可能很有意思，但存储在数据库中不是一件好事。年龄随着时间的推移而变化，这意味着你必须经常更新你的记录。相反，最好存储一个固定值，如出生日期。然后，只要你需要年龄，你就可以把它计算为当前日期和出生日期之间的差额。mysql提供了进行日期运算的功能，所以这并不困难。存储出生日期而不是年龄还有其他好处：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    You can use the database for tasks such as generating
                    reminders for upcoming pet birthdays. (If you think this
                    type of query is somewhat silly, note that it is the same
                    question you might ask in the context of a business database
                    to identify clients to whom you need to send out birthday
                    greetings in the current week or month, for that
                    computer-assisted personal touch.)
                </p><p style="color:blue;">您可以使用数据库执行任务，例如为即将到来的宠物生日生成提醒。（如果您认为这类查询有些愚蠢，请注意，在业务数据库中，您可能会问同一个问题，以确定您需要在当前星期或月份向哪些客户发送生日问候，以便进行计算机辅助的个人触摸。）</p></li><li class="listitem"><p>
                    You can calculate age in relation to dates other than the
                    current date. For example, if you store death date in the
                    database, you can easily calculate how old a pet was when it
                    died.
                </p><p style="color:blue;">您可以根据当前日期以外的日期计算年龄。例如，如果您将死亡日期存储在数据库中，则可以轻松计算宠物死亡时的年龄。</p></li></ul>
            </div>
            <p>
                You can probably think of other types of information that would
                be useful in the <code class="literal">pet</code> table, but the ones
                identified so far are sufficient: name, owner, species, sex,
                birth, and death.
            </p><p style="color:blue;">您可能可以在宠物表中考虑其他类型的有用信息，但目前确定的信息已经足够：姓名、主人、物种、性别、出生和死亡。</p><p>
            Use a <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement to
            specify the layout of your table:
        </p><p style="color:blue;">使用CREATE TABLE语句指定表的布局：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE pet (name VARCHAR(20), owner VARCHAR(20),</code></strong>
       <strong class="userinput"><code>species VARCHAR(20), sex CHAR(1), birth DATE, death DATE);</code></strong>
</pre><p>
            <a class="link" href="data-types.html#char" title="11.4.1&nbsp;The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> is a good choice for the
            <code class="literal">name</code>, <code class="literal">owner</code>, and
            <code class="literal">species</code> columns because the column values
            vary in length. The lengths in those column definitions need not
            all be the same, and need not be <code class="literal">20</code>. You can
            normally pick any length from <code class="literal">1</code> to
            <code class="literal">65535</code>, whatever seems most reasonable to you.
            If you make a poor choice and it turns out later that you need a
            longer field, MySQL provides an <a class="link" href="sql-syntax.html#alter-table" title="13.1.8&nbsp;ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> statement.
        </p><p style="color:blue;">varchar对于name、owner和species列是一个不错的选择，因为列的值在长度上有所不同。这些列定义中的长度不必全部相同，也不必是20。你通常可以选择任何长度从1到65535，无论你觉得最合理的。如果您做了一个错误的选择，后来发现您需要一个更长的字段，mysql会提供一个alter table语句。</p><p>
            Several types of values can be chosen to represent sex in animal
            records, such as <code class="literal">'m'</code> and
            <code class="literal">'f'</code>, or perhaps <code class="literal">'male'</code> and
            <code class="literal">'female'</code>. It is simplest to use the single
            characters <code class="literal">'m'</code> and <code class="literal">'f'</code>.
        </p><p style="color:blue;">可以选择几种类型的值来表示动物记录中的性别，例如“M”和“F”，或者可能是“男性”和“女性”。使用单个字符“m”和“f”是最简单的。</p><p>
            The use of the <a class="link" href="data-types.html#datetime" title="11.3.1&nbsp;The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> data type for
            the <code class="literal">birth</code> and <code class="literal">death</code>
            columns is a fairly obvious choice.
        </p><p style="color:blue;">在birth和death列中使用日期数据类型是一个相当明显的选择。</p><p>
            Once you have created a table, <a class="link" href="sql-syntax.html#show-tables" title="13.7.5.37&nbsp;SHOW TABLES Syntax"><code class="literal">SHOW
            TABLES</code></a> should produce some output:
        </p><p style="color:blue;">创建表后，show tables应该会产生一些输出：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
+---------------------+
| Tables in menagerie |
+---------------------+
| pet                 |
+---------------------+
</pre><p>
            To verify that your table was created the way you expected, use
            a <a class="link" href="sql-syntax.html#describe" title="13.8.1&nbsp;DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> statement:
        </p><p style="color:blue;">要验证表是否按预期方式创建，请使用describe语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE pet;</code></strong>
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| name    | varchar(20) | YES  |     | NULL    |       |
| owner   | varchar(20) | YES  |     | NULL    |       |
| species | varchar(20) | YES  |     | NULL    |       |
| sex     | char(1)     | YES  |     | NULL    |       |
| birth   | date        | YES  |     | NULL    |       |
| death   | date        | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
</pre><p>
            You can use <a class="link" href="sql-syntax.html#describe" title="13.8.1&nbsp;DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> any time,
            for example, if you forget the names of the columns in your
            table or what types they have.
        </p><p style="color:blue;">例如，如果忘记了表中列的名称或列的类型，则可以随时使用“描述”。</p><p>
            For more information about MySQL data types, see
            <a class="xref" href="data-types.html" title="Chapter&nbsp;11&nbsp;Data Types">Chapter&nbsp;11, <i>Data Types</i></a>.
        </p><p style="color:blue;">有关mysql数据类型的更多信息，请参见第11章，数据类型。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="loading-tables"></a>3.3.3&nbsp;Loading Data into a Table</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286947777360"></a><a class="indexterm" name="idm140286947775904"></a><a class="indexterm" name="idm140286947774416"></a><p>
            After creating your table, you need to populate it. The
            <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> and
            <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a> statements are useful for
            this.
        </p><p style="color:blue;">创建表后，需要填充它。load data和insert语句对此很有用。</p><p>
            Suppose that your pet records can be described as shown here.
            (Observe that MySQL expects dates in
            <code class="literal">'YYYY-MM-DD'</code> format; this may be different
            from what you are used to.)
        </p><p style="color:blue;">假设您的宠物记录可以如图所示进行描述。（请注意，mysql希望日期采用“yyyy-mm-dd”格式；这可能与您习惯的格式不同。）</p>
            <div class="informaltable">
                <table summary="Example of pet records mentioned in the preceding text."><colgroup><col width="10%"><col width="10%"><col width="10%"><col width="05%"><col width="20%"><col width="20%"></colgroup><thead><tr>
                    <th scope="col">name</th>
                    <th scope="col">owner</th>
                    <th scope="col">species</th>
                    <th scope="col">sex</th>
                    <th scope="col">birth</th>
                    <th scope="col">death</th>
                </tr></thead><tbody><tr>
                    <td scope="row">Fluffy</td>
                    <td>Harold</td>
                    <td>cat</td>
                    <td>f</td>
                    <td>1993-02-04</td>
                    <td></td>
                </tr><tr>
                    <td scope="row">Claws</td>
                    <td>Gwen</td>
                    <td>cat</td>
                    <td>m</td>
                    <td>1994-03-17</td>
                    <td></td>
                </tr><tr>
                    <td scope="row">Buffy</td>
                    <td>Harold</td>
                    <td>dog</td>
                    <td>f</td>
                    <td>1989-05-13</td>
                    <td></td>
                </tr><tr>
                    <td scope="row">Fang</td>
                    <td>Benny</td>
                    <td>dog</td>
                    <td>m</td>
                    <td>1990-08-27</td>
                    <td></td>
                </tr><tr>
                    <td scope="row">Bowser</td>
                    <td>Diane</td>
                    <td>dog</td>
                    <td>m</td>
                    <td>1979-08-31</td>
                    <td>1995-07-29</td>
                </tr><tr>
                    <td scope="row">Chirpy</td>
                    <td>Gwen</td>
                    <td>bird</td>
                    <td>f</td>
                    <td>1998-09-11</td>
                    <td></td>
                </tr><tr>
                    <td scope="row">Whistler</td>
                    <td>Gwen</td>
                    <td>bird</td>
                    <td></td>
                    <td>1997-12-09</td>
                    <td></td>
                </tr><tr>
                    <td scope="row">Slim</td>
                    <td>Benny</td>
                    <td>snake</td>
                    <td>m</td>
                    <td>1996-04-29</td>
                    <td></td>
                </tr></tbody></table>
            </div>
            <p>
                Because you are beginning with an empty table, an easy way to
                populate it is to create a text file containing a row for each
                of your animals, then load the contents of the file into the
                table with a single statement.
            </p><p style="color:blue;">因为您是从一个空表开始的，填充它的一个简单方法是为每个动物创建一个包含一行的文本文件，然后用一个语句将文件的内容加载到表中。</p><p>
            You could create a text file <code class="filename">pet.txt</code>
            containing one record per line, with values separated by tabs,
            and given in the order in which the columns were listed in the
            <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement. For
            missing values (such as unknown sexes or death dates for animals
            that are still living), you can use <code class="literal">NULL</code>
            values. To represent these in your text file, use
            <code class="literal">\N</code> (backslash, capital-N). For example, the
            record for Whistler the bird would look like this (where the
            whitespace between values is a single tab character):
        </p><p style="color:blue;">您可以创建一个文本文件pet.txt，其中每行包含一条记录，值由制表符分隔，并按照create table语句中列的顺序给定。对于丢失的值（例如未知性别或仍在生存的动物的死亡日期），可以使用空值。要在文本文件中表示这些内容，请使用\n（反斜杠，大写-n）。例如，Whistler the bird的记录如下所示（其中值之间的空白是单个制表符）：</p><pre data-lang="none" class="programlisting">Whistler        Gwen    bird    \N      1997-12-09      \N
</pre><p>
            To load the text file <code class="filename">pet.txt</code> into the
            <code class="literal">pet</code> table, use this statement:
        </p><p style="color:blue;">要将文本文件pet.txt加载到pet表中，请使用以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD DATA LOCAL INFILE '/path/pet.txt' INTO TABLE pet;</code></strong>
</pre><p>
            If you created the file on Windows with an editor that uses
            <code class="literal">\r\n</code> as a line terminator, you should use
            this statement instead:
        </p><p style="color:blue;">如果您在Windows上创建的文件的编辑器使用行结束符，则应改为使用此语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD DATA LOCAL INFILE '/path/pet.txt' INTO TABLE pet</code></strong>
       <strong class="userinput"><code>LINES TERMINATED BY '\r\n';</code></strong>
</pre><p>
            (On an Apple machine running OS X, you would likely want to use
            <code class="literal">LINES TERMINATED BY '\r'</code>.)
        </p><p style="color:blue;">（在运行OS X的Apple计算机上，您可能希望使用以“\r”结尾的行。）</p><p>
            You can specify the column value separator and end of line
            marker explicitly in the <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD
            DATA</code></a> statement if you wish, but the defaults are tab
            and linefeed. These are sufficient for the statement to read the
            file <code class="filename">pet.txt</code> properly.
        </p><p style="color:blue;">如果愿意，可以在LOAD DATA语句中显式指定列值分隔符和行尾标记，但默认值为TAB和换行符。这些足够语句正确读取文件pet.txt。</p><p>
            If the statement fails, it is likely that your MySQL
            installation does not have local file capability enabled by
            default. See <a class="xref" href="security.html#load-data-local" title="6.1.6&nbsp;Security Issues with LOAD DATA LOCAL">Section&nbsp;6.1.6, “Security Issues with LOAD DATA LOCAL”</a>, for information
            on how to change this.
        </p><p style="color:blue;">如果语句失败，很可能您的mysql安装默认情况下没有启用本地文件功能。有关如何更改的信息，请参阅第6.1.6节“本地加载数据的安全问题”。</p><p>
            When you want to add new records one at a time, the
            <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a> statement is useful. In
            its simplest form, you supply values for each column, in the
            order in which the columns were listed in the
            <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement. Suppose
            that Diane gets a new hamster named <span class="quote">“<span class="quote">Puffball.</span>”</span> You
            could add a new record using an
            <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a> statement like this:
        </p><p style="color:blue;">当您想一次添加一条新记录时，insert语句非常有用。在最简单的形式中，按照CREATETABLE语句中列的顺序为每个列提供值。假设diane得到一个名为“puffball”的新仓鼠，您可以使用这样的insert语句添加一个新记录：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO pet</code></strong>
       <strong class="userinput"><code>VALUES ('Puffball','Diane','hamster','f','1999-03-30',NULL);</code></strong>
</pre><p>
            String and date values are specified as quoted strings here.
            Also, with <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>, you can insert
            <code class="literal">NULL</code> directly to represent a missing value.
            You do not use <code class="literal">\N</code> like you do with
            <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>.
        </p><p style="color:blue;">字符串和日期值在此指定为带引号的字符串。另外，使用insert，可以直接插入null来表示缺少的值。您不能像处理加载数据那样使用\n。</p><p>
            From this example, you should be able to see that there would be
            a lot more typing involved to load your records initially using
            several <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a> statements rather
            than a single <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>
            statement.
        </p><p style="color:blue;">从这个例子中，您应该能够看到，在最初使用多个insert语句而不是单个load data语句加载记录时，需要更多的类型。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="retrieving-data"></a>3.3.4&nbsp;Retrieving Information from a Table</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="tutorial.html#selecting-all">3.3.4.1 Selecting All Data</a></span></dt><dt><span class="section"><a href="tutorial.html#selecting-rows">3.3.4.2 Selecting Particular Rows</a></span></dt><dt><span class="section"><a href="tutorial.html#selecting-columns">3.3.4.3 Selecting Particular Columns</a></span></dt><dt><span class="section"><a href="tutorial.html#sorting-rows">3.3.4.4 Sorting Rows</a></span></dt><dt><span class="section"><a href="tutorial.html#date-calculations">3.3.4.5 Date Calculations</a></span></dt><dt><span class="section"><a href="tutorial.html#working-with-null">3.3.4.6 Working with NULL Values</a></span></dt><dt><span class="section"><a href="tutorial.html#pattern-matching">3.3.4.7 Pattern Matching</a></span></dt><dt><span class="section"><a href="tutorial.html#counting-rows">3.3.4.8 Counting Rows</a></span></dt><dt><span class="section"><a href="tutorial.html#multiple-tables">3.3.4.9 Using More Than one Table</a></span></dt></dl>
            </div>
            <a class="indexterm" name="idm140286947674928"></a><a class="indexterm" name="idm140286947673472"></a><a class="indexterm" name="idm140286947671984"></a><a class="indexterm" name="idm140286947670496"></a><p>
            The <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> statement is used to
            pull information from a table. The general form of the statement
            is:
        </p><p style="color:blue;">select语句用于从表中提取信息。声明的一般形式是：</p><pre data-lang="sql" class="programlisting">SELECT <em class="replaceable"><code>what_to_select</code></em>
FROM <em class="replaceable"><code>which_table</code></em>
WHERE <em class="replaceable"><code>conditions_to_satisfy</code></em>;
</pre><p>
            <em class="replaceable"><code>what_to_select</code></em> indicates what you
            want to see. This can be a list of columns, or
            <code class="literal">*</code> to indicate <span class="quote">“<span class="quote">all columns.</span>”</span>
            <em class="replaceable"><code>which_table</code></em> indicates the table from
            which you want to retrieve data. The <code class="literal">WHERE</code>
            clause is optional. If it is present,
            <em class="replaceable"><code>conditions_to_satisfy</code></em> specifies one
            or more conditions that rows must satisfy to qualify for
            retrieval.
        </p><p style="color:blue;">选择“要查看的内容”表示要查看的内容。这可以是列的列表，或者*表示“所有列”。哪个表表示要从中检索数据的表。where子句是可选的。如果存在，则conditions_to_satisfied指定行必须满足的一个或多个条件才能进行检索。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="selecting-all"></a>3.3.4.1&nbsp;Selecting All Data</h4>
                        </div>
                    </div>
                </div>
                <p>
                    The simplest form of <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>
                    retrieves everything from a table:
                </p><p style="color:blue;">select的最简单形式是从表中检索所有内容：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet;</code></strong>
+----------+--------+---------+------+------------+------------+
| name     | owner  | species | sex  | birth      | death      |
+----------+--------+---------+------+------------+------------+
| Fluffy   | Harold | cat     | f    | 1993-02-04 | NULL       |
| Claws    | Gwen   | cat     | m    | 1994-03-17 | NULL       |
| Buffy    | Harold | dog     | f    | 1989-05-13 | NULL       |
| Fang     | Benny  | dog     | m    | 1990-08-27 | NULL       |
| Bowser   | Diane  | dog     | m    | 1979-08-31 | 1995-07-29 |
| Chirpy   | Gwen   | bird    | f    | 1998-09-11 | NULL       |
| Whistler | Gwen   | bird    | NULL | 1997-12-09 | NULL       |
| Slim     | Benny  | snake   | m    | 1996-04-29 | NULL       |
| Puffball | Diane  | hamster | f    | 1999-03-30 | NULL       |
+----------+--------+---------+------+------------+------------+
</pre><p>
                This form of <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> is useful
                if you want to review your entire table, for example, after
                you've just loaded it with your initial data set. For example,
                you may happen to think that the birth date for Bowser doesn't
                seem quite right. Consulting your original pedigree papers,
                you find that the correct birth year should be 1989, not 1979.
            </p><p style="color:blue;">如果您想查看整个表（例如，在您刚将其与初始数据集一起加载之后），则此select表单非常有用。例如，你可能会碰巧认为鲍瑟的出生日期似乎不太正确。查阅你的原始血统文件，你会发现正确的出生年份应该是1989年，而不是1979年。</p><p>
                There are at least two ways to fix this:
            </p><p style="color:blue;">至少有两种方法可以解决此问题：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Edit the file <code class="filename">pet.txt</code> to correct the
                        error, then empty the table and reload it using
                        <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> and
                        <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>:
                    </p><p style="color:blue;">编辑文件pet.txt以更正错误，然后清空表并使用delete和load data重新加载它：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>DELETE FROM pet;</code></strong>
mysql&gt; <strong class="userinput"><code>LOAD DATA LOCAL INFILE '/path/pet.txt' INTO TABLE pet;</code></strong>
</pre><p>
                        However, if you do this, you must also re-enter the record
                        for Puffball.
                    </p><p style="color:blue;">但是，如果您这样做，您还必须重新输入泡芙球的记录。</p></li><li class="listitem"><p>
                        Fix only the erroneous record with an
                        <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a> statement:
                    </p><p style="color:blue;">仅用UPDATE语句修复错误记录：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE pet SET birth = '1989-08-31' WHERE name = 'Bowser';</code></strong>
</pre><p>
                        The <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a> changes only the
                        record in question and does not require you to reload the
                        table.
                    </p><p style="color:blue;">更新只更改有问题的记录，不需要重新加载表。</p></li></ul>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="selecting-rows"></a>3.3.4.2&nbsp;Selecting Particular Rows</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947639216"></a><a class="indexterm" name="idm140286947637760"></a><p>
                As shown in the preceding section, it is easy to retrieve an
                entire table. Just omit the <code class="literal">WHERE</code> clause
                from the <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> statement. But
                typically you don't want to see the entire table, particularly
                when it becomes large. Instead, you're usually more interested
                in answering a particular question, in which case you specify
                some constraints on the information you want. Let's look at
                some selection queries in terms of questions about your pets
                that they answer.
            </p><p style="color:blue;">如前一节所示，检索整个表很容易。只需从select语句中省略where子句。但通常情况下，您不想看到整个表，尤其是当它变大时。相反，您通常更感兴趣的是回答一个特定的问题，在这种情况下，您需要对信息指定一些约束。让我们看看一些关于宠物的选择问题。</p><p>
                You can select only particular rows from your table. For
                example, if you want to verify the change that you made to
                Bowser's birth date, select Bowser's record like this:
            </p><p style="color:blue;">只能从表中选择特定行。例如，如果要验证对Bowser出生日期所做的更改，请选择Bowser的记录，如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name = 'Bowser';</code></strong>
+--------+-------+---------+------+------------+------------+
| name   | owner | species | sex  | birth      | death      |
+--------+-------+---------+------+------------+------------+
| Bowser | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+-------+---------+------+------------+------------+
</pre><p>
                The output confirms that the year is correctly recorded as
                1989, not 1979.
            </p><p style="color:blue;">产出证实这一年被正确地记录为1989年，而不是1979年。</p><p>
                String comparisons normally are case-insensitive, so you can
                specify the name as <code class="literal">'bowser'</code>,
                <code class="literal">'BOWSER'</code>, and so forth. The query result is
                the same.
            </p><p style="color:blue;">字符串比较通常不区分大小写，因此可以将名称指定为“bowser”、“bowser”等。查询结果相同。</p><p>
                You can specify conditions on any column, not just
                <code class="literal">name</code>. For example, if you want to know
                which animals were born during or after 1998, test the
                <code class="literal">birth</code> column:
            </p><p style="color:blue;">您可以在任何列上指定条件，而不仅仅是名称。例如，如果要知道哪些动物在1998年期间或之后出生，请测试“出生”列：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE birth &gt;= '1998-1-1';</code></strong>
+----------+-------+---------+------+------------+-------+
| name     | owner | species | sex  | birth      | death |
+----------+-------+---------+------+------------+-------+
| Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |
| Puffball | Diane | hamster | f    | 1999-03-30 | NULL  |
+----------+-------+---------+------+------------+-------+
</pre><p>
                You can combine conditions, for example, to locate female
                dogs:
            </p><p style="color:blue;">例如，您可以组合条件来定位母狗：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE species = 'dog' AND sex = 'f';</code></strong>
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</pre><p>
                The preceding query uses the <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a>
                logical operator. There is also an
                <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> operator:
            </p><p style="color:blue;">前面的查询使用and逻辑运算符。还有一个或运算符：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE species = 'snake' OR species = 'bird';</code></strong>
+----------+-------+---------+------+------------+-------+
| name     | owner | species | sex  | birth      | death |
+----------+-------+---------+------+------------+-------+
| Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL  |
| Slim     | Benny | snake   | m    | 1996-04-29 | NULL  |
+----------+-------+---------+------+------------+-------+
</pre><p>
                <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a> and
                <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> may be intermixed, although
                <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a> has higher precedence than
                <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a>. If you use both operators, it
                is a good idea to use parentheses to indicate explicitly how
                conditions should be grouped:
            </p><p style="color:blue;">和或可以混合，尽管和具有比或更高的优先级。如果同时使用这两个运算符，最好使用括号来明确指示条件应如何分组：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE (species = 'cat' AND sex = 'm')</code></strong>
       <strong class="userinput"><code>OR (species = 'dog' AND sex = 'f');</code></strong>
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</pre>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="selecting-columns"></a>3.3.4.3&nbsp;Selecting Particular Columns</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947607456"></a><a class="indexterm" name="idm140286947606000"></a><p>
                If you do not want to see entire rows from your table, just
                name the columns in which you are interested, separated by
                commas. For example, if you want to know when your animals
                were born, select the <code class="literal">name</code> and
                <code class="literal">birth</code> columns:
            </p><p style="color:blue;">如果不想看到表中的整行，只需命名感兴趣的列，用逗号分隔。例如，如果要知道动物的出生时间，请选择“名称”和“出生”列：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth FROM pet;</code></strong>
+----------+------------+
| name     | birth      |
+----------+------------+
| Fluffy   | 1993-02-04 |
| Claws    | 1994-03-17 |
| Buffy    | 1989-05-13 |
| Fang     | 1990-08-27 |
| Bowser   | 1989-08-31 |
| Chirpy   | 1998-09-11 |
| Whistler | 1997-12-09 |
| Slim     | 1996-04-29 |
| Puffball | 1999-03-30 |
+----------+------------+
</pre><p>
                To find out who owns pets, use this query:
            </p><p style="color:blue;">要了解谁拥有宠物，请使用以下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT owner FROM pet;</code></strong>
+--------+
| owner  |
+--------+
| Harold |
| Gwen   |
| Harold |
| Benny  |
| Diane  |
| Gwen   |
| Gwen   |
| Benny  |
| Diane  |
+--------+
</pre><a class="indexterm" name="idm140286947598208"></a><p>
                Notice that the query simply retrieves the
                <code class="literal">owner</code> column from each record, and some of
                them appear more than once. To minimize the output, retrieve
                each unique output record just once by adding the keyword
                <code class="literal">DISTINCT</code>:
            </p><p style="color:blue;">注意，查询只是从每个记录中检索owner列，其中一些记录出现了不止一次。要最小化输出，只需通过添加关键字DISTINCT检索一次每个唯一的输出记录：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DISTINCT owner FROM pet;</code></strong>
+--------+
| owner  |
+--------+
| Benny  |
| Diane  |
| Gwen   |
| Harold |
+--------+
</pre><p>
                You can use a <code class="literal">WHERE</code> clause to combine row
                selection with column selection. For example, to get birth
                dates for dogs and cats only, use this query:
            </p><p style="color:blue;">可以使用where子句将行选择与列选择结合起来。例如，要仅获取猫狗的出生日期，请使用以下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, species, birth FROM pet</code></strong>
       <strong class="userinput"><code>WHERE species = 'dog' OR species = 'cat';</code></strong>
+--------+---------+------------+
| name   | species | birth      |
+--------+---------+------------+
| Fluffy | cat     | 1993-02-04 |
| Claws  | cat     | 1994-03-17 |
| Buffy  | dog     | 1989-05-13 |
| Fang   | dog     | 1990-08-27 |
| Bowser | dog     | 1989-08-31 |
+--------+---------+------------+
</pre>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="sorting-rows"></a>3.3.4.4&nbsp;Sorting Rows</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947588064"></a><a class="indexterm" name="idm140286947586992"></a><a class="indexterm" name="idm140286947585504"></a><a class="indexterm" name="idm140286947584016"></a><a class="indexterm" name="idm140286947582528"></a><p>
                You may have noticed in the preceding examples that the result
                rows are displayed in no particular order. It is often easier
                to examine query output when the rows are sorted in some
                meaningful way. To sort a result, use an <code class="literal">ORDER
                BY</code> clause.
            </p><p style="color:blue;">您可能已经注意到在前面的示例中，结果行没有以特定的顺序显示。当行以某种有意义的方式排序时，检查查询输出通常更容易。要对结果进行排序，请使用ORDERBY子句。</p><p>
                Here are animal birthdays, sorted by date:
            </p><p style="color:blue;">以下是按日期排序的动物生日：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth FROM pet ORDER BY birth;</code></strong>
+----------+------------+
| name     | birth      |
+----------+------------+
| Buffy    | 1989-05-13 |
| Bowser   | 1989-08-31 |
| Fang     | 1990-08-27 |
| Fluffy   | 1993-02-04 |
| Claws    | 1994-03-17 |
| Slim     | 1996-04-29 |
| Whistler | 1997-12-09 |
| Chirpy   | 1998-09-11 |
| Puffball | 1999-03-30 |
+----------+------------+
</pre><p>
                On character type columns, sorting—like all other
                comparison operations—is normally performed in a
                case-insensitive fashion. This means that the order is
                undefined for columns that are identical except for their
                case. You can force a case-sensitive sort for a column by
                using <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a> like so:
                <code class="literal">ORDER BY BINARY
                    <em class="replaceable"><code>col_name</code></em></code>.
            </p><p style="color:blue;">在字符类型列上，与所有其他比较操作一样，排序通常以不区分大小写的方式执行。这意味着，对于除了大小写之外都相同的列，顺序是未定义的。您可以使用类似于so:order by binary col_name的二进制命令强制对列进行区分大小写排序。</p><p>
                The default sort order is ascending, with smallest values
                first. To sort in reverse (descending) order, add the
                <code class="literal">DESC</code> keyword to the name of the column you
                are sorting by:
            </p><p style="color:blue;">默认的排序顺序是升序，先是最小的值。要按相反（降序）顺序排序，请将desc关键字添加到要排序的列的名称中：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth FROM pet ORDER BY birth DESC;</code></strong>
+----------+------------+
| name     | birth      |
+----------+------------+
| Puffball | 1999-03-30 |
| Chirpy   | 1998-09-11 |
| Whistler | 1997-12-09 |
| Slim     | 1996-04-29 |
| Claws    | 1994-03-17 |
| Fluffy   | 1993-02-04 |
| Fang     | 1990-08-27 |
| Bowser   | 1989-08-31 |
| Buffy    | 1989-05-13 |
+----------+------------+
</pre><p>
                You can sort on multiple columns, and you can sort different
                columns in different directions. For example, to sort by type
                of animal in ascending order, then by birth date within animal
                type in descending order (youngest animals first), use the
                following query:
            </p><p style="color:blue;">可以对多个列进行排序，也可以对不同方向的列进行排序。例如，要按动物类型按升序排序，然后按动物类型中的出生日期按降序排序（首先是最小的动物），请使用以下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, species, birth FROM pet</code></strong>
       <strong class="userinput"><code>ORDER BY species, birth DESC;</code></strong>
+----------+---------+------------+
| name     | species | birth      |
+----------+---------+------------+
| Chirpy   | bird    | 1998-09-11 |
| Whistler | bird    | 1997-12-09 |
| Claws    | cat     | 1994-03-17 |
| Fluffy   | cat     | 1993-02-04 |
| Fang     | dog     | 1990-08-27 |
| Bowser   | dog     | 1989-08-31 |
| Buffy    | dog     | 1989-05-13 |
| Puffball | hamster | 1999-03-30 |
| Slim     | snake   | 1996-04-29 |
+----------+---------+------------+
</pre><p>
                The <code class="literal">DESC</code> keyword applies only to the column
                name immediately preceding it (<code class="literal">birth</code>); it
                does not affect the <code class="literal">species</code> column sort
                order.
            </p><p style="color:blue;">desc关键字仅应用于紧靠其前面的列名（birth）；它不影响species列的排序顺序。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="date-calculations"></a>3.3.4.5&nbsp;Date Calculations</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947562464"></a><a class="indexterm" name="idm140286947561392"></a><a class="indexterm" name="idm140286947559904"></a><a class="indexterm" name="idm140286947558416"></a><p>
                MySQL provides several functions that you can use to perform
                calculations on dates, for example, to calculate ages or
                extract parts of dates.
            </p><p style="color:blue;">mysql提供了几个函数，您可以使用这些函数对日期执行计算，例如，计算年龄或提取部分日期。</p><p>
                To determine how many years old each of your pets is, use the
                <a class="link" href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a> function. Its
                arguments are the unit in which you want the result expressed,
                and the two dates for which to take the difference. The
                following query shows, for each pet, the birth date, the
                current date, and the age in years. An
                <span class="emphasis"><em>alias</em></span> (<code class="literal">age</code>) is used to
                make the final output column label more meaningful.
            </p><p style="color:blue;">要确定每只宠物的年龄，请使用timestampDiff（）函数。它的参数是要表达结果的单位，以及获取差异的两个日期。以下查询显示每个宠物的出生日期、当前日期和年龄（以年为单位）。别名（age）用于使最终输出列标签更有意义。</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth, CURDATE(),</code></strong>
       <strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,CURDATE()) AS age</code></strong>
       <strong class="userinput"><code>FROM pet;</code></strong>
+----------+------------+------------+------+
| name     | birth      | CURDATE()  | age  |
+----------+------------+------------+------+
| Fluffy   | 1993-02-04 | 2003-08-19 |   10 |
| Claws    | 1994-03-17 | 2003-08-19 |    9 |
| Buffy    | 1989-05-13 | 2003-08-19 |   14 |
| Fang     | 1990-08-27 | 2003-08-19 |   12 |
| Bowser   | 1989-08-31 | 2003-08-19 |   13 |
| Chirpy   | 1998-09-11 | 2003-08-19 |    4 |
| Whistler | 1997-12-09 | 2003-08-19 |    5 |
| Slim     | 1996-04-29 | 2003-08-19 |    7 |
| Puffball | 1999-03-30 | 2003-08-19 |    4 |
+----------+------------+------------+------+
</pre><p>
                The query works, but the result could be scanned more easily
                if the rows were presented in some order. This can be done by
                adding an <code class="literal">ORDER BY name</code> clause to sort the
                output by name:
            </p><p style="color:blue;">查询工作正常，但如果行按某种顺序显示，则可以更容易地扫描结果。这可以通过添加ORDER BY NAME子句按名称对输出进行排序来完成：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth, CURDATE(),</code></strong>
       <strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,CURDATE()) AS age</code></strong>
       <strong class="userinput"><code>FROM pet ORDER BY name;</code></strong>
+----------+------------+------------+------+
| name     | birth      | CURDATE()  | age  |
+----------+------------+------------+------+
| Bowser   | 1989-08-31 | 2003-08-19 |   13 |
| Buffy    | 1989-05-13 | 2003-08-19 |   14 |
| Chirpy   | 1998-09-11 | 2003-08-19 |    4 |
| Claws    | 1994-03-17 | 2003-08-19 |    9 |
| Fang     | 1990-08-27 | 2003-08-19 |   12 |
| Fluffy   | 1993-02-04 | 2003-08-19 |   10 |
| Puffball | 1999-03-30 | 2003-08-19 |    4 |
| Slim     | 1996-04-29 | 2003-08-19 |    7 |
| Whistler | 1997-12-09 | 2003-08-19 |    5 |
+----------+------------+------------+------+
</pre><p>
                To sort the output by <code class="literal">age</code> rather than
                <code class="literal">name</code>, just use a different <code class="literal">ORDER
                BY</code> clause:
            </p><p style="color:blue;">要按年龄而不是名称对输出进行排序，只需使用不同的ORDERBY子句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth, CURDATE(),</code></strong>
       <strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,CURDATE()) AS age</code></strong>
       <strong class="userinput"><code>FROM pet ORDER BY age;</code></strong>
+----------+------------+------------+------+
| name     | birth      | CURDATE()  | age  |
+----------+------------+------------+------+
| Chirpy   | 1998-09-11 | 2003-08-19 |    4 |
| Puffball | 1999-03-30 | 2003-08-19 |    4 |
| Whistler | 1997-12-09 | 2003-08-19 |    5 |
| Slim     | 1996-04-29 | 2003-08-19 |    7 |
| Claws    | 1994-03-17 | 2003-08-19 |    9 |
| Fluffy   | 1993-02-04 | 2003-08-19 |   10 |
| Fang     | 1990-08-27 | 2003-08-19 |   12 |
| Bowser   | 1989-08-31 | 2003-08-19 |   13 |
| Buffy    | 1989-05-13 | 2003-08-19 |   14 |
+----------+------------+------------+------+
</pre><p>
                A similar query can be used to determine age at death for
                animals that have died. You determine which animals these are
                by checking whether the <code class="literal">death</code> value is
                <code class="literal">NULL</code>. Then, for those with
                non-<code class="literal">NULL</code> values, compute the difference
                between the <code class="literal">death</code> and
                <code class="literal">birth</code> values:
            </p><p style="color:blue;">一个类似的查询可以用来确定死亡动物的死亡年龄。您可以通过检查死亡值是否为空来确定这些动物。然后，对于具有非空值的人，计算死亡值和出生值之间的差异：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth, death,</code></strong>
       <strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,death) AS age</code></strong>
       <strong class="userinput"><code>FROM pet WHERE death IS NOT NULL ORDER BY age;</code></strong>
+--------+------------+------------+------+
| name   | birth      | death      | age  |
+--------+------------+------------+------+
| Bowser | 1989-08-31 | 1995-07-29 |    5 |
+--------+------------+------------+------+
</pre><p>
                The query uses <code class="literal">death IS NOT NULL</code> rather
                than <code class="literal">death &lt;&gt; NULL</code> because
                <code class="literal">NULL</code> is a special value that cannot be
                compared using the usual comparison operators. This is
                discussed later. See <a class="xref" href="tutorial.html#working-with-null" title="3.3.4.6&nbsp;Working with NULL Values">Section&nbsp;3.3.4.6, “Working with NULL Values”</a>.
            </p><p style="color:blue;">查询使用death is not null而不是death&lt;&gt;null，因为null是一个特殊值，不能使用常用的比较运算符进行比较。这将在后面讨论。见第3.3.4.6节“使用空值”。</p><p>
                What if you want to know which animals have birthdays next
                month? For this type of calculation, year and day are
                irrelevant; you simply want to extract the month part of the
                <code class="literal">birth</code> column. MySQL provides several
                functions for extracting parts of dates, such as
                <a class="link" href="functions.html#function_year"><code class="literal">YEAR()</code></a>,
                <a class="link" href="functions.html#function_month"><code class="literal">MONTH()</code></a>, and
                <a class="link" href="functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a>.
                <a class="link" href="functions.html#function_month"><code class="literal">MONTH()</code></a> is the appropriate
                function here. To see how it works, run a simple query that
                displays the value of both <code class="literal">birth</code> and
                <a class="link" href="functions.html#function_month"><code class="literal">MONTH(birth)</code></a>:
            </p><p style="color:blue;">如果你想知道下个月哪些动物有生日呢？对于这种类型的计算，年份和日期是不相关的；您只需要提取出生列的月份部分。mysql提供了几个函数来提取部分日期，例如year（）、month（）和dayofmonth（）。month（）是这里的适当函数。要查看其工作原理，请运行一个简单的查询，该查询同时显示birth和month（birth）的值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth, MONTH(birth) FROM pet;</code></strong>
+----------+------------+--------------+
| name     | birth      | MONTH(birth) |
+----------+------------+--------------+
| Fluffy   | 1993-02-04 |            2 |
| Claws    | 1994-03-17 |            3 |
| Buffy    | 1989-05-13 |            5 |
| Fang     | 1990-08-27 |            8 |
| Bowser   | 1989-08-31 |            8 |
| Chirpy   | 1998-09-11 |            9 |
| Whistler | 1997-12-09 |           12 |
| Slim     | 1996-04-29 |            4 |
| Puffball | 1999-03-30 |            3 |
+----------+------------+--------------+
</pre><p>
                Finding animals with birthdays in the upcoming month is also
                simple. Suppose that the current month is April. Then the
                month value is <code class="literal">4</code> and you can look for
                animals born in May (month <code class="literal">5</code>) like this:
            </p><p style="color:blue;">在即将到来的一个月里找到有生日的动物也很简单。假设当前月份是四月。那么月值是4，您可以查找5月（第5个月）出生的动物，如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth FROM pet WHERE MONTH(birth) = 5;</code></strong>
+-------+------------+
| name  | birth      |
+-------+------------+
| Buffy | 1989-05-13 |
+-------+------------+
</pre><p>
                There is a small complication if the current month is
                December. You cannot merely add one to the month number
                (<code class="literal">12</code>) and look for animals born in month
                <code class="literal">13</code>, because there is no such month.
                Instead, you look for animals born in January (month
                <code class="literal">1</code>).
            </p><p style="color:blue;">如果当前月份是12月，则会有一个小的并发症。你不能仅仅在月数（12）上加上一个，然后寻找在第13个月出生的动物，因为没有这样的月份。取而代之的是，你要寻找一月（第一个月）出生的动物。</p><p>
                You can write the query so that it works no matter what the
                current month is, so that you do not have to use the number
                for a particular month.
                <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a> enables you to add a
                time interval to a given date. If you add a month to the value
                of <a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>, then extract the
                month part with <a class="link" href="functions.html#function_month"><code class="literal">MONTH()</code></a>, the
                result produces the month in which to look for birthdays:
            </p><p style="color:blue;">您可以编写查询，这样无论当前月份是什么，查询都能正常工作，这样您就不必使用特定月份的数字。date_add（）使您能够向给定日期添加时间间隔。如果将一个月添加到curdate（）的值，然后使用month（）提取月份部分，则结果将生成查找生日的月份：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth FROM pet</code></strong>
       <strong class="userinput"><code>WHERE MONTH(birth) = MONTH(DATE_ADD(CURDATE(),INTERVAL 1 MONTH));</code></strong>
</pre><p>
                A different way to accomplish the same task is to add
                <code class="literal">1</code> to get the next month after the current
                one after using the modulo function (<code class="literal">MOD</code>)
                to wrap the month value to <code class="literal">0</code> if it is
                currently <code class="literal">12</code>:
            </p><p style="color:blue;">完成相同任务的另一种方法是，在使用模函数（mod）将月份值包装为0（如果当前值为12）之后，添加1以获取当前值之后的下一个月：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT name, birth FROM pet</code></strong>
       <strong class="userinput"><code>WHERE MONTH(birth) = MOD(MONTH(CURDATE()), 12) + 1;</code></strong>
</pre><p>
                <a class="link" href="functions.html#function_month"><code class="literal">MONTH()</code></a> returns a number
                between <code class="literal">1</code> and <code class="literal">12</code>. And
                <a class="link" href="functions.html#function_mod"><code class="literal">MOD(something,12)</code></a> returns a
                number between <code class="literal">0</code> and <code class="literal">11</code>.
                So the addition has to be after the
                <a class="link" href="functions.html#function_mod"><code class="literal">MOD()</code></a>, otherwise we would go
                from November (<code class="literal">11</code>) to January
                (<code class="literal">1</code>).
            </p><p style="color:blue;">month（）返回一个介于1和12之间的数字。mod（12）返回一个介于0和11之间的数字。所以加法必须在mod（）之后，否则我们将从11月（11日）到1月（1日）。</p><p>
                If a calculation uses invalid dates, the calculation fails and
                produces warnings:
            </p><p style="color:blue;">如果计算使用无效日期，则计算将失败并生成警告：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '2018-10-31' + INTERVAL 1 DAY;</code></strong>
+-------------------------------+
| '2018-10-31' + INTERVAL 1 DAY |
+-------------------------------+
| 2018-11-01                    |
+-------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT '2018-10-32' + INTERVAL 1 DAY;</code></strong>
+-------------------------------+
| '2018-10-32' + INTERVAL 1 DAY |
+-------------------------------+
| NULL                          |
+-------------------------------+
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1292 | Incorrect datetime value: '2018-10-32' |
+---------+------+----------------------------------------+
</pre>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="working-with-null"></a>3.3.4.6&nbsp;Working with NULL Values</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947481616"></a><a class="indexterm" name="idm140286947480576"></a><p>
                The <code class="literal">NULL</code> value can be surprising until you
                get used to it. Conceptually, <code class="literal">NULL</code> means
                <span class="quote">“<span class="quote">a missing unknown value</span>”</span> and it is treated
                somewhat differently from other values.
            </p><p style="color:blue;">空值可能会令人惊讶，直到您习惯它。从概念上讲，null意味着“一个丢失的未知值”，它的处理方式与其他值有些不同。</p><p>
                To test for <code class="literal">NULL</code>, use the
                <a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a> and <a class="link" href="functions.html#operator_is-not-null"><code class="literal">IS
                NOT NULL</code></a> operators, as shown here:
            </p><p style="color:blue;">要测试null，请使用is null和is not null运算符，如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 IS NULL, 1 IS NOT NULL;</code></strong>
+-----------+---------------+
| 1 IS NULL | 1 IS NOT NULL |
+-----------+---------------+
|         0 |             1 |
+-----------+---------------+
</pre><p>
                You cannot use arithmetic comparison operators such as
                <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a>,
                <a class="link" href="functions.html#operator_less-than"><code class="literal">&lt;</code></a>, or
                <a class="link" href="functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a> to
                test for <code class="literal">NULL</code>. To demonstrate this for
                yourself, try the following query:
            </p><p style="color:blue;">不能使用诸如=、&lt;或&lt;&gt;之类的算术比较运算符来测试空值。要亲自演示，请尝试以下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL;</code></strong>
+----------+-----------+----------+----------+
| 1 = NULL | 1 &lt;&gt; NULL | 1 &lt; NULL | 1 &gt; NULL |
+----------+-----------+----------+----------+
|     NULL |      NULL |     NULL |     NULL |
+----------+-----------+----------+----------+
</pre><p>
                Because the result of any arithmetic comparison with
                <code class="literal">NULL</code> is also <code class="literal">NULL</code>, you
                cannot obtain any meaningful results from such comparisons.
            </p><p style="color:blue;">由于与null进行任何算术比较的结果也为null，因此无法从此类比较中获得任何有意义的结果。</p><p>
                In MySQL, <code class="literal">0</code> or <code class="literal">NULL</code>
                means false and anything else means true. The default truth
                value from a boolean operation is <code class="literal">1</code>.
            </p><p style="color:blue;">在mysql中，0或null表示false，其他任何值都表示true。布尔运算的默认真值为1。</p><p>
                This special treatment of <code class="literal">NULL</code> is why, in
                the previous section, it was necessary to determine which
                animals are no longer alive using <code class="literal">death IS NOT
                NULL</code> instead of <code class="literal">death &lt;&gt;
                NULL</code>.
            </p><p style="color:blue;">这种对空值的特殊处理就是为什么在前一节中，有必要用死亡而不是死亡来确定哪些动物不再活着。</p><p>
                Two <code class="literal">NULL</code> values are regarded as equal in a
                <code class="literal">GROUP BY</code>.
            </p><p style="color:blue;">两个空值在一个组中被视为相等。</p><p>
                When doing an <code class="literal">ORDER BY</code>,
                <code class="literal">NULL</code> values are presented first if you do
                <code class="literal">ORDER BY ... ASC</code> and last if you do
                <code class="literal">ORDER BY ... DESC</code>.
            </p><p style="color:blue;">在执行ORDERBY时，如果执行ORDERBY，则首先显示空值…最后，如果你是通过…说明</p><p>
                A common error when working with <code class="literal">NULL</code> is to
                assume that it is not possible to insert a zero or an empty
                string into a column defined as <code class="literal">NOT NULL</code>,
                but this is not the case. These are in fact values, whereas
                <code class="literal">NULL</code> means <span class="quote">“<span class="quote">not having a
          value.</span>”</span> You can test this easily enough by using
                <code class="literal">IS [NOT] NULL</code> as shown:
            </p><p style="color:blue;">在使用null时，一个常见的错误是假定不能将零或空字符串插入定义为非null的列中，但事实并非如此。这些实际上是值，而null意味着“没有值”。您可以通过使用is[not]null来轻松地进行测试，如图所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 0 IS NULL, 0 IS NOT NULL, '' IS NULL, '' IS NOT NULL;</code></strong>
+-----------+---------------+------------+----------------+
| 0 IS NULL | 0 IS NOT NULL | '' IS NULL | '' IS NOT NULL |
+-----------+---------------+------------+----------------+
|         0 |             1 |          0 |              1 |
+-----------+---------------+------------+----------------+
</pre><p>
                Thus it is entirely possible to insert a zero or empty string
                into a <code class="literal">NOT NULL</code> column, as these are in
                fact <code class="literal">NOT NULL</code>. See
                <a class="xref" href="error-handling.html#problems-with-null" title="B.4.4.3&nbsp;Problems with NULL Values">Section&nbsp;B.4.4.3, “Problems with NULL Values”</a>.
            </p><p style="color:blue;">因此，完全可以将零或空字符串插入非空列，因为它们实际上是非空的。见第B.4.4.3节“空值问题”。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="pattern-matching"></a>3.3.4.7&nbsp;Pattern Matching</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947441488"></a><a class="indexterm" name="idm140286947440416"></a><a class="indexterm" name="idm140286947438928"></a><p>
                MySQL provides standard SQL pattern matching as well as a form
                of pattern matching based on extended regular expressions
                similar to those used by Unix utilities such as
                <span class="command"><strong>vi</strong></span>, <span class="command"><strong>grep</strong></span>, and
                <span class="command"><strong>sed</strong></span>.
            </p><p style="color:blue;">mysql提供了标准的sql模式匹配以及一种基于扩展正则表达式的模式匹配形式，类似于vi、grep和sed等unix实用程序所使用的正则表达式。</p><p>
                SQL pattern matching enables you to use <code class="literal">_</code>
                to match any single character and <code class="literal">%</code> to
                match an arbitrary number of characters (including zero
                characters). In MySQL, SQL patterns are case-insensitive by
                default. Some examples are shown here. Do not use
                <code class="literal">=</code> or <code class="literal">&lt;&gt;</code> when you
                use SQL patterns. Use the <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> or
                <a class="link" href="functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a> comparison operators
                instead.
            </p><p style="color:blue;">SQL模式匹配允许您使用u匹配任何单个字符，使用%匹配任意数量的字符（包括零个字符）。在mysql中，sql模式默认不区分大小写。这里有一些例子。使用SQL模式时不要使用=或&lt;&gt;。改用like或not like比较运算符。</p><p>
                To find names beginning with <code class="literal">b</code>:
            </p><p style="color:blue;">要查找以b开头的名称：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE 'b%';</code></strong>
+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+
</pre><p>
                To find names ending with <code class="literal">fy</code>:
            </p><p style="color:blue;">要查找以fy结尾的名称：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE '%fy';</code></strong>
+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+
</pre><p>
                To find names containing a <code class="literal">w</code>:
            </p><p style="color:blue;">要查找包含w的名称：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE '%w%';</code></strong>
+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+
</pre><p>
                To find names containing exactly five characters, use five
                instances of the <code class="literal">_</code> pattern character:
            </p><p style="color:blue;">要查找正好包含五个字符的名称，请使用u pattern字符的五个实例：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name LIKE '_____';</code></strong>
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</pre><p>
                The other type of pattern matching provided by MySQL uses
                extended regular expressions. When you test for a match for
                this type of pattern, use the
                <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> and <a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT
                REGEXP</code></a> operators (or
                <a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a> and
                <a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT RLIKE</code></a>,
                which are synonyms).
            </p><p style="color:blue;">mysql提供的另一种模式匹配使用扩展正则表达式。当您测试这种类型的模式是否匹配时，请使用regexp和not regexp运算符（或rlike和not rlike，这是同义词）。</p><p>
                The following list describes some characteristics of extended
                regular expressions:
            </p><p style="color:blue;">下表描述了扩展正则表达式的一些特性：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">.</code> matches any single character.
                    </p><p style="color:blue;">是的。匹配任何单个字符。</p></li><li class="listitem"><p>
                        A character class <code class="literal">[...]</code> matches any
                        character within the brackets. For example,
                        <code class="literal">[abc]</code> matches <code class="literal">a</code>,
                        <code class="literal">b</code>, or <code class="literal">c</code>. To name a
                        range of characters, use a dash. <code class="literal">[a-z]</code>
                        matches any letter, whereas <code class="literal">[0-9]</code>
                        matches any digit.
                    </p><p style="color:blue;">字符类[…]匹配括号内的任何字符。例如，[ABC]匹配A、B或C。若要命名字符范围，请使用短划线。[a-z]匹配任意字母，而[0-9]匹配任意数字。</p></li><li class="listitem"><p>
                        <code class="literal">*</code> matches zero or more instances of the
                        thing preceding it. For example, <code class="literal">x*</code>
                        matches any number of <code class="literal">x</code> characters,
                        <code class="literal">[0-9]*</code> matches any number of digits,
                        and <code class="literal">.*</code> matches any number of anything.
                    </p><p style="color:blue;">*匹配它前面事物的零个或多个实例。例如，x*匹配任意数量的x个字符，[0-9]*匹配任意数量的数字，.*匹配任意数量的任何字符。</p></li><li class="listitem"><p>
                        A regular expression pattern match succeeds if the pattern
                        matches anywhere in the value being tested. (This differs
                        from a <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> pattern match,
                        which succeeds only if the pattern matches the entire
                        value.)
                    </p><p style="color:blue;">如果模式与测试值中的任何位置匹配，则正则表达式模式匹配将成功。（这与like模式匹配不同，like模式匹配仅在模式与整个值匹配时才成功。）</p></li><li class="listitem"><p>
                        To anchor a pattern so that it must match the beginning or
                        end of the value being tested, use <code class="literal">^</code> at
                        the beginning or <code class="literal">$</code> at the end of the
                        pattern.
                    </p><p style="color:blue;">要锚定一个模式，使其必须与正在测试的值的开头或结尾匹配，请在模式的开头使用^或结尾使用$。</p></li></ul>
                </div>
                <p>
                    To demonstrate how extended regular expressions work, the
                    <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> queries shown previously are
                    rewritten here to use <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a>.
                </p><p style="color:blue;">为了演示扩展正则表达式是如何工作的，这里将重写前面显示的类似查询以使用regexp。</p><p>
                To find names beginning with <code class="literal">b</code>, use
                <code class="literal">^</code> to match the beginning of the name:
            </p><p style="color:blue;">要查找以b开头的名称，请使用^匹配名称的开头：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP '^b';</code></strong>
+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+
</pre><p>
                To force a <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> comparison to
                be case-sensitive, use the <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a>
                keyword to make one of the strings a binary string. This query
                matches only lowercase <code class="literal">b</code> at the beginning
                of a name:
            </p><p style="color:blue;">若要强制regexp比较区分大小写，请使用binary关键字使其中一个字符串成为二进制字符串。此查询只匹配名称开头的小写B：</p><pre data-lang="sql" class="programlisting">SELECT * FROM pet WHERE name REGEXP BINARY '^b';
</pre><p>
                To find names ending with <code class="literal">fy</code>, use
                <code class="literal">$</code> to match the end of the name:
            </p><p style="color:blue;">要查找以fy结尾的名称，请使用$匹配名称的结尾：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP 'fy$';</code></strong>
+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+
</pre><p>
                To find names containing a <code class="literal">w</code>, use this
                query:
            </p><p style="color:blue;">要查找包含w的名称，请使用以下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP 'w';</code></strong>
+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+
</pre><p>
                Because a regular expression pattern matches if it occurs
                anywhere in the value, it is not necessary in the previous
                query to put a wildcard on either side of the pattern to get
                it to match the entire value as would be true with an SQL
                pattern.
            </p><p style="color:blue;">因为如果正则表达式模式出现在值中的任何地方，它都会匹配，所以在上一个查询中不必在模式的任何一边放置通配符，以使它与整个值匹配，就像SQL模式一样。</p><p>
                To find names containing exactly five characters, use
                <code class="literal">^</code> and <code class="literal">$</code> to match the
                beginning and end of the name, and five instances of
                <code class="literal">.</code> in between:
            </p><p style="color:blue;">若要查找正好包含五个字符的名称，请使用“^”和“$”匹配名称的开头和结尾以及的五个实例。两者之间：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP '^.....$';</code></strong>
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</pre><p>
                You could also write the previous query using the
                <code class="literal">{<em class="replaceable"><code>n</code></em>}</code>
                (<span class="quote">“<span class="quote">repeat-<em class="replaceable"><code>n</code></em>-times</span>”</span>)
                operator:
            </p><p style="color:blue;">您还可以使用{n}（“repeat-n-times”）运算符编写上一个查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM pet WHERE name REGEXP '^.{5}$';</code></strong>
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</pre><p>
                For more information about the syntax for regular expressions,
                see <a class="xref" href="functions.html#regexp" title="12.5.2&nbsp;Regular Expressions">Section&nbsp;12.5.2, “Regular Expressions”</a>.
            </p><p style="color:blue;">有关正则表达式语法的更多信息，请参见第12.5.2节“正则表达式”。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="counting-rows"></a>3.3.4.8&nbsp;Counting Rows</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947361616"></a><a class="indexterm" name="idm140286947360128"></a><a class="indexterm" name="idm140286947358640"></a><p>
                Databases are often used to answer the question, <span class="quote">“<span class="quote">How
          often does a certain type of data occur in a table?</span>”</span>
                For example, you might want to know how many pets you have, or
                how many pets each owner has, or you might want to perform
                various kinds of census operations on your animals.
            </p><p style="color:blue;">数据库经常被用来回答这样一个问题：“某一类型的数据在表中出现的频率是多少？”“例如，你可能想知道你养了多少宠物，或者每个主人养了多少宠物，或者你可能想对你的动物进行各种各样的普查。</p><p>
                Counting the total number of animals you have is the same
                question as <span class="quote">“<span class="quote">How many rows are in the
          <code class="literal">pet</code> table?</span>”</span> because there is one
                record per pet. <a class="link" href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> counts
                the number of rows, so the query to count your animals looks
                like this:
            </p><p style="color:blue;">数一数你拥有的动物总数和“宠物桌上有多少行”是同一个问题。“因为每只宠物都有一个记录。count（*）计算行数，因此用于计算动物数的查询如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM pet;</code></strong>
+----------+
| COUNT(*) |
+----------+
|        9 |
+----------+
</pre><p>
                Earlier, you retrieved the names of the people who owned pets.
                You can use <a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a> if you want
                to find out how many pets each owner has:
            </p><p style="color:blue;">早些时候，你找到了养宠物的人的名字。如果您想知道每个主人有多少宠物，可以使用count（）：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT owner, COUNT(*) FROM pet GROUP BY owner;</code></strong>
+--------+----------+
| owner  | COUNT(*) |
+--------+----------+
| Benny  |        2 |
| Diane  |        2 |
| Gwen   |        3 |
| Harold |        2 |
+--------+----------+
</pre><p>
                The preceding query uses <code class="literal">GROUP BY</code> to group
                all records for each <code class="literal">owner</code>. The use of
                <a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a> in conjunction with
                <code class="literal">GROUP BY</code> is useful for characterizing your
                data under various groupings. The following examples show
                different ways to perform animal census operations.
            </p><p style="color:blue;">前面的查询使用GROUPBY对每个所有者的所有记录进行分组。将count（）与group by结合使用对于在各种分组下描述数据非常有用。以下示例显示了执行动物普查操作的不同方法。</p><p>
                Number of animals per species:
            </p><p style="color:blue;">每种动物的数量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT species, COUNT(*) FROM pet GROUP BY species;</code></strong>
+---------+----------+
| species | COUNT(*) |
+---------+----------+
| bird    |        2 |
| cat     |        2 |
| dog     |        3 |
| hamster |        1 |
| snake   |        1 |
+---------+----------+
</pre><p>
                Number of animals per sex:
            </p><p style="color:blue;">每个性别的动物数量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sex, COUNT(*) FROM pet GROUP BY sex;</code></strong>
+------+----------+
| sex  | COUNT(*) |
+------+----------+
| NULL |        1 |
| f    |        4 |
| m    |        4 |
+------+----------+
</pre><p>
                (In this output, <code class="literal">NULL</code> indicates that the
                sex is unknown.)
            </p><p style="color:blue;">（在这个输出中，null表示性别未知。）</p><p>
                Number of animals per combination of species and sex:
            </p><p style="color:blue;">每个物种和性别组合的动物数量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT species, sex, COUNT(*) FROM pet GROUP BY species, sex;</code></strong>
+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| bird    | NULL |        1 |
| bird    | f    |        1 |
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
| hamster | f    |        1 |
| snake   | m    |        1 |
+---------+------+----------+
</pre><p>
                You need not retrieve an entire table when you use
                <a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a>. For example, the
                previous query, when performed just on dogs and cats, looks
                like this:
            </p><p style="color:blue;">使用count（）时不需要检索整个表。例如，上一个查询仅对狗和猫执行时，如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT species, sex, COUNT(*) FROM pet</code></strong>
       <strong class="userinput"><code>WHERE species = 'dog' OR species = 'cat'</code></strong>
       <strong class="userinput"><code>GROUP BY species, sex;</code></strong>
+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
+---------+------+----------+
</pre><p>
                Or, if you wanted the number of animals per sex only for
                animals whose sex is known:
            </p><p style="color:blue;">或者，如果你只想知道每个性别的动物的数量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT species, sex, COUNT(*) FROM pet</code></strong>
       <strong class="userinput"><code>WHERE sex IS NOT NULL</code></strong>
       <strong class="userinput"><code>GROUP BY species, sex;</code></strong>
+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| bird    | f    |        1 |
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
| hamster | f    |        1 |
| snake   | m    |        1 |
+---------+------+----------+
</pre><p>
                If you name columns to select in addition to the
                <a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a> value, a <code class="literal">GROUP
                BY</code> clause should be present that names those same
                columns. Otherwise, the following occurs:
            </p><p style="color:blue;">如果除了count（）值之外还命名要选择的列，则应该出现一个GROUPBY子句来命名这些列。否则，将发生以下情况：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If the
                        <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a> SQL
                        mode is enabled, an error occurs:
                    </p><p style="color:blue;">如果按SQL模式启用了唯一的完整组，则会发生错误：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode = 'ONLY_FULL_GROUP_BY';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT owner, COUNT(*) FROM pet;</code></strong>
ERROR 1140 (42000): In aggregated query without GROUP BY, expression
#1 of SELECT list contains nonaggregated column 'menagerie.pet.owner';
this is incompatible with sql_mode=only_full_group_by
</pre></li><li class="listitem"><p>
                        If <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a> is
                        not enabled, the query is processed by treating all rows
                        as a single group, but the value selected for each named
                        column is nondeterministic. The server is free to select
                        the value from any row:
                    </p><p style="color:blue;">如果未启用only_full_group_by，则通过将所有行视为单个组来处理查询，但为每个命名列选择的值是不确定的。服务器可以自由选择任何行中的值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode = '';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT owner, COUNT(*) FROM pet;</code></strong>
+--------+----------+
| owner  | COUNT(*) |
+--------+----------+
| Harold |        8 |
+--------+----------+
1 row in set (0.00 sec)
</pre></li></ul>
                </div>
                <p>
                    See also <a class="xref" href="functions.html#group-by-handling" title="12.20.3&nbsp;MySQL Handling of GROUP BY">Section&nbsp;12.20.3, “MySQL Handling of GROUP BY”</a>. See
                    <a class="xref" href="functions.html#group-by-functions" title="12.20.1&nbsp;Aggregate (GROUP BY) Function Descriptions">Section&nbsp;12.20.1, “Aggregate (GROUP BY) Function Descriptions”</a> for information about
                    <a class="link" href="functions.html#function_count"><code class="literal">COUNT(<em class="replaceable"><code>expr</code></em>)</code></a>
                    behavior and related optimizations.
                </p><p style="color:blue;">另请参见12.20.3节，“MySQL对GROUP BY的处理”。有关计数（expr）行为和相关优化的信息，请参阅12.20.1节“聚合（分组方式）函数描述”。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="multiple-tables"></a>3.3.4.9&nbsp;Using More Than one Table</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286947308880"></a><p>
                The <code class="literal">pet</code> table keeps track of which pets you
                have. If you want to record other information about them, such
                as events in their lives like visits to the vet or when
                litters are born, you need another table. What should this
                table look like? It needs to contain the following
                information:
            </p><p style="color:blue;">宠物桌会记录你有哪些宠物。如果你想记录他们的其他信息，比如他们生活中的一些事情，比如看兽医或者孩子出生的时候，你需要另一张桌子。这张桌子应该是什么样子的？它需要包含以下信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The pet name so that you know which animal each event
                        pertains to.
                    </p><p style="color:blue;">宠物的名字，这样你就知道每个事件都与哪种动物有关。</p></li><li class="listitem"><p>
                        A date so that you know when the event occurred.
                    </p><p style="color:blue;">使你知道事件发生的日期。</p></li><li class="listitem"><p>
                        A field to describe the event.
                    </p><p style="color:blue;">描述事件的字段。</p></li><li class="listitem"><p>
                        An event type field, if you want to be able to categorize
                        events.
                    </p><p style="color:blue;">如果希望能够对事件进行分类，则为事件类型字段。</p></li></ul>
                </div>
                <p>
                    Given these considerations, the <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE
                    TABLE</code></a> statement for the <code class="literal">event</code>
                    table might look like this:
                </p><p style="color:blue;">考虑到这些因素，事件表的CREATETABLE语句可能如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE event (name VARCHAR(20), date DATE,</code></strong>
       <strong class="userinput"><code>type VARCHAR(15), remark VARCHAR(255));</code></strong>
</pre><p>
                As with the <code class="literal">pet</code> table, it is easiest to
                load the initial records by creating a tab-delimited text file
                containing the following information.
            </p><p style="color:blue;">与pet表一样，通过创建包含以下信息的制表符分隔的文本文件来加载初始记录是最容易的。</p>
                <div class="informaltable">
                    <table summary="pet record data that will appear in a tab delimited text file, as described in the preceding text."><colgroup><col width="15%"><col width="15%"><col width="15%"><col width="35%"></colgroup><thead><tr>
                        <th scope="col">name</th>
                        <th scope="col">date</th>
                        <th scope="col">type</th>
                        <th scope="col">remark</th>
                    </tr></thead><tbody><tr>
                        <td scope="row">Fluffy</td>
                        <td>1995-05-15</td>
                        <td>litter</td>
                        <td>4 kittens, 3 female, 1 male</td>
                    </tr><tr>
                        <td scope="row">Buffy</td>
                        <td>1993-06-23</td>
                        <td>litter</td>
                        <td>5 puppies, 2 female, 3 male</td>
                    </tr><tr>
                        <td scope="row">Buffy</td>
                        <td>1994-06-19</td>
                        <td>litter</td>
                        <td>3 puppies, 3 female</td>
                    </tr><tr>
                        <td scope="row">Chirpy</td>
                        <td>1999-03-21</td>
                        <td>vet</td>
                        <td>needed beak straightened</td>
                    </tr><tr>
                        <td scope="row">Slim</td>
                        <td>1997-08-03</td>
                        <td>vet</td>
                        <td>broken rib</td>
                    </tr><tr>
                        <td scope="row">Bowser</td>
                        <td>1991-10-12</td>
                        <td>kennel</td>
                        <td></td>
                    </tr><tr>
                        <td scope="row">Fang</td>
                        <td>1991-10-12</td>
                        <td>kennel</td>
                        <td></td>
                    </tr><tr>
                        <td scope="row">Fang</td>
                        <td>1998-08-28</td>
                        <td>birthday</td>
                        <td>Gave him a new chew toy</td>
                    </tr><tr>
                        <td scope="row">Claws</td>
                        <td>1998-03-17</td>
                        <td>birthday</td>
                        <td>Gave him a new flea collar</td>
                    </tr><tr>
                        <td scope="row">Whistler</td>
                        <td>1998-12-09</td>
                        <td>birthday</td>
                        <td>First birthday</td>
                    </tr></tbody></table>
                </div>
                <p>
                    Load the records like this:
                </p><p style="color:blue;">加载如下记录：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD DATA LOCAL INFILE 'event.txt' INTO TABLE event;</code></strong>
</pre><p>
                Based on what you have learned from the queries that you have
                run on the <code class="literal">pet</code> table, you should be able to
                perform retrievals on the records in the
                <code class="literal">event</code> table; the principles are the same.
                But when is the <code class="literal">event</code> table by itself
                insufficient to answer questions you might ask?
            </p><p style="color:blue;">根据您从在pet表上运行的查询中学到的知识，您应该能够对事件表中的记录执行检索；原则是相同的。但是事件表本身什么时候不足以回答您可能提出的问题呢？</p><p>
                Suppose that you want to find out the ages at which each pet
                had its litters. We saw earlier how to calculate ages from two
                dates. The litter date of the mother is in the
                <code class="literal">event</code> table, but to calculate her age on
                that date you need her birth date, which is stored in the
                <code class="literal">pet</code> table. This means the query requires
                both tables:
            </p><p style="color:blue;">假设你想知道每只宠物的产仔年龄。我们早先看到了如何从两个日期计算年龄。母亲的产仔日期在事件表中，但要计算她在该日期的年龄，您需要她的出生日期，该日期存储在宠物表中。这意味着查询需要两个表：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT pet.name,</code></strong>
       <strong class="userinput"><code>TIMESTAMPDIFF(YEAR,birth,date) AS age,</code></strong>
       <strong class="userinput"><code>remark</code></strong>
       <strong class="userinput"><code>FROM pet INNER JOIN event</code></strong>
         <strong class="userinput"><code>ON pet.name = event.name</code></strong>
       <strong class="userinput"><code>WHERE event.type = 'litter';</code></strong>
+--------+------+-----------------------------+
| name   | age  | remark                      |
+--------+------+-----------------------------+
| Fluffy |    2 | 4 kittens, 3 female, 1 male |
| Buffy  |    4 | 5 puppies, 2 female, 3 male |
| Buffy  |    5 | 3 puppies, 3 female         |
+--------+------+-----------------------------+
</pre><p>
                There are several things to note about this query:
            </p><p style="color:blue;">关于此查询，需要注意以下几点：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The <code class="literal">FROM</code> clause joins two tables
                        because the query needs to pull information from both of
                        them.
                    </p><p style="color:blue;">from子句连接两个表，因为查询需要从这两个表中提取信息。</p></li><li class="listitem"><p>
                        When combining (joining) information from multiple tables,
                        you need to specify how records in one table can be
                        matched to records in the other. This is easy because they
                        both have a <code class="literal">name</code> column. The query uses
                        an <code class="literal">ON</code> clause to match up records in the
                        two tables based on the <code class="literal">name</code> values.
                    </p><p style="color:blue;">组合（联接）多个表中的信息时，需要指定如何将一个表中的记录与另一个表中的记录匹配。这很容易，因为它们都有一个名称列。查询使用on子句根据名称值匹配两个表中的记录。</p><p>
                        The query uses an <code class="literal">INNER JOIN</code> to combine
                        the tables. An <code class="literal">INNER JOIN</code> permits rows
                        from either table to appear in the result if and only if
                        both tables meet the conditions specified in the
                        <code class="option">ON</code> clause. In this example, the
                        <code class="literal">ON</code> clause specifies that the
                        <code class="literal">name</code> column in the
                        <code class="literal">pet</code> table must match the
                        <code class="literal">name</code> column in the
                        <code class="literal">event</code> table. If a name appears in one
                        table but not the other, the row will not appear in the
                        result because the condition in the <code class="literal">ON</code>
                        clause fails.
                    </p><p style="color:blue;">查询使用内部联接来组合表。如果且仅当两个表都满足on子句中指定的条件时，内部联接才允许两个表中的行出现在结果中。在本例中，on子句指定pet表中的name列必须与事件表中的name列匹配。如果一个名称出现在一个表中而不是另一个表中，则该行将不会出现在结果中，因为on子句中的条件失败。</p></li><li class="listitem"><p>
                        Because the <code class="literal">name</code> column occurs in both
                        tables, you must be specific about which table you mean
                        when referring to the column. This is done by prepending
                        the table name to the column name.
                    </p><p style="color:blue;">因为name列出现在两个表中，所以在引用列时必须具体说明所指的表。这是通过在列名前加上表名来完成的。</p></li></ul>
                </div>
                <p>
                    You need not have two different tables to perform a join.
                    Sometimes it is useful to join a table to itself, if you want
                    to compare records in a table to other records in that same
                    table. For example, to find breeding pairs among your pets,
                    you can join the <code class="literal">pet</code> table with itself to
                    produce candidate pairs of live males and females of like
                    species:
                </p><p style="color:blue;">执行联接不需要两个不同的表。有时，如果要将表中的记录与同一表中的其他记录进行比较，则将表连接到自身是很有用的。例如，要在您的宠物中找到繁殖配对，您可以将宠物表与自身连接起来，以生成类似物种的候选雄性和雌性配对：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT p1.name, p1.sex, p2.name, p2.sex, p1.species</code></strong>
       <strong class="userinput"><code>FROM pet AS p1 INNER JOIN pet AS p2</code></strong>
         <strong class="userinput"><code>ON p1.species = p2.species</code></strong>
         <strong class="userinput"><code>AND p1.sex = 'f' AND p1.death IS NULL</code></strong>
         <strong class="userinput"><code>AND p2.sex = 'm' AND p2.death IS NULL;</code></strong>
+--------+------+-------+------+---------+
| name   | sex  | name  | sex  | species |
+--------+------+-------+------+---------+
| Fluffy | f    | Claws | m    | cat     |
| Buffy  | f    | Fang  | m    | dog     |
+--------+------+-------+------+---------+
</pre><p>
                In this query, we specify aliases for the table name to refer
                to the columns and keep straight which instance of the table
                each column reference is associated with.
            </p><p style="color:blue;">在这个查询中，我们为表名指定别名以引用列，并保持每个列引用与哪个表实例相关联。</p>
            </div>

        </div>

    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="getting-information"></a>3.4&nbsp;Getting Information About Databases and Tables</h2>

                </div>

            </div>

        </div>
        <a class="indexterm" name="idm140286947209440"></a><a class="indexterm" name="idm140286947207984"></a><a class="indexterm" name="idm140286947206496"></a><p>
        What if you forget the name of a database or table, or what the
        structure of a given table is (for example, what its columns are
        called)? MySQL addresses this problem through several statements
        that provide information about the databases and tables it
        supports.
    </p><p style="color:blue;">如果忘记了数据库或表的名称，或者忘记了给定表的结构（例如，它的列被称为什么），该怎么办？mysql通过几个语句来解决这个问题，这些语句提供有关它所支持的数据库和表的信息。</p><p>
        You have previously seen <a class="link" href="sql-syntax.html#show-databases" title="13.7.5.14&nbsp;SHOW DATABASES Syntax"><code class="literal">SHOW
        DATABASES</code></a>, which lists the databases managed by the
        server. To find out which database is currently selected, use the
        <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a> function:
    </p><p style="color:blue;">您以前见过show databases，它列出了由服务器管理的数据库。要找出当前选择的数据库，请使用database（）函数：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATABASE();</code></strong>
+------------+
| DATABASE() |
+------------+
| menagerie  |
+------------+
</pre><p>
        If you have not yet selected any database, the result is
        <code class="literal">NULL</code>.
    </p><p style="color:blue;">如果尚未选择任何数据库，则结果为空。</p><p>
        To find out what tables the default database contains (for
        example, when you are not sure about the name of a table), use
        this statement:
    </p><p style="color:blue;">要了解默认数据库包含哪些表（例如，当您不确定表的名称时），请使用以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
+---------------------+
| Tables_in_menagerie |
+---------------------+
| event               |
| pet                 |
+---------------------+
</pre><p>
        The name of the column in the output produced by this statement is
        always
        <code class="literal">Tables_in_<em class="replaceable"><code>db_name</code></em></code>,
        where <em class="replaceable"><code>db_name</code></em> is the name of the
        database. See <a class="xref" href="sql-syntax.html#show-tables" title="13.7.5.37&nbsp;SHOW TABLES Syntax">Section&nbsp;13.7.5.37, “SHOW TABLES Syntax”</a>, for more information.
    </p><p style="color:blue;">此语句生成的输出中列的名称始终是tables_in_db_name，其中db_name是数据库的名称。有关详细信息，请参见第13.7.5.37节“显示表格语法”。</p><p>
        If you want to find out about the structure of a table, the
        <a class="link" href="sql-syntax.html#describe" title="13.8.1&nbsp;DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> statement is useful; it
        displays information about each of a table's columns:
    </p><p style="color:blue;">如果要了解表的结构，请使用DESCRIBE语句；它显示有关表的每一列的信息：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE pet;</code></strong>
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| name    | varchar(20) | YES  |     | NULL    |       |
| owner   | varchar(20) | YES  |     | NULL    |       |
| species | varchar(20) | YES  |     | NULL    |       |
| sex     | char(1)     | YES  |     | NULL    |       |
| birth   | date        | YES  |     | NULL    |       |
| death   | date        | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
</pre><p>
        <code class="literal">Field</code> indicates the column name,
        <code class="literal">Type</code> is the data type for the column,
        <code class="literal">NULL</code> indicates whether the column can contain
        <code class="literal">NULL</code> values, <code class="literal">Key</code> indicates
        whether the column is indexed, and <code class="literal">Default</code>
        specifies the column's default value. <code class="literal">Extra</code>
        displays special information about columns: If a column was
        created with the <code class="literal">AUTO_INCREMENT</code> option, the
        value will be <code class="literal">auto_increment</code> rather than empty.
    </p><p style="color:blue;">字段表示列名，类型表示列的数据类型，空表示列是否可以包含空值，键表示列是否被索引，默认值指定列的默认值。extra显示有关列的特殊信息：如果使用auto_increment选项创建列，则该值将是auto_increment而不是空的。</p><p>
        <code class="literal">DESC</code> is a short form of
        <a class="link" href="sql-syntax.html#describe" title="13.8.1&nbsp;DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>. See
        <a class="xref" href="sql-syntax.html#describe" title="13.8.1&nbsp;DESCRIBE Syntax">Section&nbsp;13.8.1, “DESCRIBE Syntax”</a>, for more information.
    </p><p style="color:blue;">描述是描述的一种简短形式。有关详细信息，请参见第13.8.1节“描述语法”。</p><p>
        You can obtain the <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
        statement necessary to create an existing table using the
        <a class="link" href="sql-syntax.html#show-create-table" title="13.7.5.10&nbsp;SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> statement. See
        <a class="xref" href="sql-syntax.html#show-create-table" title="13.7.5.10&nbsp;SHOW CREATE TABLE Syntax">Section&nbsp;13.7.5.10, “SHOW CREATE TABLE Syntax”</a>.
    </p><p style="color:blue;">可以使用SeaCudioTABLE语句获取创建现有表所需的CREATETABLE语句。参见第13.7.5.10节“显示创建表语法”。</p><p>
        If you have indexes on a table, <code class="literal">SHOW INDEX FROM
        <em class="replaceable"><code>tbl_name</code></em></code> produces information
        about them. See <a class="xref" href="sql-syntax.html#show-index" title="13.7.5.22&nbsp;SHOW INDEX Syntax">Section&nbsp;13.7.5.22, “SHOW INDEX Syntax”</a>, for more about this
        statement.
    </p><p style="color:blue;">如果表上有索引，则show index from tbl_name将生成有关这些索引的信息。有关此语句的详细信息，请参见第13.7.5.22节“显示索引语法”。</p>
    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="batch-mode"></a>3.5&nbsp;Using mysql in Batch Mode</h2>

                </div>

            </div>

        </div>
        <a class="indexterm" name="idm140286947172432"></a><a class="indexterm" name="idm140286947170976"></a><a class="indexterm" name="idm140286947169904"></a><a class="indexterm" name="idm140286947168416"></a><a class="indexterm" name="idm140286947167344"></a><a class="indexterm" name="idm140286947165856"></a><p>
        In the previous sections, you used <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
        interactively to enter statements and view the results. You can
        also run <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> in batch mode. To do this, put
        the statements you want to run in a file, then tell
        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> to read its input from the file:
    </p><p style="color:blue;">在前面的小节中，您交互地使用mysql输入语句并查看结果。您还可以在批处理模式下运行mysql。为此，请将要运行的语句放在文件中，然后告诉mysql从文件中读取其输入：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql &lt; <em class="replaceable"><code>batch-file</code></em></code></strong>
</pre><p>
        If you are running <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> under Windows and have
        some special characters in the file that cause problems, you can
        do this:
    </p><p style="color:blue;">如果在Windows下运行MySQL，并且文件中有一些导致问题的特殊字符，则可以执行以下操作：</p><pre data-lang="terminal" class="programlisting">C:\&gt; <strong class="userinput"><code>mysql -e "source <em class="replaceable"><code>batch-file</code></em>"</code></strong>
</pre><p>
        If you need to specify connection parameters on the command line,
        the command might look like this:
    </p><p style="color:blue;">如果需要在命令行上指定连接参数，该命令可能如下所示：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -h <em class="replaceable"><code>host</code></em> -u <em class="replaceable"><code>user</code></em> -p &lt; <em class="replaceable"><code>batch-file</code></em></code></strong>
Enter password: <strong class="userinput"><code>********</code></strong>
</pre><p>
        When you use <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> this way, you are creating a
        script file, then executing the script.
    </p><p style="color:blue;">当您以这种方式使用mysql时，您将创建一个脚本文件，然后执行该脚本。</p><p>
        If you want the script to continue even if some of the statements
        in it produce errors, you should use the
        <a class="link" href="programs.html#option_mysql_force"><code class="option">--force</code></a> command-line option.
    </p><p style="color:blue;">如果希望脚本继续，即使其中的某些语句产生错误，也应使用--force命令行选项。</p><p>
        Why use a script? Here are a few reasons:
    </p><p style="color:blue;">为什么要用剧本？原因如下：</p>
        <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                If you run a query repeatedly (say, every day or every week),
                making it a script enables you to avoid retyping it each time
                you execute it.
            </p><p style="color:blue;">如果您反复运行查询（例如，每天或每周），则将其设置为脚本可以避免每次执行时都重新键入它。</p></li><li class="listitem"><p>
                You can generate new queries from existing ones that are
                similar by copying and editing script files.
            </p><p style="color:blue;">可以通过复制和编辑脚本文件来生成类似于现有查询的新查询。</p></li><li class="listitem"><p>
                Batch mode can also be useful while you are developing a
                query, particularly for multiple-line statements or
                multiple-statement sequences. If you make a mistake, you do
                not have to retype everything. Just edit your script to
                correct the error, then tell <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> to
                execute it again.
            </p><p style="color:blue;">在开发查询时，批处理模式也很有用，特别是对于多行语句或多语句序列。如果你犯了错误，你不必重新输入所有的内容。只需编辑脚本来更正错误，然后告诉mysql再次执行它。</p></li><li class="listitem"><p>
                If you have a query that produces a lot of output, you can run
                the output through a pager rather than watching it scroll off
                the top of your screen:
            </p><p style="color:blue;">如果查询产生大量输出，则可以通过寻呼机运行输出，而不是看着它从屏幕顶部滚动：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql &lt; <em class="replaceable"><code>batch-file</code></em> | more</code></strong>
</pre></li><li class="listitem"><p>
                You can catch the output in a file for further processing:
            </p><p style="color:blue;">您可以捕获文件中的输出以进行进一步处理：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql &lt; <em class="replaceable"><code>batch-file</code></em> &gt; mysql.out</code></strong>
</pre></li><li class="listitem"><p>
                You can distribute your script to other people so that they
                can also run the statements.
            </p><p style="color:blue;">您可以将脚本分发给其他人，以便他们也可以运行语句。</p></li><li class="listitem"><p>
                Some situations do not allow for interactive use, for example,
                when you run a query from a <span class="command"><strong>cron</strong></span> job. In
                this case, you must use batch mode.
            </p><p style="color:blue;">有些情况下不允许交互使用，例如，当您从cron作业运行查询时。在这种情况下，必须使用批处理模式。</p></li></ul>
        </div>
        <p>
            The default output format is different (more concise) when you run
            <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> in batch mode than when you use it
            interactively. For example, the output of <code class="literal">SELECT DISTINCT
            species FROM pet</code> looks like this when
            <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> is run interactively:
        </p><p style="color:blue;">在批处理模式下运行mysql时，默认输出格式与以交互方式使用时不同（更简洁）。例如，当mysql以交互方式运行时，pet的select distinct species的输出如下所示：</p><pre data-lang="none" class="programlisting">+---------+
| species |
+---------+
| bird    |
| cat     |
| dog     |
| hamster |
| snake   |
+---------+
</pre><p>
        In batch mode, the output looks like this instead:
    </p><p style="color:blue;">在批处理模式下，输出如下所示：</p><pre data-lang="none" class="programlisting">species
bird
cat
dog
hamster
snake
</pre><p>
        If you want to get the interactive output format in batch mode,
        use <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql -t</strong></span></a>. To echo to the output the
        statements that are executed, use <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql -v</strong></span></a>.
    </p><p style="color:blue;">如果要在批处理模式下获得交互式输出格式，请使用mysql-t。要将执行的语句回送到输出，请使用mysql-v。</p><a class="indexterm" name="idm140286947124304"></a><a class="indexterm" name="idm140286947123216"></a><a class="indexterm" name="idm140286947122128"></a><a class="indexterm" name="idm140286947121024"></a><p>
        You can also use scripts from the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> prompt
        by using the <code class="literal">source</code> command or
        <code class="literal">\.</code> command:
    </p><p style="color:blue;">也可以使用源命令或\，在mysql提示符下使用脚本。命令：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>source <em class="replaceable"><code>filename</code></em>;</code></strong>
mysql&gt; <strong class="userinput"><code>\. <em class="replaceable"><code>filename</code></em></code></strong>
</pre><p>
        See <a class="xref" href="programs.html#mysql-batch-commands" title="4.5.1.5&nbsp;Executing SQL Statements from a Text File">Section&nbsp;4.5.1.5, “Executing SQL Statements from a Text File”</a>, for more information.
    </p><p style="color:blue;">有关详细信息，请参阅第4.5.1.5节“从文本文件执行SQL语句”。</p>
    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="examples"></a>3.6&nbsp;Examples of Common Queries</h2>

                </div>

            </div>

        </div>
        <div class="toc">
            <dl class="toc"><dt><span class="section"><a href="tutorial.html#example-maximum-column">3.6.1 The Maximum Value for a Column</a></span></dt><dt><span class="section"><a href="tutorial.html#example-maximum-row">3.6.2 The Row Holding the Maximum of a Certain Column</a></span></dt><dt><span class="section"><a href="tutorial.html#example-maximum-column-group">3.6.3 Maximum of Column per Group</a></span></dt><dt><span class="section"><a href="tutorial.html#example-maximum-column-group-row">3.6.4 The Rows Holding the Group-wise Maximum of a Certain Column</a></span></dt><dt><span class="section"><a href="tutorial.html#example-user-variables">3.6.5 Using User-Defined Variables</a></span></dt><dt><span class="section"><a href="tutorial.html#example-foreign-keys">3.6.6 Using Foreign Keys</a></span></dt><dt><span class="section"><a href="tutorial.html#searching-on-two-keys">3.6.7 Searching on Two Keys</a></span></dt><dt><span class="section"><a href="tutorial.html#calculating-days">3.6.8 Calculating Visits Per Day</a></span></dt><dt><span class="section"><a href="tutorial.html#example-auto-increment">3.6.9 Using AUTO_INCREMENT</a></span></dt></dl>
        </div>
        <a class="indexterm" name="idm140286947111152"></a><a class="indexterm" name="idm140286947109696"></a><p>
        Here are examples of how to solve some common problems with MySQL.
    </p><p style="color:blue;">下面是一些使用mysql解决一些常见问题的示例。</p><p>
        Some of the examples use the table <code class="literal">shop</code> to hold
        the price of each article (item number) for certain traders
        (dealers). Supposing that each trader has a single fixed price per
        article, then (<code class="literal">article</code>,
        <code class="literal">dealer</code>) is a primary key for the records.
    </p><p style="color:blue;">一些例子使用表商店为某些贸易商（经销商）保存每件商品（商品编号）的价格。假设每个交易者每件物品都有一个固定价格，那么（物品，交易者）是记录的主要密钥。</p><p>
        Start the command-line tool <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and select a
        database:
    </p><p style="color:blue;">启动命令行工具mysql并选择一个数据库：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql <em class="replaceable"><code>your-database-name</code></em></code></strong>
</pre><p>
        To create and populate the example table, use these statements:
    </p><p style="color:blue;">要创建和填充示例表，请使用以下语句：</p><pre data-lang="sql" class="programlisting">CREATE TABLE shop (
    article INT UNSIGNED  DEFAULT '0000' NOT NULL,
    dealer  CHAR(20)      DEFAULT ''     NOT NULL,
    price   DECIMAL(16,2) DEFAULT '0.00' NOT NULL,
    PRIMARY KEY(article, dealer));
INSERT INTO shop VALUES
    (1,'A',3.45),(1,'B',3.99),(2,'A',10.99),(3,'B',1.45),
    (3,'C',1.69),(3,'D',1.25),(4,'D',19.95);
</pre><p>
        After issuing the statements, the table should have the following
        contents:
    </p><p style="color:blue;">下发报表后，该表应包含以下内容：</p><pre data-lang="sql" class="programlisting">SELECT * FROM shop ORDER BY article;

+---------+--------+-------+
| article | dealer | price |
+---------+--------+-------+
|       1 | A      |  3.45 |
|       1 | B      |  3.99 |
|       2 | A      | 10.99 |
|       3 | B      |  1.45 |
|       3 | C      |  1.69 |
|       3 | D      |  1.25 |
|       4 | D      | 19.95 |
+---------+--------+-------+
</pre>
        <div class="section">

            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-maximum-column"></a>3.6.1&nbsp;The Maximum Value for a Column</h3>
                    </div>
                </div>
            </div>
            <p>
                <span class="quote">“<span class="quote">What is the highest item number?</span>”</span>
            </p><p style="color:blue;">“最高的项目编号是多少？“</p><pre data-lang="sql" class="programlisting">SELECT MAX(article) AS article FROM shop;

+---------+
| article |
+---------+
|       4 |
+---------+
</pre>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-maximum-row"></a>3.6.2&nbsp;The Row Holding the Maximum of a Certain Column</h3>

                    </div>

                </div>

            </div>
            <p>
        <span class="emphasis"><em>Task: Find the number, dealer, and price of the most
        expensive article.</em></span>
            </p><p style="color:blue;">任务：找出最贵商品的编号、经销商和价格。</p><p>
            This is easily done with a subquery:
        </p><p style="color:blue;">使用子查询很容易做到这一点：</p><pre data-lang="sql" class="programlisting">SELECT article, dealer, price
FROM   shop
WHERE  price=(SELECT MAX(price) FROM shop);

+---------+--------+-------+
| article | dealer | price |
+---------+--------+-------+
|    0004 | D      | 19.95 |
+---------+--------+-------+
</pre><p>
            Other solutions are to use a <code class="literal">LEFT JOIN</code> or to
            sort all rows descending by price and get only the first row
            using the MySQL-specific <code class="literal">LIMIT</code> clause:
        </p><p style="color:blue;">其他解决方案是使用左联接或按价格降序排列所有行，并使用mysql特定的limit子句仅获取第一行：</p><pre data-lang="sql" class="programlisting">SELECT s1.article, s1.dealer, s1.price
FROM shop s1
LEFT JOIN shop s2 ON s1.price &lt; s2.price
WHERE s2.article IS NULL;

SELECT article, dealer, price
FROM shop
ORDER BY price DESC
LIMIT 1;
</pre>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    If there were several most expensive articles, each with a
                    price of 19.95, the <code class="literal">LIMIT</code> solution would
                    show only one of them.
                </p><p style="color:blue;">如果有几件最贵的商品，每件价格都是19.95英镑，那么极限解只能显示其中一件。</p>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-maximum-column-group"></a>3.6.3&nbsp;Maximum of Column per Group</h3>

                    </div>

                </div>

            </div>
            <p>
                <span class="emphasis"><em>Task: Find the highest price per article.</em></span>
            </p><p style="color:blue;">任务：找出每件商品的最高价格。</p><pre data-lang="sql" class="programlisting">SELECT article, MAX(price) AS price
FROM   shop
GROUP BY article
ORDER BY article;

+---------+-------+
| article | price |
+---------+-------+
|    0001 |  3.99 |
|    0002 | 10.99 |
|    0003 |  1.69 |
|    0004 | 19.95 |
+---------+-------+
</pre>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-maximum-column-group-row"></a>3.6.4&nbsp;The Rows Holding the Group-wise Maximum of a Certain Column</h3>

                    </div>

                </div>

            </div>
            <p>
        <span class="emphasis"><em>Task: For each article, find the dealer or dealers
        with the most expensive price.</em></span>
            </p><p style="color:blue;">任务：每件商品都要找到一个或多个价格最贵的经销商。</p><p>
            This problem can be solved with a subquery like this one:
        </p><p style="color:blue;">这个问题可以用这样的子查询来解决：</p><pre data-lang="sql" class="programlisting">SELECT article, dealer, price
FROM   shop s1
WHERE  price=(SELECT MAX(s2.price)
              FROM shop s2
              WHERE s1.article = s2.article)
ORDER BY article;

+---------+--------+-------+
| article | dealer | price |
+---------+--------+-------+
|    0001 | B      |  3.99 |
|    0002 | A      | 10.99 |
|    0003 | C      |  1.69 |
|    0004 | D      | 19.95 |
+---------+--------+-------+
</pre><p>
            The preceding example uses a correlated subquery, which can be
            inefficient (see <a class="xref" href="sql-syntax.html#correlated-subqueries" title="13.2.10.7&nbsp;Correlated Subqueries">Section&nbsp;13.2.10.7, “Correlated Subqueries”</a>). Other
            possibilities for solving the problem are to use an uncorrelated
            subquery in the <code class="literal">FROM</code> clause or a
            <code class="literal">LEFT JOIN</code>.
        </p><p style="color:blue;">前面的例子使用了一个相关的子查询，这可能是低效的（参见第13.2.10.7节，“相关的子查询”）。解决该问题的其他可能性是在from子句中使用不相关的子查询或左联接。</p><p>
            Uncorrelated subquery:
        </p><p style="color:blue;">不相关子查询：</p><pre data-lang="sql" class="programlisting">SELECT s1.article, dealer, s1.price
FROM shop s1
JOIN (
  SELECT article, MAX(price) AS price
  FROM shop
  GROUP BY article) AS s2
  ON s1.article = s2.article AND s1.price = s2.price
ORDER BY article;
</pre><p>
            <code class="literal">LEFT JOIN</code>:
        </p><p style="color:blue;">左连接：</p><pre data-lang="sql" class="programlisting">SELECT s1.article, s1.dealer, s1.price
FROM shop s1
LEFT JOIN shop s2 ON s1.article = s2.article AND s1.price &lt; s2.price
WHERE s2.article IS NULL
ORDER BY s1.article;
</pre><p>
            The <code class="literal">LEFT JOIN</code> works on the basis that when
            <code class="literal">s1.price</code> is at its maximum value, there is no
            <code class="literal">s2.price</code> with a greater value and thus the
            corresponding <code class="literal">s2.article</code> value is
            <code class="literal">NULL</code>. See <a class="xref" href="sql-syntax.html#join" title="13.2.9.2&nbsp;JOIN Syntax">Section&nbsp;13.2.9.2, “JOIN Syntax”</a>.
        </p><p style="color:blue;">左Soin的工作原理是，当S1.PARSE处于最大值时，没有S2的价格具有更大的值，因此相应的S2.To值为NULL。参见第13.2.9.2节“连接语法”。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-user-variables"></a>3.6.5&nbsp;Using User-Defined Variables</h3>

                    </div>

                </div>

            </div>
            <p>
                You can employ MySQL user variables to remember results without
                having to store them in temporary variables in the client. (See
                <a class="xref" href="language-structure.html#user-variables" title="9.4&nbsp;User-Defined Variables">Section&nbsp;9.4, “User-Defined Variables”</a>.)
            </p><p style="color:blue;">您可以使用mysql用户变量来记住结果，而不必将结果存储在客户端的临时变量中。（见第9.4节“用户定义变量”。）</p><p>
            For example, to find the articles with the highest and lowest
            price you can do this:
        </p><p style="color:blue;">例如，要查找价格最高和最低的商品，可以执行以下操作：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @min_price:=MIN(price),@max_price:=MAX(price) FROM shop;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * FROM shop WHERE price=@min_price OR price=@max_price;</code></strong>
+---------+--------+-------+
| article | dealer | price |
+---------+--------+-------+
|    0003 | D      |  1.25 |
|    0004 | D      | 19.95 |
+---------+--------+-------+
</pre>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    It is also possible to store the name of a database object
                    such as a table or a column in a user variable and then to use
                    this variable in an SQL statement; however, this requires the
                    use of a prepared statement. See
                    <a class="xref" href="sql-syntax.html#sql-syntax-prepared-statements" title="13.5&nbsp;Prepared SQL Statement Syntax">Section&nbsp;13.5, “Prepared SQL Statement Syntax”</a>, for more
                    information.
                </p><p style="color:blue;">也可以将数据库对象（如表或列）的名称存储在用户变量中，然后在SQL语句中使用此变量；但是，这需要使用准备好的语句。有关详细信息，请参阅第13.5节“准备的SQL语句语法”。</p>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-foreign-keys"></a>3.6.6&nbsp;Using Foreign Keys</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286947058384"></a><a class="indexterm" name="idm140286947057312"></a><p>
            In MySQL, <code class="literal">InnoDB</code> tables support checking of
            foreign key constraints. See
            <a class="xref" href="innodb-storage-engine.html" title="Chapter&nbsp;14&nbsp;The InnoDB Storage Engine">Chapter&nbsp;14, <i>The InnoDB Storage Engine</i></a>, and
            <a class="xref" href="introduction.html#ansi-diff-foreign-keys" title="1.8.2.3&nbsp;Foreign Key Differences">Section&nbsp;1.8.2.3, “Foreign Key Differences”</a>.
        </p><p style="color:blue;">在mysql中，innodb表支持检查外键约束。参见第14章InnoDB存储引擎和第1.8.2.3节“外键差异”。</p><p>
            A foreign key constraint is not required merely to join two
            tables. For storage engines other than
            <code class="literal">InnoDB</code>, it is possible when defining a column
            to use a <code class="literal">REFERENCES
            <em class="replaceable"><code>tbl_name</code></em>(<em class="replaceable"><code>col_name</code></em>)</code>
            clause, which has no actual effect, and <span class="emphasis"><em>serves only as
        a memo or comment to you that the column which you are currently
        defining is intended to refer to a column in another
        table</em></span>. It is extremely important to realize when
            using this syntax that:
        </p><p style="color:blue;">外键约束不仅仅需要连接两个表。对于innodb以外的存储引擎，在定义列时可以使用references tbl_name（col_name）子句，该子句没有实际效果，并且仅作为您当前定义的列打算引用另一个表中的列的备注或注释。在使用此语法时，务必认识到：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    MySQL does not perform any sort of check to make sure that
                    <em class="replaceable"><code>col_name</code></em> actually exists in
                    <em class="replaceable"><code>tbl_name</code></em> (or even that
                    <em class="replaceable"><code>tbl_name</code></em> itself exists).
                </p><p style="color:blue;">MySQL不执行任何类型的检查，以确保在TBLYNEX中确实存在COLLY名称（或者甚至存在TBLYNEX本身）。</p></li><li class="listitem"><p>
                    MySQL does not perform any sort of action on
                    <em class="replaceable"><code>tbl_name</code></em> such as deleting rows in
                    response to actions taken on rows in the table which you are
                    defining; in other words, this syntax induces no <code class="literal">ON
                    DELETE</code> or <code class="literal">ON UPDATE</code> behavior
                    whatsoever. (Although you can write an <code class="literal">ON
                    DELETE</code> or <code class="literal">ON UPDATE</code> clause as
                    part of the <code class="literal">REFERENCES</code> clause, it is also
                    ignored.)
                </p><p style="color:blue;">mysql不会对tbl_name执行任何类型的操作，例如删除行，以响应对您定义的表中的行执行的操作；换句话说，此语法不会导致任何on delete或on update行为。（尽管可以将on delete或on update子句作为references子句的一部分编写，但它也会被忽略。）</p></li><li class="listitem"><p>
                    This syntax creates a <span class="emphasis"><em>column</em></span>; it does
                    <span class="bold"><strong>not</strong></span> create any sort of
                    index or key.
                </p><p style="color:blue;">此语法创建列；它不创建任何类型的索引或键。</p></li></ul>
            </div>
            <p>
                You can use a column so created as a join column, as shown here:
            </p><p style="color:blue;">可以使用这样创建的列作为联接列，如下所示：</p><pre data-lang="sql" class="programlisting">CREATE TABLE person (
    id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    name CHAR(60) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE shirt (
    id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    style ENUM('t-shirt', 'polo', 'dress') NOT NULL,
    color ENUM('red', 'blue', 'orange', 'white', 'black') NOT NULL,
    owner SMALLINT UNSIGNED NOT NULL REFERENCES person(id),
    PRIMARY KEY (id)
);

INSERT INTO person VALUES (NULL, 'Antonio Paz');

SELECT @last := LAST_INSERT_ID();

INSERT INTO shirt VALUES
(NULL, 'polo', 'blue', @last),
(NULL, 'dress', 'white', @last),
(NULL, 't-shirt', 'blue', @last);

INSERT INTO person VALUES (NULL, 'Lilliana Angelovska');

SELECT @last := LAST_INSERT_ID();

INSERT INTO shirt VALUES
(NULL, 'dress', 'orange', @last),
(NULL, 'polo', 'red', @last),
(NULL, 'dress', 'blue', @last),
(NULL, 't-shirt', 'white', @last);

SELECT * FROM person;
+----+---------------------+
| id | name                |
+----+---------------------+
|  1 | Antonio Paz         |
|  2 | Lilliana Angelovska |
+----+---------------------+

SELECT * FROM shirt;
+----+---------+--------+-------+
| id | style   | color  | owner |
+----+---------+--------+-------+
|  1 | polo    | blue   |     1 |
|  2 | dress   | white  |     1 |
|  3 | t-shirt | blue   |     1 |
|  4 | dress   | orange |     2 |
|  5 | polo    | red    |     2 |
|  6 | dress   | blue   |     2 |
|  7 | t-shirt | white  |     2 |
+----+---------+--------+-------+


SELECT s.* FROM person p INNER JOIN shirt s
   ON s.owner = p.id
 WHERE p.name LIKE 'Lilliana%'
   AND s.color &lt;&gt; 'white';

+----+-------+--------+-------+
| id | style | color  | owner |
+----+-------+--------+-------+
|  4 | dress | orange |     2 |
|  5 | polo  | red    |     2 |
|  6 | dress | blue   |     2 |
+----+-------+--------+-------+
</pre><p>
            When used in this fashion, the <code class="literal">REFERENCES</code>
            clause is not displayed in the output of
            <a class="link" href="sql-syntax.html#show-create-table" title="13.7.5.10&nbsp;SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> or
            <a class="link" href="sql-syntax.html#describe" title="13.8.1&nbsp;DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a>:
        </p><p style="color:blue;">以这种方式使用时，references子句不会显示在show create table或descripe的输出中：</p><pre data-lang="sql" class="programlisting">SHOW CREATE TABLE shirt\G
*************************** 1. row ***************************
Table: shirt
Create Table: CREATE TABLE `shirt` (
`id` smallint(5) unsigned NOT NULL auto_increment,
`style` enum('t-shirt','polo','dress') NOT NULL,
`color` enum('red','blue','orange','white','black') NOT NULL,
`owner` smallint(5) unsigned NOT NULL,
PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
</pre><p>
            The use of <code class="literal">REFERENCES</code> in this way as a
            comment or <span class="quote">“<span class="quote">reminder</span>”</span> in a column definition works
            with <code class="literal">MyISAM</code> tables.
        </p><p style="color:blue;">以这种方式将引用用作列定义中的注释或“提醒”适用于myisam表。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="searching-on-two-keys"></a>3.6.7&nbsp;Searching on Two Keys</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286947026688"></a><a class="indexterm" name="idm140286947025648"></a><a class="indexterm" name="idm140286947024576"></a><a class="indexterm" name="idm140286947023088"></a><p>
            An <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> using a single key is well
            optimized, as is the handling of
            <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a>.
        </p><p style="color:blue;">一个或使用一个键是很好的优化，就像处理和一样。</p><p>
            The one tricky case is that of searching on two different keys
            combined with <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a>:
        </p><p style="color:blue;">一个棘手的情况是，在两个不同的键上搜索，并结合或：</p><pre data-lang="sql" class="programlisting">SELECT field1_index, field2_index FROM test_table
WHERE field1_index = '1' OR  field2_index = '1'
</pre><p>
            This case is optimized. See
            <a class="xref" href="optimization.html#index-merge-optimization" title="8.2.1.3&nbsp;Index Merge Optimization">Section&nbsp;8.2.1.3, “Index Merge Optimization”</a>.
        </p><p style="color:blue;">这个案例是优化的。见第8.2.1.3节“索引合并优化”。</p><p>
            You can also solve the problem efficiently by using a
            <a class="link" href="sql-syntax.html#union" title="13.2.9.3&nbsp;UNION Syntax"><code class="literal">UNION</code></a> that combines the output of
            two separate <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> statements.
            See <a class="xref" href="sql-syntax.html#union" title="13.2.9.3&nbsp;UNION Syntax">Section&nbsp;13.2.9.3, “UNION Syntax”</a>.
        </p><p style="color:blue;">您还可以通过使用一个联合来有效地解决问题，该联合将两个单独的select语句的输出组合在一起。见第13.2.9.3节“联合语法”。</p><p>
            Each <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> searches only one key
            and can be optimized:
        </p><p style="color:blue;">每个选定项仅搜索一个键，并且可以进行优化：</p><pre data-lang="sql" class="programlisting">SELECT field1_index, field2_index
    FROM test_table WHERE field1_index = '1'
UNION
SELECT field1_index, field2_index
    FROM test_table WHERE field2_index = '1';
</pre>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="calculating-days"></a>3.6.8&nbsp;Calculating Visits Per Day</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286947006944"></a><a class="indexterm" name="idm140286947005904"></a><a class="indexterm" name="idm140286947004832"></a><a class="indexterm" name="idm140286947003744"></a><p>
            The following example shows how you can use the bit group
            functions to calculate the number of days per month a user has
            visited a Web page.
        </p><p style="color:blue;">下面的示例演示如何使用位组函数计算用户每月访问网页的天数。</p><pre data-lang="sql" class="programlisting">CREATE TABLE t1 (year YEAR, month INT UNSIGNED,
             day INT UNSIGNED);
INSERT INTO t1 VALUES(2000,1,1),(2000,1,20),(2000,1,30),(2000,2,2),
            (2000,2,23),(2000,2,23);
</pre><p>
            The example table contains year-month-day values representing
            visits by users to the page. To determine how many different
            days in each month these visits occur, use this query:
        </p><p style="color:blue;">示例表包含表示用户访问该页的年月日值。要确定每月进行这些访问的天数，请使用以下查询：</p><pre data-lang="sql" class="programlisting">SELECT year,month,BIT_COUNT(BIT_OR(1&lt;&lt;day)) AS days FROM t1
       GROUP BY year,month;
</pre><p>
            Which returns:
        </p><p style="color:blue;">返回：</p><pre data-lang="none" class="programlisting">+------+-------+------+
| year | month | days |
+------+-------+------+
| 2000 |     1 |    3 |
| 2000 |     2 |    2 |
+------+-------+------+
</pre><p>
            The query calculates how many different days appear in the table
            for each year/month combination, with automatic removal of
            duplicate entries.
        </p><p style="color:blue;">查询计算表中每年/月组合出现的不同天数，并自动删除重复条目。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="example-auto-increment"></a>3.6.9&nbsp;Using AUTO_INCREMENT</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286946994624"></a><a class="indexterm" name="idm140286946993552"></a><a class="indexterm" name="idm140286946992480"></a><p>
            The <code class="literal">AUTO_INCREMENT</code> attribute can be used to
            generate a unique identity for new rows:
        </p><p style="color:blue;">auto_increment属性可用于为新行生成唯一标识：</p><pre data-lang="sql" class="programlisting">CREATE TABLE animals (
     id MEDIUMINT NOT NULL AUTO_INCREMENT,
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
);

INSERT INTO animals (name) VALUES
    ('dog'),('cat'),('penguin'),
    ('lax'),('whale'),('ostrich');

SELECT * FROM animals;
</pre><p>
            Which returns:
        </p><p style="color:blue;">返回：</p><pre data-lang="none" class="programlisting">+----+---------+
| id | name    |
+----+---------+
|  1 | dog     |
|  2 | cat     |
|  3 | penguin |
|  4 | lax     |
|  5 | whale   |
|  6 | ostrich |
+----+---------+
</pre><p>
            No value was specified for the <code class="literal">AUTO_INCREMENT</code>
            column, so MySQL assigned sequence numbers automatically. You
            can also explicitly assign 0 to the column to generate sequence
            numbers, unless the
            <a class="link" href="server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a> SQL mode
            is enabled. For example:
        </p><p style="color:blue;">没有为auto_increment列指定值，因此mysql会自动分配序列号。也可以显式地将0分配给列以生成序列号，除非启用了no_auto_value_on_zero sql模式。例如：</p><pre data-lang="sql" class="programlisting">INSERT INTO animals (id,name) VALUES(0,'groundhog');
</pre><p>
            If the column is declared <code class="literal">NOT NULL</code>, it is
            also possible to assign <code class="literal">NULL</code> to the column to
            generate sequence numbers. For example:
        </p><p style="color:blue;">如果列被声明为不为空，也可以将空值赋给列以生成序列号。例如：</p><pre data-lang="sql" class="programlisting">INSERT INTO animals (id,name) VALUES(NULL,'squirrel');
</pre><p>
            When you insert any other value into an
            <code class="literal">AUTO_INCREMENT</code> column, the column is set to
            that value and the sequence is reset so that the next
            automatically generated value follows sequentially from the
            largest column value. For example:
        </p><p style="color:blue;">在自动递增列中插入任何其他值时，该列将设置为该值并重置序列，以便下一个自动生成的值从最大的列值开始按顺序排列。例如：</p><pre data-lang="sql" class="programlisting"><strong class="userinput"><code>INSERT INTO animals (id,name) VALUES(100,'rabbit');</code></strong>
<strong class="userinput"><code>INSERT INTO animals (id,name) VALUES(NULL,'mouse');</code></strong>
<strong class="userinput"><code>SELECT * FROM animals;</code></strong>
+-----+-----------+
| id  | name      |
+-----+-----------+
|   1 | dog       |
|   2 | cat       |
|   3 | penguin   |
|   4 | lax       |
|   5 | whale     |
|   6 | ostrich   |
|   7 | groundhog |
|   8 | squirrel  |
| 100 | rabbit    |
| 101 | mouse     |
+-----+-----------+
</pre><p>
            Updating an existing <code class="literal">AUTO_INCREMENT</code> column
            value in an <code class="literal">InnoDB</code> table does not reset the
            <code class="literal">AUTO_INCREMENT</code> sequence as it does for
            <code class="literal">MyISAM</code> and <code class="literal">NDB</code> tables.
        </p><p style="color:blue;">在NoYDB表中更新现有的AutoYLoad列值不会像MyISAM和NDB表那样重置AutoYLoad序列。</p><p>
            You can retrieve the most recent automatically generated
            <code class="literal">AUTO_INCREMENT</code> value with the
            <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> SQL function or
            the <a class="link" href="connectors-apis.html#mysql-insert-id" title="27.8.7.38&nbsp;mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> C API
            function. These functions are connection-specific, so their
            return values are not affected by another connection which is
            also performing inserts.
        </p><p style="color:blue;">可以使用last_insert_id（）sql函数或mysql_insert_id（）c api函数检索最近自动生成的自动递增值。这些函数是特定于连接的，因此它们的返回值不受另一个也在执行插入的连接的影响。</p><p>
            Use the smallest integer data type for the
            <code class="literal">AUTO_INCREMENT</code> column that is large enough to
            hold the maximum sequence value you will need. When the column
            reaches the upper limit of the data type, the next attempt to
            generate a sequence number fails. Use the
            <code class="literal">UNSIGNED</code> attribute if possible to allow a
            greater range. For example, if you use
            <a class="link" href="data-types.html#integer-types" title="11.2.1&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">TINYINT</code></a>, the maximum permissible
            sequence number is 127. For
            <a class="link" href="data-types.html#integer-types" title="11.2.1&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">TINYINT
                UNSIGNED</code></a>, the maximum is 255. See
            <a class="xref" href="data-types.html#integer-types" title="11.2.1&nbsp;Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT">Section&nbsp;11.2.1, “Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT,
                MEDIUMINT, BIGINT”</a> for the ranges of all the
            integer types.
        </p><p style="color:blue;">使用AutoMyAdvices列的最小整数数据类型，该列足够大，以容纳您需要的最大序列值。当列达到数据类型的上限时，下次生成序列号的尝试将失败。如果可能，请使用unsigned属性以允许更大的范围。例如，如果使用TyyIt，最大允许序列号是127。对于TunyIn未签名，最大值为255。有关所有整数类型的范围，请参见11.2.1节，“整数类型（精确值）-integer、int、smallint、tinyint、mediumint、bigint”。</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    For a multiple-row insert,
                    <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> and
                    <a class="link" href="connectors-apis.html#mysql-insert-id" title="27.8.7.38&nbsp;mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> actually
                    return the <code class="literal">AUTO_INCREMENT</code> key from the
                    <span class="emphasis"><em>first</em></span> of the inserted rows. This enables
                    multiple-row inserts to be reproduced correctly on other
                    servers in a replication setup.
                </p><p style="color:blue;">对于多行插入，last_insert_id（）和mysql_insert_id（）实际上从插入的第一行返回auto_increment键。这样可以在复制设置中的其他服务器上正确复制多行插入。</p>
            </div>
            <p>
                To start with an <code class="literal">AUTO_INCREMENT</code> value other
                than 1, set that value with <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE
                TABLE</code></a> or <a class="link" href="sql-syntax.html#alter-table" title="13.1.8&nbsp;ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
                like this:
            </p><p style="color:blue;">要以1以外的自动增量值开始，请使用create table或alter table设置该值，如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE tbl AUTO_INCREMENT = 100;</code></strong>
</pre>
            <div class="simplesect">

                <div class="titlepage">
                    <div>

                        <div class="simple">
                            <h4 class="title"><a name="example-auto-increment-innodb-notes"></a>InnoDB Notes</h4>
                        </div>
                    </div>
                </div>
                <p>
                    For information about <code class="literal">AUTO_INCREMENT</code> usage
                    specific to <code class="literal">InnoDB</code>, see
                    <a class="xref" href="innodb-storage-engine.html#innodb-auto-increment-handling" title="14.6.1.4&nbsp;AUTO_INCREMENT Handling in InnoDB">Section&nbsp;14.6.1.4, “AUTO_INCREMENT Handling in InnoDB”</a>.
                </p><p style="color:blue;">有关innodb特有的auto_increment用法的信息，请参阅第14.6.1.4节“innodb中的auto_increment处理”。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="example-auto-increment-myisam-notes"></a>MyISAM Notes</h4>

                        </div>

                    </div>

                </div>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        For <code class="literal">MyISAM</code> tables, you can specify
                        <code class="literal">AUTO_INCREMENT</code> on a secondary column in
                        a multiple-column index. In this case, the generated value
                        for the <code class="literal">AUTO_INCREMENT</code> column is
                        calculated as
                        <a class="link" href="functions.html#function_max"><code class="literal">MAX(<em class="replaceable"><code>auto_increment_column</code></em>)
                            + 1 WHERE
                            prefix=<em class="replaceable"><code>given-prefix</code></em></code></a>.
                        This is useful when you want to put data into ordered
                        groups.
                    </p><p style="color:blue;">对于myisam表，可以在多列索引中的辅助列上指定自动递增。在这种情况下，自动递增列的生成值计算为max（自动递增列）+1，其中prefix=给定前缀。当您希望将数据放入有序组时，这非常有用。</p><pre data-lang="sql" class="programlisting">CREATE TABLE animals (
    grp ENUM('fish','mammal','bird') NOT NULL,
    id MEDIUMINT NOT NULL AUTO_INCREMENT,
    name CHAR(30) NOT NULL,
    PRIMARY KEY (grp,id)
) ENGINE=MyISAM;

INSERT INTO animals (grp,name) VALUES
    ('mammal','dog'),('mammal','cat'),
    ('bird','penguin'),('fish','lax'),('mammal','whale'),
    ('bird','ostrich');

SELECT * FROM animals ORDER BY grp,id;
</pre><p>
                        Which returns:
                    </p><p style="color:blue;">返回：</p><pre data-lang="none" class="programlisting">+--------+----+---------+
| grp    | id | name    |
+--------+----+---------+
| fish   |  1 | lax     |
| mammal |  1 | dog     |
| mammal |  2 | cat     |
| mammal |  3 | whale   |
| bird   |  1 | penguin |
| bird   |  2 | ostrich |
+--------+----+---------+
</pre><p>
                        In this case (when the <code class="literal">AUTO_INCREMENT</code>
                        column is part of a multiple-column index),
                        <code class="literal">AUTO_INCREMENT</code> values are reused if you
                        delete the row with the biggest
                        <code class="literal">AUTO_INCREMENT</code> value in any group. This
                        happens even for <code class="literal">MyISAM</code> tables, for
                        which <code class="literal">AUTO_INCREMENT</code> values normally
                        are not reused.
                    </p><p style="color:blue;">在这种情况下（当auto_increment列是多列索引的一部分时），如果删除任何组中具有最大auto_increment值的行，则会重用auto_increment值。即使是myisam表也会发生这种情况，对于这些表，自动增量值通常不会被重用。</p></li><li class="listitem"><p>
                        If the <code class="literal">AUTO_INCREMENT</code> column is part of
                        multiple indexes, MySQL generates sequence values using
                        the index that begins with the
                        <code class="literal">AUTO_INCREMENT</code> column, if there is one.
                        For example, if the <code class="literal">animals</code> table
                        contained indexes <code class="literal">PRIMARY KEY (grp, id)</code>
                        and <code class="literal">INDEX (id)</code>, MySQL would ignore the
                        <code class="literal">PRIMARY KEY</code> for generating sequence
                        values. As a result, the table would contain a single
                        sequence, not a sequence per <code class="literal">grp</code> value.
                    </p><p style="color:blue;">如果auto_increment列是多个索引的一部分，mysql将使用从auto_increment列开始的索引（如果有）生成序列值。例如，如果anims表包含索引主键（grp，id）和索引（id），mysql将忽略生成序列值的主键。因此，表将包含单个序列，而不是每个GRP值的序列。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="example-auto-increment-further-reading"></a>Further Reading</h4>

                        </div>

                    </div>

                </div>
                <p>
                    More information about <code class="literal">AUTO_INCREMENT</code> is
                    available here:
                </p><p style="color:blue;">有关自动增量的详细信息，请访问：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        How to assign the <code class="literal">AUTO_INCREMENT</code>
                        attribute to a column: <a class="xref" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax">Section&nbsp;13.1.18, “CREATE TABLE Syntax”</a>, and
                        <a class="xref" href="sql-syntax.html#alter-table" title="13.1.8&nbsp;ALTER TABLE Syntax">Section&nbsp;13.1.8, “ALTER TABLE Syntax”</a>.
                    </p><p style="color:blue;">如何将auto_increment属性分配给列：第13.1.18节“创建表语法”，第13.1.8节“更改表语法”。</p></li><li class="listitem"><p>
                        How <code class="literal">AUTO_INCREMENT</code> behaves depending on
                        the
                        <a class="link" href="server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a>
                        SQL mode: <a class="xref" href="server-administration.html#sql-mode" title="5.1.10&nbsp;Server SQL Modes">Section&nbsp;5.1.10, “Server SQL Modes”</a>.
                    </p><p style="color:blue;">auto_increment的行为取决于零sql模式下的no_auto_value:section 5.1.10，“服务器sql模式”。</p></li><li class="listitem"><p>
                        How to use the
                        <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function
                        to find the row that contains the most recent
                        <code class="literal">AUTO_INCREMENT</code> value:
                        <a class="xref" href="functions.html#information-functions" title="12.15&nbsp;Information Functions">Section&nbsp;12.15, “Information Functions”</a>.
                    </p><p style="color:blue;">如何使用last_insert_id（）函数查找包含最新自动增量值的行：第12.15节“信息函数”。</p></li><li class="listitem"><p>
                        Setting the <code class="literal">AUTO_INCREMENT</code> value to be
                        used: <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>.
                    </p><p style="color:blue;">设置要使用的自动增量值：第5.1.7节，“服务器系统变量”。</p></li><li class="listitem"><p>
                        <a class="xref" href="innodb-storage-engine.html#innodb-auto-increment-handling" title="14.6.1.4&nbsp;AUTO_INCREMENT Handling in InnoDB">Section&nbsp;14.6.1.4, “AUTO_INCREMENT Handling in InnoDB”</a>
                    </p><p style="color:blue;">第14.6.1.4节，“InnoDB中的自动增量处理”</p></li><li class="listitem"><p>
                        <code class="literal">AUTO_INCREMENT</code> and replication:
                        <a class="xref" href="replication.html#replication-features-auto-increment" title="16.4.1.1&nbsp;Replication and AUTO_INCREMENT">Section&nbsp;16.4.1.1, “Replication and AUTO_INCREMENT”</a>.
                    </p><p style="color:blue;">自动增量和复制：第16.4.1.1节，“复制和自动增量”。</p></li><li class="listitem"><p>
                        Server-system variables related to
                        <code class="literal">AUTO_INCREMENT</code>
                        (<a class="link" href="replication.html#sysvar_auto_increment_increment"><code class="literal">auto_increment_increment</code></a>
                        and
                        <a class="link" href="replication.html#sysvar_auto_increment_offset"><code class="literal">auto_increment_offset</code></a>)
                        that can be used for replication:
                        <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>.
                    </p><p style="color:blue;">与可用于复制的自动增量（自动增量和自动增量偏移量）相关的服务器系统变量：第5.1.7节，“服务器系统变量”。</p></li></ul>
                </div>

            </div>

        </div>

    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="apache"></a>3.7&nbsp;Using MySQL with Apache</h2>

                </div>

            </div>

        </div>
        <a class="indexterm" name="idm140286946899920"></a><p>
        There are programs that let you authenticate your users from a
        MySQL database and also let you write your log files into a MySQL
        table.
    </p><p style="color:blue;">有一些程序可以让您从mysql数据库对用户进行身份验证，还可以让您将日志文件写入mysql表。</p><p>
        You can change the Apache logging format to be easily readable by
        MySQL by putting the following into the Apache configuration file:
    </p><p style="color:blue;">通过将以下内容放入apache配置文件，可以将apache日志格式更改为易于mysql读取的格式：</p><pre data-lang="none" class="programlisting">LogFormat \
        "\"%h\",%{%Y%m%d%H%M%S}t,%&gt;s,\"%b\",\"%{Content-Type}o\",  \
        \"%U\",\"%{Referer}i\",\"%{User-Agent}i\""
</pre><p>
        To load a log file in that format into MySQL, you can use a
        statement something like this:
    </p><p style="color:blue;">要将该格式的日志文件加载到mysql中，可以使用如下语句：</p><pre data-lang="sql" class="programlisting">LOAD DATA INFILE '<em class="replaceable"><code>/local/access_log</code></em>' INTO TABLE <em class="replaceable"><code>tbl_name</code></em>
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\'
</pre><p>
        The named table should be created to have columns that correspond
        to those that the <code class="literal">LogFormat</code> line writes to the
        log file.
    </p><p style="color:blue;">应创建命名表，使其列与logformat行写入日志文件的列相对应。</p>
    </div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
    <hr>
    <table width="100%" summary="Navigation footer">
        <tbody><tr>
            <td width="40%" align="left"><a accesskey="p" href="installing.html">Prev</a></td>
            <td width="20%" align="center"><a accesskey="u" href="">Up</a></td>
            <td width="40%" align="right">&nbsp;<a accesskey="n" href="programs.html">Next</a></td>
        </tr>
        <tr>
            <td width="40%" align="left" valign="top">Chapter&nbsp;2 Installing and Upgrading MySQL</td>
            <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
            <td width="40%" align="right" valign="top">Chapter&nbsp;4 MySQL Programs</td>
        </tr>
        </tbody></table>
</div>


</body></html>
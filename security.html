<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
    <table width="100%" summary="Navigation header">
        <tbody><tr>
            <th colspan="3" align="center">Chapter&nbsp;6 Security</th>
        </tr>
        <tr>
            <td width="20%" align="left"><a accesskey="p" href="server-administration.html">Prev</a>&nbsp;</td>
            <th width="60%" align="center"></th>
            <td width="20%" align="right">&nbsp;<a accesskey="n" href="backup-and-recovery.html">Next</a></td>
        </tr>
        </tbody></table>
    <hr>
</div>
<div class="chapter">
    <div class="titlepage">
        <div>
            <div>
                <h1 class="title"><a name="security"></a>Chapter&nbsp;6&nbsp;Security</h1>

            </div>

        </div>

    </div>
    <div class="toc">
        <p><b>Table of Contents</b></p><p style="color:blue;">目录</p><dl class="toc"><dt><span class="section"><a href="security.html#general-security-issues">6.1 General Security Issues</a></span></dt><dd><dl><dt><span class="section"><a href="security.html#security-guidelines">6.1.1 Security Guidelines</a></span></dt><dt><span class="section"><a href="security.html#password-security">6.1.2 Keeping Passwords Secure</a></span></dt><dt><span class="section"><a href="security.html#security-against-attack">6.1.3 Making MySQL Secure Against Attackers</a></span></dt><dt><span class="section"><a href="security.html#security-options">6.1.4 Security-Related mysqld Options and Variables</a></span></dt><dt><span class="section"><a href="security.html#changing-mysql-user">6.1.5 How to Run MySQL as a Normal User</a></span></dt><dt><span class="section"><a href="security.html#load-data-local">6.1.6 Security Issues with LOAD DATA LOCAL</a></span></dt><dt><span class="section"><a href="security.html#secure-client-programming">6.1.7 Client Programming Security Guidelines</a></span></dt></dl></dd><dt><span class="section"><a href="security.html#access-control">6.2 Access Control and Account Management</a></span></dt><dd><dl><dt><span class="section"><a href="security.html#user-names">6.2.1 Account User Names and Passwords</a></span></dt><dt><span class="section"><a href="security.html#privileges-provided">6.2.2 Privileges Provided by MySQL</a></span></dt><dt><span class="section"><a href="security.html#grant-tables">6.2.3 Grant Tables</a></span></dt><dt><span class="section"><a href="security.html#account-names">6.2.4 Specifying Account Names</a></span></dt><dt><span class="section"><a href="security.html#connection-access">6.2.5 Access Control, Stage 1: Connection Verification</a></span></dt><dt><span class="section"><a href="security.html#request-access">6.2.6 Access Control, Stage 2: Request Verification</a></span></dt><dt><span class="section"><a href="security.html#creating-accounts">6.2.7 Adding Accounts, Assigning Privileges, and Dropping Accounts</a></span></dt><dt><span class="section"><a href="security.html#reserved-users">6.2.8 Reserved Accounts</a></span></dt><dt><span class="section"><a href="security.html#privilege-changes">6.2.9 When Privilege Changes Take Effect</a></span></dt><dt><span class="section"><a href="security.html#assigning-passwords">6.2.10 Assigning Account Passwords</a></span></dt><dt><span class="section"><a href="security.html#password-management">6.2.11 Password Management</a></span></dt><dt><span class="section"><a href="security.html#expired-password-handling">6.2.12 Server Handling of Expired Passwords</a></span></dt><dt><span class="section"><a href="security.html#pluggable-authentication">6.2.13 Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#proxy-users">6.2.14 Proxy Users</a></span></dt><dt><span class="section"><a href="security.html#account-locking">6.2.15 Account Locking</a></span></dt><dt><span class="section"><a href="security.html#user-resources">6.2.16 Setting Account Resource Limits</a></span></dt><dt><span class="section"><a href="security.html#problems-connecting">6.2.17 Troubleshooting Problems Connecting to MySQL</a></span></dt><dt><span class="section"><a href="security.html#account-activity-auditing">6.2.18 SQL-Based Account Activity Auditing</a></span></dt></dl></dd><dt><span class="section"><a href="security.html#encrypted-connections">6.3 Using Encrypted Connections</a></span></dt><dd><dl><dt><span class="section"><a href="security.html#using-encrypted-connections">6.3.1 Configuring MySQL to Use Encrypted Connections</a></span></dt><dt><span class="section"><a href="security.html#encrypted-connection-protocols-ciphers">6.3.2 Encrypted Connection TLS Protocols and Ciphers</a></span></dt><dt><span class="section"><a href="security.html#creating-ssl-rsa-files">6.3.3 Creating SSL and RSA Certificates and Keys</a></span></dt><dt><span class="section"><a href="security.html#ssl-libraries">6.3.4 SSL Library-Dependent Capabilities</a></span></dt><dt><span class="section"><a href="security.html#windows-and-ssh">6.3.5 Connecting to MySQL Remotely from Windows with SSH</a></span></dt></dl></dd><dt><span class="section"><a href="security.html#security-plugins">6.4 Security Plugins</a></span></dt><dd><dl><dt><span class="section"><a href="security.html#authentication-plugins">6.4.1 Authentication Plugins</a></span></dt><dt><span class="section"><a href="security.html#connection-control">6.4.2 The Connection-Control Plugins</a></span></dt><dt><span class="section"><a href="security.html#validate-password">6.4.3 The Password Validation Plugin</a></span></dt><dt><span class="section"><a href="security.html#keyring">6.4.4 The MySQL Keyring</a></span></dt><dt><span class="section"><a href="security.html#audit-log">6.4.5 MySQL Enterprise Audit</a></span></dt><dt><span class="section"><a href="security.html#firewall">6.4.6 MySQL Enterprise Firewall</a></span></dt><dt><span class="section"><a href="security.html#data-masking">6.4.7 MySQL Enterprise Data Masking and De-Identification</a></span></dt></dl></dd></dl>
    </div>
    <p>
        When thinking about security within a MySQL installation, you should
        consider a wide range of possible topics and how they affect the
        security of your MySQL server and related applications:
    </p><p style="color:blue;">在考虑MySQL安装的安全性时，您应该考虑各种可能的主题，以及它们如何影响MySQL服务器和相关应用程序的安全性：</p>
    <div class="itemizedlist">
        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            General factors that affect security. These include choosing
            good passwords, not granting unnecessary privileges to users,
            ensuring application security by preventing SQL injections and
            data corruption, and others. See
            <a class="xref" href="security.html#general-security-issues" title="6.1&nbsp;General Security Issues">Section&nbsp;6.1, “General Security Issues”</a>.
        </p><p style="color:blue;">影响安全的一般因素。这些措施包括选择好的密码，不授予用户不必要的特权，通过防止sql注入和数据损坏来确保应用程序的安全，等等。见第6.1节“一般安全问题”。</p></li><li class="listitem"><p>
            Security of the installation itself. The data files, log files,
            and the all the application files of your installation should be
            protected to ensure that they are not readable or writable by
            unauthorized parties. For more information, see
            <a class="xref" href="installing.html#postinstallation" title="2.10&nbsp;Postinstallation Setup and Testing">Section&nbsp;2.10, “Postinstallation Setup and Testing”</a>.
        </p><p style="color:blue;">安装本身的安全性。应保护安装的数据文件、日志文件和所有应用程序文件，以确保未经授权的各方无法读取或写入它们。有关更多信息，请参见第2.10节“安装后设置和测试”。</p></li><li class="listitem"><p>
            Access control and security within the database system itself,
            including the users and databases granted with access to the
            databases, views and stored programs in use within the database.
            For more information, see <a class="xref" href="security.html#access-control" title="6.2&nbsp;Access Control and Account Management">Section&nbsp;6.2, “Access Control and Account Management”</a>.
        </p><p style="color:blue;">数据库系统内部的访问控制和安全性，包括授予访问数据库、视图和数据库中使用的存储程序的用户和数据库。有关更多信息，请参见第6.2节“访问控制和帐户管理”。</p></li><li class="listitem"><p>
            The features offered by security-related plugins. See
            <a class="xref" href="security.html#security-plugins" title="6.4&nbsp;Security Plugins">Section&nbsp;6.4, “Security Plugins”</a>.
        </p><p style="color:blue;">安全相关插件提供的功能。见第6.4节“安全插件”。</p></li><li class="listitem"><p>
            Network security of MySQL and your system. The security is
            related to the grants for individual users, but you may also
            wish to restrict MySQL so that it is available only locally on
            the MySQL server host, or to a limited set of other hosts.
        </p><p style="color:blue;">mysql和你的系统的网络安全。安全性与对单个用户的授权有关，但您也可能希望限制mysql，使其仅在mysql服务器主机上本地可用，或仅对有限的一组其他主机可用。</p></li><li class="listitem"><p>
            Ensure that you have adequate and appropriate backups of your
            database files, configuration and log files. Also be sure that
            you have a recovery solution in place and test that you are able
            to successfully recover the information from your backups. See
            <a class="xref" href="backup-and-recovery.html" title="Chapter&nbsp;7&nbsp;Backup and Recovery">Chapter&nbsp;7, <i>Backup and Recovery</i></a>.
        </p><p style="color:blue;">请确保对数据库文件、配置和日志文件进行了足够和适当的备份。另外，请确保已准备好恢复解决方案，并测试是否能够成功地从备份中恢复信息。见第7章，备份和恢复。</p></li></ul>
    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="general-security-issues"></a>6.1&nbsp;General Security Issues</h2>

                </div>

            </div>

        </div>
        <div class="toc">
            <dl class="toc"><dt><span class="section"><a href="security.html#security-guidelines">6.1.1 Security Guidelines</a></span></dt><dt><span class="section"><a href="security.html#password-security">6.1.2 Keeping Passwords Secure</a></span></dt><dt><span class="section"><a href="security.html#security-against-attack">6.1.3 Making MySQL Secure Against Attackers</a></span></dt><dt><span class="section"><a href="security.html#security-options">6.1.4 Security-Related mysqld Options and Variables</a></span></dt><dt><span class="section"><a href="security.html#changing-mysql-user">6.1.5 How to Run MySQL as a Normal User</a></span></dt><dt><span class="section"><a href="security.html#load-data-local">6.1.6 Security Issues with LOAD DATA LOCAL</a></span></dt><dt><span class="section"><a href="security.html#secure-client-programming">6.1.7 Client Programming Security Guidelines</a></span></dt></dl>
        </div>
        <a class="indexterm" name="idm140286890711088"></a><p>
        This section describes general security issues to be aware of and
        what you can do to make your MySQL installation more secure against
        attack or misuse. For information specifically about the access
        control system that MySQL uses for setting up user accounts and
        checking database access, see <a class="xref" href="installing.html#postinstallation" title="2.10&nbsp;Postinstallation Setup and Testing">Section&nbsp;2.10, “Postinstallation Setup and Testing”</a>.
    </p><p style="color:blue;">本节介绍需要注意的一般安全问题，以及如何使mysql安装更安全地防止攻击或误用。有关mysql用于设置用户帐户和检查数据库访问的访问控制系统的详细信息，请参阅2.10节“安装后设置和测试”。</p><p>
        For answers to some questions that are often asked about MySQL
        Server security issues, see <a class="xref" href="faqs.html#faqs-security" title="A.9&nbsp;MySQL 5.7 FAQ: Security">Section&nbsp;A.9, “MySQL 5.7 FAQ: Security”</a>.
    </p><p style="color:blue;">有关mysql服务器安全问题的一些常见问题的解答，请参阅A.9节，“mysql 5.7常见问题解答：安全”。</p>
        <div class="section">

            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="security-guidelines"></a>6.1.1&nbsp;Security Guidelines</h3>
                    </div>
                </div>
            </div>
            <a class="indexterm" name="idm140286890705824"></a><a class="indexterm" name="idm140286890704752"></a><p>
            Anyone using MySQL on a computer connected to the Internet should
            read this section to avoid the most common security mistakes.
        </p><p style="color:blue;">在连接到Internet的计算机上使用MySQL的任何人都应该阅读本节，以避免最常见的安全错误。</p><p>
            In discussing security, it is necessary to consider fully
            protecting the entire server host (not just the MySQL server)
            against all types of applicable attacks: eavesdropping, altering,
            playback, and denial of service. We do not cover all aspects of
            availability and fault tolerance here.
        </p><p style="color:blue;">在讨论安全性时，必须考虑充分保护整个服务器主机（不仅仅是mysql服务器）免受所有类型的适用攻击：窃听、更改、回放和拒绝服务。我们在这里不涉及可用性和容错性的所有方面。</p><p>
            MySQL uses security based on Access Control Lists (ACLs) for all
            connections, queries, and other operations that users can attempt
            to perform. There is also support for SSL-encrypted connections
            between MySQL clients and servers. Many of the concepts discussed
            here are not specific to MySQL at all; the same general ideas
            apply to almost all applications.
        </p><p style="color:blue;">mysql对用户可以尝试执行的所有连接、查询和其他操作使用基于访问控制列表（acl）的安全性。MySQL客户端和服务器之间也支持SSL加密连接。这里讨论的许多概念根本不是mysql特有的；几乎所有应用程序都适用相同的一般思想。</p><p>
            When running MySQL, follow these guidelines:
        </p><p style="color:blue;">运行mysql时，请遵循以下准则：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="bold"><strong>Do not ever give anyone (except MySQL
          <code class="literal">root</code> accounts) access to the
          <code class="literal">user</code> table in the <code class="literal">mysql</code>
          system database!</strong></span> This is critical.
                </p><p style="color:blue;">不要让任何人（除了mysql根帐户）访问mysql系统数据库中的用户表！这很关键。</p></li><li class="listitem"><p>
                    Learn how the MySQL access privilege system works (see
                    <a class="xref" href="security.html#access-control" title="6.2&nbsp;Access Control and Account Management">Section&nbsp;6.2, “Access Control and Account Management”</a>). Use the
                    <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> and
                    <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> statements to control
                    access to MySQL. Do not grant more privileges than necessary.
                    Never grant privileges to all hosts.
                </p><p style="color:blue;">了解mysql访问权限系统的工作原理（请参阅第6.2节“访问控制和帐户管理”）。使用grant和revoke语句控制对mysql的访问。不要授予超过必要的特权。不要授予所有主机特权。</p><p>
                    Checklist:
                </p><p style="color:blue;">检查表：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                            Try <code class="literal">mysql -u root</code>. If you are able to
                            connect successfully to the server without being asked for
                            a password, anyone can connect to your MySQL server as the
                            MySQL <code class="literal">root</code> user with full privileges!
                            Review the MySQL installation instructions, paying
                            particular attention to the information about setting a
                            <code class="literal">root</code> password. See
                            <a class="xref" href="installing.html#default-privileges" title="2.10.4&nbsp;Securing the Initial MySQL Account">Section&nbsp;2.10.4, “Securing the Initial MySQL Account”</a>.
                        </p><p style="color:blue;">试试mysql-u root。如果您能够在不需要密码的情况下成功连接到服务器，任何人都可以以mysql根用户的身份以完全权限连接到mysql服务器！查看mysql安装说明，特别注意有关设置根密码的信息。参见第2.10.4节“保护初始mysql帐户”。</p></li><li class="listitem"><p>
                            Use the <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a>
                            statement to check which accounts have access to what.
                            Then use the <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a>
                            statement to remove those privileges that are not
                            necessary.
                        </p><p style="color:blue;">使用show grants语句检查哪些帐户可以访问哪些内容。然后使用revoke语句删除那些不需要的特权。</p></li></ul>
                    </div>
                </li><li class="listitem"><p>
                    Do not store cleartext passwords in your database. If your
                    computer becomes compromised, the intruder can take the full
                    list of passwords and use them. Instead, use
                    <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a> or some other one-way
                    hashing function and store the hash value.
                </p><p style="color:blue;">不要在数据库中存储明文密码。如果你的电脑受到威胁，入侵者可以获取完整的密码列表并使用它们。相反，使用sha2（）或其他单向哈希函数并存储哈希值。</p><p>
                    To prevent password recovery using rainbow tables, do not use
                    these functions on a plain password; instead, choose some
                    string to be used as a salt, and use hash(hash(password)+salt)
                    values.
                </p><p style="color:blue;">为了防止使用rainbow表恢复密码，不要在普通密码上使用这些函数；相反，选择一些字符串作为salt，并使用hash（hash（password）+salt）值。</p></li><li class="listitem"><p>
                    Do not choose passwords from dictionaries. Special programs
                    exist to break passwords. Even passwords like
                    <span class="quote">“<span class="quote">xfish98</span>”</span> are very bad. Much better is
                    <span class="quote">“<span class="quote">duag98</span>”</span> which contains the same word
                    <span class="quote">“<span class="quote">fish</span>”</span> but typed one key to the left on a
                    standard QWERTY keyboard. Another method is to use a password
                    that is taken from the first characters of each word in a
                    sentence (for example, <span class="quote">“<span class="quote">Four score and seven years
          ago</span>”</span> results in a password of <span class="quote">“<span class="quote">Fsasya</span>”</span>).
                    The password is easy to remember and type, but difficult to
                    guess for someone who does not know the sentence. In this
                    case, you can additionally substitute digits for the number
                    words to obtain the phrase <span class="quote">“<span class="quote">4 score and 7 years
          ago</span>”</span>, yielding the password <span class="quote">“<span class="quote">4sa7ya</span>”</span> which
                    is even more difficult to guess.
                </p><p style="color:blue;">不要从字典中选择密码。存在破解密码的特殊程序。甚至像“xfish98”这样的密码也很糟糕。更好的是“duag98”，它包含相同的单词“fish”，但在标准的qwerty键盘上在左侧键入一个键。另一种方法是使用取自句子中每个单词第一个字符的密码（例如，“四分七年前”的结果是密码“fsasya”）。密码很容易记住和输入，但是对于不知道这个句子的人来说很难猜到。在这种情况下，您还可以用数字代替数字单词来获得短语“4 score and 7 years ago”，从而得到更难猜测的密码“4sa7ya”。</p></li><li class="listitem"><p>
                    Invest in a firewall. This protects you from at least 50% of
                    all types of exploits in any software. Put MySQL behind the
                    firewall or in a demilitarized zone (DMZ).
                </p><p style="color:blue;">投资防火墙。这可以保护您免受任何软件中至少50%的各类攻击。将mysql放在防火墙后面或非军事区（dmz）中。</p><p>
                    Checklist:
                </p><p style="color:blue;">检查表：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                            Try to scan your ports from the Internet using a tool such
                            as <code class="literal">nmap</code>. MySQL uses port 3306 by
                            default. This port should not be accessible from untrusted
                            hosts. As a simple way to check whether your MySQL port is
                            open, try the following command from some remote machine,
                            where <em class="replaceable"><code>server_host</code></em> is the host
                            name or IP address of the host on which your MySQL server
                            runs:
                        </p><p style="color:blue;">尝试使用nmap等工具从Internet扫描端口。mysql默认使用端口3306。不应从不受信任的主机访问此端口。作为检查MySQL端口是否打开的简单方法，请从某个远程计算机尝试以下命令，其中server_host是运行MySQL服务器的主机的主机名或IP地址：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>telnet <em class="replaceable"><code>server_host</code></em> 3306</code></strong>
</pre><p>
                            If <span class="command"><strong>telnet</strong></span> hangs or the connection is
                            refused, the port is blocked, which is how you want it to
                            be. If you get a connection and some garbage characters,
                            the port is open, and should be closed on your firewall or
                            router, unless you really have a good reason to keep it
                            open.
                        </p><p style="color:blue;">如果telnet挂起或连接被拒绝，端口将被阻止，这就是您希望的方式。如果你有一个连接和一些垃圾字符，端口是打开的，应该在防火墙或路由器上关闭，除非你有充分的理由保持它打开。</p></li></ul>
                    </div>
                </li><li class="listitem"><p>
                    Applications that access MySQL should not trust any data
                    entered by users, and should be written using proper defensive
                    programming techniques. See
                    <a class="xref" href="security.html#secure-client-programming" title="6.1.7&nbsp;Client Programming Security Guidelines">Section&nbsp;6.1.7, “Client Programming Security Guidelines”</a>.
                </p><p style="color:blue;">访问mysql的应用程序不应信任用户输入的任何数据，而应使用适当的防御编程技术编写。见第6.1.7节，“客户编程安全指南”。</p></li><li class="listitem"><p>
                    Do not transmit plain (unencrypted) data over the Internet.
                    This information is accessible to everyone who has the time
                    and ability to intercept it and use it for their own purposes.
                    Instead, use an encrypted protocol such as SSL or SSH. MySQL
                    supports internal SSL connections. Another technique is to use
                    SSH port-forwarding to create an encrypted (and compressed)
                    tunnel for the communication.
                </p><p style="color:blue;">不要在互联网上传输纯（未加密）数据。任何有时间和能力截取这些信息并将其用于自己的目的的人都可以访问这些信息。相反，使用加密协议，如ssl或ssh。mysql支持内部ssl连接。另一种技术是使用ssh端口转发为通信创建加密（和压缩）隧道。</p></li><li class="listitem"><p>
                    Learn to use the <span class="command"><strong>tcpdump</strong></span> and
                    <span class="command"><strong>strings</strong></span> utilities. In most cases, you can
                    check whether MySQL data streams are unencrypted by issuing a
                    command like the following:
                </p><p style="color:blue;">学习使用tcpdump和strings实用程序。在大多数情况下，可以通过发出如下命令来检查mysql数据流是否未加密：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>tcpdump -l -i eth0 -w - src or dst port 3306 | strings</code></strong>
</pre><p>
                    This works under Linux and should work with small
                    modifications under other systems.
                </p><p style="color:blue;">这在linux下工作，在其他系统下应该可以进行小的修改。</p>
                    <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Warning
                        </div>
                        <p>
                            If you do not see cleartext data, this does not always mean
                            that the information actually is encrypted. If you need high
                            security, consult with a security expert.
                        </p><p style="color:blue;">如果您没有看到cleartext数据，这并不总是意味着信息实际上是加密的。如果您需要高安全性，请咨询安全专家。</p>
                    </div>
                </li></ul>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="password-security"></a>6.1.2&nbsp;Keeping Passwords Secure</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#password-security-user">6.1.2.1 End-User Guidelines for Password Security</a></span></dt><dt><span class="section"><a href="security.html#password-security-admin">6.1.2.2 Administrator Guidelines for Password Security</a></span></dt><dt><span class="section"><a href="security.html#password-logging">6.1.2.3 Passwords and Logging</a></span></dt><dt><span class="section"><a href="security.html#password-hashing">6.1.2.4 Password Hashing in MySQL</a></span></dt></dl>
            </div>
            <a class="indexterm" name="idm140286890659152"></a><p>
            Passwords occur in several contexts within MySQL. The following
            sections provide guidelines that enable end users and
            administrators to keep these passwords secure and avoid exposing
            them. There is also a discussion of how MySQL uses password
            hashing internally and of a plugin that you can use to enforce
            stricter passwords.
        </p><p style="color:blue;">在mysql中，密码出现在多个上下文中。以下各节提供了一些指导原则，使最终用户和管理员能够确保这些密码的安全并避免公开它们。还讨论了mysql如何在内部使用密码散列，以及如何使用插件来强制使用更严格的密码。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="password-security-user"></a>6.1.2.1&nbsp;End-User Guidelines for Password Security</h4>
                        </div>
                    </div>
                </div>
                <a class="indexterm" name="idm140286890655824"></a><p>
                MySQL users should use the following guidelines to keep
                passwords secure.
            </p><p style="color:blue;">mysql用户应该使用以下准则来保证密码的安全。</p><p>
                When you run a client program to connect to the MySQL server, it
                is inadvisable to specify your password in a way that exposes it
                to discovery by other users. The methods you can use to specify
                your password when you run client programs are listed here,
                along with an assessment of the risks of each method. In short,
                the safest methods are to have the client program prompt for the
                password or to specify the password in a properly protected
                option file.
            </p><p style="color:blue;">当您运行一个客户端程序来连接mysql服务器时，不建议以其他用户发现的方式指定您的密码。这里列出了在运行客户端程序时可以用来指定密码的方法，以及对每个方法的风险的评估。简而言之，最安全的方法是让客户端程序提示输入密码，或者在受适当保护的选项文件中指定密码。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Use the <a class="link" href="programs.html#mysql-config-editor" title="4.6.6&nbsp;mysql_config_editor — MySQL Configuration Utility"><span class="command"><strong>mysql_config_editor</strong></span></a> utility,
                        which enables you to store authentication credentials in an
                        encrypted login path file named
                        <code class="filename">.mylogin.cnf</code>. The file can be read
                        later by MySQL client programs to obtain authentication
                        credentials for connecting to MySQL Server. See
                        <a class="xref" href="programs.html#mysql-config-editor" title="4.6.6&nbsp;mysql_config_editor — MySQL Configuration Utility">Section&nbsp;4.6.6, “<span class="command"><strong>mysql_config_editor</strong></span> — MySQL Configuration Utility”</a>.
                    </p><p style="color:blue;">使用mysql_config_editor实用程序，可以将身份验证凭据存储在名为.mylogin.cnf的加密登录路径文件中。mysql客户端程序稍后可以读取该文件，以获取连接到mysql服务器的身份验证凭据。参见第4.6.6节“mysql配置编辑器-mysql配置实用程序”。</p></li><li class="listitem"><p>
                        <a class="indexterm" name="idm140286890648480"></a>

                        <a class="indexterm" name="idm140286890647408"></a>

                        Use a
                        <code class="option">--password=<em class="replaceable"><code>password</code></em></code>
                        or <code class="option">-p<em class="replaceable"><code>password</code></em></code>
                        option on the command line. For example:
                    </p><p style="color:blue;">在命令行上使用--password=password或-ppassword选项。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u francis -pfrank <em class="replaceable"><code>db_name</code></em></code></strong>
</pre>
                        <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Warning
                            </div>
                            <p>
                                This is convenient <span class="emphasis"><em>but insecure</em></span>. On
                                some systems, your password becomes visible to system
                                status programs such as <span class="command"><strong>ps</strong></span> that may be
                                invoked by other users to display command lines. MySQL
                                clients typically overwrite the command-line password
                                argument with zeros during their initialization sequence.
                                However, there is still a brief interval during which the
                                value is visible. Also, on some systems this overwriting
                                strategy is ineffective and the password remains visible
                                to <span class="command"><strong>ps</strong></span>. (SystemV Unix systems and
                                perhaps others are subject to this problem.)
                            </p><p style="color:blue;">这很方便，但不安全。在某些系统上，您的密码对系统状态程序（如ps）可见，其他用户可以调用这些程序来显示命令行。mysql客户机通常在初始化过程中用零覆盖命令行密码参数。但是，仍然有一个很短的时间间隔，在此期间该值是可见的。此外，在某些系统上，这种覆盖策略无效，密码对ps仍然可见（systemv unix系统和其他系统可能会遇到此问题）。</p>
                        </div>
                        <p>
                            If your operating environment is set up to display your
                            current command in the title bar of your terminal window,
                            the password remains visible as long as the command is
                            running, even if the command has scrolled out of view in the
                            window content area.
                        </p><p style="color:blue;">如果您的操作环境设置为在终端窗口的标题栏中显示当前命令，则只要该命令正在运行，密码就保持可见，即使该命令已在窗口内容区域滚动出视图。</p></li><li class="listitem"><p>
                        Use the <a class="link" href="programs.html#option_general_password"><code class="option">--password</code></a> or
                        <code class="option">-p</code> option on the command line with no
                        password value specified. In this case, the client program
                        solicits the password interactively:
                    </p><p style="color:blue;">在没有指定密码值的命令行上使用--password或-p选项。在这种情况下，客户端程序以交互方式请求密码：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u francis -p <em class="replaceable"><code>db_name</code></em></code></strong>
Enter password: ********
</pre><p>
                        The <code class="literal">*</code> characters indicate where you enter
                        your password. The password is not displayed as you enter
                        it.
                    </p><p style="color:blue;">*字符表示您输入密码的位置。输入密码时不显示密码。</p><p>
                        It is more secure to enter your password this way than to
                        specify it on the command line because it is not visible to
                        other users. However, this method of entering a password is
                        suitable only for programs that you run interactively. If
                        you want to invoke a client from a script that runs
                        noninteractively, there is no opportunity to enter the
                        password from the keyboard. On some systems, you may even
                        find that the first line of your script is read and
                        interpreted (incorrectly) as your password.
                    </p><p style="color:blue;">以这种方式输入密码比在命令行中指定密码更安全，因为其他用户看不到它。但是，这种输入密码的方法只适用于以交互方式运行的程序。如果要从非交互运行的脚本调用客户端，则没有机会从键盘输入密码。在某些系统上，您甚至可能会发现脚本的第一行被读取并（错误地）解释为您的密码。</p></li><li class="listitem"><p>
                        Store your password in an option file. For example, on Unix,
                        you can list your password in the
                        <code class="literal">[client]</code> section of the
                        <code class="filename">.my.cnf</code> file in your home directory:
                    </p><p style="color:blue;">将密码存储在选项文件中。例如，在UNIX上，可以在主目录中.my.cnf文件的[客户端]部分列出密码：</p><a class="indexterm" name="idm140286890629200"></a><a class="indexterm" name="idm140286890628128"></a><pre data-lang="ini" class="programlisting">[client]
password=<em class="replaceable"><code>password</code></em>
</pre><p>
                        To keep the password safe, the file should not be accessible
                        to anyone but yourself. To ensure this, set the file access
                        mode to <code class="literal">400</code> or <code class="literal">600</code>.
                        For example:
                    </p><p style="color:blue;">为了保证密码的安全，除了你自己，任何人都不能访问该文件。要确保这一点，请将文件访问模式设置为400或600。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>chmod 600 .my.cnf</code></strong>
</pre><p>
                        To name from the command line a specific option file
                        containing the password, use the
                        <a class="link" href="programs.html#option_general_defaults-file"><code class="option">--defaults-file=<em class="replaceable"><code>file_name</code></em></code></a>
                        option, where <code class="filename">file_name</code> is the full
                        path name to the file. For example:
                    </p><p style="color:blue;">要从命令行命名包含密码的特定选项文件，请使用--defaults file=file_name选项，其中file_name是文件的完整路径名。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --defaults-file=/home/francis/mysql-opts</code></strong>
</pre><p>
                        <a class="xref" href="programs.html#option-files" title="4.2.2.2&nbsp;Using Option Files">Section&nbsp;4.2.2.2, “Using Option Files”</a>, discusses option files in
                        more detail.
                    </p><p style="color:blue;">第4.2.2.2节“使用选项文件”更详细地讨论了选项文件。</p></li><li class="listitem"><p>
                        Store your password in the <code class="literal">MYSQL_PWD</code>
                        environment variable. See
                        <a class="xref" href="programs.html#environment-variables" title="4.9&nbsp;MySQL Environment Variables">Section&nbsp;4.9, “MySQL Environment Variables”</a>.
                    </p><p style="color:blue;">将密码存储在mysql_pwd环境变量中。见第4.9节“MySQL环境变量”。</p><p>
                        This method of specifying your MySQL password must be
                        considered <span class="emphasis"><em>extremely insecure</em></span> and
                        should not be used. Some versions of <span class="command"><strong>ps</strong></span>
                        include an option to display the environment of running
                        processes. On some systems, if you set
                        <code class="literal">MYSQL_PWD</code>, your password is exposed to
                        any other user who runs <span class="command"><strong>ps</strong></span>. Even on
                        systems without such a version of <span class="command"><strong>ps</strong></span>, it
                        is unwise to assume that there are no other methods by which
                        users can examine process environments.
                    </p><p style="color:blue;">这种指定mysql密码的方法必须被认为是非常不安全的，不应该使用。某些版本的ps包含一个选项，用于显示正在运行的进程的环境。在某些系统上，如果您设置mysql_pwd，您的密码将暴露给运行ps的任何其他用户。即使在没有ps版本的系统上，也不明智地假设没有其他方法可以让用户检查流程环境。</p></li></ul>
                </div>
                <a class="indexterm" name="idm140286890609712"></a><p>
                On Unix, the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client writes a record of
                executed statements to a history file (see
                <a class="xref" href="programs.html#mysql-logging" title="4.5.1.3&nbsp;mysql Client Logging">Section&nbsp;4.5.1.3, “mysql Client Logging”</a>). By default, this file is named
                <code class="filename">.mysql_history</code> and is created in your home
                directory. Passwords can be written as plain text in SQL
                statements such as <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>
                and <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>, so if you use
                these statements, they are logged in the history file. To keep
                this file safe, use a restrictive access mode, the same way as
                described earlier for the <code class="filename">.my.cnf</code> file.
            </p><p style="color:blue;">在unix上，mysql客户机将已执行语句的记录写入一个历史文件（参见4.5.1.3节，“mysql客户机日志”）。默认情况下，此文件名为.mysql_history，并在主目录中创建。在诸如create user和alter user之类的sql语句中，密码可以以纯文本形式写入，因此如果使用这些语句，它们将记录在历史文件中。要保证此文件的安全，请使用限制性访问模式，与前面对.my.cnf文件所述的方式相同。</p><p>
                If your command interpreter is configured to maintain a history,
                any file in which the commands are saved will contain MySQL
                passwords entered on the command line. For example,
                <span class="command"><strong>bash</strong></span> uses
                <code class="filename">~/.bash_history</code>. Any such file should have
                a restrictive access mode.
            </p><p style="color:blue;">如果命令解释器配置为维护历史记录，则保存命令的任何文件都将包含在命令行上输入的mysql密码。例如，bash使用~/.bash\u历史记录。任何此类文件都应具有限制性访问模式。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="password-security-admin"></a>6.1.2.2&nbsp;Administrator Guidelines for Password Security</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286890598592"></a><p>
                Database administrators should use the following guidelines to
                keep passwords secure.
            </p><p style="color:blue;">数据库管理员应使用以下准则来确保密码的安全。</p><p>
                MySQL stores passwords for user accounts in the
                <code class="literal">mysql.user</code> system table. Access to this table
                should never be granted to any nonadministrative accounts.
            </p><p style="color:blue;">mysql在mysql.user系统表中存储用户帐户的密码。不应将对此表的访问权限授予任何非管理帐户。</p><p>
                Account passwords can be expired so that users must reset them.
                See <a class="xref" href="security.html#password-management" title="6.2.11&nbsp;Password Management">Section&nbsp;6.2.11, “Password Management”</a>, and
                <a class="xref" href="security.html#expired-password-handling" title="6.2.12&nbsp;Server Handling of Expired Passwords">Section&nbsp;6.2.12, “Server Handling of Expired Passwords”</a>.
            </p><p style="color:blue;">帐户密码可能已过期，因此用户必须重置它们。参见第6.2.11节“密码管理”和第6.2.12节“服务器处理过期密码”。</p><p>
                The <code class="literal">validate_password</code> plugin can be used to
                enforce a policy on acceptable password. See
                <a class="xref" href="security.html#validate-password" title="6.4.3&nbsp;The Password Validation Plugin">Section&nbsp;6.4.3, “The Password Validation Plugin”</a>.
            </p><p style="color:blue;">validate_password插件可用于对可接受的密码实施策略。参见第6.4.3节“密码验证插件”。</p><p>
                A user who has access to modify the plugin directory (the value
                of the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                variable) or the <code class="filename">my.cnf</code> file that specifies
                the plugin directory location can replace plugins and modify the
                capabilities provided by plugins, including authentication
                plugins.
            </p><p style="color:blue;">有权修改插件目录（plugin_dir系统变量的值）或指定插件目录位置的my.cnf文件的用户可以替换插件并修改插件提供的功能，包括验证插件。</p><p>
                Files such as log files to which passwords might be written
                should be protected. See <a class="xref" href="security.html#password-logging" title="6.1.2.3&nbsp;Passwords and Logging">Section&nbsp;6.1.2.3, “Passwords and Logging”</a>.
            </p><p style="color:blue;">应该保护可能写入密码的日志文件等文件。见第6.1.2.3节“密码和日志”。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="password-logging"></a>6.1.2.3&nbsp;Passwords and Logging</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286890586560"></a><a class="indexterm" name="idm140286890585072"></a><p>
                Passwords can be written as plain text in SQL statements such as
                <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET
                PASSWORD</code></a>, and statements that invoke the
                <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function. If such
                statements are logged by the MySQL server as written, passwords
                in them become visible to anyone with access to the logs.
            </p><p style="color:blue;">密码可以在诸如create user、grant、set password和调用password（）函数的语句等sql语句中以纯文本形式写入。如果这些语句是由mysql服务器以书面形式记录的，那么可以访问日志的任何人都可以看到其中的密码。</p><p>
                Statement logging avoids writing passwords as cleartext for the
                following statements:
            </p><p style="color:blue;">语句日志记录避免将密码作为以下语句的明文写入：</p><pre data-lang="sql" class="programlisting">CREATE USER ... IDENTIFIED BY ...
ALTER USER ... IDENTIFIED BY ...
GRANT ... IDENTIFIED BY ...
SET PASSWORD ...
SLAVE START ... PASSWORD = ...
CREATE SERVER ... OPTIONS(... PASSWORD ...)
ALTER SERVER ... OPTIONS(... PASSWORD ...)
</pre><p>
                Passwords in those statements are rewritten to not appear
                literally in statement text written to the general query log,
                slow query log, and binary log. Rewriting does not apply to
                other statements. In particular,
                <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a> or
                <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a> statements for the
                <code class="literal">mysql.user</code> system table that refer to literal
                passwords are logged as is, so you should avoid such statements.
                (Direct modification of grant tables is discouraged, anyway.)
            </p><p style="color:blue;">将重写这些语句中的密码，使其不按字面意思出现在写入常规查询日志、慢速查询日志和二进制日志的语句文本中。重写不适用于其他语句。特别是，mysql.user系统表中引用文字密码的insert或update语句将按原样记录，因此应避免此类语句。（无论如何，不鼓励直接修改授权表。）</p><p>
                For the general query log, password rewriting can be suppressed
                by starting the server with the
                <a class="link" href="server-administration.html#option_mysqld_log-raw"><code class="option">--log-raw</code></a> option. For security
                reasons, this option is not recommended for production use. For
                diagnostic purposes, it may be useful to see the exact text of
                statements as received by the server.
            </p><p style="color:blue;">对于常规查询日志，可以通过使用--log raw选项启动服务器来禁止密码重写。出于安全原因，不建议在生产中使用此选项。出于诊断目的，查看服务器接收到的语句的确切文本可能很有用。</p><p>
                Contents of the audit log file produced by the audit log plugin
                are not encrypted. For security reasons, this file should be
                written to a directory accessible only to the MySQL server and
                users with a legitimate reason to view the log. See
                <a class="xref" href="security.html#audit-log-security" title="6.4.5.3&nbsp;MySQL Enterprise Audit Security Considerations">Section&nbsp;6.4.5.3, “MySQL Enterprise Audit Security Considerations”</a>.
            </p><p style="color:blue;">审核日志插件生成的审核日志文件的内容未加密。出于安全原因，应该将此文件写入一个只有mysql服务器和有合法理由查看日志的用户才能访问的目录。参见第6.4.5.3节“MySQL企业审计安全注意事项”。</p><p>
                Statements received by the server may be rewritten if a query
                rewrite plugin is installed (see
                <a class="xref" href="extending-mysql.html#query-rewrite-plugin-type" title="Query Rewrite Plugins">Query Rewrite Plugins</a>). In this case, the
                <a class="link" href="server-administration.html#option_mysqld_log-raw"><code class="option">--log-raw</code></a> option affects
                statement logging as follows:
            </p><p style="color:blue;">如果安装了查询重写插件，服务器接收到的语句可能会被重写（请参阅查询重写插件）。在本例中，--log raw选项影响语句日志记录，如下所示：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Without <a class="link" href="server-administration.html#option_mysqld_log-raw"><code class="option">--log-raw</code></a>, the server
                        logs the statement returned by the query rewrite plugin.
                        This may differ from the statement as received.
                    </p><p style="color:blue;">如果没有--log raw，服务器将记录查询重写插件返回的语句。这可能与收到的声明有所不同。</p></li><li class="listitem"><p>
                        With <a class="link" href="server-administration.html#option_mysqld_log-raw"><code class="option">--log-raw</code></a>, the server
                        logs the original statement as received.
                    </p><p style="color:blue;">使用--log raw，服务器将原始语句记录为已接收。</p></li></ul>
                </div>
                <p>
                    An implication of password rewriting is that statements that
                    cannot be parsed (due, for example, to syntax errors) are not
                    written to the general query log because they cannot be known to
                    be password free. Use cases that require logging of all
                    statements including those with errors should use the
                    <a class="link" href="server-administration.html#option_mysqld_log-raw"><code class="option">--log-raw</code></a> option, bearing in mind
                    that this also bypasses password rewriting.
                </p><p style="color:blue;">密码重写的一个含义是，无法解析的语句（例如，由于语法错误）不会写入常规查询日志，因为它们不知道是无密码的。需要记录所有语句（包括有错误的语句）的用例应该使用--log raw选项，要记住这也会绕过密码重写。</p><p>
                Password rewriting occurs only when plain text passwords are
                expected. For statements with syntax that expect a password hash
                value, no rewriting occurs. If a plain text password is supplied
                erroneously for such syntax, the password is logged as given,
                without rewriting. For example, the following statement is
                logged as shown because a password hash value is expected:
            </p><p style="color:blue;">密码重写仅在需要纯文本密码时发生。对于需要密码散列值的语法语句，不会发生重写。如果为这种语法错误地提供了纯文本密码，则会按照给定的方式记录密码，而不会重写。例如，如下所示记录以下语句，因为需要密码哈希值：</p><pre data-lang="sql" class="programlisting">CREATE USER 'user1'@'localhost' IDENTIFIED BY PASSWORD 'not-so-secret';
</pre><p>
                To guard log files against unwarranted exposure, locate them in
                a directory that restricts access to the server and the database
                administrator. If the server logs to tables in the
                <code class="literal">mysql</code> database, grant access to those tables
                only to the database administrator.
            </p><p style="color:blue;">要防止日志文件被不必要的公开，请将它们定位在限制对服务器和数据库管理员的访问的目录中。如果服务器登录到mysql数据库中的表，则只向数据库管理员授予对这些表的访问权限。</p><p>
                Replication slaves store the password for the replication master
                in the master info repository, which can be either a file or a
                table (see <a class="xref" href="replication.html#slave-logs" title="16.2.4&nbsp;Replication Relay and Status Logs">Section&nbsp;16.2.4, “Replication Relay and Status Logs”</a>). Ensure that the
                repository can be accessed only by the database administrator.
                An alternative to storing the password in a file is to use the
                <a class="link" href="sql-syntax.html#start-slave" title="13.4.2.6&nbsp;START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement to specify
                credentials for connecting to the master.
            </p><p style="color:blue;">复制从服务器将复制主服务器的密码存储在主信息存储库中，该存储库可以是文件或表（请参阅第16.2.4节“复制中继和状态日志”）。确保只有数据库管理员才能访问存储库。另一种将密码存储在文件中的方法是使用start slave语句指定连接到主服务器的凭据。</p><p>
                Use a restricted access mode to protect database backups that
                include log tables or log files containing passwords.
            </p><p style="color:blue;">使用受限访问模式保护包含日志表或包含密码的日志文件的数据库备份。</p>
            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="password-hashing"></a>6.1.2.4&nbsp;Password Hashing in MySQL</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286890553280"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The information in this section applies fully only before
                        MySQL 5.7.5, and only for accounts that use the
                        <code class="literal">mysql_native_password</code> or
                        <code class="literal">mysql_old_password</code> authentication plugins.
                        Support for pre-4.1 password hashes was removed in MySQL
                        5.7.5. This includes removal of the
                        <code class="literal">mysql_old_password</code> authentication plugin
                        and the <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>
                        function. Also, <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth</code></a>
                        cannot be disabled, and
                        <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> cannot be set
                        to 1.
                    </p><p style="color:blue;">本节中的信息仅在mysql 5.7.5之前完全适用，并且仅适用于使用mysql本地密码或mysql旧密码身份验证插件的帐户。mysql 5.7.5中删除了对pre-4.1密码散列的支持。这包括删除mysql_old_password身份验证插件和old_password（）函数。此外，不能禁用secure_auth，也不能将旧的_密码设置为1。</p><p>
                    As of MySQL 5.7.5, only the information about 4.1 password
                    hashes and the <code class="literal">mysql_native_password</code>
                    authentication plugin remains relevant.
                </p><p style="color:blue;">从mysql 5.7.5开始，只有关于4.1密码散列和mysql本地密码身份验证插件的信息仍然相关。</p>
                </div>
                <p>
                    MySQL lists user accounts in the <code class="literal">user</code> table
                    of the <code class="literal">mysql</code> database. Each MySQL account can
                    be assigned a password, although the <code class="literal">user</code>
                    table does not store the cleartext version of the password, but
                    a hash value computed from it.
                </p><p style="color:blue;">mysql在mysql数据库的用户表中列出用户帐户。每个mysql帐户都可以分配一个密码，尽管用户表不存储明文版本的密码，但可以从中计算出一个散列值。</p><p>
                MySQL uses passwords in two phases of client/server
                communication:
            </p><p style="color:blue;">MySQL在客户端/服务器通信的两个阶段使用密码：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        When a client attempts to connect to the server, there is an
                        initial authentication step in which the client must present
                        a password that has a hash value matching the hash value
                        stored in the <code class="literal">user</code> table for the account
                        the client wants to use.
                    </p><p style="color:blue;">当客户机尝试连接到服务器时，有一个初始身份验证步骤，在该步骤中，客户机必须提供一个密码，该密码的哈希值与客户机要使用的帐户的用户表中存储的哈希值相匹配。</p></li><li class="listitem"><p>
                        After the client connects, it can (if it has sufficient
                        privileges) set or change the password hash for accounts
                        listed in the <code class="literal">user</code> table. The client can
                        do this by using the
                        <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function to
                        generate a password hash, or by using a password-generating
                        statement (<a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, or
                        <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>).
                    </p><p style="color:blue;">在客户端连接之后，它可以（如果它有足够的特权）为用户表中列出的帐户设置或更改密码散列。客户端可以通过使用password（）函数生成密码散列，或者通过使用密码生成语句（create user、grant或set password）来完成此操作。</p></li></ul>
                </div>
                <p>
                    In other words, the server <span class="emphasis"><em>checks</em></span> hash
                    values during authentication when a client first attempts to
                    connect. The server <span class="emphasis"><em>generates</em></span> hash values
                    if a connected client invokes the
                    <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function or uses a
                    password-generating statement to set or change a password.
                </p><p style="color:blue;">换句话说，当客户端首次尝试连接时，服务器在身份验证期间检查散列值。如果连接的客户端调用password（）函数或使用password generating语句设置或更改密码，服务器将生成哈希值。</p><p>
                Password hashing methods in MySQL have the history described
                following. These changes are illustrated by changes in the
                result from the <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>
                function that computes password hash values and in the structure
                of the <code class="literal">user</code> table where passwords are stored.
            </p><p style="color:blue;">mysql中的密码散列方法的历史记录如下所述。这些更改通过计算密码散列值的password（）函数的结果和存储密码的用户表的结构中的更改来说明。</p>
                <h5><a name="idm140286890525984"></a>The Original (Pre-4.1) Hashing Method</h5>
                <p>
                    The original hashing method produced a 16-byte string. Such
                    hashes look like this:
                </p><p style="color:blue;">原始的哈希方法生成了一个16字节的字符串。这样的散列如下：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PASSWORD('mypass');</code></strong>
+--------------------+
| PASSWORD('mypass') |
+--------------------+
| 6f8c114b58f2ce9e   |
+--------------------+
</pre><p>
                To store account passwords, the <code class="literal">Password</code>
                column of the <code class="literal">user</code> table was at this point 16
                bytes long.
            </p><p style="color:blue;">要存储帐户密码，用户表的password列此时为16字节长。</p>
                <h5><a name="idm140286890521072"></a>The 4.1 Hashing Method</h5>
                <p>
                    MySQL 4.1 introduced password hashing that provided better
                    security and reduced the risk of passwords being intercepted.
                    There were several aspects to this change:
                </p><p style="color:blue;">mysql 4.1引入了密码散列，提供了更好的安全性，并降低了密码被截获的风险。这种变化有几个方面：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Different format of password values produced by the
                        <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function
                    </p><p style="color:blue;">password（）函数生成的密码值的不同格式</p></li><li class="listitem"><p>
                        Widening of the <code class="literal">Password</code> column
                    </p><p style="color:blue;">密码栏加宽</p></li><li class="listitem"><p>
                        Control over the default hashing method
                    </p><p style="color:blue;">控制默认哈希方法</p></li><li class="listitem"><p>
                        Control over the permitted hashing methods for clients
                        attempting to connect to the server
                    </p><p style="color:blue;">控制尝试连接到服务器的客户端允许的哈希方法</p></li></ul>
                </div>
                <p>
                    The changes in MySQL 4.1 took place in two stages:
                </p><p style="color:blue;">mysql 4.1中的更改分为两个阶段：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        MySQL 4.1.0 used a preliminary version of the 4.1 hashing
                        method. This method was short lived and the following
                        discussion says nothing more about it.
                    </p><p style="color:blue;">mysql 4.1.0使用了4.1哈希方法的初步版本。这种方法是短命的，下面的讨论对此只字未提。</p></li><li class="listitem"><p>
                        In MySQL 4.1.1, the hashing method was modified to produce a
                        longer 41-byte hash value:
                    </p><p style="color:blue;">在MySQL4.1.1中，哈希方法被修改为产生一个长41字节的哈希值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PASSWORD('mypass');</code></strong>
+-------------------------------------------+
| PASSWORD('mypass')                        |
+-------------------------------------------+
| *6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4 |
+-------------------------------------------+
</pre><p>
                        The longer password hash format has better cryptographic
                        properties, and client authentication based on long hashes
                        is more secure than that based on the older short hashes.
                    </p><p style="color:blue;">长密码散列格式具有更好的加密特性，基于长散列的客户端身份验证比基于旧的短散列的客户端身份验证更安全。</p><p>
                        To accommodate longer password hashes, the
                        <code class="literal">Password</code> column in the
                        <code class="literal">user</code> table was changed at this point to
                        be 41 bytes, its current length.
                    </p><p style="color:blue;">为了适应更长的密码散列，用户表中的password列此时被更改为41字节，即当前的长度。</p><p>
                        A widened <code class="literal">Password</code> column can store
                        password hashes in both the pre-4.1 and 4.1 formats. The
                        format of any given hash value can be determined two ways:
                    </p><p style="color:blue;">加宽的password列可以以pre-4.1和4.1格式存储密码散列。任何给定哈希值的格式可以通过两种方式确定：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                The length: 4.1 and pre-4.1 hashes are 41 and 16 bytes,
                                respectively.
                            </p><p style="color:blue;">长度：4.1和pre-4.1散列分别为41和16字节。</p></li><li class="listitem"><p>
                                Password hashes in the 4.1 format always begin with a
                                <code class="literal">*</code> character, whereas passwords in the
                                pre-4.1 format never do.
                            </p><p style="color:blue;">4.1格式的密码散列总是以*字符开头，而4.1之前的格式的密码永远不会。</p></li></ul>
                        </div>
                        <p>
                            To permit explicit generation of pre-4.1 password hashes,
                            two additional changes were made:
                        </p><p style="color:blue;">为了允许显式生成pre-4.1密码散列，还进行了两项更改：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                The <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>
                                function was added, which returns hash values in the
                                16-byte format.
                            </p><p style="color:blue;">添加了旧的_password（）函数，该函数返回16字节格式的哈希值。</p></li><li class="listitem"><p>
                                For compatibility purposes, the
                                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> system
                                variable was added, to enable DBAs and applications
                                control over the hashing method. The default
                                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> value of
                                0 causes hashing to use the 4.1 method (41-byte hash
                                values), but setting
                                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a> causes
                                hashing to use the pre-4.1 method. In this case,
                                <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> produces
                                16-byte values and is equivalent to
                                <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>
                            </p><p style="color:blue;">出于兼容性目的，添加了旧的U PASSWORDS系统变量，以使DBA和应用程序能够控制哈希方法。默认的old_passwords值为0会导致哈希使用4.1方法（41字节哈希值），但是设置old_passwords=1会导致哈希使用pre-4.1方法。在这种情况下，password（）生成16字节的值，与old_password（）等价</p></li></ul>
                        </div>
                        <p>
                            To permit DBAs control over how clients are permitted to
                            connect, the <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth</code></a>
                            system variable was added. Starting the server with this
                            variable disabled or enabled permits or prohibits clients to
                            connect using the older pre-4.1 password hashing method.
                            Before MySQL 5.6.5,
                            <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth</code></a> is disabled by
                            default. As of 5.6.5,
                            <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth</code></a> is enabled by
                            default to promote a more secure default configuration DBAs
                            can disable it at their discretion, but this is not
                            recommended, and pre-4.1 password hashes are deprecated and
                            should be avoided. (For account upgrade instructions, see
                            <a class="xref" href="security.html#account-upgrades" title="6.4.1.3&nbsp;Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password Plugin">Section&nbsp;6.4.1.3, “Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password
                                Plugin”</a>.)
                        </p><p style="color:blue;">为了允许dba控制如何允许客户端连接，添加了secure_auth系统变量。在禁用或启用此变量的情况下启动服务器，允许或禁止客户端使用旧的pre-4.1密码哈希方法进行连接。在mysql 5.6.5之前，默认情况下禁用secure_auth。从5.6.5开始，默认情况下启用secure_auth以提升更安全的默认配置dba可以自行禁用它，但不建议这样做，4.1之前的密码散列已弃用，应避免使用。（有关帐户升级说明，请参阅6.4.1.3节，“从4.1之前的密码散列和mysql旧密码插件迁移”。）</p><p>
                            In addition, the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client supports a
                            <a class="link" href="programs.html#option_mysql_secure-auth"><code class="option">--secure-auth</code></a> option that is
                            analogous to <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth</code></a>,
                            but from the client side. It can be used to prevent
                            connections to less secure accounts that use pre-4.1
                            password hashing. This option is disabled by default before
                            MySQL 5.6.7, enabled thereafter.
                        </p><p style="color:blue;">此外，mysql客户机支持一个--secure auth选项，类似于secure-auth，但从客户机端。它可以用来防止连接到使用4.1之前的密码散列的不太安全的帐户。此选项在mysql 5.6.7之前默认禁用，之后启用。</p></li></ul>
                </div>
                <h5><a name="idm140286890482544"></a>Compatibility Issues Related to Hashing Methods</h5>
                <p>
                    The widening of the <code class="literal">Password</code> column in MySQL
                    4.1 from 16 bytes to 41 bytes affects installation or upgrade
                    operations as follows:
                </p><p style="color:blue;">mysql 4.1中的password列从16字节扩展到41字节会影响安装或升级操作，如下所示：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If you perform a new installation of MySQL, the
                        <code class="literal">Password</code> column is made 41 bytes long
                        automatically.
                    </p><p style="color:blue;">如果执行新的mysql安装，密码列将自动变为41字节长。</p></li><li class="listitem"><p>
                        Upgrades from MySQL 4.1 or later to current versions of
                        MySQL should not give rise to any issues in regard to the
                        <code class="literal">Password</code> column because both versions use
                        the same column length and password hashing method.
                    </p><p style="color:blue;">从mysql 4.1或更高版本升级到mysql的当前版本不应导致密码列方面的任何问题，因为这两个版本使用相同的列长度和密码散列方法。</p></li><li class="listitem"><p>
                        For upgrades from a pre-4.1 release to 4.1 or later, you
                        must upgrade the system tables after upgrading. (See
                        <a class="xref" href="programs.html#mysql-upgrade" title="4.4.7&nbsp;mysql_upgrade — Check and Upgrade MySQL Tables">Section&nbsp;4.4.7, “<span class="command"><strong>mysql_upgrade</strong></span> — Check and Upgrade MySQL Tables”</a>.)
                    </p><p style="color:blue;">要从4.1之前的版本升级到4.1或更高版本，必须在升级后升级系统表。（见4.4.7节，“mysql_upgrade-检查和升级mysql表”。）</p></li></ul>
                </div>
                <p>
                    The 4.1 hashing method is understood only by MySQL 4.1 (and
                    higher) servers and clients, which can result in some
                    compatibility problems. A 4.1 or higher client can connect to a
                    pre-4.1 server, because the client understands both the pre-4.1
                    and 4.1 password hashing methods. However, a pre-4.1 client that
                    attempts to connect to a 4.1 or higher server may run into
                    difficulties. For example, a 4.0 <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client
                    may fail with the following error message:
                </p><p style="color:blue;">只有MySQL4.1（及更高版本）服务器和客户端才能理解4.1哈希方法，这可能会导致一些兼容性问题。4.1或更高版本的客户端可以连接到4.1之前的服务器，因为客户端同时理解4.1之前和4.1之前的密码散列方法。但是，尝试连接到4.1或更高版本服务器的4.1之前的客户端可能会遇到困难。例如，4.0 MySQL客户端可能会失败，并显示以下错误消息：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -h localhost -u root</code></strong>
Client does not support authentication protocol requested
by server; consider upgrading MySQL client
</pre><p>
                This phenomenon also occurs for attempts to use the older PHP
                <code class="literal">mysql</code> extension after upgrading to MySQL 4.1
                or higher. (See <a class="ulink" href="https://dev.mysql.com/doc/apis-php/en/apis-php-problems.html" target="_top">Common Problems with MySQL and PHP</a>.)
            </p><p style="color:blue;">在升级到mysql 4.1或更高版本后，尝试使用旧的php mysql扩展时也会出现这种现象。（请参阅mysql和php的常见问题。）</p><p>
                The following discussion describes the differences between the
                pre-4.1 and 4.1 hashing methods, and what you should do if you
                upgrade your server but need to maintain backward compatibility
                with pre-4.1 clients. (However, permitting connections by old
                clients is not recommended and should be avoided if possible.)
                This information is of particular importance to PHP programmers
                migrating MySQL databases from versions older than 4.1 to 4.1 or
                higher.
            </p><p style="color:blue;">下面的讨论描述了pre-4.1和4.1散列方法之间的区别，以及在升级服务器但需要保持与pre-4.1客户端的向后兼容性时应该做什么。（但是，不建议允许老客户机连接，如果可能的话，应该避免连接。）对于php程序员来说，将mysql数据库从4.1或更高版本迁移到4.1或更高版本特别重要。</p><p>
                The differences between short and long password hashes are
                relevant both for how the server uses passwords during
                authentication and for how it generates password hashes for
                connected clients that perform password-changing operations.
            </p><p style="color:blue;">短密码散列和长密码散列之间的差异既与服务器在身份验证期间如何使用密码有关，也与服务器如何为执行密码更改操作的已连接客户端生成密码散列有关。</p><p>
                The way in which the server uses password hashes during
                authentication is affected by the width of the
                <code class="literal">Password</code> column:
            </p><p style="color:blue;">服务器在身份验证期间使用密码散列的方式受密码列宽度的影响：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If the column is short, only short-hash authentication is
                        used.
                    </p><p style="color:blue;">如果列较短，则仅使用短哈希身份验证。</p></li><li class="listitem"><p>
                        If the column is long, it can hold either short or long
                        hashes, and the server can use either format:
                    </p><p style="color:blue;">如果列是长列，则它可以包含短散列或长散列，并且服务器可以使用以下任一格式：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Pre-4.1 clients can connect, but because they know only
                                about the pre-4.1 hashing method, they can authenticate
                                only using accounts that have short hashes.
                            </p><p style="color:blue;">pre-4.1客户端可以连接，但由于它们只知道pre-4.1哈希方法，因此只能使用具有短哈希的帐户进行身份验证。</p></li><li class="listitem"><p>
                                4.1 and later clients can authenticate using accounts
                                that have short or long hashes.
                            </p><p style="color:blue;">4.1和更高版本的客户端可以使用具有短哈希或长哈希的帐户进行身份验证。</p></li></ul>
                        </div>
                    </li></ul>
                </div>
                <p>
                    Even for short-hash accounts, the authentication process is
                    actually a bit more secure for 4.1 and later clients than for
                    older clients. In terms of security, the gradient from least to
                    most secure is:
                </p><p style="color:blue;">即使对于短哈希帐户，对于4.1及更高版本的客户端，身份验证过程实际上也比较旧的客户端更安全一些。在安全性方面，从最低安全性到最高安全性的梯度是：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Pre-4.1 client authenticating with short password hash
                    </p><p style="color:blue;">pre-4.1使用短密码哈希进行客户端身份验证</p></li><li class="listitem"><p>
                        4.1 or later client authenticating with short password hash
                    </p><p style="color:blue;">4.1或更高版本使用短密码哈希进行客户端身份验证</p></li><li class="listitem"><p>
                        4.1 or later client authenticating with long password hash
                    </p><p style="color:blue;">4.1或更高版本使用长密码哈希进行客户端身份验证</p></li></ul>
                </div>
                <p>
                    The way in which the server generates password hashes for
                    connected clients is affected by the width of the
                    <code class="literal">Password</code> column and by the
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> system variable.
                    A 4.1 or later server generates long hashes only if certain
                    conditions are met: The <code class="literal">Password</code> column must
                    be wide enough to hold long values and
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> must not be set
                    to 1.
                </p><p style="color:blue;">服务器为连接的客户端生成密码散列的方式受password列的宽度和old_passwords系统变量的影响。4.1或更高版本的服务器只有在满足某些条件时才会生成长散列：password列必须足够宽以容纳长值，并且旧的\u密码不能设置为1。</p><p>
                Those conditions apply as follows:
            </p><p style="color:blue;">这些条件适用于：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The <code class="literal">Password</code> column must be wide enough
                        to hold long hashes (41 bytes). If the column has not been
                        updated and still has the pre-4.1 width of 16 bytes, the
                        server notices that long hashes cannot fit into it and
                        generates only short hashes when a client performs
                        password-changing operations using the
                        <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function or a
                        password-generating statement. This is the behavior that
                        occurs if you have upgraded from a version of MySQL older
                        than 4.1 to 4.1 or later but have not yet run the
                        <a class="link" href="programs.html#mysql-upgrade" title="4.4.7&nbsp;mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade</strong></span></a> program to widen the
                        <code class="literal">Password</code> column.
                    </p><p style="color:blue;">密码列必须足够宽以容纳长散列（41字节）。如果该列尚未更新，并且其pre-4.1宽度仍为16字节，则服务器会注意到长散列无法放入其中，并且当客户端使用password（）函数或密码生成语句执行密码更改操作时，仅生成短散列。如果您已从4.1或更高版本的mysql升级到4.1或更高版本，但尚未运行mysql_upgrade程序来扩展密码列，则会发生这种行为。</p></li><li class="listitem"><p>
                        If the <code class="literal">Password</code> column is wide, it can
                        store either short or long password hashes. In this case,
                        the <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function and
                        password-generating statements generate long hashes unless
                        the server was started with the
                        <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> system
                        variable set to 1 to force the server to generate short
                        password hashes instead.
                    </p><p style="color:blue;">如果password列很宽，它可以存储短密码散列或长密码散列。在这种情况下，password（）函数和password generating语句生成长散列，除非服务器是在将old_passwords系统变量设置为1以强制服务器生成短密码散列的情况下启动的。</p></li></ul>
                </div>
                <p>
                    The purpose of the
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> system variable
                    is to permit backward compatibility with pre-4.1 clients under
                    circumstances where the server would otherwise generate long
                    password hashes. The option does not affect authentication (4.1
                    and later clients can still use accounts that have long password
                    hashes), but it does prevent creation of a long password hash in
                    the <code class="literal">user</code> table as the result of a
                    password-changing operation. Were that permitted to occur, the
                    account could no longer be used by pre-4.1 clients. With
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> disabled, the
                    following undesirable scenario is possible:
                </p><p style="color:blue;">old_passwords系统变量的目的是在服务器可能生成长密码散列的情况下，允许向后兼容4.1版之前的客户端。此选项不影响身份验证（4.1及更高版本的客户端仍然可以使用具有长密码散列的帐户），但它确实防止由于密码更改操作而在用户表中创建长密码散列。如果允许出现这种情况，4.1版之前的客户将无法再使用该帐户。在禁用旧密码的情况下，可能出现以下不良情况：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        An old pre-4.1 client connects to an account that has a
                        short password hash.
                    </p><p style="color:blue;">旧的pre-4.1客户端连接到具有短密码散列的帐户。</p></li><li class="listitem"><p>
                        The client changes its own password. With
                        <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> disabled,
                        this results in the account having a long password hash.
                    </p><p style="color:blue;">客户端更改自己的密码。在禁用旧密码的情况下，这将导致帐户具有长密码哈希。</p></li><li class="listitem"><p>
                        The next time the old client attempts to connect to the
                        account, it cannot, because the account has a long password
                        hash that requires the 4.1 hashing method during
                        authentication. (Once an account has a long password hash in
                        the user table, only 4.1 and later clients can authenticate
                        for it because pre-4.1 clients do not understand long
                        hashes.)
                    </p><p style="color:blue;">下一次旧客户端尝试连接到帐户时，它无法连接，因为帐户有一个长密码哈希，在身份验证期间需要4.1哈希方法。（一旦帐户在用户表中有一个长密码散列，只有4.1及更高版本的客户端可以对其进行身份验证，因为4.1之前的客户端不理解长散列。）</p></li></ul>
                </div>
                <p>
                    This scenario illustrates that, if you must support older
                    pre-4.1 clients, it is problematic to run a 4.1 or higher server
                    without <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> set to 1.
                    By running the server with
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a>,
                    password-changing operations do not generate long password
                    hashes and thus do not cause accounts to become inaccessible to
                    older clients. (Those clients cannot inadvertently lock
                    themselves out by changing their password and ending up with a
                    long password hash.)
                </p><p style="color:blue;">此方案说明，如果必须支持旧的4.1版之前的客户端，则在不将旧的\u密码设置为1的情况下运行4.1版或更高版本的服务器是有问题的。通过使用旧密码=1运行服务器，密码更改操作不会生成长密码散列，因此不会导致旧客户端无法访问帐户。（这些客户机不能通过更改密码并以长密码散列结尾而无意中将自己锁定。）</p><p>
                The downside of <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a>
                is that any passwords created or changed use short hashes, even
                for 4.1 or later clients. Thus, you lose the additional security
                provided by long password hashes. To create an account that has
                a long hash (for example, for use by 4.1 clients) or to change
                an existing account to use a long password hash, an
                administrator can set the session value of
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> set to 0 while
                leaving the global value set to 1:
            </p><p style="color:blue;">旧密码=1的缺点是，即使对于4.1或更高版本的客户机，创建或更改的任何密码都使用短散列。因此，您将失去长密码散列所提供的额外安全性。若要创建具有长散列的帐户（例如，供4.1个客户端使用）或更改现有帐户以使用长密码哈希，管理员可以将OLDXX密码的会话值设置为0，同时将全局值设置为1：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET @@SESSION.old_passwords = 0;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @@SESSION.old_passwords, @@GLOBAL.old_passwords;</code></strong>
+-------------------------+------------------------+
| @@SESSION.old_passwords | @@GLOBAL.old_passwords |
+-------------------------+------------------------+
|                       0 |                      1 |
+-------------------------+------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'newpass';</code></strong>
Query OK, 0 rows affected (0.03 sec)

mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR 'existinguser'@'localhost' = PASSWORD('existingpass');</code></strong>
Query OK, 0 rows affected (0.00 sec)
</pre><p>
                The following scenarios are possible in MySQL 4.1 or later. The
                factors are whether the <code class="literal">Password</code> column is
                short or long, and, if long, whether the server is started with
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> enabled or
                disabled.
            </p><p style="color:blue;">在mysql 4.1或更高版本中可以使用以下场景。这些因素包括密码列是短的还是长的，如果长的话，服务器是在启用或禁用旧密码的情况下启动的。</p><p>
                <span class="bold"><strong>Scenario 1:</strong></span> Short
                <code class="literal">Password</code> column in user table:
            </p><p style="color:blue;">场景1：用户表中的短密码列：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Only short hashes can be stored in the
                        <code class="literal">Password</code> column.
                    </p><p style="color:blue;">密码列中只能存储短散列。</p></li><li class="listitem"><p>
                        The server uses only short hashes during client
                        authentication.
                    </p><p style="color:blue;">在客户端身份验证期间，服务器只使用短散列。</p></li><li class="listitem"><p>
                        For connected clients, password hash-generating operations
                        involving the <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>
                        function or password-generating statements use short hashes
                        exclusively. Any change to an account's password results in
                        that account having a short password hash.
                    </p><p style="color:blue;">对于已连接的客户端，涉及password（）函数或密码生成语句的密码哈希生成操作仅使用短哈希。对帐户密码的任何更改都会导致该帐户具有短密码哈希值。</p></li><li class="listitem"><p>
                        The value of <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a>
                        is irrelevant because with a short
                        <code class="literal">Password</code> column, the server generates
                        only short password hashes anyway.
                    </p><p style="color:blue;">旧密码的值无关紧要，因为对于短密码列，服务器无论如何只生成短密码散列。</p></li></ul>
                </div>
                <p>
                    This scenario occurs when a pre-4.1 MySQL installation has been
                    upgraded to 4.1 or later but <a class="link" href="programs.html#mysql-upgrade" title="4.4.7&nbsp;mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade</strong></span></a>
                    has not been run to upgrade the system tables in the
                    <code class="literal">mysql</code> database. (This is not a recommended
                    configuration because it does not permit use of more secure 4.1
                    password hashing.)
                </p><p style="color:blue;">当4.1之前的mysql安装已升级到4.1或更高版本，但mysql_upgrade尚未运行以升级mysql数据库中的系统表时，就会发生这种情况。（这不是推荐的配置，因为它不允许使用更安全的4.1密码散列。）</p><p>
                <span class="bold"><strong>Scenario 2:</strong></span> Long
                <code class="literal">Password</code> column; server started with
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a>:
            </p><p style="color:blue;">场景2:长密码列；服务器以旧密码启动=1:</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Short or long hashes can be stored in the
                        <code class="literal">Password</code> column.
                    </p><p style="color:blue;">短哈希或长哈希可以存储在密码列中。</p></li><li class="listitem"><p>
                        4.1 and later clients can authenticate for accounts that
                        have short or long hashes.
                    </p><p style="color:blue;">4.1和更高版本的客户端可以对具有短哈希或长哈希的帐户进行身份验证。</p></li><li class="listitem"><p>
                        Pre-4.1 clients can authenticate only for accounts that have
                        short hashes.
                    </p><p style="color:blue;">pre-4.1客户端只能对具有短散列的帐户进行身份验证。</p></li><li class="listitem"><p>
                        For connected clients, password hash-generating operations
                        involving the <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>
                        function or password-generating statements use short hashes
                        exclusively. Any change to an account's password results in
                        that account having a short password hash.
                    </p><p style="color:blue;">对于已连接的客户端，涉及password（）函数或密码生成语句的密码哈希生成操作仅使用短哈希。对帐户密码的任何更改都会导致该帐户具有短密码哈希值。</p></li></ul>
                </div>
                <p>
                    In this scenario, newly created accounts have short password
                    hashes because <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a>
                    prevents generation of long hashes. Also, if you create an
                    account with a long hash before setting
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> to 1, changing
                    the account's password while
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a> results in the
                    account being given a short password, causing it to lose the
                    security benefits of a longer hash.
                </p><p style="color:blue;">在这种情况下，新创建的帐户具有短密码散列，因为旧密码=1会阻止生成长散列。此外，如果在将旧密码设置为1之前使用长哈希创建帐户，则在旧密码=1时更改帐户的密码将导致该帐户获得短密码，从而使其失去长哈希的安全好处。</p><p>
                To create a new account that has a long password hash, or to
                change the password of any existing account to use a long hash,
                first set the session value of
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> set to 0 while
                leaving the global value set to 1, as described previously.
            </p><p style="color:blue;">若要创建具有长密码哈希的新帐户，或更改任何现有帐户的密码以使用长散列，首先将OLDH密码设置为0，同时将全局值集设置为1，如前所述。</p><p>
                In this scenario, the server has an up to date
                <code class="literal">Password</code> column, but is running with the
                default password hashing method set to generate pre-4.1 hash
                values. This is not a recommended configuration but may be
                useful during a transitional period in which pre-4.1 clients and
                passwords are upgraded to 4.1 or later. When that has been done,
                it is preferable to run the server with
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=0</code></a> and
                <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth=1</code></a>.
            </p><p style="color:blue;">在这种情况下，服务器有一个最新的密码列，但运行时默认的密码散列方法设置为生成4.1之前的散列值。这不是推荐的配置，但在4.1版之前的客户端和密码升级到4.1版或更高版本的过渡期间可能会有用。完成后，最好使用旧密码=0和安全身份验证=1运行服务器。</p><p>
                <span class="bold"><strong>Scenario 3:</strong></span> Long
                <code class="literal">Password</code> column; server started with
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=0</code></a>:
            </p><p style="color:blue;">场景3:长密码列；服务器以旧密码启动=0:</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Short or long hashes can be stored in the
                        <code class="literal">Password</code> column.
                    </p><p style="color:blue;">短哈希或长哈希可以存储在密码列中。</p></li><li class="listitem"><p>
                        4.1 and later clients can authenticate using accounts that
                        have short or long hashes.
                    </p><p style="color:blue;">4.1和更高版本的客户端可以使用具有短哈希或长哈希的帐户进行身份验证。</p></li><li class="listitem"><p>
                        Pre-4.1 clients can authenticate only using accounts that
                        have short hashes.
                    </p><p style="color:blue;">pre-4.1客户端只能使用具有短散列的帐户进行身份验证。</p></li><li class="listitem"><p>
                        For connected clients, password hash-generating operations
                        involving the <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>
                        function or password-generating statements use long hashes
                        exclusively. A change to an account's password results in
                        that account having a long password hash.
                    </p><p style="color:blue;">对于已连接的客户端，涉及password（）函数或密码生成语句的密码哈希生成操作仅使用长哈希。更改帐户的密码会导致该帐户具有长密码哈希值。</p></li></ul>
                </div>
                <p>
                    As indicated earlier, a danger in this scenario is that it is
                    possible for accounts that have a short password hash to become
                    inaccessible to pre-4.1 clients. A change to such an account's
                    password made using the
                    <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function or a
                    password-generating statement results in the account being given
                    a long password hash. From that point on, no pre-4.1 client can
                    connect to the server using that account. The client must
                    upgrade to 4.1 or later.
                </p><p style="color:blue;">如前所述，这种情况下的一个危险是，具有短密码散列的帐户可能无法被4.1之前的客户端访问。使用password（）函数或密码生成语句对该帐户的密码进行更改会导致该帐户被赋予长密码哈希值。从那时起，任何4.1版之前的客户机都不能使用该帐户连接到服务器。客户端必须升级到4.1或更高版本。</p><p>
                If this is a problem, you can change a password in a special
                way. For example, normally you use <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET
                PASSWORD</code></a> as follows to change an account password:
            </p><p style="color:blue;">如果这是一个问题，您可以用一种特殊的方式更改密码。例如，通常使用以下设置密码来更改帐户密码：</p><pre data-lang="sql" class="programlisting">SET PASSWORD FOR '<em class="replaceable"><code>some_user</code></em>'@'<em class="replaceable"><code>some_host</code></em>' = PASSWORD('<em class="replaceable"><code>password</code></em>');
</pre><p>
                To change the password but create a short hash, use the
                <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> function instead:
            </p><p style="color:blue;">要更改密码，但创建一个短哈希，请改用old_password（）函数：</p><pre data-lang="sql" class="programlisting">SET PASSWORD FOR '<em class="replaceable"><code>some_user</code></em>'@'<em class="replaceable"><code>some_host</code></em>' = OLD_PASSWORD('<em class="replaceable"><code>password</code></em>');
</pre><p>
                <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> is useful for
                situations in which you explicitly want to generate a short
                hash.
            </p><p style="color:blue;">old_password（）对于明确希望生成短哈希的情况非常有用。</p><p>
                The disadvantages for each of the preceding scenarios may be
                summarized as follows:
            </p><p style="color:blue;">上述每种情况的缺点可以总结如下：</p><p>
                In scenario 1, you cannot take advantage of longer hashes that
                provide more secure authentication.
            </p><p style="color:blue;">在场景1中，不能利用更长的散列来提供更安全的身份验证。</p><p>
                In scenario 2, <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a>
                prevents accounts with short hashes from becoming inaccessible,
                but password-changing operations cause accounts with long hashes
                to revert to short hashes unless you take care to change the
                session value of <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a>
                to 0 first.
            </p><p style="color:blue;">在场景2中，old_passwords=1防止具有短散列的帐户变得不可访问，但是密码更改操作会导致具有长散列的帐户还原为短散列，除非您首先注意将old_passwords的会话值更改为0。</p><p>
                In scenario 3, accounts with short hashes become inaccessible to
                pre-4.1 clients if you change their passwords without explicitly
                using <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>.
            </p><p style="color:blue;">在场景3中，如果您在没有显式使用old_password（）的情况下更改4.1版之前的客户机的密码，则具有短哈希的帐户将无法访问。</p><p>
                The best way to avoid compatibility problems related to short
                password hashes is to not use them:
            </p><p style="color:blue;">避免与短密码散列相关的兼容性问题的最佳方法是不要使用它们：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Upgrade all client programs to MySQL 4.1 or later.
                    </p><p style="color:blue;">将所有客户端程序升级到MySQL4.1或更高版本。</p></li><li class="listitem"><p>
                        Run the server with
                        <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=0</code></a>.
                    </p><p style="color:blue;">使用旧密码=0运行服务器。</p></li><li class="listitem"><p>
                        Reset the password for any account with a short password
                        hash to use a long password hash.
                    </p><p style="color:blue;">使用短密码散列重置任何帐户的密码以使用长密码散列。</p></li><li class="listitem"><p>
                        For additional security, run the server with
                        <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth=1</code></a>.
                    </p><p style="color:blue;">要获得额外的安全性，请使用secure_auth=1运行服务器。</p></li></ul>
                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="security-against-attack"></a>6.1.3&nbsp;Making MySQL Secure Against Attackers</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286890353184"></a><a class="indexterm" name="idm140286890351728"></a><a class="indexterm" name="idm140286890350240"></a><a class="indexterm" name="idm140286890349168"></a><a class="indexterm" name="idm140286890348080"></a><p>
            When you connect to a MySQL server, you should use a password. The
            password is not transmitted as cleartext over the connection.
            Password handling during the client connection sequence was
            upgraded in MySQL 4.1.1 to be very secure. If you are still using
            pre-4.1.1-style passwords, the encryption algorithm is not as
            strong as the newer algorithm. With some effort, a clever attacker
            who can sniff the traffic between the client and the server can
            crack the password. (See <a class="xref" href="security.html#password-hashing" title="6.1.2.4&nbsp;Password Hashing in MySQL">Section&nbsp;6.1.2.4, “Password Hashing in MySQL”</a>, for a
            discussion of the different password handling methods.)
        </p><p style="color:blue;">连接到mysql服务器时，应使用密码。密码不会作为明文通过连接传输。在mysql 4.1.1中，客户端连接序列期间的密码处理被升级为非常安全的。如果您仍然使用4.1.1之前版本的密码，则加密算法不如新算法强。通过一些努力，能够嗅探客户端和服务器之间通信的聪明攻击者可以破解密码。（有关不同密码处理方法的讨论，请参阅6.1.2.4节，“MySQL中的密码散列”。）</p><p>
            All other information is transferred as text, and can be read by
            anyone who is able to watch the connection. If the connection
            between the client and the server goes through an untrusted
            network, and you are concerned about this, you can use the
            compressed protocol to make traffic much more difficult to
            decipher. You can also use MySQL's internal SSL support to make
            the connection even more secure. See
            <a class="xref" href="security.html#encrypted-connections" title="6.3&nbsp;Using Encrypted Connections">Section&nbsp;6.3, “Using Encrypted Connections”</a>. Alternatively, use SSH to
            get an encrypted TCP/IP connection between a MySQL server and a
            MySQL client. You can find an Open Source SSH client at
            <a class="ulink" href="http://www.openssh.org/" target="_top">http://www.openssh.org/</a>, and a comparison of both
            Open Source and Commercial SSH clients at
            <a class="ulink" href="http://en.wikipedia.org/wiki/Comparison_of_SSH_clients" target="_top">http://en.wikipedia.org/wiki/Comparison_of_SSH_clients</a>.
        </p><p style="color:blue;">所有其他信息都以文本形式传输，任何能够查看连接的人都可以读取。如果客户机和服务器之间的连接通过不受信任的网络，并且您对此感到担心，则可以使用压缩协议使通信量更难破译。您还可以使用mysql的内部ssl支持使连接更加安全。参见第6.3节“使用加密连接”。或者，使用ssh在mysql服务器和mysql客户端之间获取加密的tcp/ip连接。您可以在http://www.open ssh.org/上找到一个开源ssh客户机，并在http://en.wikipedia.org/wiki/comparison_-ssh_-clients上找到开源ssh客户机和商业ssh客户机的比较。</p><p>
            To make a MySQL system secure, you should strongly consider the
            following suggestions:
        </p><p style="color:blue;">为了确保mysql系统的安全，您应该强烈考虑以下建议：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Require all MySQL accounts to have a password. A client
                    program does not necessarily know the identity of the person
                    running it. It is common for client/server applications that
                    the user can specify any user name to the client program. For
                    example, anyone can use the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> program
                    to connect as any other person simply by invoking it as
                    <code class="literal">mysql -u <em class="replaceable"><code>other_user</code></em>
                        <em class="replaceable"><code>db_name</code></em></code> if
                    <em class="replaceable"><code>other_user</code></em> has no password. If all
                    accounts have a password, connecting using another user's
                    account becomes much more difficult.
                </p><p style="color:blue;">要求所有MySQL帐户都有密码。客户端程序不一定知道运行它的人的身份。对于客户机/服务器应用程序，用户可以为客户机程序指定任何用户名是很常见的。例如，任何人都可以使用mysql程序作为任何其他人进行连接，只要在其他用户没有密码的情况下将其调用为mysql-u other_user db_name即可。如果所有帐户都有密码，那么使用另一个用户的帐户进行连接将变得更加困难。</p><p>
                    For a discussion of methods for setting passwords, see
                    <a class="xref" href="security.html#assigning-passwords" title="6.2.10&nbsp;Assigning Account Passwords">Section&nbsp;6.2.10, “Assigning Account Passwords”</a>.
                </p><p style="color:blue;">有关设置密码方法的讨论，请参阅第6.2.10节“分配帐户密码”。</p></li><li class="listitem"><p>
                    Make sure that the only Unix user account with read or write
                    privileges in the database directories is the account that is
                    used for running <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>.
                </p><p style="color:blue;">确保数据库目录中唯一具有读或写权限的unix用户帐户是用于运行mysqld的帐户。</p></li><li class="listitem"><p>
                    Never run the MySQL server as the Unix <code class="literal">root</code>
                    user. This is extremely dangerous, because any user with the
                    <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> privilege is able to cause
                    the server to create files as <code class="literal">root</code> (for
                    example, <code class="literal">~root/.bashrc</code>). To prevent this,
                    <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> refuses to run as
                    <code class="literal">root</code> unless that is specified explicitly
                    using the <a class="link" href="server-administration.html#option_mysqld_user"><code class="option">--user=root</code></a> option.
                </p><p style="color:blue;">永远不要以unix根用户的身份运行mysql服务器。这是非常危险的，因为任何具有文件特权的用户都可以使服务器创建根文件（例如，~root/.bashrc）。为了防止这种情况，除非使用--user=root选项显式指定mysqld，否则它将拒绝以root身份运行。</p><p>
                    <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> can (and should) be run as an
                    ordinary, unprivileged user instead. You can create a separate
                    Unix account named <code class="literal">mysql</code> to make everything
                    even more secure. Use this account only for administering
                    MySQL. To start <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> as a different Unix
                    user, add a <code class="literal">user</code> option that specifies the
                    user name in the <code class="literal">[mysqld]</code> group of the
                    <code class="filename">my.cnf</code> option file where you specify
                    server options. For example:
                </p><p style="color:blue;">mysqld可以（也应该）作为普通的、没有特权的用户运行。您可以创建一个名为mysql的单独unix帐户，使所有内容更加安全。此帐户仅用于管理MySQL。要以不同的unix用户身份启动mysqld，请在指定服务器选项的my.cnf选项文件的[mysqld]组中添加一个指定用户名的用户选项。例如：</p><pre data-lang="ini" class="programlisting">[mysqld]
user=mysql
</pre><p>
                    This causes the server to start as the designated user whether
                    you start it manually or by using
                    <a class="link" href="programs.html#mysqld-safe" title="4.3.2&nbsp;mysqld_safe — MySQL Server Startup Script"><span class="command"><strong>mysqld_safe</strong></span></a> or
                    <a class="link" href="programs.html#mysql-server" title="4.3.3&nbsp;mysql.server — MySQL Server Startup Script"><span class="command"><strong>mysql.server</strong></span></a>. For more details, see
                    <a class="xref" href="security.html#changing-mysql-user" title="6.1.5&nbsp;How to Run MySQL as a Normal User">Section&nbsp;6.1.5, “How to Run MySQL as a Normal User”</a>.
                </p><p style="color:blue;">这将导致服务器以指定用户身份启动，无论是手动启动还是使用mysqld_safe或mysql.server启动。有关详细信息，请参阅6.1.5节“如何以普通用户身份运行mysql”。</p><p>
                    Running <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> as a Unix user other than
                    <code class="literal">root</code> does not mean that you need to change
                    the <code class="literal">root</code> user name in the
                    <code class="literal">user</code> table. <span class="emphasis"><em>User names for MySQL
          accounts have nothing to do with user names for Unix
          accounts</em></span>.
                </p><p style="color:blue;">将mysqld作为根用户以外的unix用户运行并不意味着您需要更改用户表中的根用户名。mysql帐户的用户名与unix帐户的用户名无关。</p></li><li class="listitem"><p>
                    Do not grant the <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> privilege
                    to nonadministrative users. Any user that has this privilege
                    can write a file anywhere in the file system with the
                    privileges of the <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> daemon. This
                    includes the server's data directory containing the files that
                    implement the privilege tables. To make
                    <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a>-privilege operations a bit
                    safer, files generated with
                    <a class="link" href="sql-syntax.html#select-into" title="13.2.9.1&nbsp;SELECT ... INTO Syntax"><code class="literal">SELECT ... INTO
                        OUTFILE</code></a> do not overwrite existing files and are
                    writable by everyone.
                </p><p style="color:blue;">不要将文件权限授予非管理用户。任何具有此权限的用户都可以使用mysqld守护进程的权限在文件系统中的任何位置写入文件。这包括服务器的数据目录，其中包含实现特权表的文件。为了使文件特权操作更安全，使用select生成的文件…进入OutFobe不要覆盖现有文件，每个人都可以写。</p><a class="indexterm" name="idm140286890305360"></a><p>
                    The <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> privilege may also be
                    used to read any file that is world-readable or accessible to
                    the Unix user that the server runs as. With this privilege,
                    you can read any file into a database table. This could be
                    abused, for example, by using <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD
                    DATA</code></a> to load <code class="filename">/etc/passwd</code> into a
                    table, which then can be displayed with
                    <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>.
                </p><p style="color:blue;">文件特权还可用于读取服务器作为其运行的unix用户可以全局读取或访问的任何文件。使用此权限，您可以将任何文件读入数据库表。这可能会被滥用，例如，使用load data将/etc/passwd加载到一个表中，然后使用select显示该表。</p><p>
                    To limit the location in which files can be read and written,
                    set the <a class="link" href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a>
                    system to a specific directory. See
                    <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>.
                </p><p style="color:blue;">要限制文件的读写位置，请将secure_file_priv系统设置为特定目录。见第5.1.7节“服务器系统变量”。</p></li><li class="listitem"><p>
                    Do not grant the <a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a> or
                    <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege to
                    nonadministrative users. The output of <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
          processlist</strong></span></a> and <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.29&nbsp;SHOW PROCESSLIST Syntax"><code class="literal">SHOW
                    PROCESSLIST</code></a> shows the text of any statements
                    currently being executed, so any user who is permitted to see
                    the server process list might be able to see statements issued
                    by other users such as <code class="literal">UPDATE user SET
                    password=PASSWORD('not_secure')</code>.
                </p><p style="color:blue;">不要将进程或超级权限授予非管理用户。mysqladmin process list和show processlist的输出显示当前执行的任何语句的文本，因此允许查看服务器进程列表的任何用户都可以查看其他用户发出的语句，例如update user set password=password（'not_secure'）。</p><p>
                    <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> reserves an extra connection for
                    users who have the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
                    privilege, so that a MySQL <code class="literal">root</code> user can
                    log in and check server activity even if all normal
                    connections are in use.
                </p><p style="color:blue;">mysqld为拥有超级权限的用户保留了一个额外的连接，以便mysql根用户可以登录并检查服务器活动，即使所有正常连接都在使用中。</p><p>
                    The <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege can be used
                    to terminate client connections, change server operation by
                    changing the value of system variables, and control
                    replication servers.
                </p><p style="color:blue;">超级权限可用于终止客户端连接、通过更改系统变量的值更改服务器操作以及控制复制服务器。</p></li><li class="listitem"><p>
                    Do not permit the use of symlinks to tables. (This capability
                    can be disabled with the
                    <a class="link" href="server-administration.html#option_mysqld_symbolic-links"><code class="option">--skip-symbolic-links</code></a>
                    option.) This is especially important if you run
                    <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> as <code class="literal">root</code>, because
                    anyone that has write access to the server's data directory
                    then could delete any file in the system! See
                    <a class="xref" href="optimization.html#symbolic-links-to-tables" title="8.12.3.2&nbsp;Using Symbolic Links for MyISAM Tables on Unix">Section&nbsp;8.12.3.2, “Using Symbolic Links for MyISAM Tables on Unix”</a>.
                </p><p style="color:blue;">不允许使用指向表的符号链接。（此功能可以通过--skip symbolic links选项禁用。）如果以根用户身份运行mysqld，这一点尤其重要，因为任何对服务器数据目录具有写访问权限的人都可以删除系统中的任何文件！参见第8.12.3.2节，“在unix上为myisam表使用符号链接”。</p></li><li class="listitem"><p>
                    Stored programs and views should be written using the security
                    guidelines discussed in
                    <a class="xref" href="stored-objects.html#stored-objects-security" title="23.6&nbsp;Stored Object Access Control">Section&nbsp;23.6, “Stored Object Access Control”</a>.
                </p><p style="color:blue;">存储程序和视图应使用第23.6节“存储对象访问控制”中讨论的安全指南编写。</p></li><li class="listitem"><p>
                    If you do not trust your DNS, you should use IP addresses
                    rather than host names in the grant tables. In any case, you
                    should be very careful about creating grant table entries
                    using host name values that contain wildcards.
                </p><p style="color:blue;">如果不信任DNS，则应在授权表中使用IP地址而不是主机名。无论如何，在使用包含通配符的主机名值创建GRANT表条目时应该非常小心。</p></li><li class="listitem"><p>
                    If you want to restrict the number of connections permitted to
                    a single account, you can do so by setting the
                    <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> variable
                    in <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. The <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
                    USER</code></a> and <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>
                    statements also support resource control options for limiting
                    the extent of server use permitted to an account. See
                    <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>, and
                    <a class="xref" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax">Section&nbsp;13.7.1.1, “ALTER USER Syntax”</a>.
                </p><p style="color:blue;">如果要限制单个帐户允许的连接数，可以在mysqld中设置max_user_connections变量。create-user和alter-user语句还支持资源控制选项，用于限制对帐户允许的服务器使用范围。参见第13.7.1.2节“创建用户语法”和第13.7.1.1节“更改用户语法”。</p></li><li class="listitem"><p>
                    If the plugin directory is writable by the server, it may be
                    possible for a user to write executable code to a file in the
                    directory using <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT
                    ... INTO DUMPFILE</code></a>. This can be prevented by making
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> read only to the
                    server or by setting
                    <a class="link" href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a> to a
                    directory where <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> writes
                    can be made safely.
                </p><p style="color:blue;">如果插件目录可由服务器写入，则用户可以使用select将可执行代码写入目录中的文件…进入转储文件。这可以通过使plugin-dir只读到服务器或将secure-file-priv设置为可以安全地进行选择写入的目录来防止。</p></li></ul>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="security-options"></a>6.1.4&nbsp;Security-Related mysqld Options and Variables</h3>

                    </div>

                </div>

            </div>
            <p>
                The following table shows <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> options and
                system variables that affect security. For descriptions of each of
                these, see <a class="xref" href="server-administration.html#server-options" title="5.1.6&nbsp;Server Command Options">Section&nbsp;5.1.6, “Server Command Options”</a>, and
                <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>.
            </p><p style="color:blue;">下表显示了影响安全性的mysqld选项和系统变量。有关这些选项的说明，请参见第5.1.6节“服务器命令选项”和第5.1.7节“服务器系统变量”。</p>
            <div class="table">
                <a name="idm140286890258976"></a><p class="title"><b>Table&nbsp;6.1&nbsp;Security Option and Variable Summary</b></p><p style="color:blue;">表6.1安全选项和变量摘要</p>
                <div class="table-contents">
                    <table frame="box" rules="all" summary="Security-related command-line options and system variables."><colgroup><col width="20%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"></colgroup><thead><tr><th scope="col">Name</th>
                        <th scope="col">Cmd-Line</th>
                        <th scope="col">Option File</th>
                        <th scope="col">System Var</th>
                        <th scope="col">Status Var</th>
                        <th scope="col">Var Scope</th>
                        <th scope="col">Dynamic</th>
                    </tr></thead><tbody><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_allow-suspicious-udfs">allow-suspicious-udfs</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#sysvar_automatic_sp_privileges">automatic_sp_privileges</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>Yes</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_chroot">chroot</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_des-key-file">des-key-file</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#sysvar_local_infile">local_infile</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>Yes</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#sysvar_old_passwords">old_passwords</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td>Both</td>
                        <td>Yes</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_safe-user-create">safe-user-create</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_secure-auth">secure-auth</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td>Global</td>
                        <td>Yes</td>
                    </tr><tr><td scope="row"> - <span class="emphasis"><em>Variable</em></span>: <a class="link" href="server-administration.html#sysvar_secure_auth">secure_auth</a></td>
                        <td></td>
                        <td></td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>Yes</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#sysvar_secure_file_priv">secure_file_priv</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_skip-grant-tables">skip-grant-tables</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_skip-name-resolve">skip-name-resolve</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr><tr><td scope="row"> - <span class="emphasis"><em>Variable</em></span>: <a class="link" href="server-administration.html#sysvar_skip_name_resolve">skip_name_resolve</a></td>
                        <td></td>
                        <td></td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_skip-networking">skip-networking</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr><tr><td scope="row"> - <span class="emphasis"><em>Variable</em></span>: <a class="link" href="server-administration.html#sysvar_skip_networking">skip_networking</a></td>
                        <td></td>
                        <td></td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr><tr><td scope="row"><a class="link" href="server-administration.html#option_mysqld_skip-show-database">skip-show-database</a></td>
                        <td>Yes</td>
                        <td>Yes</td>
                        <td></td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr><tr><td scope="row"> - <span class="emphasis"><em>Variable</em></span>: <a class="link" href="server-administration.html#sysvar_skip_show_database">skip_show_database</a></td>
                        <td></td>
                        <td></td>
                        <td>Yes</td>
                        <td></td>
                        <td>Global</td>
                        <td>No</td>
                    </tr></tbody></table>
                </div>

            </div>
            <br class="table-break">
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="changing-mysql-user"></a>6.1.5&nbsp;How to Run MySQL as a Normal User</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286890124160"></a><a class="indexterm" name="idm140286890122704"></a><p>
            On Windows, you can run the server as a Windows service using a
            normal user account.
        </p><p style="color:blue;">在Windows上，可以使用普通用户帐户将服务器作为Windows服务运行。</p><p>
            On Linux, for installations performed using a MySQL repository,
            RPM packages, or Debian packages, the MySQL server
            <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> should be started by the local
            <code class="literal">mysql</code> operating system user. Starting by
            another operating system user is not supported by the init scripts
            that are included as part of the installation.
        </p><p style="color:blue;">在linux上，对于使用mysql存储库、rpm包或debian包执行的安装，mysql服务器mysqld应该由本地mysql操作系统用户启动。安装过程中包含的init脚本不支持由其他操作系统用户启动。</p><p>
            On Unix (or Linux for installations performed using
            <code class="filename">tar</code> or <code class="filename">tar.gz</code> packages)
            , the MySQL server <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> can be started and
            run by any user. However, you should avoid running the server as
            the Unix <code class="literal">root</code> user for security reasons. To
            change <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> to run as a normal unprivileged
            Unix user <em class="replaceable"><code>user_name</code></em>, you must do the
            following:
        </p><p style="color:blue;">在unix（或linux，用于使用tar或tar.gz包执行的安装）上，mysql服务器mysqld可以由任何用户启动和运行。但是，出于安全原因，应避免以unix根用户身份运行服务器。要将mysqld更改为以普通的非特权unix用户名运行，必须执行以下操作：</p>
            <div class="orderedlist">
                <ol class="orderedlist" type="1"><li class="listitem"><p>
                    Stop the server if it is running (use <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
          shutdown</strong></span></a>).
                </p><p style="color:blue;">如果服务器正在运行，请停止它（使用mysqladmin shutdown）。</p></li><li class="listitem"><p>
                    Change the database directories and files so that
                    <em class="replaceable"><code>user_name</code></em> has privileges to read
                    and write files in them (you might need to do this as the Unix
                    <code class="literal">root</code> user):
                </p><p style="color:blue;">更改数据库目录和文件，以便用户名有权读取和写入其中的文件（您可能需要以UNIX根用户的身份执行此操作）：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>chown -R <em class="replaceable"><code>user_name</code></em> <em class="replaceable"><code>/path/to/mysql/datadir</code></em></code></strong>
</pre><p>
                    If you do not do this, the server will not be able to access
                    databases or tables when it runs as
                    <em class="replaceable"><code>user_name</code></em>.
                </p><p style="color:blue;">如果不这样做，服务器在以用户名运行时将无法访问数据库或表。</p><p>
                    If directories or files within the MySQL data directory are
                    symbolic links, <code class="literal">chown -R</code> might not follow
                    symbolic links for you. If it does not, you will also need to
                    follow those links and change the directories and files they
                    point to.
                </p><p style="color:blue;">如果mysql数据目录中的目录或文件是符号链接，chown-r可能不会为您跟踪符号链接。如果没有，您还需要遵循这些链接并更改它们指向的目录和文件。</p></li><li class="listitem"><p>
                    Start the server as user <em class="replaceable"><code>user_name</code></em>.
                    Another alternative is to start <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> as
                    the Unix <code class="literal">root</code> user and use the
                    <a class="link" href="server-administration.html#option_mysqld_user"><code class="option">--user=<em class="replaceable"><code>user_name</code></em></code></a>
                    option. <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> starts, then switches to run
                    as the Unix user <em class="replaceable"><code>user_name</code></em> before
                    accepting any connections.
                </p><p style="color:blue;">以用户名启动服务器。另一种选择是启动mysqld作为unix根用户，并使用--user=user_name选项。mysqld启动，然后切换为在接受任何连接之前以unix用户名运行。</p></li><li class="listitem"><p>
                    To start the server as the given user automatically at system
                    startup time, specify the user name by adding a
                    <code class="literal">user</code> option to the
                    <code class="literal">[mysqld]</code> group of the
                    <code class="filename">/etc/my.cnf</code> option file or the
                    <code class="filename">my.cnf</code> option file in the server's data
                    directory. For example:
                </p><p style="color:blue;">要在系统启动时以给定用户身份自动启动服务器，请通过将用户选项添加到/etc/my.cnf选项文件或服务器数据目录中的my.cnf选项文件的[mysqld]组中来指定用户名。例如：</p><pre data-lang="ini" class="programlisting">[mysqld]
user=<em class="replaceable"><code>user_name</code></em>
</pre></li></ol>
            </div>
            <p>
                If your Unix machine itself is not secured, you should assign
                passwords to the MySQL <code class="literal">root</code> account in the
                grant tables. Otherwise, any user with a login account on that
                machine can run the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client with a
                <a class="link" href="programs.html#option_mysql_user"><code class="option">--user=root</code></a> option and perform any
                operation. (It is a good idea to assign passwords to MySQL
                accounts in any case, but especially so when other login accounts
                exist on the server host.) See
                <a class="xref" href="installing.html#default-privileges" title="2.10.4&nbsp;Securing the Initial MySQL Account">Section&nbsp;2.10.4, “Securing the Initial MySQL Account”</a>.
            </p><p style="color:blue;">如果您的unix机器本身不安全，您应该在grant表中为mysql根帐户分配密码。否则，在该计算机上拥有登录帐户的任何用户都可以使用--user=root选项运行mysql客户机并执行任何操作。（在任何情况下，将密码分配给MySQL帐户是一个好主意，但尤其是当服务器主机上存在其他登录帐户时）请参阅第2.2.4节，“确保初始MySQL帐户的安全”。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="load-data-local"></a>6.1.6&nbsp;Security Issues with LOAD DATA LOCAL</h3>

                    </div>

                </div>

            </div>
            <p>
                The <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> statement can load a
                file located on the server host, or, if the
                <code class="literal">LOCAL</code> keyword is specified, on the client host.
            </p><p style="color:blue;">load data语句可以加载位于服务器主机上的文件，如果指定了local关键字，则可以加载客户端主机上的文件。</p><p>
            There are two potential security issues with the
            <code class="literal">LOCAL</code> version of <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD
            DATA</code></a>:
        </p><p style="color:blue;">本地版本的加载数据存在两个潜在的安全问题：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The transfer of the file from the client host to the server
                    host is initiated by the MySQL server. In theory, a patched
                    server could be built that would tell the client program to
                    transfer a file of the server's choosing rather than the file
                    named by the client in the <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD
                    DATA</code></a> statement. Such a server could access any file
                    on the client host to which the client user has read access.
                    (A patched server could in fact reply with a file-transfer
                    request to any statement, not just
                    <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA
                        LOCAL</code></a>, so a more fundamental issue is that clients
                    should not connect to untrusted servers.)
                </p><p style="color:blue;">从客户端主机到服务器主机的文件传输由mysql服务器启动。理论上，可以构建一个修补服务器，告诉客户机程序传输服务器选择的文件，而不是客户机在load data语句中命名的文件。这样的服务器可以访问客户机主机上客户机用户具有读取权限的任何文件。（事实上，已修补的服务器可以用文件传输请求回复任何语句，而不仅仅是本地加载数据，因此更根本的问题是客户端不应连接到不受信任的服务器。）</p></li><li class="listitem"><p>
                    In a Web environment where the clients are connecting from a
                    Web server, a user could use
                    <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA
                        LOCAL</code></a> to read any files that the Web server process
                    has read access to (assuming that a user could run any
                    statement against the SQL server). In this environment, the
                    client with respect to the MySQL server actually is the Web
                    server, not a remote program being run by users who connect to
                    the Web server.
                </p><p style="color:blue;">在客户端从Web服务器连接的Web环境中，用户可以使用本地加载数据读取Web服务器进程具有读取权限的任何文件（假设用户可以对SQL Server运行任何语句）。在这个环境中，mysql服务器的客户端实际上是web服务器，而不是连接到web服务器的用户运行的远程程序。</p></li></ul>
            </div>
            <p>
                To avoid <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> issues, clients
                should avoid using <code class="literal">LOCAL</code>. To avoid connecting
                to untrusted servers, clients can establish a secure connection
                and verify the server identity by connecting using the
                <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=VERIFY_IDENTITY</code></a> option
                and the appropriate CA certificate.
            </p><p style="color:blue;">为避免加载数据问题，客户端应避免使用本地。为了避免连接到不受信任的服务器，客户端可以建立安全连接，并通过使用--ssl mode=verify_identity选项和适当的ca证书进行连接来验证服务器标识。</p><p>
            To enable adminstrators and applications to manage the local data
            loading capability, <code class="literal">LOCAL</code> configuration works
            like this:
        </p><p style="color:blue;">要使管理员和应用程序能够管理本地数据加载功能，本地配置的工作方式如下：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    On the server side:
                </p><p style="color:blue;">在服务器端：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                            The <a class="link" href="server-administration.html#sysvar_local_infile"><code class="literal">local_infile</code></a> system
                            variable controls server-side <code class="literal">LOCAL</code>
                            capability. Depending on the
                            <a class="link" href="server-administration.html#sysvar_local_infile"><code class="literal">local_infile</code></a> setting, the
                            server refuses or permits local data loading by clients
                            that have <code class="literal">LOCAL</code> enabled on the client
                            side. By default,
                            <a class="link" href="server-administration.html#sysvar_local_infile"><code class="literal">local_infile</code></a> is enabled.
                        </p><p style="color:blue;">局部填充系统变量控制服务器端的局部功能。根据本地填充设置，服务器拒绝或允许客户端已启用本地的客户端加载本地数据。默认情况下，将启用“局部填充”。</p></li><li class="listitem"><p>
                            To explicitly cause the server to refuse or permit
                            <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA
                                LOCAL</code></a> statements (regardless of how client
                            programs and libraries are configured at build time or
                            runtime), start <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with
                            <a class="link" href="server-administration.html#sysvar_local_infile"><code class="literal">local_infile</code></a> disabled or
                            enabled, respectively.
                            <a class="link" href="server-administration.html#sysvar_local_infile"><code class="literal">local_infile</code></a> can also be
                            set at runtime.
                        </p><p style="color:blue;">若要显式导致服务器拒绝或允许加载数据本地语句（无论在生成时或运行时如何配置客户端程序和库），请分别在禁用或启用本地填充的情况下启动mysqld。本地填充也可以在运行时设置。</p></li></ul>
                    </div>
                </li><li class="listitem"><p>
                    On the client side:
                </p><p style="color:blue;">在客户端：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                            The <a class="link" href="installing.html#option_cmake_enabled_local_infile"><code class="option">ENABLED_LOCAL_INFILE</code></a>
                            <span class="command"><strong>CMake</strong></span> option controls the compiled-in
                            default <code class="literal">LOCAL</code> capability for the MySQL
                            client library. Clients that make no explicit arrangements
                            therefore have <code class="literal">LOCAL</code> capability
                            disabled or enabled according to the
                            <a class="link" href="installing.html#option_cmake_enabled_local_infile"><code class="option">ENABLED_LOCAL_INFILE</code></a> setting
                            specified at MySQL build time.
                        </p><p style="color:blue;">enabled_local_inflee cmake选项控制mysql客户端库的默认本地编译功能。因此，没有显式安排的客户端会根据mysql构建时指定的enabled_local_infile设置禁用或启用本地功能。</p><p>
                            By default, the client library in MySQL binary
                            distributions is compiled with
                            <a class="link" href="installing.html#option_cmake_enabled_local_infile"><code class="option">ENABLED_LOCAL_INFILE</code></a>
                            enabled. If you compile MySQL from source, configure it
                            with <a class="link" href="installing.html#option_cmake_enabled_local_infile"><code class="option">ENABLED_LOCAL_INFILE</code></a>
                            disabled or enabled based on whether clients that make no
                            explicit arrangements should have <code class="literal">LOCAL</code>
                            capability disabled or enabled, respectively.
                        </p><p style="color:blue;">默认情况下，mysql二进制发行版中的客户端库是在启用本地填充的情况下编译的。如果从源代码处编译mysql，请根据没有显式安排的客户端是否应分别禁用或启用本地功能，将其配置为禁用或启用enabled_local_infile。</p></li><li class="listitem"><p>
                            Client programs that use the C API can control load data
                            loading explicitly by invoking
                            <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> to disable
                            or enable the <code class="literal">MYSQL_OPT_LOCAL_INFILE</code>
                            option. See <a class="xref" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()">Section&nbsp;27.8.7.50, “mysql_options()”</a>.
                        </p><p style="color:blue;">使用C API的客户端程序可以通过调用mysql_options（）禁用或启用mysql_opt_local_infile选项来显式控制加载数据。见27.8.7.50节，“mysql_options（）”。</p></li><li class="listitem"><p>
                            For the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, local data
                            loading is disabled by default. To disable or enable it
                            explicitly, use the
                            <a class="link" href="programs.html#option_mysql_local-infile"><code class="option">--local-infile=0</code></a> or
                            <a class="link" href="programs.html#option_mysql_local-infile"><code class="option">--local-infile[=1]</code></a> option.
                        </p><p style="color:blue;">对于mysql客户端，默认情况下禁用本地数据加载。要显式禁用或启用它，请使用--local infile=0或--local infile[=1]选项。</p></li><li class="listitem"><p>
                            For the <a class="link" href="programs.html#mysqlimport" title="4.5.5&nbsp;mysqlimport — A Data Import Program"><span class="command"><strong>mysqlimport</strong></span></a> client, local data
                            loading is disabled by default. To disable or enable it
                            explicitly, use the
                            <a class="link" href="programs.html#option_mysqlimport_local"><code class="option">--local=0</code></a> or
                            <a class="link" href="programs.html#option_mysqlimport_local"><code class="option">--local[=1]</code></a> option.
                        </p><p style="color:blue;">对于mysqlimport客户端，默认情况下禁用本地数据加载。要显式禁用或启用它，请使用--local=0或--local[=1]选项。</p></li><li class="listitem"><p>
                            If you use <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD
                            DATA LOCAL</code></a> in Perl scripts or other programs
                            that read the <code class="literal">[client]</code> group from
                            option files, you can add an
                            <code class="literal">local-infile</code> option setting to that
                            group. To prevent problems for programs that do not
                            understand this option, specify it using the
                            <a class="link" href="programs.html#option-modifiers" title="4.2.2.4&nbsp;Program Option Modifiers"><code class="literal">loose-</code></a>
                            prefix:
                        </p><p style="color:blue;">如果在Perl脚本或从选项文件读取[client]组的其他程序中使用load data local，则可以向该组添加本地infile选项设置。要防止不理解此选项的程序出现问题，请使用松散前缀指定它：</p><pre data-lang="ini" class="programlisting">[client]
loose-local-infile=0
</pre><p>
                            or:
                        </p><p style="color:blue;">或</p><pre data-lang="ini" class="programlisting">[client]
loose-local-infile=1
</pre></li><li class="listitem"><p>
                            In all cases, successful use of a <code class="literal">LOCAL</code>
                            load operation by a client also requires that the server
                            permits it.
                        </p><p style="color:blue;">在所有情况下，客户端成功使用本地加载操作还需要服务器允许。</p></li></ul>
                    </div>
                </li></ul>
            </div>
            <p>
                If <code class="literal">LOCAL</code> capability is disabled, on either the
                server or client side, a client that attempts to issue a
                <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA
                    LOCAL</code></a> statement receives the following error message:
            </p><p style="color:blue;">如果在服务器或客户端禁用了本地功能，则尝试发出LOAD DATA LOCAL语句的客户端将收到以下错误消息：</p><pre data-lang="none" class="programlisting">ERROR 1148: The used command is not allowed with this MySQL version
</pre><a class="indexterm" name="idm140286890020960"></a><a class="indexterm" name="idm140286890019440"></a>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="secure-client-programming"></a>6.1.7&nbsp;Client Programming Security Guidelines</h3>

                    </div>

                </div>

            </div>
            <p>
                Applications that access MySQL should not trust any data entered
                by users, who can try to trick your code by entering special or
                escaped character sequences in Web forms, URLs, or whatever
                application you have built. Be sure that your application remains
                secure if a user enters something like <code class="literal">; DROP DATABASE
                mysql;</code>. This is an extreme example, but large security
                leaks and data loss might occur as a result of hackers using
                similar techniques, if you do not prepare for them.
            </p><p style="color:blue;">访问mysql的应用程序不应信任用户输入的任何数据，用户可以尝试通过在web表单、url或您构建的任何应用程序中输入特殊或转义字符序列来欺骗您的代码。如果用户输入类似于；drop database mysql；的内容，请确保应用程序保持安全。这是一个极端的例子，但是如果你不做好准备，黑客使用类似的技术可能会导致大量的安全漏洞和数据丢失。</p><p>
            A common mistake is to protect only string data values. Remember
            to check numeric data as well. If an application generates a query
            such as <code class="literal">SELECT * FROM table WHERE ID=234</code> when a
            user enters the value <code class="literal">234</code>, the user can enter
            the value <code class="literal">234 OR 1=1</code> to cause the application
            to generate the query <code class="literal">SELECT * FROM table WHERE ID=234 OR
            1=1</code>. As a result, the server retrieves every row in the
            table. This exposes every row and causes excessive server load.
            The simplest way to protect from this type of attack is to use
            single quotation marks around the numeric constants:
            <code class="literal">SELECT * FROM table WHERE ID='234'</code>. If the user
            enters extra information, it all becomes part of the string. In a
            numeric context, MySQL automatically converts this string to a
            number and strips any trailing nonnumeric characters from it.
        </p><p style="color:blue;">一个常见的错误是只保护字符串数据值。记住还要检查数字数据。如果应用程序在用户输入值234时生成查询，例如id=234的select*from table，则用户可以输入值234或1=1，以使应用程序生成id=234或1=1的查询select*from table。结果，服务器检索表中的每一行。这会暴露每一行并导致服务器负载过大。防止此类攻击的最简单方法是在数字常量周围使用单引号：select*from table where id='234'。如果用户输入了额外的信息，它就会成为字符串的一部分。在数字上下文中，mysql自动将此字符串转换为数字，并从中除去任何尾随的非数字字符。</p><p>
            Sometimes people think that if a database contains only publicly
            available data, it need not be protected. This is incorrect. Even
            if it is permissible to display any row in the database, you
            should still protect against denial of service attacks (for
            example, those that are based on the technique in the preceding
            paragraph that causes the server to waste resources). Otherwise,
            your server becomes unresponsive to legitimate users.
        </p><p style="color:blue;">有时人们认为，如果一个数据库只包含公开可用的数据，它就不需要受到保护。这是不正确的。即使允许在数据库中显示任何行，您仍应防止拒绝服务攻击（例如，基于前段中导致服务器浪费资源的技术的攻击）。否则，服务器将对合法用户无响应。</p><p>
            Checklist:
        </p><p style="color:blue;">检查表：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Enable strict SQL mode to tell the server to be more
                    restrictive of what data values it accepts. See
                    <a class="xref" href="server-administration.html#sql-mode" title="5.1.10&nbsp;Server SQL Modes">Section&nbsp;5.1.10, “Server SQL Modes”</a>.
                </p><p style="color:blue;">启用严格的SQL模式，告诉服务器对它接受的数据值进行更严格的限制。参见第5.1.10节“服务器SQL模式”。</p></li><li class="listitem"><p>
                    Try to enter single and double quotation marks
                    (<code class="literal">'</code> and <code class="literal">"</code>) in all of your
                    Web forms. If you get any kind of MySQL error, investigate the
                    problem right away.
                </p><p style="color:blue;">尝试在所有Web窗体中输入单引号和双引号（'和'）。如果您遇到任何mysql错误，请立即调查该问题。</p></li><li class="listitem"><p>
                    Try to modify dynamic URLs by adding <code class="literal">%22</code>
                    (<code class="literal">"</code>), <code class="literal">%23</code>
                    (<code class="literal">#</code>), and <code class="literal">%27</code>
                    (<code class="literal">'</code>) to them.
                </p><p style="color:blue;">尝试通过向动态URL添加%22（“）、%23（）和%27（'）来修改它们。</p></li><li class="listitem"><p>
                    Try to modify data types in dynamic URLs from numeric to
                    character types using the characters shown in the previous
                    examples. Your application should be safe against these and
                    similar attacks.
                </p><p style="color:blue;">尝试使用前面示例中显示的字符将动态URL中的数据类型从数字类型修改为字符类型。您的应用程序应该能够安全地抵御这些和类似的攻击。</p></li><li class="listitem"><p>
                    Try to enter characters, spaces, and special symbols rather
                    than numbers in numeric fields. Your application should remove
                    them before passing them to MySQL or else generate an error.
                    Passing unchecked values to MySQL is very dangerous!
                </p><p style="color:blue;">尝试在数字字段中输入字符、空格和特殊符号，而不是数字。应用程序应该在将它们传递给mysql之前将其删除，否则将生成错误。将未检查的值传递给mysql是非常危险的！</p></li><li class="listitem"><p>
                    Check the size of data before passing it to MySQL.
                </p><p style="color:blue;">在将数据传递给mysql之前，请检查数据的大小。</p></li><li class="listitem"><p>
                    Have your application connect to the database using a user
                    name different from the one you use for administrative
                    purposes. Do not give your applications any access privileges
                    they do not need.
                </p><p style="color:blue;">让应用程序使用与用于管理目的的用户名不同的用户名连接到数据库。不要给应用程序任何它们不需要的访问权限。</p></li></ul>
            </div>
            <p>
                Many application programming interfaces provide a means of
                escaping special characters in data values. Properly used, this
                prevents application users from entering values that cause the
                application to generate statements that have a different effect
                than you intend:
            </p><p style="color:blue;">许多应用程序编程接口提供了转义数据值中特殊字符的方法。如果使用得当，这将防止应用程序用户输入导致应用程序生成具有不同效果的语句的值：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    MySQL C API: Use the
                    <a class="link" href="connectors-apis.html#mysql-real-escape-string-quote" title="27.8.7.56&nbsp;mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
                    API call.
                </p><p style="color:blue;">mysql c api：使用mysql_real_escape_string_quote（）api调用。</p></li><li class="listitem"><p>
                    MySQL++: Use the <code class="literal">escape</code> and
                    <code class="literal">quote</code> modifiers for query streams.
                </p><p style="color:blue;">mysql++：对查询流使用escape和quote修饰符。</p></li><li class="listitem"><p>
                    PHP: Use either the <code class="literal">mysqli</code> or
                    <code class="literal">pdo_mysql</code> extensions, and not the older
                    <code class="literal">ext/mysql</code> extension. The preferred API's
                    support the improved MySQL authentication protocol and
                    passwords, as well as prepared statements with placeholders.
                    See also <a class="ulink" href="https://dev.mysql.com/doc/apis-php/en/apis-php-mysqlinfo.api.choosing.html" target="_top">Choosing an API</a>.
                </p><p style="color:blue;">php：使用mysqli或pdo_mysql扩展，而不是旧的ext/mysql扩展。首选的api支持改进的mysql身份验证协议和密码，以及带有占位符的准备好的语句。另请参见选择API。</p><p>
                    If the older <code class="literal">ext/mysql</code> extension must be
                    used, then for escaping use the
                    <a class="link" href="connectors-apis.html#mysql-real-escape-string-quote" title="27.8.7.56&nbsp;mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
                    function and not
                    <a class="link" href="connectors-apis.html#mysql-escape-string" title="27.8.7.16&nbsp;mysql_escape_string()"><code class="literal">mysql_escape_string()</code></a> or
                    <code class="function">addslashes()</code> because only
                    <a class="link" href="connectors-apis.html#mysql-real-escape-string-quote" title="27.8.7.56&nbsp;mysql_real_escape_string_quote()"><code class="literal">mysql_real_escape_string_quote()</code></a>
                    is character set-aware; the other functions can be
                    <span class="quote">“<span class="quote">bypassed</span>”</span> when using (invalid) multibyte
                    character sets.
                </p><p style="color:blue;">如果必须使用旧的ext/mysql扩展名，那么对于转义，请使用mysql_real_escape_string_quote（）函数，而不是mysql_escape_string（）或addslashes（），因为只有mysql_real_escape_string_quote（）可以识别字符集；使用（无效的）多字节字符集时，可以“绕过”其他函数。</p></li><li class="listitem"><p>
                    Perl DBI: Use placeholders or the <code class="literal">quote()</code>
                    method.
                </p><p style="color:blue;">Perl DBI：使用占位符或quote（）方法。</p></li><li class="listitem"><p>
                    Ruby DBI: Use placeholders or the <code class="literal">quote()</code>
                    method.
                </p><p style="color:blue;">ruby dbi：使用占位符或quote（）方法。</p></li><li class="listitem"><p>
                    Java JDBC: Use a <code class="literal">PreparedStatement</code> object
                    and placeholders.
                </p><p style="color:blue;">java jdbc：使用preparedstatement对象和占位符。</p></li></ul>
            </div>
            <p>
                Other programming interfaces might have similar capabilities.
            </p><p style="color:blue;">其他编程接口可能具有类似的功能。</p>
        </div>

    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="access-control"></a>6.2&nbsp;Access Control and Account Management</h2>

                </div>

            </div>

        </div>
        <div class="toc">
            <dl class="toc"><dt><span class="section"><a href="security.html#user-names">6.2.1 Account User Names and Passwords</a></span></dt><dt><span class="section"><a href="security.html#privileges-provided">6.2.2 Privileges Provided by MySQL</a></span></dt><dt><span class="section"><a href="security.html#grant-tables">6.2.3 Grant Tables</a></span></dt><dt><span class="section"><a href="security.html#account-names">6.2.4 Specifying Account Names</a></span></dt><dt><span class="section"><a href="security.html#connection-access">6.2.5 Access Control, Stage 1: Connection Verification</a></span></dt><dt><span class="section"><a href="security.html#request-access">6.2.6 Access Control, Stage 2: Request Verification</a></span></dt><dt><span class="section"><a href="security.html#creating-accounts">6.2.7 Adding Accounts, Assigning Privileges, and Dropping Accounts</a></span></dt><dt><span class="section"><a href="security.html#reserved-users">6.2.8 Reserved Accounts</a></span></dt><dt><span class="section"><a href="security.html#privilege-changes">6.2.9 When Privilege Changes Take Effect</a></span></dt><dt><span class="section"><a href="security.html#assigning-passwords">6.2.10 Assigning Account Passwords</a></span></dt><dt><span class="section"><a href="security.html#password-management">6.2.11 Password Management</a></span></dt><dt><span class="section"><a href="security.html#expired-password-handling">6.2.12 Server Handling of Expired Passwords</a></span></dt><dt><span class="section"><a href="security.html#pluggable-authentication">6.2.13 Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#proxy-users">6.2.14 Proxy Users</a></span></dt><dt><span class="section"><a href="security.html#account-locking">6.2.15 Account Locking</a></span></dt><dt><span class="section"><a href="security.html#user-resources">6.2.16 Setting Account Resource Limits</a></span></dt><dt><span class="section"><a href="security.html#problems-connecting">6.2.17 Troubleshooting Problems Connecting to MySQL</a></span></dt><dt><span class="section"><a href="security.html#account-activity-auditing">6.2.18 SQL-Based Account Activity Auditing</a></span></dt></dl>
        </div>
        <a class="indexterm" name="idm140286889973056"></a><a class="indexterm" name="idm140286889972016"></a><a class="indexterm" name="idm140286889970944"></a><a class="indexterm" name="idm140286889969872"></a><a class="indexterm" name="idm140286889968800"></a><a class="indexterm" name="idm140286889967728"></a><a class="indexterm" name="idm140286889966240"></a><a class="indexterm" name="idm140286889965168"></a><a class="indexterm" name="idm140286889964096"></a><a class="indexterm" name="idm140286889962608"></a><p>
        MySQL enables the creation of accounts that permit client users to
        connect to the server and access data managed by the server. The
        primary function of the MySQL privilege system is to authenticate a
        user who connects from a given host and to associate that user with
        privileges on a database such as
        <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>,
        <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
        <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
        <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a>. Additional functionality
        includes the ability to grant privileges for administrative
        operations.
    </p><p style="color:blue;">mysql允许创建允许客户端用户连接到服务器并访问服务器管理的数据的帐户。mysql权限系统的主要功能是对从给定主机连接的用户进行身份验证，并将该用户与数据库上的权限（如select、insert、update和delete）相关联。其他功能包括授予管理操作权限的功能。</p><p>
        To control which users can connect, each account can be assigned
        authentication credentials such as a password. The user interface to
        MySQL accounts consists of SQL statements such as
        <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, and
        <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a>. See
        <a class="xref" href="sql-syntax.html#account-management-sql" title="13.7.1&nbsp;Account Management Statements">Section&nbsp;13.7.1, “Account Management Statements”</a>.
    </p><p style="color:blue;">要控制哪些用户可以连接，可以为每个帐户分配身份验证凭据，如密码。mysql帐户的用户界面由create user、grant和revoke等sql语句组成。见第13.7.1节“账户管理报表”。</p><p>
        The MySQL privilege system ensures that all users may perform only
        the operations permitted to them. As a user, when you connect to a
        MySQL server, your identity is determined by <span class="emphasis"><em>the host from
    which you connect</em></span> and <span class="emphasis"><em>the user name you
    specify</em></span>. When you issue requests after connecting, the
        system grants privileges according to your identity and
        <span class="emphasis"><em>what you want to do</em></span>.
    </p><p style="color:blue;">mysql权限系统确保所有用户只能执行允许的操作。作为用户，当您连接到mysql服务器时，您的身份由连接的主机和指定的用户名决定。当您在连接后发出请求时，系统会根据您的身份和要执行的操作授予权限。</p><p>
        MySQL considers both your host name and user name in identifying you
        because there is no reason to assume that a given user name belongs
        to the same person on all hosts. For example, the user
        <code class="literal">joe</code> who connects from
        <code class="literal">office.example.com</code> need not be the same person as
        the user <code class="literal">joe</code> who connects from
        <code class="literal">home.example.com</code>. MySQL handles this by enabling
        you to distinguish users on different hosts that happen to have the
        same name: You can grant one set of privileges for connections by
        <code class="literal">joe</code> from <code class="literal">office.example.com</code>,
        and a different set of privileges for connections by
        <code class="literal">joe</code> from <code class="literal">home.example.com</code>. To
        see what privileges a given account has, use the
        <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> statement. For example:
    </p><p style="color:blue;">mysql在识别您时同时考虑您的主机名和用户名，因为没有理由假定给定的用户名属于所有主机上的同一个人。例如，从office.example.com连接的用户joe不必与从home.example.com连接的用户joe是同一个人。MySQL通过使您能够区分不同主机上碰巧同名的用户来处理此问题：您可以为来自office.example.com的joe的连接授予一组特权，并为来自home.example.com的joe的连接授予另一组特权。要查看给定帐户具有哪些特权，请使用show grants语句。例如：</p><pre data-lang="sql" class="programlisting">SHOW GRANTS FOR 'joe'@'office.example.com';
SHOW GRANTS FOR 'joe'@'home.example.com';
</pre><p>
        Internally, the server stores privilege information in the grant
        tables of the <code class="literal">mysql</code> system database. The MySQL
        server reads the contents of these tables into memory when it starts
        and bases access-control decisions on the in-memory copies of the
        grant tables.
    </p><p style="color:blue;">在内部，服务器将特权信息存储在mysql系统数据库的授权表中。mysql服务器在启动时将这些表的内容读入内存，并根据grant表的内存中副本做出访问控制决策。</p><p>
        MySQL access control involves two stages when you run a client
        program that connects to the server:
    </p><p style="color:blue;">当运行连接到服务器的客户端程序时，mysql访问控制包括两个阶段：</p><p>
        <span class="bold"><strong>Stage 1:</strong></span> The server accepts or
        rejects the connection based on your identity and whether you can
        verify your identity by supplying the correct password.
    </p><p style="color:blue;">阶段1：服务器根据您的身份以及您是否可以通过提供正确的密码来验证您的身份来接受或拒绝连接。</p><p>
        <span class="bold"><strong>Stage 2:</strong></span> Assuming that you can
        connect, the server checks each statement you issue to determine
        whether you have sufficient privileges to perform it. For example,
        if you try to select rows from a table in a database or drop a table
        from the database, the server verifies that you have the
        <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privilege for the table or the
        <a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a> privilege for the database.
    </p><p style="color:blue;">阶段2：假设您可以连接，服务器将检查您发出的每个语句，以确定您是否有足够的权限执行该语句。例如，如果尝试从数据库中的表中选择行或从数据库中删除表，服务器将验证您是否具有该表的“选择”权限或该数据库的“删除”权限。</p><p>
        For a more detailed description of what happens during each stage,
        see <a class="xref" href="security.html#connection-access" title="6.2.5&nbsp;Access Control, Stage 1: Connection Verification">Section&nbsp;6.2.5, “Access Control, Stage 1: Connection Verification”</a>, and
        <a class="xref" href="security.html#request-access" title="6.2.6&nbsp;Access Control, Stage 2: Request Verification">Section&nbsp;6.2.6, “Access Control, Stage 2: Request Verification”</a>. For help in diagnosing
        privilege-related problems, see
        <a class="xref" href="security.html#problems-connecting" title="6.2.17&nbsp;Troubleshooting Problems Connecting to MySQL">Section&nbsp;6.2.17, “Troubleshooting Problems Connecting to MySQL”</a>.
    </p><p style="color:blue;">有关每个阶段中发生的情况的更详细描述，请参阅第6.2.5节“访问控制，第1阶段：连接验证”和第6.2.6节“访问控制，第2阶段：请求验证”。有关诊断权限相关问题的帮助，请参阅6.2.17节，“连接到MySQL的疑难解答”。</p><p>
        If your privileges are changed (either by yourself or someone else)
        while you are connected, those changes do not necessarily take
        effect immediately for the next statement that you issue. For
        details about the conditions under which the server reloads the
        grant tables, see <a class="xref" href="security.html#privilege-changes" title="6.2.9&nbsp;When Privilege Changes Take Effect">Section&nbsp;6.2.9, “When Privilege Changes Take Effect”</a>.
    </p><p style="color:blue;">如果您的权限在连接时被更改（由您自己或其他人更改），则这些更改不一定在您发出的下一条语句中立即生效。有关服务器重新加载授权表的条件的详细信息，请参阅第6.2.9节“权限更改生效时”。</p><p>
        There are some things that you cannot do with the MySQL privilege
        system:
    </p><p style="color:blue;">对于mysql特权系统，有些事情是做不到的：</p>
        <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                You cannot explicitly specify that a given user should be denied
                access. That is, you cannot explicitly match a user and then
                refuse the connection.
            </p><p style="color:blue;">不能显式指定应拒绝给定用户的访问。也就是说，不能显式匹配用户，然后拒绝连接。</p></li><li class="listitem"><p>
                You cannot specify that a user has privileges to create or drop
                tables in a database but not to create or drop the database
                itself.
            </p><p style="color:blue;">不能指定用户有权在数据库中创建或删除表，但不能创建或删除数据库本身。</p></li><li class="listitem"><p>
                A password applies globally to an account. You cannot associate
                a password with a specific object such as a database, table, or
                routine.
            </p><p style="color:blue;">密码全局应用于帐户。不能将密码与特定对象（如数据库、表或例程）关联。</p></li></ul>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="user-names"></a>6.2.1&nbsp;Account User Names and Passwords</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286889922992"></a><a class="indexterm" name="idm140286889921536"></a><p>
            MySQL stores accounts in the <code class="literal">user</code> table of the
            <code class="literal">mysql</code> system database. An account is defined in
            terms of a user name and the client host or hosts from which the
            user can connect to the server. For information about account
            representation in the <code class="literal">user</code> table, see
            <a class="xref" href="security.html#grant-tables" title="6.2.3&nbsp;Grant Tables">Section&nbsp;6.2.3, “Grant Tables”</a>.
        </p><p style="color:blue;">mysql将帐户存储在mysql系统数据库的用户表中。帐户是根据用户名和一个或多个客户端主机定义的，用户可以从这些主机连接到服务器。有关用户表中帐户表示的信息，请参阅第6.2.3节“授予表”。</p><p>
            An account may also have authentication credentials such as a
            password. The credentials are handled by the account
            authentication plugin. MySQL supports multiple authentication
            plugins. Some of them use built-in authentication methods, whereas
            others enable authentication using external authentication
            methods. See <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
        </p><p style="color:blue;">帐户也可以具有身份验证凭据，如密码。凭据由帐户身份验证插件处理。mysql支持多个身份验证插件。其中一些使用内置的身份验证方法，而另一些使用外部身份验证方法启用身份验证。见第6.2.13节“可插拔认证”。</p><p>
            There are several distinctions between the way user names and
            passwords are used by MySQL and your operating system:
        </p><p style="color:blue;">MySQL和您的操作系统使用用户名和密码的方式有几个区别：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    User names, as used by MySQL for authentication purposes, have
                    nothing to do with user names (login names) as used by Windows
                    or Unix. On Unix, most MySQL clients by default try to log in
                    using the current Unix user name as the MySQL user name, but
                    that is for convenience only. The default can be overridden
                    easily, because client programs permit any user name to be
                    specified with a <code class="option">-u</code> or
                    <code class="option">--user</code> option. This means that anyone can
                    attempt to connect to the server using any user name, so you
                    cannot make a database secure in any way unless all MySQL
                    accounts have passwords. Anyone who specifies a user name for
                    an account that has no password can connect successfully to
                    the server.
                </p><p style="color:blue;">mysql用于身份验证的用户名与windows或unix使用的用户名（登录名）无关。在unix上，大多数mysql客户机在默认情况下尝试使用当前unix用户名作为mysql用户名登录，但这只是为了方便起见。默认值可以很容易地重写，因为客户端程序允许使用-u或--user选项指定任何用户名。这意味着任何人都可以尝试使用任何用户名连接到服务器，因此除非所有mysql帐户都有密码，否则无法以任何方式确保数据库的安全。为没有密码的帐户指定用户名的任何人都可以成功连接到服务器。</p></li><li class="listitem"><p>
                    MySQL user names are up to 32 characters long. Operating
                    system user names may have a different maximum length.
                </p><p style="color:blue;">mysql用户名最长为32个字符。操作系统用户名可能具有不同的最大长度。</p>
                    <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Warning
                        </div>
                        <p>
                            The MySQL user name length limit is hardcoded in MySQL
                            servers and clients, and trying to circumvent it by
                            modifying the definitions of the tables in the
                            <code class="literal">mysql</code> database <span class="emphasis"><em>does not
            work</em></span>.
                        </p><p style="color:blue;">mysql用户名长度限制是在mysql服务器和客户机中硬编码的，试图通过修改mysql数据库中表的定义来规避它是行不通的。</p><p>
                        You should never alter the structure of tables in the
                        <code class="literal">mysql</code> database in any manner whatsoever
                        except by means of the procedure that is described in
                        <a class="xref" href="installing.html#upgrading" title="2.11&nbsp;Upgrading MySQL">Section&nbsp;2.11, “Upgrading MySQL”</a>. Attempting to redefine MySQL's
                        system tables in any other fashion results in undefined and
                        unsupported behavior. The server is free to ignore rows that
                        become malformed as a result of such modifications.
                    </p><p style="color:blue;">除了通过2.11节“升级mysql”中描述的过程之外，您不应以任何方式更改mysql数据库中表的结构。尝试以任何其他方式重新定义mysql的系统表会导致未定义和不受支持的行为。服务器可以忽略由于此类修改而变得格式不正确的行。</p>
                    </div>
                </li><li class="listitem"><p>
                    To authenticate client connections for accounts that use
                    built-in authentication methods, the server uses passwords
                    stored in the <code class="literal">user</code> table. These passwords
                    are distinct from passwords for logging in to your operating
                    system. There is no necessary connection between the
                    <span class="quote">“<span class="quote">external</span>”</span> password you use to log in to a
                    Windows or Unix machine and the password you use to access the
                    MySQL server on that machine.
                </p><p style="color:blue;">为了验证使用内置验证方法的帐户的客户端连接，服务器使用存储在用户表中的密码。这些密码不同于登录到操作系统的密码。登录windows或unix计算机时使用的“外部”密码与访问该计算机上mysql服务器时使用的密码之间没有必要的连接。</p><p>
                    If the server authenticates a client using some other plugin,
                    the authentication method that the plugin implements may or
                    may not use a password stored in the <code class="literal">user</code>
                    table. In this case, it is possible that an external password
                    is also used to authenticate to the MySQL server.
                </p><p style="color:blue;">如果服务器使用其他插件对客户端进行身份验证，则该插件实现的身份验证方法可能使用，也可能不使用存储在用户表中的密码。在这种情况下，还可能使用外部密码对mysql服务器进行身份验证。</p></li><li class="listitem"><p>
                    Passwords stored in the <code class="literal">user</code> table are
                    encrypted using plugin-specific algorithms. For information
                    about MySQL native password hashing, see
                    <a class="xref" href="security.html#password-hashing" title="6.1.2.4&nbsp;Password Hashing in MySQL">Section&nbsp;6.1.2.4, “Password Hashing in MySQL”</a>.
                </p><p style="color:blue;">存储在用户表中的密码使用特定于插件的算法进行加密。有关mysql本机密码哈希的信息，请参阅6.1.2.4节“mysql中的密码哈希”。</p></li><li class="listitem"><p>
                    If the user name and password contain only ASCII characters,
                    it is possible to connect to the server regardless of
                    character set settings. To enable connections when the user
                    name or password contain non-ASCII characters, client
                    applications should call the
                    <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> C API function
                    with the <code class="literal">MYSQL_SET_CHARSET_NAME</code> option and
                    appropriate character set name as arguments. This causes
                    authentication to take place using the specified character
                    set. Otherwise, authentication fails unless the server default
                    character set is the same as the encoding in the
                    authentication defaults.
                </p><p style="color:blue;">如果用户名和密码仅包含ascii字符，则无论字符集设置如何，都可以连接到服务器。若要在用户名或密码包含非ascii字符时启用连接，客户端应用程序应使用mysql_set_name选项和适当的字符集名称作为参数调用mysql_options（）c api函数。这将导致使用指定的字符集进行身份验证。否则，身份验证将失败，除非服务器默认字符集与身份验证默认值中的编码相同。</p><p>
                    Standard MySQL client programs support a
                    <code class="option">--default-character-set</code> option that causes
                    <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> to be called
                    as just described. In addition, character set autodetection is
                    supported as described in
                    <a class="xref" href="charset.html#charset-connection" title="10.4&nbsp;Connection Character Sets and Collations">Section&nbsp;10.4, “Connection Character Sets and Collations”</a>. For programs that use a
                    connector that is not based on the C API, the connector may
                    provide an equivalent to
                    <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> that can be
                    used instead. Check the connector documentation.
                </p><p style="color:blue;">标准的MySQL客户机程序支持一个——默认字符集选项，该选项会导致调用mysql_options（），如前所述。此外，如第10.4节“连接字符集和排序规则”所述，支持字符集自动检测。对于使用非基于C API的连接器的程序，连接器可以提供与mysql_options（）等价的可供使用的连接器。检查连接器文档。</p><p>
                    The preceding notes do not apply for <code class="literal">ucs2</code>,
                    <code class="literal">utf16</code>, and <code class="literal">utf32</code>, which
                    are not permitted as client character sets.
                </p><p style="color:blue;">前面的说明不适用于不允许用作客户端字符集的ucs2、utf16和utf32。</p></li></ul>
            </div>
            <p>
                The MySQL installation process populates the grant tables with an
                initial <code class="literal">root</code> account, as described in
                <a class="xref" href="installing.html#default-privileges" title="2.10.4&nbsp;Securing the Initial MySQL Account">Section&nbsp;2.10.4, “Securing the Initial MySQL Account”</a>, which also discusses how to
                assign a password to it. Thereafter, you normally set up, modify,
                and remove MySQL accounts using statements such as
                <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.3&nbsp;DROP USER Syntax"><code class="literal">DROP USER</code></a>,
                <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, and
                <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a>. See
                <a class="xref" href="security.html#creating-accounts" title="6.2.7&nbsp;Adding Accounts, Assigning Privileges, and Dropping Accounts">Section&nbsp;6.2.7, “Adding Accounts, Assigning Privileges, and Dropping Accounts”</a>, and
                <a class="xref" href="sql-syntax.html#account-management-sql" title="13.7.1&nbsp;Account Management Statements">Section&nbsp;13.7.1, “Account Management Statements”</a>.
            </p><p style="color:blue;">mysql安装过程使用初始根帐户填充grant表，如2.10.4节“保护初始mysql帐户”中所述，该节还讨论了如何为其分配密码。此后，通常使用诸如create user、drop user、grant和revoke之类的语句来设置、修改和删除mysql帐户。参见第6.2.7节“添加帐户、分配权限和删除帐户”，以及第13.7.1节“帐户管理报表”。</p><p>
            To connect to a MySQL server with a command-line client, specify
            user name and password options as necessary for the account that
            you want to use:
        </p><p style="color:blue;">要使用命令行客户端连接到MySQL服务器，请根据需要为要使用的帐户指定用户名和密码选项：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=finley --password <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><p>
            If you prefer short options, the command looks like this:
        </p><p style="color:blue;">如果您喜欢短选项，则该命令如下所示：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u finley -p <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><p>
            If you omit the password value following the
            <a class="link" href="programs.html#option_general_password"><code class="option">--password</code></a> or <code class="option">-p</code>
            option on the command line (as just shown), the client prompts for
            one. Alternatively, the password can be specified on the command
            line:
        </p><p style="color:blue;">如果在命令行上省略了--password或-p选项后面的密码值（如图所示），客户机将提示您输入一个。或者，可以在命令行中指定密码：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=finley --password=<em class="replaceable"><code>password</code></em> <em class="replaceable"><code>db_name</code></em></code></strong>
shell&gt; <strong class="userinput"><code>mysql -u finley -p<em class="replaceable"><code>password</code></em> <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><p>
            If you use the <code class="option">-p</code> option, there must be
            <span class="emphasis"><em>no space</em></span> between <code class="option">-p</code> and the
            following password value.
        </p><p style="color:blue;">如果使用-p选项，-p和以下密码值之间不能有空格。</p><p>
            Specifying a password on the command line should be considered
            insecure. See <a class="xref" href="security.html#password-security-user" title="6.1.2.1&nbsp;End-User Guidelines for Password Security">Section&nbsp;6.1.2.1, “End-User Guidelines for Password Security”</a>. To avoid
            giving the password on the command line, use an option file or a
            login path file. See <a class="xref" href="programs.html#option-files" title="4.2.2.2&nbsp;Using Option Files">Section&nbsp;4.2.2.2, “Using Option Files”</a>, and
            <a class="xref" href="programs.html#mysql-config-editor" title="4.6.6&nbsp;mysql_config_editor — MySQL Configuration Utility">Section&nbsp;4.6.6, “<span class="command"><strong>mysql_config_editor</strong></span> — MySQL Configuration Utility”</a>.
        </p><p style="color:blue;">在命令行上指定密码应该被认为是不安全的。见第6.1.2.1节，“密码安全的最终用户指南”。要避免在命令行上输入密码，请使用选项文件或登录路径文件。请参阅第4.2.2.2节“使用选项文件”和第4.6.6节“mysql配置编辑器-mysql配置实用程序”。</p><p>
            For additional information about specifying user names, passwords,
            and other connection parameters, see <a class="xref" href="programs.html#connecting" title="4.2.4&nbsp;Connecting to the MySQL Server Using Command Options">Section&nbsp;4.2.4, “Connecting to the MySQL Server Using Command Options”</a>.
        </p><p style="color:blue;">有关指定用户名、密码和其他连接参数的其他信息，请参阅4.2.4节“使用命令选项连接到mysql服务器”。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="privileges-provided"></a>6.2.2&nbsp;Privileges Provided by MySQL</h3>

                    </div>

                </div>

            </div>
            <p>
                The privileges granted to a MySQL account determine which
                operations the account can perform. MySQL privileges differ in the
                contexts in which they apply and at different levels of operation:
            </p><p style="color:blue;">授予mysql帐户的权限决定了该帐户可以执行哪些操作。MySQL权限在应用的上下文中以及在不同的操作级别上有所不同：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Administrative privileges enable users to manage operation of
                    the MySQL server. These privileges are global because they are
                    not specific to a particular database.
                </p><p style="color:blue;">管理权限允许用户管理mysql服务器的操作。这些特权是全局的，因为它们不是特定于特定数据库的。</p></li><li class="listitem"><p>
                    Database privileges apply to a database and to all objects
                    within it. These privileges can be granted for specific
                    databases, or globally so that they apply to all databases.
                </p><p style="color:blue;">数据库特权应用于数据库及其内的所有对象。这些特权可以授予特定的数据库，也可以全局授予所有数据库。</p></li><li class="listitem"><p>
                    Privileges for database objects such as tables, indexes,
                    views, and stored routines can be granted for specific objects
                    within a database, for all objects of a given type within a
                    database (for example, all tables in a database), or globally
                    for all objects of a given type in all databases.
                </p><p style="color:blue;">可以为数据库中的特定对象、数据库中给定类型的所有对象（例如，数据库中的所有表）或全局为所有数据库中给定类型的所有对象授予数据库对象（例如，表、索引、视图和存储例程）的特权。</p></li></ul>
            </div>
            <p>
                Information about account privileges is stored in the grant tables
                in the <code class="literal">mysql</code> system database. For a description
                of the structure and contents of these tables, see
                <a class="xref" href="security.html#grant-tables" title="6.2.3&nbsp;Grant Tables">Section&nbsp;6.2.3, “Grant Tables”</a>. The MySQL server reads the
                contents of the grant tables into memory when it starts, and
                reloads them under the circumstances indicated in
                <a class="xref" href="security.html#privilege-changes" title="6.2.9&nbsp;When Privilege Changes Take Effect">Section&nbsp;6.2.9, “When Privilege Changes Take Effect”</a>. The server bases
                access-control decisions on the in-memory copies of the grant
                tables.
            </p><p style="color:blue;">有关帐户权限的信息存储在mysql系统数据库的grant表中。有关这些表的结构和内容的说明，请参见第6.2.3节“授予表”。mysql服务器在启动时将grant表的内容读入内存，并在6.2.9节“特权更改生效时”所述的情况下重新加载它们。服务器根据授予表的内存副本来决定访问控制。</p>
            <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Important
                </div>
                <p>
                    Some MySQL releases introduce changes to the grant tables to add
                    new privileges or features. To make sure that you can take
                    advantage of any new capabilities, update your grant tables to
                    the current structure whenever you upgrade MySQL. See
                    <a class="xref" href="installing.html#upgrading" title="2.11&nbsp;Upgrading MySQL">Section&nbsp;2.11, “Upgrading MySQL”</a>.
                </p><p style="color:blue;">一些mysql版本引入了对grant表的更改，以添加新的特权或特性。为了确保可以利用任何新功能，每当升级mysql时，都要将grant表更新为当前结构。参见2.11节“升级mysql”。</p>
            </div>
            <p>
                The following sections summarize the available privileges, provide
                more detailed descriptions of each privilege, and offer usage
                guidelines.
            </p><p style="color:blue;">以下各节总结了可用的特权，提供了每个特权的更详细描述，并提供了使用指南。</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#privileges-provided-summary" title="Summary of Available Privileges">Summary of Available Privileges</a></p><p style="color:blue;">可用特权摘要</p></li><li class="listitem"><p><a class="xref" href="security.html#privileges-provided-static" title="Privilege Descriptions">Privilege Descriptions</a></p><p style="color:blue;">特权描述</p></li><li class="listitem"><p><a class="xref" href="security.html#privileges-provided-guidelines" title="Privilege-Granting Guidelines">Privilege-Granting Guidelines</a></p><p style="color:blue;">特权授予指南</p></li></ul>
            </div>

            <div class="simplesect">

                <div class="titlepage">
                    <div>

                        <div class="simple">
                            <h4 class="title"><a name="privileges-provided-summary"></a>Summary of Available Privileges</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The following table shows the privilege names used in
                    <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> and
                    <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> statements, along with the
                    column name associated with each privilege in the grant tables
                    and the context in which the privilege applies.
                </p><p style="color:blue;">下表显示了GRANT和REVOKE语句中使用的特权名称，以及与GRANT表中的每个特权相关联的列名和应用特权的上下文。</p>
                <div class="table">
                    <a name="idm140286889847088"></a><p class="title"><b>Table&nbsp;6.2&nbsp;Permissible Privileges for GRANT and REVOKE</b></p><p style="color:blue;">表6.2授予和撤销的允许特权</p>
                    <div class="table-contents">
                        <table><colgroup><col width="30%"><col width="33%"><col width="37%"></colgroup><thead><tr>
                            <th scope="col">Privilege</th>
                            <th scope="col">Grant Table Column</th>
                            <th scope="col">Context</th>
                        </tr></thead><tbody><tr>
                            <td scope="row"><a class="link" href="security.html#priv_all"><code class="literal">ALL [PRIVILEGES]</code></a></td>
                            <td>Synonym for <span class="quote">“<span class="quote">all privileges</span>”</span></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_alter"><code class="literal">ALTER</code></a></td>
                            <td><code class="literal">Alter_priv</code></td>
                            <td>Tables</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a></td>
                            <td><code class="literal">Alter_routine_priv</code></td>
                            <td>Stored routines</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_create"><code class="literal">CREATE</code></a></td>
                            <td><code class="literal">Create_priv</code></td>
                            <td>Databases, tables, or indexes</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a></td>
                            <td><code class="literal">Create_routine_priv</code></td>
                            <td>Stored routines</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_create-tablespace"><code class="literal">CREATE TABLESPACE</code></a></td>
                            <td><code class="literal">Create_tablespace_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_create-temporary-tables"><code class="literal">CREATE TEMPORARY TABLES</code></a></td>
                            <td><code class="literal">Create_tmp_table_priv</code></td>
                            <td>Tables</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_create-user"><code class="literal">CREATE USER</code></a></td>
                            <td><code class="literal">Create_user_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_create-view"><code class="literal">CREATE VIEW</code></a></td>
                            <td><code class="literal">Create_view_priv</code></td>
                            <td>Views</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_delete"><code class="literal">DELETE</code></a></td>
                            <td><code class="literal">Delete_priv</code></td>
                            <td>Tables</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a></td>
                            <td><code class="literal">Drop_priv</code></td>
                            <td>Databases, tables, or views</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_event"><code class="literal">EVENT</code></a></td>
                            <td><code class="literal">Event_priv</code></td>
                            <td>Databases</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a></td>
                            <td><code class="literal">Execute_priv</code></td>
                            <td>Stored routines</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a></td>
                            <td><code class="literal">File_priv</code></td>
                            <td>File access on server host</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a></td>
                            <td><code class="literal">Grant_priv</code></td>
                            <td>Databases, tables, or stored routines</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_index"><code class="literal">INDEX</code></a></td>
                            <td><code class="literal">Index_priv</code></td>
                            <td>Tables</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a></td>
                            <td><code class="literal">Insert_priv</code></td>
                            <td>Tables or columns</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_lock-tables"><code class="literal">LOCK TABLES</code></a></td>
                            <td><code class="literal">Lock_tables_priv</code></td>
                            <td>Databases</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a></td>
                            <td><code class="literal">Process_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a></td>
                            <td>See <code class="literal">proxies_priv</code> table</td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_references"><code class="literal">REFERENCES</code></a></td>
                            <td><code class="literal">References_priv</code></td>
                            <td>Databases or tables</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a></td>
                            <td><code class="literal">Reload_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_replication-client"><code class="literal">REPLICATION CLIENT</code></a></td>
                            <td><code class="literal">Repl_client_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a></td>
                            <td><code class="literal">Repl_slave_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a></td>
                            <td><code class="literal">Select_priv</code></td>
                            <td>Tables or columns</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_show-databases"><code class="literal">SHOW DATABASES</code></a></td>
                            <td><code class="literal">Show_db_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_show-view"><code class="literal">SHOW VIEW</code></a></td>
                            <td><code class="literal">Show_view_priv</code></td>
                            <td>Views</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a></td>
                            <td><code class="literal">Shutdown_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a></td>
                            <td><code class="literal">Super_priv</code></td>
                            <td>Server administration</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_trigger"><code class="literal">TRIGGER</code></a></td>
                            <td><code class="literal">Trigger_priv</code></td>
                            <td>Tables</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_update"><code class="literal">UPDATE</code></a></td>
                            <td><code class="literal">Update_priv</code></td>
                            <td>Tables or columns</td>
                        </tr><tr>
                            <td scope="row"><a class="link" href="security.html#priv_usage"><code class="literal">USAGE</code></a></td>
                            <td>Synonym for <span class="quote">“<span class="quote">no privileges</span>”</span></td>
                            <td>Server administration</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break">
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="privileges-provided-static"></a>Privilege Descriptions</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The following list provides general descriptions of each
                    privilege available in MySQL. Particular SQL statements might
                    have more specific privilege requirements than indicated here.
                    If so, the description for the statement in question provides
                    the details.
                </p><p style="color:blue;">下表提供了mysql中可用的每个特权的一般说明。特定的sql语句可能有比这里更具体的特权要求。如果是这样，有关语句的描述将提供详细信息。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="priv_all"></a>
                        <a class="link" href="security.html#priv_all"><code class="literal">ALL</code></a>,
                        <a class="link" href="security.html#priv_all"><code class="literal">ALL
                            PRIVILEGES</code></a>
                    </p><p style="color:blue;">所有，所有特权</p><a class="indexterm" name="idm140286889683456"></a><a class="indexterm" name="idm140286889682000"></a><a class="indexterm" name="idm140286889680928"></a><a class="indexterm" name="idm140286889679440"></a><p>
                        These privilege specifiers are shorthand for <span class="quote">“<span class="quote">all
            privileges available at a given privilege level</span>”</span>
                        (except <a class="link" href="security.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>). For
                        example, granting <a class="link" href="security.html#priv_all"><code class="literal">ALL</code></a> at the
                        global or table level grants all global privileges or all
                        table-level privileges, respectively.
                    </p><p style="color:blue;">这些特权说明符是“在给定特权级别上可用的所有特权”（grant option除外）的简写。例如，在全局或表级别授予all分别授予所有全局权限或所有表级别权限。</p></li><li class="listitem"><p><a name="priv_alter"></a>
                        <a class="link" href="security.html#priv_alter"><code class="literal">ALTER</code></a>
                    </p><p style="color:blue;">改变</p><a class="indexterm" name="idm140286889672480"></a><a class="indexterm" name="idm140286889670992"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#alter-table" title="13.1.8&nbsp;ALTER TABLE Syntax"><code class="literal">ALTER
                        TABLE</code></a> statement to change the structure of tables.
                        <a class="link" href="sql-syntax.html#alter-table" title="13.1.8&nbsp;ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> also requires the
                        <a class="link" href="security.html#priv_create"><code class="literal">CREATE</code></a> and
                        <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> privileges. Renaming a
                        table requires <a class="link" href="security.html#priv_alter"><code class="literal">ALTER</code></a> and
                        <a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a> on the old table,
                        <a class="link" href="security.html#priv_create"><code class="literal">CREATE</code></a>, and
                        <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> on the new table.
                    </p><p style="color:blue;">允许使用alter table语句更改表的结构。alter table还需要create和insert权限。重命名表需要对旧表执行alter和drop操作，对新表执行create和insert操作。</p></li><li class="listitem"><p><a name="priv_alter-routine"></a>
                        <a class="link" href="security.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a>
                    </p><p style="color:blue;">改变程序</p><a class="indexterm" name="idm140286889657168"></a><a class="indexterm" name="idm140286889655680"></a><p>
                        Enables use of statements that alter or drop stored routines
                        (stored procedures and functions).
                    </p><p style="color:blue;">允许使用更改或删除存储例程（存储过程和函数）的语句。</p></li><li class="listitem"><p><a name="priv_create"></a>
                        <a class="link" href="security.html#priv_create"><code class="literal">CREATE</code></a>
                    </p><p style="color:blue;">创建</p><a class="indexterm" name="idm140286889651744"></a><a class="indexterm" name="idm140286889650256"></a><p>
                        Enables use of statements that create new databases and
                        tables.
                    </p><p style="color:blue;">允许使用创建新数据库和表的语句。</p></li><li class="listitem"><p><a name="priv_create-routine"></a>
                        <a class="link" href="security.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a>
                    </p><p style="color:blue;">创建例程</p><a class="indexterm" name="idm140286889646288"></a><a class="indexterm" name="idm140286889644800"></a><p>
                        Enables use of statements that create stored routines
                        (stored procedures and functions).
                    </p><p style="color:blue;">允许使用创建存储例程（存储过程和函数）的语句。</p></li><li class="listitem"><p><a name="priv_create-tablespace"></a>
                        <a class="link" href="security.html#priv_create-tablespace"><code class="literal">CREATE TABLESPACE</code></a>
                    </p><p style="color:blue;">创建表空间</p><a class="indexterm" name="idm140286889640784"></a><a class="indexterm" name="idm140286889639296"></a><p>
                        Enables use of statements that create, alter, or drop
                        tablespaces and log file groups.
                    </p><p style="color:blue;">允许使用创建、更改或删除表空间和日志文件组的语句。</p></li><li class="listitem"><p><a name="priv_create-temporary-tables"></a>
                        <a class="link" href="security.html#priv_create-temporary-tables"><code class="literal">CREATE TEMPORARY TABLES</code></a>
                    </p><p style="color:blue;">创建临时表</p><a class="indexterm" name="idm140286889635168"></a><a class="indexterm" name="idm140286889633680"></a><p>
                        Enables the creation of temporary tables using the
                        <a class="link" href="sql-syntax.html#create-temporary-table" title="13.1.18.3&nbsp;CREATE TEMPORARY TABLE Syntax"><code class="literal">CREATE TEMPORARY TABLE</code></a>
                        statement.
                    </p><p style="color:blue;">使用CREATE临时表语句启用临时表的创建。</p><a class="indexterm" name="idm140286889630736"></a><a class="indexterm" name="idm140286889629248"></a><p>
                        After a session has created a temporary table, the server
                        performs no further privilege checks on the table. The
                        creating session can perform any operation on the table,
                        such as <a class="link" href="sql-syntax.html#drop-table" title="13.1.29&nbsp;DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>,
                        <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                        <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
                        <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>. For more information,
                        see <a class="xref" href="sql-syntax.html#create-temporary-table" title="13.1.18.3&nbsp;CREATE TEMPORARY TABLE Syntax">Section&nbsp;13.1.18.3, “CREATE TEMPORARY TABLE Syntax”</a>.
                    </p><p style="color:blue;">会话创建临时表后，服务器不再对该表执行权限检查。创建会话可以对表执行任何操作，例如删除表、插入、更新或选择。有关详细信息，请参阅第13.1.18.3节“创建临时表语法”。</p></li><li class="listitem"><p><a name="priv_create-user"></a>
                        <a class="link" href="security.html#priv_create-user"><code class="literal">CREATE USER</code></a>
                    </p><p style="color:blue;">创建用户</p><a class="indexterm" name="idm140286889619504"></a><a class="indexterm" name="idm140286889618016"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER
                        USER</code></a>, <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                        <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.3&nbsp;DROP USER Syntax"><code class="literal">DROP USER</code></a>,
                        <a class="link" href="sql-syntax.html#rename-user" title="13.7.1.5&nbsp;RENAME USER Syntax"><code class="literal">RENAME USER</code></a>, and
                        <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE ALL
                            PRIVILEGES</code></a> statements.
                    </p><p style="color:blue;">允许使用alter user、create user、drop user、rename user和revoke all privileges语句。</p></li><li class="listitem"><p><a name="priv_create-view"></a>
                        <a class="link" href="security.html#priv_create-view"><code class="literal">CREATE VIEW</code></a>
                    </p><p style="color:blue;">创建视图</p><a class="indexterm" name="idm140286889607968"></a><a class="indexterm" name="idm140286889606480"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#create-view" title="13.1.21&nbsp;CREATE VIEW Syntax"><code class="literal">CREATE
                        VIEW</code></a> statement.
                    </p><p style="color:blue;">启用CREATE VIEW语句的使用。</p></li><li class="listitem"><p><a name="priv_delete"></a>
                        <a class="link" href="security.html#priv_delete"><code class="literal">DELETE</code></a>
                    </p><p style="color:blue;">删除</p><a class="indexterm" name="idm140286889601232"></a><a class="indexterm" name="idm140286889599744"></a><p>
                        Enables rows to be deleted from tables in a database.
                    </p><p style="color:blue;">允许从数据库中的表中删除行。</p></li><li class="listitem"><p><a name="priv_drop"></a>
                        <a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a>
                    </p><p style="color:blue;">下降</p><a class="indexterm" name="idm140286889595856"></a><a class="indexterm" name="idm140286889594368"></a><p>
                        Enables use of statements that drop (remove) existing
                        databases, tables, and views. The
                        <a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a> privilege is required to
                        use the <code class="literal">ALTER TABLE ... DROP PARTITION</code>
                        statement on a partitioned table. The
                        <a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a> privilege is also
                        required for <a class="link" href="sql-syntax.html#truncate-table" title="13.1.34&nbsp;TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a>.
                    </p><p style="color:blue;">允许使用删除（删除）现有数据库、表和视图的语句。使用alter表需要drop权限…在分区表上删除分区语句。截断表还需要drop权限。</p></li><li class="listitem"><p><a name="priv_event"></a>
                        <a class="link" href="security.html#priv_event"><code class="literal">EVENT</code></a>
                    </p><p style="color:blue;">事件</p><a class="indexterm" name="idm140286889585824"></a><a class="indexterm" name="idm140286889584336"></a><p>
                        Enables use of statements that create, alter, drop, or
                        display events for the Event Scheduler.
                    </p><p style="color:blue;">允许使用为事件计划程序创建、更改、删除或显示事件的语句。</p></li><li class="listitem"><p><a name="priv_execute"></a>
                        <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a>
                    </p><p style="color:blue;">执行</p><a class="indexterm" name="idm140286889580336"></a><a class="indexterm" name="idm140286889578848"></a><p>
                        Enables use of statements that execute stored routines
                        (stored procedures and functions).
                    </p><p style="color:blue;">允许使用执行存储例程（存储过程和函数）的语句。</p></li><li class="listitem"><p><a name="priv_file"></a>
                        <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a>
                    </p><p style="color:blue;">文件</p><a class="indexterm" name="idm140286889574848"></a><a class="indexterm" name="idm140286889573360"></a><p>
                        Affects the following operations and server behaviors:
                    </p><p style="color:blue;">影响以下操作和服务器行为：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Enables reading and writing files on the server host
                                using the <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> and
                                <a class="link" href="sql-syntax.html#select-into" title="13.2.9.1&nbsp;SELECT ... INTO Syntax"><code class="literal">SELECT ...
                                    INTO OUTFILE</code></a> statements and the
                                <a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a> function. A
                                user who has the <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a>
                                privilege can read any file on the server host that is
                                either world-readable or readable by the MySQL server.
                                (This implies the user can read any file in any database
                                directory, because the server can access any of those
                                files.)
                            </p><p style="color:blue;">启用使用加载数据在服务器主机上读写文件，并选择…输入outfile语句和load_file（）函数。拥有文件权限的用户可以读取服务器主机上的任何文件，这些文件可以是全局可读的，也可以是mysql服务器可读的。（这意味着用户可以读取任何数据库目录中的任何文件，因为服务器可以访问这些文件中的任何一个。）</p></li><li class="listitem"><p>
                                Enables creating new files in any directory where the
                                MySQL server has write access. This includes the
                                server's data directory containing the files that
                                implement the privilege tables.
                            </p><p style="color:blue;">允许在MySQL服务器具有写访问权限的任何目录中创建新文件。这包括服务器的数据目录，其中包含实现特权表的文件。</p></li><li class="listitem"><p>
                                As of MySQL 5.7.17, enables use of the <code class="literal">DATA
                                DIRECTORY</code> or <code class="literal">INDEX
                                DIRECTORY</code> table option for the
                                <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement.
                            </p><p style="color:blue;">从mysql 5.7.17开始，启用create table语句的data directory或index directory table选项。</p></li></ul>
                        </div>
                        <p>
                            As a security measure, the server does not overwrite
                            existing files.
                        </p><p style="color:blue;">作为安全措施，服务器不会覆盖现有文件。</p><p>
                            To limit the location in which files can be read and
                            written, set the
                            <a class="link" href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a> system
                            variable to a specific directory. See
                            <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>.
                        </p><p style="color:blue;">要限制文件的读写位置，请将secure_file_priv系统变量设置为特定目录。见第5.1.7节“服务器系统变量”。</p></li><li class="listitem"><p><a name="priv_grant-option"></a>
                        <a class="link" href="security.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>
                    </p><p style="color:blue;">授予期权</p><a class="indexterm" name="idm140286889555232"></a><a class="indexterm" name="idm140286889553744"></a><p>
                        Enables you to grant to or revoke from other users those
                        privileges that you yourself possess.
                    </p><p style="color:blue;">使您能够向其他用户授予或从其他用户撤消您自己拥有的特权。</p></li><li class="listitem"><p><a name="priv_index"></a>
                        <a class="link" href="security.html#priv_index"><code class="literal">INDEX</code></a>
                    </p><p style="color:blue;">索引</p><a class="indexterm" name="idm140286889549744"></a><a class="indexterm" name="idm140286889548256"></a><p>
                        Enables use of statements that create or drop (remove)
                        indexes. <a class="link" href="security.html#priv_index"><code class="literal">INDEX</code></a> applies to
                        existing tables. If you have the
                        <a class="link" href="security.html#priv_create"><code class="literal">CREATE</code></a> privilege for a table,
                        you can include index definitions in the
                        <a class="link" href="sql-syntax.html#create-table" title="13.1.18&nbsp;CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement.
                    </p><p style="color:blue;">允许使用创建或删除（删除）索引的语句。索引应用于现有表。如果您具有表的CREATE权限，则可以在CREATE TABLE语句中包含索引定义。</p></li><li class="listitem"><p><a name="priv_insert"></a>
                        <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a>
                    </p><p style="color:blue;">插入</p><a class="indexterm" name="idm140286889540528"></a><a class="indexterm" name="idm140286889539040"></a><p>
                        Enables rows to be inserted into tables in a database.
                        <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> is also required for
                        the <a class="link" href="sql-syntax.html#analyze-table" title="13.7.2.1&nbsp;ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>,
                        <a class="link" href="sql-syntax.html#optimize-table" title="13.7.2.4&nbsp;OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>, and
                        <a class="link" href="sql-syntax.html#repair-table" title="13.7.2.5&nbsp;REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>
                        table-maintenance statements.
                    </p><p style="color:blue;">允许将行插入数据库中的表中。对于analyze表、optimize表和repair表维护语句，insert也是必需的。</p></li><li class="listitem"><p><a name="priv_lock-tables"></a>
                        <a class="link" href="security.html#priv_lock-tables"><code class="literal">LOCK TABLES</code></a>
                    </p><p style="color:blue;">锁定表</p><a class="indexterm" name="idm140286889530176"></a><a class="indexterm" name="idm140286889528688"></a><p>
                        Enables use of explicit <a class="link" href="sql-syntax.html#lock-tables" title="13.3.5&nbsp;LOCK TABLES and UNLOCK TABLES Syntax"><code class="literal">LOCK
                        TABLES</code></a> statements to lock tables for which you
                        have the <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privilege.
                        This includes use of write locks, which prevents other
                        sessions from reading the locked table.
                    </p><p style="color:blue;">启用显式lock tables语句来锁定您具有select权限的表。这包括使用写锁，防止其他会话读取锁定的表。</p></li><li class="listitem"><p><a name="priv_process"></a>
                        <a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a>
                    </p><p style="color:blue;">过程</p><a class="indexterm" name="idm140286889522144"></a><a class="indexterm" name="idm140286889520656"></a><p>
                        Enables display of information about the threads executing
                        within the server (that is, information about the statements
                        being executed by sessions). The privilege enables use of
                        <a class="link" href="sql-syntax.html#show-processlist" title="13.7.5.29&nbsp;SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> or
                        <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin processlist</strong></span></a> to see threads
                        belonging to other accounts; you can always see your own
                        threads. The <a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a>
                        privilege also enables use of <a class="link" href="sql-syntax.html#show-engine" title="13.7.5.15&nbsp;SHOW ENGINE Syntax"><code class="literal">SHOW
                        ENGINE</code></a>.
                    </p><p style="color:blue;">允许显示有关服务器内执行的线程的信息（即有关会话执行的语句的信息）。此特权允许使用show processlist或mysqladmin processlist查看属于其他帐户的线程；您始终可以看到自己的线程。进程特权还允许使用显示引擎。</p></li><li class="listitem"><p><a name="priv_proxy"></a>
                        <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a>
                    </p><p style="color:blue;">代理</p><a class="indexterm" name="idm140286889511504"></a><a class="indexterm" name="idm140286889510016"></a><p>
                        Enables one user to impersonate or become known as another
                        user. See <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                    </p><p style="color:blue;">允许一个用户模拟或成为另一个用户。见第6.2.14节“代理用户”。</p></li><li class="listitem"><p><a name="priv_references"></a>
                        <a class="link" href="security.html#priv_references"><code class="literal">REFERENCES</code></a>
                    </p><p style="color:blue;">参考文献</p><a class="indexterm" name="idm140286889505440"></a><a class="indexterm" name="idm140286889503952"></a><p>
                        Creation of a foreign key constraint requires the
                        <a class="link" href="security.html#priv_references"><code class="literal">REFERENCES</code></a> privilege for the
                        parent table.
                    </p><p style="color:blue;">创建外键约束需要父表的references特权。</p></li><li class="listitem"><p><a name="priv_reload"></a>
                        <a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a>
                    </p><p style="color:blue;">重新加载</p><a class="indexterm" name="idm140286889498800"></a><a class="indexterm" name="idm140286889497312"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#flush" title="13.7.6.3&nbsp;FLUSH Syntax"><code class="literal">FLUSH</code></a>
                        statement. It also enables <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a>
                        commands that are equivalent to
                        <a class="link" href="sql-syntax.html#flush" title="13.7.6.3&nbsp;FLUSH Syntax"><code class="literal">FLUSH</code></a> operations:
                        <code class="literal">flush-hosts</code>,
                        <code class="literal">flush-logs</code>,
                        <code class="literal">flush-privileges</code>,
                        <code class="literal">flush-status</code>,
                        <code class="literal">flush-tables</code>,
                        <code class="literal">flush-threads</code>,
                        <code class="literal">refresh</code>, and <code class="literal">reload</code>.
                    </p><p style="color:blue;">启用flush语句的使用。它还启用与刷新操作等效的mysqladmin命令：刷新主机、刷新日志、刷新权限、刷新状态、刷新表、刷新线程、刷新和重新加载。</p><p>
                        The <code class="literal">reload</code> command tells the server to
                        reload the grant tables into memory.
                        <code class="literal">flush-privileges</code> is a synonym for
                        <code class="literal">reload</code>. The <code class="literal">refresh</code>
                        command closes and reopens the log files and flushes all
                        tables. The other
                        <code class="literal">flush-<em class="replaceable"><code>xxx</code></em></code>
                        commands perform functions similar to
                        <code class="literal">refresh</code>, but are more specific and may be
                        preferable in some instances. For example, if you want to
                        flush just the log files, <code class="literal">flush-logs</code> is a
                        better choice than <code class="literal">refresh</code>.
                    </p><p style="color:blue;">reload命令告诉服务器将授权表重新加载到内存中。刷新权限是重新加载的同义词。refresh命令关闭并重新打开日志文件并刷新所有表。其他flush xxx命令执行类似于refresh的功能，但更具体，在某些情况下可能更可取。例如，如果只想刷新日志文件，则刷新日志比刷新日志更好。</p><p>
                        The <a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a> privilege also
                        enables use of the <a class="link" href="sql-syntax.html#reset-master" title="13.4.1.2&nbsp;RESET MASTER Syntax"><code class="literal">RESET
                        MASTER</code></a> and <a class="link" href="sql-syntax.html#reset-slave" title="13.4.2.4&nbsp;RESET SLAVE Syntax"><code class="literal">RESET
                        SLAVE</code></a> statements.
                    </p><p style="color:blue;">reload权限还允许使用reset master和reset slave语句。</p></li><li class="listitem"><p><a name="priv_replication-client"></a>
                        <a class="link" href="security.html#priv_replication-client"><code class="literal">REPLICATION CLIENT</code></a>
                    </p><p style="color:blue;">复制客户端</p><a class="indexterm" name="idm140286889472768"></a><a class="indexterm" name="idm140286889471280"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#show-master-status" title="13.7.5.23&nbsp;SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER
                        STATUS</code></a>, <a class="link" href="sql-syntax.html#show-slave-status" title="13.7.5.34&nbsp;SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE
                        STATUS</code></a>, and <a class="link" href="sql-syntax.html#show-binary-logs" title="13.7.5.1&nbsp;SHOW BINARY LOGS Syntax"><code class="literal">SHOW BINARY
                        LOGS</code></a> statements. Grant this privilege to accounts
                        that are used by slave servers to connect to the current
                        server as their master.
                    </p><p style="color:blue;">允许使用show master status、show slave status和show binary logs语句。将此权限授予从属服务器用来连接到当前服务器作为其主服务器的帐户。</p></li><li class="listitem"><p><a name="priv_replication-slave"></a>
                        <a class="link" href="security.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a>
                    </p><p style="color:blue;">复制从机</p><a class="indexterm" name="idm140286889463328"></a><a class="indexterm" name="idm140286889461840"></a><p>
                        Enables the account to request updates that have been made
                        to databases on the master server, using the
                        <a class="link" href="sql-syntax.html#show-slave-hosts" title="13.7.5.33&nbsp;SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a>,
                        <a class="link" href="sql-syntax.html#show-relaylog-events" title="13.7.5.32&nbsp;SHOW RELAYLOG EVENTS Syntax"><code class="literal">SHOW RELAYLOG EVENTS</code></a>, and
                        <a class="link" href="sql-syntax.html#show-binlog-events" title="13.7.5.2&nbsp;SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a>
                        statements. This privilege is also required to use the
                        <a class="link" href="programs.html#mysqlbinlog" title="4.6.7&nbsp;mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a> options
                        <a class="link" href="programs.html#option_mysqlbinlog_read-from-remote-server"><code class="option">--read-from-remote-server</code></a>
                        (<code class="option">-R</code>) and
                        <a class="link" href="programs.html#option_mysqlbinlog_read-from-remote-master"><code class="option">--read-from-remote-master</code></a>.
                        Grant this privilege to accounts that are used by slave
                        servers to connect to the current server as their master.
                    </p><p style="color:blue;">允许帐户使用show slave hosts、show relaylog events和show binlog events语句请求对主服务器上的数据库进行的更新。使用mysqlbinlog选项——从远程服务器读取（-r）和——从远程主机读取，也需要此权限。将此权限授予从属服务器用来连接到当前服务器作为其主服务器的帐户。</p></li><li class="listitem"><p><a name="priv_select"></a>
                        <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a>
                    </p><p style="color:blue;">选择</p><a class="indexterm" name="idm140286889449888"></a><a class="indexterm" name="idm140286889448400"></a><p>
                        Enables rows to be selected from tables in a database.
                        <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> statements require the
                        <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privilege only if they
                        actually access tables. Some
                        <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> statements do not
                        access tables and can be executed without permission for any
                        database. For example, you can use
                        <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> as a simple calculator
                        to evaluate expressions that make no reference to tables:
                    </p><p style="color:blue;">允许从数据库中的表中选择行。只有在select语句实际访问表时，它们才需要select特权。有些select语句不访问表，可以在没有任何数据库权限的情况下执行。例如，可以使用select作为一个简单的计算器来计算不引用表的表达式：</p><pre data-lang="sql" class="programlisting">SELECT 1+1;
SELECT PI()*2;
</pre><p>
                        The <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privilege is also
                        needed for other statements that read column values. For
                        example, <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> is needed for
                        columns referenced on the right hand side of
                        <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
                        assignment in <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>
                        statements or for columns named in the
                        <code class="literal">WHERE</code> clause of
                        <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> or
                        <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
                    </p><p style="color:blue;">读取列值的其他语句也需要select特权。例如，对于update语句中col_name=expr赋值右侧引用的列或delete或update语句的where子句中命名的列，需要选择。</p><p>
                        The <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privilege is
                        needed for tables or views used with
                        <a class="link" href="sql-syntax.html#explain" title="13.8.2&nbsp;EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>, including any
                        underlying tables in view definitions.
                    </p><p style="color:blue;">explain使用的表或视图（包括视图定义中的任何基础表）需要select特权。</p></li><li class="listitem"><p><a name="priv_show-databases"></a>
                        <a class="link" href="security.html#priv_show-databases"><code class="literal">SHOW DATABASES</code></a>
                    </p><p style="color:blue;">显示数据库</p><a class="indexterm" name="idm140286889426944"></a><a class="indexterm" name="idm140286889425456"></a><p>
                        Enables the account to see database names by issuing the
                        <code class="literal">SHOW DATABASE</code> statement. Accounts that do
                        not have this privilege see only databases for which they
                        have some privileges, and cannot use the statement at all if
                        the server was started with the
                        <a class="link" href="server-administration.html#option_mysqld_skip-show-database"><code class="option">--skip-show-database</code></a> option.
                    </p><p style="color:blue;">通过发出show database语句，使帐户能够查看数据库名称。没有此权限的帐户只查看具有某些权限的数据库，如果服务器是使用--skip show database选项启动的，则根本无法使用该语句。</p>
                        <div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Caution
                            </div>
                            <p>
                                Because a global privilege is considered a privilege for
                                all databases, <span class="emphasis"><em>any</em></span> global privilege
                                enables a user to see all database names with
                                <a class="link" href="sql-syntax.html#show-databases" title="13.7.5.14&nbsp;SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a> or by
                                examining the <code class="literal">INFORMATION_SCHEMA</code>
                                <a class="link" href="information-schema.html#schemata-table" title="24.22&nbsp;The INFORMATION_SCHEMA SCHEMATA Table"><code class="literal">SCHEMATA</code></a> table.
                            </p><p style="color:blue;">由于全局权限被视为所有数据库的权限，因此任何全局权限都允许用户查看所有带有show databases的数据库名，或通过检查information_schema schemata表查看所有数据库名。</p>
                        </div>
                    </li><li class="listitem"><p><a name="priv_show-view"></a>
                        <a class="link" href="security.html#priv_show-view"><code class="literal">SHOW VIEW</code></a>
                    </p><p style="color:blue;">显示视图</p><a class="indexterm" name="idm140286889415024"></a><a class="indexterm" name="idm140286889413536"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#show-create-view" title="13.7.5.13&nbsp;SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE
                        VIEW</code></a> statement. This privilege is also needed for
                        views used with <a class="link" href="sql-syntax.html#explain" title="13.8.2&nbsp;EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>.
                    </p><p style="color:blue;">允许使用show create view语句。与explain一起使用的视图也需要此特权。</p></li><li class="listitem"><p><a name="priv_shutdown"></a>
                        <a class="link" href="security.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a>
                    </p><p style="color:blue;">关闭</p><a class="indexterm" name="idm140286889406976"></a><a class="indexterm" name="idm140286889405488"></a><p>
                        Enables use of the <a class="link" href="sql-syntax.html#shutdown" title="13.7.6.7&nbsp;SHUTDOWN Syntax"><code class="literal">SHUTDOWN</code></a>
                        statement, the <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin shutdown</strong></span></a>
                        command, and the
                        <a class="link" href="connectors-apis.html#mysql-shutdown" title="27.8.7.71&nbsp;mysql_shutdown()"><code class="literal">mysql_shutdown()</code></a> C API
                        function.
                    </p><p style="color:blue;">启用shutdown语句、mysqladmin shutdown命令和mysql_shutdown（）c api函数。</p></li><li class="listitem"><p><a name="priv_super"></a>
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
                    </p><p style="color:blue;">超级的</p><a class="indexterm" name="idm140286889397648"></a><a class="indexterm" name="idm140286889396160"></a><p>
                        Affects the following operations and server behaviors:
                    </p><p style="color:blue;">影响以下操作和服务器行为：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Enables server configuration changes by modifying global
                                system variables. For some system variables, setting the
                                session value also requires the
                                <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege. If a
                                system variable is restricted and requires a special
                                privilege to set the session value, the variable
                                description indicates that restriction. Examples include
                                <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>,
                                <a class="link" href="replication.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a>, and
                                <a class="link" href="server-administration.html#sysvar_sql_log_off"><code class="literal">sql_log_off</code></a>. See also
                                <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.8.1&nbsp;System Variable Privileges">Section&nbsp;5.1.8.1, “System Variable Privileges”</a>.
                            </p><p style="color:blue;">通过修改全局系统变量启用服务器配置更改。对于某些系统变量，设置会话值还需要超级权限。如果系统变量受到限制，并且需要特殊权限来设置会话值，则变量说明将指示该限制。例如bin log_格式、sql_log_bin和sql_log_off。另请参见第5.1.8.1节“系统变量特权”。</p></li><li class="listitem"><p>
                                Enables changes to global transaction characteristics
                                (see <a class="xref" href="sql-syntax.html#set-transaction" title="13.3.6&nbsp;SET TRANSACTION Syntax">Section&nbsp;13.3.6, “SET TRANSACTION Syntax”</a>).
                            </p><p style="color:blue;">启用对全局事务特性的更改（请参阅第13.3.6节“设置事务语法”）。</p></li><li class="listitem"><p>
                                Enables the account to start and stop replication,
                                including Group Replication.
                            </p><p style="color:blue;">使帐户能够启动和停止复制，包括组复制。</p></li><li class="listitem"><p>
                                Enables use of the <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1&nbsp;CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
                                TO</code></a> and <a class="link" href="sql-syntax.html#change-replication-filter" title="13.4.2.2&nbsp;CHANGE REPLICATION FILTER Syntax"><code class="literal">CHANGE REPLICATION
                                FILTER</code></a> statements.
                            </p><p style="color:blue;">启用对和更改复制筛选器语句的更改主机。</p></li><li class="listitem"><p>
                                Enables binary log control by means of the
                                <a class="link" href="sql-syntax.html#purge-binary-logs" title="13.4.1.1&nbsp;PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY LOGS</code></a> and
                                <a class="link" href="sql-syntax.html#binlog" title="13.7.6.1&nbsp;BINLOG Syntax"><code class="literal">BINLOG</code></a> statements.
                            </p><p style="color:blue;">通过清除二进制日志和binlog语句启用二进制日志控制。</p></li><li class="listitem"><p>
                                Enables setting the effective authorization ID when
                                executing a view or stored program. A user with this
                                privilege can specify any account in the
                                <code class="literal">DEFINER</code> attribute of a view or stored
                                program.
                            </p><p style="color:blue;">允许在执行视图或存储程序时设置有效的授权ID。具有此权限的用户可以在视图或存储程序的definer属性中指定任何帐户。</p></li><li class="listitem"><p>
                                Enables use of the <a class="link" href="sql-syntax.html#create-server" title="13.1.17&nbsp;CREATE SERVER Syntax"><code class="literal">CREATE
                                SERVER</code></a>, <a class="link" href="sql-syntax.html#alter-server" title="13.1.7&nbsp;ALTER SERVER Syntax"><code class="literal">ALTER
                                SERVER</code></a>, and <a class="link" href="sql-syntax.html#drop-server" title="13.1.28&nbsp;DROP SERVER Syntax"><code class="literal">DROP
                                SERVER</code></a> statements.
                            </p><p style="color:blue;">启用create server、alter server和drop server语句的使用。</p></li><li class="listitem"><p>
                                Enables use of the <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin debug</strong></span></a>
                                command.
                            </p><p style="color:blue;">启用mysqladmin调试命令的使用。</p></li><li class="listitem"><p>
                                Enables <code class="literal">InnoDB</code> encryption key
                                rotation.
                            </p><p style="color:blue;">启用InnoDB加密密钥旋转。</p></li><li class="listitem"><p>
                                Enables reading the DES key file by the
                                <a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a> function.
                            </p><p style="color:blue;">启用des_encrypt（）函数读取des密钥文件。</p></li><li class="listitem"><p>
                                Enables execution of Version Tokens user-defined
                                functions.
                            </p><p style="color:blue;">启用版本令牌用户定义函数的执行。</p></li><li class="listitem"><p>
                                Enables control over client connections not permitted to
                                non-<a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> accounts:
                            </p><p style="color:blue;">启用对不允许连接到非超级帐户的客户端连接的控制：</p>
                                <div class="itemizedlist">
                                    <ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                                        Enables use of the
                                        <a class="link" href="sql-syntax.html#kill" title="13.7.6.4&nbsp;KILL Syntax"><code class="literal">KILL</code></a> statement or
                                        <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin kill</strong></span></a> command to kill
                                        threads belonging to other accounts. (An account can
                                        always kill its own threads.)
                                    </p><p style="color:blue;">启用kill语句或mysqladmin kill命令来终止属于其他帐户的线程。（帐户总是可以杀死自己的线程。）</p></li><li class="listitem"><p>
                                        The server does not execute
                                        <a class="link" href="server-administration.html#sysvar_init_connect"><code class="literal">init_connect</code></a> system
                                        variable content when
                                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> clients
                                        connect.
                                    </p><p style="color:blue;">超级客户端连接时，服务器不执行init_connect系统变量内容。</p></li><li class="listitem"><p>
                                        The server accepts one connection from a
                                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> client even if
                                        the connection limit configured by the
                                        <a class="link" href="server-administration.html#sysvar_max_connections"><code class="literal">max_connections</code></a>
                                        system variable is reached.
                                    </p><p style="color:blue;">服务器接受来自超级客户端的一个连接，即使已达到由max_connections系统变量配置的连接限制。</p></li><li class="listitem"><p>
                                        A server in offline mode
                                        (<a class="link" href="server-administration.html#sysvar_offline_mode"><code class="literal">offline_mode</code></a>
                                        enabled) does not terminate
                                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> client
                                        connections at the next client request, and accepts
                                        new connections from
                                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> clients.
                                    </p><p style="color:blue;">处于脱机模式（启用脱机模式）的服务器不会在下一个客户端请求时终止超级客户端连接，并接受来自超级客户端的新连接。</p></li><li class="listitem"><p>
                                        Updates can be performed even when the
                                        <a class="link" href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a> system
                                        variable is enabled. This applies to explicit table
                                        updates, and to use of account-management statements
                                        such as <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> and
                                        <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> that update
                                        tables implicitly.
                                    </p><p style="color:blue;">即使启用了只读系统变量，也可以执行更新。这适用于显式表更新，以及隐式使用诸如GRANT和REVOKE之类的帐户管理语句来更新表。</p></li></ul>
                                </div>
                            </li></ul>
                        </div>
                        <p>
                            You may also need the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
                            privilege to create or alter stored functions if binary
                            logging is enabled, as described in
                            <a class="xref" href="stored-objects.html#stored-programs-logging" title="23.7&nbsp;Stored Program Binary Logging">Section&nbsp;23.7, “Stored Program Binary Logging”</a>.
                        </p><p style="color:blue;">如果启用了二进制日志记录，您可能还需要超级权限来创建或更改存储函数，如23.7节“存储程序二进制日志记录”中所述。</p></li><li class="listitem"><p><a name="priv_trigger"></a>
                        <a class="link" href="security.html#priv_trigger"><code class="literal">TRIGGER</code></a>
                    </p><p style="color:blue;">触发</p><a class="indexterm" name="idm140286889337568"></a><a class="indexterm" name="idm140286889336080"></a><p>
                        Enables trigger operations. You must have this privilege for
                        a table to create, drop, execute, or display triggers for
                        that table.
                    </p><p style="color:blue;">启用触发器操作。您必须具有此权限，表才能创建、删除、执行或显示该表的触发器。</p><p>
                        When a trigger is activated (by a user who has privileges to
                        execute <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                        <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
                        <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> statements for the
                        table associated with the trigger), trigger execution
                        requires that the user who defined the trigger still have
                        the <a class="link" href="security.html#priv_trigger"><code class="literal">TRIGGER</code></a> privilege for the
                        table.
                    </p><p style="color:blue;">当触发器被激活时（由有权为与触发器相关联的表执行INSERT、UPDATE或DELETE语句的用户执行），触发器执行要求定义触发器的用户仍具有该表的触发器权限。</p></li><li class="listitem"><p><a name="priv_update"></a>
                        <a class="link" href="security.html#priv_update"><code class="literal">UPDATE</code></a>
                    </p><p style="color:blue;">更新</p><a class="indexterm" name="idm140286889326416"></a><a class="indexterm" name="idm140286889324928"></a><p>
                        Enables rows to be updated in tables in a database.
                    </p><p style="color:blue;">允许在数据库的表中更新行。</p></li><li class="listitem"><p><a name="priv_usage"></a>
                        <a class="link" href="security.html#priv_usage"><code class="literal">USAGE</code></a>
                    </p><p style="color:blue;">用法</p><a class="indexterm" name="idm140286889321040"></a><a class="indexterm" name="idm140286889319552"></a><p>
                        This privilege specifier stands for <span class="quote">“<span class="quote">no
            privileges.</span>”</span> It is used at the global level with
                        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> to modify account
                        attributes such as resource limits or SSL characteristics
                        without naming specific account privileges in the privilege
                        list. <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> displays
                        <a class="link" href="security.html#priv_usage"><code class="literal">USAGE</code></a> to indicate that an
                        account has no privileges at a privilege level.
                    </p><p style="color:blue;">此权限说明符代表“无权限”。它在全局级别上与GRANT一起使用，用于修改帐户属性，如资源限制或SSL特征，而不在权限列表中命名特定的帐户权限。show grants显示用于指示帐户在权限级别上没有权限的用法。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="privileges-provided-guidelines"></a>Privilege-Granting Guidelines</h4>

                        </div>

                    </div>

                </div>
                <p>
                    It is a good idea to grant to an account only those privileges
                    that it needs. You should exercise particular caution in
                    granting the <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> and
                    administrative privileges:
                </p><p style="color:blue;">只授予帐户所需的特权是一个好主意。您在授予文件和管理权限时应特别小心：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> can be abused to read
                        into a database table any files that the MySQL server can
                        read on the server host. This includes all world-readable
                        files and files in the server's data directory. The table
                        can then be accessed using
                        <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> to transfer its
                        contents to the client host.
                    </p><p style="color:blue;">文件可能会被滥用，以便将mysql服务器可以在服务器主机上读取的任何文件读入数据库表。这包括服务器数据目录中的所有世界可读文件和文件。然后可以使用select将表的内容传输到客户机主机来访问该表。</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a> enables users to
                        give their privileges to other users. Two users that have
                        different privileges and with the <a class="link" href="security.html#priv_grant-option"><code class="literal">GRANT
                        OPTION</code></a> privilege are able to combine privileges.
                    </p><p style="color:blue;">grant选项允许用户将其权限授予其他用户。两个具有不同权限且具有“授予选项”权限的用户可以组合权限。</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#priv_alter"><code class="literal">ALTER</code></a> may be used to subvert
                        the privilege system by renaming tables.
                    </p><p style="color:blue;">alter可用于通过重命名表来破坏特权系统。</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a> can be abused to
                        deny service to other users entirely by terminating the
                        server.
                    </p><p style="color:blue;">关闭可被滥用，通过终止服务器来完全拒绝向其他用户提供服务。</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a> can be used to view
                        the plain text of currently executing statements, including
                        statements that set or change passwords.
                    </p><p style="color:blue;">进程可用于查看当前执行语句的纯文本，包括设置或更改密码的语句。</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> can be used to
                        terminate other sessions or change how the server operates.
                    </p><p style="color:blue;">super可用于终止其他会话或更改服务器的操作方式。</p></li><li class="listitem"><p>
                        Privileges granted for the <code class="literal">mysql</code> system
                        database itself can be used to change passwords and other
                        access privilege information:
                    </p><p style="color:blue;">授予mysql系统数据库本身的权限可用于更改密码和其他访问权限信息：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Passwords are stored encrypted, so a malicious user
                                cannot simply read them to know the plain text password.
                                However, a user with write access to the
                                <code class="literal">mysql.user</code> system table
                                <code class="literal">authentication_string</code> column can
                                change an account's password, and then connect to the
                                MySQL server using that account.
                            </p><p style="color:blue;">密码是加密存储的，因此恶意用户不能简单地通过读取密码来知道明文密码。但是，对mysql.user system table authentication_string列具有写访问权限的用户可以更改帐户的密码，然后使用该帐户连接到mysql服务器。</p></li><li class="listitem"><p>
                                <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> or
                                <a class="link" href="security.html#priv_update"><code class="literal">UPDATE</code></a> granted for the
                                <code class="literal">mysql</code> system database enable a user
                                to add privileges or modify existing privileges,
                                respectively.
                            </p><p style="color:blue;">对MySQL系统数据库的插入或更新允许用户分别添加特权或修改现有特权。</p></li><li class="listitem"><p>
                                <a class="link" href="security.html#priv_drop"><code class="literal">DROP</code></a> for the
                                <code class="literal">mysql</code> system database enables a user
                                to remote privilege tables, or even the database itself.
                            </p><p style="color:blue;">drop for the mysql系统数据库允许用户远程访问特权表，甚至数据库本身。</p></li></ul>
                        </div>
                    </li></ul>
                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="grant-tables"></a>6.2.3&nbsp;Grant Tables</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286889281744"></a><a class="indexterm" name="idm140286889280256"></a><p>
            The <code class="literal">mysql</code> system database includes several
            grant tables that contain information about user accounts and the
            privileges held by them. This section describes those tables. For
            information about other tables in the system database, see
            <a class="xref" href="server-administration.html#system-schema" title="5.3&nbsp;The mysql System Database">Section&nbsp;5.3, “The mysql System Database”</a>.
        </p><p style="color:blue;">mysql系统数据库包括几个grant表，其中包含有关用户帐户及其所拥有的权限的信息。本节介绍这些表。有关系统数据库中其他表的信息，请参阅5.3节“mysql系统数据库”。</p><p>
            The discussion here describes the underlying structure of the
            grant tables and how the server uses their contents when
            interacting with clients. However, normally you do not modify the
            grant tables directly. Modifications occur indirectly when you use
            account-management statements such as <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
            USER</code></a>, <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, and
            <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> to set up accounts and
            control the privileges available to each one. See
            <a class="xref" href="sql-syntax.html#account-management-sql" title="13.7.1&nbsp;Account Management Statements">Section&nbsp;13.7.1, “Account Management Statements”</a>. When you use such
            statements to perform account manipulations, the server modifies
            the grant tables on your behalf.
        </p><p style="color:blue;">这里的讨论描述了授权表的底层结构，以及服务器在与客户机交互时如何使用它们的内容。但是，通常不会直接修改授权表。当您使用诸如CREATEUSER、GRANT和REVOKE等帐户管理语句来设置帐户并控制每个帐户可用的权限时，会间接发生修改。见第13.7.1节“账户管理报表”。当您使用此类语句执行帐户操作时，服务器将代表您修改授权表。</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    Direct modification of grant tables using statements such as
                    <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                    <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
                    <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> is discouraged and done at
                    your own risk. The server is free to ignore rows that become
                    malformed as a result of such modifications.
                </p><p style="color:blue;">不鼓励使用INSERT、UPDATE或DELETE等语句直接修改GRANT表，并自行承担风险。服务器可以忽略由于此类修改而变得格式不正确的行。</p><p>
                As of MySQL 5.7.18, for any operation that modifies a grant
                table, the server checks whether the table has the expected
                structure and produces an error if not. To update the tables to
                the expected structure, perform the MySQL upgrade procedure. See
                <a class="xref" href="installing.html#upgrading" title="2.11&nbsp;Upgrading MySQL">Section&nbsp;2.11, “Upgrading MySQL”</a>.
            </p><p style="color:blue;">从mysql 5.7.18开始，对于任何修改授权表的操作，服务器都会检查该表是否具有预期的结构，如果没有，则会产生错误。要将表更新为预期的结构，请执行mysql升级过程。参见2.11节“升级mysql”。</p>
            </div>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#grant-tables-overview" title="Grant Table Overview">Grant Table Overview</a></p><p style="color:blue;">授权表概述</p></li><li class="listitem"><p><a class="xref" href="security.html#grant-tables-user-db" title="The user and db Grant Tables">The user and db Grant Tables</a></p><p style="color:blue;">user和db grant表</p></li><li class="listitem"><p><a class="xref" href="security.html#grant-tables-tables-priv-columns-priv" title="The tables_priv and columns_priv Grant Tables">The tables_priv and columns_priv Grant Tables</a></p><p style="color:blue;">tables_priv和columns_priv grant表</p></li><li class="listitem"><p><a class="xref" href="security.html#grant-tables-procs-priv" title="The procs_priv Grant Table">The procs_priv Grant Table</a></p><p style="color:blue;">procs_priv grant表</p></li><li class="listitem"><p><a class="xref" href="security.html#grant-tables-proxies-priv" title="The proxies_priv Grant Table">The proxies_priv Grant Table</a></p><p style="color:blue;">PROXIESSPIPV授权表</p></li><li class="listitem"><p><a class="xref" href="security.html#grant-tables-scope-column-properties" title="Grant Table Scope Column Properties">Grant Table Scope Column Properties</a></p><p style="color:blue;">授予表作用域列属性</p></li><li class="listitem"><p><a class="xref" href="security.html#grant-tables-privilege-column-properties" title="Grant Table Privilege Column Properties">Grant Table Privilege Column Properties</a></p><p style="color:blue;">授予表特权列属性</p></li></ul>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-overview"></a>Grant Table Overview</h4>

                        </div>

                    </div>

                </div>
                <p>
                    These <code class="literal">mysql</code> database tables contain grant
                    information:
                </p><p style="color:blue;">这些mysql数据库表包含授权信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="security.html#grant-tables-user-db" title="The user and db Grant Tables"><code class="literal">user</code></a>:
                        User accounts, global privileges, and other nonprivilege
                        columns.
                    </p><p style="color:blue;">用户：用户帐户、全局特权和其他非特权列。</p><a class="indexterm" name="idm140286889253120"></a><a class="indexterm" name="idm140286889251632"></a><a class="indexterm" name="idm140286889250144"></a></li><li class="listitem"><p>
                        <a class="link" href="security.html#grant-tables-user-db" title="The user and db Grant Tables"><code class="literal">db</code></a>:
                        Database-level privileges.
                    </p><p style="color:blue;">数据库级权限。</p><a class="indexterm" name="idm140286889246656"></a><a class="indexterm" name="idm140286889245168"></a><a class="indexterm" name="idm140286889243680"></a></li><li class="listitem"><p>
                        <a class="link" href="security.html#grant-tables-tables-priv-columns-priv" title="The tables_priv and columns_priv Grant Tables"><code class="literal">tables_priv</code></a>:
                        Table-level privileges.
                    </p><p style="color:blue;">tables_priv:表级权限。</p><a class="indexterm" name="idm140286889240080"></a><a class="indexterm" name="idm140286889238592"></a><a class="indexterm" name="idm140286889237104"></a></li><li class="listitem"><p>
                        <a class="link" href="security.html#grant-tables-tables-priv-columns-priv" title="The tables_priv and columns_priv Grant Tables"><code class="literal">columns_priv</code></a>:
                        Column-level privileges.
                    </p><p style="color:blue;">列特权：列级特权。</p><a class="indexterm" name="idm140286889233552"></a><a class="indexterm" name="idm140286889232064"></a><a class="indexterm" name="idm140286889230576"></a></li><li class="listitem"><p>
                        <a class="link" href="security.html#grant-tables-procs-priv" title="The procs_priv Grant Table"><code class="literal">procs_priv</code></a>:
                        Stored procedure and function privileges.
                    </p><p style="color:blue;">procs_priv：存储过程和函数特权。</p><a class="indexterm" name="idm140286889227088"></a><a class="indexterm" name="idm140286889225600"></a><a class="indexterm" name="idm140286889224112"></a></li><li class="listitem"><p>
                        <a class="link" href="security.html#grant-tables-proxies-priv" title="The proxies_priv Grant Table"><code class="literal">proxies_priv</code></a>:
                        Proxy-user privileges.
                    </p><p style="color:blue;">PROXIESSIPRIV：代理用户权限。</p><a class="indexterm" name="idm140286889220512"></a><a class="indexterm" name="idm140286889219024"></a><a class="indexterm" name="idm140286889217536"></a></li></ul>
                </div>
                <p>
                    Each grant table contains scope columns and privilege columns:
                </p><p style="color:blue;">每个授权表都包含作用域列和特权列：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Scope columns determine the scope of each row in the tables;
                        that is, the context in which the row applies. For example,
                        a <code class="literal">user</code> table row with
                        <code class="literal">Host</code> and <code class="literal">User</code> values
                        of <code class="literal">'h1.example.net'</code> and
                        <code class="literal">'bob'</code> applies to authenticating
                        connections made to the server from the host
                        <code class="literal">h1.example.net</code> by a client that specifies
                        a user name of <code class="literal">bob</code>. Similarly, a
                        <code class="literal">db</code> table row with
                        <code class="literal">Host</code>, <code class="literal">User</code>, and
                        <code class="literal">Db</code> column values of
                        <code class="literal">'h1.example.net'</code>,
                        <code class="literal">'bob'</code> and <code class="literal">'reports'</code>
                        applies when <code class="literal">bob</code> connects from the host
                        <code class="literal">h1.example.net</code> to access the
                        <code class="literal">reports</code> database. The
                        <code class="literal">tables_priv</code> and
                        <code class="literal">columns_priv</code> tables contain scope columns
                        indicating tables or table/column combinations to which each
                        row applies. The <code class="literal">procs_priv</code> scope columns
                        indicate the stored routine to which each row applies.
                    </p><p style="color:blue;">作用域列确定表中每一行的作用域，即该行所应用的上下文。例如，具有主机和用户值“h1.example.net”和“bob”的用户表行应用于验证客户端从主机h1.example.net到服务器的连接，该客户端指定了bob的用户名。类似地，当bob从主机h1.example.net连接以访问报表数据库时，将应用具有主机、用户和db列值“h1.example.net”、“bob”和“reports”的db表行。tables_priv和columns_priv表包含范围列，指示每行应用的表或表/列组合。procs_priv scope列指示每行应用的存储例程。</p></li><li class="listitem"><p>
                        Privilege columns indicate which privileges a table row
                        grants; that is, which operations it permits to be
                        performed. The server combines the information in the
                        various grant tables to form a complete description of a
                        user's privileges. <a class="xref" href="security.html#request-access" title="6.2.6&nbsp;Access Control, Stage 2: Request Verification">Section&nbsp;6.2.6, “Access Control, Stage 2: Request Verification”</a>,
                        describes the rules for this.
                    </p><p style="color:blue;">特权列指示表行授予哪些特权，即允许执行哪些操作。服务器将各种授权表中的信息组合起来，形成用户权限的完整描述。第6.2.6节，“访问控制，第2阶段：请求验证”描述了相关规则。</p></li></ul>
                </div>
                <p>
                    In addition, a grant table may contain columns used for purposes
                    other than scope or privilege assessment.
                </p><p style="color:blue;">此外，授权表可以包含用于范围或权限评估以外的其他目的的列。</p><p>
                The server uses the grant tables in the following manner:
            </p><p style="color:blue;">服务器按以下方式使用授权表：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The <code class="literal">user</code> table scope columns determine
                        whether to reject or permit incoming connections. For
                        permitted connections, any privileges granted in the
                        <code class="literal">user</code> table indicate the user's global
                        privileges. Any privileges granted in this table apply to
                        <span class="emphasis"><em>all</em></span> databases on the server.
                    </p><p style="color:blue;">用户表作用域列确定是拒绝还是允许传入连接。对于允许的连接，用户表中授予的任何权限都表示用户的全局权限。此表中授予的任何权限都适用于服务器上的所有数据库。</p>
                        <div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Caution
                            </div>
                            <p>
                                Because a global privilege is considered a privilege for
                                all databases, <span class="emphasis"><em>any</em></span> global privilege
                                enables a user to see all database names with
                                <a class="link" href="sql-syntax.html#show-databases" title="13.7.5.14&nbsp;SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a> or by
                                examining the <code class="literal">INFORMATION_SCHEMA</code>
                                <a class="link" href="information-schema.html#schemata-table" title="24.22&nbsp;The INFORMATION_SCHEMA SCHEMATA Table"><code class="literal">SCHEMATA</code></a> table.
                            </p><p style="color:blue;">由于全局权限被视为所有数据库的权限，因此任何全局权限都允许用户查看所有带有show databases的数据库名，或通过检查information_schema schemata表查看所有数据库名。</p>
                        </div>
                    </li><li class="listitem"><p>
                        The <code class="literal">db</code> table scope columns determine
                        which users can access which databases from which hosts. The
                        privilege columns determine the permitted operations. A
                        privilege granted at the database level applies to the
                        database and to all objects in the database, such as tables
                        and stored programs.
                    </p><p style="color:blue;">db table scope列确定哪些用户可以从哪些主机访问哪些数据库。特权列决定允许的操作。在数据库级别授予的特权适用于数据库和数据库中的所有对象，如表和存储程序。</p></li><li class="listitem"><p>
                        The <code class="literal">tables_priv</code> and
                        <code class="literal">columns_priv</code> tables are similar to the
                        <code class="literal">db</code> table, but are more fine-grained: They
                        apply at the table and column levels rather than at the
                        database level. A privilege granted at the table level
                        applies to the table and to all its columns. A privilege
                        granted at the column level applies only to a specific
                        column.
                    </p><p style="color:blue;">tables_priv和columns_priv表与db表类似，但更细粒度：它们应用于表和列级别，而不是数据库级别。在表级别授予的特权适用于表及其所有列。在列级别授予的特权仅适用于特定列。</p></li><li class="listitem"><p>
                        The <code class="literal">procs_priv</code> table applies to stored
                        routines (stored procedures and functions). A privilege
                        granted at the routine level applies only to a single
                        procedure or function.
                    </p><p style="color:blue;">procs_priv表适用于存储例程（存储过程和函数）。在例程级别授予的特权仅适用于单个过程或函数。</p></li><li class="listitem"><p>
                        The <code class="literal">proxies_priv</code> table indicates which
                        users can act as proxies for other users and whether a user
                        can grant the <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege
                        to other users.
                    </p><p style="color:blue;">PROXIESS-PRIV表指示哪些用户可以充当其他用户的代理，以及用户是否可以将代理权限授予其他用户。</p></li></ul>
                </div>
                <p>
                    The server reads the contents of the grant tables into memory
                    when it starts. You can tell it to reload the tables by issuing
                    a <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH PRIVILEGES</code></a> statement or
                    executing a <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin flush-privileges</strong></span></a> or
                    <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin reload</strong></span></a> command. Changes to the
                    grant tables take effect as indicated in
                    <a class="xref" href="security.html#privilege-changes" title="6.2.9&nbsp;When Privilege Changes Take Effect">Section&nbsp;6.2.9, “When Privilege Changes Take Effect”</a>.
                </p><p style="color:blue;">服务器在启动时将授权表的内容读入内存。您可以告诉它通过发出flush privileges语句或执行mysqladmin flush privileges或mysqladmin reload命令来重新加载表。如第6.2.9节“特权更改生效时”所示，对授权表的更改生效。</p><p>
                When you modify an account, it is a good idea to verify that
                your changes have the intended effect. To check the privileges
                for a given account, use the <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW
                GRANTS</code></a> statement. For example, to determine the
                privileges that are granted to an account with user name and
                host name values of <code class="literal">bob</code> and
                <code class="literal">pc84.example.com</code>, use this statement:
            </p><p style="color:blue;">修改帐户时，最好验证更改是否具有预期效果。要检查给定帐户的权限，请使用show grants语句。例如，要确定授予用户名和主机名值为bob和pc84.example.com的帐户的权限，请使用以下语句：</p><pre data-lang="sql" class="programlisting">SHOW GRANTS FOR 'bob'@'pc84.example.com';
</pre><p>
                To display nonprivilege properties of an account, use
                <a class="link" href="sql-syntax.html#show-create-user" title="13.7.5.12&nbsp;SHOW CREATE USER Syntax"><code class="literal">SHOW CREATE USER</code></a>:
            </p><p style="color:blue;">要显示帐户的非特权属性，请使用show create user：</p><pre data-lang="sql" class="programlisting">SHOW CREATE USER 'bob'@'pc84.example.com';
</pre>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-user-db"></a>The user and db Grant Tables</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The server uses the <code class="literal">user</code> and
                    <code class="literal">db</code> tables in the <code class="literal">mysql</code>
                    database at both the first and second stages of access control
                    (see <a class="xref" href="security.html#access-control" title="6.2&nbsp;Access Control and Account Management">Section&nbsp;6.2, “Access Control and Account Management”</a>). The columns in the
                    <code class="literal">user</code> and <code class="literal">db</code> tables are
                    shown here.
                </p><p style="color:blue;">服务器在访问控制的第一和第二阶段都使用mysql数据库中的user和db表（请参阅第6.2节“访问控制和帐户管理”）。user和db表中的列如下所示。</p>
                <div class="table">
                    <a name="idm140286889160752"></a><p class="title"><b>Table&nbsp;6.3&nbsp;user and db Table Columns</b></p><p style="color:blue;">表6.3用户和数据库表列</p>
                    <div class="table-contents">
                        <table><colgroup><col width="40%"><col width="30%"><col width="30%"></colgroup><thead><tr>
                            <th scope="col">Table Name</th>
                            <th scope="col"><code class="literal">user</code></th>
                            <th scope="col"><code class="literal">db</code></th>
                        </tr></thead><tbody><tr>
                            <td scope="row"><span class="bold"><strong>Scope columns</strong></span></td>
                            <td><code class="literal">Host</code></td>
                            <td><code class="literal">Host</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">User</code></td>
                            <td><code class="literal">Db</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td></td>
                            <td><code class="literal">User</code></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Privilege columns</strong></span></td>
                            <td><code class="literal">Select_priv</code></td>
                            <td><code class="literal">Select_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Insert_priv</code></td>
                            <td><code class="literal">Insert_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Update_priv</code></td>
                            <td><code class="literal">Update_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Delete_priv</code></td>
                            <td><code class="literal">Delete_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Index_priv</code></td>
                            <td><code class="literal">Index_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Alter_priv</code></td>
                            <td><code class="literal">Alter_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Create_priv</code></td>
                            <td><code class="literal">Create_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Drop_priv</code></td>
                            <td><code class="literal">Drop_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Grant_priv</code></td>
                            <td><code class="literal">Grant_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Create_view_priv</code></td>
                            <td><code class="literal">Create_view_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Show_view_priv</code></td>
                            <td><code class="literal">Show_view_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Create_routine_priv</code></td>
                            <td><code class="literal">Create_routine_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Alter_routine_priv</code></td>
                            <td><code class="literal">Alter_routine_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Execute_priv</code></td>
                            <td><code class="literal">Execute_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Trigger_priv</code></td>
                            <td><code class="literal">Trigger_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Event_priv</code></td>
                            <td><code class="literal">Event_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Create_tmp_table_priv</code></td>
                            <td><code class="literal">Create_tmp_table_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Lock_tables_priv</code></td>
                            <td><code class="literal">Lock_tables_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">References_priv</code></td>
                            <td><code class="literal">References_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Reload_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Shutdown_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Process_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">File_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Show_db_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Super_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Repl_slave_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Repl_client_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Create_user_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Create_tablespace_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Security columns</strong></span></td>
                            <td><code class="literal">ssl_type</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">ssl_cipher</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">x509_issuer</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">x509_subject</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">plugin</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">authentication_string</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">password_expired</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">password_last_changed</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">password_lifetime</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">account_locked</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Resource control columns</strong></span></td>
                            <td><code class="literal">max_questions</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">max_updates</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">max_connections</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">max_user_connections</code></td>
                            <td></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The <code class="literal">user</code> table <code class="literal">plugin</code> and
                <code class="literal">authentication_string</code> columns store
                authentication plugin and credential information.
            </p><p style="color:blue;">用户表plugin和authentication_string列存储authentication plugin和凭据信息。</p><p>
                The server uses the plugin named in the
                <code class="literal">plugin</code> column of an account row to
                authenticate connection attempts for the account.
            </p><p style="color:blue;">服务器使用帐户行的plugin列中名为的插件来验证帐户的连接尝试。</p><p>
                The <code class="literal">plugin</code> column must be nonempty. At
                startup, and at runtime when <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH
                PRIVILEGES</code></a> is executed, the server checks
                <code class="literal">user</code> table rows. For any row with an empty
                <code class="literal">plugin</code> column, the server writes a warning to
                the error log of this form:
            </p><p style="color:blue;">插件列必须是非空的。在启动时，以及在运行时执行刷新权限时，服务器检查用户表行。对于插件列为空的任何行，服务器会将警告写入此表单的错误日志：</p><pre data-lang="none" class="programlisting">[Warning] User entry '<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>' has an empty plugin
value. The user will be ignored and no one can login with this user
anymore.
</pre><p>
                To address this problem, see <a class="xref" href="security.html#account-upgrades" title="6.4.1.3&nbsp;Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password Plugin">Section&nbsp;6.4.1.3, “Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password
                Plugin”</a>.
            </p><p style="color:blue;">要解决此问题，请参阅第6.4.1.3节“从4.1之前的密码散列和mysql旧密码插件迁移”。</p><p>
                The <code class="literal">password_expired</code> column permits DBAs to
                expire account passwords and require users to reset their
                password. The default <code class="literal">password_expired</code> value
                is <code class="literal">'N'</code>, but can be set to
                <code class="literal">'Y'</code> with the <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER
                USER</code></a> statement. After an account's password has been
                expired, all operations performed by the account in subsequent
                connections to the server result in an error until the user
                issues an <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statement to
                establish a new account password.
            </p><p style="color:blue;">password_expired列允许dba使帐户密码过期，并要求用户重置其密码。默认的password_expired值是'n'，但是可以用alter user语句设置为'y'。帐户密码过期后，该帐户在随后与服务器的连接中执行的所有操作都会导致错误，直到用户发出alter user语句以建立新的帐户密码。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Although it is possible to <span class="quote">“<span class="quote">reset</span>”</span> an expired
                        password by setting it to its current value, it is preferable,
                        as a matter of good policy, to choose a different password.
                    </p><p style="color:blue;">尽管可以通过将过期密码设置为其当前值来“重置”，但作为一个好的策略，最好选择其他密码。</p>
                </div>
                <p>
                    <code class="literal">password_last_changed</code> is a
                    <code class="literal">TIMESTAMP</code> column indicating when the password
                    was last changed. The value is non-<code class="literal">NULL</code> only
                    for accounts that use MySQL built-in authentication methods
                    (accounts that use an authentication plugin of
                    <code class="literal">mysql_native_password</code> or
                    <code class="literal">sha256_password</code>). The value is
                    <code class="literal">NULL</code> for other accounts, such as those
                    authenticated using an external authentication system.
                </p><p style="color:blue;">password_last_changed是一个时间戳列，指示上次更改密码的时间。该值仅对使用mysql内置身份验证方法的帐户（使用mysql本地密码或sha256密码的身份验证插件的帐户）不为空。对于其他帐户，例如使用外部身份验证系统进行身份验证的帐户，该值为空。</p><p>
                <code class="literal">password_last_changed</code> is updated by the
                <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>, and
                <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> statements, and by
                <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements that create an
                account or change an account password.
            </p><p style="color:blue;">最后更改的密码由create user、alter user和set password语句以及创建帐户或更改帐户密码的grant语句更新。</p><p>
                <code class="literal">password_lifetime</code> indicates the account
                password lifetime, in days. If the password is past its lifetime
                (assessed using the <code class="literal">password_last_changed</code>
                column), the server considers the password expired when clients
                connect using the account. A value of
                <em class="replaceable"><code>N</code></em> greater than zero means that the
                password must be changed every <em class="replaceable"><code>N</code></em>
                days. A value of 0 disables automatic password expiration. If
                the value is <code class="literal">NULL</code> (the default), the global
                expiration policy applies, as defined by the
                <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                system variable.
            </p><p style="color:blue;">password_lifetime表示帐户密码生存期，以天为单位。如果密码已过其生存期（使用password_last_changed列进行评估），则当客户端使用该帐户连接时，服务器将认为密码已过期。值n大于零意味着密码必须每n天更改一次。值为0将禁用自动密码过期。如果该值为空（默认值），则应用由默认密码生存期系统变量定义的全局过期策略。</p><a class="indexterm" name="idm140286888947648"></a><a class="indexterm" name="idm140286888946576"></a><a class="indexterm" name="idm140286888945088"></a><p>
                <code class="literal">account_locked</code> indicates whether the account
                is locked (see <a class="xref" href="security.html#account-locking" title="6.2.15&nbsp;Account Locking">Section&nbsp;6.2.15, “Account Locking”</a>).
            </p><p style="color:blue;">账户锁定表示账户是否被锁定（见第6.2.15节“账户锁定”）。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-tables-priv-columns-priv"></a>The tables_priv and columns_priv Grant Tables</h4>

                        </div>

                    </div>

                </div>
                <p>
                    During the second stage of access control, the server performs
                    request verification to ensure that each client has sufficient
                    privileges for each request that it issues. In addition to the
                    <code class="literal">user</code> and <code class="literal">db</code> grant tables,
                    the server may also consult the <code class="literal">tables_priv</code>
                    and <code class="literal">columns_priv</code> tables for requests that
                    involve tables. The latter tables provide finer privilege
                    control at the table and column levels. They have the columns
                    shown in the following table.
                </p><p style="color:blue;">在访问控制的第二阶段，服务器执行请求验证，以确保每个客户端对其发出的每个请求都有足够的权限。除了user和db grant表之外，服务器还可以查询tables_priv和columns_priv表以获取涉及表的请求。后一个表在表和列级别提供了更好的权限控制。它们的列如下表所示。</p>
                <div class="table">
                    <a name="idm140286888936752"></a><p class="title"><b>Table&nbsp;6.4&nbsp;tables_priv and columns_priv Table Columns</b></p><p style="color:blue;">表6.4 tables_priv和columns_priv table columns</p>
                    <div class="table-contents">
                        <table><colgroup><col width="20%"><col width="20%"><col width="20%"></colgroup><thead><tr>
                            <th scope="col">Table Name</th>
                            <th scope="col"><code class="literal">tables_priv</code></th>
                            <th scope="col"><code class="literal">columns_priv</code></th>
                        </tr></thead><tbody><tr>
                            <td scope="row"><span class="bold"><strong>Scope columns</strong></span></td>
                            <td><code class="literal">Host</code></td>
                            <td><code class="literal">Host</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Db</code></td>
                            <td><code class="literal">Db</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">User</code></td>
                            <td><code class="literal">User</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Table_name</code></td>
                            <td><code class="literal">Table_name</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td></td>
                            <td><code class="literal">Column_name</code></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Privilege columns</strong></span></td>
                            <td><code class="literal">Table_priv</code></td>
                            <td><code class="literal">Column_priv</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Column_priv</code></td>
                            <td></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Other columns</strong></span></td>
                            <td><code class="literal">Timestamp</code></td>
                            <td><code class="literal">Timestamp</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Grantor</code></td>
                            <td></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The <code class="literal">Timestamp</code> and <code class="literal">Grantor</code>
                columns are set to the current timestamp and the
                <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> value, respectively,
                but are otherwise unused.
            </p><p style="color:blue;">timestamp和authur列分别设置为当前时间戳和当前用户值，但在其他情况下未使用。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-procs-priv"></a>The procs_priv Grant Table</h4>

                        </div>

                    </div>

                </div>
                <p>
                    For verification of requests that involve stored routines, the
                    server may consult the <code class="literal">procs_priv</code> table,
                    which has the columns shown in the following table.
                </p><p style="color:blue;">对于涉及存储例程的请求的验证，服务器可以参考procs_priv表，该表包含下表中所示的列。</p>
                <div class="table">
                    <a name="idm140286888887168"></a><p class="title"><b>Table&nbsp;6.5&nbsp;procs_priv Table Columns</b></p><p style="color:blue;">表6.5 procs_priv table列</p>
                    <div class="table-contents">
                        <table><colgroup><col width="20%"><col width="20%"></colgroup><thead><tr>
                            <th scope="col">Table Name</th>
                            <th scope="col"><code class="literal">procs_priv</code></th>
                        </tr></thead><tbody><tr>
                            <td scope="row"><span class="bold"><strong>Scope columns</strong></span></td>
                            <td><code class="literal">Host</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Db</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">User</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Routine_name</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Routine_type</code></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Privilege columns</strong></span></td>
                            <td><code class="literal">Proc_priv</code></td>
                        </tr><tr>
                            <td scope="row"><span class="bold"><strong>Other columns</strong></span></td>
                            <td><code class="literal">Timestamp</code></td>
                        </tr><tr>
                            <td scope="row"></td>
                            <td><code class="literal">Grantor</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The <code class="literal">Routine_type</code> column is an
                <a class="link" href="data-types.html#enum" title="11.4.4&nbsp;The ENUM Type"><code class="literal">ENUM</code></a> column with values of
                <code class="literal">'FUNCTION'</code> or <code class="literal">'PROCEDURE'</code>
                to indicate the type of routine the row refers to. This column
                enables privileges to be granted separately for a function and a
                procedure with the same name.
            </p><p style="color:blue;">routine_type列是一个枚举列，其值为“function”或“procedure”，指示行引用的例程类型。此列允许为同名的函数和过程分别授予权限。</p><p>
                The <code class="literal">Timestamp</code> and <code class="literal">Grantor</code>
                columns are unused.
            </p><p style="color:blue;">时间戳列和授予列未使用。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-proxies-priv"></a>The proxies_priv Grant Table</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The <code class="literal">proxies_priv</code> table records information
                    about proxy accounts. It has these columns:
                </p><p style="color:blue;">PROXIESSPIPV表记录代理帐户的信息。它有以下列：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">Host</code>, <code class="literal">User</code>: The proxy
                        account; that is, the account that has the
                        <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for the
                        proxied account.
                    </p><p style="color:blue;">主机，用户：代理帐户；即，具有代理帐户的代理特权的帐户。</p></li><li class="listitem"><p>
                        <code class="literal">Proxied_host</code>,
                        <code class="literal">Proxied_user</code>: The proxied account.
                    </p><p style="color:blue;">PROXIDED主机，PROXIEDY用户：代理帐户。</p></li><li class="listitem"><p>
                        <code class="literal">Grantor</code>, <code class="literal">Timestamp</code>:
                        Unused.
                    </p><p style="color:blue;">授予人，时间戳：未使用。</p></li><li class="listitem"><p>
                        <code class="literal">With_grant</code>: Whether the proxy account can
                        grant the <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege to
                        other accounts.
                    </p><p style="color:blue;">with_grant：代理帐户是否可以将代理权限授予其他帐户。</p></li></ul>
                </div>
                <p>
                    For an account to be able to grant the
                    <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege to other
                    accounts, it must have a row in the
                    <code class="literal">proxies_priv</code> table with
                    <code class="literal">With_grant</code> set to 1 and
                    <code class="literal">Proxied_host</code> and
                    <code class="literal">Proxied_user</code> set to indicate the account or
                    accounts for which the privilege can be granted. For example,
                    the <code class="literal">'root'@'localhost'</code> account created during
                    MySQL installation has a row in the
                    <code class="literal">proxies_priv</code> table that enables granting the
                    <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for
                    <code class="literal">''@''</code>, that is, for all users and all hosts.
                    This enables <code class="literal">root</code> to set up proxy users, as
                    well as to delegate to other accounts the authority to set up
                    proxy users. See <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">对于能够授予其他帐户的代理权限的帐户，它必须在PROXIESS-PRIV表中有一行，其中带有SuxGrand设置为1，PROXIEDY主机和PROXIEDHOUSER用户集指示可以授予特权的帐户或帐户。例如，在MySQL安装过程中创建的“root”@“LoalHOST”帐户在PROXESSYPRV表中有一行，它允许授予“@”的代理权限，也就是说，对于所有用户和所有主机。这使根用户能够设置代理用户，并将设置代理用户的权限委托给其他帐户。见第6.2.14节“代理用户”。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-scope-column-properties"></a>Grant Table Scope Column Properties</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Scope columns in the grant tables contain strings. The default
                    value for each is the empty string. The following table shows
                    the number of characters permitted in each column.
                </p><p style="color:blue;">授权表中的作用域列包含字符串。每个的默认值都是空字符串。下表显示了每列中允许的字符数。</p>
                <div class="table">
                    <a name="idm140286888827104"></a><p class="title"><b>Table&nbsp;6.6&nbsp;Grant Table Scope Column Lengths</b></p><p style="color:blue;">表6.6授予表范围列长度</p>
                    <div class="table-contents">
                        <table><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
                            <th scope="col">Column Name</th>
                            <th scope="col">Maximum Permitted Characters</th>
                        </tr></thead><tbody><tr>
                            <td scope="row"><code class="literal">Host</code>, <code class="literal">Proxied_host</code></td>
                            <td>60</td>
                        </tr><tr>
                            <td scope="row"><code class="literal">User</code>, <code class="literal">Proxied_user</code></td>
                            <td>32</td>
                        </tr><tr>
                            <td scope="row"><code class="literal">Password</code></td>
                            <td>41</td>
                        </tr><tr>
                            <td scope="row"><code class="literal">Db</code></td>
                            <td>64</td>
                        </tr><tr>
                            <td scope="row"><code class="literal">Table_name</code></td>
                            <td>64</td>
                        </tr><tr>
                            <td scope="row"><code class="literal">Column_name</code></td>
                            <td>64</td>
                        </tr><tr>
                            <td scope="row"><code class="literal">Routine_name</code></td>
                            <td>64</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><a class="indexterm" name="idm140286888800496"></a><a class="indexterm" name="idm140286888799008"></a><p>
                <code class="literal">Host</code> and <code class="literal">Proxied_host</code>
                values are converted to lowercase before being stored in the
                grant tables.
            </p><p style="color:blue;">主机和PROXIEDHOST主机值在被存储在授权表之前被转换为小写。</p><p>
                For access-checking purposes, comparisons of
                <code class="literal">User</code>, <code class="literal">Proxied_user</code>,
                <code class="literal">Password</code>,
                <code class="literal">authentication_string</code>, <code class="literal">Db</code>,
                and <code class="literal">Table_name</code> values are case-sensitive.
                Comparisons of <code class="literal">Host</code>,
                <code class="literal">Proxied_host</code>, <code class="literal">Column_name</code>,
                and <code class="literal">Routine_name</code> values are not
                case-sensitive.
            </p><p style="color:blue;">对于访问检查目的，用户、PROXEDID用户、密码、身份验证字符串、DB和Table名称值的比较是区分大小写的。主机、PROXIEDHOST、CyrnNoNy和TrimeNoNeNess值的比较不区分大小写。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="grant-tables-privilege-column-properties"></a>Grant Table Privilege Column Properties</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The <code class="literal">user</code> and <code class="literal">db</code> tables
                    list each privilege in a separate column that is declared as
                    <code class="literal">ENUM('N','Y') DEFAULT 'N'</code>. In other words,
                    each privilege can be disabled or enabled, with the default
                    being disabled.
                </p><p style="color:blue;">user和db表在声明为enum（'n'，'y'）默认值'n'的单独列中列出每个特权。换句话说，可以禁用或启用每个权限，默认为禁用。</p><p>
                The <code class="literal">tables_priv</code>,
                <code class="literal">columns_priv</code>, and
                <code class="literal">procs_priv</code> tables declare the privilege
                columns as <a class="link" href="data-types.html#set" title="11.4.5&nbsp;The SET Type"><code class="literal">SET</code></a> columns. Values in
                these columns can contain any combination of the privileges
                controlled by the table. Only those privileges listed in the
                column value are enabled.
            </p><p style="color:blue;">tables_priv、columns_priv和procs_priv表将特权列声明为set列。这些列中的值可以包含表控制的权限的任意组合。只有列值中列出的特权才被启用。</p>
                <div class="table">
                    <a name="idm140286888780032"></a><p class="title"><b>Table&nbsp;6.7&nbsp;Set-Type Privilege Column Values</b></p><p style="color:blue;">表6.7设置类型特权列值</p>
                    <div class="table-contents">
                        <table><colgroup><col width="20%"><col width="25%"><col width="45%"></colgroup><thead><tr>
                            <th scope="col">Table Name</th>
                            <th scope="col">Column Name</th>
                            <th scope="col">Possible Set Elements</th>
                        </tr></thead><tbody><tr>
                            <td scope="row"><code class="literal">tables_priv</code></td>
                            <td><code class="literal">Table_priv</code></td>
                            <td><code class="literal">'Select', 'Insert', 'Update', 'Delete', 'Create', 'Drop',
                                'Grant', 'References', 'Index', 'Alter', 'Create View',
                                'Show view', 'Trigger'</code></td>
                        </tr><tr>
                            <td scope="row"><code class="literal">tables_priv</code></td>
                            <td><code class="literal">Column_priv</code></td>
                            <td><code class="literal">'Select', 'Insert', 'Update', 'References'</code></td>
                        </tr><tr>
                            <td scope="row"><code class="literal">columns_priv</code></td>
                            <td><code class="literal">Column_priv</code></td>
                            <td><code class="literal">'Select', 'Insert', 'Update', 'References'</code></td>
                        </tr><tr>
                            <td scope="row"><code class="literal">procs_priv</code></td>
                            <td><code class="literal">Proc_priv</code></td>
                            <td><code class="literal">'Execute', 'Alter Routine', 'Grant'</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                Only the <code class="literal">user</code> table specifies administrative
                privileges, such as <a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a> and
                <a class="link" href="security.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a>. Administrative
                operations are operations on the server itself and are not
                database-specific, so there is no reason to list these
                privileges in the other grant tables. Consequently, the server
                need consult only the <code class="literal">user</code> table to determine
                whether a user can perform an administrative operation.
            </p><p style="color:blue;">只有用户表指定管理权限，如重新加载和关闭。管理操作是服务器本身上的操作，不是特定于数据库的操作，因此没有理由在其他授予表中列出这些权限。因此，服务器只需要查询用户表来确定用户是否可以执行管理操作。</p><p>
                The <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> privilege also is
                specified only in the <code class="literal">user</code> table. It is not
                an administrative privilege as such, but a user's ability to
                read or write files on the server host is independent of the
                database being accessed.
            </p><p style="color:blue;">文件特权也仅在用户表中指定。它不是管理权限，但用户在服务器主机上读或写文件的能力与所访问的数据库无关。</p>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="account-names"></a>6.2.4&nbsp;Specifying Account Names</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888745568"></a><a class="indexterm" name="idm140286888744528"></a><a class="indexterm" name="idm140286888743040"></a><a class="indexterm" name="idm140286888741552"></a><a class="indexterm" name="idm140286888740064"></a><a class="indexterm" name="idm140286888738576"></a><a class="indexterm" name="idm140286888737072"></a><a class="indexterm" name="idm140286888735568"></a><p>
            MySQL account names consist of a user name and a host name, which
            enables creation of distinct accounts for users with the same user
            name who can connect from different hosts. This section describes
            how to write account names, including special values and wildcard
            rules.
        </p><p style="color:blue;">mysql帐户名由用户名和主机名组成，允许为可以从不同主机连接的具有相同用户名的用户创建不同的帐户。本节介绍如何编写帐户名，包括特殊值和通配符规则。</p><p>
            In SQL statements such as <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
            USER</code></a>, <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, and
            <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>, account names follow
            these rules:
        </p><p style="color:blue;">在创建用户、授予和设置密码等SQL语句中，帐户名遵循以下规则：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Account name syntax is
                    <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'</code>.
                </p><p style="color:blue;">帐户名语法为“用户名”@“主机名”。</p></li><li class="listitem"><p>
                    An account name consisting only of a user name is equivalent
                    to
                    <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'%'</code>.
                    For example, <code class="literal">'me'</code> is equivalent to
                    <code class="literal">'me'@'%'</code>.
                </p><p style="color:blue;">仅由用户名组成的帐户名等同于“用户名”@“%”。例如，“me”等同于“me”@“%”。</p></li><li class="listitem"><p>
                    The user name and host name need not be quoted if they are
                    legal as unquoted identifiers. Quotes are necessary to specify
                    a <em class="replaceable"><code>user_name</code></em> string containing
                    special characters (such as space or <code class="literal">-</code>), or
                    a <em class="replaceable"><code>host_name</code></em> string containing
                    special characters or wildcard characters (such as
                    <code class="literal">.</code> or <code class="literal">%</code>). For example, in
                    the account name <code class="literal">'test-user'@'%.com'</code>, both
                    the user name and host name parts require quotes.
                </p><p style="color:blue;">如果用户名和主机名是合法的，则不必引用它们作为未引用的标识符。引号是指定包含特殊字符（如空格或-）的用户名字符串或包含特殊字符或通配符（如）的主机名字符串所必需的。或）。例如，在帐户名“test user”@“%.com”中，用户名和主机名部分都需要引号。</p></li><li class="listitem"><p>
                    Quote user names and host names as identifiers or as strings,
                    using either backticks (<code class="literal">`</code>), single
                    quotation marks (<code class="literal">'</code>), or double quotation
                    marks (<code class="literal">"</code>). For string-quoting and
                    identifier-quoting guidelines, see
                    <a class="xref" href="language-structure.html#string-literals" title="9.1.1&nbsp;String Literals">Section&nbsp;9.1.1, “String Literals”</a>, and
                    <a class="xref" href="language-structure.html#identifiers" title="9.2&nbsp;Schema Object Names">Section&nbsp;9.2, “Schema Object Names”</a>.
                </p><p style="color:blue;">使用反勾号（`）、单引号（`）或双引号（“）将用户名和主机名作为标识符或字符串引用。有关字符串引用和标识符引用准则，请参阅第9.1.1节“字符串文本”和第9.2节“架构对象名称”。</p></li><li class="listitem"><p>
                    The user name and host name parts, if quoted, must be quoted
                    separately. That is, write
                    <code class="literal">'me'@'localhost'</code>, not
                    <code class="literal">'me@localhost'</code>. The latter is actually
                    equivalent to <code class="literal">'me@localhost'@'%'</code>.
                </p><p style="color:blue;">用户名和主机名部分（如果引用）必须单独引用。也就是说，写“me”@“localhost”，而不是“me@localhost”。后者实际上相当于“me@localhost”@“%”。</p></li><li class="listitem"><p>
                    A reference to the <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>
                    or <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function is
                    equivalent to specifying the current client's user name and
                    host name literally.
                </p><p style="color:blue;">对current_user或current_user（）函数的引用相当于逐字指定当前客户端的用户名和主机名。</p></li></ul>
            </div>
            <p>
                MySQL stores account names in grant tables in the
                <code class="literal">mysql</code> system database using separate columns
                for the user name and host name parts:
            </p><p style="color:blue;">mysql在mysql系统数据库的grant表中使用用户名和主机名部分的单独列存储帐户名：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The <code class="literal">user</code> table contains one row for each
                    account. The <code class="literal">User</code> and
                    <code class="literal">Host</code> columns store the user name and host
                    name. This table also indicates which global privileges the
                    account has.
                </p><p style="color:blue;">用户表为每个帐户包含一行。用户和主机列存储用户名和主机名。此表还指示帐户具有哪些全局权限。</p></li><li class="listitem"><p>
                    Other grant tables indicate privileges an account has for
                    databases and objects within databases. These tables have
                    <code class="literal">User</code> and <code class="literal">Host</code> columns to
                    store the account name. Each row in these tables associates
                    with the account in the <code class="literal">user</code> table that has
                    the same <code class="literal">User</code> and <code class="literal">Host</code>
                    values.
                </p><p style="color:blue;">其他授权表指示帐户对数据库和数据库中的对象具有的权限。这些表具有用于存储帐户名的用户列和主机列。这些表中的每一行都与用户表中具有相同用户和主机值的帐户相关联。</p></li><li class="listitem"><p>
                    For access-checking purposes, comparisons of User values are
                    case-sensitive. Comparisons of Host values are not case
                    sensitive.
                </p><p style="color:blue;">出于访问检查的目的，用户值的比较区分大小写。主机值的比较不区分大小写。</p><a class="indexterm" name="idm140286888697152"></a><a class="indexterm" name="idm140286888695664"></a></li></ul>
            </div>
            <p>
                For additional detail about the properties of user names and host
                names as stored in the grant tables, such as maximum length, see
                <a class="xref" href="security.html#grant-tables-scope-column-properties" title="Grant Table Scope Column Properties">Grant Table Scope Column Properties</a>.
            </p><p style="color:blue;">有关授予表中存储的用户名和主机名的详细信息（如最大长度）的详细信息，请参阅Grand表范围列属性。</p><p>
            User names and host names have certain special values or wildcard
            conventions, as described following.
        </p><p style="color:blue;">用户名和主机名具有特定的特殊值或通配符约定，如下所述。</p><p>
            The user name part of an account name is either a nonblank value
            that literally matches the user name for incoming connection
            attempts, or a blank value (empty string) that matches any user
            name. An account with a blank user name is an anonymous user. To
            specify an anonymous user in SQL statements, use a quoted empty
            user name part, such as <code class="literal">''@'localhost'</code>.
        </p><p style="color:blue;">帐户名的用户名部分可以是字面上与传入连接尝试的用户名匹配的非空值，也可以是与任何用户名匹配的空值（空字符串）。用户名为空的帐户是匿名用户。若要在SQL语句中指定匿名用户，请使用带引号的空用户名部分，例如“@'localhost”。</p><p>
            The host name part of an account name can take many forms, and
            wildcards are permitted:
        </p><p style="color:blue;">帐户名的主机名部分可以采用多种形式，并且允许使用通配符：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    A host value can be a host name or an IP address (IPv4 or
                    IPv6). The name <code class="literal">'localhost'</code> indicates the
                    local host. The IP address <code class="literal">'127.0.0.1'</code>
                    indicates the IPv4 loopback interface. The IP address
                    <code class="literal">'::1'</code> indicates the IPv6 loopback
                    interface.
                </p><p style="color:blue;">主机值可以是主机名或IP地址（IPv4或IPv6）。名称“local host”表示本地主机。IP地址“127.0.0.1”表示IPv4环回接口。IP地址“：：1”表示IPv6环回接口。</p></li><li class="listitem"><p>
                    <a class="indexterm" name="idm140286888686128"></a>

                    The <code class="literal">%</code> and <code class="literal">_</code> wildcard
                    characters are permitted in host name or IP address values.
                    These have the same meaning as for pattern-matching operations
                    performed with the <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator.
                    For example, a host value of <code class="literal">'%'</code> matches
                    any host name, whereas a value of
                    <code class="literal">'%.mysql.com'</code> matches any host in the
                    <code class="literal">mysql.com</code> domain.
                    <code class="literal">'198.51.100.%'</code> matches any host in the
                    198.51.100 class C network.
                </p><p style="color:blue;">主机名或IP地址值中允许使用%和\通配符。它们与使用like运算符执行的模式匹配操作具有相同的含义。例如，主机值“%”与任何主机名匹配，而值“%.mysql.com”与mysql.com域中的任何主机匹配。198.51.100.%'匹配198.51.100 C类网络中的任何主机。</p><p>
                    Because IP wildcard values are permitted in host values (for
                    example, <code class="literal">'198.51.100.%'</code> to match every host
                    on a subnet), someone could try to exploit this capability by
                    naming a host <code class="literal">198.51.100.somewhere.com</code>. To
                    foil such attempts, MySQL does not perform matching on host
                    names that start with digits and a dot. For example, if a host
                    is named <code class="literal">1.2.example.com</code>, its name never
                    matches the host part of account names. An IP wildcard value
                    can match only IP addresses, not host names.
                </p><p style="color:blue;">由于主机值中允许使用IP通配符值（例如，'198.51.100.%'来匹配子网上的每个主机），因此有人可以通过命名主机198.51.100.somewhere.com来尝试利用此功能。为了阻止这种尝试，mysql不会对以数字和点开头的主机名执行匹配。例如，如果主机名为1.2.example.com，则其名称永远不会与帐户名的主机部分匹配。IP通配符值只能匹配IP地址，而不能匹配主机名。</p></li><li class="listitem"><p>
                    <a class="indexterm" name="idm140286888675088"></a>

                    For a host value specified as an IPv4 address, a netmask can
                    be given to indicate how many address bits to use for the
                    network number. Netmask notation cannot be used for IPv6
                    addresses.
                </p><p style="color:blue;">对于指定为IPv4地址的主机值，可以提供一个网络掩码来指示网络号要使用多少地址位。网络掩码表示法不能用于IPv6地址。</p><p>
                    The syntax is
                    <code class="literal"><em class="replaceable"><code>host_ip</code></em>/<em class="replaceable"><code>netmask</code></em></code>.
                    For example:
                </p><p style="color:blue;">语法是host_ip/netmask。例如：</p><pre data-lang="sql" class="programlisting">CREATE USER 'david'@'198.51.100.0/255.255.255.0';
</pre><p>
                    This enables <code class="literal">david</code> to connect from any
                    client host having an IP address
                    <em class="replaceable"><code>client_ip</code></em> for which the following
                    condition is true:
                </p><p style="color:blue;">这使david能够从具有ip地址client_ip的任何客户端主机进行连接，对于该客户端，以下条件为真：</p><pre data-lang="clike" class="programlisting"><em class="replaceable"><code>client_ip</code></em> &amp; <em class="replaceable"><code>netmask</code></em> = <em class="replaceable"><code>host_ip</code></em>
</pre><p>
                    That is, for the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>
                    statement just shown:
                </p><p style="color:blue;">也就是说，对于刚才显示的create user语句：</p><pre data-lang="clike" class="programlisting"><em class="replaceable"><code>client_ip</code></em> &amp; 255.255.255.0 = 198.51.100.0
</pre><p>
                    IP addresses that satisfy this condition range from
                    <code class="literal">198.51.100.0</code> to
                    <code class="literal">198.51.100.255</code>.
                </p><p style="color:blue;">满足此条件的IP地址范围从198.51.100.0到198.51.100.255。</p><p>
                    A netmask typically begins with bits set to 1, followed by
                    bits set to 0. Examples:
                </p><p style="color:blue;">网络掩码通常以设置为1的位开始，然后是设置为0的位。实例：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                            <code class="literal">198.0.0.0/255.0.0.0</code>: Any host on the
                            198 class A network
                        </p><p style="color:blue;">198.0.0.0/255.0.0.0:198 A级网络上的任何主机</p></li><li class="listitem"><p>
                            <code class="literal">198.51.100.0/255.255.0.0</code>: Any host on
                            the 198.51 class B network
                        </p><p style="color:blue;">198.51.100.0/255.255.0.0:198.51 B类网络上的任何主机</p></li><li class="listitem"><p>
                            <code class="literal">198.51.100.0/255.255.255.0</code>: Any host on
                            the 198.51.100 class C network
                        </p><p style="color:blue;">198.51.100.0/255.255.255.0:198.51.100 C类网络上的任何主机</p></li><li class="listitem"><p>
                            <code class="literal">198.51.100.1</code>: Only the host with this
                            specific IP address
                        </p><p style="color:blue;">198.51.100.1:仅具有此特定IP地址的主机</p></li></ul>
                    </div>
                </li></ul>
            </div>
            <p>
                The server performs matching of host values in account names
                against the client host using the value returned by the system DNS
                resolver for the client host name or IP address. Except in the
                case that the account host value is specified using netmask
                notation, the server performs this comparison as a string match,
                even for an account host value given as an IP address. This means
                that you should specify account host values in the same format
                used by DNS. Here are examples of problems to watch out for:
            </p><p style="color:blue;">服务器使用系统DNS解析程序为客户端主机名或IP地址返回的值对客户端主机执行帐户名中的主机值匹配。除了使用netmask表示法指定帐户主机值的情况外，服务器将以字符串匹配的方式执行此比较，即使对于指定为IP地址的帐户主机值也是如此。这意味着您应该以dns使用的相同格式指定帐户主机值。以下是需要注意的问题示例：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Suppose that a host on the local network has a fully qualified
                    name of <code class="literal">host1.example.com</code>. If DNS returns
                    name lookups for this host as
                    <code class="literal">host1.example.com</code>, use that name in account
                    host values. If DNS returns just <code class="literal">host1</code>, use
                    <code class="literal">host1</code> instead.
                </p><p style="color:blue;">假设本地网络上的主机具有完全限定名host1.example.com。如果DNS将此主机的名称查找返回为host1.example.com，请在帐户主机值中使用该名称。如果dns只返回host1，请改用host1。</p></li><li class="listitem"><p>
                    If DNS returns the IP address for a given host as
                    <code class="literal">198.51.100.2</code>, that will match an account
                    host value of <code class="literal">198.51.100.2</code> but not
                    <code class="literal">198.051.100.2</code>. Similarly, it will match an
                    account host pattern like <code class="literal">198.51.100.%</code> but
                    not <code class="literal">198.051.100.%</code>.
                </p><p style="color:blue;">如果DNS将给定主机的IP地址返回为198.51.100.2，则该地址将与帐户主机值198.51.100.2（而不是198.051.100.2）匹配。类似地，它将匹配帐户主机模式，如198.51.100%，但不是198.051.100%。</p></li></ul>
            </div>
            <p>
                To avoid problems like these, it is advisable to check the format
                in which your DNS returns host names and addresses. Use values in
                the same format in MySQL account names.
            </p><p style="color:blue;">为了避免这些问题，建议检查dns返回主机名和地址的格式。在mysql帐户名中使用相同格式的值。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="connection-access"></a>6.2.5&nbsp;Access Control, Stage 1: Connection Verification</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888642688"></a><a class="indexterm" name="idm140286888641648"></a><a class="indexterm" name="idm140286888640160"></a><p>
            When you attempt to connect to a MySQL server, the server accepts
            or rejects the connection based on these conditions:
        </p><p style="color:blue;">尝试连接到MySQL服务器时，服务器会根据以下条件接受或拒绝连接：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Your identity and whether you can verify your identity by
                    supplying the correct password
                </p><p style="color:blue;">您的身份以及是否可以通过提供正确的密码来验证您的身份</p></li><li class="listitem"><p>
                    Whether your account is locked or unlocked
                </p><p style="color:blue;">您的帐户是锁定的还是解锁的</p></li></ul>
            </div>
            <p>
                The server checks credentials first, then account locking state. A
                failure for either step causes the server to deny access to you
                completely. Otherwise, the server accepts the connection, and then
                enters Stage 2 and waits for requests.
            </p><p style="color:blue;">服务器首先检查凭据，然后检查帐户锁定状态。任何一个步骤的失败都会导致服务器完全拒绝对您的访问。否则，服务器接受连接，然后进入第2阶段并等待请求。</p><p>
            Credential checking is performed using the three
            <code class="literal">user</code> table scope columns
            (<code class="literal">Host</code>, <code class="literal">User</code>, and
            <code class="literal">authentication_string</code>). Locking state is
            recorded in the <code class="literal">user</code> table
            <code class="literal">account_locked</code> column. The server accepts the
            connection only if the <code class="literal">Host</code> and
            <code class="literal">User</code> columns in some <code class="literal">user</code>
            table row match the client host name and user name, the client
            supplies the password specified in that row, and the
            <code class="literal">account_locked</code> value is <code class="literal">'N'</code>.
            The rules for permissible <code class="literal">Host</code> and
            <code class="literal">User</code> values are given in
            <a class="xref" href="security.html#account-names" title="6.2.4&nbsp;Specifying Account Names">Section&nbsp;6.2.4, “Specifying Account Names”</a>. Account locking can be changed
            with the <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statement.
        </p><p style="color:blue;">凭据检查使用三个用户表作用域列（主机、用户和身份验证字符串）执行。锁定状态记录在“用户表帐户锁定”列中。只有当某些用户表行中的主机列和用户列与客户端主机名和用户名匹配，客户端提供该行中指定的密码，并且帐户锁定值为“n”时，服务器才接受连接。允许的主机和用户值的规则在第6.2.4节“指定帐户名”中给出。可以使用alter user语句更改帐户锁定。</p><p>
            Your identity is based on two pieces of information:
        </p><p style="color:blue;">您的身份基于两条信息：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The client host from which you connect
                </p><p style="color:blue;">从中连接的客户端主机</p></li><li class="listitem"><p>
                    Your MySQL user name
                </p><p style="color:blue;">你的mysql用户名</p></li></ul>
            </div>
            <a class="indexterm" name="idm140286888620848"></a><p>
            If the <code class="literal">User</code> column value is nonblank, the user
            name in an incoming connection must match exactly. If the
            <code class="literal">User</code> value is blank, it matches any user name.
            If the <code class="literal">user</code> table row that matches an incoming
            connection has a blank user name, the user is considered to be an
            anonymous user with no name, not a user with the name that the
            client actually specified. This means that a blank user name is
            used for all further access checking for the duration of the
            connection (that is, during Stage 2).
        </p><p style="color:blue;">如果用户列值非空，则传入连接中的用户名必须完全匹配。如果用户值为空，则匹配任何用户名。如果与传入连接匹配的用户表行的用户名为空，则认为该用户是没有名称的匿名用户，而不是具有客户端实际指定的名称的用户。这意味着在连接期间（即在第2阶段），所有进一步的访问检查都将使用空白用户名。</p><p>
            The <code class="literal">authentication_string</code> column can be blank.
            This is not a wildcard and does not mean that any password
            matches. It means that the user must connect without specifying a
            password. If the server authenticates a client using a plugin, the
            authentication method that the plugin implements may or may not
            use the password in the <code class="literal">authentication_string</code>
            column. In this case, it is possible that an external password is
            also used to authenticate to the MySQL server.
        </p><p style="color:blue;">验证字符串列可以为空。这不是通配符，也不意味着任何密码都匹配。这意味着用户必须在不指定密码的情况下进行连接。如果服务器使用插件对客户端进行身份验证，则插件实现的身份验证方法可能使用或不使用“身份验证字符串”列中的密码。在这种情况下，还可能使用外部密码对mysql服务器进行身份验证。</p><p>
            Nonblank <code class="literal">authentication_string</code> values in the
            <code class="literal">user</code> table represent encrypted passwords. MySQL
            does not store passwords as cleartext for anyone to see. Rather,
            the password supplied by a user who is attempting to connect is
            encrypted (using the password hashing method implemented by the
            account authentication plugin). The encrypted password then is
            used during the connection process when checking whether the
            password is correct. This is done without the encrypted password
            ever traveling over the connection. See
            <a class="xref" href="security.html#user-names" title="6.2.1&nbsp;Account User Names and Passwords">Section&nbsp;6.2.1, “Account User Names and Passwords”</a>.
        </p><p style="color:blue;">用户表中的非空身份验证字符串值表示加密的密码。mysql不将密码存储为明文，供任何人查看。相反，试图连接的用户提供的密码是加密的（使用由帐户身份验证插件实现的密码散列方法）。然后在连接过程中检查密码是否正确时使用加密的密码。这是在没有加密密码通过连接的情况下完成的。见第6.2.1节“账户用户名和密码”。</p><p>
            From MySQL's point of view, the encrypted password is the
            <span class="emphasis"><em>real</em></span> password, so you should never give
            anyone access to it. In particular, <span class="emphasis"><em>do not give
      nonadministrative users read access to tables in the
      <code class="literal">mysql</code> system database</em></span>.
        </p><p style="color:blue;">从mysql的角度来看，加密的密码才是真正的密码，所以永远不要让任何人访问它。特别是，不要让非管理用户读取mysql系统数据库中的表。</p><p>
            The following table shows how various combinations of
            <code class="literal">User</code> and <code class="literal">Host</code> values in the
            <code class="literal">user</code> table apply to incoming connections.
        </p><p style="color:blue;">下表显示了用户表中用户和主机值的各种组合如何应用于传入连接。</p>
            <div class="informaltable">
                <table summary="How various combinations of User and Host values in the user table apply to incoming connections to a MySQL server."><colgroup><col width="15%"><col width="35%"><col width="50%"></colgroup><thead><tr>
                    <th scope="col"><code class="literal">User</code> Value</th>
                    <th scope="col"><code class="literal">Host</code> Value</th>
                    <th scope="col">Permissible Connections</th>
                </tr></thead><tbody><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'h1.example.net'</code></td>
                    <td><code class="literal">fred</code>, connecting from
                        <code class="literal">h1.example.net</code></td>
                </tr><tr>
                    <td scope="row"><code class="literal">''</code></td>
                    <td><code class="literal">'h1.example.net'</code></td>
                    <td>Any user, connecting from <code class="literal">h1.example.net</code></td>
                </tr><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'%'</code></td>
                    <td><code class="literal">fred</code>, connecting from any host</td>
                </tr><tr>
                    <td scope="row"><code class="literal">''</code></td>
                    <td><code class="literal">'%'</code></td>
                    <td>Any user, connecting from any host</td>
                </tr><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'%.example.net'</code></td>
                    <td><code class="literal">fred</code>, connecting from any host in the
                        <code class="literal">example.net</code> domain</td>
                </tr><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'x.example.%'</code></td>
                    <td><code class="literal">fred</code>, connecting from
                        <code class="literal">x.example.net</code>,
                        <code class="literal">x.example.com</code>,
                        <code class="literal">x.example.edu</code>, and so on; this is
                        probably not useful</td>
                </tr><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'198.51.100.177'</code></td>
                    <td><code class="literal">fred</code>, connecting from the host with IP address
                        <code class="literal">198.51.100.177</code></td>
                </tr><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'198.51.100.%'</code></td>
                    <td><code class="literal">fred</code>, connecting from any host in the
                        <code class="literal">198.51.100</code> class C subnet</td>
                </tr><tr>
                    <td scope="row"><code class="literal">'fred'</code></td>
                    <td><code class="literal">'198.51.100.0/255.255.255.0'</code></td>
                    <td>Same as previous example</td>
                </tr></tbody></table>
            </div>
            <p>
                It is possible for the client host name and user name of an
                incoming connection to match more than one row in the
                <code class="literal">user</code> table. The preceding set of examples
                demonstrates this: Several of the entries shown match a connection
                from <code class="literal">h1.example.net</code> by <code class="literal">fred</code>.
            </p><p style="color:blue;">传入连接的客户端主机名和用户名可能与用户表中的多行匹配。前面的一组示例演示了这一点：所示的几个条目与fred从h1.example.net创建的连接相匹配。</p><p>
            When multiple matches are possible, the server must determine
            which of them to use. It resolves this issue as follows:
        </p><p style="color:blue;">当可能有多个匹配项时，服务器必须确定要使用哪一个。它解决这个问题如下：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Whenever the server reads the <code class="literal">user</code> table
                    into memory, it sorts the rows.
                </p><p style="color:blue;">每当服务器将用户表读入内存时，它就会对行进行排序。</p></li><li class="listitem"><p>
                    When a client attempts to connect, the server looks through
                    the rows in sorted order.
                </p><p style="color:blue;">当客户机尝试连接时，服务器按排序顺序查看行。</p></li><li class="listitem"><p>
                    The server uses the first row that matches the client host
                    name and user name.
                </p><p style="color:blue;">服务器使用与客户端主机名和用户名匹配的第一行。</p></li></ul>
            </div>
            <p>
                The server uses sorting rules that order rows with the
                most-specific <code class="literal">Host</code> values first. Literal host
                names and IP addresses are the most specific. (The specificity of
                a literal IP address is not affected by whether it has a netmask,
                so <code class="literal">198.51.100.13</code> and
                <code class="literal">198.51.100.0/255.255.255.0</code> are considered
                equally specific.) The pattern <code class="literal">'%'</code> means
                <span class="quote">“<span class="quote">any host</span>”</span> and is least specific. The empty string
                <code class="literal">''</code> also means <span class="quote">“<span class="quote">any host</span>”</span> but sorts
                after <code class="literal">'%'</code>. Rows with the same
                <code class="literal">Host</code> value are ordered with the most-specific
                <code class="literal">User</code> values first (a blank
                <code class="literal">User</code> value means <span class="quote">“<span class="quote">any user</span>”</span> and is
                least specific). For rows with equally-specific
                <code class="literal">Host</code> and <code class="literal">User</code> values, the
                order is nondeterministic.
            </p><p style="color:blue;">服务器使用排序规则，首先对具有最特定主机值的行进行排序。文字主机名和IP地址是最具体的。（文字IP地址的特殊性不受其是否具有网络掩码的影响，因此198.51.100.13和198.51.100.0/255.255.255.0被认为是同等特定的。）模式“%”表示“任何主机”，并且是最不特定的。空字符串“”还表示“任何主机”，但排序在“%”之后。具有相同主机值的行首先按最特定的用户值排序（空白用户值表示“任何用户”，且最不特定）。对于具有相同特定主机和用户值的行，顺序是不确定的。</p><p>
            To see how this works, suppose that the <code class="literal">user</code>
            table looks like this:
        </p><p style="color:blue;">要了解其工作原理，请假设用户表如下所示：</p><pre data-lang="none" class="programlisting">+-----------+----------+-
| Host      | User     | ...
+-----------+----------+-
| %         | root     | ...
| %         | jeffrey  | ...
| localhost | root     | ...
| localhost |          | ...
+-----------+----------+-
</pre><p>
            When the server reads the table into memory, it sorts the rows
            using the rules just described. The result after sorting looks
            like this:
        </p><p style="color:blue;">当服务器将表读入内存时，它使用刚才描述的规则对行进行排序。排序后的结果如下：</p><pre data-lang="none" class="programlisting">+-----------+----------+-
| Host      | User     | ...
+-----------+----------+-
| localhost | root     | ...
| localhost |          | ...
| %         | jeffrey  | ...
| %         | root     | ...
+-----------+----------+-
</pre><a class="indexterm" name="idm140286888530768"></a><a class="indexterm" name="idm140286888529280"></a><a class="indexterm" name="idm140286888527792"></a><p>
            When a client attempts to connect, the server looks through the
            sorted rows and uses the first match found. For a connection from
            <code class="literal">localhost</code> by <code class="literal">jeffrey</code>, two of
            the rows from the table match: the one with
            <code class="literal">Host</code> and <code class="literal">User</code> values of
            <code class="literal">'localhost'</code> and <code class="literal">''</code>, and the
            one with values of <code class="literal">'%'</code> and
            <code class="literal">'jeffrey'</code>. The <code class="literal">'localhost'</code>
            row appears first in sorted order, so that is the one the server
            uses.
        </p><p style="color:blue;">当客户机尝试连接时，服务器会查看排序的行并使用找到的第一个匹配项。对于jeffrey从localhost建立的连接，表中的两行匹配：一行的主机和用户值为“localhost”和“”，另一行的值为“%”和“jeffrey”。“localhost”行按排序顺序首先出现，因此这是服务器使用的行。</p><p>
            Here is another example. Suppose that the <code class="literal">user</code>
            table looks like this:
        </p><p style="color:blue;">下面是另一个例子。假设用户表如下所示：</p><pre data-lang="none" class="programlisting">+----------------+----------+-
| Host           | User     | ...
+----------------+----------+-
| %              | jeffrey  | ...
| h1.example.net |          | ...
+----------------+----------+-
</pre><p>
            The sorted table looks like this:
        </p><p style="color:blue;">排序后的表如下所示：</p><pre data-lang="none" class="programlisting">+----------------+----------+-
| Host           | User     | ...
+----------------+----------+-
| h1.example.net |          | ...
| %              | jeffrey  | ...
+----------------+----------+-
</pre><p>
            A connection by <code class="literal">jeffrey</code> from
            <code class="literal">h1.example.net</code> is matched by the first row,
            whereas a connection by <code class="literal">jeffrey</code> from any host
            is matched by the second.
        </p><p style="color:blue;">来自h1.example.net的jeffrey连接由第一行匹配，而来自任何主机的jeffrey连接由第二行匹配。</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    It is a common misconception to think that, for a given user
                    name, all rows that explicitly name that user are used first
                    when the server attempts to find a match for the connection.
                    This is not true. The preceding example illustrates this, where
                    a connection from <code class="literal">h1.example.net</code> by
                    <code class="literal">jeffrey</code> is first matched not by the row
                    containing <code class="literal">'jeffrey'</code> as the
                    <code class="literal">User</code> column value, but by the row with no
                    user name. As a result, <code class="literal">jeffrey</code> is
                    authenticated as an anonymous user, even though he specified a
                    user name when connecting.
                </p><p style="color:blue;">一个常见的误解是，对于给定的用户名，当服务器试图找到连接的匹配项时，首先使用显式命名该用户的所有行。这不是真的。前面的示例说明了这一点，其中jeffrey从h1.example.net连接首先匹配的不是包含“jeffrey”作为用户列值的行，而是没有用户名的行。因此，jeffrey被认证为匿名用户，即使他在连接时指定了用户名。</p>
            </div>
            <p>
                If you are able to connect to the server, but your privileges are
                not what you expect, you probably are being authenticated as some
                other account. To find out what account the server used to
                authenticate you, use the
                <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function. (See
                <a class="xref" href="functions.html#information-functions" title="12.15&nbsp;Information Functions">Section&nbsp;12.15, “Information Functions”</a>.) It returns a value in
                <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                format that indicates the <code class="literal">User</code> and
                <code class="literal">Host</code> values from the matching
                <code class="literal">user</code> table row. Suppose that
                <code class="literal">jeffrey</code> connects and issues the following
                query:
            </p><p style="color:blue;">如果您能够连接到服务器，但您的权限不是您所期望的，那么您可能正在作为其他帐户进行身份验证。要了解服务器用于对您进行身份验证的帐户，请使用current_user（）函数。（请参阅第12.15节，“信息函数”。）它以user_name@host_name格式返回一个值，该值指示来自匹配用户表行的用户和主机值。假设jeffrey连接并发出以下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CURRENT_USER();</code></strong>
+----------------+
| CURRENT_USER() |
+----------------+
| @localhost     |
+----------------+
</pre><p>
            The result shown here indicates that the matching
            <code class="literal">user</code> table row had a blank
            <code class="literal">User</code> column value. In other words, the server
            is treating <code class="literal">jeffrey</code> as an anonymous user.
        </p><p style="color:blue;">此处显示的结果表明，匹配的用户表行的用户列值为空。换句话说，服务器将Jeffrey视为匿名用户。</p><p>
            Another way to diagnose authentication problems is to print out
            the <code class="literal">user</code> table and sort it by hand to see where
            the first match is being made.
        </p><p style="color:blue;">诊断身份验证问题的另一种方法是打印出用户表并手动对其排序，以查看第一个匹配的位置。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="request-access"></a>6.2.6&nbsp;Access Control, Stage 2: Request Verification</h3>

                    </div>

                </div>

            </div>
            <p>
                After you establish a connection, the server enters Stage 2 of
                access control. For each request that you issue through that
                connection, the server determines what operation you want to
                perform, then checks whether you have sufficient privileges to do
                so. This is where the privilege columns in the grant tables come
                into play. These privileges can come from any of the
                <code class="literal">user</code>, <code class="literal">db</code>,
                <code class="literal">tables_priv</code>, <code class="literal">columns_priv</code>,
                or <code class="literal">procs_priv</code> tables. (You may find it helpful
                to refer to <a class="xref" href="security.html#grant-tables" title="6.2.3&nbsp;Grant Tables">Section&nbsp;6.2.3, “Grant Tables”</a>, which lists the
                columns present in each grant table.)
            </p><p style="color:blue;">建立连接后，服务器进入访问控制的第2阶段。对于通过该连接发出的每个请求，服务器将确定要执行的操作，然后检查您是否有足够的权限执行该操作。这就是grant表中的特权列发挥作用的地方。这些特权可以来自user、db、tables_priv、columns_priv或procs_priv表中的任何一个。（您可能会发现参考第6.2.3节“授权表”很有帮助，该节列出了每个授权表中的列。）</p><p>
            The <code class="literal">user</code> table grants global privileges. The
            <code class="literal">user</code> table row for an account indicates the
            account privileges that apply on a global basis no matter what the
            default database is. For example, if the <code class="literal">user</code>
            table grants you the <a class="link" href="security.html#priv_delete"><code class="literal">DELETE</code></a>
            privilege, you can delete rows from any table in any database on
            the server host. It is wise to grant privileges in the
            <code class="literal">user</code> table only to people who need them, such
            as database administrators. For other users, leave all privileges
            in the <code class="literal">user</code> table set to <code class="literal">'N'</code>
            and grant privileges at more specific levels only (for particular
            databases, tables, columns, or routines).
        </p><p style="color:blue;">用户表授予全局权限。帐户的用户表行指示在全局基础上应用的帐户权限，不管默认数据库是什么。例如，如果用户表授予您删除权限，则可以从服务器主机上任何数据库中的任何表中删除行。明智的做法是只向需要权限的人（如数据库管理员）授予用户表中的权限。对于其他用户，将用户表中的所有权限设置为“n”，并仅在更特定的级别（对于特定的数据库、表、列或例程）授予权限。</p><a class="indexterm" name="idm140286888482464"></a><a class="indexterm" name="idm140286888481392"></a><p>
            The <code class="literal">db</code> table grants database-specific
            privileges. Values in the scope columns of this table can take the
            following forms:
        </p><p style="color:blue;">db表授予数据库特定的权限。此表范围列中的值可以采用以下格式：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    A blank <code class="literal">User</code> value matches the anonymous
                    user. A nonblank value matches literally; there are no
                    wildcards in user names.
                </p><p style="color:blue;">空用户值与匿名用户匹配。非空值按字面意思匹配；用户名中没有通配符。</p></li><li class="listitem"><p>
                    The wildcard characters <code class="literal">%</code> and
                    <code class="literal">_</code> can be used in the
                    <code class="literal">Host</code> and <code class="literal">Db</code> columns.
                    These have the same meaning as for pattern-matching operations
                    performed with the <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator.
                    If you want to use either character literally when granting
                    privileges, you must escape it with a backslash. For example,
                    to include the underscore character (<code class="literal">_</code>) as
                    part of a database name, specify it as <code class="literal">\_</code>
                    in the <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statement.
                </p><p style="color:blue;">可以在主机列和数据库列中使用通配符%和u。它们与使用like运算符执行的模式匹配操作具有相同的含义。如果要在授予权限时按字面意思使用任一字符，则必须用反斜杠对其进行转义。例如，要将下划线字符（uu）作为数据库名称的一部分包括在内，请在GRANT语句中将其指定为。</p></li><li class="listitem"><p>
                    A <code class="literal">'%'</code> or blank <code class="literal">Host</code>
                    value means <span class="quote">“<span class="quote">any host.</span>”</span>
                </p><p style="color:blue;">“%”或空主机值表示“任何主机”。</p></li><li class="listitem"><p>
                    A <code class="literal">'%'</code> or blank <code class="literal">Db</code> value
                    means <span class="quote">“<span class="quote">any database.</span>”</span>
                </p><p style="color:blue;">“%”或空白数据库值表示“任何数据库”。</p></li></ul>
            </div>
            <a class="indexterm" name="idm140286888463664"></a><a class="indexterm" name="idm140286888462176"></a><a class="indexterm" name="idm140286888460688"></a><p>
            The server reads the <code class="literal">db</code> table into memory and
            sorts it at the same time that it reads the
            <code class="literal">user</code> table. The server sorts the
            <code class="literal">db</code> table based on the <code class="literal">Host</code>,
            <code class="literal">Db</code>, and <code class="literal">User</code> scope columns.
            As with the <code class="literal">user</code> table, sorting puts the
            most-specific values first and least-specific values last, and
            when the server looks for matching rows, it uses the first match
            that it finds.
        </p><p style="color:blue;">服务器将数据库表读入内存，并在读取用户表的同时对其进行排序。服务器根据主机、数据库和用户范围列对数据库表进行排序。与用户表一样，排序将最特定的值放在第一位，最不特定的值放在最后，当服务器查找匹配的行时，它将使用找到的第一个匹配。</p><a class="indexterm" name="idm140286888453552"></a><a class="indexterm" name="idm140286888452048"></a><a class="indexterm" name="idm140286888450544"></a><p>
            The <code class="literal">tables_priv</code>,
            <code class="literal">columns_priv</code>, and <code class="literal">procs_priv</code>
            tables grant table-specific, column-specific, and routine-specific
            privileges. Values in the scope columns of these tables can take
            the following forms:
        </p><p style="color:blue;">tables_priv、columns_priv和procs_priv表授予特定于表、特定于列和特定于例程的特权。这些表的作用域列中的值可以采用以下形式：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The wildcard characters <code class="literal">%</code> and
                    <code class="literal">_</code> can be used in the
                    <code class="literal">Host</code> column. These have the same meaning as
                    for pattern-matching operations performed with the
                    <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> operator.
                </p><p style="color:blue;">可以在主机列中使用通配符%和u。它们与使用like运算符执行的模式匹配操作具有相同的含义。</p></li><li class="listitem"><p>
                    A <code class="literal">'%'</code> or blank <code class="literal">Host</code>
                    value means <span class="quote">“<span class="quote">any host.</span>”</span>
                </p><p style="color:blue;">“%”或空主机值表示“任何主机”。</p></li><li class="listitem"><p>
                    The <code class="literal">Db</code>, <code class="literal">Table_name</code>,
                    <code class="literal">Column_name</code>, and
                    <code class="literal">Routine_name</code> columns cannot contain
                    wildcards or be blank.
                </p><p style="color:blue;">数据库、表名、列名和例程名列不能包含通配符或为空。</p></li></ul>
            </div>
            <p>
                The server sorts the <code class="literal">tables_priv</code>,
                <code class="literal">columns_priv</code>, and <code class="literal">procs_priv</code>
                tables based on the <code class="literal">Host</code>,
                <code class="literal">Db</code>, and <code class="literal">User</code> columns. This
                is similar to <code class="literal">db</code> table sorting, but simpler
                because only the <code class="literal">Host</code> column can contain
                wildcards.
            </p><p style="color:blue;">服务器根据主机、数据库和用户列对tables_priv、columns_priv和procs_priv表进行排序。这类似于DB表排序，但更简单，因为只有主机列可以包含通配符。</p><p>
            The server uses the sorted tables to verify each request that it
            receives. For requests that require administrative privileges such
            as <a class="link" href="security.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a> or
            <a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a>, the server checks only the
            <code class="literal">user</code> table row because that is the only table
            that specifies administrative privileges. The server grants access
            if the row permits the requested operation and denies access
            otherwise. For example, if you want to execute <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
      shutdown</strong></span></a> but your <code class="literal">user</code> table row does
            not grant the <a class="link" href="security.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a> privilege to
            you, the server denies access without even checking the
            <code class="literal">db</code> table. (The latter table contains no
            <code class="literal">Shutdown_priv</code> column, so there is no need to
            check it.)
        </p><p style="color:blue;">服务器使用已排序的表来验证它接收到的每个请求。对于需要管理权限（如关闭或重新加载）的请求，服务器只检查用户表行，因为这是指定管理权限的唯一表。如果行允许请求的操作，则服务器授予访问权限，否则拒绝访问。例如，如果要执行mysqladmin shutdown，但您的用户表行没有向您授予shutdown权限，则服务器甚至不检查db表就拒绝访问。（后一个表不包含shutdown_priv列，因此不需要检查它。）</p><p>
            For database-related requests
            (<a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
            <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, and so on), the server
            first checks the user's global privileges in the
            <code class="literal">user</code> table row. If the row permits the
            requested operation, access is granted. If the global privileges
            in the <code class="literal">user</code> table are insufficient, the server
            determines the user's database-specific privileges from the
            <code class="literal">db</code> table:
        </p><p style="color:blue;">对于与数据库相关的请求（插入、更新等），服务器首先检查用户表行中的用户全局权限。如果行允许请求的操作，则授予访问权限。如果用户表中的全局权限不足，服务器将从数据库表中确定用户的数据库特定权限：</p><p>
            The server looks in the <code class="literal">db</code> table for a match on
            the <code class="literal">Host</code>, <code class="literal">Db</code>, and
            <code class="literal">User</code> columns. The <code class="literal">Host</code> and
            <code class="literal">User</code> columns are matched to the connecting
            user's host name and MySQL user name. The <code class="literal">Db</code>
            column is matched to the database that the user wants to access.
            If there is no row for the <code class="literal">Host</code> and
            <code class="literal">User</code>, access is denied.
        </p><p style="color:blue;">服务器在数据库表中查找主机、数据库和用户列上的匹配项。主机列和用户列与连接用户的主机名和mysql用户名匹配。db列与用户要访问的数据库匹配。如果主机和用户没有行，则拒绝访问。</p><p>
            After determining the database-specific privileges granted by the
            <code class="literal">db</code> table rows, the server adds them to the
            global privileges granted by the <code class="literal">user</code> table. If
            the result permits the requested operation, access is granted.
            Otherwise, the server successively checks the user's table and
            column privileges in the <code class="literal">tables_priv</code> and
            <code class="literal">columns_priv</code> tables, adds those to the user's
            privileges, and permits or denies access based on the result. For
            stored-routine operations, the server uses the
            <code class="literal">procs_priv</code> table rather than
            <code class="literal">tables_priv</code> and
            <code class="literal">columns_priv</code>.
        </p><p style="color:blue;">在确定数据库表行授予的特定于数据库的权限之后，服务器将它们添加到用户表授予的全局权限中。如果结果允许请求的操作，则授予访问权限。否则，服务器将依次检查table s_priv和columns_priv表中的用户表和列权限，将这些权限添加到用户权限中，并根据结果允许或拒绝访问。对于存储的例程操作，服务器使用procs_priv表，而不是tables_priv和columns_priv。</p><p>
            Expressed in boolean terms, the preceding description of how a
            user's privileges are calculated may be summarized like this:
        </p><p style="color:blue;">用布尔值表示，前面关于如何计算用户权限的描述可以总结如下：</p><pre data-lang="sql" class="programlisting">global privileges
OR (database privileges AND host privileges)
OR table privileges
OR column privileges
OR routine privileges
</pre><p>
            It may not be apparent why, if the global privileges are initially
            found to be insufficient for the requested operation, the server
            adds those privileges to the database, table, and column
            privileges later. The reason is that a request might require more
            than one type of privilege. For example, if you execute an
            <a class="link" href="sql-syntax.html#insert-select" title="13.2.5.1&nbsp;INSERT ... SELECT Syntax"><code class="literal">INSERT INTO ...
                SELECT</code></a> statement, you need both the
            <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> and the
            <a class="link" href="security.html#priv_select"><code class="literal">SELECT</code></a> privileges. Your privileges
            might be such that the <code class="literal">user</code> table row grants
            one privilege global and the <code class="literal">db</code> table row
            grants the other specifically for the relevant database. In this
            case, you have the necessary privileges to perform the request,
            but the server cannot tell that from either your global or
            database privileges alone. It must make an access-control decision
            based on the combined privileges.
        </p><p style="color:blue;">如果最初发现全局权限不足以执行请求的操作，那么服务器稍后将这些权限添加到数据库、表和列权限中，原因可能并不明显。原因是请求可能需要多种类型的特权。例如，如果执行插入到…select语句，您需要insert和select权限。您的特权可能是这样的：用户表行授予一个全局特权，而db表行授予另一个专门用于相关数据库的特权。在这种情况下，您拥有执行请求所需的权限，但服务器无法仅从您的全局或数据库权限来判断。它必须基于组合的权限做出访问控制决策。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="creating-accounts"></a>6.2.7&nbsp;Adding Accounts, Assigning Privileges, and Dropping Accounts</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888393088"></a><a class="indexterm" name="idm140286888392048"></a><a class="indexterm" name="idm140286888390560"></a><a class="indexterm" name="idm140286888389488"></a><a class="indexterm" name="idm140286888388000"></a><a class="indexterm" name="idm140286888386928"></a><a class="indexterm" name="idm140286888385440"></a><a class="indexterm" name="idm140286888384368"></a><a class="indexterm" name="idm140286888382880"></a><a class="indexterm" name="idm140286888381392"></a><a class="indexterm" name="idm140286888379904"></a><a class="indexterm" name="idm140286888378416"></a><a class="indexterm" name="idm140286888376928"></a><a class="indexterm" name="idm140286888375440"></a><a class="indexterm" name="idm140286888373952"></a><p>
            To manage MySQL accounts, use the SQL statements intended for that
            purpose:
        </p><p style="color:blue;">要管理mysql帐户，请使用用于此目的的sql语句：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> and
                    <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.3&nbsp;DROP USER Syntax"><code class="literal">DROP USER</code></a> create and remove
                    accounts.
                </p><p style="color:blue;">创建用户并删除用户创建和删除帐户。</p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> and
                    <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> assign privileges to and
                    revoke privileges from accounts.
                </p><p style="color:blue;">授予和撤消向帐户分配权限和从帐户撤消权限。</p></li><li class="listitem"><p>
                    <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> displays account
                    privilege assignments.
                </p><p style="color:blue;">显示授权显示帐户权限分配。</p></li></ul>
            </div>
            <p>
                Account-management statements cause the server to make appropriate
                modifications to the underlying grant tables, which are discussed
                in <a class="xref" href="security.html#grant-tables" title="6.2.3&nbsp;Grant Tables">Section&nbsp;6.2.3, “Grant Tables”</a>.
            </p><p style="color:blue;">帐户管理语句使服务器对基础授权表进行适当的修改，这些修改在第6.2.3节“授权表”中讨论。</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    Direct modification of grant tables using statements such as
                    <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                    <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
                    <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> is discouraged and done at
                    your own risk. The server is free to ignore rows that become
                    malformed as a result of such modifications.
                </p><p style="color:blue;">不鼓励使用INSERT、UPDATE或DELETE等语句直接修改GRANT表，并自行承担风险。服务器可以忽略由于此类修改而变得格式不正确的行。</p><p>
                As of MySQL 5.7.18, for any operation that modifies a grant
                table, the server checks whether the table has the expected
                structure and produces an error if not.
                <a class="link" href="programs.html#mysql-upgrade" title="4.4.7&nbsp;mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade</strong></span></a> must be run to update the
                tables to the expected structure.
            </p><p style="color:blue;">从mysql 5.7.18开始，对于任何修改授权表的操作，服务器都会检查该表是否具有预期的结构，如果没有，则会产生错误。必须运行mysql_upgrade才能将表更新为预期的结构。</p>
            </div>
            <p>
                Another option for creating accounts is to use the GUI tool
                MySQL Workbench. Also, several third-party programs offer capabilities
                for MySQL account administration. <code class="literal">phpMyAdmin</code> is
                one such program.
            </p><p style="color:blue;">创建帐户的另一个选项是使用gui工具mysql workbench。另外，一些第三方程序提供了mysql帐户管理功能。phpmyadmin就是这样一个程序。</p><p>
            This section discusses the following topics:
        </p><p style="color:blue;">本节讨论以下主题：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#creating-accounts-granting-privileges" title="Creating Accounts and Granting Privileges">Creating Accounts and Granting Privileges</a></p><p style="color:blue;">创建帐户和授予权限</p></li><li class="listitem"><p><a class="xref" href="security.html#checking-account-privileges" title="Checking Account Privileges and Properties">Checking Account Privileges and Properties</a></p><p style="color:blue;">检查帐户特权和属性</p></li><li class="listitem"><p><a class="xref" href="security.html#revoking-account-privileges" title="Revoking Account Privileges">Revoking Account Privileges</a></p><p style="color:blue;">取消帐户权限</p></li><li class="listitem"><p><a class="xref" href="security.html#dropping-accounts" title="Dropping Accounts">Dropping Accounts</a></p><p style="color:blue;">删除帐户</p></li></ul>
            </div>
            <p>
                For additional information about the statements discussed here,
                see <a class="xref" href="sql-syntax.html#account-management-sql" title="13.7.1&nbsp;Account Management Statements">Section&nbsp;13.7.1, “Account Management Statements”</a>.
            </p><p style="color:blue;">有关此处讨论的报表的更多信息，请参见第13.7.1节“账户管理报表”。</p>
            <div class="simplesect">

                <div class="titlepage">
                    <div>

                        <div class="simple">
                            <h4 class="title"><a name="creating-accounts-granting-privileges"></a>Creating Accounts and Granting Privileges</h4>
                        </div>
                    </div>
                </div>
                <p>
                    The following examples show how to use the
                    <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client program to set up new accounts.
                    These examples assume that the MySQL <code class="literal">root</code>
                    account has the <a class="link" href="security.html#priv_create-user"><code class="literal">CREATE USER</code></a>
                    privilege and all privileges that it grants to other accounts.
                </p><p style="color:blue;">下面的示例演示如何使用mysql客户端程序设置新帐户。这些示例假设mysql根帐户具有创建用户权限以及它授予其他帐户的所有权限。</p><p>
                At the command line, connect to the server as the MySQL
                <code class="literal">root</code> user, supplying the appropriate password
                at the password prompt:
            </p><p style="color:blue;">在命令行中，以mysql根用户身份连接到服务器，在密码提示下提供适当的密码：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root -p</code></strong>
Enter password: <em class="replaceable"><code>(enter root password here)</code></em>
</pre><p>
                After connecting to the server, you can add new accounts. The
                following example uses <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER
            </code></a> and <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements
                to set up four accounts (where you see
                <code class="literal">'<em class="replaceable"><code>password</code></em>'</code>,
                substitute an appropriate password):
            </p><p style="color:blue;">连接到服务器后，可以添加新帐户。以下示例使用CREATE USER和GRANT语句设置四个帐户（在您看到“password”时，请替换适当的密码）：</p><pre data-lang="sql" class="programlisting">CREATE USER 'finley'@'localhost'
  IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
GRANT ALL
  ON *.*
  TO 'finley'@'localhost'
  WITH GRANT OPTION;

CREATE USER 'finley'@'%.example.com'
  IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
GRANT ALL
  ON *.*
  TO 'finley'@'%.example.com'
  WITH GRANT OPTION;

CREATE USER 'admin'@'localhost'
  IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
GRANT RELOAD,PROCESS
  ON *.*
  TO 'admin'@'localhost';

CREATE USER 'dummy'@'localhost';
</pre><p>
                The accounts created by those statements have the following
                properties:
            </p><p style="color:blue;">这些报表创建的帐户具有以下属性：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Two accounts have a user name of <code class="literal">finley</code>.
                        Both are superuser accounts with full global privileges to
                        do anything. The <code class="literal">'finley'@'localhost'</code>
                        account can be used only when connecting from the local
                        host. The <code class="literal">'finley'@'%.example.com'</code>
                        account uses the <code class="literal">'%'</code> wildcard in the host
                        part, so it can be used to connect from any host in the
                        <code class="literal">example.com</code> domain.
                    </p><p style="color:blue;">两个帐户的用户名是finley。两者都是超级用户帐户，具有执行任何操作的完全全局权限。“finley”@“local host”帐户只能在从本地主机连接时使用。“finley”@“%.example.com”帐户在主机部分使用了“%”通配符，因此可以使用它从example.com域中的任何主机进行连接。</p><p>
                        The <code class="literal">'finley'@'localhost'</code> account is
                        necessary if there is an anonymous-user account for
                        <code class="literal">localhost</code>. Without the
                        <code class="literal">'finley'@'localhost'</code> account, that
                        anonymous-user account takes precedence when
                        <code class="literal">finley</code> connects from the local host and
                        <code class="literal">finley</code> is treated as an anonymous user.
                        The reason for this is that the anonymous-user account has a
                        more specific <code class="literal">Host</code> column value than the
                        <code class="literal">'finley'@'%'</code> account and thus comes
                        earlier in the <code class="literal">user</code> table sort order.
                        (For information about <code class="literal">user</code> table
                        sorting, see <a class="xref" href="security.html#connection-access" title="6.2.5&nbsp;Access Control, Stage 1: Connection Verification">Section&nbsp;6.2.5, “Access Control, Stage 1: Connection Verification”</a>.)
                    </p><p style="color:blue;">如果localhost有匿名用户帐户，则需要“finley”@“localhost”帐户。如果没有“finley”@“local host”帐户，则当finley从本地主机连接并且finley被视为匿名用户时，该匿名用户帐户优先。原因是匿名用户帐户的主机列值比“finley”@“%”帐户更具体，因此在用户表排序顺序中较早出现。（有关用户表排序的信息，请参阅第6.2.5节，“访问控制，第1阶段：连接验证”。）</p></li><li class="listitem"><p>
                        The <code class="literal">'admin'@'localhost'</code> account can be
                        used only by <code class="literal">admin</code> to connect from the
                        local host. It is granted the global
                        <a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a> and
                        <a class="link" href="security.html#priv_process"><code class="literal">PROCESS</code></a> administrative
                        privileges. These privileges enable the
                        <code class="literal">admin</code> user to execute the
                        <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin reload</strong></span></a>, <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
            refresh</strong></span></a>, and <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
            flush-<em class="replaceable"><code>xxx</code></em></strong></span></a> commands, as
                        well as <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin processlist</strong></span></a> . No
                        privileges are granted for accessing any databases. You
                        could add such privileges using
                        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements.
                    </p><p style="color:blue;">“admin”@“local host”帐户只能由管理员用于从本地主机连接。它被授予全局重新加载和处理管理权限。这些权限允许管理员用户执行mysqladmin reload、mysqladmin refresh和mysqladmin flush xxx命令以及mysqladmin processlist。没有授予访问任何数据库的权限。您可以使用GRANT语句添加此类特权。</p></li><li class="listitem"><p>
                        The <code class="literal">'dummy'@'localhost'</code> account has no
                        password (which is insecure and not recommended). This
                        account can be used only to connect from the local host. No
                        privileges are granted. It is assumed that you will grant
                        specific privileges to the account using
                        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements.
                    </p><p style="color:blue;">“dummy”@“localhost”帐户没有密码（这是不安全的，不推荐使用）。此帐户只能用于从本地主机连接。不授予任何特权。假设您将使用GRANT语句向帐户授予特定权限。</p></li></ul>
                </div>
                <p>
                    The previous example grants privileges at the global level. The
                    next example creates three accounts and grants them access at
                    lower levels; that is, to specific databases or objects within
                    databases. Each account has a user name of
                    <code class="literal">custom</code>, but the host name parts differ:
                </p><p style="color:blue;">前面的示例在全局级别授予特权。下一个示例创建三个帐户，并授予它们在较低级别的访问权限；即，对数据库中的特定数据库或对象的访问权限。每个帐户都有一个自定义用户名，但主机名部分不同：</p><pre data-lang="sql" class="programlisting">CREATE USER 'custom'@'localhost'
  IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
GRANT ALL
  ON bankaccount.*
  TO 'custom'@'localhost';

CREATE USER 'custom'@'host47.example.com'
  IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP
  ON expenses.*
  TO 'custom'@'host47.example.com';

CREATE USER 'custom'@'%.example.com'
  IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP
  ON customer.addresses
  TO 'custom'@'%.example.com';
</pre><p>
                The three accounts can be used as follows:
            </p><p style="color:blue;">这三个帐户可以使用如下：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The <code class="literal">'custom'@'localhost'</code> account has all
                        database-level privileges to access the
                        <code class="literal">bankaccount</code> database. The account can be
                        used to connect to the server only from the local host.
                    </p><p style="color:blue;">“custom”@“localhost”帐户具有访问bankAccount数据库的所有数据库级别权限。该帐户只能从本地主机连接到服务器。</p></li><li class="listitem"><p>
                        The <code class="literal">'custom'@'host47.example.com'</code> account
                        has specific database-level privileges to access the
                        <code class="literal">expenses</code> database. The account can be
                        used to connect to the server only from the host
                        <code class="literal">host47.example.com</code>.
                    </p><p style="color:blue;">“custom”@“host47.example.com”帐户具有访问费用数据库的特定数据库级别权限。该帐户只能从host47.example.com主机连接到服务器。</p></li><li class="listitem"><p>
                        The <code class="literal">'custom'@'%.example.com'</code> account has
                        specific table-level privileges to access the
                        <code class="literal">addresses</code> table in the
                        <code class="literal">customer</code> database, from any host in the
                        <code class="literal">example.com</code> domain. The account can be
                        used to connect to the server from all machines in the
                        domain due to use of the <code class="literal">%</code> wildcard
                        character in the host part of the account name.
                    </p><p style="color:blue;">“custom”@“%.example.com”帐户具有特定的表级权限，可以从example.com域中的任何主机访问客户数据库中的addresses表。由于在帐户名的主机部分使用了%通配符，该帐户可用于从域中的所有计算机连接到服务器。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="checking-account-privileges"></a>Checking Account Privileges and Properties</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286888287536"></a><a class="indexterm" name="idm140286888286048"></a><p>
                To see the privileges for an account, use
                <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a>:
            </p><p style="color:blue;">要查看帐户的权限，请使用“显示授权”：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GRANTS FOR 'admin'@'localhost';</code></strong>
+-----------------------------------------------------+
| Grants for admin@localhost                          |
+-----------------------------------------------------+
| GRANT RELOAD, PROCESS ON *.* TO 'admin'@'localhost' |
+-----------------------------------------------------+
</pre><p>
                To see nonprivilege properties for an account, use
                <a class="link" href="sql-syntax.html#show-create-user" title="13.7.5.12&nbsp;SHOW CREATE USER Syntax"><code class="literal">SHOW CREATE USER</code></a>:
            </p><p style="color:blue;">要查看帐户的非特权属性，请使用show create user：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE USER 'admin'@'localhost'\G</code></strong>
*************************** 1. row ***************************
CREATE USER for admin@localhost: CREATE USER 'admin'@'localhost'
IDENTIFIED WITH 'mysql_native_password'
AS '*67ACDEBDAB923990001F0FFB017EB8ED41861105'
REQUIRE NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK
</pre>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="revoking-account-privileges"></a>Revoking Account Privileges</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286888276080"></a><a class="indexterm" name="idm140286888274592"></a><p>
                To revoke account privileges, use the
                <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> statement. Privileges can
                be revoked at different levels, just as they can be granted at
                different levels.
            </p><p style="color:blue;">要撤消帐户权限，请使用REVOKE语句。特权可以在不同的级别被撤销，就像它们可以在不同的级别被授予一样。</p><p>
                Revoke global privileges:
            </p><p style="color:blue;">撤消全局权限：</p><pre data-lang="sql" class="programlisting">REVOKE ALL
  ON *.*
  FROM 'finley'@'%.example.com';

REVOKE RELOAD
  ON *.*
  FROM 'admin'@'localhost';
</pre><p>
                Revoke database-level privileges:
            </p><p style="color:blue;">撤消数据库级权限：</p><pre data-lang="sql" class="programlisting">REVOKE CREATE,DROP
  ON expenses.*
  FROM 'custom'@'host47.example.com';
</pre><p>
                Revoke table-level privileges:
            </p><p style="color:blue;">撤消表级权限：</p><pre data-lang="sql" class="programlisting">REVOKE INSERT,UPDATE,DELETE
  ON customer.addresses
  FROM 'custom'@'%.example.com';
</pre><p>
                To check the effect of privilege revocation, use
                <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a>:
            </p><p style="color:blue;">要检查权限撤消的效果，请使用show grants：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GRANTS FOR 'admin'@'localhost';</code></strong>
+---------------------------------------------+
| Grants for admin@localhost                  |
+---------------------------------------------+
| GRANT PROCESS ON *.* TO 'admin'@'localhost' |
+---------------------------------------------+
</pre>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="dropping-accounts"></a>Dropping Accounts</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286888262144"></a><a class="indexterm" name="idm140286888260656"></a><a class="indexterm" name="idm140286888259168"></a><a class="indexterm" name="idm140286888257680"></a><p>
                To remove an account, use the <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.3&nbsp;DROP USER Syntax"><code class="literal">DROP
                USER</code></a> statement. For example, to drop some of the
                accounts created previously:
            </p><p style="color:blue;">要删除帐户，请使用DROP USER语句。例如，要删除以前创建的某些帐户：</p><pre data-lang="sql" class="programlisting">DROP USER 'finley'@'localhost';
DROP USER 'finley'@'%.example.com';
DROP USER 'admin'@'localhost';
DROP USER 'dummy'@'localhost';
</pre>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="reserved-users"></a>6.2.8&nbsp;Reserved Accounts</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888252048"></a><a class="indexterm" name="idm140286888250976"></a><a class="indexterm" name="idm140286888249488"></a><p>
            One part of the MySQL installation process is data directory
            initialization (see
            <a class="xref" href="installing.html#data-directory-initialization" title="2.10.1&nbsp;Initializing the Data Directory">Section&nbsp;2.10.1, “Initializing the Data Directory”</a>). During data
            directory initialization, MySQL creates user accounts that should
            be considered reserved:
        </p><p style="color:blue;">mysql安装过程的一部分是数据目录初始化（参见2.10.1节，“初始化数据目录”）。在数据目录初始化过程中，mysql创建应被视为保留的用户帐户：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="literal">'root'@'localhost</code>: Used for administrative
                    purposes. This account has all privileges and can perform any
                    operation.
                </p><p style="color:blue;">'root'@'localhost:用于管理目的。此帐户具有所有权限，可以执行任何操作。</p><p>
                    Strictly speaking, this account name is not reserved, in the
                    sense that some installations rename the
                    <code class="literal">root</code> account to something else to avoid
                    exposing a highly privileged account with a well-known name.
                </p><p style="color:blue;">严格地说，此帐户名不是保留的，因为某些安装将根帐户重命名为其他帐户，以避免公开具有已知名称的高特权帐户。</p></li><li class="listitem"><p>
                    <code class="literal">'mysql.sys'@'localhost'</code>: Used as the
                    <code class="literal">DEFINER</code> for
                    <a class="link" href="sys-schema.html" title="Chapter&nbsp;26&nbsp;MySQL sys Schema"><code class="literal">sys</code></a> schema objects. Use of the
                    <code class="literal">mysql.sys</code> account avoids problems that
                    occur if a DBA renames or removes the <code class="literal">root</code>
                    account. This account is locked so that it cannot be used for
                    client connections.
                </p><p style="color:blue;">'mysql.sys'@'localhost'：用作sys架构对象的定义者。使用mysql.sys帐户可以避免dba重命名或删除根帐户时出现的问题。此帐户已锁定，因此无法用于客户端连接。</p></li><li class="listitem"><p>
                    <code class="literal">'mysql.session'@'localhost'</code>: Used
                    internally by plugins to access the server. This account is
                    locked so that it cannot be used for client connections.
                </p><p style="color:blue;">“mysql.session”@“localhost”：插件在内部用于访问服务器。此帐户已锁定，因此无法用于客户端连接。</p></li></ul>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="privilege-changes"></a>6.2.9&nbsp;When Privilege Changes Take Effect</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888235440"></a><a class="indexterm" name="idm140286888233984"></a><p>
            If the <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server is started without the
            <a class="link" href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option, it
            reads all grant table contents into memory during its startup
            sequence. The in-memory tables become effective for access control
            at that point.
        </p><p style="color:blue;">如果mysqld服务器在没有--skip grant tables选项的情况下启动，它会在启动序列中将所有grant table内容读入内存。内存中的表在此时对访问控制生效。</p><p>
            If you modify the grant tables indirectly using an
            account-management statement, the server notices these changes and
            loads the grant tables into memory again immediately.
            Account-management statements are described in
            <a class="xref" href="sql-syntax.html#account-management-sql" title="13.7.1&nbsp;Account Management Statements">Section&nbsp;13.7.1, “Account Management Statements”</a>. Examples include
            <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>,
            <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a>, <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET
            PASSWORD</code></a>, and <a class="link" href="sql-syntax.html#rename-user" title="13.7.1.5&nbsp;RENAME USER Syntax"><code class="literal">RENAME
            USER</code></a>.
        </p><p style="color:blue;">如果使用帐户管理语句间接修改授权表，服务器会注意到这些更改，并立即将授权表再次加载到内存中。账户管理报表见第13.7.1节“账户管理报表”。例如grant、revoke、set password和rename user。</p><p>
            If you modify the grant tables directly using statements such as
            <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
            <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
            <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> (which is not recommended),
            the changes have no effect on privilege checking until you either
            tell the server to reload the tables or restart it. Thus, if you
            change the grant tables directly but forget to reload them, the
            changes have <span class="emphasis"><em>no effect</em></span> until you restart the
            server. This may leave you wondering why your changes seem to make
            no difference!
        </p><p style="color:blue;">如果直接使用INSERT、UPDATE或DELETE等语句修改GRANT表（不建议这样做），则在您告诉服务器重新加载表或重新启动表之前，这些更改不会影响权限检查。因此，如果直接更改授权表，但忘记重新加载它们，则这些更改在重新启动服务器之前不会生效。这可能会让你想知道为什么你的改变似乎没有什么不同！</p><p>
            To tell the server to reload the grant tables, perform a
            flush-privileges operation. This can be done by issuing a
            <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH PRIVILEGES</code></a> statement or by
            executing a <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin flush-privileges</strong></span></a> or
            <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin reload</strong></span></a> command.
        </p><p style="color:blue;">要告诉服务器重新加载授权表，请执行刷新权限操作。这可以通过发出flush privileges语句或执行mysqladmin flush privileges或mysqladmin reload命令来完成。</p><p>
            A grant table reload affects privileges for each existing client
            session as follows:
        </p><p style="color:blue;">授权表重新加载影响每个现有客户端会话的特权如下：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Table and column privilege changes take effect with the
                    client's next request.
                </p><p style="color:blue;">表和列权限更改将随客户端的下一个请求而生效。</p></li><li class="listitem"><p>
                    Database privilege changes take effect the next time the
                    client executes a <code class="literal">USE
                    <em class="replaceable"><code>db_name</code></em></code> statement.
                </p><p style="color:blue;">数据库权限更改将在客户端下次执行USEDBU NAME语句时生效。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Client applications may cache the database name; thus, this
                            effect may not be visible to them without actually changing
                            to a different database.
                        </p><p style="color:blue;">客户端应用程序可能会缓存数据库名称；因此，如果不实际更改为其他数据库，此效果可能对它们不可见。</p>
                    </div>
                </li><li class="listitem"><p>
                    Global privileges and passwords are unaffected for a connected
                    client. These changes take effect only in sessions for
                    subsequent connections.
                </p><p style="color:blue;">对于已连接的客户端，全局权限和密码不受影响。这些更改仅在后续连接的会话中生效。</p></li></ul>
            </div>
            <p>
                If the server is started with the
                <a class="link" href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option, it does
                not read the grant tables or implement any access control. Any
                user can connect and perform any operation, <span class="emphasis"><em>which is
      insecure.</em></span> To cause a server thus started to read the
                tables and enable access checking, flush the privileges.
            </p><p style="color:blue;">如果服务器是用--skip grant tables选项启动的，则它不会读取grant tables或实现任何访问控制。任何用户都可以连接并执行任何不安全的操作。要使服务器开始读取表并启用访问检查，请刷新权限。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="assigning-passwords"></a>6.2.10&nbsp;Assigning Account Passwords</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888205680"></a><a class="indexterm" name="idm140286888204640"></a><a class="indexterm" name="idm140286888203568"></a><a class="indexterm" name="idm140286888202080"></a><p>
            Required credentials for clients that connect to the MySQL server
            can include a password. This section describes how to assign
            passwords for MySQL accounts.
        </p><p style="color:blue;">连接到mysql服务器的客户端所需的凭据可以包括密码。本节介绍如何为mysql帐户分配密码。</p><p>
            MySQL stores credentials in the <code class="literal">user</code> table in
            the <code class="literal">mysql</code> system database. Operations that
            assign or modify passwords are permitted only to users with the
            <a class="link" href="security.html#priv_create-user"><code class="literal">CREATE USER</code></a> privilege, or,
            alternatively, privileges for the <code class="literal">mysql</code>
            database (<a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> privilege to
            create new accounts, <a class="link" href="security.html#priv_update"><code class="literal">UPDATE</code></a>
            privilege to modify existing accounts). If the
            <a class="link" href="server-administration.html#sysvar_read_only"><code class="literal">read_only</code></a> system variable is
            enabled, use of account-modification statements such as
            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> or
            <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> additionally requires
            the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege.
        </p><p style="color:blue;">mysql在mysql系统数据库的用户表中存储凭据。分配或修改密码的操作只允许使用创建用户权限的用户，或者，MySQL数据库的特权（创建新帐户的插入权限，更新修改现有帐户的权限）。如果启用了只读系统变量，则使用CREATE USER或ALTER USER等帐户修改语句还需要超级权限。</p><p>
            The discussion here summarizes syntax only for the most common
            password-assignment statements. For complete details on other
            possibilities, see <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>,
            <a class="xref" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax">Section&nbsp;13.7.1.1, “ALTER USER Syntax”</a>, <a class="xref" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax">Section&nbsp;13.7.1.4, “GRANT Syntax”</a>, and
            <a class="xref" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax">Section&nbsp;13.7.1.7, “SET PASSWORD Syntax”</a>.
        </p><p style="color:blue;">这里的讨论只总结了最常见的密码分配语句的语法。有关其他可能性的完整详细信息，请参阅第13.7.1.2节“创建用户语法”、第13.7.1.1节“更改用户语法”、第13.7.1.4节“授予语法”和第13.7.1.7节“设置密码语法”。</p><p>
            MySQL uses plugins to perform client authentication; see
            <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. In password-assigning
            statements, the authentication plugin associated with an account
            performs any hashing required of a cleartext password specified.
            This enables MySQL to obfuscate passwords prior to storing them in
            the <code class="literal">mysql.user</code> system table. For the statements
            described here, MySQL automatically hashes the password specified.
            There are also syntax for <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
            USER</code></a> and <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> that
            permits hashed values to be specified literally. For details, see
            the descriptions of those statements.
        </p><p style="color:blue;">mysql使用插件来执行客户端身份验证；请参见第6.2.13节“可插入身份验证”。在密码分配语句中，与帐户关联的身份验证插件执行指定的明文密码所需的任何哈希运算。这使mysql能够在将密码存储在mysql.user系统表中之前混淆密码。对于这里描述的语句，mysql会自动散列指定的密码。还有create user和alter user的语法，允许按字面意思指定散列值。有关详细信息，请参见这些语句的说明。</p><p>
            To assign a password when you create a new account, use
            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> and include an
            <code class="literal">IDENTIFIED BY</code> clause:
        </p><p style="color:blue;">要在创建新帐户时分配密码，请使用CREATE USER并包含IDENTIFIED BY子句：</p><pre data-lang="sql" class="programlisting">CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> also supports syntax
            for specifying the account authentication plugin. See
            <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>.
        </p><p style="color:blue;">create user还支持指定帐户身份验证插件的语法。参见第13.7.1.2节“创建用户语法”。</p><p>
            To assign or change a password for an existing account, use the
            <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statement with an
            <code class="literal">IDENTIFIED BY</code> clause:
        </p><p style="color:blue;">若要为现有帐户分配或更改密码，请使用带有标识子句的ALTE用户语句：</p><pre data-lang="sql" class="programlisting">ALTER USER 'jeffrey'@'localhost' IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
            If you are not connected as an anonymous user, you can change your
            own password without naming your own account literally:
        </p><p style="color:blue;">如果未以匿名用户身份连接，则可以更改自己的密码，而不必按字面意思命名自己的帐户：</p><pre data-lang="sql" class="programlisting">ALTER USER USER() IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
            To change an account password from the command line, use the
            <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a> command:
        </p><p style="color:blue;">要从命令行更改帐户密码，请使用mysqladmin命令：</p><pre data-lang="terminal" class="programlisting">mysqladmin -u <em class="replaceable"><code>user_name</code></em> -h <em class="replaceable"><code>host_name</code></em> password "<em class="replaceable"><code>password</code></em>"
</pre><p>
            The account for which this command sets the password is the one
            with a row in the <code class="literal">mysql.user</code> system table that
            matches <em class="replaceable"><code>user_name</code></em> in the
            <code class="literal">User</code> column and the client host <span class="emphasis"><em>from
      which you connect</em></span> in the <code class="literal">Host</code>
            column.
        </p><p style="color:blue;">此命令设置密码的帐户是mysql.user系统表中的一行，该行与“用户”列中的用户名和“主机”列中连接的客户端主机匹配。</p>
            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Warning
                </div>
                <p>
                    Setting a password using <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a> should be
                    considered <span class="emphasis"><em>insecure</em></span>. On some systems, your
                    password becomes visible to system status programs such as
                    <span class="command"><strong>ps</strong></span> that may be invoked by other users to
                    display command lines. MySQL clients typically overwrite the
                    command-line password argument with zeros during their
                    initialization sequence. However, there is still a brief
                    interval during which the value is visible. Also, on some
                    systems this overwriting strategy is ineffective and the
                    password remains visible to <span class="command"><strong>ps</strong></span>. (SystemV Unix
                    systems and perhaps others are subject to this problem.)
                </p><p style="color:blue;">使用mysqladmin设置密码应该被认为是不安全的。在某些系统上，您的密码对系统状态程序（如ps）可见，其他用户可以调用这些程序来显示命令行。mysql客户机通常在初始化过程中用零覆盖命令行密码参数。但是，仍然有一个很短的时间间隔，在此期间该值是可见的。此外，在某些系统上，这种覆盖策略无效，密码对ps仍然可见（systemv unix系统和其他系统可能会遇到此问题）。</p>
            </div>
            <p>
                If you are using MySQL Replication, be aware that, currently, a
                password used by a replication slave as part of a
                <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1&nbsp;CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement is
                effectively limited to 32 characters in length; if the password is
                longer, any excess characters are truncated. This is not due to
                any limit imposed by the MySQL Server generally, but rather is an
                issue specific to MySQL Replication. (For more information, see
                Bug #43439.)
            </p><p style="color:blue;">如果您使用的是mysql复制，请注意，当前，作为change master to语句的一部分，复制从机使用的密码有效长度限制为32个字符；如果密码较长，则会截断任何多余的字符。这并不是由于mysql服务器通常施加的任何限制，而是mysql复制特有的问题。（有关详细信息，请参见Bug 43439。）</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="password-management"></a>6.2.11&nbsp;Password Management</h3>

                    </div>

                </div>

            </div>
            <p>
                MySQL enables database administrators to expire account passwords
                manually, and to establish a policy for automatic password
                expiration. Expiration policy can be established globally, and
                individual accounts can be set to either defer to the global
                policy or override the global policy with specific per-account
                behavior.
            </p><p style="color:blue;">mysql允许数据库管理员手动终止帐户密码，并建立自动密码过期策略。可以全局建立过期策略，并且可以将单个帐户设置为遵从全局策略或使用特定的每个帐户行为覆盖全局策略。</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#internal-versus-external-credentials" title="Internal Versus External Credentials Storage">Internal Versus External Credentials Storage</a></p><p style="color:blue;">内部凭据存储与外部凭据存储</p></li><li class="listitem"><p><a class="xref" href="security.html#password-expiration-policy" title="Password Expiration Policy">Password Expiration Policy</a></p><p style="color:blue;">密码过期策略</p></li></ul>
            </div>

            <div class="simplesect">

                <div class="titlepage">
                    <div>

                        <div class="simple">
                            <h4 class="title"><a name="internal-versus-external-credentials"></a>Internal Versus External Credentials Storage</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Some authentication plugins store account credentials internally
                    to MySQL, in the <code class="literal">mysql.user</code> system table:
                </p><p style="color:blue;">某些身份验证插件在mysql.user系统表中的mysql内部存储帐户凭据：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">mysql_native_password</code>
                    </p><p style="color:blue;">mysql_native_密码</p></li><li class="listitem"><p>
                        <code class="literal">sha256_password</code>
                    </p><p style="color:blue;">SHA256 U密码</p></li></ul>
                </div>
                <p>
                    The discussion in this section applies to such authentication
                    plugins because the password-management capabilities described
                    here are handled by MySQL itself.
                </p><p style="color:blue;">本节的讨论适用于此类身份验证插件，因为这里描述的密码管理功能是由mysql本身处理的。</p><p>
                Other authentication plugins store account credentials
                externally to MySQL. For accounts that use plugins that perform
                authentication against an external credentials system, password
                management must be handled externally against that system as
                well.
            </p><p style="color:blue;">其他身份验证插件在mysql外部存储帐户凭据。对于使用针对外部凭据系统执行身份验证的插件的帐户，还必须针对该系统在外部处理密码管理。</p><p>
                For information about individual authentication plugins, see
                <a class="xref" href="security.html#authentication-plugins" title="6.4.1&nbsp;Authentication Plugins">Section&nbsp;6.4.1, “Authentication Plugins”</a>.
            </p><p style="color:blue;">有关各个身份验证插件的信息，请参见第6.4.1节“身份验证插件”。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="password-expiration-policy"></a>Password Expiration Policy</h4>

                        </div>

                    </div>

                </div>
                <p>
                    To expire an account password manually, use the
                    <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statement:
                </p><p style="color:blue;">要手动使帐户密码过期，请使用alter user语句：</p><pre data-lang="sql" class="programlisting">ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE;
</pre><p>
                This operation marks the password expired in the corresponding
                <code class="literal">mysql.user</code> system table row.
            </p><p style="color:blue;">此操作将在相应的mysql.user system表行中标记密码过期。</p><p>
                Password expiration according to policy is automatic and is
                based on password age, which for a given account is assessed
                from the date and time of its most recent password change. The
                <code class="literal">mysql.user</code> system table indicates for each
                account when its password was last changed, and the server
                automatically treats the password as expired at client
                connection time if its age is greater than its permitted
                lifetime. This works with no explicit manual password
                expiration.
            </p><p style="color:blue;">根据策略，密码过期是自动的，并且基于密码期限，对于给定的帐户，密码期限是从其最近一次密码更改的日期和时间开始评估的。user system表为每个帐户指明上次更改密码的时间，如果密码的使用期限大于允许的使用期限，则服务器会在客户端连接时自动将其视为过期。这在没有显式手动密码过期的情况下工作。</p><p>
                To establish automatic password-expiration policy globally, use
                the <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                system variable. Its default value is 0, which disables
                automatic password expiration. If the value of
                <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a> is a
                positive integer <em class="replaceable"><code>N</code></em>, it indicates the
                permitted password lifetime, such that passwords must be changed
                every <em class="replaceable"><code>N</code></em> days.
            </p><p style="color:blue;">要在全局范围内建立自动密码过期策略，请使用默认的密码生存期系统变量。它的默认值是0，这将禁用自动密码过期。如果default_password_lifetime的值是正整数n，则表示允许的密码生存期，因此必须每n天更改一次密码。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Prior to 5.7.11, the default
                        <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                        value is 360 (passwords must be changed approximately once per
                        year). For such versions, be aware that, if you make no
                        changes to the
                        <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                        variable or to individual user accounts, each user password
                        expires after 360 days and the account starts running in
                        restricted mode. Clients that connect to the server using the
                        account then get an error indicating that the password must be
                        changed: <code class="literal">ERROR 1820 (HY000): You must reset your
                        password using ALTER USER statement before executing this
                        statement.</code>
                    </p><p style="color:blue;">在5.7.11之前，默认Debug TSpAdWord生存期值为360（密码必须每年更改约一次）。对于此类版本，请注意，如果未更改默认密码生存期变量或单个用户帐户，则每个用户密码将在360天后过期，并且帐户将在受限模式下开始运行。使用该帐户连接到服务器的客户端将收到一个错误，指示必须更改密码：错误1820（hy000）：必须在执行此语句之前使用alter user语句重置密码。</p><p>
                    However, this is easy to miss for clients that automatically
                    connect to the server, such as connections made from scripts.
                    To avoid having such clients suddenly stop working due to a
                    password expiring, make sure to change the password expiration
                    settings for those clients, like this:

                </p><p style="color:blue;">但是，对于自动连接到服务器的客户机（例如通过脚本建立的连接），这很容易丢失。为避免此类客户端由于密码过期而突然停止工作，请确保更改这些客户端的密码过期设置，如下所示：</p><pre data-lang="sql" class="programlisting">ALTER USER 'script'@'localhost' PASSWORD EXPIRE NEVER
</pre><p>

                    Alternatively, set the
                    <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                    variable to <code class="literal">0</code>, thus disabling automatic
                    password expiration for all users.
                </p><p style="color:blue;">或者，将默认的密码生存期变量设置为0，从而为所有用户禁用自动密码过期。</p>
                </div>
                <p>
                    Examples:
                </p><p style="color:blue;">实例：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        To establish a global policy that passwords have a lifetime
                        of approximately six months, start the server with these
                        lines in a server <code class="filename">my.cnf</code> file:
                    </p><p style="color:blue;">若要建立密码约为六个月的全局策略，请在服务器My.CNF文件中使用这些行启动服务器：</p><pre data-lang="ini" class="programlisting">[mysqld]
default_password_lifetime=180
</pre></li><li class="listitem"><p>
                        To establish a global policy such that passwords never
                        expire, set
                        <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                        to 0:
                    </p><p style="color:blue;">若要建立全局策略以使密码永不过期，请将默认密码生存期设置为0：</p><pre data-lang="ini" class="programlisting">[mysqld]
default_password_lifetime=0
</pre></li><li class="listitem"><p>
                        <a class="link" href="server-administration.html#sysvar_default_password_lifetime"><code class="literal">default_password_lifetime</code></a>
                        can also be changed at runtime:
                    </p><p style="color:blue;">默认密码生存期也可以在运行时更改：</p><pre data-lang="sql" class="programlisting">SET GLOBAL default_password_lifetime = 180;
SET GLOBAL default_password_lifetime = 0;
</pre></li></ul>
                </div>
                <p>
                    The global password-expiration policy applies to all accounts
                    that have not been set to override it. To establish policy for
                    individual accounts, use the <code class="literal">PASSWORD EXPIRE</code>
                    options of the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> and
                    <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statements. See
                    <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>, and <a class="xref" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax">Section&nbsp;13.7.1.1, “ALTER USER Syntax”</a>.
                </p><p style="color:blue;">全局密码过期策略应用于所有尚未设置为覆盖它的帐户。要为单个帐户建立策略，请使用create user和alter user语句的password expire选项。参见第13.7.1.2节“创建用户语法”和第13.7.1.1节“更改用户语法”。</p><p>
                Example account-specific statements:
            </p><p style="color:blue;">特定于帐户的报表示例：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Require the password to be changed every 90 days:
                    </p><p style="color:blue;">要求每90天更改一次密码：</p><pre data-lang="sql" class="programlisting">CREATE USER 'jeffrey'@'localhost' PASSWORD EXPIRE INTERVAL 90 DAY;
ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE INTERVAL 90 DAY;
</pre><p>
                        This expiration option overrides the global policy for all
                        accounts named by the statement.
                    </p><p style="color:blue;">此过期选项将覆盖由语句命名的所有帐户的全局策略。</p></li><li class="listitem"><p>
                        Disable password expiration:
                    </p><p style="color:blue;">禁用密码过期：</p><pre data-lang="sql" class="programlisting">CREATE USER 'jeffrey'@'localhost' PASSWORD EXPIRE NEVER;
ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE NEVER;
</pre><p>
                        This expiration option overrides the global policy for all
                        accounts named by the statement.
                    </p><p style="color:blue;">此过期选项将覆盖由语句命名的所有帐户的全局策略。</p></li><li class="listitem"><p>
                        Defer to the global expiration policy for all accounts named
                        by the statement:
                    </p><p style="color:blue;">对于由语句命名的所有帐户，请遵循全局过期策略：</p><pre data-lang="sql" class="programlisting">CREATE USER 'jeffrey'@'localhost' PASSWORD EXPIRE DEFAULT;
ALTER USER 'jeffrey'@'localhost' PASSWORD EXPIRE DEFAULT;
</pre></li></ul>
                </div>
                <p>
                    When a client successfully connects, the server determines
                    whether the account password has expired:
                </p><p style="color:blue;">当客户端成功连接时，服务器将确定帐户密码是否已过期：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The server checks whether the password has been manually
                        expired.
                    </p><p style="color:blue;">服务器检查密码是否已手动过期。</p></li><li class="listitem"><p>
                        Otherwise, the server checks whether the password age is
                        greater than its permitted lifetime according to the
                        automatic password expiration policy. If so, the server
                        considers the password expired.
                    </p><p style="color:blue;">否则，服务器将根据自动密码过期策略检查密码期限是否大于其允许的生存期。如果是，服务器会认为密码已过期。</p></li></ul>
                </div>
                <p>
                    If the password is expired (whether manually or automatically),
                    the server either disconnects the client or restricts the
                    operations permitted to it (see
                    <a class="xref" href="security.html#expired-password-handling" title="6.2.12&nbsp;Server Handling of Expired Passwords">Section&nbsp;6.2.12, “Server Handling of Expired Passwords”</a>). Operations
                    performed by a restricted client result in an error until the
                    user establishes a new account password:
                </p><p style="color:blue;">如果密码已过期（手动或自动），服务器将断开与客户端的连接或限制对其允许的操作（请参阅第6.2.12节“服务器对过期密码的处理”）。在用户建立新帐户密码之前，受限制的客户端执行的操作会导致错误：</p><a class="indexterm" name="idm140286888095904"></a><a class="indexterm" name="idm140286888094864"></a><a class="indexterm" name="idm140286888093376"></a><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1;</code></strong>
ERROR 1820 (HY000): You must reset your password using ALTER USER
statement before executing this statement.

mysql&gt; <strong class="userinput"><code>ALTER USER USER() IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT 1;</code></strong>
+---+
| 1 |
+---+
| 1 |
+---+
1 row in set (0.00 sec)
</pre><p>
                This restricted mode of operation permits
                <a class="link" href="sql-syntax.html#set-variable" title="13.7.4.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET</code></a>
                statements, which is useful before MySQL 5.7.6 if
                <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> must be used instead
                of <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> and the account
                password has a hashing format that requires
                <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> to be set to a
                value different from its default.
            </p><p style="color:blue;">这种受限制的操作模式允许使用set语句，如果必须使用set password而不是alter user，并且帐户密码具有哈希格式，要求将旧密码设置为与默认值不同的值，则在mysql 5.7.6之前，set语句非常有用。</p><p>
                After the client resets the password, the server restores normal
                access for the session, as well as for subsequent connections
                that use the account. It is also possible for an administrative
                user to reset the account password, but any existing restricted
                sessions for that account remain restricted. A client using the
                account must disconnect and reconnect before statements can be
                executed successfully.
            </p><p style="color:blue;">客户端重置密码后，服务器将恢复会话以及使用该帐户的后续连接的正常访问。管理用户还可以重置帐户密码，但该帐户的任何现有限制会话仍然受到限制。在成功执行语句之前，使用该帐户的客户端必须断开连接并重新连接。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Although it is possible to <span class="quote">“<span class="quote">reset</span>”</span> an expired
                        password by setting it to its current value, it is preferable,
                        as a matter of good policy, to choose a different password.
                    </p><p style="color:blue;">尽管可以通过将过期密码设置为其当前值来“重置”，但作为一个好的策略，最好选择其他密码。</p>
                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="expired-password-handling"></a>6.2.12&nbsp;Server Handling of Expired Passwords</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286888078816"></a><a class="indexterm" name="idm140286888077744"></a><a class="indexterm" name="idm140286888076256"></a><a class="indexterm" name="idm140286888074768"></a><p>
            MySQL provides password-expiration capability, which enables
            database administrators to require that users reset their
            password. Passwords can be expired manually, and on the basis of a
            policy for automatic expiration (see
            <a class="xref" href="security.html#password-management" title="6.2.11&nbsp;Password Management">Section&nbsp;6.2.11, “Password Management”</a>).
        </p><p style="color:blue;">mysql提供了密码过期功能，使数据库管理员能够要求用户重置密码。密码可以手动过期，并基于自动过期策略（请参阅第6.2.11节“密码管理”）。</p><p>
            The <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statement enables
            account password expiration. For example:
        </p><p style="color:blue;">alter user语句启用帐户密码过期。例如：</p><pre data-lang="sql" class="programlisting">ALTER USER 'myuser'@'localhost' PASSWORD EXPIRE;
</pre><p>
            For each connection that uses an account with an expired password,
            the server either disconnects the client or restricts the client
            to <span class="quote">“<span class="quote">sandbox mode,</span>”</span> in which the server permits the
            client to perform only those operations necessary to reset the
            expired password. Which action is taken by the server depends on
            both client and server settings, as discussed later.
        </p><p style="color:blue;">对于使用密码过期的帐户的每个连接，服务器要么断开客户端连接，要么将客户端限制为“沙盒模式”，在这种模式下，服务器只允许客户端执行重置过期密码所需的操作。服务器执行的操作取决于客户端和服务器设置，如后文所述。</p><p>
            If the server disconnects the client, it returns an
            <a class="link" href="error-handling.html#error_er_must_change_password_login"><code class="literal">ER_MUST_CHANGE_PASSWORD_LOGIN</code></a>
            error:
        </p><p style="color:blue;">如果服务器断开与客户端的连接，它将返回一个er_must_change_password_登录错误：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u myuser -p</code></strong>
Password: <strong class="userinput"><code>******</code></strong>
ERROR 1862 (HY000): Your password has expired. To log in you must
change it using a client that supports expired passwords.
</pre><p>
            If the server restricts the client to sandbox mode, these
            operations are permitted within the client session:
        </p><p style="color:blue;">如果服务器将客户端限制为沙盒模式，则允许在客户端会话中执行以下操作：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The client can reset the account password with
                    <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> or
                    <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>. After that has
                    been done, the server restores normal access for the session,
                    as well as for subsequent connections that use the account.
                </p><p style="color:blue;">客户端可以使用alter user或set password重置帐户密码。完成后，服务器将恢复会话以及使用该帐户的后续连接的正常访问。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Although it is possible to <span class="quote">“<span class="quote">reset</span>”</span> an expired
                            password by setting it to its current value, it is
                            preferable, as a matter of good policy, to choose a
                            different password.
                        </p><p style="color:blue;">尽管可以通过将过期密码设置为其当前值来“重置”，但作为一个好的策略，最好选择其他密码。</p>
                    </div>
                </li><li class="listitem"><p>
                    The client can use the
                    <a class="link" href="sql-syntax.html#set-variable" title="13.7.4.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET</code></a>
                    statement, which is useful before MySQL 5.7.6 if
                    <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> must be used
                    instead of <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> and the
                    account uses an authentication plugin for which the
                    <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> system variable
                    must first be set to a nondefault value to perform password
                    hashing in a specific way.
                </p><p style="color:blue;">客户端可以使用SET语句，如果必须使用SET PASSWORD而不是ALTER USER，并且帐户使用身份验证插件，则在MySQL5.7.6之前使用SET PASSWORD语句是很有用的，对于该插件，必须首先将OLD U PASSWORDS系统变量设置为非默认值，才能以特定方式执行密码哈希处理。</p></li></ul>
            </div>
            <p>
                For any operation not permitted within the session, the server
                returns an <a class="link" href="error-handling.html#error_er_must_change_password"><code class="literal">ER_MUST_CHANGE_PASSWORD</code></a>
                error:
            </p><p style="color:blue;">对于会话中不允许的任何操作，服务器将返回一个“必须更改”密码错误：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>USE performance_schema;</code></strong>
ERROR 1820 (HY000): You must reset your password using ALTER USER
statement before executing this statement.

mysql&gt; <strong class="userinput"><code>SELECT 1;</code></strong>
ERROR 1820 (HY000): You must reset your password using ALTER USER
statement before executing this statement.
</pre><p>
            That is what normally happens for interactive invocations of the
            <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client because by default such
            invocations are put in sandbox mode. To resume normal functioning,
            select a new password.
        </p><p style="color:blue;">这是mysql客户机的交互调用通常会发生的情况，因为默认情况下，此类调用处于沙盒模式。要恢复正常工作，请选择新密码。</p><p>
            For noninteractive invocations of the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
            client (for example, in batch mode), the server normally
            disconnects the client if the password is expired. To permit
            noninteractive <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> invocations to stay
            connected so that the password can be changed (using the
            statements permitted in sandbox mode), add the
            <a class="link" href="programs.html#option_mysql_connect-expired-password"><code class="option">--connect-expired-password</code></a> option to
            the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command.
        </p><p style="color:blue;">对于mysql客户机的非交互调用（例如，在批处理模式下），如果密码过期，服务器通常会断开客户机的连接。要允许非交互的mysql调用保持连接以便可以更改密码（使用沙盒模式下允许的语句），请将--connect expired password选项添加到mysql命令中。</p><p>
            As mentioned previously, whether the server disconnects an
            expired-password client or restricts it to sandbox mode depends on
            a combination of client and server settings. The following
            discussion describes the relevant settings and how they interact.
        </p><p style="color:blue;">如前所述，服务器是断开过期密码客户端的连接还是将其限制为沙盒模式取决于客户端和服务器设置的组合。下面的讨论描述了相关的设置以及它们如何交互。</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    This discussion applies only for accounts with expired
                    passwords. If a client connects using a nonexpired password, the
                    server handles the client normally.
                </p><p style="color:blue;">此讨论仅适用于密码过期的帐户。如果客户端使用非expired密码连接，服务器将正常处理客户端。</p>
            </div>
            <p>
                On the client side, a given client indicates whether it can handle
                sandbox mode for expired passwords. For clients that use the C
                client library, there are two ways to do this:
            </p><p style="color:blue;">在客户端，给定的客户端指示它是否可以处理过期密码的沙盒模式。对于使用C客户机库的客户机，有两种方法：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Pass the
                    <code class="literal">MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS</code> flag
                    to <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> prior to
                    connecting:
                </p><p style="color:blue;">连接之前，请将mysql_opt_can_handle_expired_passwords标志传递给mysql_options（）：</p><pre data-lang="c" class="programlisting">my_bool arg = 1;
mysql_options(mysql,
              MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS,
              &amp;arg);
</pre><p>
                    This is the technique used within the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
                    client, which enables
                    <code class="literal">MYSQL_OPT_CAN_HANDLE_EXPIRED_PASSWORDS</code> if
                    invoked interactively or with the
                    <a class="link" href="programs.html#option_mysql_connect-expired-password"><code class="option">--connect-expired-password</code></a>
                    option.
                </p><p style="color:blue;">这是在mysql客户端中使用的技术，如果以交互方式调用或使用--connect expired password选项调用，则mysql选项可以处理过期的密码。</p></li><li class="listitem"><p>
                    Pass the
                    <code class="literal">CLIENT_CAN_HANDLE_EXPIRED_PASSWORDS</code> flag to
                    <a class="link" href="connectors-apis.html#mysql-real-connect" title="27.8.7.54&nbsp;mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> at
                    connect time:
                </p><p style="color:blue;">在连接时将client_can_handle_expired_passwords标志传递给mysql_real_connect（）：</p><pre data-lang="c" class="programlisting">MYSQL mysql;
mysql_init(&amp;mysql);
if (!mysql_real_connect(&amp;mysql,
                        host, user, password, db,
                        port, unix_socket,
                        CLIENT_CAN_HANDLE_EXPIRED_PASSWORDS))
{
  ... handle error ...
}
</pre></li></ul>
            </div>
            <p>
                Other MySQL Connectors have their own conventions for indicating
                readiness to handle sandbox mode. See the documentation for the
                Connector in which you are interested.
            </p><p style="color:blue;">其他mysql连接器有自己的约定来指示是否准备好处理沙箱模式。请参阅您感兴趣的连接器的文档。</p><p>
            On the server side, if a client indicates that it can handle
            expired passwords, the server puts it in sandbox mode.
        </p><p style="color:blue;">在服务器端，如果客户端指示它可以处理过期的密码，服务器会将其置于沙盒模式。</p><p>
            If a client does not indicate that it can handle expired passwords
            (or uses an older version of the client library that cannot so
            indicate), the server action depends on the value of the
            <a class="link" href="server-administration.html#sysvar_disconnect_on_expired_password"><code class="literal">disconnect_on_expired_password</code></a>
            system variable:
        </p><p style="color:blue;">如果客户端未指示它可以处理过期的密码（或使用无法如此指示的旧版本的客户端库），则服务器操作取决于disconnect\u on\u expired\u password系统变量的值：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    If
                    <a class="link" href="server-administration.html#sysvar_disconnect_on_expired_password"><code class="literal">disconnect_on_expired_password</code></a>
                    is enabled (the default), the server disconnects the client
                    with an
                    <a class="link" href="error-handling.html#error_er_must_change_password_login"><code class="literal">ER_MUST_CHANGE_PASSWORD_LOGIN</code></a>
                    error.
                </p><p style="color:blue;">如果启用了disconnect_on_expired_password（默认设置），则服务器会使用er_must_change_password登录错误断开与客户端的连接。</p></li><li class="listitem"><p>
                    If
                    <a class="link" href="server-administration.html#sysvar_disconnect_on_expired_password"><code class="literal">disconnect_on_expired_password</code></a>
                    is disabled, the server puts the client in sandbox mode.
                </p><p style="color:blue;">如果disconnect_on_expired_密码被禁用，服务器会将客户端置于沙盒模式。</p></li></ul>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="pluggable-authentication"></a>6.2.13&nbsp;Pluggable Authentication</h3>

                    </div>

                </div>

            </div>
            <p>
                When a client connects to the MySQL server, the server uses the
                user name provided by the client and the client host to select the
                appropriate account row from the <code class="literal">mysql.user</code>
                system table. The server then authenticates the client,
                determining from the account row which authentication plugin
                applies to the client:
            </p><p style="color:blue;">当客户端连接到mysql服务器时，服务器使用客户端和客户端主机提供的用户名从mysql.user system表中选择适当的帐户行。然后，服务器对客户端进行身份验证，从帐户行确定哪个身份验证插件应用于客户端：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    If the server cannot find the plugin, an error occurs and the
                    connection attempt is rejected.
                </p><p style="color:blue;">如果服务器找不到插件，则会发生错误并拒绝连接尝试。</p></li><li class="listitem"><p>
                    Otherwise, the server invokes that plugin to authenticate the
                    user, and the plugin returns a status to the server indicating
                    whether the user provided the correct password and is
                    permitted to connect.
                </p><p style="color:blue;">否则，服务器将调用该插件对用户进行身份验证，该插件将向服务器返回一个状态，指示用户是否提供了正确的密码并允许连接。</p></li></ul>
            </div>
            <p>
                Pluggable authentication enables these important capabilities:
            </p><p style="color:blue;">可插拔身份验证支持以下重要功能：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Choice of authentication methods.&nbsp;</b>
                    Pluggable authentication makes it easy for DBAs to choose
                    and change the authentication method used for individual
                    MySQL accounts.
                </p><p style="color:blue;">身份验证方法的选择。可插拔身份验证使dba可以方便地选择和更改用于单个mysql帐户的身份验证方法。</p></li><li class="listitem"><p><b>External authentication.&nbsp;</b>
                    Pluggable authentication makes it possible for clients to
                    connect to the MySQL server with credentials appropriate for
                    authentication methods that store credentials elsewhere than
                    in the <code class="literal">mysql.user</code> system table. For
                    example, plugins can be created to use external
                    authentication methods such as PAM, Windows login IDs, LDAP,
                    or Kerberos.
                </p><p style="color:blue;">外部身份验证。可插入身份验证使客户端能够使用适合于将凭据存储在mysql.user系统表以外的其他位置的身份验证方法的凭据连接到mysql服务器。例如，可以创建插件来使用外部身份验证方法，如pam、windows登录id、ldap或kerberos。</p></li><li class="listitem"><p><b>Proxy users:&nbsp;</b>
                    If a user is permitted to connect, an authentication plugin
                    can return to the server a user name different from the name
                    of the connecting user, to indicate that the connecting user
                    is a proxy for another user (the proxied user). While the
                    connection lasts, the proxy user is treated, for purposes of
                    access control, as having the privileges of the proxied
                    user. In effect, one user impersonates another. For more
                    information, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">代理用户：如果允许用户连接，则验证插件可以返回服务器与连接用户的名称不同的用户名，以指示连接用户是另一个用户（代理用户）的代理。当连接持续时，出于访问控制的目的，代理用户被处理为具有代理用户的特权。实际上，一个用户模拟另一个用户。有关更多信息，请参见第6.2.14节“代理用户”。</p></li></ul>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                <div class="admon-title">
                    Note
                </div>
                <p>
                    If you start the server with the
                    <a class="link" href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option,
                    authentication plugins are not used even if loaded because the
                    server performs no client authentication and permits any client
                    to connect. Because this is insecure, you might want to use
                    <a class="link" href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> in
                    conjunction with
                    <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">--skip-networking</code></a> to prevent
                    remote clients from connecting.
                </p><p style="color:blue;">如果使用--skip grant tables选项启动服务器，则即使加载了身份验证插件，也不会使用该插件，因为服务器不执行客户端身份验证并允许任何客户端连接。由于这是不安全的，您可能希望使用--skip grant tables和--skip networking来防止远程客户端连接。</p>
            </div>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#pluggable-authentication-available-plugins" title="Available Authentication Plugins">Available Authentication Plugins</a></p><p style="color:blue;">可用的身份验证插件</p></li><li class="listitem"><p><a class="xref" href="security.html#pluggable-authentication-usage" title="Authentication Plugin Usage">Authentication Plugin Usage</a></p><p style="color:blue;">身份验证插件使用</p></li><li class="listitem"><p><a class="xref" href="security.html#pluggable-authentication-restrictions" title="Restrictions on Pluggable Authentication">Restrictions on Pluggable Authentication</a></p><p style="color:blue;">可插入认证的限制</p></li></ul>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="pluggable-authentication-available-plugins"></a>Available Authentication Plugins</h4>

                        </div>

                    </div>

                </div>
                <p>
                    MySQL 5.7 provides these authentication plugins:
                </p><p style="color:blue;">mysql 5.7提供了以下身份验证插件：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Plugins that perform native authentication; that is,
                        authentication based on the password hashing methods in use
                        from before the introduction of pluggable authentication in
                        MySQL. The <code class="literal">mysql_native_password</code> plugin
                        implements authentication based on the native password
                        hashing method. The <code class="literal">mysql_old_password</code>
                        plugin implements native authentication based on the older
                        (pre-4.1) password hashing method (and is deprecated and
                        removed in MySQL 5.7.5). See
                        <a class="xref" href="security.html#native-pluggable-authentication" title="6.4.1.1&nbsp;Native Pluggable Authentication">Section&nbsp;6.4.1.1, “Native Pluggable Authentication”</a>, and
                        <a class="xref" href="security.html#old-native-pluggable-authentication" title="6.4.1.2&nbsp;Old Native Pluggable Authentication">Section&nbsp;6.4.1.2, “Old Native Pluggable Authentication”</a>.
                    </p><p style="color:blue;">执行本机身份验证的插件；也就是说，在mysql中引入可插入身份验证之前，基于使用的密码散列方法进行身份验证。mysql_native_password插件基于本机密码散列方法实现身份验证。mysql_old_password插件基于旧的（4.1之前的）密码散列方法实现本机身份验证（mysql 5.7.5中已弃用并删除）。参见第6.4.1.1节，“本机可插拔身份验证”和第6.4.1.2节，“旧本机可插拔身份验证”。</p></li><li class="listitem"><p>
                        Plugins that perform authentication using SHA-256 password
                        hashing. This is stronger encryption than that available
                        with native authentication. See
                        <a class="xref" href="security.html#sha256-pluggable-authentication" title="6.4.1.5&nbsp;SHA-256 Pluggable Authentication">Section&nbsp;6.4.1.5, “SHA-256 Pluggable Authentication”</a>, and
                        <a class="xref" href="security.html#caching-sha2-pluggable-authentication" title="6.4.1.4&nbsp;Caching SHA-2 Pluggable Authentication">Section&nbsp;6.4.1.4, “Caching SHA-2 Pluggable Authentication”</a>.
                    </p><p style="color:blue;">使用sha-256密码散列进行身份验证的插件。这比本机身份验证提供的加密功能更强。参见第6.4.1.5节，“SHA-256可插拔身份验证”和第6.4.1.4节，“缓存SHA-2可插拔身份验证”。</p></li><li class="listitem"><p>
                        A client-side plugin that sends the password to the server
                        without hashing or encryption. This plugin is used in
                        conjunction with server-side plugins that require access to
                        the password exactly as provided by the client user. See
                        <a class="xref" href="security.html#cleartext-pluggable-authentication" title="6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.6, “Client-Side Cleartext Pluggable Authentication”</a>.
                    </p><p style="color:blue;">一个客户端插件，它将密码发送到服务器而不需要散列或加密。此插件与服务器端插件一起使用，这些插件要求完全按照客户机用户提供的方式访问密码。见第6.4.1.6节，“客户端明文可插拔认证”。</p></li><li class="listitem"><p>
                        A plugin that performs external authentication using PAM
                        (Pluggable Authentication Modules), enabling MySQL Server to
                        use PAM to authenticate MySQL users. This plugin supports
                        proxy users as well. See
                        <a class="xref" href="security.html#pam-pluggable-authentication" title="6.4.1.7&nbsp;PAM Pluggable Authentication">Section&nbsp;6.4.1.7, “PAM Pluggable Authentication”</a>.
                    </p><p style="color:blue;">使用pam（可插入的身份验证模块）执行外部身份验证的插件，使mysql服务器能够使用pam对mysql用户进行身份验证。这个插件也支持代理用户。见第6.4.1.7节“PAM可插拔认证”。</p></li><li class="listitem"><p>
                        A plugin that performs external authentication on Windows,
                        enabling MySQL Server to use native Windows services to
                        authenticate client connections. Users who have logged in to
                        Windows can connect from MySQL client programs to the server
                        based on the information in their environment without
                        specifying an additional password. This plugin supports
                        proxy users as well. See
                        <a class="xref" href="security.html#windows-pluggable-authentication" title="6.4.1.8&nbsp;Windows Pluggable Authentication">Section&nbsp;6.4.1.8, “Windows Pluggable Authentication”</a>.
                    </p><p style="color:blue;">在Windows上执行外部身份验证的插件，使MySQL Server能够使用本机Windows服务对客户端连接进行身份验证。登录到Windows的用户可以根据其环境中的信息从MySQL客户端程序连接到服务器，而无需指定其他密码。这个插件也支持代理用户。参见第6.4.1.8节“Windows可插拔身份验证”。</p></li><li class="listitem"><p>
                        Plugins that perform authentication using LDAP (Lightweight
                        Directory Access Protocol) to authenticate MySQL users by
                        accessing directory services such as X.500. These plugins
                        support proxy users as well. See
                        <a class="xref" href="security.html#ldap-pluggable-authentication" title="6.4.1.9&nbsp;LDAP Pluggable Authentication">Section&nbsp;6.4.1.9, “LDAP Pluggable Authentication”</a>.
                    </p><p style="color:blue;">使用LDAP（轻量级目录访问协议）执行身份验证的插件，通过访问目录服务（如X.500）对MySQL用户进行身份验证。这些插件也支持代理用户。参见第6.4.1.9节“LDAP可插拔身份验证”。</p></li><li class="listitem"><p>
                        A plugin that prevents all client connections to any account
                        that uses it. Use cases for this plugin include proxied
                        accounts that should never permit direct login but are
                        accessed only through proxy accounts and accounts that must
                        be able to execute stored programs and views with elevated
                        privileges without exposing those privileges to ordinary
                        users. See
                        <a class="xref" href="security.html#no-login-pluggable-authentication" title="6.4.1.10&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.10, “No-Login Pluggable Authentication”</a>.
                    </p><p style="color:blue;">阻止所有客户端连接到使用它的任何帐户的插件。此插件的用例包括代理帐户，这些帐户不应该允许直接登录，但只能通过代理帐户和帐户访问，这些帐户必须能够执行具有高级权限的存储程序和视图，而不将这些特权暴露给普通用户。参见第6.4.1.10节“无登录可插拔认证”。</p></li><li class="listitem"><p>
                        A plugin that authenticates clients that connect from the
                        local host through the Unix socket file. See
                        <a class="xref" href="security.html#socket-pluggable-authentication" title="6.4.1.11&nbsp;Socket Peer-Credential Pluggable Authentication">Section&nbsp;6.4.1.11, “Socket Peer-Credential Pluggable Authentication”</a>.
                    </p><p style="color:blue;">对通过unix套接字文件从本地主机连接的客户端进行身份验证的插件。参见第6.4.1.11节，“Socket Peer Credential Pluggable Authentication”。</p></li><li class="listitem"><p>
                        A test plugin that checks account credentials and logs
                        success or failure to the server error log. This plugin is
                        intended for testing and development purposes, and as an
                        example of how to write an authentication plugin. See
                        <a class="xref" href="security.html#test-pluggable-authentication" title="6.4.1.12&nbsp;Test Pluggable Authentication">Section&nbsp;6.4.1.12, “Test Pluggable Authentication”</a>.
                    </p><p style="color:blue;">检查帐户凭据并将成功或失败记录到服务器错误日志的测试插件。此插件用于测试和开发目的，并作为如何编写身份验证插件的示例。参见第6.4.1.12节“测试可插拔身份验证”。</p></li></ul>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        For information about current restrictions on the use of
                        pluggable authentication, including which connectors support
                        which plugins, see
                        <a class="xref" href="security.html#pluggable-authentication-restrictions" title="Restrictions on Pluggable Authentication">Restrictions on Pluggable Authentication</a>.
                    </p><p style="color:blue;">有关使用可插入身份验证的当前限制（包括哪些连接器支持哪些插件）的信息，请参阅可插入身份验证限制。</p><p>
                    Third-party connector developers should read that section to
                    determine the extent to which a connector can take advantage
                    of pluggable authentication capabilities and what steps to
                    take to become more compliant.
                </p><p style="color:blue;">第三方连接器开发人员应该阅读该部分，以确定连接器在多大程度上可以利用可插拔身份验证功能，以及要采取哪些步骤来变得更加兼容。</p>
                </div>
                <p>
                    If you are interested in writing your own authentication
                    plugins, see <a class="xref" href="extending-mysql.html#writing-authentication-plugins" title="28.2.4.9&nbsp;Writing Authentication Plugins">Section&nbsp;28.2.4.9, “Writing Authentication Plugins”</a>.
                </p><p style="color:blue;">如果您对编写自己的身份验证插件感兴趣，请参阅第28.2.4.9节“编写身份验证插件”。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="pluggable-authentication-usage"></a>Authentication Plugin Usage</h4>

                        </div>

                    </div>

                </div>
                <p>
                    This section provides general instructions for installing and
                    using authentication plugins. For instructions specific to a
                    given plugin, see the section that describes that plugin under
                    <a class="xref" href="security.html#authentication-plugins" title="6.4.1&nbsp;Authentication Plugins">Section&nbsp;6.4.1, “Authentication Plugins”</a>.
                </p><p style="color:blue;">本节提供安装和使用身份验证插件的一般说明。有关特定于给定插件的说明，请参阅6.4.1节“验证插件”下描述该插件的部分。</p><p>
                In general, pluggable authentication uses a pair of
                corresponding plugins on the server and client sides, so you use
                a given authentication method like this:
            </p><p style="color:blue;">通常，可插入认证在服务器端和客户端使用一对对应的插件，因此您可以使用如下给定的认证方法：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If necessary, install the plugin library or libraries
                        containing the appropriate plugins. On the server host,
                        install the library containing the server-side plugin, so
                        that the server can use it to authenticate client
                        connections. Similarly, on each client host, install the
                        library containing the client-side plugin for use by client
                        programs. Authentication plugins that are built in need not
                        be installed.
                    </p><p style="color:blue;">如有必要，安装一个或多个包含适当插件的插件库。在服务器主机上，安装包含服务器端插件的库，以便服务器可以使用它来验证客户端连接。同样，在每个客户端主机上，安装包含客户端插件的库，以供客户端程序使用。不需要安装内置的身份验证插件。</p></li><li class="listitem"><p>
                        For each MySQL account that you create, specify the
                        appropriate server-side plugin to use for authentication. If
                        the account is to use the default authentication plugin, the
                        account-creation statement need not specify the plugin
                        explicitly. The
                        <a class="link" href="server-administration.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
                        system variable configures the default authentication
                        plugin.
                    </p><p style="color:blue;">对于您创建的每个mysql帐户，指定用于身份验证的适当服务器端插件。如果帐户要使用默认的身份验证插件，则帐户创建语句无需显式指定该插件。default_authentication_plugin系统变量配置默认的身份验证插件。</p></li><li class="listitem"><p>
                        When a client connects, the server-side plugin tells the
                        client program which client-side plugin to use for
                        authentication.
                    </p><p style="color:blue;">当客户端连接时，服务器端插件告诉客户端程序要使用哪个客户端插件进行身份验证。</p></li></ul>
                </div>
                <p>
                    In the case that an account uses an authentication method that
                    is the default for both the server and the client program, the
                    server need not communicate to the client which client-side
                    plugin to use, and a round trip in client/server negotiation can
                    be avoided. This is true for accounts that use native MySQL
                    authentication.
                </p><p style="color:blue;">如果帐户使用服务器和客户端程序的默认身份验证方法，则服务器无需与要使用哪个客户端插件的客户端通信，并且可以避免客户端/服务器协商中的往返。对于使用本机mysql身份验证的帐户，这是正确的。</p><p>
                For standard MySQL clients such as <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and
                <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a>, the
                <a class="link" href="programs.html#option_mysql_default-auth"><code class="option">--default-auth=<em class="replaceable"><code>plugin_name</code></em></code></a>
                option can be specified on the command line as a hint about
                which client-side plugin the program can expect to use, although
                the server will override this if the server-side plugin
                associated with the user account requires a different
                client-side plugin.
            </p><p style="color:blue;">对于mysql和mysqladmin等标准mysql客户端，可以在命令行上指定--default auth=plugin_name选项，作为程序可以使用哪个客户端插件的提示，不过如果与用户帐户关联的服务器端插件需要不同的客户端插件，则服务器将覆盖此选项。</p><p>
                If the client program does not find the client-side plugin
                library file, specify a
                <a class="link" href="programs.html#option_mysql_plugin-dir"><code class="option">--plugin-dir=<em class="replaceable"><code>dir_name</code></em></code></a>
                option to indicate the plugin library directory location.
            </p><p style="color:blue;">如果客户端程序找不到客户端插件库文件，请指定--plugin dir=dir_name选项以指示插件库目录位置。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="pluggable-authentication-restrictions"></a>Restrictions on Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887953616"></a><a class="indexterm" name="idm140286887952160"></a><p>
                The first part of this section describes general restrictions on
                the applicability of the pluggable authentication framework
                described at <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. The
                second part describes how third-party connector developers can
                determine the extent to which a connector can take advantage of
                pluggable authentication capabilities and what steps to take to
                become more compliant.
            </p><p style="color:blue;">本节的第一部分描述了对第6.2.13节“可插入认证”中描述的可插入认证框架的适用性的一般限制。第二部分描述了第三方连接器开发人员如何确定连接器可以在多大程度上利用可插拔身份验证功能，以及要采取哪些步骤来变得更加兼容。</p><p>
                The term <span class="quote">“<span class="quote">native authentication</span>”</span> used here refers
                to authentication against passwords stored in the
                <code class="literal">mysql.user</code> system table. This is the same
                authentication method provided by older MySQL servers, before
                pluggable authentication was implemented. <span class="quote">“<span class="quote">Windows native
        authentication</span>”</span> refers to authentication using the
                credentials of a user who has already logged in to Windows, as
                implemented by the Windows Native Authentication plugin
                (<span class="quote">“<span class="quote">Windows plugin</span>”</span> for short).
            </p><p style="color:blue;">这里使用的术语“本机身份验证”是指对mysql.user系统表中存储的密码进行身份验证。这与以前的mysql服务器在实现可插入身份验证之前提供的身份验证方法相同。“Windows本机身份验证”是指使用已登录到Windows的用户的凭据进行身份验证，由Windows本机身份验证插件实现（简称“Windows插件”）。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#pluggable-authentication-restrictions-general" title="General Pluggable Authentication Restrictions">General Pluggable Authentication Restrictions</a></p><p style="color:blue;">通用可插拔身份验证限制</p></li><li class="listitem"><p><a class="xref" href="security.html#pluggable-authentication-restrictions-third-party-connectors" title="Pluggable Authentication and Third-Party Connectors">Pluggable Authentication and Third-Party Connectors</a></p><p style="color:blue;">可插拔身份验证和第三方连接器</p></li></ul>
                </div>
                <h5><a name="pluggable-authentication-restrictions-general"></a>General Pluggable Authentication Restrictions</h5>

                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <span class="bold"><strong>Connector/C, Connector/C++:</strong></span>
                        Clients that use these connectors can connect to the server
                        only through accounts that use native authentication.
                    </p><p style="color:blue;">连接器/ C，连接器/ C++：使用这些连接器的客户端只能通过使用本地身份验证的帐户连接到服务器。</p><p>
                        Exception: A connector supports pluggable authentication if
                        it was built to link to <code class="literal">libmysqlclient</code>
                        dynamically (rather than statically) and it loads the
                        current version of <code class="literal">libmysqlclient</code> if that
                        version is installed, or if the connector is recompiled from
                        source to link against the current
                        <code class="literal">libmysqlclient</code>.
                    </p><p style="color:blue;">异常：如果连接器是为动态（而不是静态）链接到libmysqlclient而构建的，并且如果安装了libmysqlclient的当前版本，或者如果连接器是从源代码重新编译到链接到当前libmysqlclient，则连接器支持可插入身份验证。</p></li><li class="listitem"><p>
                        <span class="bold"><strong>Connector/NET:</strong></span> Clients that use
                        Connector/NET can connect to the server through accounts that use
                        native authentication or Windows native authentication.
                    </p><p style="color:blue;">connect or/net：使用connector/net的客户端可以通过使用本机身份验证或Windows本机身份验证的帐户连接到服务器。</p></li><li class="listitem"><p>
                        <span class="bold"><strong>Connector/PHP:</strong></span> Clients that
                        use this connector can connect to the server only through
                        accounts that use native authentication, when compiled using
                        the MySQL native driver for PHP
                        (<code class="literal">mysqlnd</code>).
                    </p><p style="color:blue;">connector/php：使用此连接器的客户机只能通过使用mysql native driver for php（mysqlnd）编译时使用本机身份验证的帐户连接到服务器。</p></li><li class="listitem"><p>
            <span class="bold"><strong>Windows native
            authentication:</strong></span> Connecting through an account
                        that uses the Windows plugin requires Windows Domain setup.
                        Without it, NTLM authentication is used and then only local
                        connections are possible; that is, the client and server
                        must run on the same computer.
                    </p><p style="color:blue;">Windows本机身份验证：通过使用Windows插件的帐户连接需要安装Windows域。如果没有它，则使用ntlm身份验证，然后只能使用本地连接；也就是说，客户端和服务器必须在同一台计算机上运行。</p></li><li class="listitem"><p>
                        <span class="bold"><strong>Proxy users:</strong></span> Proxy user
                        support is available to the extent that clients can connect
                        through accounts authenticated with plugins that implement
                        proxy user capability (that is, plugins that can return a
                        user name different from that of the connecting user). For
                        example, the PAM and Windows plugins support proxy users.
                        The <code class="literal">mysql_native_password</code> and
                        <code class="literal">sha256_password</code> authentication plugins do
                        not support proxy users by default, but can be configured to
                        do so; see
                        <a class="xref" href="security.html#proxy-users-server-user-mapping" title="Server Support for Proxy User Mapping">Server Support for Proxy User Mapping</a>.
                    </p><p style="color:blue;">代理用户：代理用户支持是可用的，客户端可以通过使用实现代理用户功能的插件（即可以返回不同于连接用户的用户名的插件）验证的帐户进行连接。例如，pam和windows插件支持代理用户。mysql_native_password和sha256_password身份验证插件默认不支持代理用户，但可以配置为支持代理用户；请参阅服务器对代理用户映射的支持。</p></li><li class="listitem"><p>
                        <span class="bold"><strong>Replication</strong></span>: Replication
                        slaves can employ not only master accounts using native
                        authentication, but can also connect through master accounts
                        that use nonnative authentication if the required
                        client-side plugin is available. If the plugin is built into
                        <code class="literal">libmysqlclient</code>, it is available by
                        default. Otherwise, the plugin must be installed on the
                        slave side in the directory named by the slave
                        <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
                    </p><p style="color:blue;">复制：复制从机不仅可以使用使用本机身份验证的主帐户，还可以通过使用非本机身份验证的主帐户进行连接（如果所需的客户端插件可用）。如果插件内置在libmysqlclient中，那么它在默认情况下是可用的。否则，该插件必须安装在slave plugin_dir系统变量命名的目录中的从机端。</p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="storage-engines.html#federated-storage-engine" title="15.8&nbsp;The FEDERATED Storage Engine"><code class="literal">FEDERATED</code></a>
            tables:</strong></span> A <a class="link" href="storage-engines.html#federated-storage-engine" title="15.8&nbsp;The FEDERATED Storage Engine"><code class="literal">FEDERATED</code></a>
                        table can access the remote table only through accounts on
                        the remote server that use native authentication.
                    </p><p style="color:blue;">联合表：联合表只能通过使用本机身份验证的远程服务器上的帐户访问远程表。</p></li></ul>
                </div>
                <h5><a name="pluggable-authentication-restrictions-third-party-connectors"></a>Pluggable Authentication and Third-Party Connectors</h5>
                <p>
                    Third-party connector developers can use the following
                    guidelines to determine readiness of a connector to take
                    advantage of pluggable authentication capabilities and what
                    steps to take to become more compliant:
                </p><p style="color:blue;">第三方连接器开发人员可以使用以下指导原则来确定连接器是否准备好利用可插拔身份验证功能，以及要采取哪些步骤使其更符合要求：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        An existing connector to which no changes have been made
                        uses native authentication and clients that use the
                        connector can connect to the server only through accounts
                        that use native authentication. <span class="emphasis"><em>However, you
            should test the connector against a recent version of the
            server to verify that such connections still work without
            problem.</em></span>
                    </p><p style="color:blue;">未进行更改的现有连接器使用本机身份验证，使用连接器的客户端只能通过使用本地身份验证的帐户连接到服务器。但是，您应该针对服务器的最新版本测试连接器，以验证此类连接是否仍然正常工作。</p><p>
                        Exception: A connector might work with pluggable
                        authentication without any changes if it links to
                        <code class="literal">libmysqlclient</code> dynamically (rather than
                        statically) and it loads the current version of
                        <code class="literal">libmysqlclient</code> if that version is
                        installed.
                    </p><p style="color:blue;">异常：如果连接器动态（而不是静态）链接到libmysqlclient，并且如果安装了libmysqlclient的当前版本，则连接器可以在不做任何更改的情况下使用可插入身份验证。</p></li><li class="listitem"><p>
                        To take advantage of pluggable authentication capabilities,
                        a connector that is <code class="literal">libmysqlclient</code>-based
                        should be relinked against the current version of
                        <code class="literal">libmysqlclient</code>. This enables the
                        connector to support connections though accounts that
                        require client-side plugins now built into
                        <code class="literal">libmysqlclient</code> (such as the cleartext
                        plugin needed for PAM authentication and the Windows plugin
                        needed for Windows native authentication). Linking with a
                        current <code class="literal">libmysqlclient</code> also enables the
                        connector to access client-side plugins installed in the
                        default MySQL plugin directory (typically the directory
                        named by the default value of the local server's
                        <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                        variable).
                    </p><p style="color:blue;">为了利用可插入的身份验证功能，应该将基于libmysqlclient的连接器重新链接到libmysqlclient的当前版本。这使得连接器能够通过需要客户端插件的帐户支持连接，这些插件现在内置在libmysqlclient中（例如pam身份验证所需的cleartext插件和windows本机身份验证所需的windows插件）。通过与当前libmysqlclient的链接，连接器还可以访问安装在默认mysql插件目录中的客户端插件（通常是由本地服务器plugin dir系统变量的默认值命名的目录）。</p><p>
                        If a connector links to <code class="literal">libmysqlclient</code>
                        dynamically, it must be ensured that the newer version of
                        <code class="literal">libmysqlclient</code> is installed on the client
                        host and that the connector loads it at runtime.
                    </p><p style="color:blue;">如果连接器动态链接到libmysqlclient，则必须确保客户端主机上安装了libmysqlclient的较新版本，并且连接器在运行时加载它。</p></li><li class="listitem"><p>
                        Another way for a connector to support a given
                        authentication method is to implement it directly in the
                        client/server protocol. Connector/NET uses this approach to provide
                        support for Windows native authentication.
                    </p><p style="color:blue;">连接器支持给定身份验证方法的另一种方法是直接在客户机/服务器协议中实现它。connector/net使用这种方法来提供对windows本机身份验证的支持。</p></li><li class="listitem"><p>
                        If a connector should be able to load client-side plugins
                        from a directory different from the default plugin
                        directory, it must implement some means for client users to
                        specify the directory. Possibilities for this include a
                        command-line option or environment variable from which the
                        connector can obtain the directory name. Standard MySQL
                        client programs such as <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> and
                        <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a> implement a
                        <code class="option">--plugin-dir</code> option. See also
                        <a class="xref" href="connectors-apis.html#c-api-plugin-functions" title="27.8.14&nbsp;C API Client Plugin Functions">Section&nbsp;27.8.14, “C API Client Plugin Functions”</a>.
                    </p><p style="color:blue;">如果连接器应该能够从不同于默认插件目录的目录加载客户端插件，那么它必须实现一些方法，以便客户端用户指定目录。这可能包括命令行选项或环境变量，连接器可以从中获取目录名。标准的mysql客户端程序，如mysql和mysqladmin，实现了一个--plugin dir选项。另见第27.8.14节“C API客户端插件函数”。</p></li><li class="listitem"><p>
                        Proxy user support by a connector depends, as described
                        earlier in this section, on whether the authentication
                        methods that it supports permit proxy users.
                    </p><p style="color:blue;">连接器对代理用户的支持取决于它所支持的身份验证方法是否允许代理用户，如本节前面所述。</p></li></ul>
                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="proxy-users"></a>6.2.14&nbsp;Proxy Users</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286887897488"></a><p>
            The MySQL server authenticates client connections using
            authentication plugins. The plugin that authenticates a given
            connection may request that the connecting (external) user be
            treated as a different user for privilege-checking purposes. This
            enables the external user to be a proxy for the second user; that
            is, to assume the privileges of the second user:
        </p><p style="color:blue;">mysql服务器使用身份验证插件对客户端连接进行身份验证。验证给定连接的插件可能请求将连接（外部）用户视为不同的用户以进行权限检查。这使得外部用户可以成为第二个用户的代理；也就是说，可以假定第二个用户的权限：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The external user is a <span class="quote">“<span class="quote">proxy user</span>”</span> (a user who
                    can impersonate or become known as another user).
                </p><p style="color:blue;">外部用户是“代理用户”（可以模拟或成为另一个用户的用户）。</p></li><li class="listitem"><p>
                    The second user is a <span class="quote">“<span class="quote">proxied user</span>”</span> (a user whose
                    identity and privileges can be assumed by a proxy user).
                </p><p style="color:blue;">第二个用户是“代理用户”（其身份和权限可以由代理用户承担）。</p></li></ul>
            </div>
            <p>
                This section describes how the proxy user capability works. For
                general information about authentication plugins, see
                <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. For information about
                specific plugins, see <a class="xref" href="security.html#authentication-plugins" title="6.4.1&nbsp;Authentication Plugins">Section&nbsp;6.4.1, “Authentication Plugins”</a>.
                For information about writing authentication plugins that support
                proxy users, see
                <a class="xref" href="extending-mysql.html#writing-authentication-plugins-proxy-users" title="28.2.4.9.4&nbsp;Implementing Proxy User Support in Authentication Plugins">Section&nbsp;28.2.4.9.4, “Implementing Proxy User Support in Authentication Plugins”</a>.
            </p><p style="color:blue;">本节描述代理用户功能的工作方式。有关身份验证插件的一般信息，请参阅第6.2.13节“可插入身份验证”。有关特定插件的信息，请参阅第6.4.1节“验证插件”。有关编写支持代理用户的身份验证插件的信息，请参阅第28.2.4.9.4节“在身份验证插件中实现代理用户支持”。</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#proxy-users-support-requirements" title="Requirements for Proxy User Support">Requirements for Proxy User Support</a></p><p style="color:blue;">代理用户支持要求</p></li><li class="listitem"><p><a class="xref" href="security.html#proxy-users-example" title="Simple Proxy User Example">Simple Proxy User Example</a></p><p style="color:blue;">简单代理用户示例</p></li><li class="listitem"><p><a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a></p><p style="color:blue;">防止直接登录代理帐户</p></li><li class="listitem"><p><a class="xref" href="security.html#proxy-users-granting-proxy-privilege" title="Granting and Revoking the PROXY Privilege">Granting and Revoking the PROXY Privilege</a></p><p style="color:blue;">授予和撤销代理特权</p></li><li class="listitem"><p><a class="xref" href="security.html#default-proxy-users" title="Default Proxy Users">Default Proxy Users</a></p><p style="color:blue;">默认代理用户</p></li><li class="listitem"><p><a class="xref" href="security.html#proxy-users-conflicts" title="Default Proxy User and Anonymous User Conflicts">Default Proxy User and Anonymous User Conflicts</a></p><p style="color:blue;">默认代理用户和匿名用户冲突</p></li><li class="listitem"><p><a class="xref" href="security.html#proxy-users-server-user-mapping" title="Server Support for Proxy User Mapping">Server Support for Proxy User Mapping</a></p><p style="color:blue;">服务器对代理用户映射的支持</p></li><li class="listitem"><p><a class="xref" href="security.html#proxy-users-system-variables" title="Proxy User System Variables">Proxy User System Variables</a></p><p style="color:blue;">代理用户系统变量</p></li></ul>
            </div>

            <div class="simplesect">

                <div class="titlepage">
                    <div>

                        <div class="simple">
                            <h4 class="title"><a name="proxy-users-support-requirements"></a>Requirements for Proxy User Support</h4>

                        </div>

                    </div>

                </div>
                <p>
                    For proxying to occur for a given authentication plugin, these
                    conditions must be satisfied:
                </p><p style="color:blue;">要对给定的身份验证插件进行代理，必须满足以下条件：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Proxying must be supported, either by the plugin itself, or
                        by the MySQL server on behalf of the plugin. In the latter
                        case, server support may need to be enabled explicitly; see
                        <a class="xref" href="security.html#proxy-users-server-user-mapping" title="Server Support for Proxy User Mapping">Server Support for Proxy User Mapping</a>.
                    </p><p style="color:blue;">代理必须受支持，要么由插件本身支持，要么由mysql服务器代表插件支持。在后一种情况下，可能需要显式启用服务器支持；有关代理用户映射，请参阅服务器支持。</p></li><li class="listitem"><p>
                        The account for the external proxy user must be set up to be
                        authenticated by the plugin. Use the
                        <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement to
                        associate an account with an authentication plugin, or
                        <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> to change its
                        plugin.
                    </p><p style="color:blue;">外部代理用户的帐户必须设置为由插件进行身份验证。使用create user语句将帐户与身份验证插件关联，或使用alter user更改其插件。</p></li><li class="listitem"><p>
                        The account for the proxied user must exist and be granted
                        the privileges to be assumed by the proxy user. Use the
                        <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> and
                        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements for this.
                    </p><p style="color:blue;">代理用户的帐户必须存在并授予代理用户所要承担的特权。为此使用create user和grant语句。</p></li><li class="listitem"><p>
                        Normally, the proxied user is configured so that it can be
                        used only in proxying scenaries and not for direct logins.
                    </p><p style="color:blue;">通常，代理用户被配置为只能在代理场景中使用，而不是直接登录。</p></li><li class="listitem"><p>
                        The proxy user account must have the
                        <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for the
                        proxied account. Use the
                        <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statement for this.
                    </p><p style="color:blue;">代理用户帐户必须具有代理帐户的代理权限。为此使用GRANT语句。</p></li><li class="listitem"><p>
                        For a client connecting to the proxy account to be treated
                        as a proxy user, the authentication plugin must return a
                        user name different from the client user name, to indicate
                        the user name of the proxied account that defines the
                        privileges to be assumed by the proxy user.
                    </p><p style="color:blue;">对于连接到作为代理用户的代理帐户的客户端，身份验证插件必须返回与客户端用户名不同的用户名，以指示代理帐户的用户名，该代理帐户定义了代理用户要承担的特权。</p><p>
                        Alternatively, for plugins that are provided proxy mapping
                        by the server, the proxied user is determined from the
                        <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege held by the
                        proxy user.
                    </p><p style="color:blue;">或者，对于由服务器提供代理映射的插件，可以通过代理用户持有的代理特权来确定用户。</p></li></ul>
                </div>
                <p>
                    The proxy mechanism permits mapping only the external client
                    user name to the proxied user name. There is no provision for
                    mapping host names:
                </p><p style="color:blue;">代理机制允许仅将外部客户端用户名映射到代理用户名。没有映射主机名的规定：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        When a client connects to the server, the server determines
                        the proper account based on the user name passed by the
                        client program and the host from which the client connects.
                    </p><p style="color:blue;">当客户端连接到服务器时，服务器根据客户端程序传递的用户名和客户端连接的主机来确定正确的帐户。</p></li><li class="listitem"><p>
                        If that account is a proxy account, the server attempts to
                        determine the appropriate proxied account by finding a match
                        for a proxied account using the user name returned by the
                        authentication plugin and the host name of the proxy
                        account. The host name in the proxied account is ignored.
                    </p><p style="color:blue;">如果该帐户是代理帐户，则服务器尝试通过使用验证插件返回的用户名和代理帐户的主机名查找代理帐户的匹配来确定适当的代理帐户。代理帐户中的主机名被忽略。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="proxy-users-example"></a>Simple Proxy User Example</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Consider the following account definitions:
                </p><p style="color:blue;">考虑以下帐户定义：</p><pre data-lang="sql" class="programlisting">-- create proxy account
CREATE USER 'employee_ext'@'localhost'
  IDENTIFIED WITH my_auth_plugin
  AS '<em class="replaceable"><code>my_auth_string</code></em>';

-- create proxied account and grant its privileges;
-- use mysql_no_login plugin to prevent direct login
CREATE USER 'employee'@'localhost'
  IDENTIFIED WITH mysql_no_login;
GRANT ALL
  ON employees.*
  TO 'employee'@'localhost';

-- grant to proxy account the
-- PROXY privilege for proxied account
GRANT PROXY
  ON 'employee'@'localhost'
  TO 'employee_ext'@'localhost';
</pre><p>
                When a client connects as <code class="literal">employee_ext</code> from
                the local host, MySQL uses the plugin named
                <code class="literal">my_auth_plugin</code> to perform authentication.
                Suppose that <code class="literal">my_auth_plugin</code> returns a user
                name of <code class="literal">employee</code> to the server, based on the
                content of
                <code class="literal">'<em class="replaceable"><code>my_auth_string</code></em>'</code>
                and perhaps by consulting some external authentication system.
                The name <code class="literal">employee</code> differs from
                <code class="literal">employee_ext</code>, so returning
                <code class="literal">employee</code> serves as a request to the server to
                treat the <code class="literal">employee_ext</code> external user, for
                purposes of privilege checking, as the
                <code class="literal">employee</code> local user.
            </p><p style="color:blue;">当客户端作为employee_ext从本地主机连接时，mysql使用名为my_auth_plugin的插件来执行身份验证。假设my_auth_plugin根据“my_auth_string”的内容，并通过咨询一些外部身份验证系统，向服务器返回雇员的用户名。employee的名称与employee_ext不同，因此返回employee作为对服务器的请求，将employee_ext外部用户视为employee本地用户，以便进行权限检查。</p><p>
                In this case, <code class="literal">employee_ext</code> is the proxy user
                and <code class="literal">employee</code> is the proxied user.
            </p><p style="color:blue;">在这种情况下，代理是用户，而雇员是代理用户。</p><p>
                The server verifies that proxy authentication for
                <code class="literal">employee</code> is possible for the
                <code class="literal">employee_ext</code> user by checking whether
                <code class="literal">employee_ext</code> (the proxy user) has the
                <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for
                <code class="literal">employee</code> (the proxied user). If this
                privilege has not been granted, an error occurs. Otherwise,
                <code class="literal">employee_ext</code> assumes the privileges of
                <code class="literal">employee</code>. The server checks statements
                executed during the client session by
                <code class="literal">employee_ext</code> against the privileges granted
                to <code class="literal">employee</code>. In this case,
                <code class="literal">employee_ext</code> can access tables in the
                <code class="literal">employees</code> database.
            </p><p style="color:blue;">服务器通过检查雇员EXEXT（代理用户）是否具有雇员（代理用户）的代理权限来验证雇员EXECUTE用户的代理认证是可能的。如果未授予此权限，则会发生错误。否则，employee_ext将承担employee的特权。服务器根据授予employee的权限检查employee_ext在客户端会话期间执行的语句。在这种情况下，employee_ext可以访问employees数据库中的表。</p><p>
                The proxied account, <code class="literal">employee</code>, uses the
                <code class="literal">mysql_no_login</code> authentication plugin to
                prevent clients from using the account to log in directly. (This
                assumes that the plugin is installed. For instructions, see
                <a class="xref" href="security.html#no-login-pluggable-authentication" title="6.4.1.10&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.10, “No-Login Pluggable Authentication”</a>.) For
                alternative methods of protecting proxied accounts against
                direct use, see
                <a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
            </p><p style="color:blue;">代理帐户，雇员，使用MySQL LoNoLogIn身份验证插件，以防止客户端使用帐户直接登录。（这假设插件已安装。有关说明，请参阅第6节4.4.1.10节，“没有登录可插入的认证”。对于保护代理帐户的替代方法不直接使用，请参阅防止直接登录代理帐户。</p><p>
                When proxying occurs, the <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>
                and <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> functions can
                be used to see the difference between the connecting user (the
                proxy user) and the account whose privileges apply during the
                current session (the proxied user). For the example just
                described, those functions return these values:
            </p><p style="color:blue;">当代理发生时，USER（）和CurrutyUsServer（）函数可以用来查看连接用户（代理用户）和在当前会话（代理用户）中应用其特权的帐户之间的区别。对于刚才描述的示例，这些函数返回以下值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER();</code></strong>
+------------------------+--------------------+
| USER()                 | CURRENT_USER()     |
+------------------------+--------------------+
| employee_ext@localhost | employee@localhost |
+------------------------+--------------------+
</pre><p>
                In the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement that
                creates the proxy user account, the <code class="literal">IDENTIFIED
                WITH</code> clause that names the proxy-supporting
                authentication plugin is optionally followed by an <code class="literal">AS
                '<em class="replaceable"><code>auth_string</code></em>'</code> clause
                specifying a string that the server passes to the plugin when
                the user connects. If present, the string provides information
                that helps the plugin determine how to map the proxy (external)
                client user name to a proxied user name. It is up to each plugin
                whether it requires the <code class="literal">AS</code> clause. If so, the
                format of the authentication string depends on how the plugin
                intends to use it. Consult the documentation for a given plugin
                for information about the authentication string values it
                accepts.
            </p><p style="color:blue;">在创建代理用户帐户的CREATE USER语句中，命名代理支持身份验证插件的IDENTIFIED WITH子句后面有一个AS'AUTH U STRING'子句，指定当用户连接时服务器传递给插件的字符串。如果存在，则字符串提供帮助插件确定如何将代理（外部）客户端用户名映射到代理用户名的信息。是否需要as子句取决于每个插件。如果是，则验证字符串的格式取决于插件打算如何使用它。有关给定插件接受的身份验证字符串值的信息，请参阅该插件的文档。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="preventing-proxied-account-direct-login"></a>Preventing Direct Login to Proxied Accounts</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Proxied accounts generally are intended to be used only by means
                    of proxy accounts. That is, clients connect using a proxy
                    account, then are mapped onto and assume the privileges of the
                    appropriate proxied user.
                </p><p style="color:blue;">代理帐户一般仅用于代理帐户。也就是说，客户端使用代理帐户连接，然后映射到并假定适当的代理用户的权限。</p><p>
                There are multiple ways to ensure that a proxied account cannot
                be used directly:
            </p><p style="color:blue;">有多种方法来确保代理帐户不能直接使用：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Associate the account with the
                        <code class="literal">mysql_no_login</code> authentication plugin. In
                        this case, the account cannot be used for direct logins
                        under any circumstances. This assumes that the plugin is
                        installed. For instructions, see
                        <a class="xref" href="security.html#no-login-pluggable-authentication" title="6.4.1.10&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.10, “No-Login Pluggable Authentication”</a>.
                    </p><p style="color:blue;">将帐户与mysql_no_登录身份验证插件关联。在这种情况下，帐户在任何情况下都不能用于直接登录。这假设插件已安装。有关说明，请参阅第6.4.1.10节“无登录可插拔身份验证”。</p></li><li class="listitem"><p>
                        Include the <code class="literal">ACCOUNT LOCK</code> option when you
                        create the account. See <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>. With
                        this method, also include a password so that if the account
                        is unlocked later, it cannot be accessed with no password.
                        (If the <code class="literal">validate_password</code> plugin is
                        enabled, it will not permit creating an account without a
                        password, even if the account is locked. See
                        <a class="xref" href="security.html#validate-password" title="6.4.3&nbsp;The Password Validation Plugin">Section&nbsp;6.4.3, “The Password Validation Plugin”</a>.)
                    </p><p style="color:blue;">创建帐户时包括帐户锁定选项。参见第13.7.1.2节“创建用户语法”。使用此方法时，还应包含一个密码，以便在以后解锁帐户时，如果没有密码，则无法访问该帐户。（如果启用了validate_password插件，则即使帐户已锁定，也不允许创建没有密码的帐户。参见第6.4.3节“密码验证插件”。</p></li><li class="listitem"><p>
                        Create the account with a password but do not tell anyone
                        else the password. If you do not let anyone know the
                        password for the account, clients cannot use it to connect
                        directly to the MySQL server.
                    </p><p style="color:blue;">使用密码创建帐户，但不要告诉其他人密码。如果不让任何人知道帐户的密码，则客户端无法使用它直接连接到mysql服务器。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="proxy-users-granting-proxy-privilege"></a>Granting and Revoking the PROXY Privilege</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887812064"></a><p>
                The <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege is needed to
                enable an external user to connect as and have the privileges of
                another user. To grant this privilege, use the
                <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statement. For example:
            </p><p style="color:blue;">需要代理权限才能使外部用户以另一个用户的身份连接并拥有该用户的权限。要授予此特权，请使用GRANT语句。例如：</p><pre data-lang="sql" class="programlisting">GRANT PROXY ON '<em class="replaceable"><code>proxied_user</code></em>' TO '<em class="replaceable"><code>proxy_user</code></em>';
</pre><a class="indexterm" name="idm140286887805792"></a><a class="indexterm" name="idm140286887804304"></a><p>
                The statement creates a row in the
                <code class="literal">mysql.proxies_priv</code> grant table.
            </p><p style="color:blue;">该语句将创建一个行。</p><p>
                At connect time, <em class="replaceable"><code>proxy_user</code></em> must
                represent a valid externally authenticated MySQL user, and
                <em class="replaceable"><code>proxied_user</code></em> must represent a valid
                locally authenticated user. Otherwise, the connection attempt
                fails.
            </p><p style="color:blue;">在连接时，PROXYL用户必须代表一个有效的外部认证的MySQL用户，PROXIEDY用户必须代表一个有效的本地认证用户。否则，连接尝试失败。</p><p>
                The corresponding <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> syntax
                is:
            </p><p style="color:blue;">相应的revoke语法为：</p><pre data-lang="sql" class="programlisting">REVOKE PROXY ON '<em class="replaceable"><code>proxied_user</code></em>' FROM '<em class="replaceable"><code>proxy_user</code></em>';
</pre><p>
                MySQL <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> and
                <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6&nbsp;REVOKE Syntax"><code class="literal">REVOKE</code></a> syntax extensions work as
                usual. Examples:
            </p><p style="color:blue;">mysql的grant和revoke语法扩展工作正常。示例：</p><pre data-lang="sql" class="programlisting">-- grant PROXY to multiple accounts
GRANT PROXY ON 'a' TO 'b', 'c', 'd';

-- revoke PROXY from multiple accounts
REVOKE PROXY ON 'a' FROM 'b', 'c', 'd';

-- grant PROXY to an account and enable the account to grant
-- PROXY to the proxied account
GRANT PROXY ON 'a' TO 'd' WITH GRANT OPTION;

-- grant PROXY to default proxy account
GRANT PROXY ON 'a' TO ''@'';
</pre><p>
                The <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege can be
                granted in these cases:
            </p><p style="color:blue;">在以下情况下，可以授予代理特权：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        By a user that has <code class="literal">GRANT PROXY ... WITH GRANT
                        OPTION</code> for
                        <em class="replaceable"><code>proxied_user</code></em>.
                    </p><p style="color:blue;">由授权代理的用户…使用PROXEDY用户的授予选项。</p></li><li class="listitem"><p>
                        By <em class="replaceable"><code>proxied_user</code></em> for itself: The
                        value of <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> must exactly
                        match <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> and
                        <em class="replaceable"><code>proxied_user</code></em>, for both the user
                        name and host name parts of the account name.
                    </p><p style="color:blue;">通过PrxEdEdUsAuthor为自己：用户名（）的值必须与CurrungUsUror（）和PosiXeDeUsAube完全匹配，用于帐户名的用户名和主机名部分。</p></li></ul>
                </div>
                <p>
                    The initial <code class="literal">root</code> account created during MySQL
                    installation has the
                    <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY ... WITH GRANT
                        OPTION</code></a> privilege for <code class="literal">''@''</code>, that
                    is, for all users and all hosts. This enables
                    <code class="literal">root</code> to set up proxy users, as well as to
                    delegate to other accounts the authority to set up proxy users.
                    For example, <code class="literal">root</code> can do this:
                </p><p style="color:blue;">在mysql安装期间创建的初始根帐户具有代理…为'@''授予选项权限，即为所有用户和所有主机。这使根用户能够设置代理用户，并将设置代理用户的权限委托给其他帐户。例如，root可以执行以下操作：</p><pre data-lang="sql" class="programlisting">CREATE USER 'admin'@'localhost'
  IDENTIFIED BY '<em class="replaceable"><code>admin_password</code></em>';
GRANT PROXY
  ON ''@''
  TO 'admin'@'localhost'
  WITH GRANT OPTION;
</pre><p>
                Those statements create an <code class="literal">admin</code> user that
                can manage all <code class="literal">GRANT PROXY</code> mappings. For
                example, <code class="literal">admin</code> can do this:
            </p><p style="color:blue;">这些语句创建一个管理用户，该用户可以管理所有授权代理映射。例如，管理员可以执行以下操作：</p><pre data-lang="sql" class="programlisting">GRANT PROXY ON sally TO joe;
</pre>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="default-proxy-users"></a>Default Proxy Users</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887773088"></a><a class="indexterm" name="idm140286887771600"></a><p>
                To specify that some or all users should connect using a given
                authentication plugin, create a <span class="quote">“<span class="quote">blank</span>”</span> MySQL
                account with an empty user name and host name
                (<code class="literal">''@''</code>), associate it with that plugin, and
                let the plugin return the real authenticated user name (if
                different from the blank user). Suppose that there exists a
                plugin named <code class="literal">ldap_auth</code> that implements LDAP
                authentication and maps connecting users onto either a developer
                or manager account. To set up proxying of users onto these
                accounts, use the following statements:
            </p><p style="color:blue;">为了指定某些或所有用户应该使用给定的身份验证插件连接，创建一个“空”的MySQL帐户，使用一个空用户名和主机名（“@”），将其与该插件相关联，并让插件返回真正的经验证的用户名（如果与空白用户不同）。假设存在一个名为LDAPIAUTH的插件，它实现LDAP身份验证，并将用户连接到开发人员或管理者帐户上。要设置用户对这些帐户的代理，请使用以下语句：</p><pre data-lang="sql" class="programlisting">-- create default proxy account
CREATE USER ''@''
  IDENTIFIED WITH ldap_auth
  AS 'O=Oracle, OU=MySQL';

-- create proxied accounts; use
-- mysql_no_login plugin to prevent direct login
CREATE USER 'developer'@'localhost'
  IDENTIFIED WITH mysql_no_login;
CREATE USER 'manager'@'localhost'
  IDENTIFIED WITH mysql_no_login;

-- grant to default proxy account the
-- PROXY privilege for proxied accounts
GRANT PROXY
  ON 'manager'@'localhost'
  TO ''@'';
GRANT PROXY
  ON 'developer'@'localhost'
  TO ''@'';
</pre><p>
                Now assume that a client connects as follows:
            </p><p style="color:blue;">现在假设客户机连接如下：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=myuser --password ...</code></strong>
Enter password: <em class="replaceable"><code>myuser_password</code></em>
</pre><p>
                The server will not find <code class="literal">myuser</code> defined as a
                MySQL user. But because there is a blank user account
                (<code class="literal">''@''</code>) that matches the client user name and
                host name, the server authenticates the client against that
                account: The server invokes the <code class="literal">ldap_auth</code>
                authentication plugin and passes <code class="literal">myuser</code> and
                <em class="replaceable"><code>myuser_password</code></em> to it as the user
                name and password.
            </p><p style="color:blue;">服务器将找不到定义为mysql用户的myuser。但是，由于存在与客户端用户名和主机名匹配的空白用户帐户（'@''），服务器将根据该帐户对客户端进行身份验证：服务器调用ldap_auth authentication插件，并将myuser和myuser_密码作为用户名和密码传递给该插件。</p><p>
                If the <code class="literal">ldap_auth</code> plugin finds in the LDAP
                directory that <em class="replaceable"><code>myuser_password</code></em> is not
                the correct password for <code class="literal">myuser</code>,
                authentication fails and the server rejects the connection.
            </p><p style="color:blue;">如果ldap_auth插件在ldap目录中发现myuser_password不是myuser的正确密码，则验证失败，服务器拒绝连接。</p><p>
                If the password is correct and <code class="literal">ldap_auth</code>
                finds that <code class="literal">myuser</code> is a developer, it returns
                the user name <code class="literal">developer</code> to the MySQL server,
                rather than <code class="literal">myuser</code>. Returning a user name
                different from the client user name of <code class="literal">myuser</code>
                signals to the server that it should treat
                <code class="literal">myuser</code> as a proxy. The server verifies that
                <code class="literal">''@''</code> can authenticate as
                <code class="literal">developer</code> (because <code class="literal">''@''</code>
                has the <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege to do so)
                and accepts the connection. The session proceeds with
                <code class="literal">myuser</code> having the privileges of the
                <code class="literal">developer</code> proxied user. (These privileges
                should be set up by the DBA using
                <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements, not shown.) The
                <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> and
                <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> functions return
                these values:
            </p><p style="color:blue;">如果密码正确并且ldap_auth发现myuser是一个开发人员，它会将用户名developer返回到mysql服务器，而不是myuser。返回与myuser的客户机用户名不同的用户名会向服务器发出信号，表明服务器应将myuser视为代理。服务器验证'@''是否可以作为开发人员进行身份验证（因为'@''具有代理权限），并接受连接。会话与MySuver进行，具有开发者代理用户的特权。（这些权限应由DBA使用GRANT语句设置，未显示。）user（）和current_user（）函数返回以下值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER();</code></strong>
+------------------+---------------------+
| USER()           | CURRENT_USER()      |
+------------------+---------------------+
| myuser@localhost | developer@localhost |
+------------------+---------------------+
</pre><p>
                If the plugin instead finds in the LDAP directory that
                <code class="literal">myuser</code> is a manager, it returns
                <code class="literal">manager</code> as the user name and the session
                proceeds with <code class="literal">myuser</code> having the privileges of
                the <code class="literal">manager</code> proxied user.
            </p><p style="color:blue;">如果插件在LDAP目录中发现MyAuthor是一个管理器，它将Manager返回为用户名，会话与MyUsle进行，MyUsle具有管理员代理用户的权限。</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER();</code></strong>
+------------------+-------------------+
| USER()           | CURRENT_USER()    |
+------------------+-------------------+
| myuser@localhost | manager@localhost |
+------------------+-------------------+
</pre><p>
                For simplicity, external authentication cannot be multilevel:
                Neither the credentials for <code class="literal">developer</code> nor
                those for <code class="literal">manager</code> are taken into account in
                the preceding example. However, they are still used if a client
                tries to connect and authenticate directly as the
                <code class="literal">developer</code> or <code class="literal">manager</code>
                account, which is why those proxied accounts should be protected
                against direct login (see
                <a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>).
            </p><p style="color:blue;">为简单起见，外部身份验证不能是多级的：在前面的示例中，既不考虑开发人员的凭据，也不考虑管理人员的凭据。但是，如果客户端试图直接连接和认证开发人员或管理者帐户，它们仍然被使用，这就是为什么那些代理帐户应该被保护以避免直接登录（见防止直接登录代理帐户）。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="proxy-users-conflicts"></a>Default Proxy User and Anonymous User Conflicts</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887730752"></a><p>
                If you intend to create a default proxy user, check for other
                existing <span class="quote">“<span class="quote">match any user</span>”</span> accounts that take
                precedence over the default proxy user because they can prevent
                that user from working as intended.
            </p><p style="color:blue;">如果要创建默认代理用户，请检查其他现有的“匹配任何用户”帐户，这些帐户优先于默认代理用户，因为它们可以阻止用户按预期工作。</p><p>
                In the preceding discussion, the default proxy user account has
                <code class="literal">''</code> in the host part, which matches any host.
                If you set up a default proxy user, take care to also check
                whether nonproxy accounts exist with the same user part and
                <code class="literal">'%'</code> in the host part, because
                <code class="literal">'%'</code> also matches any host, but has precedence
                over <code class="literal">''</code> by the rules that the server uses to
                sort account rows internally (see
                <a class="xref" href="security.html#connection-access" title="6.2.5&nbsp;Access Control, Stage 1: Connection Verification">Section&nbsp;6.2.5, “Access Control, Stage 1: Connection Verification”</a>).
            </p><p style="color:blue;">在前面的讨论中，默认代理用户帐户的主机部分中有“”，该帐户与任何主机都匹配。如果您设置了一个默认的代理用户，请注意，在主机部分中检查是否具有相同的用户部分和“%”的非代理帐户，因为“%”也与任何主机匹配，但是优先于“服务器”使用的规则，以便在内部对帐户行进行排序（见第6节2.2.5节，“访问控制，第1阶段：连接验证”）。</p><p>
                Suppose that a MySQL installation includes these two accounts:
            </p><p style="color:blue;">假设mysql安装包含以下两个帐户：</p><pre data-lang="sql" class="programlisting">-- create default proxy account
CREATE USER ''@''
  IDENTIFIED WITH some_plugin
  AS '<em class="replaceable"><code>some_auth_string</code></em>';
-- create anonymous account
CREATE USER ''@'%'
  IDENTIFIED BY '<em class="replaceable"><code>anon_user_password</code></em>';
</pre><p>
                The first account (<code class="literal">''@''</code>) is intended as the
                default proxy user, used to authenticate connections for users
                who do not otherwise match a more-specific account. The second
                account (<code class="literal">''@'%'</code>) is an anonymous-user
                account, which might have been created, for example, to enable
                users without their own account to connect anonymously.
            </p><p style="color:blue;">第一个帐户（'@''）用作默认代理用户，用于验证与更特定帐户不匹配的用户的连接。第二个帐户（'@“%”）是一个匿名用户帐户，可能是为了使没有自己帐户的用户能够匿名连接而创建的。</p><p>
                Both accounts have the same user part (<code class="literal">''</code>),
                which matches any user. And each account has a host part that
                matches any host. Nevertheless, there is a priority in account
                matching for connection attempts because the matching rules sort
                a host of <code class="literal">'%'</code> ahead of <code class="literal">''</code>.
                For accounts that do not match any more-specific account, the
                server attempts to authenticate them against
                <code class="literal">''@'%'</code> (the anonymous user) rather than
                <code class="literal">''@''</code> (the default proxy user). As a result,
                the default proxy account is never used.
            </p><p style="color:blue;">两个帐户都有相同的用户部分（''），与任何用户都匹配。每个帐户都有一个与任何主机匹配的主机部分。不过，帐户匹配对于连接尝试具有优先级，因为匹配规则将“%”的主机排序在“”之前。对于与任何其他特定帐户都不匹配的帐户，服务器将尝试根据'@''（匿名用户）而不是'@'（默认代理用户）对其进行身份验证。因此，从不使用默认代理帐户。</p><p>
                To avoid this problem, use one of the following strategies:
            </p><p style="color:blue;">要避免此问题，请使用以下策略之一：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Remove the anonymous account so that it does not conflict
                        with the default proxy user.
                    </p><p style="color:blue;">删除匿名帐户，使其不与默认代理用户冲突。</p></li><li class="listitem"><p>
                        Use a more-specific default proxy user that matches ahead of
                        the anonymous user. For example, to permit only
                        <code class="literal">localhost</code> proxy connections, use
                        <code class="literal">''@'localhost'</code>:
                    </p><p style="color:blue;">使用比匿名用户更具体的默认代理用户。例如，要仅允许本地主机代理连接，请使用“@'localhost'：</p><pre data-lang="sql" class="programlisting">CREATE USER ''@'localhost'
  IDENTIFIED WITH some_plugin
  AS '<em class="replaceable"><code>some_auth_string</code></em>';
</pre><p>
                        In addition, modify any <code class="literal">GRANT PROXY</code>
                        statements to name <code class="literal">''@'localhost'</code> rather
                        than <code class="literal">''@''</code> as the proxy user.
                    </p><p style="color:blue;">此外，修改任何GRANT PROXY语句，将''@'localhost'命名为代理用户，而不是'@'。</p><p>
                        Be aware that this strategy prevents anonymous-user
                        connections from <code class="literal">localhost</code>.
                    </p><p style="color:blue;">请注意，此策略防止来自本地主机的匿名用户连接。</p></li><li class="listitem"><p>
                        Use a named default account rather than an anonymous default
                        account. For an example of this technique, consult the
                        instructions for using the
                        <code class="literal">authentication_windows</code> plugin. See
                        <a class="xref" href="security.html#windows-pluggable-authentication" title="6.4.1.8&nbsp;Windows Pluggable Authentication">Section&nbsp;6.4.1.8, “Windows Pluggable Authentication”</a>.
                    </p><p style="color:blue;">使用指定的默认帐户而不是匿名默认帐户。有关此技术的示例，请参阅有关使用身份验证Windows插件的说明。参见第6.4.1.8节“Windows可插拔身份验证”。</p></li><li class="listitem"><p>
                        Create multiple proxy users, one for local connections and
                        one for <span class="quote">“<span class="quote">everything else</span>”</span> (remote connections).
                        This can be useful particularly when local users should have
                        different privileges from remote users.
                    </p><p style="color:blue;">创建多个代理用户，一个用于本地连接，另一个用于“其他一切”（远程连接）。这可能非常有用，特别是当本地用户应该具有与远程用户不同的权限时。</p><p>
                        Create the proxy users:
                    </p><p style="color:blue;">创建代理用户：</p><pre data-lang="sql" class="programlisting">-- create proxy user for local connections
CREATE USER ''@'localhost'
  IDENTIFIED WITH some_plugin
  AS '<em class="replaceable"><code>some_auth_string</code></em>';
-- create proxy user for remote connections
CREATE USER ''@'%'
  IDENTIFIED WITH some_plugin
  AS '<em class="replaceable"><code>some_auth_string</code></em>';
</pre><p>
                        Create the proxied users:
                    </p><p style="color:blue;">创建代理用户：</p><pre data-lang="sql" class="programlisting">-- create proxied user for local connections
CREATE USER 'developer'@'localhost'
  IDENTIFIED WITH mysql_no_login;
-- create proxied user for remote connections
CREATE USER 'developer'@'%'
  IDENTIFIED WITH mysql_no_login;
</pre><p>
                        Grant to each proxy account the
                        <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for the
                        corresponding proxied account:
                    </p><p style="color:blue;">授予每个代理帐户对应代理帐户的代理权限：</p><pre data-lang="sql" class="programlisting">GRANT PROXY
  ON 'developer'@'localhost'
  TO ''@'localhost';
GRANT PROXY
  ON 'developer'@'%'
  TO ''@'%';
</pre><p>
                        Finally, grant appropriate privileges to the local and
                        remote proxied users (not shown).
                    </p><p style="color:blue;">最后，授予本地和远程代理用户的适当权限（未示出）。</p><p>
                        Assume that the
                        <code class="literal">some_plugin</code>/<code class="literal">'<em class="replaceable"><code>some_auth_string</code></em>'</code>
                        combination causes <code class="literal">some_plugin</code> to map the
                        client user name to <code class="literal">developer</code>. Local
                        connections match the <code class="literal">''@'localhost'</code>
                        proxy user, which maps to the
                        <code class="literal">'developer'@'localhost'</code> proxied user.
                        Remote connections match the <code class="literal">''@'%'</code> proxy
                        user, which maps to the <code class="literal">'developer'@'%'</code>
                        proxied user.
                    </p><p style="color:blue;">假设some_plugin/'some_auth_string'组合导致some_plugin将客户端用户名映射到开发人员。本地连接与“@”本地主机的代理用户匹配，该代理用户映射到“开发人员”的“本地主机”代理用户。远程连接与“@”%'代理用户匹配，该用户映射到“开发人员”'%'代理用户。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="proxy-users-server-user-mapping"></a>Server Support for Proxy User Mapping</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887686464"></a><p>
                Some authentication plugins implement proxy user mapping for
                themselves (for example, the PAM and Windows authentication
                plugins). Other authentication plugins do not support proxy
                users by default. Of these, some can request that the MySQL
                server itself map proxy users according to granted proxy
                privileges: <code class="literal">mysql_native_password</code>,
                <code class="literal">sha256_password</code>. If the
                <a class="link" href="server-administration.html#sysvar_check_proxy_users"><code class="literal">check_proxy_users</code></a> system
                variable is enabled, the server performs proxy user mapping for
                any authentication plugins that make such a request:
            </p><p style="color:blue;">一些身份验证插件为自己实现代理用户映射（例如，pam和windows身份验证插件）。默认情况下，其他身份验证插件不支持代理用户。其中，有些可以请求mysql服务器本身根据授予的代理权限映射代理用户：mysql本地密码、sha256密码。如果启用了check_proxy_users系统变量，则服务器将对发出此类请求的任何身份验证插件执行代理用户映射：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        By default,
                        <a class="link" href="server-administration.html#sysvar_check_proxy_users"><code class="literal">check_proxy_users</code></a> is
                        disabled, so the server performs no proxy user mapping even
                        for authentication plugins that request server support for
                        proxy users.
                    </p><p style="color:blue;">默认情况下，check_proxy_users处于禁用状态，因此服务器不执行代理用户映射，即使是请求服务器支持代理用户的身份验证插件也是如此。</p><a class="indexterm" name="idm140286887678976"></a><a class="indexterm" name="idm140286887677936"></a></li><li class="listitem"><p>
                        If <a class="link" href="server-administration.html#sysvar_check_proxy_users"><code class="literal">check_proxy_users</code></a> is
                        enabled, it may also be necessary to enable a
                        plugin-specific system variable to take advantage of server
                        proxy user mapping support:
                    </p><p style="color:blue;">如果启用了check_proxy_users，则可能还需要启用特定于插件的系统变量，以利用服务器代理用户映射支持：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                For the <code class="literal">mysql_native_password</code> plugin,
                                enable
                                <a class="link" href="server-administration.html#sysvar_mysql_native_password_proxy_users"><code class="literal">mysql_native_password_proxy_users</code></a>.
                            </p><p style="color:blue;">对于mysql_native_password插件，启用mysql_native_password_proxy_用户。</p><a class="indexterm" name="idm140286887671136"></a><a class="indexterm" name="idm140286887670096"></a></li><li class="listitem"><p>
                                For the <code class="literal">sha256_password</code> plugin,
                                enable
                                <a class="link" href="server-administration.html#sysvar_sha256_password_proxy_users"><code class="literal">sha256_password_proxy_users</code></a>.
                            </p><p style="color:blue;">对于SHA256_密码插件，启用SHA256_密码代理用户。</p><a class="indexterm" name="idm140286887665744"></a><a class="indexterm" name="idm140286887664640"></a></li></ul>
                        </div>
                    </li></ul>
                </div>
                <p>
                    Proxy user mapping performed by the server is subject to these
                    restrictions:
                </p><p style="color:blue;">服务器执行的代理用户映射受以下限制：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The server will not proxy to or from an anonymous user, even
                        if the associated <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a>
                        privilege is granted.
                    </p><p style="color:blue;">即使授予了关联的代理权限，服务器也不会向匿名用户代理或从匿名用户代理。</p></li><li class="listitem"><p>
                        When a single account has been granted proxy privileges for
                        more than one proxied account, server proxy user mapping is
                        nondeterministic. Therefore, granting to a single account
                        proxy privileges for multiple proxied accounts is
                        discouraged.
                    </p><p style="color:blue;">当单个帐户已为多个代理帐户授予代理特权时，服务器代理用户映射是不确定的。因此，对单个代理帐户授予多个代理帐户的特权是不鼓励的。</p></li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="proxy-users-system-variables"></a>Proxy User System Variables</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887657200"></a><p>
                Two system variables help trace the proxy login process:
            </p><p style="color:blue;">两个系统变量有助于跟踪代理登录过程：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="server-administration.html#sysvar_proxy_user"><code class="literal">proxy_user</code></a>: This value is
                        <code class="literal">NULL</code> if proxying is not used. Otherwise,
                        it indicates the proxy user account. For example, if a
                        client authenticates through the <code class="literal">''@''</code>
                        proxy account, this variable is set as follows:
                    </p><p style="color:blue;">代理用户：如果不使用代理，则此值为空。否则，表示代理用户帐户。例如，如果客户端通过'@'代理帐户进行身份验证，则此变量设置如下：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @@proxy_user;</code></strong>
+--------------+
| @@proxy_user |
+--------------+
| ''@''        |
+--------------+
</pre></li><li class="listitem"><p>
                        <a class="link" href="server-administration.html#sysvar_external_user"><code class="literal">external_user</code></a>: Sometimes
                        the authentication plugin may use an external user to
                        authenticate to the MySQL server. For example, when using
                        Windows native authentication, a plugin that authenticates
                        using the windows API does not need the login ID passed to
                        it. However, it still uses a Windows user ID to
                        authenticate. The plugin may return this external user ID
                        (or the first 512 UTF-8 bytes of it) to the server using the
                        <code class="literal">external_user</code> read-only session variable.
                        If the plugin does not set this variable, its value is
                        <code class="literal">NULL</code>.
                    </p><p style="color:blue;">外部用户：有时身份验证插件可能使用外部用户对mysql服务器进行身份验证。例如，当使用Windows本机身份验证时，使用Windows API进行身份验证的插件不需要传递给它的登录ID。但是，它仍然使用windows用户id进行身份验证。插件可以使用外部用户只读会话变量将此外部用户id（或其前512个utf-8字节）返回给服务器。如果插件未设置此变量，则其值为空。</p></li></ul>
                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="account-locking"></a>6.2.15&nbsp;Account Locking</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286887643680"></a><p>
            MySQL supports locking and unlocking user accounts using the
            <code class="literal">ACCOUNT LOCK</code> and <code class="literal">ACCOUNT
            UNLOCK</code> clauses for the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
            USER</code></a> and <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>
            statements:
        </p><p style="color:blue;">mysql支持使用create user和alter user语句的account lock和account unlock子句锁定和解锁用户帐户：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    When used with <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                    these clauses specify the initial locking state for a new
                    account. In the absence of either clause, the account is
                    created in an unlocked state.
                </p><p style="color:blue;">与create user一起使用时，这些子句指定新帐户的初始锁定状态。在没有这两个子句的情况下，帐户将在未锁定状态下创建。</p><p>
                    If the <code class="literal">validate_password</code> plugin is enabled,
                    it will not permit creating an account without a password,
                    even if the account is locked. See
                    <a class="xref" href="security.html#validate-password" title="6.4.3&nbsp;The Password Validation Plugin">Section&nbsp;6.4.3, “The Password Validation Plugin”</a>.
                </p><p style="color:blue;">如果启用了validate_password插件，则即使帐户已锁定，也不允许创建没有密码的帐户。参见第6.4.3节“密码验证插件”。</p></li><li class="listitem"><p>
                    When used with <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>,
                    these clauses specify the new locking state for an existing
                    account. In the absence of either clause, the account locking
                    state remains unchanged.
                </p><p style="color:blue;">当与ALTE用户一起使用时，这些子句指定现有帐户的新锁定状态。在没有任何一个子句的情况下，帐户锁定状态保持不变。</p></li></ul>
            </div>
            <p>
                Account locking state is recorded in the
                <code class="literal">account_locked</code> column of the
                <code class="literal">mysql.user</code> system table. The output from
                <a class="link" href="sql-syntax.html#show-create-user" title="13.7.5.12&nbsp;SHOW CREATE USER Syntax"><code class="literal">SHOW CREATE USER</code></a> indicates whether
                an account is locked or unlocked.
            </p><p style="color:blue;">帐户锁定状态记录在mysql.user系统表的account_locked列中。show create user的输出指示帐户是锁定还是解锁。</p><p>
            If a client attempts to connect to a locked account, the attempt
            fails. The server increments the
            <a class="link" href="server-administration.html#statvar_Locked_connects"><code class="literal">Locked_connects</code></a> status variable
            that indicates the number of attempts to connect to a locked
            account, returns an
            <a class="link" href="error-handling.html#error_er_account_has_been_locked"><code class="literal">ER_ACCOUNT_HAS_BEEN_LOCKED</code></a> error,
            and writes a message to the error log:
        </p><p style="color:blue;">如果客户端尝试连接到锁定的帐户，则尝试失败。服务器增加locked_connects状态变量，该变量指示尝试连接到锁定帐户的次数，返回er_account_has_been_locked错误，并将消息写入错误日志：</p><pre data-lang="none" class="programlisting">Access denied for user '<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'.
Account is locked.
</pre><p>
            Locking an account does not affect being able to connect using a
            proxy user that assumes the identity of the locked account. It
            also does not affect the ability to execute stored programs or
            views that have a <code class="literal">DEFINER</code> clause naming the
            locked account. That is, the ability to use a proxied account or
            stored programs or views is not affected by locking the account.
        </p><p style="color:blue;">锁定帐户不影响使用代理用户（假定锁定帐户的身份）进行连接。它也不影响执行存储程序或视图的能力，这些程序或视图具有命名锁定帐户的definer子句。也就是说，使用代理帐户或存储的程序或视图的能力不受锁定帐户的影响。</p><p>
            The account-locking capability depends on the presence of the
            <code class="literal">account_locked</code> column in the
            <code class="literal">mysql.user</code> system table. For upgrades from
            MySQL versions older than 5.7.6, perform the MySQL upgrade
            procedure to ensure that this column exists. See
            <a class="xref" href="installing.html#upgrading" title="2.11&nbsp;Upgrading MySQL">Section&nbsp;2.11, “Upgrading MySQL”</a>. For nonupgraded installations that
            have no <code class="literal">account_locked</code> column, the server
            treats all accounts as unlocked, and using the <code class="literal">ACCOUNT
            LOCK</code> or <code class="literal">ACCOUNT UNLOCK</code> clauses
            produces an error.
        </p><p style="color:blue;">帐户锁定功能取决于mysql.user系统表中是否存在帐户锁定列。对于超过5.7.6的MySQL版本升级，执行MySQL升级过程以确保该列存在。参见2.11节“升级mysql”。对于没有“帐户锁定”列的未升级安装，服务器将所有帐户视为未锁定，并且使用“帐户锁定”或“帐户解锁”子句会产生错误。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="user-resources"></a>6.2.16&nbsp;Setting Account Resource Limits</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286887615296"></a><a class="indexterm" name="idm140286887613840"></a><a class="indexterm" name="idm140286887612352"></a><a class="indexterm" name="idm140286887611280"></a><a class="indexterm" name="idm140286887610208"></a><a class="indexterm" name="idm140286887609120"></a><p>
            One means of restricting client use of MySQL server resources is
            to set the global
            <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> system
            variable to a nonzero value. This limits the number of
            simultaneous connections that can be made by any given account,
            but places no limits on what a client can do once connected. In
            addition, setting
            <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> does not
            enable management of individual accounts. Both types of control
            are of interest to MySQL administrators.
        </p><p style="color:blue;">限制客户机使用mysql服务器资源的一种方法是将全局max_user_connections系统变量设置为非零值。这限制了任何给定帐户可以同时进行的连接数，但对客户端连接后可以执行的操作没有限制。此外，设置max_user_connections不会启用单个帐户的管理。这两种类型的控件都是mysql管理员感兴趣的。</p><p>
            To address such concerns, MySQL permits limits for individual
            accounts on use of these server resources:
        </p><p style="color:blue;">为了解决这些问题，mysql允许限制单个帐户使用这些服务器资源：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The number of queries an account can issue per hour
                </p><p style="color:blue;">帐户每小时可以发出的查询数</p></li><li class="listitem"><p>
                    The number of updates an account can issue per hour
                </p><p style="color:blue;">帐户每小时可以发布的更新数</p></li><li class="listitem"><p>
                    The number of times an account can connect to the server per
                    hour
                </p><p style="color:blue;">帐户每小时可以连接到服务器的次数</p></li><li class="listitem"><p>
                    The number of simultaneous connections to the server by an
                    account
                </p><p style="color:blue;">帐户同时连接到服务器的次数</p></li></ul>
            </div>
            <p>
                Any statement that a client can issue counts against the query
                limit, unless its results are served from the query cache. Only
                statements that modify databases or tables count against the
                update limit.
            </p><p style="color:blue;">客户端可以根据查询限制发出计数的任何语句，除非其结果是从查询缓存提供的。只有修改数据库或表的语句才算作更新限制。</p><p>
            An <span class="quote">“<span class="quote">account</span>”</span> in this context corresponds to a row in
            the <code class="literal">mysql.user</code> system table. That is, a
            connection is assessed against the <code class="literal">User</code> and
            <code class="literal">Host</code> values in the <code class="literal">user</code>
            table row that applies to the connection. For example, an account
            <code class="literal">'usera'@'%.example.com'</code> corresponds to a row in
            the <code class="literal">user</code> table that has <code class="literal">User</code>
            and <code class="literal">Host</code> values of <code class="literal">usera</code> and
            <code class="literal">%.example.com</code>, to permit
            <code class="literal">usera</code> to connect from any host in the
            <code class="literal">example.com</code> domain. In this case, the server
            applies resource limits in this row collectively to all
            connections by <code class="literal">usera</code> from any host in the
            <code class="literal">example.com</code> domain because all such connections
            use the same account.
        </p><p style="color:blue;">此上下文中的“account”对应于mysql.user系统表中的一行。也就是说，根据应用于连接的用户表行中的用户和主机值来评估连接。例如，帐户“user a”@“%.example.com”对应于用户表中的一行，该行的用户和主机值为usera和%.example.com，以允许usera从example.com域中的任何主机连接。在这种情况下，服务器将此行中的资源限制集中应用于usera从example.com域中的任何主机创建的所有连接，因为所有此类连接都使用相同的帐户。</p><p>
            Before MySQL 5.0, an <span class="quote">“<span class="quote">account</span>”</span> was assessed against
            the actual host from which a user connects. This older method of
            accounting may be selected by starting the server with the
            <a class="link" href="server-administration.html#option_mysqld_old-style-user-limits"><code class="option">--old-style-user-limits</code></a> option. In
            this case, if <code class="literal">usera</code> connects simultaneously
            from <code class="literal">host1.example.com</code> and
            <code class="literal">host2.example.com</code>, the server applies the
            account resource limits separately to each connection. If
            <code class="literal">usera</code> connects again from
            <code class="literal">host1.example.com</code>, the server applies the
            limits for that connection together with the existing connection
            from that host.
        </p><p style="color:blue;">在mysql 5.0之前，根据用户连接的实际主机评估“帐户”。可以通过使用--old style user limits选项启动服务器来选择这种旧的记帐方法。在这种情况下，如果usera同时从host1.example.com和host2.example.com连接，服务器将分别对每个连接应用帐户资源限制。如果USERA从Hoest1.ExpLo.com再次连接，服务器将该连接的限制与来自该主机的现有连接一起应用。</p><p>
            To establish resource limits for an account at account-creation
            time, use the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>
            statement. To modify the limits for an existing account, use
            <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>. Provide a
            <code class="literal">WITH</code> clause that names each resource to be
            limited. The default value for each limit is zero (no limit). For
            example, to create a new account that can access the
            <code class="literal">customer</code> database, but only in a limited
            fashion, issue these statements:
        </p><p style="color:blue;">要在帐户创建时为帐户建立资源限制，请使用CREATEUSER语句。若要修改现有帐户的限制，请使用ALTER用户。提供一个WITH子句，该子句命名要限制的每个资源。每个限制的默认值为零（无限制）。例如，要创建一个可以访问客户数据库但只能以有限方式访问的新帐户，请发出以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE USER 'francis'@'localhost' IDENTIFIED BY 'frank'</code></strong>
    -&gt; <strong class="userinput"><code>    WITH MAX_QUERIES_PER_HOUR 20</code></strong>
    -&gt; <strong class="userinput"><code>         MAX_UPDATES_PER_HOUR 10</code></strong>
    -&gt; <strong class="userinput"><code>         MAX_CONNECTIONS_PER_HOUR 5</code></strong>
    -&gt; <strong class="userinput"><code>         MAX_USER_CONNECTIONS 2;</code></strong>
</pre><p>
            The limit types need not all be named in the
            <code class="literal">WITH</code> clause, but those named can be present in
            any order. The value for each per-hour limit should be an integer
            representing a count per hour. For
            <code class="literal">MAX_USER_CONNECTIONS</code>, the limit is an integer
            representing the maximum number of simultaneous connections by the
            account. If this limit is set to zero, the global
            <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> system
            variable value determines the number of simultaneous connections.
            If <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> is also
            zero, there is no limit for the account.
        </p><p style="color:blue;">限制类型不必在WITH子句中全部命名，但命名的类型可以按任何顺序出现。每小时限制的值应为表示每小时计数的整数。对于Max的UsSerix连接，该限制是一个整数，表示由该帐户同时连接的最大数量。如果将此限制设置为零，则全局max_user_connections系统变量值将确定同时连接的数目。如果max_user_connections也为零，则该帐户没有限制。</p><p>
            To modify limits for an existing account, use an
            <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> statement. The following
            statement changes the query limit for <code class="literal">francis</code>
            to 100:
        </p><p style="color:blue;">若要修改现有帐户的限制，请使用更改用户语句。以下语句将francis的查询限制更改为100：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER USER 'francis'@'localhost' WITH MAX_QUERIES_PER_HOUR 100;</code></strong>
</pre><p>
            The statement modifies only the limit value specified and leaves
            the account otherwise unchanged.
        </p><p style="color:blue;">语句只修改指定的限制值，否则帐户将保持不变。</p><p>
            To remove a limit, set its value to zero. For example, to remove
            the limit on how many times per hour <code class="literal">francis</code>
            can connect, use this statement:
        </p><p style="color:blue;">若要移除限制，请将其值设置为零。例如，要取消francis每小时可以连接多少次的限制，请使用以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER USER 'francis'@'localhost' WITH MAX_CONNECTIONS_PER_HOUR 0;</code></strong>
</pre><p>
            As mentioned previously, the simultaneous-connection limit for an
            account is determined from the
            <code class="literal">MAX_USER_CONNECTIONS</code> limit and the
            <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> system
            variable. Suppose that the global
            <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> value is 10
            and three accounts have individual resource limits specified as
            follows:
        </p><p style="color:blue;">如前所述，帐户的同时连接限制由max_user_connections limit和max_user_connections系统变量确定。假设全局max_user_connections值为10，并且三个帐户具有如下指定的单个资源限制：</p><pre data-lang="sql" class="programlisting">ALTER USER 'user1'@'localhost' WITH MAX_USER_CONNECTIONS 0;
ALTER USER 'user2'@'localhost' WITH MAX_USER_CONNECTIONS 5;
ALTER USER 'user3'@'localhost' WITH MAX_USER_CONNECTIONS 20;
</pre><p>
            <code class="literal">user1</code> has a connection limit of 10 (the global
            <a class="link" href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> value)
            because it has a <code class="literal">MAX_USER_CONNECTIONS</code> limit of
            zero. <code class="literal">user2</code> and <code class="literal">user3</code> have
            connection limits of 5 and 20, respectively, because they have
            nonzero <code class="literal">MAX_USER_CONNECTIONS</code> limits.
        </p><p style="color:blue;">user1的连接限制为10（全局max_user_connections值），因为它的max_user_connections限制为零。user2和user3的连接限制分别为5和20，因为它们具有非零的最大用户连接限制。</p><p>
            The server stores resource limits for an account in the
            <code class="literal">user</code> table row corresponding to the account.
            The <code class="literal">max_questions</code>,
            <code class="literal">max_updates</code>, and
            <code class="literal">max_connections</code> columns store the per-hour
            limits, and the <code class="literal">max_user_connections</code> column
            stores the <code class="literal">MAX_USER_CONNECTIONS</code> limit. (See
            <a class="xref" href="security.html#grant-tables" title="6.2.3&nbsp;Grant Tables">Section&nbsp;6.2.3, “Grant Tables”</a>.)
        </p><p style="color:blue;">服务器将帐户的资源限制存储在与该帐户对应的用户表行中。max_questions、max_updates和max_connections列存储每小时限制，max_user_connections列存储max_user_connections限制。（见第6.2.3节“拨款表”。）</p><p>
            Resource-use counting takes place when any account has a nonzero
            limit placed on its use of any of the resources.
        </p><p style="color:blue;">当任何帐户对其任何资源的使用设置了非零限制时，就会进行资源使用计数。</p><p>
            As the server runs, it counts the number of times each account
            uses resources. If an account reaches its limit on number of
            connections within the last hour, the server rejects further
            connections for the account until that hour is up. Similarly, if
            the account reaches its limit on the number of queries or updates,
            the server rejects further queries or updates until the hour is
            up. In all such cases, the server issues appropriate error
            messages.
        </p><p style="color:blue;">当服务器运行时，它计算每个帐户使用资源的次数。如果帐户在过去一小时内达到其连接数限制，服务器将拒绝该帐户的进一步连接，直到该小时结束。类似地，如果帐户达到查询或更新数量的限制，服务器将拒绝进一步的查询或更新，直到时间结束。在所有这些情况下，服务器都会发出适当的错误消息。</p><p>
            Resource counting occurs per account, not per client. For example,
            if your account has a query limit of 50, you cannot increase your
            limit to 100 by making two simultaneous client connections to the
            server. Queries issued on both connections are counted together.
        </p><p style="color:blue;">资源计数发生在每个帐户，而不是每个客户端。例如，如果帐户的查询限制为50，则不能通过同时建立两个到服务器的客户端连接来将限制增加到100。对两个连接发出的查询一起计算。</p><p>
            The current per-hour resource-use counts can be reset globally for
            all accounts, or individually for a given account:
        </p><p style="color:blue;">可以全局重置所有帐户的当前每小时资源使用计数，也可以单独重置给定帐户的当前每小时资源使用计数：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    To reset the current counts to zero for all accounts, issue a
                    <a class="link" href="sql-syntax.html#flush-user-resources"><code class="literal">FLUSH USER_RESOURCES</code></a> statement.
                    The counts also can be reset by reloading the grant tables
                    (for example, with a <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH
                    PRIVILEGES</code></a> statement or a <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
          reload</strong></span></a> command).
                </p><p style="color:blue;">要将所有帐户的当前计数重置为零，请发出flush user_resources语句。还可以通过重新加载授权表（例如，使用flush privileges语句或mysqladmin reload命令）来重置计数。</p></li><li class="listitem"><p>
                    The counts for an individual account can be reset to zero by
                    setting any of its limits again. Specify a limit value equal
                    to the value currently assigned to the account.
                </p><p style="color:blue;">通过再次设置单个帐户的任何限制，可以将其计数重置为零。指定与当前分配给帐户的值相等的限制值。</p></li></ul>
            </div>
            <p>
                Per-hour counter resets do not affect the
                <code class="literal">MAX_USER_CONNECTIONS</code> limit.
            </p><p style="color:blue;">每小时计数器重置不影响最大用户连接限制。</p><p>
            All counts begin at zero when the server starts. Counts do not
            carry over through server restarts.
        </p><p style="color:blue;">当服务器启动时，所有计数都从零开始。计数不会在服务器重新启动时结转。</p><p>
            For the <code class="literal">MAX_USER_CONNECTIONS</code> limit, an edge
            case can occur if the account currently has open the maximum
            number of connections permitted to it: A disconnect followed
            quickly by a connect can result in an error
            (<a class="link" href="error-handling.html#error_er_too_many_user_connections"><code class="literal">ER_TOO_MANY_USER_CONNECTIONS</code></a> or
            <a class="link" href="error-handling.html#error_er_user_limit_reached"><code class="literal">ER_USER_LIMIT_REACHED</code></a>) if the
            server has not fully processed the disconnect by the time the
            connect occurs. When the server finishes disconnect processing,
            another connection will once more be permitted.
        </p><p style="color:blue;">对于最大用户连接数限制，如果帐户当前打开了允许的最大连接数，则可能发生边缘情况：如果连接发生时，服务器没有完全处理断开，则连接快速地断开，可能导致错误（Erth-toooMyyuSurryConnect或ErthUsSeriLimiTi达到）。当服务器完成断开连接处理时，将再次允许另一个连接。</p>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="problems-connecting"></a>6.2.17&nbsp;Troubleshooting Problems Connecting to MySQL</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286887528736"></a><a class="indexterm" name="idm140286887527696"></a><a class="indexterm" name="idm140286887526208"></a><p>
            If you encounter problems when you try to connect to the MySQL
            server, the following items describe some courses of action you
            can take to correct the problem.
        </p><p style="color:blue;">如果在尝试连接到mysql服务器时遇到问题，以下项目描述了可以采取的纠正问题的一些操作过程。</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Make sure that the server is running. If it is not, clients
                    cannot connect to it. For example, if an attempt to connect to
                    the server fails with a message such as one of those
                    following, one cause might be that the server is not running:
                </p><p style="color:blue;">确保服务器正在运行。如果不是，则客户端无法连接到它。例如，如果尝试连接到服务器失败，并显示以下消息之一，则可能是服务器未运行：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql</code></strong>
ERROR 2003: Can't connect to MySQL server on '<em class="replaceable"><code>host_name</code></em>' (111)
shell&gt; <strong class="userinput"><code>mysql</code></strong>
ERROR 2002: Can't connect to local MySQL server through socket
'/tmp/mysql.sock' (111)
</pre></li><li class="listitem"><p>
                    It might be that the server is running, but you are trying to
                    connect using a TCP/IP port, named pipe, or Unix socket file
                    different from the one on which the server is listening. To
                    correct this when you invoke a client program, specify a
                    <a class="link" href="programs.html#option_general_port"><code class="option">--port</code></a> option to indicate the
                    proper port number, or a
                    <a class="link" href="programs.html#option_general_socket"><code class="option">--socket</code></a> option to indicate
                    the proper named pipe or Unix socket file. To find out where
                    the socket file is, you can use this command:
                </p><p style="color:blue;">可能是服务器正在运行，但您正在尝试使用与服务器正在侦听的端口不同的TCP/IP端口、命名管道或Unix套接字文件进行连接。要在调用客户端程序时更正此问题，请指定--port选项以指示正确的端口号，或指定--socket选项以指示正确的命名管道或unix套接字文件。要找出套接字文件的位置，可以使用以下命令：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>netstat -ln | grep mysql</code></strong>
</pre></li><li class="listitem"><p>
                    Make sure that the server has not been configured to ignore
                    network connections or (if you are attempting to connect
                    remotely) that it has not been configured to listen only
                    locally on its network interfaces. If the server was started
                    with <a class="link" href="server-administration.html#option_mysqld_skip-networking"><code class="option">--skip-networking</code></a>, it will
                    not accept TCP/IP connections at all. If the server was
                    started with the <a class="link" href="server-administration.html#sysvar_bind_address"><code class="literal">bind_address</code></a>
                    system variable set to <code class="literal">127.0.0.1</code>, it will
                    listen for TCP/IP connections only locally on the loopback
                    interface and will not accept remote connections.
                </p><p style="color:blue;">确保服务器未配置为忽略网络连接，或者（如果您尝试远程连接）未配置为仅在其网络接口上本地侦听。如果服务器是用--skip networking启动的，则它根本不接受TCP/IP连接。如果服务器是在bind_address系统变量设置为127.0.0.1的情况下启动的，则它将只在环回接口上本地侦听TCP/IP连接，而不接受远程连接。</p></li><li class="listitem"><p>
                    Check to make sure that there is no firewall blocking access
                    to MySQL. Your firewall may be configured on the basis of the
                    application being executed, or the port number used by MySQL
                    for communication (3306 by default). Under Linux or Unix,
                    check your IP tables (or similar) configuration to ensure that
                    the port has not been blocked. Under Windows, applications
                    such as ZoneAlarm or Windows Firewall may need to be
                    configured not to block the MySQL port.
                </p><p style="color:blue;">检查以确保没有防火墙阻止对mysql的访问。您的防火墙可以根据正在执行的应用程序或mysql用于通信的端口号进行配置（默认为3306）。在linux或unix下，检查ip表（或类似配置）以确保端口未被阻塞。在Windows下，可能需要配置ZoneAlarm或Windows防火墙等应用程序，以避免阻止MySQL端口。</p></li><li class="listitem"><p>
                    The grant tables must be properly set up so that the server
                    can use them for access control. For some distribution types
                    (such as binary distributions on Windows, or RPM distributions
                    on Linux), the installation process initializes the MySQL data
                    directory, including the <code class="literal">mysql</code> system
                    database containing the grant tables. For distributions that
                    do not do this, you must initialize the data directory
                    manually. For details, see <a class="xref" href="installing.html#postinstallation" title="2.10&nbsp;Postinstallation Setup and Testing">Section&nbsp;2.10, “Postinstallation Setup and Testing”</a>.
                </p><p style="color:blue;">必须正确设置授权表，以便服务器可以使用它们进行访问控制。对于某些发行版类型（如windows上的二进制发行版或linux上的rpm发行版），安装过程初始化mysql数据目录，包括包含授权表的mysql系统数据库。对于不执行此操作的发行版，必须手动初始化数据目录。有关详细信息，请参见第2.10节“安装后设置和测试”。</p><p>
                    To determine whether you need to initialize the grant tables,
                    look for a <code class="filename">mysql</code> directory under the data
                    directory. (The data directory normally is named
                    <code class="filename">data</code> or <code class="filename">var</code> and is
                    located under your MySQL installation directory.) Make sure
                    that you have a file named <code class="filename">user.MYD</code> in
                    the <code class="filename">mysql</code> database directory. If not,
                    <a class="link" href="installing.html#data-directory-initialization" title="2.10.1&nbsp;Initializing the Data Directory">initialize the
                        data directory</a>. After doing so and starting the server,
                    you should be able to connect to the server.
                </p><p style="color:blue;">要确定是否需要初始化grant表，请在data目录下查找mysql目录。（数据目录通常命名为data或var，位于mysql安装目录下。）确保mysql数据库目录中有一个名为user.myd的文件。否则，初始化数据目录。执行此操作并启动服务器后，您应该能够连接到服务器。</p></li><li class="listitem"><p>
                    After a fresh installation, if you try to log on to the server
                    as <code class="literal">root</code> without using a password, you might
                    get the following error message.
                </p><p style="color:blue;">重新安装后，如果尝试以根用户身份登录服务器而不使用密码，则可能会收到以下错误消息。</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root </code></strong>
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
</pre><p>
                    It means a root password has already been assigned during
                    installation and it has to be supplied. See
                    <a class="xref" href="installing.html#default-privileges" title="2.10.4&nbsp;Securing the Initial MySQL Account">Section&nbsp;2.10.4, “Securing the Initial MySQL Account”</a> on the different ways the
                    password could have been assigned and, in some cases, how to
                    find it. If you need to reset the root password, see
                    instructions in <a class="xref" href="error-handling.html#resetting-permissions" title="B.4.3.2&nbsp;How to Reset the Root Password">Section&nbsp;B.4.3.2, “How to Reset the Root Password”</a>. After
                    you have found or reset your password, log on again as
                    <code class="literal">root</code> using the
                    <a class="link" href="programs.html#option_general_password"><code class="option">--password</code></a> (or
                    <a class="link" href="programs.html#option_general_password"><code class="option">-p</code></a>)
                    option:
                </p><p style="color:blue;">这意味着在安装过程中已经分配了根密码，必须提供该密码。请参阅2.10.4节“保护初始mysql帐户”，了解密码的不同分配方式，以及在某些情况下如何查找密码。如果需要重置根密码，请参阅“如何重置根密码”一节中的说明。找到或重置密码后，使用--password（或-p）选项以root用户身份再次登录：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root -p </code></strong>
Enter password:
</pre><p>
                    However, the server is going to let you connect as
                    <code class="literal">root</code> without using a password if you have
                    initialized MySQL using <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld
          --initialize-insecure</strong></span></a> (see
                    <a class="xref" href="installing.html#data-directory-initialization" title="2.10.1&nbsp;Initializing the Data Directory">Section&nbsp;2.10.1, “Initializing the Data Directory”</a> for details).
                    That is a security risk, so you should set a password for the
                    <code class="literal">root</code> account; see
                    <a class="xref" href="installing.html#default-privileges" title="2.10.4&nbsp;Securing the Initial MySQL Account">Section&nbsp;2.10.4, “Securing the Initial MySQL Account”</a> for instructions.
                </p><p style="color:blue;">但是，如果使用mysqld初始化了mysql，服务器将允许您以根用户身份连接，而不使用密码——initialize insecure（有关详细信息，请参阅2.10.1节，“初始化数据目录”）。这是一个安全风险，因此您应该为根帐户设置密码；有关说明，请参阅2.10.4节“保护初始mysql帐户安全”。</p></li><li class="listitem"><p>
                    If you have updated an existing MySQL installation to a newer
                    version, did you perform the MySQL upgrade procedure? If not,
                    do so. The structure of the grant tables changes occasionally
                    when new capabilities are added, so after an upgrade you
                    should always make sure that your tables have the current
                    structure. For instructions, see <a class="xref" href="installing.html#upgrading" title="2.11&nbsp;Upgrading MySQL">Section&nbsp;2.11, “Upgrading MySQL”</a>.
                </p><p style="color:blue;">如果将现有的MySQL安装更新为较新版本，是否执行MySQL升级过程？如果没有，就这样做。添加新功能时，授予表的结构偶尔会更改，因此在升级后，应始终确保表具有当前结构。有关说明，请参阅2.11节“升级mysql”。</p></li><li class="listitem"><p>
                    If a client program receives the following error message when
                    it tries to connect, it means that the server expects
                    passwords in a newer format than the client is capable of
                    generating:
                </p><p style="color:blue;">如果客户端程序在尝试连接时收到以下错误消息，则意味着服务器需要比客户端能够生成的格式新的密码：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql</code></strong>
Client does not support authentication protocol requested
by server; consider upgrading MySQL client
</pre><p>
                    For information on how to deal with this, see
                    <a class="xref" href="security.html#account-upgrades" title="6.4.1.3&nbsp;Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password Plugin">Section&nbsp;6.4.1.3, “Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password
                        Plugin”</a>.
                </p><p style="color:blue;">有关如何处理此问题的信息，请参阅第6.4.1.3节“从4.1之前的密码散列和mysql旧密码插件迁移”。</p></li><li class="listitem"><p>
                    <a class="indexterm" name="idm140286887480240"></a>

                    <a class="indexterm" name="idm140286887479168"></a>

                    <a class="indexterm" name="idm140286887478096"></a>

                    <a class="indexterm" name="idm140286887477024"></a>

                    <a class="indexterm" name="idm140286887475952"></a>

                    Remember that client programs use connection parameters
                    specified in option files or environment variables. If a
                    client program seems to be sending incorrect default
                    connection parameters when you have not specified them on the
                    command line, check any applicable option files and your
                    environment. For example, if you get <code class="literal">Access
                    denied</code> when you run a client without any options,
                    make sure that you have not specified an old password in any
                    of your option files!
                </p><p style="color:blue;">请记住，客户端程序使用选项文件或环境变量中指定的连接参数。如果在命令行上未指定默认连接参数时，客户端程序似乎正在发送不正确的默认连接参数，请检查任何适用的选项文件和环境。例如，如果在没有任何选项的情况下运行客户端时访问被拒绝，请确保没有在任何选项文件中指定旧密码！</p><p>
                    You can suppress the use of option files by a client program
                    by invoking it with the
                    <a class="link" href="programs.html#option_general_no-defaults"><code class="option">--no-defaults</code></a> option. For
                    example:
                </p><p style="color:blue;">通过使用--no defaults选项调用选项文件，可以禁止客户端程序使用选项文件。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin --no-defaults -u root version</code></strong>
</pre><p>
                    The option files that clients use are listed in
                    <a class="xref" href="programs.html#option-files" title="4.2.2.2&nbsp;Using Option Files">Section&nbsp;4.2.2.2, “Using Option Files”</a>. Environment variables are
                    listed in <a class="xref" href="programs.html#environment-variables" title="4.9&nbsp;MySQL Environment Variables">Section&nbsp;4.9, “MySQL Environment Variables”</a>.
                </p><p style="color:blue;">客户机使用的选项文件列在第4.2.2.2节“使用选项文件”中。环境变量在第4.9节“MySQL环境变量”中列出。</p></li><li class="listitem"><p>
                    If you get the following error, it means that you are using an
                    incorrect <code class="literal">root</code> password:
                </p><p style="color:blue;">如果出现以下错误，则表示您使用的根密码不正确：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -u root -p<em class="replaceable"><code>xxxx</code></em> ver</code></strong>
Access denied for user 'root'@'localhost' (using password: YES)
</pre><p>
                    If the preceding error occurs even when you have not specified
                    a password, it means that you have an incorrect password
                    listed in some option file. Try the
                    <a class="link" href="programs.html#option_general_no-defaults"><code class="option">--no-defaults</code></a> option as
                    described in the previous item.
                </p><p style="color:blue;">如果前面的错误甚至在您没有指定密码的情况下发生，则意味着您在某个选项文件中列出了不正确的密码。如前一项所述，尝试--no defaults选项。</p><p>
                    For information on changing passwords, see
                    <a class="xref" href="security.html#assigning-passwords" title="6.2.10&nbsp;Assigning Account Passwords">Section&nbsp;6.2.10, “Assigning Account Passwords”</a>.
                </p><p style="color:blue;">有关更改密码的信息，请参阅第6.2.10节“分配帐户密码”。</p><p>
                    If you have lost or forgotten the <code class="literal">root</code>
                    password, see <a class="xref" href="error-handling.html#resetting-permissions" title="B.4.3.2&nbsp;How to Reset the Root Password">Section&nbsp;B.4.3.2, “How to Reset the Root Password”</a>.
                </p><p style="color:blue;">如果您丢失或忘记了根密码，请参阅“如何重置根密码”一节。</p></li><li class="listitem"><p>
                    <code class="literal">localhost</code> is a synonym for your local host
                    name, and is also the default host to which clients try to
                    connect if you specify no host explicitly.
                </p><p style="color:blue;">local host是本地主机名的同义词，如果未显式指定主机，则也是客户端尝试连接的默认主机。</p><p>
                    You can use a <a class="link" href="programs.html#option_general_host"><code class="option">--host=127.0.0.1</code></a>
                    option to name the server host explicitly. This will make a
                    TCP/IP connection to the local <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
                    server. You can also use TCP/IP by specifying a
                    <a class="link" href="programs.html#option_general_host"><code class="option">--host</code></a> option that uses the
                    actual host name of the local host. In this case, the host
                    name must be specified in a <code class="literal">user</code> table row
                    on the server host, even though you are running the client
                    program on the same host as the server.
                </p><p style="color:blue;">可以使用--host=127.0.0.1选项显式命名服务器主机。这将建立到本地mysqld服务器的tcp/ip连接。还可以通过指定使用本地主机的实际主机名的--host选项来使用TCP/IP。在这种情况下，必须在服务器主机上的用户表行中指定主机名，即使您在与服务器相同的主机上运行客户端程序。</p></li><li class="listitem"><p>
                    The <code class="literal">Access denied</code> error message tells you
                    who you are trying to log in as, the client host from which
                    you are trying to connect, and whether you were using a
                    password. Normally, you should have one row in the
                    <code class="literal">user</code> table that exactly matches the host
                    name and user name that were given in the error message. For
                    example, if you get an error message that contains
                    <code class="literal">using password: NO</code>, it means that you tried
                    to log in without a password.
                </p><p style="color:blue;">“拒绝访问”错误消息告诉您要以谁身份登录、要从中连接的客户端主机以及是否使用了密码。通常，用户表中应该有一行与错误消息中给出的主机名和用户名完全匹配。例如，如果收到包含using password:no的错误消息，则表示您试图在没有密码的情况下登录。</p></li><li class="listitem"><p>
                    If you get an <code class="literal">Access denied</code> error when
                    trying to connect to the database with <code class="literal">mysql -u
                    <em class="replaceable"><code>user_name</code></em></code>, you may have a
                    problem with the <code class="literal">user</code> table. Check this by
                    executing <code class="literal">mysql -u root mysql</code> and issuing
                    this SQL statement:
                </p><p style="color:blue;">如果在尝试使用mysql-u用户名连接到数据库时遇到拒绝访问错误，则用户表可能有问题。通过执行mysql-u根mysql并发出以下sql语句来检查：</p><pre data-lang="sql" class="programlisting">SELECT * FROM user;
</pre><p>
                    The result should include a row with the
                    <code class="literal">Host</code> and <code class="literal">User</code> columns
                    matching your client's host name and your MySQL user name.
                </p><p style="color:blue;">结果应该包含一行，其中主机列和用户列与客户机的主机名和mysql用户名匹配。</p></li><li class="listitem"><p>
                    If the following error occurs when you try to connect from a
                    host other than the one on which the MySQL server is running,
                    it means that there is no row in the <code class="literal">user</code>
                    table with a <code class="literal">Host</code> value that matches the
                    client host:
                </p><p style="color:blue;">如果尝试从运行mysql服务器的主机以外的主机连接时发生以下错误，则表示用户表中没有主机值与客户端主机匹配的行：</p><pre data-lang="none" class="programlisting">Host ... is not allowed to connect to this MySQL server
</pre><p>
                    You can fix this by setting up an account for the combination
                    of client host name and user name that you are using when
                    trying to connect.
                </p><p style="color:blue;">可以通过为尝试连接时使用的客户端主机名和用户名的组合设置帐户来解决此问题。</p><p>
                    If you do not know the IP address or host name of the machine
                    from which you are connecting, you should put a row with
                    <code class="literal">'%'</code> as the <code class="literal">Host</code> column
                    value in the <code class="literal">user</code> table. After trying to
                    connect from the client machine, use a <code class="literal">SELECT
                    USER()</code> query to see how you really did connect. Then
                    change the <code class="literal">'%'</code> in the
                    <code class="literal">user</code> table row to the actual host name that
                    shows up in the log. Otherwise, your system is left insecure
                    because it permits connections from any host for the given
                    user name.
                </p><p style="color:blue;">如果不知道要连接的计算机的IP地址或主机名，则应在用户表中放置一行“%”作为主机列值。尝试从客户端计算机连接后，请使用select user（）查询查看实际连接方式。然后将用户表行中的“%”更改为显示在日志中的实际主机名。否则，您的系统将不安全，因为它允许从给定用户名的任何主机进行连接。</p><p>
                    On Linux, another reason that this error might occur is that
                    you are using a binary MySQL version that is compiled with a
                    different version of the <code class="literal">glibc</code> library than
                    the one you are using. In this case, you should either upgrade
                    your operating system or <code class="literal">glibc</code>, or download
                    a source distribution of MySQL version and compile it
                    yourself. A source RPM is normally trivial to compile and
                    install, so this is not a big problem.
                </p><p style="color:blue;">在Linux上，可能发生此错误的另一个原因是，您使用的是二进制MySQL版本，该版本是用与您使用的glibc库不同的版本编译的。在这种情况下，您应该升级操作系统或glibc，或者下载mysql版本的源发行版并自行编译。源RPM在编译和安装方面通常很简单，所以这不是什么大问题。</p></li><li class="listitem"><p>
                    If you specify a host name when trying to connect, but get an
                    error message where the host name is not shown or is an IP
                    address, it means that the MySQL server got an error when
                    trying to resolve the IP address of the client host to a name:
                </p><p style="color:blue;">如果在尝试连接时指定主机名，但在未显示主机名或是IP地址的情况下收到错误消息，则表示MySQL服务器在尝试将客户端主机的IP地址解析为名称时出错：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -u root -p<em class="replaceable"><code>xxxx</code></em> -h <em class="replaceable"><code>some_hostname</code></em> ver</code></strong>
Access denied for user 'root'@'' (using password: YES)
</pre><p>
                    If you try to connect as <code class="literal">root</code> and get the
                    following error, it means that you do not have a row in the
                    <code class="literal">user</code> table with a <code class="literal">User</code>
                    column value of <code class="literal">'root'</code> and that
                    <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> cannot resolve the host name for
                    your client:
                </p><p style="color:blue;">如果尝试以根用户身份连接，并出现以下错误，则表示用户表中没有用户列值为“root”的行，并且mysqld无法解析客户端的主机名：</p><pre data-lang="none" class="programlisting">Access denied for user ''@'unknown'
</pre><p>
                    These errors indicate a DNS problem. To fix it, execute
                    <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin flush-hosts</strong></span></a> to reset the
                    internal DNS host cache. See <a class="xref" href="optimization.html#host-cache" title="8.12.5.2&nbsp;DNS Lookup Optimization and the Host Cache">Section&nbsp;8.12.5.2, “DNS Lookup Optimization and the Host Cache”</a>.
                </p><p style="color:blue;">这些错误表明存在DNS问题。要修复此问题，请执行mysqladmin flush hosts以重置内部dns主机缓存。参见第8.12.5.2节“DNS查找优化和主机缓存”。</p><p>
                    Some permanent solutions are:
                </p><p style="color:blue;">一些永久性的解决方案是：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                            Determine what is wrong with your DNS server and fix it.
                        </p><p style="color:blue;">确定你的dns服务器出了什么问题并修复它。</p></li><li class="listitem"><p>
                            Specify IP addresses rather than host names in the MySQL
                            grant tables.
                        </p><p style="color:blue;">在mysql授权表中指定ip地址而不是主机名。</p></li><li class="listitem"><p>
                            Put an entry for the client machine name in
                            <code class="filename">/etc/hosts</code> on Unix or
                            <code class="filename">\windows\hosts</code> on Windows.
                        </p><p style="color:blue;">在UNIX上的/etc/hosts或Windows上的\windows\hosts中输入客户机名称。</p></li><li class="listitem"><p>
                            Start <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with the
                            <a class="link" href="server-administration.html#option_mysqld_skip-name-resolve"><code class="option">--skip-name-resolve</code></a> option.
                        </p><p style="color:blue;">使用--skip name resolve选项启动mysqld。</p></li><li class="listitem"><p>
                            Start <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with the
                            <a class="link" href="server-administration.html#option_mysqld_skip-host-cache"><code class="option">--skip-host-cache</code></a> option.
                        </p><p style="color:blue;">使用--skip host cache选项启动mysqld。</p></li><li class="listitem"><p>
                            On Unix, if you are running the server and the client on
                            the same machine, connect to <code class="literal">localhost</code>.
                            For connections to <code class="literal">localhost</code>, MySQL
                            programs attempt to connect to the local server by using a
                            Unix socket file, unless there are connection parameters
                            specified to ensure that the client makes a TCP/IP
                            connection. For more information, see
                            <a class="xref" href="programs.html#connecting" title="4.2.4&nbsp;Connecting to the MySQL Server Using Command Options">Section&nbsp;4.2.4, “Connecting to the MySQL Server Using Command Options”</a>.
                        </p><p style="color:blue;">在UNIX上，如果您在同一台计算机上运行服务器和客户端，请连接到本地主机。对于到本地主机的连接，mysql程序尝试使用unix套接字文件连接到本地服务器，除非指定了连接参数以确保客户端进行tcp/ip连接。有关更多信息，请参阅4.2.4节，“使用命令选项连接到mysql服务器”。</p></li><li class="listitem"><p>
                            On Windows, if you are running the server and the client
                            on the same machine and the server supports named pipe
                            connections, connect to the host name <code class="literal">.</code>
                            (period). Connections to <code class="literal">.</code> use a named
                            pipe rather than TCP/IP.
                        </p><p style="color:blue;">在Windows上，如果在同一台计算机上运行服务器和客户端，并且服务器支持命名管道连接，请连接到主机名。（句号）。连接到。使用命名管道而不是TCP/IP。</p></li></ul>
                    </div>
                </li><li class="listitem"><p>
                    If <code class="literal">mysql -u root</code> works but <code class="literal">mysql
                    -h <em class="replaceable"><code>your_hostname</code></em> -u root</code>
                    results in <code class="literal">Access denied</code> (where
                    <em class="replaceable"><code>your_hostname</code></em> is the actual host
                    name of the local host), you may not have the correct name for
                    your host in the <code class="literal">user</code> table. A common
                    problem here is that the <code class="literal">Host</code> value in the
                    <code class="literal">user</code> table row specifies an unqualified
                    host name, but your system's name resolution routines return a
                    fully qualified domain name (or vice versa). For example, if
                    you have a row with host <code class="literal">'pluto'</code> in the
                    <code class="literal">user</code> table, but your DNS tells MySQL that
                    your host name is <code class="literal">'pluto.example.com'</code>, the
                    row does not work. Try adding a row to the
                    <code class="literal">user</code> table that contains the IP address of
                    your host as the <code class="literal">Host</code> column value.
                    (Alternatively, you could add a row to the
                    <code class="literal">user</code> table with a <code class="literal">Host</code>
                    value that contains a wildcard (for example,
                    <code class="literal">'pluto.%'</code>). However, use of
                    <code class="literal">Host</code> values ending with
                    <code class="literal">%</code> is <span class="emphasis"><em>insecure</em></span> and is
                    <span class="emphasis"><em>not</em></span> recommended!)
                </p><p style="color:blue;">如果mysql-u root可以工作，但是mysql-h your_host name-u root导致访问被拒绝（其中，your_hostname是本地主机的实际主机名），则在用户表中可能没有正确的主机名。这里的一个常见问题是，用户表行中的主机值指定了一个不合格的主机名，但是系统的名称解析例程返回一个完全合格的域名（反之亦然）。例如，如果在用户表中有一行主机名为“pluto”，但dns告诉mysql主机名为“pluto.example.com”，则该行不起作用。尝试向用户表中添加一行，其中包含主机的IP地址作为主机列值。（或者，可以使用包含通配符的主机值（例如，“pluto.%”）将行添加到用户表中。但是，使用以%结尾的主机值是不安全的，不建议使用！）</p></li><li class="listitem"><p>
                    If <code class="literal">mysql -u
                    <em class="replaceable"><code>user_name</code></em></code> works but
                    <code class="literal">mysql -u <em class="replaceable"><code>user_name</code></em>
                        <em class="replaceable"><code>some_db</code></em></code> does not, you
                    have not granted access to the given user for the database
                    named <em class="replaceable"><code>some_db</code></em>.
                </p><p style="color:blue;">如果mysql-u user_name可以工作，但mysql-u user_name some_db不能工作，则您还没有为名为some_db的数据库授予对给定用户的访问权限。</p></li><li class="listitem"><p>
                    If <code class="literal">mysql -u
                    <em class="replaceable"><code>user_name</code></em></code> works when
                    executed on the server host, but <code class="literal">mysql -h
                    <em class="replaceable"><code>host_name</code></em> -u
                    <em class="replaceable"><code>user_name</code></em></code> does not work
                    when executed on a remote client host, you have not enabled
                    access to the server for the given user name from the remote
                    host.
                </p><p style="color:blue;">如果mysql-u用户名在服务器主机上执行时有效，但mysql-h host-u用户名在远程客户端主机上执行时无效，则尚未从远程主机启用对给定用户名的服务器访问。</p></li><li class="listitem"><p>
                    If you cannot figure out why you get <code class="literal">Access
                    denied</code>, remove from the <code class="literal">user</code>
                    table all rows that have <code class="literal">Host</code> values
                    containing wildcards (rows that contain <code class="literal">'%'</code>
                    or <code class="literal">'_'</code> characters). A very common error is
                    to insert a new row with
                    <code class="literal">Host</code>=<code class="literal">'%'</code> and
                    <code class="literal">User</code>=<code class="literal">'<em class="replaceable"><code>some_user</code></em>'</code>,
                    thinking that this enables you to specify
                    <code class="literal">localhost</code> to connect from the same machine.
                    The reason that this does not work is that the default
                    privileges include a row with
                    <code class="literal">Host</code>=<code class="literal">'localhost'</code> and
                    <code class="literal">User</code>=<code class="literal">''</code>. Because that
                    row has a <code class="literal">Host</code> value
                    <code class="literal">'localhost'</code> that is more specific than
                    <code class="literal">'%'</code>, it is used in preference to the new
                    row when connecting from <code class="literal">localhost</code>! The
                    correct procedure is to insert a second row with
                    <code class="literal">Host</code>=<code class="literal">'localhost'</code> and
                    <code class="literal">User</code>=<code class="literal">'<em class="replaceable"><code>some_user</code></em>'</code>,
                    or to delete the row with
                    <code class="literal">Host</code>=<code class="literal">'localhost'</code> and
                    <code class="literal">User</code>=<code class="literal">''</code>. After deleting
                    the row, remember to issue a <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH
                    PRIVILEGES</code></a> statement to reload the grant tables. See
                    also <a class="xref" href="security.html#connection-access" title="6.2.5&nbsp;Access Control, Stage 1: Connection Verification">Section&nbsp;6.2.5, “Access Control, Stage 1: Connection Verification”</a>.
                </p><p style="color:blue;">如果无法找出拒绝访问的原因，请从用户表中删除具有包含通配符的主机值的所有行（包含“%”或“\u”字符的行）。一个非常常见的错误是插入一个新的行，该行的主机名为“%”，用户名为“some_user”，认为这样可以指定要从同一台计算机连接的本地主机。这不起作用的原因是默认权限包含一行host='localhost'和user=''。因为该行的主机值“localhost”比“%”更具体，所以在从localhost连接时，它优先于新行使用！正确的过程是插入第二行host='localhost'和user='some_user'，或者删除行host='localhost'和user=''。删除行后，请记住发出flush privileges语句以重新加载GRANT表。另见第6.2.5节，“访问控制，第1阶段：连接验证”。</p></li><li class="listitem"><p>
                    If you are able to connect to the MySQL server, but get an
                    <code class="literal">Access denied</code> message whenever you issue a
                    <a class="link" href="sql-syntax.html#select-into" title="13.2.9.1&nbsp;SELECT ... INTO Syntax"><code class="literal">SELECT ... INTO
                        OUTFILE</code></a> or <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a>
                    statement, your row in the <code class="literal">user</code> table does
                    not have the <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> privilege
                    enabled.
                </p><p style="color:blue;">如果您能够连接到mysql服务器，但在发出select命令时收到拒绝访问消息…在outfile或load data语句中，用户表中的行没有启用文件权限。</p></li><li class="listitem"><p>
                    If you change the grant tables directly (for example, by using
                    <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                    <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, or
                    <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> statements) and your
                    changes seem to be ignored, remember that you must execute a
                    <a class="link" href="sql-syntax.html#flush-privileges"><code class="literal">FLUSH PRIVILEGES</code></a> statement or a
                    <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin flush-privileges</strong></span></a> command to
                    cause the server to reload the privilege tables. Otherwise,
                    your changes have no effect until the next time the server is
                    restarted. Remember that after you change the
                    <code class="literal">root</code> password with an
                    <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a> statement, you will not
                    need to specify the new password until after you flush the
                    privileges, because the server will not know you've changed
                    the password yet!
                </p><p style="color:blue;">如果直接更改授权表（例如，使用INSERT、UPDATE或DELETE语句），并且您的更改似乎被忽略，请记住，必须执行FLUSH PRIVITES语句或mysqladmin flush privileges命令才能使服务器重新加载特权表。否则，您所做的更改在下次重新启动服务器之前无效。请记住，使用update语句更改根密码后，在刷新权限之前，您不需要指定新密码，因为服务器还不知道您已经更改了密码！</p></li><li class="listitem"><p>
                    If your privileges seem to have changed in the middle of a
                    session, it may be that a MySQL administrator has changed
                    them. Reloading the grant tables affects new client
                    connections, but it also affects existing connections as
                    indicated in <a class="xref" href="security.html#privilege-changes" title="6.2.9&nbsp;When Privilege Changes Take Effect">Section&nbsp;6.2.9, “When Privilege Changes Take Effect”</a>.
                </p><p style="color:blue;">如果您的权限似乎在会话过程中发生了更改，则可能是MySQL管理员更改了它们。重新加载授权表会影响新的客户端连接，但它也会影响到在第6节2.9节中所示的“现有连接”，当特权更改生效时。</p></li><li class="listitem"><p>
                    If you have access problems with a Perl, PHP, Python, or ODBC
                    program, try to connect to the server with <code class="literal">mysql -u
                    <em class="replaceable"><code>user_name</code></em>
                    <em class="replaceable"><code>db_name</code></em></code> or <code class="literal">mysql
                    -u <em class="replaceable"><code>user_name</code></em>
                    -p<em class="replaceable"><code>password</code></em>
                    <em class="replaceable"><code>db_name</code></em></code>. If you are able
                    to connect using the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, the
                    problem lies with your program, not with the access
                    privileges. (There is no space between <code class="option">-p</code> and
                    the password; you can also use the
                    <a class="link" href="programs.html#option_general_password"><code class="option">--password=<em class="replaceable"><code>password</code></em></code></a>
                    syntax to specify the password. If you use the
                    <code class="option">-p</code> or
                    <a class="link" href="programs.html#option_general_password"><code class="option">--password</code></a> option with no
                    password value, MySQL prompts you for the password.)
                </p><p style="color:blue;">如果perl、php、python或odbc程序存在访问问题，请尝试使用mysql-u user_name db_name或mysql-u user_name-ppassword db_name连接到服务器。如果您能够使用mysql客户端进行连接，那么问题在于您的程序，而不是访问权限。（在-p和密码之间没有空格；您还可以使用--password=password语法指定密码。如果在没有密码值的情况下使用-p或--password选项，mysql会提示您输入密码。）</p></li><li class="listitem"><p>
                    For testing purposes, start the <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
                    server with the
                    <a class="link" href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option.
                    Then you can change the MySQL grant tables and use the
                    <a class="link" href="sql-syntax.html#show-grants" title="13.7.5.21&nbsp;SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> statement to check
                    whether your modifications have the desired effect. When you
                    are satisfied with your changes, execute <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin
          flush-privileges</strong></span></a> to tell the
                    <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> server to reload the privileges.
                    This enables you to begin using the new grant table contents
                    without stopping and restarting the server.
                </p><p style="color:blue;">出于测试目的，使用--skip grant tables选项启动mysqld服务器。然后您可以更改mysql grant表，并使用show grants语句检查您的修改是否具有所需的效果。当您对您的更改感到满意时，执行mysqladmin flush privileges命令mysqld服务器重新加载这些特权。这使您能够在不停止和重新启动服务器的情况下开始使用新的授权表内容。</p></li><li class="listitem"><p>
                    If everything else fails, start the <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>
                    server with a debugging option (for example,
                    <a class="link" href="server-administration.html#option_mysqld_debug"><code class="option">--debug=d,general,query</code></a>). This
                    prints host and user information about attempted connections,
                    as well as information about each command issued. See
                    <a class="xref" href="extending-mysql.html#dbug-package" title="28.5.3&nbsp;The DBUG Package">Section&nbsp;28.5.3, “The DBUG Package”</a>.
                </p><p style="color:blue;">如果其他操作都失败，请使用调试选项（例如，--debug=d，general，query）启动mysqld服务器。这将打印有关尝试的连接的主机和用户信息，以及有关发出的每个命令的信息。见第28.5.3节“dbug包”。</p></li><li class="listitem"><p>
                    If you have any other problems with the MySQL grant tables and
                    ask on the
                    <a class="ulink" href="https://mysqlcommunity.slack.com/" target="_top">MySQL Community
                        Slack</a>, always provide a dump of the MySQL grant
                    tables. You can dump the tables with the <a class="link" href="programs.html#mysqldump" title="4.5.4&nbsp;mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump
          mysql</strong></span></a> command. To file a bug report, see the
                    instructions at <a class="xref" href="introduction.html#bug-reports" title="1.7&nbsp;How to Report Bugs or Problems">Section&nbsp;1.7, “How to Report Bugs or Problems”</a>. In some cases,
                    you may need to restart <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> with
                    <a class="link" href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> to run
                    <a class="link" href="programs.html#mysqldump" title="4.5.4&nbsp;mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>.
                </p><p style="color:blue;">如果您对mysql grant表有任何其他问题，并询问mysql community slack，请始终提供mysql grant表的转储。可以使用mysql dump mysql命令转储表。要提交错误报告，请参阅1.7节“如何报告错误或问题”中的说明。在某些情况下，可能需要使用--skip grant tables重新启动mysqld来运行mysqldump。</p></li></ul>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="account-activity-auditing"></a>6.2.18&nbsp;SQL-Based Account Activity Auditing</h3>

                    </div>

                </div>

            </div>
            <p>
                Applications can use the following guidelines to perform SQL-based
                auditing that ties database activity to MySQL accounts.
            </p><p style="color:blue;">应用程序可以使用以下准则执行基于sql的审核，将数据库活动与mysql帐户关联起来。</p><p>
            MySQL accounts correspond to rows in the
            <code class="literal">mysql.user</code> system table. When a client connects
            successfully, the server authenticates the client to a particular
            row in this table. The <code class="literal">User</code> and
            <code class="literal">Host</code> column values in this row uniquely
            identify the account and correspond to the
            <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'</code>
            format in which account names are written in SQL statements.
        </p><p style="color:blue;">mysql帐户对应mysql.user系统表中的行。当客户机成功连接时，服务器会将客户机验证到此表中的特定行。此行中的“用户”和“主机”列值唯一标识帐户，并对应于在SQL语句中写入帐户名的“用户名”@“主机名”格式。</p><p>
            The account used to authenticate a client determines which
            privileges the client has. Normally, the
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function can be
            invoked to determine which account this is for the client user.
            Its value is constructed from the <code class="literal">User</code> and
            <code class="literal">Host</code> columns of the <code class="literal">user</code>
            table row for the account.
        </p><p style="color:blue;">用于对客户端进行身份验证的帐户确定客户端具有哪些权限。通常，可以调用current_user（）函数来确定这是针对客户端用户的帐户。它的值是根据帐户的用户表行的用户列和主机列构造的。</p><p>
            However, there are circumstances under which the
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> value corresponds
            not to the client user but to a different account. This occurs in
            contexts when privilege checking is not based the client's
            account:
        </p><p style="color:blue;">但是，在某些情况下，当前的_user（）值不对应于客户端用户，而是对应于不同的帐户。当权限检查不基于客户端帐户时，在上下文中会发生这种情况：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Stored routines (procedures and functions) defined with the
                    <code class="literal">SQL SECURITY DEFINER</code> characteristic
                </p><p style="color:blue;">用sql安全定义器特性定义的存储例程（过程和函数）</p></li><li class="listitem"><p>
                    Views defined with the <code class="literal">SQL SECURITY DEFINER</code>
                    characteristic
                </p><p style="color:blue;">使用SQL安全定义器特性定义的视图</p></li><li class="listitem"><p>
                    Triggers and events
                </p><p style="color:blue;">触发器和事件</p></li></ul>
            </div>
            <p>
                In those contexts, privilege checking is done against the
                <code class="literal">DEFINER</code> account and
                <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> refers to that
                account, not to the account for the client who invoked the stored
                routine or view or who caused the trigger to activate. To
                determine the invoking user, you can call the
                <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> function, which returns a
                value indicating the actual user name provided by the client and
                the host from which the client connected. However, this value does
                not necessarily correspond directly to an account in the
                <code class="literal">user</code> table, because the
                <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> value never contains
                wildcards, whereas account values (as returned by
                <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>) may contain user
                name and host name wildcards.
            </p><p style="color:blue;">在这些上下文中，对定义者帐户进行权限检查，当前用户（）引用该帐户，而不是调用存储例程或视图或导致触发器激活的客户端的帐户。要确定调用的用户，可以调用user（）函数，该函数返回一个值，该值指示客户机提供的实际用户名和客户机连接的主机。但是，此值不一定与用户表中的帐户直接对应，因为user（）值从不包含通配符，而帐户值（由当前用户（）返回）可能包含用户名和主机名通配符。</p><p>
            For example, a blank user name matches any user, so an account of
            <code class="literal">''@'localhost'</code> enables clients to connect as an
            anonymous user from the local host with any user name. In this
            case, if a client connects as <code class="literal">user1</code> from the
            local host, <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> and
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> return different
            values:
        </p><p style="color:blue;">例如，空用户名与任何用户匹配，因此'@'local host'帐户使客户端能够以匿名用户身份从本地主机连接到任何用户名。在这种情况下，如果客户端以user1身份从本地主机连接，则user（）和current_user（）返回不同的值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER();</code></strong>
+-----------------+----------------+
| USER()          | CURRENT_USER() |
+-----------------+----------------+
| user1@localhost | @localhost     |
+-----------------+----------------+
</pre><p>
            The host name part of an account can contain wildcards, too. If
            the host name contains a <code class="literal">'%'</code> or
            <code class="literal">'_'</code> pattern character or uses netmask notation,
            the account can be used for clients connecting from multiple hosts
            and the <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> value will
            not indicate which one. For example, the account
            <code class="literal">'user2'@'%.example.com'</code> can be used by
            <code class="literal">user2</code> to connect from any host in the
            <code class="literal">example.com</code> domain. If <code class="literal">user2</code>
            connects from <code class="literal">remote.example.com</code>,
            <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> and
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> return different
            values:
        </p><p style="color:blue;">帐户的主机名部分也可以包含通配符。如果主机名包含“%”或“\u”模式字符或使用网络掩码表示法，则该帐户可用于从多个主机连接的客户端，并且当前的_user（）值不会指示哪个主机。例如，user2可以使用帐户“user2”@“%.example.com”从example.com域中的任何主机进行连接。如果user2从remote.example.com连接，则user（）和current_user（）返回不同的值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER();</code></strong>
+--------------------------+---------------------+
| USER()                   | CURRENT_USER()      |
+--------------------------+---------------------+
| user2@remote.example.com | user2@%.example.com |
+--------------------------+---------------------+
</pre><p>
            If an application must invoke
            <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> for user auditing (for
            example, if it does auditing from within triggers) but must also
            be able to associate the <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>
            value with an account in the <code class="literal">user</code> table, it is
            necessary to avoid accounts that contain wildcards in the
            <code class="literal">User</code> or <code class="literal">Host</code> column.
            Specifically, do not permit <code class="literal">User</code> to be empty
            (which creates an anonymous-user account), and do not permit
            pattern characters or netmask notation in <code class="literal">Host</code>
            values. All accounts must have a nonempty <code class="literal">User</code>
            value and literal <code class="literal">Host</code> value.
        </p><p style="color:blue;">如果应用程序必须调用user（）进行用户审核（例如，如果它从触发器内进行审核），但也必须能够将user（）值与用户表中的帐户关联，则必须避免在user或host列中包含通配符的帐户。具体来说，不允许用户为空（这将创建匿名用户帐户），也不允许在主机值中使用模式字符或网络掩码表示法。所有帐户都必须具有非空的用户值和文字主机值。</p><p>
            With respect to the previous examples, the
            <code class="literal">''@'localhost'</code> and
            <code class="literal">'user2'@'%.example.com'</code> accounts should be
            changed not to use wildcards:
        </p><p style="color:blue;">关于前面的示例，'@'localhost'和'user2'@'%.example.com'帐户应更改为不使用通配符：</p><pre data-lang="sql" class="programlisting">RENAME USER ''@'localhost' TO 'user1'@'localhost';
RENAME USER 'user2'@'%.example.com' TO 'user2'@'remote.example.com';
</pre><p>
            If <code class="literal">user2</code> must be able to connect from several
            hosts in the <code class="literal">example.com</code> domain, there should
            be a separate account for each host.
        </p><p style="color:blue;">如果user2必须能够连接example.com域中的多个主机，则每个主机都应该有一个单独的帐户。</p><p>
            To extract the user name or host name part from a
            <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> or
            <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> value, use the
            <a class="link" href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a> function:
        </p><p style="color:blue;">要从当前的_user（）或user（）值中提取用户名或主机名部分，请使用substring_index（）函数：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING_INDEX(CURRENT_USER(),'@',1);</code></strong>
+---------------------------------------+
| SUBSTRING_INDEX(CURRENT_USER(),'@',1) |
+---------------------------------------+
| user1                                 |
+---------------------------------------+

mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING_INDEX(CURRENT_USER(),'@',-1);</code></strong>
+----------------------------------------+
| SUBSTRING_INDEX(CURRENT_USER(),'@',-1) |
+----------------------------------------+
| localhost                              |
+----------------------------------------+
</pre>
        </div>

    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="encrypted-connections"></a>6.3&nbsp;Using Encrypted Connections</h2>

                </div>

            </div>

        </div>
        <div class="toc">
            <dl class="toc"><dt><span class="section"><a href="security.html#using-encrypted-connections">6.3.1 Configuring MySQL to Use Encrypted Connections</a></span></dt><dt><span class="section"><a href="security.html#encrypted-connection-protocols-ciphers">6.3.2 Encrypted Connection TLS Protocols and Ciphers</a></span></dt><dt><span class="section"><a href="security.html#creating-ssl-rsa-files">6.3.3 Creating SSL and RSA Certificates and Keys</a></span></dt><dt><span class="section"><a href="security.html#ssl-libraries">6.3.4 SSL Library-Dependent Capabilities</a></span></dt><dt><span class="section"><a href="security.html#windows-and-ssh">6.3.5 Connecting to MySQL Remotely from Windows with SSH</a></span></dt></dl>
        </div>
        <a class="indexterm" name="idm140286887250464"></a><a class="indexterm" name="idm140286887249424"></a><a class="indexterm" name="idm140286887248352"></a><a class="indexterm" name="idm140286887247312"></a><a class="indexterm" name="idm140286887246272"></a><a class="indexterm" name="idm140286887245200"></a><a class="indexterm" name="idm140286887244128"></a><p>
        With an unencrypted connection between the MySQL client and the
        server, someone with access to the network could watch all your
        traffic and inspect the data being sent or received between client
        and server.
    </p><p style="color:blue;">通过mysql客户机和服务器之间的未加密连接，可以访问网络的人可以监视您的所有流量，并检查客户机和服务器之间发送或接收的数据。</p><a class="indexterm" name="idm140286887242048"></a><p>
        When you must move information over a network in a secure fashion,
        an unencrypted connection is unacceptable. To make any kind of data
        unreadable, use encryption. Encryption algorithms must include
        security elements to resist many kinds of known attacks such as
        changing the order of encrypted messages or replaying data twice.
    </p><p style="color:blue;">当您必须以安全的方式在网络上移动信息时，不能接受未加密的连接。要使任何类型的数据不可读，请使用加密。加密算法必须包含安全元素，以抵抗多种已知攻击，如更改加密消息的顺序或两次重放数据。</p><p>
        MySQL supports encrypted connections between clients and the server
        using the TLS (Transport Layer Security) protocol. TLS is sometimes
        referred to as SSL (Secure Sockets Layer) but MySQL does not
        actually use the SSL protocol for encrypted connections because its
        encryption is weak (see
        <a class="xref" href="security.html#encrypted-connection-protocols-ciphers" title="6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers">Section&nbsp;6.3.2, “Encrypted Connection TLS Protocols and Ciphers”</a>).
    </p><p style="color:blue;">mysql支持使用tls（传输层安全）协议在客户端和服务器之间进行加密连接。tls有时被称为ssl（安全套接字层），但mysql实际上并不使用ssl协议进行加密连接，因为它的加密很弱（参见第6.3.2节“加密连接tls协议和密码”）。</p><p>
        TLS uses encryption algorithms to ensure that data received over a
        public network can be trusted. It has mechanisms to detect data
        change, loss, or replay. TLS also incorporates algorithms that
        provide identity verification using the X.509 standard.
    </p><p style="color:blue;">tls使用加密算法来确保通过公共网络接收的数据是可信的。它具有检测数据更改、丢失或重播的机制。TLS还结合了使用X.509标准提供身份验证的算法。</p><a class="indexterm" name="idm140286887238080"></a><p>
        X.509 makes it possible to identify someone on the Internet. In
        basic terms, there should be some entity called a <span class="quote">“<span class="quote">Certificate
    Authority</span>”</span> (or CA) that assigns electronic certificates to
        anyone who needs them. Certificates rely on asymmetric encryption
        algorithms that have two encryption keys (a public key and a secret
        key). A certificate owner can present the certificate to another
        party as proof of identity. A certificate consists of its owner's
        public key. Any data encrypted using this public key can be
        decrypted only using the corresponding secret key, which is held by
        the owner of the certificate.
    </p><p style="color:blue;">X.509使得在互联网上识别某人成为可能。基本上，应该有一个称为“证书颁发机构”（或ca）的实体将电子证书分配给任何需要它们的人。证书依赖于具有两个加密密钥（公钥和密钥）的非对称加密算法。证书所有者可以将证书作为身份证明提供给另一方。证书由其所有者的公钥组成。使用此公钥加密的任何数据只能使用证书所有者持有的相应密钥解密。</p><p>
        MySQL can be compiled for encrypted-connection support using OpenSSL
        or yaSSL. For a comparison of the two packages, see
        <a class="xref" href="security.html#ssl-libraries" title="6.3.4&nbsp;SSL Library-Dependent Capabilities">Section&nbsp;6.3.4, “SSL Library-Dependent Capabilities”</a> For information about the encryption
        protocols and ciphers each package supports, see
        <a class="xref" href="security.html#encrypted-connection-protocols-ciphers" title="6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers">Section&nbsp;6.3.2, “Encrypted Connection TLS Protocols and Ciphers”</a>.
    </p><p style="color:blue;">可以使用openssl或yassl编译mysql以获得加密连接支持。有关两个包的比较，请参阅第6.3.4节“依赖于SSL库的功能”了解每个包支持的加密协议和密码的信息，请参阅第6.3.2节“加密连接TLS协议和密码”。</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

            <div class="admon-title">
                Note
            </div>
            <p>
                It is possible to compile MySQL using yaSSL as an alternative to
                OpenSSL only prior to MySQL 5.7.28. As of MySQL 5.7.28, support
                for yaSSL is removed and all MySQL builds use OpenSSL.
            </p><p style="color:blue;">只有在mysql 5.7.28之前，才有可能使用yassl作为openssl的替代品编译mysql。从mysql 5.7.28开始，对yassl的支持被删除，所有mysql构建都使用openssl。</p>
        </div>
        <p>
            By default, MySQL programs attempt to connect using encryption if
            the server supports encrypted connections, falling back to an
            unencrypted connection if an encrypted connection cannot be
            established. For information about options that affect use of
            encrypted connections, see
            <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a> and
            <a class="xref" href="programs.html#encrypted-connection-options" title="Command Options for Encrypted Connections">Command Options for Encrypted Connections</a>.
        </p><p style="color:blue;">默认情况下，如果服务器支持加密连接，mysql程序将尝试使用加密进行连接；如果无法建立加密连接，则返回到未加密连接。有关影响加密连接使用的选项的信息，请参阅6.3.1节，“将MySQL配置为使用加密连接”和用于加密连接的命令选项。</p><p>
        MySQL performs encryption on a per-connection basis, and use of
        encryption for a given user can be optional or mandatory. This
        enables you to choose an encrypted or unencrypted connection
        according to the requirements of individual applications. For
        information on how to require users to use encrypted connections,
        see the discussion of the <code class="literal">REQUIRE</code> clause of the
        <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement in
        <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>. See also the description of the
        <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a> system
        variable at <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>
    </p><p style="color:blue;">mysql根据每个连接执行加密，对给定用户使用加密可以是可选的，也可以是必需的。这使您能够根据单个应用程序的要求选择加密或未加密的连接。有关如何要求用户使用加密连接的信息，请参阅13.7.1.2节“创建用户语法”中对CREATE USER语句的REQUIRE子句的讨论。另请参阅第5.1.7节“服务器系统变量”中的REQUIRE戆U SECURE戆U TRANSport系统变量的说明。</p><p>
        Encrypted connections can be used between master and slave
        replication servers. See
        <a class="xref" href="replication.html#replication-solutions-encrypted-connections" title="16.3.8&nbsp;Setting Up Replication to Use Encrypted Connections">Section&nbsp;16.3.8, “Setting Up Replication to Use Encrypted Connections”</a>.
    </p><p style="color:blue;">主复制服务器和从复制服务器之间可以使用加密连接。参见第16.3.8节“设置复制以使用加密连接”。</p><p>
        For information about using encrypted connections from the MySQL C
        API, see <a class="xref" href="connectors-apis.html#c-api-encrypted-connections" title="27.8.15&nbsp;C API Encrypted Connection Support">Section&nbsp;27.8.15, “C API Encrypted Connection Support”</a>.
    </p><p style="color:blue;">有关使用mysql c api加密连接的信息，请参阅27.8.15节“c api加密连接支持”。</p><p>
        It is also possible to connect using encryption from within an SSH
        connection to the MySQL server host. For an example, see
        <a class="xref" href="security.html#windows-and-ssh" title="6.3.5&nbsp;Connecting to MySQL Remotely from Windows with SSH">Section&nbsp;6.3.5, “Connecting to MySQL Remotely from Windows with SSH”</a>.
    </p><p style="color:blue;">也可以使用ssh连接内的加密连接到mysql服务器主机。例如，请参见第6.3.5节“使用ssh从windows远程连接mysql”。</p><p>
        Several improvements were made to encrypted-connection support in
        MySQL 5.7. The following timeline summarizes the changes:
    </p><p style="color:blue;">mysql 5.7对加密连接的支持做了一些改进。以下时间线总结了这些更改：</p>
        <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                5.7.3: On the client side, an explicit
                <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> option is no longer
                advisory but prescriptive. Given a server enabled to support
                encrypted connections, a client program can require an encrypted
                connection by specifying only the
                <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> option. (Previously, it
                was necessary for the client to specify either the
                <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> option, or all three of
                the <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>,
                <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>, and
                <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options.) The
                connection attempt fails if an encrypted connection cannot be
                established. Other
                <code class="option">--ssl-<em class="replaceable"><code>xxx</code></em></code> options on
                the client side are advisory in the absence of
                <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a>: The client attempts to
                connect using encryption but falls back to an unencrypted
                connection if an encrypted connection cannot be established.
            </p><p style="color:blue;">5.7.3：在客户端，显式--ssl选项不再是建议性的，而是规定性的。如果服务器支持加密连接，则客户端程序可以只指定--ssl选项来要求加密连接。（以前，客户端必须指定--ssl-ca选项，或者指定--ssl-ca、--ssl-key和--ssl-cert选项中的所有三个选项。）如果无法建立加密连接，则连接尝试失败。客户机端的其他--ssl xxx选项在没有--ssl时是建议性的：客户机尝试使用加密进行连接，但如果无法建立加密连接，则返回到未加密连接。</p></li><li class="listitem"><p>
                5.7.5: The server-side <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a>
                option value is enabled by default.
            </p><p style="color:blue;">5.7.5:默认情况下，服务器端--SSL选项值处于启用状态。</p><p>
                For servers compiled using OpenSSL, the
                <a class="link" href="server-administration.html#sysvar_auto_generate_certs"><code class="literal">auto_generate_certs</code></a> and
                <a class="link" href="server-administration.html#sysvar_sha256_password_auto_generate_rsa_keys"><code class="literal">sha256_password_auto_generate_rsa_keys</code></a>
                system variables are available to enable autogeneration and
                autodiscovery of SSL/RSA certificate and key files at startup.
                For certificate and key autodiscovery, if
                <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> is enabled and other
                <code class="option">--ssl-<em class="replaceable"><code>xxx</code></em></code> options
                are <span class="emphasis"><em>not</em></span> given to configure encrypted
                connections explicitly, the server attempts to enable support
                for encrypted connections automatically at startup if it
                discovers the requisite certificate and key files in the data
                directory.
            </p><p style="color:blue;">对于使用openssl编译的服务器，auto_generate_certs和sha256_password_auto_generate_rsa_keys系统变量可用于在启动时自动生成和自动发现ssl/rsa证书和密钥文件。对于证书和密钥自动发现，如果启用了--ssl，并且没有为显式配置加密连接提供其他--ssl xxx选项，则服务器将尝试在启动时启用对加密连接的支持，前提是它在数据目录中发现所需的证书和密钥文件。</p></li><li class="listitem"><p>
                5.7.6: The <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> utility is
                available to make it easier to manually generate SSL/RSA
                certificate and key files. Autodiscovery of SSL/RSA files at
                startup is expanded to apply to all servers, whether compiled
                using OpenSSL or yaSSL. (This means that
                <a class="link" href="server-administration.html#sysvar_auto_generate_certs"><code class="literal">auto_generate_certs</code></a> need not be
                enabled for autodiscovery to occur.)
            </p><p style="color:blue;">5.7.6:mysql_ssl_rsa_安装实用程序可用于更轻松地手动生成ssl/rsa证书和密钥文件。启动时ssl/rsa文件的自动发现扩展到适用于所有服务器，无论是使用openssl还是yassl编译的。（这意味着无需启用自动生成证书即可进行自动发现。）</p><p>
                If the server discovers at startup that the CA certificate is
                self-signed, it writes a warning to the error log. (The
                certificate is self-signed if created automatically by the
                server, or manually using
                <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a>.)
            </p><p style="color:blue;">如果服务器在启动时发现CA证书是自签名的，则会将警告写入错误日志。（如果由服务器自动创建，或使用mysql_ssl_rsa_安装程序手动创建，则证书是自签名的。）</p></li><li class="listitem"><p>
                5.7.7: The C client library attempts to establish an encrypted
                connection by default if the server supports encrypted
                connections. This affects client programs as follows:
            </p><p style="color:blue;">5.7.7:如果服务器支持加密连接，则默认情况下C客户端库尝试建立加密连接。这会对客户端程序产生以下影响：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                        In the absence of an <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a>
                        option, clients attempt to connect using encryption, falling
                        back to an unencrypted connection if an encrypted connection
                        cannot be established.
                    </p><p style="color:blue;">在缺少--ssl选项的情况下，客户端尝试使用加密进行连接，如果无法建立加密连接，则返回到未加密连接。</p></li><li class="listitem"><p>
                        The presence of an explicit
                        <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> option or a synonym
                        (<a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl=1</code></a>,
                        <a class="link" href="programs.html#option_general_ssl"><code class="option">--enable-ssl</code></a>)
                        is prescriptive: Clients require an encrypted connection and
                        fail if one cannot be established.
                    </p><p style="color:blue;">显式--ssl选项或同义词（--ssl=1，-enable ssl）的存在是规定性的：客户端需要加密的连接，如果无法建立连接，则会失败。</p></li><li class="listitem"><p>
                        With an <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl=0</code></a> option or a
                        synonym
                        (<a class="link" href="programs.html#option_general_ssl"><code class="option">--skip-ssl</code></a>,
                        <a class="link" href="programs.html#option_general_ssl"><code class="option">--disable-ssl</code></a>),
                        clients use an unencrypted connection.
                    </p><p style="color:blue;">使用--ssl=0选项或同义词（--skip ssl，--disable ssl），客户端使用未加密的连接。</p></li></ul>
                </div>
                <p>
                    This change also affects subsequent releases of MySQL Connectors
                    that are based on the C client library: Connector/C,
                    Connector/C++, and Connector/ODBC.
                </p><p style="color:blue;">这种变化也影响了基于C客户端库的MySQL连接器的后续版本：连接器/C、连接器/C++和连接器/ODBC。</p></li><li class="listitem"><p>
                5.7.8: The
                <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a> system
                variable is available to control whether client connections to
                the server must use some form of secure transport.
            </p><p style="color:blue;">5.7.8:REQUIRE_secure_transport系统变量可用于控制客户端到服务器的连接是否必须使用某种形式的安全传输。</p></li><li class="listitem"><p>
                5.7.10: TLS protocol support is extended from TLSv1 to also
                include TLSv1.1 and TLSv1.2. The
                <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> system variable on
                the server side and
                <a class="link" href="programs.html#option_general_tls-version"><code class="option">--tls-version</code></a> option on the
                client side enable the level of support to be selected. See
                <a class="xref" href="security.html#encrypted-connection-protocols-ciphers" title="6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers">Section&nbsp;6.3.2, “Encrypted Connection TLS Protocols and Ciphers”</a>.
            </p><p style="color:blue;">5.7.10:TLS协议支持从TLSV1扩展到TLSV1.1和TLSV1.2。服务器端的tls_version系统变量和客户端的--tls version选项允许选择支持级别。见第6.3.2节“加密连接TLS协议和密码”。</p></li><li class="listitem"><p>
                5.7.11: MySQL client programs support an
                <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a> option that enables
                you to specify the security state of the connection to the
                server. The <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a> option
                comprises the capabilities of the client-side
                <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> and
                <a class="link" href="programs.html#option_general_ssl-verify-server-cert"><code class="option">--ssl-verify-server-cert</code></a>
                options. Consequently, <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> and
                <a class="link" href="programs.html#option_general_ssl-verify-server-cert"><code class="option">--ssl-verify-server-cert</code></a> are
                deprecated, and are removed in MySQL 8.0.
            </p><p style="color:blue;">5.7.11:MySQL客户端程序支持一个--ssl模式选项，该选项允许您指定到服务器的连接的安全状态。--ssl mode选项包含客户端--ssl和--ssl verify server cert选项的功能。因此，-ssl和--ssl verify server cert被弃用，并在mysql 8.0中被删除。</p></li><li class="listitem"><p>
                5.7.28: Support for yaSSL was removed. All MySQL builds use
                OpenSSL.
            </p><p style="color:blue;">5.7.28：取消对Yassl的支持。所有mysql构建都使用openssl。</p></li></ul>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="using-encrypted-connections"></a>6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286887170960"></a><a class="indexterm" name="idm140286887169920"></a><a class="indexterm" name="idm140286887168448"></a><p>
            Several options are available to indicate whether to use encrypted
            connections, and to specify the appropriate certificate and key
            files. This section provides general guidance about configuring
            the server and clients for encrypted connections:
        </p><p style="color:blue;">有几个选项可用于指示是否使用加密连接，以及指定适当的证书和密钥文件。本节提供有关为加密连接配置服务器和客户端的一般指导：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#using-encrypted-connections-server-side-startup-configuration" title="Server-Side Startup Configuration for Encrypted Connections">Server-Side Startup Configuration for Encrypted Connections</a></p><p style="color:blue;">加密连接的服务器端启动配置</p></li><li class="listitem"><p><a class="xref" href="security.html#using-encrypted-connections-client-side-configuration" title="Client-Side Configuration for Encrypted Connections">Client-Side Configuration for Encrypted Connections</a></p><p style="color:blue;">加密连接的客户端配置</p></li><li class="listitem"><p><a class="xref" href="security.html#mandatory-encrypted-connections" title="Configuring Encrypted Connections as Mandatory">Configuring Encrypted Connections as Mandatory</a></p><p style="color:blue;">将加密连接配置为必需的</p></li></ul>
            </div>
            <p>
                For a complete list of options related to establishment of
                encrypted connections, see
                <a class="xref" href="programs.html#encrypted-connection-options" title="Command Options for Encrypted Connections">Command Options for Encrypted Connections</a>. Instructions for
                creating any required certificate and key files are available in
                <a class="xref" href="security.html#creating-ssl-rsa-files" title="6.3.3&nbsp;Creating SSL and RSA Certificates and Keys">Section&nbsp;6.3.3, “Creating SSL and RSA Certificates and Keys”</a>.
            </p><p style="color:blue;">有关建立加密连接的完整选项列表，请参见加密连接的命令选项。有关创建所需证书和密钥文件的说明，请参阅第6.3.3节“创建SSL和RSA证书和密钥”。</p><p>
            Encrypted connections also can be used in these contexts:
        </p><p style="color:blue;">加密连接也可以在以下上下文中使用：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Between master and slave replication servers. See
                    <a class="xref" href="replication.html#replication-solutions-encrypted-connections" title="16.3.8&nbsp;Setting Up Replication to Use Encrypted Connections">Section&nbsp;16.3.8, “Setting Up Replication to Use Encrypted Connections”</a>.
                </p><p style="color:blue;">在主复制服务器和从复制服务器之间。参见第16.3.8节“设置复制以使用加密连接”。</p></li><li class="listitem"><p>
                    Among Group Replication servers. See
                    <a class="xref" href="group-replication.html#group-replication-secure-socket-layer-support-ssl" title="17.5.2&nbsp;Group Replication Secure Socket Layer (SSL) Support">Section&nbsp;17.5.2, “Group Replication Secure Socket Layer (SSL) Support”</a>.
                </p><p style="color:blue;">在组复制服务器之间。参见第17.5.2节“组复制安全套接字层（SSL）支持”。</p></li><li class="listitem"><p>
                    By client programs that are based on the MySQL C API. See
                    <a class="xref" href="connectors-apis.html#c-api-encrypted-connections" title="27.8.15&nbsp;C API Encrypted Connection Support">Section&nbsp;27.8.15, “C API Encrypted Connection Support”</a>.
                </p><p style="color:blue;">基于mysql c api的客户端程序。见第27.8.15节“C API加密连接支持”。</p></li></ul>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="using-encrypted-connections-server-side-startup-configuration"></a>Server-Side Startup Configuration for Encrypted Connections</h4>

                        </div>

                    </div>

                </div>
                <p>
                    On the server side, the <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a>
                    option specifies that the server permits but does not require
                    encrypted connections. This option is enabled by default, so it
                    need not be specified explicitly.
                </p><p style="color:blue;">在服务器端，-ssl选项指定服务器允许但不需要加密连接。此选项在默认情况下已启用，因此无需显式指定。</p><p>
                To require that clients connect using encrypted connections,
                enable the
                <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a> system
                variable. See <a class="xref" href="security.html#mandatory-encrypted-connections" title="Configuring Encrypted Connections as Mandatory">Configuring Encrypted Connections as Mandatory</a>.
            </p><p style="color:blue;">要要求客户端使用加密连接进行连接，请启用REQUIRE\U SECURE\U TRANSport系统变量。请参阅将加密连接配置为必需的。</p><p>
                These options on the server side specify the certificate and key
                files the server uses when permitting clients to establish
                encrypted connections:
            </p><p style="color:blue;">服务器端的这些选项指定了允许客户端建立加密连接时服务器使用的证书和密钥文件：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>: The path name of
                        the Certificate Authority (CA) certificate file.
                        (<code class="option">--ssl-capath</code> is similar but specifies the
                        path name of a directory of CA certificate files.)
                    </p><p style="color:blue;">--ssl ca：证书颁发机构（ca）证书文件的路径名。（-ssl ca path类似，但指定ca证书文件目录的路径名。）</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a>: The path name of
                        the server public key certificate file. This certificate can
                        be sent to the client and authenticated against the CA
                        certificate that it has.
                    </p><p style="color:blue;">--ssl cert：服务器公钥证书文件的路径名。此证书可以发送到客户端，并根据其拥有的CA证书进行身份验证。</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>: The path name of
                        the server private key file.
                    </p><p style="color:blue;">--ssl key：服务器私钥文件的路径名。</p></li></ul>
                </div>
                <p>
                    For example, to enable the server for encrypted connections,
                    start it with these lines in the <code class="filename">my.cnf</code>
                    file, changing the file names as necessary:
                </p><p style="color:blue;">例如，要使服务器能够进行加密连接，请从my.cnf文件中的以下行开始，根据需要更改文件名：</p><pre data-lang="ini" class="programlisting">[mysqld]
ssl-ca=ca.pem
ssl-cert=server-cert.pem
ssl-key=server-key.pem
</pre><p>
                To specify in addition that clients are required to use
                encrypted connections, enable the
                <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a> system
                variable:
            </p><p style="color:blue;">要指定客户机还需要使用加密连接，请启用REQUIRE\U SECURE\U TRANSport系统变量：</p><pre data-lang="ini" class="programlisting">[mysqld]
ssl-ca=ca.pem
ssl-cert=server-cert.pem
ssl-key=server-key.pem
require_secure_transport=ON
</pre><p>
                Each certificate and key option names a file in PEM format.
                Should you need to create the required certificate and key
                files, see <a class="xref" href="security.html#creating-ssl-rsa-files" title="6.3.3&nbsp;Creating SSL and RSA Certificates and Keys">Section&nbsp;6.3.3, “Creating SSL and RSA Certificates and Keys”</a>. MySQL
                servers compiled using OpenSSL can generate missing certificate
                and key files automatically at startup. See
                <a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql" title="6.3.3.1&nbsp;Creating SSL and RSA Certificates and Keys using MySQL">Section&nbsp;6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>.
                Alternatively, if you have a MySQL source distribution, you can
                test your setup using the demonstration certificate and key
                files in its <code class="filename">mysql-test/std_data</code> directory.
            </p><p style="color:blue;">每个证书和密钥选项以PEM格式命名一个文件。如果需要创建所需的证书和密钥文件，请参见第6.3.3节“创建SSL和RSA证书和密钥”。使用openssl编译的mysql服务器可以在启动时自动生成丢失的证书和密钥文件。参见第6.3.3.1节“使用mysql创建ssl和rsa证书和密钥”。或者，如果您有一个mysql源发行版，您可以使用mysql test/std_data目录中的演示证书和密钥文件来测试您的安装程序。</p><p>
                The server performs certificate and key file autodiscovery. If
                <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> is enabled (possibly along
                with <a class="link" href="programs.html#option_general_ssl-cipher"><code class="option">--ssl-cipher</code></a>) and other
                <code class="option">--ssl-<em class="replaceable"><code>xxx</code></em></code> options
                are <span class="emphasis"><em>not</em></span> given to configure encrypted
                connections explicitly, the server attempts to enable encrypted
                connection support automatically at startup:
            </p><p style="color:blue;">服务器执行证书和密钥文件自动发现。如果启用了--ssl（可能与--ssl-cipher一起使用），并且没有提供其他--ssl-xxx选项来显式配置加密连接，则服务器将尝试在启动时自动启用加密连接支持：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If the server discovers valid certificate and key files
                        named <code class="filename">ca.pem</code>,
                        <code class="filename">server-cert.pem</code>, and
                        <code class="filename">server-key.pem</code> in the data directory,
                        it enables support for encrypted connections by clients.
                        (The files need not have been generated automatically; what
                        matters is that they have those names and are valid.)
                    </p><p style="color:blue;">如果服务器在数据目录中发现名为ca.pem、server-cert.pem和server-key.pem的有效证书和密钥文件，它将启用对客户端加密连接的支持。（这些文件不需要自动生成；重要的是它们有这些名称并且是有效的。）</p></li><li class="listitem"><p>
                        If the server does not find valid certificate and key files
                        in the data directory, it continues executing but without
                        support for encrypted connections.
                    </p><p style="color:blue;">如果服务器在数据目录中找不到有效的证书和密钥文件，它将继续执行，但不支持加密连接。</p></li></ul>
                </div>
                <p>
                    If the server automatically enables encrypted connection
                    support, it writes a note to the error log. If the server
                    discovers that the CA certificate is self-signed, it writes a
                    warning to the error log. (The certificate is self-signed if
                    created automatically by the server or manually using
                    <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a>.)
                </p><p style="color:blue;">如果服务器自动启用加密连接支持，则会向错误日志中写入一条注释。如果服务器发现ca证书是自签名的，它会将警告写入错误日志。（如果由服务器自动创建或使用mysql_ssl_rsa_安装程序手动创建，则证书是自签名的。）</p><p>
                MySQL also provides these options for server-side SSL control:
            </p><p style="color:blue;">mysql还为服务器端ssl控制提供了以下选项：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-cipher"><code class="option">--ssl-cipher</code></a>: The list of
                        permissible ciphers for connection encryption.
                    </p><p style="color:blue;">--ssl密码：连接加密允许的密码列表。</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-crl"><code class="option">--ssl-crl</code></a>: The path name of
                        the file containing certificate revocation lists.
                        (<code class="option">--ssl-crlpath</code> is similar but specifies the
                        path name of a directory of certificate revocation-list
                        files.)
                    </p><p style="color:blue;">--ssl crl：包含证书吊销列表的文件的路径名。（-ssl crlpath类似，但指定证书吊销列表文件目录的路径名。）</p></li></ul>
                </div>
                <p>
                    The values of the
                    <code class="option">--ssl-<em class="replaceable"><code>xxx</code></em></code> options
                    set the values of the corresponding system variables
                    (<a class="link" href="server-administration.html#sysvar_ssl_ca"><code class="literal">ssl_ca</code></a>,
                    <a class="link" href="server-administration.html#sysvar_ssl_cert"><code class="literal">ssl_cert</code></a>,
                    <a class="link" href="server-administration.html#sysvar_ssl_key"><code class="literal">ssl_key</code></a>, and so forth).
                </p><p style="color:blue;">--ssl xxx选项的值设置相应系统变量（ssl-ca、ssl-cert、ssl-key等）的值。</p><p>
                To explicitly specify which encryption protocols the server
                permits, use the <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a>
                system variable; see
                <a class="xref" href="security.html#encrypted-connection-protocols-ciphers" title="6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers">Section&nbsp;6.3.2, “Encrypted Connection TLS Protocols and Ciphers”</a>. For
                example, you can set this variable to prevent clients from using
                less-secure protocols.
            </p><p style="color:blue;">要显式指定服务器允许的加密协议，请使用TLS_version系统变量；请参见第6.3.2节“加密连接TLS协议和密码”。例如，可以设置此变量以防止客户端使用不太安全的协议。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="using-encrypted-connections-client-side-configuration"></a>Client-Side Configuration for Encrypted Connections</h4>

                        </div>

                    </div>

                </div>
                <p>
                    By default, MySQL client programs attempt to establish an
                    encrypted connection if the server supports encrypted
                    connections, with further control available through the
                    <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a> option:
                </p><p style="color:blue;">默认情况下，如果服务器支持加密连接，MySQL客户端程序将尝试建立加密连接，并通过--ssl mode选项提供进一步的控制：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        In the absence of an
                        <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a> option, clients
                        attempt to connect using encryption, falling back to an
                        unencrypted connection if an encrypted connection cannot be
                        established. This is also the behavior with an explicit
                        <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=PREFFERED</code></a> option.
                    </p><p style="color:blue;">在缺少--ssl模式选项的情况下，客户端尝试使用加密进行连接，如果无法建立加密连接，则返回到未加密连接。这也是显式--ssl mode=prefered选项的行为。</p></li><li class="listitem"><p>
                        With <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=REQUIRED</code></a>,
                        clients require an encrypted connection and fail if one
                        cannot be established.
                    </p><p style="color:blue;">如果--ssl mode=required，则客户端需要加密连接，如果无法建立，则会失败。</p></li><li class="listitem"><p>
                        With <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=DISABLED</code></a>,
                        clients use an unencrypted connection.
                    </p><p style="color:blue;">禁用--ssl mode=时，客户端使用未加密连接。</p></li><li class="listitem"><p>
                        With <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=VERIFY_CA</code></a> or
                        <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=VERIFY_IDENTITY</code></a>,
                        clients require an encrypted connection, and also perform
                        verification against the server CA certificate and (with
                        <code class="literal">VERIFY_IDENTITY</code>) against the server host
                        name in its certificate.
                    </p><p style="color:blue;">使用--ssl mode=verify_ca或--ssl mode=verify_identity，客户端需要加密连接，还需要对服务器ca证书和（使用verify_identity）证书中的服务器主机名执行验证。</p></li></ul>
                </div>
                <p>
                    Attempts to establish an unencrypted connection fail if the
                    <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a> system
                    variable is enabled on the server side to cause the server to
                    require encrypted connections. See
                    <a class="xref" href="security.html#mandatory-encrypted-connections" title="Configuring Encrypted Connections as Mandatory">Configuring Encrypted Connections as Mandatory</a>.
                </p><p style="color:blue;">如果在服务器端启用了require_secure_transport系统变量以导致服务器需要加密连接，则尝试建立未加密连接失败。请参阅将加密连接配置为必需的。</p><p>
                The following options on the client side identify the
                certificate and key files clients use when establishing
                encrypted connections to the server. They are similar to the
                options used on the server side, but
                <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> and
                <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> identify the client
                public and private key:
            </p><p style="color:blue;">客户端的以下选项标识客户端在建立到服务器的加密连接时使用的证书和密钥文件。它们类似于服务器端使用的选项，但是--ssl cert和--ssl key标识客户端公钥和私钥：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>: The path name of
                        the Certificate Authority (CA) certificate file. This
                        option, if used, must specify the same certificate used by
                        the server. (<code class="option">--ssl-capath</code> is similar but
                        specifies the path name of a directory of CA certificate
                        files.)
                    </p><p style="color:blue;">--ssl ca：证书颁发机构（ca）证书文件的路径名。如果使用此选项，则必须指定服务器使用的相同证书。（-ssl ca path类似，但指定ca证书文件目录的路径名。）</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a>: The path name of
                        the client public key certificate file.
                    </p><p style="color:blue;">--ssl cert：客户端公钥证书文件的路径名。</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>: The path name of
                        the client private key file.
                    </p><p style="color:blue;">--ssl key：客户端私钥文件的路径名。</p></li></ul>
                </div>
                <p>
                    For additional security relative to that provided by the default
                    encryption, clients can supply a CA certificate matching the one
                    used by the server and enable host name identity verification.
                    In this way, the server and client place their trust in the same
                    CA certificate and the client verifies that the host to which it
                    connected is the one intended:
                </p><p style="color:blue;">为了获得与默认加密相关的附加安全性，客户端可以提供与服务器使用的ca证书匹配的ca证书，并启用主机名身份验证。这样，服务器和客户端将信任放在同一个ca证书中，客户端验证它连接到的主机是否是预期的主机：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        To specify the CA certificate, use
                        <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> (or
                        <a class="link" href="programs.html#option_general_ssl-capath"><code class="option">--ssl-capath</code></a>), and specify
                        <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=VERIFY_CA</code></a>.
                    </p><p style="color:blue;">要指定CA证书，请使用--ssl ca（或--ssl capath），并指定--ssl mode=verify\u ca。</p></li><li class="listitem"><p>
                        To enable host name identity verification as well, use
                        <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=VERIFY_IDENTITY</code></a>
                        rather than
                        <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=VERIFY_CA</code></a>.
                    </p><p style="color:blue;">要同时启用主机名身份验证，请使用--ssl mode=verify_identity，而不是--ssl mode=verify_ca。</p></li></ul>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Host name identity verification with
                        <code class="literal">VERIFY_IDENTITY</code> does not work with
                        self-signed certificates that are created automatically by the
                        server or manually using
                        <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> (see
                        <a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql" title="6.3.3.1&nbsp;Creating SSL and RSA Certificates and Keys using MySQL">Section&nbsp;6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>). Such
                        self-signed certificates do not contain the server name as the
                        Common Name value.
                    </p><p style="color:blue;">带有verify_identity的主机名身份验证不适用于由服务器自动创建或使用mysql_ssl_rsa_安装程序手动创建的自签名证书（请参阅第6.3.3.1节“使用mysql创建ssl和rsa证书和密钥”）。此类自签名证书不包含作为公用名值的服务器名。</p><p>
                    Host name identity verification also does not work with
                    certificates that specify the Common Name using wildcards
                    because that name is compared verbatim to the server name.
                </p><p style="color:blue;">主机名身份验证也不能与使用通配符指定公用名的证书一起使用，因为该名称与服务器名进行了逐字比较。</p>
                </div>
                <p>
                    MySQL also provides these options for client-side SSL control:
                </p><p style="color:blue;">mysql还为客户端ssl控制提供了以下选项：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-cipher"><code class="option">--ssl-cipher</code></a>: The list of
                        permissible ciphers for connection encryption.
                    </p><p style="color:blue;">--ssl密码：连接加密允许的密码列表。</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_ssl-crl"><code class="option">--ssl-crl</code></a>: The path name of
                        the file containing certificate revocation lists.
                        (<code class="option">--ssl-crlpath</code> is similar but specifies the
                        path name of a directory of certificate revocation-list
                        files.)
                    </p><p style="color:blue;">--ssl crl：包含证书吊销列表的文件的路径名。（-ssl crlpath类似，但指定证书吊销列表文件目录的路径名。）</p></li><li class="listitem"><p>
                        <a class="link" href="programs.html#option_general_tls-version"><code class="option">--tls-version</code></a>: The permitted
                        encryption protocols; see
                        <a class="xref" href="security.html#encrypted-connection-protocols-ciphers" title="6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers">Section&nbsp;6.3.2, “Encrypted Connection TLS Protocols and Ciphers”</a>.
                    </p><p style="color:blue;">--TLS版本：允许的加密协议；见第6.3.2节“加密连接TLS协议和密码”。</p></li></ul>
                </div>
                <p>
                    Depending on the encryption requirements of the MySQL account
                    used by a client, the client may be required to specify certain
                    options to connect using encryption to the MySQL server.
                </p><p style="color:blue;">根据客户端使用的mysql帐户的加密要求，客户端可能需要指定使用加密连接到mysql服务器的某些选项。</p><p>
                Suppose that you want to connect using an account that has no
                special encryption requirements or that was created using a
                <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement that
                included the <code class="literal">REQUIRE SSL</code> clause. Assuming
                that the server supports encrypted connections, a client can
                connect using encryption with no
                <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a> option or with an
                explicit <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=PREFFERED</code></a>
                option:
            </p><p style="color:blue;">假设您希望使用没有特殊加密要求的帐户进行连接，或者使用包含require ssl子句的create user语句创建的帐户进行连接。假设服务器支持加密连接，则客户端可以使用加密进行连接，而不使用--ssl mode选项或使用显式--ssl mode=prefered选项：</p><pre data-lang="terminal" class="programlisting">mysql
</pre><p>
                Or:
            </p><p style="color:blue;">或：</p><pre data-lang="terminal" class="programlisting">mysql --ssl-mode=PREFERRED
</pre><p>
                For an account created with a <code class="literal">REQUIRE SSL</code>
                clause, the connection attempt fails if an encrypted connection
                cannot be established. For an account with no special encryption
                requirements, the attempt falls back to an unencrypted
                connection if an encrypted connection cannot be established. To
                prevent fallback and fail if an encrypted connection cannot be
                obtained, connect like this:
            </p><p style="color:blue;">对于使用require ssl子句创建的帐户，如果无法建立加密连接，则连接尝试将失败。对于没有特殊加密要求的帐户，如果无法建立加密连接，则尝试返回到未加密连接。若要在无法获得加密连接时防止回退和失败，请按如下方式连接：</p><pre data-lang="terminal" class="programlisting">mysql --ssl-mode=REQUIRED
</pre><p>
                If the account has more stringent security requirements, other
                options must be specified to establish an encrypted connection:
            </p><p style="color:blue;">如果帐户有更严格的安全要求，则必须指定其他选项以建立加密连接：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        For accounts created with a <code class="literal">REQUIRE X509</code>
                        clause, clients must specify at least
                        <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> and
                        <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>. In addition,
                        <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> (or
                        <a class="link" href="programs.html#option_general_ssl-capath"><code class="option">--ssl-capath</code></a>) is recommended
                        so that the public certificate provided by the server can be
                        verified. For example:
                    </p><p style="color:blue;">对于使用REQUIRE X509子句创建的帐户，客户端必须至少指定--ssl cert和--ssl key。此外，建议使用，-ssl ca（或--ssl capath），以便可以验证服务器提供的公共证书。例如：</p><pre data-lang="terminal" class="programlisting">mysql --ssl-ca=ca.pem \
      --ssl-cert=client-cert.pem \
      --ssl-key=client-key.pem
</pre></li><li class="listitem"><p>
                        For accounts created with a <code class="literal">REQUIRE
                        ISSUER</code> or <code class="literal">REQUIRE SUBJECT</code>
                        clause, the encryption requirements are the same as for
                        <code class="literal">REQUIRE X509</code>, but the certificate must
                        match the issue or subject, respectively, specified in the
                        account definition.
                    </p><p style="color:blue;">对于使用Require Issuer或Require Subject子句创建的帐户，加密要求与Require X509相同，但证书必须分别与帐户定义中指定的颁发或主题匹配。</p></li></ul>
                </div>
                <p>
                    For additional information about the <code class="literal">REQUIRE</code>
                    clause, see <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>.
                </p><p style="color:blue;">有关REQUIRE子句的其他信息，请参见第13.7.1.2节“创建用户语法”。</p><p>
                To prevent use of encryption and override other
                <code class="option">--ssl-<em class="replaceable"><code>xxx</code></em></code> options,
                invoke the client program with
                <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode=DISABLED</code></a>:
            </p><p style="color:blue;">要防止使用加密并覆盖其他--ssl xxx选项，请在禁用--ssl mode=的情况下调用客户端程序：</p><pre data-lang="terminal" class="programlisting">mysql --ssl-mode=DISABLED
</pre><p>
                To determine whether the current connection with the server uses
                encryption, check the session value of the
                <a class="link" href="server-administration.html#statvar_Ssl_cipher"><code class="literal">Ssl_cipher</code></a> status variable. If
                the value is empty, the connection is not encrypted. Otherwise,
                the connection is encrypted and the value indicates the
                encryption cipher. For example:
            </p><p style="color:blue;">要确定当前与服务器的连接是否使用加密，请检查ssl_cipher status变量的会话值。如果值为空，则连接未加密。否则，连接将被加密，并且该值指示加密密码。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SESSION STATUS LIKE 'Ssl_cipher';</code></strong>
+---------------+---------------------------+
| Variable_name | Value                     |
+---------------+---------------------------+
| Ssl_cipher    | DHE-RSA-AES128-GCM-SHA256 |
+---------------+---------------------------+
</pre><p>
                For the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client, an alternative is to
                use the <code class="literal">STATUS</code> or <code class="literal">\s</code>
                command and check the <code class="literal">SSL</code> line:
            </p><p style="color:blue;">对于mysql客户机，另一种方法是使用status或s命令并检查ssl行：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>\s</code></strong>
...
SSL: Not in use
...
</pre><p>
                Or:
            </p><p style="color:blue;">或：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>\s</code></strong>
...
SSL: Cipher in use is DHE-RSA-AES128-GCM-SHA256
...
</pre>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="mandatory-encrypted-connections"></a>Configuring Encrypted Connections as Mandatory</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286887028736"></a><p>
                For some MySQL deployments it may be not only desirable but
                mandatory to use encrypted connections (for example, to satisfy
                regulatory requirements). This section discusses configuration
                settings that enable you to do this. These levels of control are
                available:
            </p><p style="color:blue;">对于某些mysql部署，使用加密连接（例如，为了满足管理要求）可能不仅是可取的，而且是强制性的。本节讨论使您能够执行此操作的配置设置。这些控制级别可用：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        You can configure the server to require the clients connect
                        using encrypted connections.
                    </p><p style="color:blue;">您可以将服务器配置为要求客户端使用加密连接进行连接。</p></li><li class="listitem"><p>
                        You can invoke individual client programs to require an
                        encrypted connection, even if the server permits but does
                        not require encryption.
                    </p><p style="color:blue;">即使服务器允许但不需要加密，也可以调用单个客户端程序来要求加密连接。</p></li><li class="listitem"><p>
                        You can configure individual MySQL accounts to be usable
                        only over encrypted connections.
                    </p><p style="color:blue;">您可以将单个mysql帐户配置为仅在加密连接上可用。</p></li></ul>
                </div>
                <p>
                    To require that clients connect using encrypted connections,
                    enable the
                    <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a> system
                    variable. For example, put these lines in the server
                    <code class="filename">my.cnf</code> file:
                </p><p style="color:blue;">要要求客户端使用加密连接进行连接，请启用REQUIRE\U SECURE\U TRANSport系统变量。例如，将这些行放在server my.cnf文件中：</p><pre data-lang="ini" class="programlisting">[mysqld]
require_secure_transport=ON
</pre><p>
                With <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a>
                enabled, client connections to the server are required to use
                some form of secure transport, and the server permits only
                TCP/IP connections that use SSL, or connections that use a
                socket file (on Unix) or shared memory (on Windows). The server
                rejects nonsecure connection attempts, which fail with an
                <a class="link" href="error-handling.html#error_er_secure_transport_required"><code class="literal">ER_SECURE_TRANSPORT_REQUIRED</code></a>
                error.
            </p><p style="color:blue;">启用了require_secure_传输后，客户端到服务器的连接需要使用某种形式的安全传输，服务器只允许使用ssl的tcp/ip连接，或使用套接字文件（在unix上）或共享内存（在windows上）的连接。服务器拒绝非安全连接尝试，该尝试失败时出现“请求安全传输”错误。</p><p>
                To invoke a client program such that it requires an encrypted
                connection whether or not the server requires encryption, use an
                <a class="link" href="programs.html#option_general_ssl-mode"><code class="option">--ssl-mode</code></a> option value of
                <code class="literal">REQUIRED</code>, <code class="literal">VERIFY_CA</code>, or
                <code class="literal">VERIFY_IDENTITY</code>. For example:
            </p><p style="color:blue;">要调用客户端程序以使其需要加密连接（无论服务器是否需要加密），请使用--ssl mode选项值required、verify-ca或verify-identity。例如：</p><pre data-lang="terminal" class="programlisting">mysql --ssl-mode=REQUIRED
mysqldump --ssl-mode=VERIFY_CA
mysqladmin --ssl-mode=VERIFY_IDENTITY
</pre><p>
                To configure a MySQL account to be usable only over encrypted
                connections, include a <code class="literal">REQUIRE</code> clause in the
                <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement that
                creates the account, specifying in that clause the encryption
                characteristics you require. For example, to require an
                encrypted connection and the use of a valid X.509 certificate,
                use <code class="literal">REQUIRE X509</code>:
            </p><p style="color:blue;">要将mysql帐户配置为仅在加密连接上可用，请在创建帐户的create user语句中包含require子句，并在该子句中指定所需的加密特性。例如，要要求加密连接并使用有效的X.509证书，请使用Require X509：</p><pre data-lang="sql" class="programlisting">CREATE USER 'jeffrey'@'localhost' REQUIRE X509;
</pre><p>
                For additional information about the <code class="literal">REQUIRE</code>
                clause, see <a class="xref" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax">Section&nbsp;13.7.1.2, “CREATE USER Syntax”</a>.
            </p><p style="color:blue;">有关REQUIRE子句的其他信息，请参见第13.7.1.2节“创建用户语法”。</p><p>
                To modify existing accounts that have no encryption
                requirements, use the <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>
                statement.
            </p><p style="color:blue;">若要修改没有加密要求的现有帐户，请使用ALTE用户语句。</p>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="encrypted-connection-protocols-ciphers"></a>6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers</h3>

                    </div>

                </div>

            </div>
            <p>
                MySQL supports multiple TLS protocols and ciphers, and enables
                configuring which protocols and ciphers to permit for encrypted
                connections. It is also possible to determine which protocol and
                cipher the current session uses.
            </p><p style="color:blue;">mysql支持多个tls协议和密码，并支持配置哪些协议和密码允许加密连接。还可以确定当前会话使用的协议和密码。</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#encrypted-connection-supported-protocols" title="Supported Connection TLS Protocols">Supported Connection TLS Protocols</a></p><p style="color:blue;">支持的连接TLS协议</p></li><li class="listitem"><p><a class="xref" href="security.html#encrypted-connection-protocol-configuration" title="Connection TLS Protocol Configuration">Connection TLS Protocol Configuration</a></p><p style="color:blue;">连接TLS协议配置</p></li><li class="listitem"><p><a class="xref" href="security.html#encrypted-connection-cipher-configuration" title="Connection Cipher Configuration">Connection Cipher Configuration</a></p><p style="color:blue;">连接密码配置</p></li><li class="listitem"><p><a class="xref" href="security.html#encrypted-connection-protocol-negotiation" title="Connection TLS Protocol Negotiation">Connection TLS Protocol Negotiation</a></p><p style="color:blue;">连接TLS协议协商</p></li><li class="listitem"><p><a class="xref" href="security.html#encrypted-connection-protocol-monitoring" title="Monitoring Current Session TLS Protocol and Cipher">Monitoring Current Session TLS Protocol and Cipher</a></p><p style="color:blue;">监视当前会话tls协议和密码</p></li></ul>
            </div>

            <div class="simplesect">

                <div class="titlepage">
                    <div>

                        <div class="simple">
                            <h4 class="title"><a name="encrypted-connection-supported-protocols"></a>Supported Connection TLS Protocols</h4>

                        </div>

                    </div>

                </div>
                <p>
                    MySQL supports encrypted connections using the TLSv1, TLSv1.1,
                    and TLSv1.2 protocols, listed in order from less secure to more
                    secure. The set of protocols actually permitted for connections
                    is subject to multiple factors:
                </p><p style="color:blue;">mysql支持使用tlsv1、tlsv1.1和tlsv1.2协议的加密连接，这些协议按从不安全到更安全的顺序列出。实际允许连接的协议集受多个因素的影响：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        MySQL configuration. Permitted TLS protocols can be
                        configured on both the server side and client side to
                        include only a subset of the supported TLS protocols. The
                        configuration on both sides must include at least one
                        protocol in common or connection attempts cannot negotiate a
                        protocol to use. For details, see
                        <a class="xref" href="security.html#encrypted-connection-protocol-negotiation" title="Connection TLS Protocol Negotiation">Connection TLS Protocol Negotiation</a>.
                    </p><p style="color:blue;">MySQL配置。允许的tls协议可以在服务器端和客户机端配置为只包含受支持的tls协议的一个子集。双方的配置必须至少包含一个公共协议，否则连接尝试无法协商要使用的协议。有关详细信息，请参阅连接TLS协议协商。</p></li><li class="listitem"><p>
                        System-wide host configuration. The host system may permit
                        only certain TLS protocols, which means that MySQL
                        connections cannot use nonpermitted protocols even if MySQL
                        itself permits them:
                    </p><p style="color:blue;">全系统主机配置。主机系统可能只允许某些TLS协议，这意味着即使MySQL本身允许，MySQL连接也不能使用非许可协议：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Suppose that MySQL configuration permits TLSv1, TLSv1.1,
                                and TLSv1.2, but your host system configuration permits
                                only connections that use TLSv1.2 or higher. In this
                                case, you cannot establish MySQL connections that use
                                TLSv1 or TLSv1.1, even though MySQL is configured to
                                permit them, because the host system does not permit
                                them.
                            </p><p style="color:blue;">假设mysql配置允许tlsv1、tlsv1.1和tlsv1.2，但是主机系统配置只允许使用tlsv1.2或更高版本的连接。在这种情况下，即使mysql被配置为允许使用tlsv1或tlsv1.1，也无法建立使用tlsv1或tlsv1.1的mysql连接，因为主机系统不允许它们。</p></li><li class="listitem"><p>
                                If MySQL configuration permits TLSv1, TLSv1.1, and
                                TLSv1.2, but your host system configuration permits only
                                connections that use TLSv1.3 or higher, you cannot
                                establish MySQL connections at all, because no protocol
                                permitted by MySQL is permitted by the host system.
                            </p><p style="color:blue;">如果mysql配置允许tlsv1、tlsv1.1和tlsv1.2，但主机系统配置只允许使用tlsv1.3或更高版本的连接，则根本无法建立mysql连接，因为主机系统不允许使用mysql允许的任何协议。</p></li></ul>
                        </div>
                        <p>
                            Workarounds for this issue include:
                        </p><p style="color:blue;">此问题的解决方法包括：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Change the system-wide host configuration to permit
                                additional TLS protocols. Consult your operating system
                                documentation for instructions. For example, your system
                                may have an <code class="literal">/etc/ssl/openssl.cnf</code> file
                                that contains these lines to restrict TLS protocols to
                                TLSv1.2 or higher:
                            </p><p style="color:blue;">更改系统范围的主机配置以允许其他TLS协议。有关说明，请参阅操作系统文档。例如，您的系统可能有一个/etc/ssl/openssl.cnf文件，其中包含以下行，用于将TLS协议限制为TLSV1.2或更高版本：</p><pre data-lang="ini" class="programlisting">[system_default_sect]
MinProtocol = TLSv1.2
</pre><p>
                                Changing the value to a lower protocol version or
                                <code class="literal">None</code> makes the system more
                                permissive. However, this workaround has the
                                disadvantage that permitting lower (less secure)
                                protocols may have adverse security consequences.
                            </p><p style="color:blue;">将该值更改为较低的协议版本或“无”会使系统更为允许。然而，这种解决方案的缺点是，允许较低（不太安全）的协议可能会产生不利的安全后果。</p></li><li class="listitem"><p>
                                If you cannot or prefer not to change the host system
                                TLS configuration, change MySQL applications to use
                                higher (more secure) TLS protocols that are permitted by
                                the host system. This may not be possible for older
                                versions of MySQL that support only lower protocol
                                versions. For example, TLSv1 is the only supported
                                protocol prior to MySQL 5.6.46, so attempts to connect
                                to a pre-5.6.46 server fail even if the client is from a
                                newer MySQL version that supports higher protocol
                                versions. In such cases, an upgrade to a version of
                                MySQL that supports additional TLS versions may be
                                required.
                            </p><p style="color:blue;">如果您不能或不希望更改主机系统tls配置，请将mysql应用程序更改为使用主机系统允许的更高（更安全）的tls协议。对于只支持较低协议版本的MySQL旧版本，这可能是不可能的。例如，tlsv1是mysql 5.6.46之前唯一受支持的协议，因此即使客户端来自支持更高协议版本的较新mysql版本，尝试连接到5.6.46之前的服务器也会失败。在这种情况下，可能需要升级到支持其他tls版本的mysql版本。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p>
                        The SSL library. If the SSL library does not support a
                        particular protocol, neither does MySQL, and any parts of
                        the following discussion that specify that protocol do not
                        apply.
                    </p><p style="color:blue;">SSL库。如果ssl库不支持特定的协议，mysql也不支持，下面讨论的指定该协议的任何部分都不适用。</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                When compiled using OpenSSL 1.0.1 or higher, MySQL
                                supports the TLSv1, TLSv1.1, and TLSv1.2 protocols.
                            </p><p style="color:blue;">当使用openssl 1.0.1或更高版本编译时，mysql支持tlsv1、tlsv1.1和tlsv1.2协议。</p></li><li class="listitem"><p>
                                When compiled using yaSSL, MySQL supports the TLSv1 and
                                TLSv1.1 protocols.
                            </p><p style="color:blue;">使用yassl编译时，mysql支持tlsv1和tlsv1.1协议。</p></li></ul>
                        </div>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                It is possible to compile MySQL using yaSSL as an
                                alternative to OpenSSL only prior to MySQL 5.7.28. As of
                                MySQL 5.7.28, support for yaSSL is removed and all MySQL
                                builds use OpenSSL.
                            </p><p style="color:blue;">只有在mysql 5.7.28之前，才有可能使用yassl作为openssl的替代品编译mysql。从mysql 5.7.28开始，对yassl的支持被删除，所有mysql构建都使用openssl。</p>
                        </div>
                    </li></ul>
                </div>

            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="encrypted-connection-protocol-configuration"></a>Connection TLS Protocol Configuration</h4>

                        </div>

                    </div>

                </div>
                <p>
                    On the server side, the value of the
                    <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> system variable
                    determines which TLS protocols a MySQL server permits for
                    encrypted connections. The
                    <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> value applies to
                    connections from clients and from slave servers using regular
                    master/slave replication. The variable value is a list of one or
                    more comma-separated protocol versions from this list (not
                    case-sensitive): TLSv1, TLSv1.1, TLSv1.2. By default, this
                    variable lists all protocols supported by the SSL library used
                    to compile MySQL (<code class="literal">TLSv1,TLSv1.1,TLSv1.2</code> for
                    OpenSSL, <code class="literal">TLSv1,TLSv1.1</code> for yaSSL). To
                    determine the value of
                    <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> at runtime, use
                    this statement:
                </p><p style="color:blue;">在服务器端，tls_version系统变量的值决定mysql服务器允许哪些tls协议用于加密连接。tls_version值适用于使用常规主/从复制从客户端和从服务器进行的连接。变量值是此列表中一个或多个逗号分隔协议版本的列表（不区分大小写）：tlsv1、tlsv1.1、tlsv1.2。默认情况下，此变量列出用于编译mysql的ssl库支持的所有协议（tlsv1、tlsv1.1、tlsv1.2用于openssl、tlsv1、tlsv1.1用于yassl）。要在运行时确定TLS\U版本的值，请使用以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GLOBAL VARIABLES LIKE 'tls_version';</code></strong>
+---------------+-----------------------+
| Variable_name | Value                 |
+---------------+-----------------------+
| tls_version   | TLSv1,TLSv1.1,TLSv1.2 |
+---------------+-----------------------+
</pre><p>
                To change the value of
                <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a>, set it at server
                startup. For example, to permit connections that use the TLSv1.1
                or TLSv1.2 protocol, but prohibit connections that use the
                less-secure TLSv1 protocol, use these lines in the server
                <code class="filename">my.cnf</code> file:
            </p><p style="color:blue;">要更改tls_version的值，请在服务器启动时设置它。例如，要允许使用tlsv1.1或tlsv1.2协议的连接，但禁止使用不太安全的tlsv1协议的连接，请在server my.cnf文件中使用以下行：</p><pre data-lang="ini" class="programlisting">[mysqld]
tls_version=TLSv1.1,TLSv1.2
</pre><p>
                To be even more restrictive and permit only TLSv1.2 connections,
                set <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> like this
                (assuming that your server is compiled using OpenSSL because
                yaSSL does not support TLSv1.2):
            </p><p style="color:blue;">要更严格地限制并且只允许tlsv1.2连接，请设置如下tls_版本（假设您的服务器是使用openssl编译的，因为yassl不支持tlsv1.2）：</p><pre data-lang="ini" class="programlisting">[mysqld]
tls_version=TLSv1.2
</pre><p>
                On the client side, the
                <a class="link" href="programs.html#option_general_tls-version"><code class="option">--tls-version</code></a> option specifies
                which TLS protocols a client program permits for connections to
                the server. The format of the option value is the same as for
                the <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> system variable
                described previously (a list of one or more comma-separated
                protocol versions).
            </p><p style="color:blue;">在客户端，--tls version选项指定客户端程序允许哪些tls协议连接到服务器。选项值的格式与前面描述的tls_version系统变量（一个或多个逗号分隔协议版本的列表）的格式相同。</p><p>
                For master/slave replication, the
                <code class="literal">MASTER_TLS_VERSION</code> option for the
                <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1&nbsp;CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
                specifies which TLS protocols a slave server permits for
                connections to the master. The format of the option value is the
                same as for the <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a>
                system variable described previously. See
                <a class="xref" href="replication.html#replication-solutions-encrypted-connections" title="16.3.8&nbsp;Setting Up Replication to Use Encrypted Connections">Section&nbsp;16.3.8, “Setting Up Replication to Use Encrypted Connections”</a>.
            </p><p style="color:blue;">对于主/从复制，change master to语句的master_tls_version选项指定从服务器允许哪些tls协议连接到主服务器。选项值的格式与前面描述的tls_version系统变量的格式相同。参见第16.3.8节“设置复制以使用加密连接”。</p><p>
                The protocols that can be specified for
                <code class="literal">MASTER_TLS_VERSION</code> depend on the SSL library.
                This option is independent of and not affected by the server
                <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> value. For example,
                a server that acts as a replication slave can be configured with
                <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> set to TLSv1.2 to
                permit only incoming connections that use TLSv1.2, but also
                configured with <code class="literal">MASTER_TLS_VERSION</code> set to
                TLSv1.1 to permit only TLSv1.1 for outgoing slave connections to
                the master.
            </p><p style="color:blue;">可以为master_tls_版本指定的协议取决于ssl库。此选项独立于服务器tls_版本值，不受其影响。例如，可以将充当复制从属服务器的服务器配置为将tls_version设置为tlsv1.2以仅允许使用tlsv1.2的传入连接，也可以将master_tls_version设置为tlsv1.1以仅允许tlsv1.1用于到主服务器的传出从属连接。</p><p>
                TLS protocol configuration affects which protocol a given
                connection uses, as described in
                <a class="xref" href="security.html#encrypted-connection-protocol-negotiation" title="Connection TLS Protocol Negotiation">Connection TLS Protocol Negotiation</a>.
            </p><p style="color:blue;">TLS协议配置会影响给定连接使用的协议，如连接TLS协议协商中所述。</p><p>
                Permitted protocols should be chosen such as not to leave
                <span class="quote">“<span class="quote">holes</span>”</span> in the list. For example, these server
                configuration values do not have holes:
            </p><p style="color:blue;">应选择允许的协议，例如不要在列表中留下“漏洞”。例如，这些服务器配置值没有孔：</p><pre data-lang="terminal" class="programlisting">tls_version=TLSv1,TLSv1.1,TLSv1.2
tls_version=TLSv1.1,TLSv1.2
tls_version=TLSv1.2
</pre><p>
                This value does have a hole and should not be used:
            </p><p style="color:blue;">此值没有孔，不应使用：</p><pre data-lang="terminal" class="programlisting">tls_version=TLSv1,TLSv1.2
</pre><p>
                The prohibition on holes also applies in other configuration
                contexts, such as for clients or replication slaves.
            </p><p style="color:blue;">对漏洞的禁止也适用于其他配置上下文，例如客户端或复制从机。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="encrypted-connection-cipher-configuration"></a>Connection Cipher Configuration</h4>

                        </div>

                    </div>

                </div>
                <p>
                    A default set of ciphers applies to encrypted connections, which
                    can be overridden by explicitly configuring the permitted
                    ciphers. During connection establishment, both sides of a
                    connection must permit some cipher in common or the connection
                    fails. Of the permitted ciphers common to both sides, the SSL
                    library chooses the one supported by the provided certificate
                    that has the highest priority.
                </p><p style="color:blue;">默认的密码集适用于加密连接，可以通过显式配置允许的密码来覆盖加密连接。在建立连接时，连接的两边必须允许一些共同的密码，否则连接将失败。在双方通用的允许密码中，ssl库选择由所提供的具有最高优先级的证书支持的密码。</p><p>
                To specify a cipher or ciphers for encrypted connections, use
                the <a class="link" href="programs.html#option_general_ssl-cipher"><code class="option">--ssl-cipher</code></a> option, which
                is available for the server and for client programs.
            </p><p style="color:blue;">要为加密连接指定一个或多个密码，请使用--ssl cipher选项，该选项可用于服务器和客户端程序。</p><p>
                For master/slave replication, the
                <code class="literal">MASTER_SSL_CIPHER</code> option for the
                <a class="link" href="sql-syntax.html#change-master-to" title="13.4.2.1&nbsp;CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement
                specifies which ciphers a slave server permits for connections
                to the master. See
                <a class="xref" href="replication.html#replication-solutions-encrypted-connections" title="16.3.8&nbsp;Setting Up Replication to Use Encrypted Connections">Section&nbsp;16.3.8, “Setting Up Replication to Use Encrypted Connections”</a>.
            </p><p style="color:blue;">对于主/从复制，change master to语句的master_ssl_cipher选项指定从服务器允许哪些密码连接到主服务器。参见第16.3.8节“设置复制以使用加密连接”。</p><p>
                A given cipher may work only with particular TLS protocols,
                which affects the TLS protocol negotiation process. See
                <a class="xref" href="security.html#encrypted-connection-protocol-negotiation" title="Connection TLS Protocol Negotiation">Connection TLS Protocol Negotiation</a>.
            </p><p style="color:blue;">给定的密码只能用于特定的tls协议，这会影响tls协议的协商过程。请参阅连接TLS协议协商。</p><p>
                To determine which ciphers a given server supports, check the
                session value of the
                <a class="link" href="server-administration.html#statvar_Ssl_cipher_list"><code class="literal">Ssl_cipher_list</code></a> status
                variable:
            </p><p style="color:blue;">要确定给定服务器支持哪些密码，请检查ssl_cipher_list status变量的会话值：</p><pre data-lang="sql" class="programlisting">SHOW SESSION STATUS LIKE 'Ssl_cipher_list';
</pre><p>
                The <a class="link" href="server-administration.html#statvar_Ssl_cipher_list"><code class="literal">Ssl_cipher_list</code></a> status
                variable lists the possible SSL ciphers (empty for non-SSL
                connections). The set of available ciphers depends on your MySQL
                version and whether MySQL was compiled using OpenSSL or yaSSL,
                and (for OpenSSL) the library version used to compile MySQL.
            </p><p style="color:blue;">ssl_cipher_list status变量列出可能的ssl密码（对于非ssl连接为空）。可用的密码集取决于mysql版本以及mysql是使用openssl还是yassl编译的，以及（对于openssl）用于编译mysql的库版本。</p><p>
                MySQL passes a default cipher list to the SSL library.
            </p><p style="color:blue;">mysql将默认密码列表传递给ssl库。</p><p>
                MySQL passes this default cipher list to OpenSSL:
            </p><p style="color:blue;">mysql将此默认密码列表传递给openssl：</p><pre data-lang="none" class="programlisting">ECDHE-ECDSA-AES128-GCM-SHA256
ECDHE-ECDSA-AES256-GCM-SHA384
ECDHE-RSA-AES128-GCM-SHA256
ECDHE-RSA-AES256-GCM-SHA384
ECDHE-ECDSA-AES128-SHA256
ECDHE-RSA-AES128-SHA256
ECDHE-ECDSA-AES256-SHA384
ECDHE-RSA-AES256-SHA384
DHE-RSA-AES128-GCM-SHA256
DHE-DSS-AES128-GCM-SHA256
DHE-RSA-AES128-SHA256
DHE-DSS-AES128-SHA256
DHE-DSS-AES256-GCM-SHA384
DHE-RSA-AES256-SHA256
DHE-DSS-AES256-SHA256
ECDHE-RSA-AES128-SHA
ECDHE-ECDSA-AES128-SHA
ECDHE-RSA-AES256-SHA
ECDHE-ECDSA-AES256-SHA
DHE-DSS-AES128-SHA
DHE-RSA-AES128-SHA
TLS_DHE_DSS_WITH_AES_256_CBC_SHA
DHE-RSA-AES256-SHA
AES128-GCM-SHA256
DH-DSS-AES128-GCM-SHA256
ECDH-ECDSA-AES128-GCM-SHA256
AES256-GCM-SHA384
DH-DSS-AES256-GCM-SHA384
ECDH-ECDSA-AES256-GCM-SHA384
AES128-SHA256
DH-DSS-AES128-SHA256
ECDH-ECDSA-AES128-SHA256
AES256-SHA256
DH-DSS-AES256-SHA256
ECDH-ECDSA-AES256-SHA384
AES128-SHA
DH-DSS-AES128-SHA
ECDH-ECDSA-AES128-SHA
AES256-SHA
DH-DSS-AES256-SHA
ECDH-ECDSA-AES256-SHA
DHE-RSA-AES256-GCM-SHA384
DH-RSA-AES128-GCM-SHA256
ECDH-RSA-AES128-GCM-SHA256
DH-RSA-AES256-GCM-SHA384
ECDH-RSA-AES256-GCM-SHA384
DH-RSA-AES128-SHA256
ECDH-RSA-AES128-SHA256
DH-RSA-AES256-SHA256
ECDH-RSA-AES256-SHA384
ECDHE-RSA-AES128-SHA
ECDHE-ECDSA-AES128-SHA
ECDHE-RSA-AES256-SHA
ECDHE-ECDSA-AES256-SHA
DHE-DSS-AES128-SHA
DHE-RSA-AES128-SHA
TLS_DHE_DSS_WITH_AES_256_CBC_SHA
DHE-RSA-AES256-SHA
AES128-SHA
DH-DSS-AES128-SHA
ECDH-ECDSA-AES128-SHA
AES256-SHA
DH-DSS-AES256-SHA
ECDH-ECDSA-AES256-SHA
DH-RSA-AES128-SHA
ECDH-RSA-AES128-SHA
DH-RSA-AES256-SHA
ECDH-RSA-AES256-SHA
DES-CBC3-SHA
</pre><p>
                MySQL passes this default cipher list to yaSSL:
            </p><p style="color:blue;">mysql将此默认密码列表传递给yassl：</p><pre data-lang="none" class="programlisting">DHE-RSA-AES256-SHA
DHE-RSA-AES128-SHA
AES128-RMD
DES-CBC3-RMD
DHE-RSA-AES256-RMD
DHE-RSA-AES128-RMD
DHE-RSA-DES-CBC3-RMD
AES256-SHA
RC4-SHA
RC4-MD5
DES-CBC3-SHA
DES-CBC-SHA
EDH-RSA-DES-CBC3-SHA
EDH-RSA-DES-CBC-SHA
AES128-SHA:AES256-RMD
</pre><p>
                As of MySQL 5.7.10, these cipher restrictions are in place:
            </p><p style="color:blue;">从mysql 5.7.10开始，这些密码限制已经就位：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The following ciphers are permanently restricted:
                    </p><p style="color:blue;">以下密码是永久限制的：</p><pre data-lang="none" class="programlisting">!DHE-DSS-DES-CBC3-SHA
!DHE-RSA-DES-CBC3-SHA
!ECDH-RSA-DES-CBC3-SHA
!ECDH-ECDSA-DES-CBC3-SHA
!ECDHE-RSA-DES-CBC3-SHA
!ECDHE-ECDSA-DES-CBC3-SHA
</pre></li><li class="listitem"><p>
                        The following categories of ciphers are permanently
                        restricted:
                    </p><p style="color:blue;">以下类别的密码将受到永久限制：</p><pre data-lang="none" class="programlisting">!aNULL
!eNULL
!EXPORT
!LOW
!MD5
!DES
!RC2
!RC4
!PSK
!SSLv3
</pre></li></ul>
                </div>
                <p>
                    If the server is started with an
                    <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> option specifying a
                    certificate that uses any of the preceding restricted ciphers or
                    cipher categories, the server starts with support for encrypted
                    connections disabled.
                </p><p style="color:blue;">如果服务器是用--ssl cert选项启动的，该选项指定使用前面任何受限制的密码或密码类别的证书，则服务器启动时将禁用对加密连接的支持。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="encrypted-connection-protocol-negotiation"></a>Connection TLS Protocol Negotiation</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Connection attempts in MySQL negotiate use of the highest TLS
                    protocol version available on both sides for which a
                    protocol-compatible encryption cipher is available on both
                    sides. The negotiation process depends on factors such as the
                    SSL library used to compile the server and client, the TLS
                    protocol and encryption cipher configuration, and which key size
                    is used:
                </p><p style="color:blue;">MySQL中的连接尝试协商使用双方都可用的最高TLS协议版本，并且双方都可以使用与协议兼容的加密密码。协商过程取决于以下因素，如用于编译服务器和客户端的ssl库、tls协议和加密密码配置，以及使用的密钥大小：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        For a connection attempt to succeed, the server and client
                        TLS protocol configuration must permit some protocol in
                        common.
                    </p><p style="color:blue;">要使连接尝试成功，服务器和客户端TLS协议配置必须允许某些协议具有共同性。</p></li><li class="listitem"><p>
                        Similarly, the server and client encryption cipher
                        configuration must permit some cipher in common. A given
                        cipher may work only with particular TLS protocols, so a
                        protocol available to the negotiation process is not chosen
                        unless there is also a compatible cipher.
                    </p><p style="color:blue;">类似地，服务器和客户端的加密密码配置必须允许一些共同的密码。给定的密码只能与特定的tls协议一起使用，因此除非还有兼容的密码，否则不会选择可用于协商过程的协议。</p></li><li class="listitem"><p>
                        If the server and client are compiled using OpenSSL, TLSv1.2
                        is used if possible. If either or both the server and client
                        are compiled using yaSSL, TLSv1.1 is used if possible.
                        (<span class="quote">“<span class="quote">Possible</span>”</span> means that server and client
                        configuration both must permit the indicated protocol, and
                        both must also permit some protocol-compatible encryption
                        cipher.) Otherwise, MySQL continues through the list of
                        available protocols, proceeding from more secure protocols
                        to less secure. Negotiation order is independent of the
                        order in which protocols are configured. For example,
                        negotiation order is the same regardless of whether
                        <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a> has a value of
                        <code class="literal">TLSv1,TLSv1.1,TLSv1.2</code> or
                        <code class="literal">TLSv1.2,TLSv1.1,TLSv1</code>.
                    </p><p style="color:blue;">如果服务器和客户机是使用openssl编译的，则在可能的情况下使用tlsv1.2。如果使用yassl编译服务器和客户机，则可能使用tlsv1.1。（“可能”意味着服务器和客户端配置都必须允许指定的协议，并且都必须允许一些与协议兼容的加密密码。）否则，mysql将继续查看可用协议列表，从更安全的协议转到不安全的协议。协商顺序与协议的配置顺序无关。例如，不管tls_version的值是tlsv1、tlsv1.1、tlsv1.2还是tlsv1.2、tlsv1.1、tlsv1，协商顺序都是相同的。</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                Prior to MySQL 5.7.10, MySQL supports only TLSv1, for both
                                OpenSSL and yaSSL, and no system variable or client option
                                exist for specifying which TLS protocols to permit.
                            </p><p style="color:blue;">在MySQL 5.7.10之前，MySQL只支持TLSV1，既适用于OpenSSL和YASL，也不存在系统变量或客户端选项，用于指定允许哪些TLS协议。</p>
                        </div>
                    </li><li class="listitem"><p>
                        TLSv1.2 does not work with all ciphers that have a key size
                        of 512 bits or less. To use this protocol with such a key,
                        use <a class="link" href="programs.html#option_general_ssl-cipher"><code class="option">--ssl-cipher</code></a> to specify
                        the cipher name explicitly:
                    </p><p style="color:blue;">TLSV1.2不适用于密钥大小小于或等于512位的所有密码。要将此协议与此类密钥一起使用，请使用--ssl cipher显式指定密码名称：</p><pre data-lang="none" class="programlisting">AES128-SHA
AES128-SHA256
AES256-SHA
AES256-SHA256
CAMELLIA128-SHA
CAMELLIA256-SHA
DES-CBC3-SHA
DHE-RSA-AES256-SHA
RC4-MD5
RC4-SHA
SEED-SHA
</pre></li><li class="listitem"><p>
                        For better security, use a certificate with an RSA key size
                        of at least 2048 bits.
                    </p><p style="color:blue;">为了提高安全性，请使用RSA密钥大小至少为2048位的证书。</p></li></ul>
                </div>
                <p>
                    If the server and client do not have a permitted protocol in
                    common, and a protocol-compatible cipher in common, the server
                    terminates the connection request. Examples:
                </p><p style="color:blue;">如果服务器和客户机没有共同的许可协议和共同的协议兼容密码，服务器将终止连接请求。示例：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If the server is configured with
                        <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version=TLSv1.1,TLSv1.2</code></a>:
                    </p><p style="color:blue;">如果服务器配置为tls_version=tlsv1.1，tlsv1.2：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Connection attempts fail for clients invoked with
                                <a class="link" href="programs.html#option_general_tls-version"><code class="option">--tls-version=TLSv1</code></a>, and
                                for older clients that support only TLSv1.
                            </p><p style="color:blue;">对于使用--tls version=tlsv1调用的客户端和仅支持tlsv1的旧客户端，连接尝试失败。</p></li><li class="listitem"><p>
                                Similarly, connection attempts fail for replication
                                slaves configured with <code class="literal">MASTER_TLS_VERSION =
                                'TLSv1'</code>, and for older slaves that support
                                only TLSv1.
                            </p><p style="color:blue;">类似地，对于配置了master_tls_version='tlsv1'的复制从机和仅支持tlsv1的较旧的从机，连接尝试失败。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p>
                        If the server is configured with
                        <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version=TLSv1</code></a> or is an
                        older server that supports only TLSv1:
                    </p><p style="color:blue;">如果服务器配置为tls_version=tlsv1或是仅支持tlsv1的旧服务器：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                Connection attempts fail for clients invoked with
                                <a class="link" href="programs.html#option_general_tls-version"><code class="option">--tls-version=TLSv1.1,TLSv1.2</code></a>.
                            </p><p style="color:blue;">使用--tls version=tlsv1.1，tlsv1.2调用的客户端的连接尝试失败。</p></li><li class="listitem"><p>
                                Similarly, connection attempts fail for replication
                                slaves configured with <code class="literal">MASTER_TLS_VERSION =
                                'TLSv1.1,TLSv1.2'</code>.
                            </p><p style="color:blue;">类似地，对于配置了master_tls_version='tlsv1.1，tlsv1.2'的复制从属服务器，连接尝试失败。</p></li></ul>
                        </div>
                    </li></ul>
                </div>
                <p>
                    MySQL permits specifying a list of protocols to support. This
                    list is passed directly down to the underlying SSL library and
                    is ultimately up to that library what protocols it actually
                    enables from the supplied list. Please refer to the MySQL source
                    code and the OpenSSL
                    <a class="ulink" href="https://www.openssl.org/docs/man1.1.0/ssl/SSL_CTX_new.html" target="_top"><code class="literal">SSL_CTX_new()</code></a>
                    documentation for information about how the SSL library handles
                    this.
                </p><p style="color:blue;">mysql允许指定要支持的协议列表。这个列表直接传递到底层ssl库，最终由该库从提供的列表中实际启用的协议决定。有关SSL库如何处理此问题的信息，请参阅MySQL源代码和OpenSSL SSL_ctx_new（）文档。</p>
            </div>
            <div class="simplesect">
                <div class="titlepage">
                    <div>
                        <div class="simple">
                            <h4 class="title"><a name="encrypted-connection-protocol-monitoring"></a>Monitoring Current Session TLS Protocol and Cipher</h4>

                        </div>

                    </div>

                </div>
                <p>
                    To determine which encryption TLS protocol and cipher the
                    current session uses, check the session values of the
                    <a class="link" href="server-administration.html#statvar_Ssl_version"><code class="literal">Ssl_version</code></a> and
                    <a class="link" href="server-administration.html#statvar_Ssl_cipher"><code class="literal">Ssl_cipher</code></a> status variables:
                </p><p style="color:blue;">要确定当前会话使用的加密TLS协议和密码，请检查ssl_version和ssl_cipher status变量的会话值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM performance_schema.session_status</code></strong>
       <strong class="userinput"><code>WHERE VARIABLE_NAME IN ('Ssl_version','Ssl_cipher');</code></strong>
+---------------+---------------------------+
| VARIABLE_NAME | VARIABLE_VALUE            |
+---------------+---------------------------+
| Ssl_cipher    | DHE-RSA-AES128-GCM-SHA256 |
| Ssl_version   | TLSv1.2                   |
+---------------+---------------------------+
</pre><p>
                If the connection is not encrypted, both variables have an empty
                value.
            </p><p style="color:blue;">如果连接未加密，则两个变量都有一个空值。</p>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="creating-ssl-rsa-files"></a>6.3.3&nbsp;Creating SSL and RSA Certificates and Keys</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#creating-ssl-rsa-files-using-mysql">6.3.3.1 Creating SSL and RSA Certificates and Keys using MySQL</a></span></dt><dt><span class="section"><a href="security.html#creating-ssl-files-using-openssl">6.3.3.2 Creating SSL Certificates and Keys Using openssl</a></span></dt><dt><span class="section"><a href="security.html#creating-rsa-files-using-openssl">6.3.3.3 Creating RSA Keys Using openssl</a></span></dt></dl>
            </div>
            <p>
                The following discussion describes how to create the files
                required for SSL and RSA support in MySQL. File creation can be
                performed using facilities provided by MySQL itself, or by
                invoking the <span class="command"><strong>openssl</strong></span> command directly.
            </p><p style="color:blue;">下面的讨论描述如何在mysql中创建ssl和rsa支持所需的文件。文件创建可以使用mysql本身提供的工具执行，也可以通过直接调用openssl命令执行。</p><p>
            SSL certificate and key files enable MySQL to support encrypted
            connections using SSL. See
            <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
        </p><p style="color:blue;">ssl证书和密钥文件使mysql能够支持使用ssl的加密连接。请参阅6.3.1节，“配置MySQL以使用加密连接”。</p><p>
            RSA key files enable MySQL to support secure password exchange
            over unencrypted connections for accounts authenticated by the
            <code class="literal">sha256_password</code> plugin. See
            <a class="xref" href="security.html#sha256-pluggable-authentication" title="6.4.1.5&nbsp;SHA-256 Pluggable Authentication">Section&nbsp;6.4.1.5, “SHA-256 Pluggable Authentication”</a>.
        </p><p style="color:blue;">rsa密钥文件使mysql能够支持通过sha256_密码插件验证的帐户的未加密连接上的安全密码交换。见第6.4.1.5节，“SHA-256可插拔认证”。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="creating-ssl-rsa-files-using-mysql"></a>6.3.3.1&nbsp;Creating SSL and RSA Certificates and Keys using MySQL</h4>
                        </div>
                    </div>
                </div>
                <p>
                    MySQL provides these ways to create the SSL certificate and key
                    files and RSA key-pair files required to support encrypted
                    connections using SSL and secure password exchange using RSA
                    over unencrypted connections, if those files are missing:
                </p><p style="color:blue;">MySQL提供了以下方法来创建SSL证书和密钥文件以及支持使用SSL的加密连接所需的RSA密钥对文件，以及在未加密连接上使用RSA的安全密码交换（如果缺少这些文件）：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The server can autogenerate these files at startup, for
                        MySQL distributions compiled using OpenSSL.
                    </p><p style="color:blue;">对于使用openssl编译的mysql发行版，服务器可以在启动时自动生成这些文件。</p></li><li class="listitem"><p>
                        Users can invoke the <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a>
                        utility manually.
                    </p><p style="color:blue;">用户可以手动调用mysql_ssl_rsa_安装实用程序。</p></li><li class="listitem"><p>
                        For some distribution types, such as RPM packages,
                        <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> invocation occurs
                        during data directory initialization. In this case, the
                        MySQL distribution need not have been compiled using OpenSSL
                        as long as the <span class="command"><strong>openssl</strong></span> command is
                        available.
                    </p><p style="color:blue;">对于某些分发类型（如rpm包），mysql_ssl_rsa_setup调用发生在数据目录初始化期间。在这种情况下，只要openssl命令可用，就不需要使用openssl编译mysql发行版。</p></li></ul>
                </div>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        Server autogeneration and
                        <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> help lower the barrier
                        to using SSL by making it easier to generate the required
                        files. However, certificates generated by these methods are
                        self-signed, which may not be very secure. After you gain
                        experience using such files, consider obtaining
                        certificate/key material from a registered certificate
                        authority.
                    </p><p style="color:blue;">服务器自动生成和mysql_ssl_rsa_安装有助于降低使用ssl的障碍，使生成所需文件更容易。但是，由这些方法生成的证书是自签名的，这可能不太安全。在您获得使用此类文件的经验后，请考虑从注册证书颁发机构获取证书/密钥材料。</p>
                </div>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql-automatic" title="Automatic SSL and RSA File Generation">Automatic SSL and RSA File Generation</a></p><p style="color:blue;">自动生成ssl和rsa文件</p></li><li class="listitem"><p><a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql-manual-using-mysql-ssl-rsa-setup" title="Manual SSL and RSA File Generation Using mysql_ssl_rsa_setup">Manual SSL and RSA File Generation Using mysql_ssl_rsa_setup</a></p><p style="color:blue;">使用mysql_ssl_rsa_安装程序手动生成ssl和rsa文件</p></li><li class="listitem"><p><a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql-ssl-and-rsa-file-characteristics" title="SSL and RSA File Characteristics">SSL and RSA File Characteristics</a></p><p style="color:blue;">ssl和rsa文件特性</p></li></ul>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="creating-ssl-rsa-files-using-mysql-automatic"></a>Automatic SSL and RSA File Generation</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        For MySQL distributions compiled using OpenSSL, the MySQL
                        server has the capability of automatically generating missing
                        SSL and RSA files at startup. The
                        <a class="link" href="server-administration.html#sysvar_auto_generate_certs"><code class="literal">auto_generate_certs</code></a> and
                        <a class="link" href="server-administration.html#sysvar_sha256_password_auto_generate_rsa_keys"><code class="literal">sha256_password_auto_generate_rsa_keys</code></a>
                        system variables control automatic generation of these files.
                        These variables are enabled by default. They can be enabled at
                        startup and inspected but not set at runtime.
                    </p><p style="color:blue;">对于使用openssl编译的mysql发行版，mysql服务器能够在启动时自动生成丢失的ssl和rsa文件。auto_generate_certs和sha256_password_auto_generate_rsa_keys系统变量控制这些文件的自动生成。默认情况下启用这些变量。它们可以在启动时启用并检查，但不能在运行时设置。</p><p>
                    At startup, the server automatically generates server-side and
                    client-side SSL certificate and key files in the data
                    directory if the
                    <a class="link" href="server-administration.html#sysvar_auto_generate_certs"><code class="literal">auto_generate_certs</code></a> system
                    variable is enabled, no SSL options other than
                    <a class="link" href="programs.html#option_general_ssl"><code class="option">--ssl</code></a> are specified, and the
                    server-side SSL files are missing from the data directory.
                    These files enable encrypted client connections using SSL; see
                    <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                </p><p style="color:blue;">启动时，如果启用了“自动生成证书”系统变量，则服务器会在数据目录中自动生成服务器端和客户端的SSL证书和密钥文件，并且未指定-SSL以外的任何SSL选项，并且数据目录中缺少服务器端的SSL文件。这些文件支持使用ssl的加密客户机连接；请参阅6.3.1节，“配置mysql以使用加密连接”。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            The server checks the data directory for SSL files with
                            the following names:
                        </p><p style="color:blue;">服务器检查数据目录中是否存在具有以下名称的ssl文件：</p><pre data-lang="ini" class="programlisting">ca.pem
server-cert.pem
server-key.pem
</pre></li><li class="listitem"><p>
                            If any of those files are present, the server creates no
                            SSL files. Otherwise, it creates them, plus some
                            additional files:
                        </p><p style="color:blue;">如果存在这些文件中的任何一个，服务器将不创建ssl文件。否则，它将创建这些文件以及一些其他文件：</p><pre data-lang="ini" class="programlisting">ca.pem               Self-signed CA certificate
ca-key.pem           CA private key
server-cert.pem      Server certificate
server-key.pem       Server private key
client-cert.pem      Client certificate
client-key.pem       Client private key
</pre></li><li class="listitem"><p>
                            If the server autogenerates SSL files, it uses the names
                            of the <code class="filename">ca.pem</code>,
                            <code class="filename">server-cert.pem</code>, and
                            <code class="filename">server-key.pem</code> files to set the
                            corresponding system variables
                            (<a class="link" href="server-administration.html#sysvar_ssl_ca"><code class="literal">ssl_ca</code></a>,
                            <a class="link" href="server-administration.html#sysvar_ssl_cert"><code class="literal">ssl_cert</code></a>,
                            <a class="link" href="server-administration.html#sysvar_ssl_key"><code class="literal">ssl_key</code></a>).
                        </p><p style="color:blue;">如果服务器自动生成ssl文件，则使用ca.pem、server-cert.pem和server-key.pem文件的名称来设置相应的系统变量（ssl-ca、ssl-cert、ssl-key）。</p></li></ol>
                    </div>
                    <p>
                        At startup, the server automatically generates RSA
                        private/public key-pair files in the data directory if all of
                        these conditions are true: The
                        <a class="link" href="server-administration.html#sysvar_sha256_password_auto_generate_rsa_keys"><code class="literal">sha256_password_auto_generate_rsa_keys</code></a>
                        system variable is enabled; no RSA options are specified; the
                        RSA files are missing from the data directory. These key-pair
                        files enable secure password exchange using RSA over
                        unencrypted connections for accounts authenticated by the
                        <code class="literal">sha256_password</code> plugin; see
                        <a class="xref" href="security.html#sha256-pluggable-authentication" title="6.4.1.5&nbsp;SHA-256 Pluggable Authentication">Section&nbsp;6.4.1.5, “SHA-256 Pluggable Authentication”</a>.
                    </p><p style="color:blue;">启动时，如果所有这些条件均为真，服务器将在数据目录中自动生成RSA私钥/公钥对文件：SHA256_password_auto_generate_RSA_keys系统变量已启用；未指定RSA选项；数据目录中缺少RSA文件。这些密钥对文件支持通过sha256_密码插件验证的帐户在未加密连接上使用rsa进行安全密码交换；请参阅第6.4.1.5节“sha-256可插入身份验证”。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            The server checks the data directory for RSA files with
                            the following names:
                        </p><p style="color:blue;">服务器检查数据目录中是否存在具有以下名称的RSA文件：</p><pre data-lang="ini" class="programlisting">private_key.pem      Private member of private/public key pair
public_key.pem       Public member of private/public key pair
</pre></li><li class="listitem"><p>
                            If any of these files are present, the server creates no
                            RSA files. Otherwise, it creates them.
                        </p><p style="color:blue;">如果存在这些文件中的任何一个，服务器将不创建rsa文件。否则，它就会创造它们。</p></li><li class="listitem"><p>
                            If the server autogenerates the RSA files, it uses their
                            names to set the corresponding system variables
                            (<a class="link" href="server-administration.html#sysvar_sha256_password_private_key_path"><code class="literal">sha256_password_private_key_path</code></a>,
                            <a class="link" href="server-administration.html#sysvar_sha256_password_public_key_path"><code class="literal">sha256_password_public_key_path</code></a>).
                        </p><p style="color:blue;">如果服务器自动生成rsa文件，则使用它们的名称设置相应的系统变量（sha256_password_private_key_path，sha256_password_public_key_path）。</p></li></ol>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="creating-ssl-rsa-files-using-mysql-manual-using-mysql-ssl-rsa-setup"></a>Manual SSL and RSA File Generation Using mysql_ssl_rsa_setup</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL distributions include a
                        <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> utility that can be
                        invoked manually to generate SSL and RSA files. This utility
                        is included with all MySQL distributions, but it does require
                        that the <span class="command"><strong>openssl</strong></span> command be available. For
                        usage instructions, see <a class="xref" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files">Section&nbsp;4.4.5, “<span class="command"><strong>mysql_ssl_rsa_setup</strong></span> — Create SSL/RSA Files”</a>.
                    </p><p style="color:blue;">mysql发行版包括mysql_ssl_rsa_安装实用程序，可以手动调用它来生成ssl和rsa文件。此实用程序包含在所有mysql发行版中，但它确实要求openssl命令可用。有关使用说明，请参阅4.4.5节，“mysql_ssl_rsa_setup-create ssl/rsa files”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="creating-ssl-rsa-files-using-mysql-ssl-and-rsa-file-characteristics"></a>SSL and RSA File Characteristics</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        SSL and RSA files created automatically by the server or by
                        invoking <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> have these
                        characteristics:
                    </p><p style="color:blue;">由服务器或通过调用mysql_ssl_rsa_安装程序自动创建的ssl和rsa文件具有以下特征：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            SSL and RSA keys are have a size of 2048 bits.
                        </p><p style="color:blue;">ssl和rsa密钥的大小为2048位。</p></li><li class="listitem"><p>
                            The SSL CA certificate is self signed.
                        </p><p style="color:blue;">ssl ca证书是自签名的。</p></li><li class="listitem"><p>
                            The SSL server and client certificates are signed with the
                            CA certificate and key, using the
                            <code class="literal">sha256WithRSAEncryption</code> signature
                            algorithm.
                        </p><p style="color:blue;">ssl服务器和客户端证书使用ca证书和密钥进行签名，使用sha256withrsa加密签名算法。</p></li><li class="listitem"><p>
                            SSL certificates use these Common Name (CN) values, with
                            the appropriate certificate type (CA, Server, Client):
                        </p><p style="color:blue;">ssl证书使用这些公共名称（cn）值，并具有适当的证书类型（ca、服务器、客户端）：</p><pre data-lang="ini" class="programlisting">ca.pem:         MySQL_Server_<em class="replaceable"><code>suffix</code></em>_Auto_Generated_CA_Certificate
server-cert.pm: MySQL_Server_<em class="replaceable"><code>suffix</code></em>_Auto_Generated_Server_Certificate
client-cert.pm: MySQL_Server_<em class="replaceable"><code>suffix</code></em>_Auto_Generated_Client_Certificate
</pre><p>
                            The <em class="replaceable"><code>suffix</code></em> value is based on
                            the MySQL version number. For files generated by
                            <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a>, the suffix can be
                            specified explicitly using the
                            <a class="link" href="programs.html#option_mysql_ssl_rsa_setup_suffix"><code class="option">--suffix</code></a>
                            option.
                        </p><p style="color:blue;">后缀值基于mysql版本号。对于mysql_ssl_rsa_安装程序生成的文件，可以使用--suffix选项显式指定后缀。</p><p>
                            For files generated by the server, if the resulting CN
                            values exceed 64 characters, the
                            <code class="literal">_<em class="replaceable"><code>suffix</code></em></code>
                            portion of the name is omitted.
                        </p><p style="color:blue;">对于服务器生成的文件，如果生成的cn值超过64个字符，则省略名称的后缀部分。</p></li><li class="listitem"><p>
                            SSL files have blank values for Country (C), State or
                            Province (ST), Organization (O), Organization Unit Name
                            (OU) and email address.
                        </p><p style="color:blue;">ssl文件对于国家（c）、州或省（st）、组织（o）、组织单位名称（ou）和电子邮件地址具有空值。</p></li><li class="listitem"><p>
                            SSL files created by the server or by
                            <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> are valid for ten
                            years from the time of generation.
                        </p><p style="color:blue;">由服务器或mysql_ssl_rsa_安装程序创建的ssl文件自生成之日起十年内有效。</p></li><li class="listitem"><p>
                            RSA files do not expire.
                        </p><p style="color:blue;">RSA文件不会过期。</p></li><li class="listitem"><p>
                            SSL files have different serial numbers for each
                            certificate/key pair (1 for CA, 2 for Server, 3 for
                            Client).
                        </p><p style="color:blue;">ssl文件对于每个证书/密钥对都有不同的序列号（1表示ca，2表示服务器，3表示客户端）。</p></li><li class="listitem"><p>
                            Files created automatically by the server are owned by the
                            account that runs the server. Files created using
                            <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> are owned by the
                            user who invoked that program. This can be changed on
                            systems that support the <code class="literal">chown()</code> system
                            call if the program is invoked by <code class="literal">root</code>
                            and the <a class="link" href="programs.html#option_mysql_ssl_rsa_setup_uid"><code class="option">--uid</code></a>
                            option is given to specify the user who should own the
                            files.
                        </p><p style="color:blue;">服务器自动创建的文件归运行服务器的帐户所有。使用mysql_ssl_rsa_安装程序创建的文件归调用该程序的用户所有。在支持chown（）系统调用的系统上，如果程序是由root调用的，并且提供了--uid选项来指定应该拥有这些文件的用户，则可以更改此设置。</p></li><li class="listitem"><p>
                            On Unix and Unix-like systems, the file access mode is 644
                            for certificate files (that is, world readable) and 600
                            for key files (that is, accessible only by the account
                            that runs the server).
                        </p><p style="color:blue;">在unix和类unix系统上，证书文件的文件访问模式是644（即全球可读），密钥文件的文件访问模式是600（即，仅由运行服务器的帐户访问）。</p></li></ul>
                    </div>
                    <p>
                        To see the contents of an SSL certificate (for example, to
                        check the range of dates over which it is valid), invoke
                        <span class="command"><strong>openssl</strong></span> directly:
                    </p><p style="color:blue;">要查看ssl证书的内容（例如，要检查其有效日期的范围），请直接调用openssl：</p><pre data-lang="terminal" class="programlisting">openssl x509 -text -in ca.pem
openssl x509 -text -in server-cert.pem
openssl x509 -text -in client-cert.pem
</pre><p>
                    It is also possible to check SSL certificate expiration
                    information using this SQL statement:
                </p><p style="color:blue;">还可以使用以下SQL语句检查SSL证书过期信息：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'Ssl_server_not%';</code></strong>
+-----------------------+--------------------------+
| Variable_name         | Value                    |
+-----------------------+--------------------------+
| Ssl_server_not_after  | Apr 28 14:16:39 2027 GMT |
| Ssl_server_not_before | May  1 14:16:39 2017 GMT |
+-----------------------+--------------------------+
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="creating-ssl-files-using-openssl"></a>6.3.3.2&nbsp;Creating SSL Certificates and Keys Using openssl</h4>

                        </div>

                    </div>

                </div>
                <p>
                    This section describes how to use the <span class="command"><strong>openssl</strong></span>
                    command to set up SSL certificate and key files for use by MySQL
                    servers and clients. The first example shows a simplified
                    procedure such as you might use from the command line. The
                    second shows a script that contains more detail. The first two
                    examples are intended for use on Unix and both use the
                    <span class="command"><strong>openssl</strong></span> command that is part of OpenSSL. The
                    third example describes how to set up SSL files on Windows.
                </p><p style="color:blue;">本节介绍如何使用openssl命令设置ssl证书和密钥文件，以供mysql服务器和客户端使用。第一个示例显示了一个简化的过程，如您可以从命令行使用的过程。第二个显示包含更多细节的脚本。前两个示例用于unix，并且都使用openssl命令（openssl的一部分）。第三个例子描述了如何在windows上设置ssl文件。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        There are easier alternatives to generating the files required
                        for SSL than the procedure described here: Let the server
                        autogenerate them or use the
                        <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> program. See
                        <a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql" title="6.3.3.1&nbsp;Creating SSL and RSA Certificates and Keys using MySQL">Section&nbsp;6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>.
                    </p><p style="color:blue;">生成ssl所需的文件比这里描述的过程更容易：让服务器自动生成它们或使用mysql_ssl_rsa_安装程序。参见第6.3.3.1节“使用mysql创建ssl和rsa证书和密钥”。</p>
                </div>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        Whatever method you use to generate the certificate and key
                        files, the Common Name value used for the server and client
                        certificates/keys must each differ from the Common Name value
                        used for the CA certificate. Otherwise, the certificate and
                        key files will not work for servers compiled using OpenSSL. A
                        typical error in this case is:
                    </p><p style="color:blue;">无论使用何种方法生成证书和密钥文件，服务器和客户端证书/密钥使用的公用名值都必须与CA证书使用的公用名值不同。否则，使用openssl编译的服务器将无法使用证书和密钥文件。这种情况下的典型错误是：</p><pre data-lang="ini" class="programlisting">ERROR 2026 (HY000): SSL connection error:
error:00000001:lib(0):func(0):reason(1)
</pre>
                </div>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#creating-ssl-files-using-openssl-unix-command-line" title="Example 1: Creating SSL Files from the Command Line on Unix">Example 1: Creating SSL Files from the Command Line on Unix</a></p><p style="color:blue;">示例1:在UNIX上从命令行创建SSL文件</p></li><li class="listitem"><p><a class="xref" href="security.html#creating-ssl-files-using-openssl-unix-script" title="Example 2: Creating SSL Files Using a Script on Unix">Example 2: Creating SSL Files Using a Script on Unix</a></p><p style="color:blue;">示例2：在UNIX上使用脚本创建SSL文件</p></li><li class="listitem"><p><a class="xref" href="security.html#creating-ssl-files-using-openssl-windows" title="Example 3: Creating SSL Files on Windows">Example 3: Creating SSL Files on Windows</a></p><p style="color:blue;">示例3:在Windows上创建SSL文件</p></li></ul>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="creating-ssl-files-using-openssl-unix-command-line"></a>Example 1: Creating SSL Files from the Command Line on Unix</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The following example shows a set of commands to create MySQL
                        server and client certificate and key files. You will need to
                        respond to several prompts by the <span class="command"><strong>openssl</strong></span>
                        commands. To generate test files, you can press Enter to all
                        prompts. To generate files for production use, you should
                        provide nonempty responses.
                    </p><p style="color:blue;">下面的示例显示了一组用于创建mysql服务器、客户端证书和密钥文件的命令。您将需要响应openssl命令的几个提示。要生成测试文件，可以按回车键进入所有提示。要生成供生产使用的文件，应提供非空响应。</p><pre data-lang="terminal" class="programlisting"># Create clean environment
rm -rf newcerts
mkdir newcerts &amp;&amp; cd newcerts

# Create CA certificate
openssl genrsa 2048 &gt; ca-key.pem
openssl req -new -x509 -nodes -days 3600 \
        -key ca-key.pem -out ca.pem

# Create server certificate, remove passphrase, and sign it
# server-cert.pem = public key, server-key.pem = private key
openssl req -newkey rsa:2048 -days 3600 \
        -nodes -keyout server-key.pem -out server-req.pem
openssl rsa -in server-key.pem -out server-key.pem
openssl x509 -req -in server-req.pem -days 3600 \
        -CA ca.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem

# Create client certificate, remove passphrase, and sign it
# client-cert.pem = public key, client-key.pem = private key
openssl req -newkey rsa:2048 -days 3600 \
        -nodes -keyout client-key.pem -out client-req.pem
openssl rsa -in client-key.pem -out client-key.pem
openssl x509 -req -in client-req.pem -days 3600 \
        -CA ca.pem -CAkey ca-key.pem -set_serial 01 -out client-cert.pem
</pre><p>
                    After generating the certificates, verify them:
                </p><p style="color:blue;">生成证书后，请验证它们：</p><pre data-lang="terminal" class="programlisting">openssl verify -CAfile ca.pem server-cert.pem client-cert.pem
</pre><p>
                    You should see a response like this:
                </p><p style="color:blue;">你应该看到这样的反应：</p><pre data-lang="ini" class="programlisting">server-cert.pem: OK
client-cert.pem: OK
</pre><p>
                    To see the contents of a certificate (for example, to check
                    the range of dates over which a certificate is valid), invoke
                    <span class="command"><strong>openssl</strong></span> like this:
                </p><p style="color:blue;">要查看证书的内容（例如，要检查证书有效的日期范围），请按如下方式调用openssl：</p><pre data-lang="terminal" class="programlisting">openssl x509 -text -in ca.pem
openssl x509 -text -in server-cert.pem
openssl x509 -text -in client-cert.pem
</pre><p>
                    Now you have a set of files that can be used as follows:
                </p><p style="color:blue;">现在您有一组文件，可以按如下方式使用：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="filename">ca.pem</code>: Use this as the argument to
                            <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> on the server and
                            client sides. (The CA certificate, if used, must be the
                            same on both sides.)
                        </p><p style="color:blue;">ca.pem：将此参数用作服务器端和客户端上--sslca的参数。（如果使用ca证书，则两边必须相同。）</p></li><li class="listitem"><p>
                            <code class="filename">server-cert.pem</code>,
                            <code class="filename">server-key.pem</code>: Use these as the
                            arguments to <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a>
                            and <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> on the
                            server side.
                        </p><p style="color:blue;">server-cert.pem，server-key.pem：将它们用作服务器端--ssl cert和--ssl key的参数。</p></li><li class="listitem"><p>
                            <code class="filename">client-cert.pem</code>,
                            <code class="filename">client-key.pem</code>: Use these as the
                            arguments to <a class="link" href="programs.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a>
                            and <a class="link" href="programs.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> on the
                            client side.
                        </p><p style="color:blue;">client-cert.pem，client-key.pem：将它们用作客户端上--ssl cert和--ssl key的参数。</p></li></ul>
                    </div>
                    <p>
                        For additional usage instructions, see
                        <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                    </p><p style="color:blue;">有关其他使用说明，请参阅6.3.1节，“配置MySQL以使用加密连接”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="creating-ssl-files-using-openssl-unix-script"></a>Example 2: Creating SSL Files Using a Script on Unix</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Here is an example script that shows how to set up SSL
                        certificate and key files for MySQL. After executing the
                        script, use the files for SSL connections as described in
                        <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                    </p><p style="color:blue;">下面是一个演示如何为mysql设置ssl证书和密钥文件的示例脚本。执行脚本后，使用ssl连接文件，如6.3.1节“配置mysql以使用加密连接”中所述。</p><pre data-lang="terminal" class="programlisting">DIR=`pwd`/openssl
PRIV=$DIR/private

mkdir $DIR $PRIV $DIR/newcerts
cp /usr/share/ssl/openssl.cnf $DIR
replace ./demoCA $DIR -- $DIR/openssl.cnf

# Create necessary files: $database, $serial and $new_certs_dir
# directory (optional)

touch $DIR/index.txt
echo "01" &gt; $DIR/serial

#
# Generation of Certificate Authority(CA)
#

openssl req -new -x509 -keyout $PRIV/cakey.pem -out $DIR/ca.pem \
    -days 3600 -config $DIR/openssl.cnf

# Sample output:
# Using configuration from /home/finley/openssl/openssl.cnf
# Generating a 1024 bit RSA private key
# ................++++++
# .........++++++
# writing new private key to '/home/finley/openssl/private/cakey.pem'
# Enter PEM pass phrase:
# Verifying password - Enter PEM pass phrase:
# -----
# You are about to be asked to enter information that will be
# incorporated into your certificate request.
# What you are about to enter is what is called a Distinguished Name
# or a DN.
# There are quite a few fields but you can leave some blank
# For some fields there will be a default value,
# If you enter '.', the field will be left blank.
# -----
# Country Name (2 letter code) [AU]:FI
# State or Province Name (full name) [Some-State]:.
# Locality Name (eg, city) []:
# Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB
# Organizational Unit Name (eg, section) []:
# Common Name (eg, YOUR name) []:MySQL admin
# Email Address []:

#
# Create server request and key
#
openssl req -new -keyout $DIR/server-key.pem -out \
    $DIR/server-req.pem -days 3600 -config $DIR/openssl.cnf

# Sample output:
# Using configuration from /home/finley/openssl/openssl.cnf
# Generating a 1024 bit RSA private key
# ..++++++
# ..........++++++
# writing new private key to '/home/finley/openssl/server-key.pem'
# Enter PEM pass phrase:
# Verifying password - Enter PEM pass phrase:
# -----
# You are about to be asked to enter information that will be
# incorporated into your certificate request.
# What you are about to enter is what is called a Distinguished Name
# or a DN.
# There are quite a few fields but you can leave some blank
# For some fields there will be a default value,
# If you enter '.', the field will be left blank.
# -----
# Country Name (2 letter code) [AU]:FI
# State or Province Name (full name) [Some-State]:.
# Locality Name (eg, city) []:
# Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB
# Organizational Unit Name (eg, section) []:
# Common Name (eg, YOUR name) []:MySQL server
# Email Address []:
#
# Please enter the following 'extra' attributes
# to be sent with your certificate request
# A challenge password []:
# An optional company name []:

#
# Remove the passphrase from the key
#
openssl rsa -in $DIR/server-key.pem -out $DIR/server-key.pem

#
# Sign server cert
#
openssl ca -cert $DIR/ca.pem -policy policy_anything \
    -out $DIR/server-cert.pem -config $DIR/openssl.cnf \
    -infiles $DIR/server-req.pem

# Sample output:
# Using configuration from /home/finley/openssl/openssl.cnf
# Enter PEM pass phrase:
# Check that the request matches the signature
# Signature ok
# The Subjects Distinguished Name is as follows
# countryName           :PRINTABLE:'FI'
# organizationName      :PRINTABLE:'MySQL AB'
# commonName            :PRINTABLE:'MySQL admin'
# Certificate is to be certified until Sep 13 14:22:46 2003 GMT
# (365 days)
# Sign the certificate? [y/n]:y
#
#
# 1 out of 1 certificate requests certified, commit? [y/n]y
# Write out database with 1 new entries
# Data Base Updated

#
# Create client request and key
#
openssl req -new -keyout $DIR/client-key.pem -out \
    $DIR/client-req.pem -days 3600 -config $DIR/openssl.cnf

# Sample output:
# Using configuration from /home/finley/openssl/openssl.cnf
# Generating a 1024 bit RSA private key
# .....................................++++++
# .............................................++++++
# writing new private key to '/home/finley/openssl/client-key.pem'
# Enter PEM pass phrase:
# Verifying password - Enter PEM pass phrase:
# -----
# You are about to be asked to enter information that will be
# incorporated into your certificate request.
# What you are about to enter is what is called a Distinguished Name
# or a DN.
# There are quite a few fields but you can leave some blank
# For some fields there will be a default value,
# If you enter '.', the field will be left blank.
# -----
# Country Name (2 letter code) [AU]:FI
# State or Province Name (full name) [Some-State]:.
# Locality Name (eg, city) []:
# Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB
# Organizational Unit Name (eg, section) []:
# Common Name (eg, YOUR name) []:MySQL user
# Email Address []:
#
# Please enter the following 'extra' attributes
# to be sent with your certificate request
# A challenge password []:
# An optional company name []:

#
# Remove the passphrase from the key
#
openssl rsa -in $DIR/client-key.pem -out $DIR/client-key.pem

#
# Sign client cert
#

openssl ca -cert $DIR/ca.pem -policy policy_anything \
    -out $DIR/client-cert.pem -config $DIR/openssl.cnf \
    -infiles $DIR/client-req.pem

# Sample output:
# Using configuration from /home/finley/openssl/openssl.cnf
# Enter PEM pass phrase:
# Check that the request matches the signature
# Signature ok
# The Subjects Distinguished Name is as follows
# countryName           :PRINTABLE:'FI'
# organizationName      :PRINTABLE:'MySQL AB'
# commonName            :PRINTABLE:'MySQL user'
# Certificate is to be certified until Sep 13 16:45:17 2003 GMT
# (365 days)
# Sign the certificate? [y/n]:y
#
#
# 1 out of 1 certificate requests certified, commit? [y/n]y
# Write out database with 1 new entries
# Data Base Updated

#
# Create a my.cnf file that you can use to test the certificates
#

cat &lt;&lt;EOF &gt; $DIR/my.cnf
[client]
ssl-ca=$DIR/ca.pem
ssl-cert=$DIR/client-cert.pem
ssl-key=$DIR/client-key.pem
[mysqld]
ssl-ca=$DIR/ca.pem
ssl-cert=$DIR/server-cert.pem
ssl-key=$DIR/server-key.pem
EOF
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="creating-ssl-files-using-openssl-windows"></a>Example 3: Creating SSL Files on Windows</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Download OpenSSL for Windows if it is not installed on your
                        system. An overview of available packages can be seen here:
                    </p><p style="color:blue;">如果系统上没有安装OpenSSL for Windows，请下载它。以下是可用软件包的概述：</p><pre data-lang="ini" class="programlisting"><a class="ulink" href="http://www.slproweb.com/products/Win32OpenSSL.html" target="_top">http://www.slproweb.com/products/Win32OpenSSL.html</a>
</pre><p>
                    Choose the Win32 OpenSSL Light or Win64 OpenSSL Light package,
                    depending on your architecture (32-bit or 64-bit). The default
                    installation location will be
                    <code class="literal">C:\OpenSSL-Win32</code> or
                    <code class="literal">C:\OpenSSL-Win64</code>, depending on which
                    package you downloaded. The following instructions assume a
                    default location of <code class="literal">C:\OpenSSL-Win32</code>.
                    Modify this as necessary if you are using the 64-bit package.
                </p><p style="color:blue;">根据您的体系结构（32位或64位），选择win32 openssl light或win64 openssl light包。默认安装位置将是c:\ openssl-win32或c:\ openssl-win64，具体取决于下载的包。以下说明假定默认位置为C:\ openssl-win32。如果使用的是64位包，请根据需要进行修改。</p><p>
                    If a message occurs during setup indicating
                    <code class="literal">'...critical component is missing: Microsoft Visual
                        C++ 2008 Redistributables'</code>, cancel the setup and
                    download one of the following packages as well, again
                    depending on your architecture (32-bit or 64-bit):
                </p><p style="color:blue;">如果在安装过程中出现一条消息，表示“……关键组件丢失：微软Visual C++ 2008重新分发”，则取消安装并下载其中的一个包，再次取决于您的架构（32位或64位）：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Visual C++ 2008 Redistributables (x86), available at:
                        </p><p style="color:blue;">Visual C++ 2008可重分发（x86），可在：</p><pre data-lang="ini" class="programlisting"><a class="ulink" href="http://www.microsoft.com/downloads/details.aspx?familyid=9B2DA534-3E03-4391-8A4D-074B9F2BC1BF" target="_top">http://www.microsoft.com/downloads/details.aspx?familyid=9B2DA534-3E03-4391-8A4D-074B9F2BC1BF</a>
</pre></li><li class="listitem"><p>
                            Visual C++ 2008 Redistributables (x64), available at:
                        </p><p style="color:blue;">Visual C++ 2008可重分发（X64），可在：</p><pre data-lang="ini" class="programlisting"><a class="ulink" href="http://www.microsoft.com/downloads/details.aspx?familyid=bd2a6171-e2d6-4230-b809-9a8d7548c1b6" target="_top">http://www.microsoft.com/downloads/details.aspx?familyid=bd2a6171-e2d6-4230-b809-9a8d7548c1b6</a>
</pre></li></ul>
                    </div>
                    <p>
                        After installing the additional package, restart the OpenSSL
                        setup procedure.
                    </p><p style="color:blue;">安装附加包后，重新启动openssl安装过程。</p><p>
                    During installation, leave the default
                    <code class="filename">C:\OpenSSL-Win32</code> as the install path, and
                    also leave the default option <code class="literal">'Copy OpenSSL DLL files
                    to the Windows system directory'</code> selected.
                </p><p style="color:blue;">在安装过程中，保留默认的c:\ openssl-win32作为安装路径，并保留默认的选项“将openssl dll文件复制到windows系统目录”。</p><p>
                    When the installation has finished, add
                    <code class="filename">C:\OpenSSL-Win32\bin</code> to the Windows
                    System Path variable of your server (depending on your version
                    of Windows, the following path-setting instructions might
                    differ slightly):
                </p><p style="color:blue;">安装完成后，将c:\ openssl-win32\bin添加到服务器的windows系统路径变量中（根据windows的版本，以下路径设置说明可能略有不同）：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            On the Windows desktop, right-click the <span class="guiicon">My
              Computer</span> icon, and select
                            <span class="guimenuitem">Properties</span>.
                        </p><p style="color:blue;">在Windows桌面上，右键单击“我的电脑”图标，然后选择“属性”。</p></li><li class="listitem"><p>
                            Select the <span class="guimenuitem">Advanced</span> tab from
                            the <span class="guimenu">System Properties</span> menu that
                            appears, and click the <span class="guibutton">Environment
              Variables</span> button.
                        </p><p style="color:blue;">从出现的“系统属性”菜单中选择“高级”选项卡，然后单击“环境变量”按钮。</p></li><li class="listitem"><p>
                            Under <span class="guilabel">System Variables</span>, select
                            <span class="guimenuitem">Path</span>, then click the
                            <span class="guibutton">Edit</span> button. The <span class="guimenu">Edit
              System Variable</span> dialogue should appear.
                        </p><p style="color:blue;">在“系统变量”下，选择“路径”，然后单击“编辑”按钮。应出现“编辑系统变量”对话框。</p></li><li class="listitem"><p>
                            Add <code class="literal">';C:\OpenSSL-Win32\bin'</code> to the end
                            (notice the semicolon).
                        </p><p style="color:blue;">在末尾添加“；c:\ openssl-win32\bin”（注意分号）。</p></li><li class="listitem"><p>
                            Press OK 3 times.
                        </p><p style="color:blue;">按OK三次。</p></li><li class="listitem"><p>
                            Check that OpenSSL was correctly integrated into the Path
                            variable by opening a new command console
                            (<span class="command"><strong>Start&gt;Run&gt;cmd.exe</strong></span>) and verifying
                            that OpenSSL is available:
                        </p><p style="color:blue;">通过打开新的命令控制台（start&gt;run&gt;cmd.exe）并验证openssl是否可用，检查openssl是否已正确集成到path变量中：</p><pre data-lang="terminal" class="programlisting">Microsoft Windows [Version ...]
Copyright (c) 2006 Microsoft Corporation. All rights reserved.

C:\Windows\system32&gt;<strong class="userinput"><code>cd \</code></strong>

C:\&gt;<strong class="userinput"><code>openssl</code></strong>
OpenSSL&gt; <strong class="userinput"><code>exit</code></strong> &lt;&lt;&lt; If you see the OpenSSL prompt, installation was successful.

C:\&gt;
</pre></li></ol>
                    </div>
                    <p>
                        After OpenSSL has been installed, use instructions similar to
                        those from Example 1 (shown earlier in this section), with the
                        following changes:
                    </p><p style="color:blue;">安装openssl后，使用与示例1（本节前面所示）类似的说明，并进行以下更改：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Change the following Unix commands:
                        </p><p style="color:blue;">更改以下UNIX命令：</p><pre data-lang="terminal" class="programlisting"># Create clean environment
rm -rf newcerts
mkdir newcerts &amp;&amp; cd newcerts
</pre><p>
                            On Windows, use these commands instead:
                        </p><p style="color:blue;">在Windows上，请改用以下命令：</p><pre data-lang="terminal" class="programlisting"># Create clean environment
md c:\newcerts
cd c:\newcerts
</pre></li><li class="listitem"><p>
                            When a <code class="literal">'\'</code> character is shown at the
                            end of a command line, this <code class="literal">'\'</code>
                            character must be removed and the command lines entered
                            all on a single line.
                        </p><p style="color:blue;">当在命令行末尾显示“\”字符时，必须删除此“\”字符，并且命令行都在一行中输入。</p></li></ul>
                    </div>
                    <p>
                        After generating the certificate and key files, to use them
                        for SSL connections, see
                        <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                    </p><p style="color:blue;">生成证书和密钥文件后，要将它们用于ssl连接，请参阅6.3.1节“将mysql配置为使用加密连接”。</p>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="creating-rsa-files-using-openssl"></a>6.3.3.3&nbsp;Creating RSA Keys Using openssl</h4>

                        </div>

                    </div>

                </div>
                <p>
                    This section describes how to use the <span class="command"><strong>openssl</strong></span>
                    command to set up the RSA key files that enable MySQL to support
                    secure password exchange over unencrypted connections for
                    accounts authenticated by the <code class="literal">sha256_password</code>
                    plugin.
                </p><p style="color:blue;">本节介绍如何使用openssl命令设置rsa密钥文件，使mysql能够通过sha256_密码插件验证的帐户的未加密连接支持安全密码交换。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        There are easier alternatives to generating the files required
                        for RSA than the procedure described here: Let the server
                        autogenerate them or use the
                        <a class="link" href="programs.html#mysql-ssl-rsa-setup" title="4.4.5&nbsp;mysql_ssl_rsa_setup — Create SSL/RSA Files"><span class="command"><strong>mysql_ssl_rsa_setup</strong></span></a> program. See
                        <a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql" title="6.3.3.1&nbsp;Creating SSL and RSA Certificates and Keys using MySQL">Section&nbsp;6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>.
                    </p><p style="color:blue;">与这里描述的过程相比，生成rsa所需的文件有更简单的替代方法：让服务器自动生成文件或使用mysql_ssl_rsa_安装程序。参见第6.3.3.1节“使用mysql创建ssl和rsa证书和密钥”。</p>
                </div>
                <p>
                    To create the RSA private and public key-pair files, run these
                    commands while logged into the system account used to run the
                    MySQL server so the files will be owned by that account:
                </p><p style="color:blue;">要创建rsa私钥和公钥对文件，请在登录到用于运行mysql服务器的系统帐户时运行以下命令，以便该帐户拥有这些文件：</p><pre data-lang="terminal" class="programlisting">openssl genrsa -out private_key.pem 2048
openssl rsa -in private_key.pem -pubout -out public_key.pem
</pre><p>
                Those commands create 2,048-bit keys. To create stronger keys,
                use a larger value.
            </p><p style="color:blue;">这些命令创建2048位密钥。若要创建更强的关键点，请使用更大的值。</p><p>
                Then set the access modes for the key files. The private key
                should be readable only by the server, whereas the public key
                can be freely distributed to client users:
            </p><p style="color:blue;">然后设置密钥文件的访问模式。私钥只能由服务器读取，而公钥可以自由分发给客户端用户：</p><pre data-lang="terminal" class="programlisting">chmod 400 private_key.pem
chmod 444 public_key.pem
</pre>
            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="ssl-libraries"></a>6.3.4&nbsp;SSL Library-Dependent Capabilities</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286886691472"></a><a class="indexterm" name="idm140286886690032"></a><a class="indexterm" name="idm140286886688544"></a><p>
            MySQL can be compiled using OpenSSL or yaSSL, both of which enable
            encrypted connections based on the OpenSSL API:
        </p><p style="color:blue;">mysql可以使用openssl或yassl进行编译，这两种方法都支持基于openssl api的加密连接：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    MySQL Enterprise Edition binary distributions are compiled using OpenSSL. It is
                    not possible to use yaSSL with MySQL Enterprise Edition.
                </p><p style="color:blue;">mysql企业版二进制发行版是使用openssl编译的。无法将yassl与mysql企业版一起使用。</p></li><li class="listitem"><p>
                    MySQL Community Edition binary distributions are compiled
                    using yaSSL.
                </p><p style="color:blue;">mysql community edition二进制发行版是使用yassl编译的。</p></li><li class="listitem"><p>
                    MySQL Community Edition source distributions can be compiled
                    using either OpenSSL or yaSSL (see
                    <a class="xref" href="installing.html#source-ssl-library-configuration" title="2.9.6&nbsp;Configuring SSL Library Support">Section&nbsp;2.9.6, “Configuring SSL Library Support”</a>).
                </p><p style="color:blue;">mysql community edition源发行版可以使用openssl或yassl进行编译（请参阅2.9.6节，“配置ssl库支持”）。</p></li></ul>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                <div class="admon-title">
                    Note
                </div>
                <p>
                    It is possible to compile MySQL using yaSSL as an alternative to
                    OpenSSL only prior to MySQL 5.7.28. As of MySQL 5.7.28, support
                    for yaSSL is removed and all MySQL builds use OpenSSL.
                </p><p style="color:blue;">只有在mysql 5.7.28之前，才有可能使用yassl作为openssl的替代品编译mysql。从mysql 5.7.28开始，对yassl的支持被删除，所有mysql构建都使用openssl。</p>
            </div>
            <p>
                OpenSSL and yaSSL offer the same basic functionality, but MySQL
                distributions compiled using OpenSSL have additional features:
            </p><p style="color:blue;">openssl和yassl提供了相同的基本功能，但是使用openssl编译的mysql发行版具有其他功能：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    OpenSSL supports TLSv1, TLSv1.1, and TLSv1.2 protocols. yaSSL
                    supports only TLSv1 and TLSv1.1 protocols.
                </p><p style="color:blue;">openssl支持tlsv1、tlsv1.1和tlsv1.2协议。yassl只支持tlsv1和tlsv1.1协议。</p></li><li class="listitem"><p>
                    OpenSSL supports a more flexible syntax for specifying ciphers
                    for the <a class="link" href="programs.html#option_general_ssl-cipher"><code class="option">--ssl-cipher</code></a> option,
                    and supports a wider range of encryption ciphers from which to
                    choose. See <a class="xref" href="programs.html#encrypted-connection-options" title="Command Options for Encrypted Connections">Command Options for Encrypted Connections</a>,
                    and <a class="xref" href="security.html#encrypted-connection-protocols-ciphers" title="6.3.2&nbsp;Encrypted Connection TLS Protocols and Ciphers">Section&nbsp;6.3.2, “Encrypted Connection TLS Protocols and Ciphers”</a>.
                </p><p style="color:blue;">OpenSSL支持为SSL密码选项指定密码的更灵活的语法，并支持更广泛范围的加密密码。请参阅加密连接的命令选项和第6.3.2节“加密连接TLS协议和密码”。</p></li><li class="listitem"><p>
                    OpenSSL supports the
                    <a class="link" href="programs.html#option_general_ssl-capath"><code class="option">--ssl-capath</code></a>. MySQL
                    distributions compiled using yaSSL do not because yaSSL does
                    not look in any directory and do not follow a chained
                    certificate tree. yaSSL requires that all components of the CA
                    certificate tree be contained within a single CA certificate
                    tree and that each certificate in the file has a unique
                    SubjectName value. To work around this limitation, concatenate
                    the individual certificate files comprising the certificate
                    tree into a new file and specify that file as the value of the
                    <a class="link" href="programs.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> option.
                </p><p style="color:blue;">openssl支持--ssl capath。使用yassl编译的mysql发行版并不是因为yassl不在任何目录中，也不遵循链接的证书树。yassl要求ca证书树的所有组件都包含在一个ca证书树中，并且文件中的每个证书都有一个唯一的subjectname值。要解决此限制，请将组成证书树的各个证书文件连接到一个新文件中，并将该文件指定为--ssl ca选项的值。</p></li><li class="listitem"><p>
                    OpenSSL supports the
                    <a class="link" href="programs.html#option_general_ssl-crl"><code class="option">--ssl-crl</code></a>, and
                    <a class="link" href="programs.html#option_general_ssl-crlpath"><code class="option">--ssl-crlpath</code></a> options.
                    Distributions compiled using yaSSL do not because revocation
                    lists do not work with yaSSL. (yaSSL accepts these options but
                    silently ignores them.)
                </p><p style="color:blue;">openssl支持--ssl crl和--ssl crlpath选项。使用yassl编译的发行版不能使用，因为吊销列表不能与yassl一起使用。（Yassl接受这些选项，但默默地忽略它们。）</p></li><li class="listitem"><p>
                    Accounts that authenticate using the
                    <code class="literal">sha256_password</code> plugin can use RSA key
                    files for secure password exchange over unencrypted
                    connections. See
                    <a class="xref" href="security.html#sha256-pluggable-authentication" title="6.4.1.5&nbsp;SHA-256 Pluggable Authentication">Section&nbsp;6.4.1.5, “SHA-256 Pluggable Authentication”</a>.
                </p><p style="color:blue;">使用SHA256密码插件进行身份验证的帐户可以使用RSA密钥文件在未加密的连接上进行安全密码交换。见第6.4.1.5节，“SHA-256可插拔认证”。</p></li><li class="listitem"><p>
                    The server can automatically generate missing SSL and RSA
                    certificate and key files at startup. See
                    <a class="xref" href="security.html#creating-ssl-rsa-files-using-mysql" title="6.3.3.1&nbsp;Creating SSL and RSA Certificates and Keys using MySQL">Section&nbsp;6.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”</a>.
                </p><p style="color:blue;">服务器可以在启动时自动生成缺少的ssl和rsa证书及密钥文件。参见第6.3.3.1节“使用mysql创建ssl和rsa证书和密钥”。</p></li><li class="listitem"><p>
                    OpenSSL supports more encryption modes for the
                    <a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a> and
                    <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a> functions. See
                    <a class="xref" href="functions.html#encryption-functions" title="12.13&nbsp;Encryption and Compression Functions">Section&nbsp;12.13, “Encryption and Compression Functions”</a>
                </p><p style="color:blue;">openssl支持aes_encrypt（）和aes_decrypt（）函数的更多加密模式。见第12.13节“加密和压缩功能”</p></li></ul>
            </div>
            <a class="indexterm" name="idm140286886662016"></a><a class="indexterm" name="idm140286886660560"></a><p>
            Certain OpenSSL-related system and status variables are present
            only if MySQL was compiled using OpenSSL:
        </p><p style="color:blue;">只有使用openssl编译mysql时，才会出现某些与openssl相关的系统和状态变量：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="server-administration.html#sysvar_auto_generate_certs"><code class="literal">auto_generate_certs</code></a>
                </p><p style="color:blue;">自动生成证书</p></li><li class="listitem"><p>
                    <a class="link" href="server-administration.html#sysvar_sha256_password_auto_generate_rsa_keys"><code class="literal">sha256_password_auto_generate_rsa_keys</code></a>
                </p><p style="color:blue;">sha256_password_auto_generate_rsa_密钥</p></li><li class="listitem"><p>
                    <a class="link" href="server-administration.html#sysvar_sha256_password_private_key_path"><code class="literal">sha256_password_private_key_path</code></a>
                </p><p style="color:blue;">sha256_password_private_key_路径</p></li><li class="listitem"><p>
                    <a class="link" href="server-administration.html#sysvar_sha256_password_public_key_path"><code class="literal">sha256_password_public_key_path</code></a>
                </p><p style="color:blue;">sha256_password_public_key_路径</p></li><li class="listitem"><p>
                    <a class="link" href="server-administration.html#statvar_Rsa_public_key"><code class="literal">Rsa_public_key</code></a>
                </p><p style="color:blue;">RSA_公钥</p></li></ul>
            </div>
            <p>
                To determine whether a server was compiled using OpenSSL, test the
                existence of any of those variables. For example, this statement
                returns a row if OpenSSL was used and an empty result if yaSSL was
                used:
            </p><p style="color:blue;">为了确定是否使用OpenSSL编译服务器，测试这些变量中的任何一个变量的存在。例如，如果使用openssl，则此语句返回一行；如果使用yassl，则返回空结果：</p><pre data-lang="sql" class="programlisting">SHOW STATUS LIKE 'Rsa_public_key';
</pre>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="windows-and-ssh"></a>6.3.5&nbsp;Connecting to MySQL Remotely from Windows with SSH</h3>

                    </div>

                </div>

            </div>
            <a class="indexterm" name="idm140286886645232"></a><a class="indexterm" name="idm140286886644224"></a><a class="indexterm" name="idm140286886642736"></a><p>
            This section describes how to get an encrypted connection to a
            remote MySQL server with SSH. The information was provided by
            David Carlson <code class="email">&lt;<a class="email" href="mailto:dcarlson@mplcomm.com">dcarlson@mplcomm.com</a>&gt;</code>.
        </p><p style="color:blue;">本节介绍如何使用ssh获得到远程mysql服务器的加密连接。该信息由david carlson<dcarlson@mplcomm.com>提供。</dcarlson@mplcomm.com></p>
            <div class="orderedlist">
                <ol class="orderedlist" type="1"><li class="listitem"><p>
                    Install an SSH client on your Windows machine. For a
                    comparison of SSH clients, see
                    <a class="ulink" href="http://en.wikipedia.org/wiki/Comparison_of_SSH_clients" target="_top">http://en.wikipedia.org/wiki/Comparison_of_SSH_clients</a>.
                </p><p style="color:blue;">在windows计算机上安装ssh客户端。有关ssh客户端的比较，请参见http://en.wikipedia.org/wiki/comparison-of-ssh-u clients。</p></li><li class="listitem"><p>
                    Start your Windows SSH client. Set <code class="literal">Host_Name =
                    <em class="replaceable"><code>yourmysqlserver_URL_or_IP</code></em></code>.
                    Set
                    <code class="literal">userid=<em class="replaceable"><code>your_userid</code></em></code>
                    to log in to your server. This <code class="literal">userid</code> value
                    might not be the same as the user name of your MySQL account.
                </p><p style="color:blue;">启动windows ssh客户端。设置主机名=mysqlserver URL或IP。设置userid=要登录到服务器的用户id。此userid值可能与mysql帐户的用户名不同。</p></li><li class="listitem"><p>
                    Set up port forwarding. Either do a remote forward (Set
                    <code class="literal">local_port: 3306</code>, <code class="literal">remote_host:
                    <em class="replaceable"><code>yourmysqlservername_or_ip</code></em></code>,
                    <code class="literal">remote_port: 3306</code> ) or a local forward (Set
                    <code class="literal">port: 3306</code>, <code class="literal">host:
                    localhost</code>, <code class="literal">remote port: 3306</code>).
                </p><p style="color:blue;">设置端口转发。执行远程转发（设置本地端口：3306，远程主机：mysqlservername或IP，远程端口：3306）或本地转发（设置端口：3306，主机：本地主机，远程端口：3306）。</p></li><li class="listitem"><p>
                    Save everything, otherwise you will have to redo it the next
                    time.
                </p><p style="color:blue;">把所有的东西都存起来，否则下次就得重做。</p></li><li class="listitem"><p>
                    Log in to your server with the SSH session you just created.
                </p><p style="color:blue;">使用刚刚创建的ssh会话登录到服务器。</p></li><li class="listitem"><p>
                    On your Windows machine, start some ODBC application (such as
                    Access).
                </p><p style="color:blue;">在windows计算机上，启动一些odbc应用程序（如access）。</p></li><li class="listitem"><p>
                    Create a new file in Windows and link to MySQL using the ODBC
                    driver the same way you normally do, except type in
                    <code class="literal">localhost</code> for the MySQL host server, not
                    <em class="replaceable"><code>yourmysqlservername</code></em>.
                </p><p style="color:blue;">在windows中创建一个新文件并使用odbc驱动程序链接到mysql，方法与通常相同，只是为mysql主机服务器键入localhost，而不是mysqlservername。</p></li></ol>
            </div>
            <p>
                At this point, you should have an ODBC connection to MySQL,
                encrypted using SSH.
            </p><p style="color:blue;">此时，您应该有一个到mysql的odbc连接，使用ssh加密。</p>
        </div>

    </div>
    <div class="section">
        <div class="titlepage">
            <div>
                <div>
                    <h2 class="title" style="clear: both"><a name="security-plugins"></a>6.4&nbsp;Security Plugins</h2>

                </div>

            </div>

        </div>
        <div class="toc">
            <dl class="toc"><dt><span class="section"><a href="security.html#authentication-plugins">6.4.1 Authentication Plugins</a></span></dt><dt><span class="section"><a href="security.html#connection-control">6.4.2 The Connection-Control Plugins</a></span></dt><dt><span class="section"><a href="security.html#validate-password">6.4.3 The Password Validation Plugin</a></span></dt><dt><span class="section"><a href="security.html#keyring">6.4.4 The MySQL Keyring</a></span></dt><dt><span class="section"><a href="security.html#audit-log">6.4.5 MySQL Enterprise Audit</a></span></dt><dt><span class="section"><a href="security.html#firewall">6.4.6 MySQL Enterprise Firewall</a></span></dt><dt><span class="section"><a href="security.html#data-masking">6.4.7 MySQL Enterprise Data Masking and De-Identification</a></span></dt></dl>
        </div>
        <a class="indexterm" name="idm140286886622512"></a><a class="indexterm" name="idm140286886621024"></a><p>
        MySQL includes several plugins that implement security features:
    </p><p style="color:blue;">MySQL包含几个实现安全功能的插件：</p>
        <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                Plugins for authenticating attempts by clients to connect to
                MySQL Server. Plugins are available for several authentication
                protocols. For general discussion of the authentication process,
                see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. For
                characteristics of specific authentication plugins, see
                <a class="xref" href="security.html#authentication-plugins" title="6.4.1&nbsp;Authentication Plugins">Section&nbsp;6.4.1, “Authentication Plugins”</a>.
            </p><p style="color:blue;">用于验证客户端连接到mysql服务器的尝试的插件。插件可用于多种身份验证协议。有关身份验证过程的一般讨论，请参见第6.2.13节“可插入身份验证”。有关特定身份验证插件的特性，请参见第6.4.1节“身份验证插件”。</p></li><li class="listitem"><p>
                A password-validation plugin for implementing password strength
                policies and assessing the strength of potential passwords. See
                <a class="xref" href="security.html#validate-password" title="6.4.3&nbsp;The Password Validation Plugin">Section&nbsp;6.4.3, “The Password Validation Plugin”</a>.
            </p><p style="color:blue;">用于实现密码强度策略和评估潜在密码强度的密码验证插件。参见第6.4.3节“密码验证插件”。</p></li><li class="listitem"><p>
                Keyring plugins that provide secure storage for sensitive
                information. See <a class="xref" href="security.html#keyring" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, “The MySQL Keyring”</a>.
            </p><p style="color:blue;">为敏感信息提供安全存储的keyring插件。参见第6.4.4节“mysql密钥环”。</p></li><li class="listitem"><p>
                (MySQL Enterprise Edition only) MySQL Enterprise Audit, implemented using a server plugin, uses
                the open MySQL Audit API to enable standard, policy-based
                monitoring and logging of connection and query activity executed
                on specific MySQL servers. Designed to meet the Oracle audit
                specification, MySQL Enterprise Audit provides an out of box, easy to use
                auditing and compliance solution for applications that are
                governed by both internal and external regulatory guidelines.
                See <a class="xref" href="security.html#audit-log" title="6.4.5&nbsp;MySQL Enterprise Audit">Section&nbsp;6.4.5, “MySQL Enterprise Audit”</a>.
            </p><p style="color:blue;">（仅限mysql企业版）mysql企业审计使用服务器插件实现，使用openmysql审计api实现对特定mysql服务器上执行的连接和查询活动的标准、基于策略的监视和日志记录。mysql enterprise audit是为满足oracle审计规范而设计的，它为同时受内部和外部监管准则约束的应用程序提供了一个开箱即用、易于使用的审计和法规遵从性解决方案。见第6.4.5节“MySQL企业审计”。</p></li><li class="listitem"><p>
                (MySQL Enterprise Edition only) MySQL Enterprise Firewall, an application-level firewall that enables
                database administrators to permit or deny SQL statement
                execution based on matching against whitelists of accepted
                statement patterns. This helps harden MySQL Server against
                attacks such as SQL injection or attempts to exploit
                applications by using them outside of their legitimate query
                workload characteristics. See <a class="xref" href="security.html#firewall" title="6.4.6&nbsp;MySQL Enterprise Firewall">Section&nbsp;6.4.6, “MySQL Enterprise Firewall”</a>.
            </p><p style="color:blue;">（仅限mysql enterprise edition）mysql enterprise firewall，一种应用程序级防火墙，使数据库管理员能够根据与已接受的语句模式白名单的匹配来允许或拒绝sql语句的执行。这有助于加强mysql服务器抵御诸如sql注入之类的攻击，或者通过在合法的查询工作负载特征之外使用应用程序来利用它们。参见第6.4.6节“MySQL企业防火墙”。</p></li><li class="listitem"><p>
                (MySQL Enterprise Edition only) MySQL Enterprise Data Masking and De-Identification, implemented as a plugin library
                containing a plugin and a set of user-defined functions. Data
                masking hides sensitive information by replacing real values
                with substitutes. MySQL Enterprise Data Masking and De-Identification functions enable masking existing
                data using several methods such as obfuscation (removing
                identifying characteristics), generation of formatted random
                data, and data replacement or substitution. See
                <a class="xref" href="security.html#data-masking" title="6.4.7&nbsp;MySQL Enterprise Data Masking and De-Identification">Section&nbsp;6.4.7, “MySQL Enterprise Data Masking and De-Identification”</a>.
            </p><p style="color:blue;">（仅限mysql企业版）mysql企业数据屏蔽和反标识，实现为包含插件和一组用户定义函数的插件库。数据屏蔽通过用替换替换真实值来隐藏敏感信息。MySQL企业数据掩蔽和去识别功能能够使用诸如混淆（删除标识特征）、生成格式化随机数据、以及数据替换或替换等多种方法来屏蔽现有数据。参见第6.4.7节“MySQL企业数据屏蔽和反标识”。</p></li></ul>
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="authentication-plugins"></a>6.4.1&nbsp;Authentication Plugins</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#native-pluggable-authentication">6.4.1.1 Native Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#old-native-pluggable-authentication">6.4.1.2 Old Native Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#account-upgrades">6.4.1.3 Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password
Plugin</a></span></dt><dt><span class="section"><a href="security.html#caching-sha2-pluggable-authentication">6.4.1.4 Caching SHA-2 Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#sha256-pluggable-authentication">6.4.1.5 SHA-256 Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#cleartext-pluggable-authentication">6.4.1.6 Client-Side Cleartext Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#pam-pluggable-authentication">6.4.1.7 PAM Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#windows-pluggable-authentication">6.4.1.8 Windows Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#ldap-pluggable-authentication">6.4.1.9 LDAP Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#no-login-pluggable-authentication">6.4.1.10 No-Login Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#socket-pluggable-authentication">6.4.1.11 Socket Peer-Credential Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#test-pluggable-authentication">6.4.1.12 Test Pluggable Authentication</a></span></dt><dt><span class="section"><a href="security.html#pluggable-authentication-system-variables">6.4.1.13 Pluggable Authentication System Variables</a></span></dt></dl>
            </div>
            <p>
                The following sections describe pluggable authentication methods
                available in MySQL and the plugins that implement these methods.
                For general discussion of the authentication process, see
                <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
            </p><p style="color:blue;">以下部分描述mysql中可用的可插入身份验证方法以及实现这些方法的插件。有关身份验证过程的一般讨论，请参见第6.2.13节“可插入身份验证”。</p><p>
            The default plugin is indicated by the value of the
            <a class="link" href="server-administration.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
            system variable.
        </p><p style="color:blue;">默认插件由default_authentication_plugin系统变量的值指示。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="native-pluggable-authentication"></a>6.4.1.1&nbsp;Native Pluggable Authentication</h4>
                        </div>
                    </div>
                </div>
                <a class="indexterm" name="idm140286886601824"></a><a class="indexterm" name="idm140286886600720"></a><p>
                MySQL includes two plugins that implement native authentication;
                that is, authentication based on the password hashing methods in
                use from before the introduction of pluggable authentication.
                This section describes <code class="literal">mysql_native_password</code>,
                which implements authentication against the
                <code class="literal">mysql.user</code> system table using the native
                password hashing method. For information about
                <code class="literal">mysql_old_password</code>, which implements
                authentication using the older (pre-4.1) native password hashing
                method, see
                <a class="xref" href="security.html#old-native-pluggable-authentication" title="6.4.1.2&nbsp;Old Native Pluggable Authentication">Section&nbsp;6.4.1.2, “Old Native Pluggable Authentication”</a>. For
                information about these password hashing methods, see
                <a class="xref" href="security.html#password-hashing" title="6.1.2.4&nbsp;Password Hashing in MySQL">Section&nbsp;6.1.2.4, “Password Hashing in MySQL”</a>.
            </p><p style="color:blue;">mysql包含两个实现本机身份验证的插件，即在引入可插入身份验证之前使用的基于密码散列方法的身份验证。本节介绍mysql_native_password，它使用本机密码散列方法实现对mysql.user系统表的身份验证。有关mysql_old_password（它使用旧的（4.1之前的）本机密码散列方法实现身份验证）的信息，请参阅6.4.1.2节“旧的本机可插拔身份验证”。有关这些密码散列方法的信息，请参阅6.1.2.4节“MySQL中的密码散列”。</p><p>
                The following table shows the plugin names on the server and
                client sides.
            </p><p style="color:blue;">下表显示了服务器端和客户端的插件名称。</p>
                <div class="table">
                    <a name="idm140286886594240"></a><p class="title"><b>Table&nbsp;6.8&nbsp;Plugin and Library Names for Native Password Authentication</b></p><p style="color:blue;">表6.8本机密码验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for native password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">mysql_native_password</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">mysql_native_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td>None (plugins are built in)</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to native pluggable authentication:
            </p><p style="color:blue;">以下部分提供特定于本机可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#native-pluggable-authentication-installation" title="Installing Native Pluggable Authentication">Installing Native Pluggable Authentication</a></p><p style="color:blue;">安装本机可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#native-pluggable-authentication-usage" title="Using Native Pluggable Authentication">Using Native Pluggable Authentication</a></p><p style="color:blue;">使用本机可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="native-pluggable-authentication-installation"></a>Installing Native Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        The <code class="literal">mysql_native_password</code> plugin exists in
                        server and client forms:
                    </p><p style="color:blue;">MySQL LNATEVEL密码插件存在于服务器和客户端形式中：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The server-side plugin is built into the server, need not
                            be loaded explicitly, and cannot be disabled by unloading
                            it.
                        </p><p style="color:blue;">服务器端插件内置在服务器中，不需要显式加载，也不能通过卸载禁用。</p></li><li class="listitem"><p>
                            The client-side plugin is built into the
                            <code class="literal">libmysqlclient</code> client library and is
                            available to any program linked against
                            <code class="literal">libmysqlclient</code>.
                        </p><p style="color:blue;">客户端插件内置在libmysqlclient客户端库中，可用于任何链接到libmysqlclient的程序。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="native-pluggable-authentication-usage"></a>Using Native Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL client programs use
                        <code class="literal">mysql_native_password</code> by default. The
                        <a class="link" href="programs.html#option_mysql_default-auth"><code class="option">--default-auth</code></a> option can be
                        used as a hint about which client-side plugin the program can
                        expect to use:
                    </p><p style="color:blue;">mysql客户端程序默认使用mysql本地密码。--default auth选项可用于提示程序可以使用哪个客户端插件：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --default-auth=mysql_native_password ...</code></strong>
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="old-native-pluggable-authentication"></a>6.4.1.2&nbsp;Old Native Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286886563200"></a><a class="indexterm" name="idm140286886562096"></a><p>
                MySQL includes two plugins that implement native authentication;
                that is, authentication based on the password hashing methods in
                use from before the introduction of pluggable authentication.
                This section describes <code class="literal">mysql_old_password</code>,
                which implements authentication against the
                <code class="literal">mysql.user</code> system table using the older
                (pre-4.1) native password hashing method. For information about
                <code class="literal">mysql_native_password</code>, which implements
                authentication using the native password hashing method, see
                <a class="xref" href="security.html#native-pluggable-authentication" title="6.4.1.1&nbsp;Native Pluggable Authentication">Section&nbsp;6.4.1.1, “Native Pluggable Authentication”</a>. For
                information about these password hashing methods, see
                <a class="xref" href="security.html#password-hashing" title="6.1.2.4&nbsp;Password Hashing in MySQL">Section&nbsp;6.1.2.4, “Password Hashing in MySQL”</a>.
            </p><p style="color:blue;">mysql包含两个实现本机身份验证的插件，即在引入可插入身份验证之前使用的基于密码散列方法的身份验证。本节介绍mysql_old_password，它使用旧的（4.1之前的）本机密码散列方法实现对mysql.user系统表的身份验证。有关mysql_native_password（使用本机密码散列方法实现身份验证）的信息，请参阅第6.4.1.1节“本机可插拔身份验证”。有关这些密码散列方法的信息，请参阅6.1.2.4节“MySQL中的密码散列”。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Passwords that use the pre-4.1 hashing method are less secure
                        than passwords that use the native password hashing method and
                        should be avoided. Pre-4.1 passwords are deprecated and
                        support for them (including the
                        <code class="literal">mysql_old_password</code> plugin) was removed in
                        MySQL 5.7.5. For account upgrade instructions, see
                        <a class="xref" href="security.html#account-upgrades" title="6.4.1.3&nbsp;Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password Plugin">Section&nbsp;6.4.1.3, “Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password
                            Plugin”</a>.
                    </p><p style="color:blue;">使用pre-4.1散列方法的密码比使用本机密码散列方法的密码安全性低，应予以避免。不推荐使用4.1之前的密码，在mysql 5.7.5中已删除对它们的支持（包括mysql_old_password插件）。有关帐户升级的说明，请参阅6.4.1.3节，“从4.1之前的密码散列和mysql旧密码插件迁移”。</p>
                </div>
                <p>
                    The following table shows the plugin names on the server and
                    client sides.
                </p><p style="color:blue;">下表显示了服务器端和客户端的插件名称。</p>
                <div class="table">
                    <a name="idm140286886553104"></a><p class="title"><b>Table&nbsp;6.9&nbsp;Plugin and Library Names for Old Native Password Authentication</b></p><p style="color:blue;">表6.9旧本机密码验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for old native password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">mysql_old_password</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">mysql_old_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td>None (plugins are built in)</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to old native pluggable authentication:
            </p><p style="color:blue;">以下部分提供特定于旧的本机可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#old-native-pluggable-authentication-installation" title="Installing Old Native Pluggable Authentication">Installing Old Native Pluggable Authentication</a></p><p style="color:blue;">安装旧的本机可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#old-native-pluggable-authentication-usage" title="Using Old Native Pluggable Authentication">Using Old Native Pluggable Authentication</a></p><p style="color:blue;">使用旧的本机可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="old-native-pluggable-authentication-installation"></a>Installing Old Native Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        The <code class="literal">mysql_old_password</code> plugin exists in
                        server and client forms:
                    </p><p style="color:blue;">MySqLoOLDIX密码插件存在于服务器和客户端形式中：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The server-side plugin is built into the server, need not
                            be loaded explicitly, and cannot be disabled by unloading
                            it.
                        </p><p style="color:blue;">服务器端插件内置在服务器中，不需要显式加载，也不能通过卸载禁用。</p></li><li class="listitem"><p>
                            The client-side plugin is built into the
                            <code class="literal">libmysqlclient</code> client library and is
                            available to any program linked against
                            <code class="literal">libmysqlclient</code>.
                        </p><p style="color:blue;">客户端插件内置在libmysqlclient客户端库中，可用于任何链接到libmysqlclient的程序。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="old-native-pluggable-authentication-usage"></a>Using Old Native Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL client programs can use the
                        <a class="link" href="programs.html#option_mysql_default-auth"><code class="option">--default-auth</code></a> option to specify
                        the <code class="literal">mysql_old_password</code> plugin as a hint
                        about which client-side plugin the program can expect to use:
                    </p><p style="color:blue;">mysql客户端程序可以使用--default auth选项指定mysql_old_password插件，作为程序可以使用哪个客户端插件的提示：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --default-auth=mysql_old_password ...</code></strong>
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="account-upgrades"></a>6.4.1.3&nbsp;Migrating Away from Pre-4.1 Password Hashing and the mysql_old_password
                                Plugin</h4>
                        </div>
                    </div>
                </div>
                <p>
                    The MySQL server authenticates connection attempts for each
                    account listed in the <code class="literal">mysql.user</code> system table
                    using the authentication plugin named in the
                    <code class="literal">plugin</code> column. If the
                    <code class="literal">plugin</code> column is empty, the server
                    authenticates the account as follows:
                </p><p style="color:blue;">mysql服务器使用plugin列中命名的身份验证插件对mysql.user系统表中列出的每个帐户的连接尝试进行身份验证。如果plugin列为空，服务器将按如下方式验证帐户：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Before MySQL 5.7, the server uses the
                        <code class="literal">mysql_native_password</code> or
                        <code class="literal">mysql_old_password</code> plugin implicitly,
                        depending on the format of the password hash in the
                        <code class="literal">Password</code> column. If the
                        <code class="literal">Password</code> value is empty or a 4.1 password
                        hash (41 characters), the server uses
                        <code class="literal">mysql_native_password</code>. If the password
                        value is a pre-4.1 password hash (16 characters), the server
                        uses <code class="literal">mysql_old_password</code>. (For additional
                        information about these hash formats, see
                        <a class="xref" href="security.html#password-hashing" title="6.1.2.4&nbsp;Password Hashing in MySQL">Section&nbsp;6.1.2.4, “Password Hashing in MySQL”</a>.)
                    </p><p style="color:blue;">在mysql 5.7之前，服务器隐式使用mysql本地密码或mysql旧密码插件，具体取决于密码列中密码哈希的格式。如果密码值为空或4.1密码哈希（41个字符），服务器将使用mysql本地密码。如果密码值是4.1之前的密码散列（16个字符），服务器将使用mysql旧密码。（有关这些散列格式的更多信息，请参阅6.1.2.4节，“MySQL中的密码散列”。）</p></li><li class="listitem"><p>
                        As of MySQL 5.7, the server requires the
                        <code class="literal">plugin</code> column to be nonempty and disables
                        accounts that have an empty <code class="literal">plugin</code> value.
                    </p><p style="color:blue;">从mysql 5.7开始，服务器要求plugin列为非空，并禁用具有空plugin值的帐户。</p></li></ul>
                </div>
                <p>
                    Pre-4.1 password hashes and the
                    <code class="literal">mysql_old_password</code> plugin are deprecated in
                    MySQL 5.6 and support for them is removed in MySQL 5.7. They
                    provide a level of security inferior to that offered by 4.1
                    password hashing and the
                    <code class="literal">mysql_native_password</code> plugin.
                </p><p style="color:blue;">mysql 5.6中不推荐使用pre-4.1密码散列和mysql旧密码插件，mysql 5.7中不再支持它们。它们提供的安全级别低于4.1密码散列和mysql本地密码插件提供的安全级别。</p><p>
                Given the requirement in MySQL 5.7 that the
                <code class="literal">plugin</code> column must be nonempty, coupled with
                removal of <code class="literal">mysql_old_password</code> support, DBAs
                are advised to upgrade accounts as follows:
            </p><p style="color:blue;">考虑到mysql 5.7中插件列必须非空的要求，再加上取消mysql旧密码支持，建议dba升级账号如下：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Upgrade accounts that use
                        <code class="literal">mysql_native_password</code> implicitly to use
                        it explicitly
                    </p><p style="color:blue;">将隐式使用mysql本地密码的帐户升级为显式使用</p></li><li class="listitem"><p>
                        Upgrade accounts that use
                        <code class="literal">mysql_old_password</code> (either implicitly or
                        explicitly) to use <code class="literal">mysql_native_password</code>
                        explicitly
                    </p><p style="color:blue;">将使用mysql旧密码（隐式或显式）的帐户升级为显式使用mysql本机密码</p></li></ul>
                </div>
                <p>
                    The instructions in this section describe how to perform those
                    upgrades. The result is that no account has an empty
                    <code class="literal">plugin</code> value and no account uses pre-4.1
                    password hashing or the <code class="literal">mysql_old_password</code>
                    plugin.
                </p><p style="color:blue;">本节中的说明描述了如何执行这些升级。结果是没有帐户的插件值为空，也没有帐户使用4.1之前的密码散列或mysql_old_password插件。</p><p>
                As a variant on these instructions, DBAs might offer users the
                choice to upgrade to the <code class="literal">sha256_password</code>
                plugin, which authenticates using SHA-256 password hashes. For
                information about this plugin, see
                <a class="xref" href="security.html#sha256-pluggable-authentication" title="6.4.1.5&nbsp;SHA-256 Pluggable Authentication">Section&nbsp;6.4.1.5, “SHA-256 Pluggable Authentication”</a>.
            </p><p style="color:blue;">作为这些指令的一种变体，dba可以为用户提供升级到sha256_密码插件的选择，该插件使用sha-256密码散列进行身份验证。有关此插件的信息，请参阅第6.4.1.5节“SHA-256可插拔身份验证”。</p><p>
                The following table lists the types of
                <code class="literal">mysql.user</code> accounts considered in this
                discussion.
            </p><p style="color:blue;">下表列出了讨论中考虑的mysql.user帐户的类型。</p>
                <div class="informaltable">
                    <table summary="Characteristics of MySQL accounts and what must be done to upgrade them."><colgroup><col width="30%"><col width="20%"><col width="30%"><col width="20%"></colgroup><thead><tr>
                        <th scope="col"><code class="literal">plugin</code> Column</th>
                        <th scope="col"><code class="literal">Password</code> Column</th>
                        <th scope="col">Authentication Result</th>
                        <th scope="col">Upgrade Action</th>
                    </tr></thead><tbody><tr>
                        <td scope="row">Empty</td>
                        <td>Empty</td>
                        <td>Implicitly uses <code class="literal">mysql_native_password</code></td>
                        <td>Assign plugin</td>
                    </tr><tr>
                        <td scope="row">Empty</td>
                        <td>4.1 hash</td>
                        <td>Implicitly uses <code class="literal">mysql_native_password</code></td>
                        <td>Assign plugin</td>
                    </tr><tr>
                        <td scope="row">Empty</td>
                        <td>Pre-4.1 hash</td>
                        <td>Implicitly uses <code class="literal">mysql_old_password</code></td>
                        <td>Assign plugin, rehash password</td>
                    </tr><tr>
                        <td scope="row"><code class="literal">mysql_native_password</code></td>
                        <td>Empty</td>
                        <td>Explicitly uses <code class="literal">mysql_native_password</code></td>
                        <td>None</td>
                    </tr><tr>
                        <td scope="row"><code class="literal">mysql_native_password</code></td>
                        <td>4.1 hash</td>
                        <td>Explicitly uses <code class="literal">mysql_native_password</code></td>
                        <td>None</td>
                    </tr><tr>
                        <td scope="row"><code class="literal">mysql_old_password</code></td>
                        <td>Empty</td>
                        <td>Explicitly uses <code class="literal">mysql_old_password</code></td>
                        <td>Upgrade plugin</td>
                    </tr><tr>
                        <td scope="row"><code class="literal">mysql_old_password</code></td>
                        <td>Pre-4.1 hash</td>
                        <td>Explicitly uses <code class="literal">mysql_old_password</code></td>
                        <td>Upgrade plugin, rehash password</td>
                    </tr></tbody></table>
                </div>
                <p>
                    Accounts corresponding to lines for the
                    <code class="literal">mysql_native_password</code> plugin require no
                    upgrade action (because no change of plugin or hash format is
                    required). For accounts corresponding to lines for which the
                    password is empty, consider asking the account owners to choose
                    a password (or require it by using <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER
                    USER</code></a> to expire empty account passwords).
                </p><p style="color:blue;">与mysql_native_password插件行对应的帐户不需要升级操作（因为不需要更改插件或哈希格式）。对于与密码为空的行对应的帐户，请考虑要求帐户所有者选择密码（或使用alter user使空帐户密码过期）。</p>
                <h5><a name="idm140286886448448"></a>Upgrading Accounts from Implicit to Explicit mysql_native_password Use</h5>
                <p>
                    Accounts that have an empty plugin and a 4.1 password hash use
                    <code class="literal">mysql_native_password</code> implicitly. To upgrade
                    these accounts to use <code class="literal">mysql_native_password</code>
                    explicitly, execute these statements:
                </p><p style="color:blue;">具有空插件和4.1密码哈希的帐户隐式使用mysql本地密码。要将这些帐户升级为显式使用mysql_native_密码，请执行以下语句：</p><pre data-lang="sql" class="programlisting">UPDATE mysql.user SET plugin = 'mysql_native_password'
WHERE plugin = '' AND (Password = '' OR LENGTH(Password) = 41);
FLUSH PRIVILEGES;
</pre><p>
                Before MySQL 5.7, you can execute those statements to uprade
                accounts proactively. As of MySQL 5.7, you can run
                <a class="link" href="programs.html#mysql-upgrade" title="4.4.7&nbsp;mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade</strong></span></a>, which performs the same
                operation among its upgrade actions.
            </p><p style="color:blue;">在mysql 5.7之前，您可以执行这些语句来主动升级帐户。从mysql 5.7开始，您可以运行mysql_upgrade，它在其升级操作中执行相同的操作。</p><p>
                Notes:
            </p><p style="color:blue;">笔记：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The upgrade operation just described is safe to execute at
                        any time because it makes the
                        <code class="literal">mysql_native_password</code> plugin explicit
                        only for accounts that already use it implicitly.
                    </p><p style="color:blue;">刚才描述的升级操作在任何时候都可以安全执行，因为它使mysql本地密码插件只对已经隐式使用它的帐户显式。</p></li><li class="listitem"><p>
                        This operation requires no password changes, so it can be
                        performed without affecting users or requiring their
                        involvement in the upgrade process.
                    </p><p style="color:blue;">此操作不需要更改密码，因此可以在不影响用户或不要求用户参与升级过程的情况下执行。</p></li></ul>
                </div>
                <h5><a name="idm140286886439296"></a>Upgrading Accounts from mysql_old_password to mysql_native_password</h5>
                <p>
                    Accounts that use <code class="literal">mysql_old_password</code> (either
                    implicitly or explicitly) should be upgraded to use
                    <code class="literal">mysql_native_password</code> explicitly. This
                    requires changing the plugin <span class="emphasis"><em>and</em></span> changing
                    the password from pre-4.1 to 4.1 hash format.
                </p><p style="color:blue;">应将使用mysql旧密码（隐式或显式）的帐户升级为显式使用mysql本机密码。这需要更改插件并将密码从4.1之前的哈希格式更改为4.1之前的哈希格式。</p><p>
                For the accounts covered in this step that must be upgraded, one
                of these conditions is true:
            </p><p style="color:blue;">对于此步骤中包含的必须升级的帐户，以下条件之一是正确的：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The account uses <code class="literal">mysql_old_password</code>
                        implicitly because the <code class="literal">plugin</code> column is
                        empty and the password has the pre-4.1 hash format (16
                        characters).
                    </p><p style="color:blue;">该帐户隐式使用mysql_old_密码，因为plugin列为空，密码采用4.1之前的哈希格式（16个字符）。</p></li><li class="listitem"><p>
                        The account uses <code class="literal">mysql_old_password</code>
                        explicitly.
                    </p><p style="color:blue;">帐户显式使用mysql旧密码。</p></li></ul>
                </div>
                <p>
                    To identify such accounts, use this query:
                </p><p style="color:blue;">要标识此类帐户，请使用以下查询：</p><pre data-lang="sql" class="programlisting">SELECT User, Host, Password FROM mysql.user
WHERE (plugin = '' AND LENGTH(Password) = 16)
OR plugin = 'mysql_old_password';
</pre><p>
                The following discussion provides two methods for updating that
                set of accounts. They have differing characteristics, so read
                both and decide which is most suitable for a given MySQL
                installation.
            </p><p style="color:blue;">下面的讨论提供了更新该帐户集的两种方法。它们具有不同的特性，因此请阅读并决定哪个最适合给定的mysql安装。</p><p>
                <span class="bold"><strong>Method 1.</strong></span>
            </p><p style="color:blue;">方法1。</p><p>
                Characteristics of this method:
            </p><p style="color:blue;">该方法的特点：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        It requires that server and clients be run with
                        <code class="literal">secure_auth=0</code> until all users have been
                        upgraded to <code class="literal">mysql_native_password</code>.
                        (Otherwise, users cannot connect to the server using their
                        old-format password hashes for the purpose of upgrading to a
                        new-format hash.)
                    </p><p style="color:blue;">它要求服务器和客户端使用secure_auth=0运行，直到所有用户都升级到mysql_native_密码。（否则，用户无法使用其旧格式密码散列连接到服务器，以便升级到新格式散列。）</p></li><li class="listitem"><p>
                        It works for MySQL 5.5 and 5.6. In 5.7, it does not work
                        because the server requires accounts to have a nonempty
                        plugin and disables them otherwise. Therefore, if you have
                        already upgraded to 5.7, choose Method 2, described later.
                    </p><p style="color:blue;">它适用于mysql 5.5和5.6。在5.7中，它不工作，因为服务器要求帐户有一个非空插件，否则禁用它们。因此，如果您已经升级到5.7，请选择后面描述的方法2。</p></li></ul>
                </div>
                <p>
                    You should ensure that the server is running with
                    <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth=0</code></a>.
                </p><p style="color:blue;">您应该确保服务器在secure_auth=0的情况下运行。</p><p>
                For all accounts that use <code class="literal">mysql_old_password</code>
                explicitly, set them to the empty plugin:
            </p><p style="color:blue;">对于所有显式使用mysql旧密码的帐户，请将其设置为空插件：</p><pre data-lang="sql" class="programlisting">UPDATE mysql.user SET plugin = ''
WHERE plugin = 'mysql_old_password';
FLUSH PRIVILEGES;
</pre><p>
                To also expire the password for affected accounts, use these
                statements instead:
            </p><p style="color:blue;">要使受影响帐户的密码过期，请改用以下语句：</p><pre data-lang="sql" class="programlisting">UPDATE mysql.user SET plugin = '', password_expired = 'Y'
WHERE plugin = 'mysql_old_password';
FLUSH PRIVILEGES;
</pre><p>
                Now affected users can reset their password to use 4.1 hashing.
                Ask each user who now has an empty plugin to connect to the
                server and execute these statements:
            </p><p style="color:blue;">现在受影响的用户可以重新设置他们的密码以使用4.1哈希。请现在拥有空插件的每个用户连接到服务器并执行以下语句：</p><pre data-lang="sql" class="programlisting">SET old_passwords = 0;
SET PASSWORD = PASSWORD('<em class="replaceable"><code>user-chosen-password</code></em>');
</pre>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The client-side <a class="link" href="programs.html#option_mysql_secure-auth"><code class="option">--secure-auth</code></a>
                        option is enabled by default, so remind users to disable it or
                        they will be unable to connect:
                    </p><p style="color:blue;">默认情况下，客户端--secure auth选项处于启用状态，因此提醒用户禁用它，否则将无法连接：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u <em class="replaceable"><code>user_name</code></em> -p --secure-auth=0</code></strong>
</pre>
                </div>
                <p>
                    After an affected user has executed those statements, you can
                    set the corresponding account plugin to
                    <code class="literal">mysql_native_password</code> to make the plugin
                    explicit. Or you can periodically run these statements to find
                    and fix any accounts for which affected users have reset their
                    password:
                </p><p style="color:blue;">受影响的用户执行这些语句后，可以将相应的帐户插件设置为mysql_native_password，使插件显式。或者，您可以定期运行这些语句以查找和修复受影响用户已重置其密码的任何帐户：</p><pre data-lang="sql" class="programlisting">UPDATE mysql.user SET plugin = 'mysql_native_password'
WHERE plugin = '' AND (Password = '' OR LENGTH(Password) = 41);
FLUSH PRIVILEGES;
</pre><p>
                When there are no more accounts with an empty plugin, this query
                returns an empty result:
            </p><p style="color:blue;">当没有空插件的帐户时，此查询返回空结果：</p><pre data-lang="sql" class="programlisting">SELECT User, Host, Password FROM mysql.user
WHERE plugin = '' AND LENGTH(Password) = 16;
</pre><p>
                At that point, all accounts have been migrated away from pre-4.1
                password hashing and the server no longer need be run with
                <a class="link" href="server-administration.html#sysvar_secure_auth"><code class="literal">secure_auth=0</code></a>.
            </p><p style="color:blue;">此时，所有帐户都已从4.1之前的密码哈希迁移，服务器不再需要使用secure_auth=0运行。</p><p>
                <span class="bold"><strong>Method 2.</strong></span>
            </p><p style="color:blue;">方法2。</p><p>
                Characteristics of this method:
            </p><p style="color:blue;">该方法的特点：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        It assigns each affected account a new password, so you must
                        tell each such user the new password and ask the user to
                        choose a new one. Communication of passwords to users is
                        outside the scope of MySQL, but should be done carefully.
                    </p><p style="color:blue;">它为每个受影响的帐户分配一个新密码，因此您必须告诉每个此类用户新密码，并要求用户选择一个新密码。与用户的密码通信不在mysql的范围内，但应谨慎进行。</p></li><li class="listitem"><p>
                        It does not require server or clients to be run with
                        <code class="literal">secure_auth=0</code>.
                    </p><p style="color:blue;">它不要求服务器或客户端使用secure_auth=0运行。</p></li><li class="listitem"><p>
                        It works for any version of MySQL 5.5 or later (and for 5.7
                        has an easier variant).
                    </p><p style="color:blue;">它适用于任何版本的mysql 5.5或更高版本（5.7有一个更简单的变体）。</p></li></ul>
                </div>
                <p>
                    With this method, you update each account separately due to the
                    need to set passwords individually. <span class="emphasis"><em>Choose a different
        password for each account.</em></span>
                </p><p style="color:blue;">使用此方法，由于需要单独设置密码，因此需要分别更新每个帐户。为每个帐户选择不同的密码。</p><p>
                Suppose that <code class="literal">'user1'@'localhost'</code> is one of
                the accounts to be upgraded. Modify it as follows:
            </p><p style="color:blue;">假设“user1”@“localhost”是要升级的帐户之一。修改如下：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        In MySQL 5.7, <code class="literal">ALTER USER</code> provides the
                        capability of modifying both the account password and its
                        authentication plugin, so you need not modify the
                        <code class="literal">mysql.user</code> system table directly:
                    </p><p style="color:blue;">在mysql 5.7中，alter user提供了修改账号密码和认证插件的功能，因此不需要直接修改mysql.user系统表：</p><pre data-lang="sql" class="programlisting">ALTER USER 'user1'@'localhost'
IDENTIFIED WITH mysql_native_password BY '<em class="replaceable"><code>DBA-chosen-password</code></em>';
</pre><p>
                        To also expire the account password, use this statement
                        instead:
                    </p><p style="color:blue;">要同时使帐户密码过期，请改用以下语句：</p><pre data-lang="sql" class="programlisting">ALTER USER 'user1'@'localhost'
IDENTIFIED WITH mysql_native_password BY '<em class="replaceable"><code>DBA-chosen-password</code></em>'
PASSWORD EXPIRE;
</pre><p>
                        Then tell the user the new password and ask the user to
                        connect to the server with that password and execute this
                        statement to choose a new password:
                    </p><p style="color:blue;">然后告诉用户新密码，并要求用户使用该密码连接到服务器，然后执行以下语句以选择新密码：</p><pre data-lang="sql" class="programlisting">ALTER USER USER() IDENTIFIED BY '<em class="replaceable"><code>user-chosen-password</code></em>';
</pre></li><li class="listitem"><p>
                        Before MySQL 5.7, you must modify the
                        <code class="literal">mysql.user</code> system table directly using
                        these statements:
                    </p><p style="color:blue;">在mysql 5.7之前，必须使用以下语句直接修改mysql.user系统表：</p><pre data-lang="sql" class="programlisting">SET old_passwords = 0;
UPDATE mysql.user SET plugin = 'mysql_native_password',
Password = PASSWORD('<em class="replaceable"><code>DBA-chosen-password</code></em>')
WHERE (User, Host) = ('user1', 'localhost');
FLUSH PRIVILEGES;
</pre><p>
                        To also expire the account password, use these statements
                        instead:
                    </p><p style="color:blue;">要同时使帐户密码过期，请改用以下语句：</p><pre data-lang="sql" class="programlisting">SET old_passwords = 0;
UPDATE mysql.user SET plugin = 'mysql_native_password',
Password = PASSWORD('<em class="replaceable"><code>DBA-chosen-password</code></em>'), password_expired = 'Y'
WHERE (User, Host) = ('user1', 'localhost');
FLUSH PRIVILEGES;
</pre><p>
                        Then tell the user the new password and ask the user to
                        connect to the server with that password and execute these
                        statements to choose a new password:
                    </p><p style="color:blue;">然后告诉用户新密码，并要求用户使用该密码连接到服务器，然后执行以下语句以选择新密码：</p><pre data-lang="sql" class="programlisting">SET old_passwords = 0;
SET PASSWORD = PASSWORD('<em class="replaceable"><code>user-chosen-password</code></em>');
</pre></li></ul>
                </div>
                <p>
                    Repeat for each account to be upgraded.
                </p><p style="color:blue;">对每个要升级的帐户重复此操作。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="caching-sha2-pluggable-authentication"></a>6.4.1.4&nbsp;Caching SHA-2 Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286886381872"></a><a class="indexterm" name="idm140286886380768"></a><p>
                MySQL provides two authentication plugins that implement SHA-256
                hashing for user account passwords:
            </p><p style="color:blue;">mysql提供了两个身份验证插件，用于实现用户帐户密码的sha-256散列：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">sha256_password</code>: Implements basic SHA-256
                        authentication.
                    </p><p style="color:blue;">sha256_密码：实现基本sha-256身份验证。</p></li><li class="listitem"><p>
                        <code class="literal">caching_sha2_password</code>: Implements SHA-256
                        authentication (like <code class="literal">sha256_password</code>),
                        but uses caching on the server side for better performance
                        and has additional features for wider applicability. (In
                        MySQL 5.7, <code class="literal">caching_sha2_password</code> is
                        implemented only on the client side, as described later in
                        this section.)
                    </p><p style="color:blue;">缓存SHA26U密码：实现SHA-256身份验证（如SHA256U密码），但在服务器端使用缓存以获得更好的性能，并具有更广泛适用性的附加功能。（在mysql 5.7中，缓存密码只在客户端实现，如本节后面所述。）</p></li></ul>
                </div>
                <p>
                    This section describes the caching SHA-2 authentication plugin,
                    available as of MySQL 5.7.23. For information about the original
                    basic (noncaching) plugin, see
                    <a class="xref" href="security.html#sha256-pluggable-authentication" title="6.4.1.5&nbsp;SHA-256 Pluggable Authentication">Section&nbsp;6.4.1.5, “SHA-256 Pluggable Authentication”</a>.
                </p><p style="color:blue;">本节介绍了缓存SHA-2身份验证插件，从MySQL5.7.23开始提供。有关原始基本（非计算机）插件的信息，请参阅第6.4.1.5节“SHA-256可插拔身份验证”。</p>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        In MySQL 5.7, the default authentication plugin is
                        <code class="literal">mysql_native_password</code>. As of MySQL 8.0, the
                        default authentication plugin is changed to
                        <code class="literal">caching_sha2_password</code>. To enable MySQL 5.7
                        clients to connect to 8.0 and higher servers using accounts
                        that authenticate with
                        <code class="literal">caching_sha2_password</code>, the MySQL 5.7 client
                        library and client programs support the
                        <code class="literal">caching_sha2_password</code> client-side
                        authentication plugin. This improves MySQL 5.7 client
                        connect-capability compatibility with respect to MySQL 8.0 and
                        higher servers, despite the differences in default
                        authentication plugin.
                    </p><p style="color:blue;">在mysql 5.7中，默认的身份验证插件是mysql本地密码。从MySQL8.0开始，默认的身份验证插件更改为缓存密码。为了使mysql 5.7客户端能够使用使用缓存密码进行身份验证的帐户连接到8.0及更高版本的服务器，mysql 5.7客户端库和客户端程序支持缓存密码客户端身份验证插件。这提高了mysql 5.7客户端连接功能与mysql 8.0和更高版本服务器的兼容性，尽管默认的身份验证插件有所不同。</p><p>
                    Limiting <code class="literal">caching_sha2_password</code> support in
                    MySQL 5.7 to the client-side plugin in the client library has
                    these implications compared to MySQL 8.0:
                </p><p style="color:blue;">与MySQL8.0相比，将MySQL5.7中的缓存密码支持限制为客户端库中的客户端插件具有以下含义：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The <code class="literal">caching_sha2_password</code> server-side
                            plugin is not implemented in MySQL 5.7.
                        </p><p style="color:blue;">mysql 5.7中没有实现缓存密码服务器端插件。</p></li><li class="listitem"><p>
                            MySQL 5.7 servers do not support creating accounts that
                            authenticate with
                            <code class="literal">caching_sha2_password</code>.
                        </p><p style="color:blue;">mysql 5.7服务器不支持创建使用缓存密码进行身份验证的帐户。</p></li><li class="listitem"><p>
                            MySQL 5.7 servers do not implement system and status
                            variables specific to
                            <code class="literal">caching_sha2_password</code> server-side
                            support:
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_auto_generate_rsa_keys" target="_top"><code class="literal">caching_sha2_password_auto_generate_rsa_keys</code></a>,
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_private_key_path" target="_top"><code class="literal">caching_sha2_password_private_key_path</code></a>,
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_public_key_path" target="_top"><code class="literal">caching_sha2_password_public_key_path</code></a>,
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-status-variables.html#statvar_Caching_sha2_password_rsa_public_key" target="_top"><code class="literal">Caching_sha2_password_rsa_public_key</code></a>.
                        </p><p style="color:blue;">MySQL 5.7服务器不实现特定于缓存密钥的系统和状态变量服务器端支持：缓存密钥自动生成密钥，缓存密钥私有路径，缓存密钥公共路径，缓存密钥公共路径。</p></li></ul>
                    </div>
                    <p>
                        In addition, there is no support for MySQL 5.7 replication
                        slaves to connect to MySQL 8.0 replication masters using
                        accounts that authenticate with
                        <code class="literal">caching_sha2_password</code>. That would involve a
                        master replicating to a slave with a version number lower than
                        the master version, whereas masters normally replicate to
                        slaves having a version equal to or higher than the master
                        version.
                    </p><p style="color:blue;">此外，mysql 5.7复制从属服务器不支持使用使用缓存密码进行身份验证的帐户连接到mysql 8.0复制主服务器。这将涉及到主版本复制到版本号低于主版本的从属版本，而主版本通常复制到版本等于或高于主版本的从属版本。</p>
                </div>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        To connect to a MySQL 8.0 or higher server using an account
                        that authenticates with the
                        <code class="literal">caching_sha2_password</code> plugin, you must use
                        either a secure connection or an unencrypted connection that
                        supports password exchange using an RSA key pair, as described
                        later in this section. Either way, the
                        <code class="literal">caching_sha2_password</code> plugin uses MySQL's
                        encryption capabilities. See
                        <a class="xref" href="security.html#encrypted-connections" title="6.3&nbsp;Using Encrypted Connections">Section&nbsp;6.3, “Using Encrypted Connections”</a>.
                    </p><p style="color:blue;">要使用通过缓存密码插件进行身份验证的帐户连接到MySQL8.0或更高版本的服务器，必须使用安全连接或支持使用RSA密钥对进行密码交换的未加密连接，如本节后面所述。不管怎样，缓存sha2密码插件使用mysql的加密功能。参见第6.3节“使用加密连接”。</p>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        In the name <code class="literal">sha256_password</code>,
                        <span class="quote">“<span class="quote">sha256</span>”</span> refers to the 256-bit digest length the
                        plugin uses for encryption. In the name
                        <code class="literal">caching_sha2_password</code>, <span class="quote">“<span class="quote">sha2</span>”</span>
                        refers more generally to the SHA-2 class of encryption
                        algorithms, of which 256-bit encryption is one instance. The
                        latter name choice leaves room for future expansion of
                        possible digest lengths without changing the plugin name.
                    </p><p style="color:blue;">在sha256_password的名称中，“sha256”是指插件用于加密的256位摘要长度。在缓存sha2密码的名称中，“sha2”通常指的是sha-2类加密算法，其中256位加密是一个实例。后一个名称的选择为将来在不更改插件名称的情况下扩展可能的摘要长度留出了空间。</p>
                </div>
                <p>
                    The <code class="literal">caching_sha2_password</code> plugin has these
                    advantages, compared to <code class="literal">sha256_password</code>:
                </p><p style="color:blue;">与SHA256密码相比，缓存SHA2密码插件具有以下优点：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        On the server side, an in-memory cache enables faster
                        reauthentication of users who have connected previously when
                        they connect again. (This server-side behavior is
                        implemented only in MySQL 8.0 and higher.)
                    </p><p style="color:blue;">在服务器端，内存中的缓存可以在用户再次连接时更快地重新验证以前连接过的用户。（此服务器端行为仅在mysql 8.0及更高版本中实现。）</p></li><li class="listitem"><p>
                        Support is provided for client connections that use the Unix
                        socket-file and shared-memory protocols.
                    </p><p style="color:blue;">支持使用unix套接字文件和共享内存协议的客户端连接。</p></li></ul>
                </div>
                <p>
                    The following table shows the plugin name on the client side.
                </p><p style="color:blue;">下表显示了客户端的插件名称。</p>
                <div class="table">
                    <a name="idm140286886343664"></a><p class="title"><b>Table&nbsp;6.10&nbsp;Plugin and Library Names for SHA-2 Authentication</b></p><p style="color:blue;">表6.10 SHA-2认证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugin and library file used for SHA-2 password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">caching_sha2_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td>None (plugin is built in)</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to caching SHA-2 pluggable authentication:
            </p><p style="color:blue;">以下各节提供了特定于缓存SHA-2可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#caching-sha2-pluggable-authentication-installation" title="Installing SHA-2 Pluggable Authentication">Installing SHA-2 Pluggable Authentication</a></p><p style="color:blue;">安装sha-2可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#caching-sha2-pluggable-authentication-usage" title="Using SHA-2 Pluggable Authentication">Using SHA-2 Pluggable Authentication</a></p><p style="color:blue;">使用sha-2可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#caching-sha2-pluggable-authentication-cache-operation" title="Cache Operation for SHA-2 Pluggable Authentication">Cache Operation for SHA-2 Pluggable Authentication</a></p><p style="color:blue;">sha-2可插拔认证的缓存操作</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="caching-sha2-pluggable-authentication-installation"></a>Installing SHA-2 Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        In MySQL 5.7, the <code class="literal">caching_sha2_password</code>
                        plugin exists in client form. The client-side plugin is built
                        into the <code class="literal">libmysqlclient</code> client library and
                        is available to any program linked against
                        <code class="literal">libmysqlclient</code>.
                    </p><p style="color:blue;">在MySQL 5.7中，CasgIng-Sa2xx密码插件以客户端的形式存在。客户端插件内置在libmysqlclient客户端库中，可用于任何链接到libmysqlclient的程序。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="caching-sha2-pluggable-authentication-usage"></a>Using SHA-2 Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        In MySQL 5.7, the <code class="literal">caching_sha2_password</code>
                        client-side plugin enables connecting to MySQL 8.0 or higher
                        servers using accounts that authenticate with the
                        <code class="literal">caching_sha2_password</code> server-side plugin.
                        The discussion here assumes that an account named
                        <code class="literal">'sha2user'@'localhost'</code> exists on the MySQL
                        8.0 or higher server. For example, the following statement
                        creates such an account, where
                        <em class="replaceable"><code>password</code></em> is the desired account
                        password:
                    </p><p style="color:blue;">在mysql 5.7中，caching垌u password客户端插件允许使用通过caching垌u password服务器端插件验证的帐户连接到mysql 8.0或更高版本的服务器。这里的讨论假设在MySQL 8或更高的服务器上存在一个名为“Sa2Author”@“LoalHOST”的帐户。例如，下面的语句创建这样一个帐户，其中password是所需的帐户密码：</p><pre data-lang="sql" class="programlisting">CREATE USER 'sha2user'@'localhost'
IDENTIFIED WITH caching_sha2_password BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
                    <code class="literal">caching_sha2_password</code> supports connections
                    over secure transport.
                    <code class="literal">caching_sha2_password</code> also supports
                    encrypted password exchange using RSA over unencrypted
                    connections if these conditions are satisfied:
                </p><p style="color:blue;">缓存密码支持通过安全传输进行连接。如果满足以下条件，缓存密码还支持在未加密连接上使用RSA进行加密密码交换：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The MySQL 5.7 client library and client programs are
                            compiled using OpenSSL, not yaSSL.
                            <code class="literal">caching_sha2_password</code> works with
                            distributions compiled using either package, but RSA
                            support requires OpenSSL.
                        </p><p style="color:blue;">mysql 5.7客户端库和客户端程序是使用openssl而不是yassl编译的。缓存密码适用于使用这两个包编译的发行版，但是rsa支持需要openssl。</p>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    It is possible to compile MySQL using yaSSL as an
                                    alternative to OpenSSL only prior to MySQL 5.7.28. As of
                                    MySQL 5.7.28, support for yaSSL is removed and all MySQL
                                    builds use OpenSSL.
                                </p><p style="color:blue;">只有在mysql 5.7.28之前，才有可能使用yassl作为openssl的替代品编译mysql。从mysql 5.7.28开始，对yassl的支持被删除，所有mysql构建都使用openssl。</p>
                            </div>
                        </li><li class="listitem"><p>
                            The MySQL 8.0 or higher server to which you wish to
                            connect is configured to support RSA (using the RSA
                            configuration procedure given later in this section).
                        </p><p style="color:blue;">要连接到的mysql 8.0或更高版本的服务器配置为支持rsa（使用本节后面给出的rsa配置过程）。</p></li></ul>
                    </div>
                    <p>
                        RSA support has these characteristics, where all aspects that
                        pertain to the server side require a MySQL 8.0 or higher
                        server:
                    </p><p style="color:blue;">rsa支持具有以下特点：与服务器端相关的所有方面都需要mysql 8.0或更高版本的服务器：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            On the server side, two system variables name the RSA
                            private and public key-pair files:
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_private_key_path" target="_top"><code class="literal">caching_sha2_password_private_key_path</code></a>
                            and
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_public_key_path" target="_top"><code class="literal">caching_sha2_password_public_key_path</code></a>.
                            The database administrator must set these variables at
                            server startup if the key files to use have names that
                            differ from the system variable default values.
                        </p><p style="color:blue;">在服务器端，有两个系统变量命名rsa私钥和公钥对文件：caching_sha2_password_private_key_path和caching_sha2_password_public_key_path。如果要使用的密钥文件的名称与系统变量默认值不同，则数据库管理员必须在服务器启动时设置这些变量。</p></li><li class="listitem"><p>
                            The server uses the
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_auto_generate_rsa_keys" target="_top"><code class="literal">caching_sha2_password_auto_generate_rsa_keys</code></a>
                            system variable to determine whether to automatically
                            generate the RSA key-pair files. See
                            <a class="xref" href="security.html#creating-ssl-rsa-files" title="6.3.3&nbsp;Creating SSL and RSA Certificates and Keys">Section&nbsp;6.3.3, “Creating SSL and RSA Certificates and Keys”</a>.
                        </p><p style="color:blue;">服务器使用caching_sha2_password_auto_generate_rsa_keys系统变量来确定是否自动生成rsa密钥对文件。参见第6.3.3节“创建SSL和RSA证书和密钥”。</p></li><li class="listitem"><p>
                            The
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-status-variables.html#statvar_Caching_sha2_password_rsa_public_key" target="_top"><code class="literal">Caching_sha2_password_rsa_public_key</code></a>
                            status variable displays the RSA public key value used by
                            the <code class="literal">caching_sha2_password</code>
                            authentication plugin.
                        </p><p style="color:blue;">caching_sha2_password_rsa_public_key status变量显示caching_sha2_password身份验证插件使用的rsa公钥值。</p></li><li class="listitem"><p>
                            Clients that are in possession of the RSA public key can
                            perform RSA key pair-based password exchange with the
                            server during the connection process, as described later.
                        </p><p style="color:blue;">拥有rsa公钥的客户端可以在连接过程中与服务器执行基于rsa密钥对的密码交换，如下所述。</p></li><li class="listitem"><p>
                            For connections by accounts that authenticate with
                            <code class="literal">caching_sha2_password</code> and RSA key
                            pair-based password exchange, the server does not send the
                            RSA public key to clients by default. Clients can use a
                            client-side copy of the required public key, or request
                            the public key from the server.
                        </p><p style="color:blue;">对于使用缓存密码和基于rsa密钥对的密码交换进行身份验证的帐户的连接，默认情况下服务器不会将rsa公钥发送给客户端。客户端可以使用所需公钥的客户端副本，或从服务器请求公钥。</p><p>
                            Use of a trusted local copy of the public key enables the
                            client to avoid a round trip in the client/server
                            protocol, and is more secure than requesting the public
                            key from the server. On the other hand, requesting the
                            public key from the server is more convenient (it requires
                            no management of a client-side file) and may be acceptable
                            in secure network environments.
                        </p><p style="color:blue;">使用受信任的公钥本地副本可以使客户端避免客户端/服务器协议中的往返，并且比从服务器请求公钥更安全。另一方面，从服务器请求公钥更方便（它不需要管理客户端文件），并且在安全的网络环境中可以接受。</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    For command-line clients, use the
                                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a>
                                    option to specify the RSA public key file. Use the
                                    <a class="link" href="programs.html#option_mysql_get-server-public-key"><code class="option">--get-server-public-key</code></a>
                                    option to request the public key from the server. The
                                    following programs support the two options:
                                    <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>,
                                    <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlbinlog" title="4.6.7&nbsp;mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlcheck" title="4.5.3&nbsp;mysqlcheck — A Table Maintenance Program"><span class="command"><strong>mysqlcheck</strong></span></a>,
                                    <a class="link" href="programs.html#mysqldump" title="4.5.4&nbsp;mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlimport" title="4.5.5&nbsp;mysqlimport — A Data Import Program"><span class="command"><strong>mysqlimport</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlpump" title="4.5.6&nbsp;mysqlpump — A Database Backup Program"><span class="command"><strong>mysqlpump</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlshow" title="4.5.7&nbsp;mysqlshow — Display Database, Table, and Column Information"><span class="command"><strong>mysqlshow</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlslap" title="4.5.8&nbsp;mysqlslap — Load Emulation Client"><span class="command"><strong>mysqlslap</strong></span></a>,
                                    <span class="command"><strong>mysqltest</strong></span>.
                                </p><p style="color:blue;">对于命令行客户机，使用--server公钥路径选项指定rsa公钥文件。使用--get server public key选项从服务器请求公钥。以下程序支持两个选项：mysql、mysqladmin、mysqlbinlog、mysqlcheck、mysqldump、mysqlimport、mysqlpump、mysqlshow、mysqlslap、mysqltest。</p></li><li class="listitem"><p>
                                    For programs that use the C API, call
                                    <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> to
                                    specify the RSA public key file by passing the
                                    <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> option and
                                    the name of the file, or request the public key from
                                    the server by passing the
                                    <code class="literal">MYSQL_OPT_GET_SERVER_PUBLIC_KEY</code>
                                    option.
                                </p><p style="color:blue;">对于使用C API的程序，调用mysql_options（）通过传递mysql_server_public_key选项和文件名来指定RSA公钥文件，或通过传递mysql_opt_get_server_public_key选项从服务器请求公钥。</p></li></ul>
                            </div>
                            <p>
                                In all cases, if the option is given to specify a valid
                                public key file, it takes precedence over the option to
                                request the public key from the server.
                            </p><p style="color:blue;">在所有情况下，如果为指定有效的公钥文件提供了选项，则它优先于从服务器请求公钥的选项。</p></li></ul>
                    </div>
                    <p>
                        For clients that use the
                        <code class="literal">caching_sha2_password</code> plugin, passwords are
                        never exposed as cleartext when connecting to the MySQL 8.0 or
                        higher server. How password transmission occurs depends on
                        whether a secure connection or RSA encryption is used:
                    </p><p style="color:blue;">对于使用缓存密码插件的客户机，在连接到mysql 8.0或更高版本的服务器时，密码永远不会以明文形式公开。密码传输的方式取决于使用的是安全连接还是RSA加密：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the connection is secure, an RSA key pair is
                            unnecessary and is not used. This applies to encrypted TCP
                            connections that use TLS, as well as Unix socket-file and
                            shared-memory connections. The password is sent as
                            cleartext but cannot be snooped because the connection is
                            secure.
                        </p><p style="color:blue;">如果连接是安全的，则不需要rsa密钥对，也不使用rsa密钥对。这适用于使用tls的加密tcp连接，以及unix套接字文件和共享内存连接。密码以明文形式发送，但由于连接安全，因此无法窥探。</p></li><li class="listitem"><p>
                            If the connection is not secure, an RSA key pair is used.
                            This applies to unencrypted TCP connections without TLS
                            and named-pipe connections. RSA is used only for password
                            exchange between client and server, to prevent password
                            snooping. When the server receives the encrypted password,
                            it decrypts it. A scramble is used in the encryption to
                            prevent repeat attacks.
                        </p><p style="color:blue;">如果连接不安全，则使用rsa密钥对。这适用于没有TLS和命名管道连接的未加密TCP连接。rsa仅用于客户端和服务器之间的密码交换，以防止密码窥探。当服务器收到加密的密码时，它将对其进行解密。加密中使用了加扰以防止重复攻击。</p></li><li class="listitem"><p>
                            If a secure connection is not used and RSA encryption is
                            not available, the connection attempt fails because the
                            password cannot be sent without being exposed as
                            cleartext.
                        </p><p style="color:blue;">如果未使用安全连接且RSA加密不可用，则连接尝试将失败，因为在未公开为明文的情况下无法发送密码。</p></li></ul>
                    </div>
                    <p>
                        As mentioned previously, RSA password encryption is available
                        only if MySQL 5.7 was compiled using OpenSSL. The implication
                        for clients from MySQL 5.7 distributions compiled using yaSSL
                        is that, to use SHA-2 passwords, clients
                        <span class="emphasis"><em>must</em></span> use an encrypted connection to
                        access the server. See
                        <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                    </p><p style="color:blue;">如前所述，只有使用openssl编译mysql 5.7时，rsa密码加密才可用。使用yassl编译的mysql 5.7发行版对客户机的影响是，要使用sha-2密码，客户机必须使用加密连接来访问服务器。请参阅6.3.1节，“配置MySQL以使用加密连接”。</p><p>
                    Assuming that MySQL 5.7 has been compiled using OpenSSL, use
                    the following procedure to enable use of an RSA key pair for
                    password exchange during the client connection process.
                </p><p style="color:blue;">假设mysql 5.7已使用openssl编译，请使用以下过程在客户端连接过程中启用rsa密钥对进行密码交换。</p>
                    <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Important
                        </div>
                        <p>
                            Aspects of this procedure that pertain to server
                            configuration must be done on the MySQL 8.0 or higher server
                            to which you wish to connect using MySQL 5.7 clients,
                            <span class="emphasis"><em>not</em></span> on your MySQL 5.7 server.
                        </p><p style="color:blue;">此过程中与服务器配置有关的部分必须在MySQL8.0或更高版本的服务器上完成，您希望使用MySQL5.7客户端连接到该服务器，而不是在MySQL5.7服务器上。</p>
                    </div>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create the RSA private and public key-pair files using the
                            instructions in <a class="xref" href="security.html#creating-ssl-rsa-files" title="6.3.3&nbsp;Creating SSL and RSA Certificates and Keys">Section&nbsp;6.3.3, “Creating SSL and RSA Certificates and Keys”</a>.
                        </p><p style="color:blue;">使用第6.3.3节“创建SSL和RSA证书和密钥”中的说明创建RSA私钥和公钥对文件。</p></li><li class="listitem"><p>
                            If the private and public key files are located in the
                            data directory and are named
                            <code class="filename">private_key.pem</code> and
                            <code class="filename">public_key.pem</code> (the default values of
                            the
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_private_key_path" target="_top"><code class="literal">caching_sha2_password_private_key_path</code></a>
                            and
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_public_key_path" target="_top"><code class="literal">caching_sha2_password_public_key_path</code></a>
                            system variables), the server uses them automatically at
                            startup.
                        </p><p style="color:blue;">如果私钥和公钥文件位于数据目录中，并命名为private_key.pem和public_key.pem（caching_sha2_password_private_key_path和caching_sha2_password_public_key_path系统变量的默认值），则服务器会在启动时自动使用它们。</p><p>
                            Otherwise, to name the key files explicitly, set the
                            system variables to the key file names in the server
                            option file. If the files are located in the server data
                            directory, you need not specify their full path names:
                        </p><p style="color:blue;">否则，若要显式命名密钥文件，请将系统变量设置为服务器选项文件中的密钥文件名。如果文件位于服务器数据目录中，则无需指定其完整路径名：</p><pre data-lang="ini" class="programlisting">[mysqld]
caching_sha2_password_private_key_path=myprivkey.pem
caching_sha2_password_public_key_path=mypubkey.pem
</pre><p>
                            If the key files are not located in the data directory, or
                            to make their locations explicit in the system variable
                            values, use full path names:
                        </p><p style="color:blue;">如果密钥文件不在数据目录中，或者要在系统变量值中明确它们的位置，请使用完整路径名：</p><pre data-lang="ini" class="programlisting">[mysqld]
caching_sha2_password_private_key_path=/usr/local/mysql/myprivkey.pem
caching_sha2_password_public_key_path=/usr/local/mysql/mypubkey.pem
</pre></li><li class="listitem"><p>
                            Restart the server, then connect to it and check the
                            <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-status-variables.html#statvar_Caching_sha2_password_rsa_public_key" target="_top"><code class="literal">Caching_sha2_password_rsa_public_key</code></a>
                            status variable value. The value will differ from that
                            shown here, but should be nonempty:
                        </p><p style="color:blue;">重新启动服务器，然后连接到它并检查caching_sha2_password_rsa_public_key status变量值。该值与此处显示的值不同，但应为非空值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'Caching_sha2_password_rsa_public_key'\G</code></strong>
*************************** 1. row ***************************
Variable_name: Caching_sha2_password_rsa_public_key
        Value: -----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDO9nRUDd+KvSZgY7cNBZMNpwX6
MvE1PbJFXO7u18nJ9lwc99Du/E7lw6CVXw7VKrXPeHbVQUzGyUNkf45Nz/ckaaJa
aLgJOBCIDmNVnyU54OT/1lcs2xiyfaDMe8fCJ64ZwTnKbY2gkt1IMjUAB5Ogd5kJ
g8aV7EtKwyhHb0c30QIDAQAB
-----END PUBLIC KEY-----
</pre><p>
                            If the value is empty, the server found some problem with
                            the key files. Check the error log for diagnostic
                            information.
                        </p><p style="color:blue;">如果该值为空，则服务器发现密钥文件有问题。检查错误日志以获取诊断信息。</p></li></ol>
                    </div>
                    <p>
                        After the server has been configured with the RSA key files,
                        accounts that authenticate with the
                        <code class="literal">caching_sha2_password</code> plugin have the
                        option of using those key files to connect to the server. As
                        mentioned previously, such accounts can use either a secure
                        connection (in which case RSA is not used) or an unencrypted
                        connection that performs password exchange using RSA. Suppose
                        that an unencrypted connection is used. For example:
                    </p><p style="color:blue;">使用rsa密钥文件配置服务器后，使用缓存密码插件进行身份验证的帐户可以选择使用这些密钥文件连接到服务器。如前所述，此类帐户可以使用安全连接（在这种情况下不使用rsa）或使用rsa执行密码交换的未加密连接。假设使用了未加密的连接。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --ssl-mode=DISABLED -u sha2user -p</code></strong>
Enter password: <em class="replaceable"><code>password</code></em>
</pre><p>
                    For this connection attempt by <code class="literal">sha2user</code>,
                    the server determines that
                    <code class="literal">caching_sha2_password</code> is the appropriate
                    authentication plugin and invokes it (because that was the
                    plugin specified at <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>
                    time). The plugin finds that the connection is not encrypted
                    and thus requires the password to be transmitted using RSA
                    encryption. However, the server does not send the public key
                    to the client, and the client provided no public key, so it
                    cannot encrypt the password and the connection fails:
                </p><p style="color:blue;">对于sha2 user的此连接尝试，服务器确定缓存sha2u密码是适当的身份验证插件并调用它（因为这是在创建用户时指定的插件）。插件发现连接未加密，因此需要使用rsa加密来传输密码。但是，服务器不向客户端发送公钥，客户端也不提供公钥，因此无法加密密码，连接失败：</p><pre data-lang="simple" class="programlisting">ERROR 2061 (HY000): Authentication plugin 'caching_sha2_password'
reported error: Authentication requires secure connection.
</pre><p>
                    To request the RSA public key from the server, specify the
                    <a class="link" href="programs.html#option_mysql_get-server-public-key"><code class="option">--get-server-public-key</code></a> option:
                </p><p style="color:blue;">要从服务器请求RSA公钥，请指定--get server public key选项：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --ssl-mode=DISABLED -u sha2user -p --get-server-public-key</code></strong>
Enter password: <em class="replaceable"><code>password</code></em>
</pre><p>
                    In this case, the server sends the RSA public key to the
                    client, which uses it to encrypt the password and returns the
                    result to the server. The plugin uses the RSA private key on
                    the server side to decrypt the password and accepts or rejects
                    the connection based on whether the password is correct.
                </p><p style="color:blue;">在这种情况下，服务器将rsa公钥发送给客户端，客户端使用它来加密密码并将结果返回给服务器。插件使用服务器端的rsa私钥解密密码，并根据密码是否正确接受或拒绝连接。</p><p>
                    Alternatively, if the client has a file containing a local
                    copy of the RSA public key required by the server, it can
                    specify the file using the
                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a> option:
                </p><p style="color:blue;">或者，如果客户端有包含服务器所需的rsa公钥的本地副本的文件，则可以使用--server public key path选项指定该文件：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --ssl-mode=DISABLED -u sha2user -p --server-public-key-path=<em class="replaceable"><code>file_name</code></em></code></strong>
Enter password: <em class="replaceable"><code>password</code></em>
</pre><p>
                    In this case, the client uses the public key to encrypt the
                    password and returns the result to the server. The plugin uses
                    the RSA private key on the server side to decrypt the password
                    and accepts or rejects the connection based on whether the
                    password is correct.
                </p><p style="color:blue;">在这种情况下，客户端使用公钥加密密码并将结果返回给服务器。插件使用服务器端的rsa私钥解密密码，并根据密码是否正确接受或拒绝连接。</p><p>
                    The public key value in the file named by the
                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a> option
                    should be the same as the key value in the server-side file
                    named by the
                    <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_caching_sha2_password_public_key_path" target="_top"><code class="literal">caching_sha2_password_public_key_path</code></a>
                    system variable. If the key file contains a valid public key
                    value but the value is incorrect, an access-denied error
                    occurs. If the key file does not contain a valid public key,
                    the client program cannot use it.
                </p><p style="color:blue;">由--server public key path选项命名的文件中的公钥值应与由caching垌password垌public垌key垌path系统变量命名的服务器端文件中的密钥值相同。如果密钥文件包含有效的公钥值，但该值不正确，则会发生拒绝访问错误。如果密钥文件不包含有效的公钥，则客户端程序无法使用它。</p><p>
                    Client users can obtain the RSA public key two ways:
                </p><p style="color:blue;">客户端用户可以通过两种方式获取RSA公钥：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The database administrator can provide a copy of the
                            public key file.
                        </p><p style="color:blue;">数据库管理员可以提供公钥文件的副本。</p></li><li class="listitem"><p>
                            A client user who can connect to the server some other way
                            can use a <code class="literal">SHOW STATUS LIKE
                            'Caching_sha2_password_rsa_public_key'</code> statement
                            and save the returned key value in a file.
                        </p><p style="color:blue;">可以通过其他方式连接到服务器的客户机用户可以使用“caching_sha2_password_rsa_public_key”语句等显示状态，并将返回的密钥值保存在文件中。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="caching-sha2-pluggable-authentication-cache-operation"></a>Cache Operation for SHA-2 Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        On the server side, the
                        <code class="literal">caching_sha2_password</code> plugin uses an
                        in-memory cache for faster authentication of clients who have
                        connected previously. For MySQL 5.7, which supports only the
                        <code class="literal">caching_sha2_password</code> client-side plugin,
                        this server-side caching thus takes place on the MySQL 8.0 or
                        higher server to which you connect using MySQL 5.7 clients.
                        For information about cache operation, see
                        <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html#caching-sha2-pluggable-authentication-cache-operation" target="_top">Cache Operation for SHA-2 Pluggable Authentication</a>,
                        in <a class="ulink" href="https://dev.mysql.com/doc/refman/8.0/en/" target="_top">MySQL 8.0 Reference Manual</a>.
                    </p><p style="color:blue;">在服务器端，caching_sha2_u password插件使用内存中的缓存，以更快地对先前连接的客户端进行身份验证。对于只支持缓存密码客户端插件的mysql 5.7，此服务器端缓存将在使用mysql 5.7客户端连接到的mysql 8.0或更高版本的服务器上进行。有关缓存操作的信息，请参阅MySQL8.0参考手册中的“SHA-2可插拔身份验证的缓存操作”。</p>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="sha256-pluggable-authentication"></a>6.4.1.5&nbsp;SHA-256 Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286886221856"></a><a class="indexterm" name="idm140286886220768"></a><p>
                MySQL provides two authentication plugins that implement SHA-256
                hashing for user account passwords:
            </p><p style="color:blue;">mysql提供了两个身份验证插件，用于实现用户帐户密码的sha-256散列：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">sha256_password</code>: Implements basic SHA-256
                        authentication.
                    </p><p style="color:blue;">sha256_密码：实现基本sha-256身份验证。</p></li><li class="listitem"><p>
                        <code class="literal">caching_sha2_password</code>: Implements SHA-256
                        authentication (like <code class="literal">sha256_password</code>),
                        but uses caching on the server side for better performance
                        and has additional features for wider applicability.
                    </p><p style="color:blue;">缓存SHA26U密码：实现SHA-256身份验证（如SHA256U密码），但在服务器端使用缓存以获得更好的性能，并具有更广泛适用性的附加功能。</p></li></ul>
                </div>
                <p>
                    This section describes the original noncaching SHA-2
                    authentication plugin. For information about the caching plugin,
                    see <a class="xref" href="security.html#caching-sha2-pluggable-authentication" title="6.4.1.4&nbsp;Caching SHA-2 Pluggable Authentication">Section&nbsp;6.4.1.4, “Caching SHA-2 Pluggable Authentication”</a>.
                </p><p style="color:blue;">本节介绍原始的非计算机SHA-2身份验证插件。有关缓存插件的信息，请参阅第6.4.1.4节“缓存SHA-2可插入身份验证”。</p>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        To connect to the server using an account that authenticates
                        with the <code class="literal">sha256_password</code> plugin, you must
                        use either a TLS connection or an unencrypted connection that
                        supports password exchange using an RSA key pair, as described
                        later in this section. Either way, the
                        <code class="literal">sha256_password</code> plugin uses MySQL's
                        encryption capabilities. See
                        <a class="xref" href="security.html#encrypted-connections" title="6.3&nbsp;Using Encrypted Connections">Section&nbsp;6.3, “Using Encrypted Connections”</a>.
                    </p><p style="color:blue;">要使用通过SHA256密码插件进行身份验证的帐户连接到服务器，必须使用TLS连接或支持使用RSA密钥对进行密码交换的未加密连接，如本节后面所述。不管怎样，sha256_密码插件使用mysql的加密功能。参见第6.3节“使用加密连接”。</p>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        In the name <code class="literal">sha256_password</code>,
                        <span class="quote">“<span class="quote">sha256</span>”</span> refers to the 256-bit digest length the
                        plugin uses for encryption. In the name
                        <code class="literal">caching_sha2_password</code>, <span class="quote">“<span class="quote">sha2</span>”</span>
                        refers more generally to the SHA-2 class of encryption
                        algorithms, of which 256-bit encryption is one instance. The
                        latter name choice leaves room for future expansion of
                        possible digest lengths without changing the plugin name.
                    </p><p style="color:blue;">在sha256_password的名称中，“sha256”是指插件用于加密的256位摘要长度。在缓存sha2密码的名称中，“sha2”通常指的是sha-2类加密算法，其中256位加密是一个实例。后一个名称的选择为将来在不更改插件名称的情况下扩展可能的摘要长度留出了空间。</p>
                </div>
                <p>
                    The following table shows the plugin names on the server and
                    client sides.
                </p><p style="color:blue;">下表显示了服务器端和客户端的插件名称。</p>
                <div class="table">
                    <a name="idm140286886206032"></a><p class="title"><b>Table&nbsp;6.11&nbsp;Plugin and Library Names for SHA-256 Authentication</b></p><p style="color:blue;">表6.11 sha-256认证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for SHA-256 password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">sha256_password</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">sha256_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td>None (plugins are built in)</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to SHA-256 pluggable authentication:
            </p><p style="color:blue;">以下部分提供特定于SHA-256可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#sha256-pluggable-authentication-installation" title="Installing SHA-256 Pluggable Authentication">Installing SHA-256 Pluggable Authentication</a></p><p style="color:blue;">安装sha-256可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#sha256-pluggable-authentication-usage" title="Using SHA-256 Pluggable Authentication">Using SHA-256 Pluggable Authentication</a></p><p style="color:blue;">使用sha-256可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="sha256-pluggable-authentication-installation"></a>Installing SHA-256 Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        The <code class="literal">sha256_password</code> plugin exists in server
                        and client forms:
                    </p><p style="color:blue;">Sa256x密码插件存在于服务器和客户端窗体中：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The server-side plugin is built into the server, need not
                            be loaded explicitly, and cannot be disabled by unloading
                            it.
                        </p><p style="color:blue;">服务器端插件内置在服务器中，不需要显式加载，也不能通过卸载禁用。</p></li><li class="listitem"><p>
                            The client-side plugin is built into the
                            <code class="literal">libmysqlclient</code> client library and is
                            available to any program linked against
                            <code class="literal">libmysqlclient</code>.
                        </p><p style="color:blue;">客户端插件内置在libmysqlclient客户端库中，可用于任何链接到libmysqlclient的程序。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="sha256-pluggable-authentication-usage"></a>Using SHA-256 Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To set up an account that uses the
                        <code class="literal">sha256_password</code> plugin for SHA-256 password
                        hashing, use the following statement, where
                        <em class="replaceable"><code>password</code></em> is the desired account
                        password:
                    </p><p style="color:blue;">要设置使用sha256_密码插件进行sha-256密码散列的帐户，请使用以下语句，其中password是所需的帐户密码：</p><pre data-lang="sql" class="programlisting">CREATE USER 'sha256user'@'localhost'
IDENTIFIED WITH sha256_password BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
                    The server assigns the <code class="literal">sha256_password</code>
                    plugin to the account and uses it to encrypt the password
                    using SHA-256, storing those values in the
                    <code class="literal">plugin</code> and
                    <code class="literal">authentication_string</code> columns of the
                    <code class="literal">mysql.user</code> system table.
                </p><p style="color:blue;">服务器将sha256_密码插件分配给帐户，并使用它使用sha-256加密密码，将这些值存储在mysql.user系统表的plugin和authentication_string列中。</p><p>
                    The preceding instructions do not assume that
                    <code class="literal">sha256_password</code> is the default
                    authentication plugin. If <code class="literal">sha256_password</code>
                    is the default authentication plugin, a simpler
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> syntax can be used.
                </p><p style="color:blue;">前面的说明不假定sha256_密码是默认的身份验证插件。如果sha256_password是默认的身份验证插件，则可以使用更简单的create user语法。</p><p>
                    To start the server with the default authentication plugin set
                    to <code class="literal">sha256_password</code>, put these lines in the
                    server option file:
                </p><p style="color:blue;">要使用设置为sha256_password的默认身份验证插件启动服务器，请在服务器选项文件中输入以下行：</p><pre data-lang="ini" class="programlisting">[mysqld]
default_authentication_plugin=sha256_password
</pre><p>
                    That causes the <code class="literal">sha256_password</code> plugin to
                    be used by default for new accounts. As a result, it is
                    possible to create the account and set its password without
                    naming the plugin explicitly:
                </p><p style="color:blue;">这导致sha256_密码插件默认用于新帐户。因此，可以在不显式命名插件的情况下创建帐户并设置其密码：</p><pre data-lang="sql" class="programlisting">CREATE USER 'sha256user'@'localhost' IDENTIFIED BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
                    Another consequence of setting
                    <a class="link" href="server-administration.html#sysvar_default_authentication_plugin"><code class="literal">default_authentication_plugin</code></a>
                    to <code class="literal">sha256_password</code> is that, to use some
                    other plugin for account creation, you must specify that
                    plugin explicitly. For example, to use the
                    <code class="literal">mysql_native_password</code> plugin, use this
                    statement:
                </p><p style="color:blue;">将default_authentication_plugin设置为sha256_password的另一个结果是，要使用其他插件创建帐户，必须显式指定该插件。例如，要使用mysql本地密码插件，请使用以下语句：</p><pre data-lang="sql" class="programlisting">CREATE USER 'nativeuser'@'localhost'
IDENTIFIED WITH mysql_native_password BY '<em class="replaceable"><code>password</code></em>';
</pre><p>
                    <code class="literal">sha256_password</code> supports connections over
                    secure transport. <code class="literal">sha256_password</code> also
                    supports encrypted password exchange using RSA over
                    unencrypted connections if these conditions are satisfied:
                </p><p style="color:blue;">SHA256_密码支持通过安全传输进行连接。如果满足以下条件，sha256_password还支持在未加密连接上使用rsa进行加密密码交换：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            MySQL is compiled using OpenSSL, not yaSSL.
                            <code class="literal">sha256_password</code> works with
                            distributions compiled using either package, but RSA
                            support requires OpenSSL.
                        </p><p style="color:blue;">mysql是使用openssl编译的，而不是yassl。sha256_password适用于使用这两个包编译的发行版，但是rsa支持需要openssl。</p>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    It is possible to compile MySQL using yaSSL as an
                                    alternative to OpenSSL only prior to MySQL 5.7.28. As of
                                    MySQL 5.7.28, support for yaSSL is removed and all MySQL
                                    builds use OpenSSL.
                                </p><p style="color:blue;">只有在mysql 5.7.28之前，才有可能使用yassl作为openssl的替代品编译mysql。从mysql 5.7.28开始，对yassl的支持被删除，所有mysql构建都使用openssl。</p>
                            </div>
                        </li><li class="listitem"><p>
                            The MySQL server to which you wish to connect is
                            configured to support RSA (using the RSA configuration
                            procedure given later in this section).
                        </p><p style="color:blue;">要连接到的mysql服务器配置为支持rsa（使用本节后面给出的rsa配置过程）。</p></li></ul>
                    </div>
                    <p>
                        RSA support has these characteristics:
                    </p><p style="color:blue;">RSA支持具有以下特点：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            On the server side, two system variables name the RSA
                            private and public key-pair files:
                            <a class="link" href="server-administration.html#sysvar_sha256_password_private_key_path"><code class="literal">sha256_password_private_key_path</code></a>
                            and
                            <a class="link" href="server-administration.html#sysvar_sha256_password_public_key_path"><code class="literal">sha256_password_public_key_path</code></a>.
                            The database administrator must set these variables at
                            server startup if the key files to use have names that
                            differ from the system variable default values.
                        </p><p style="color:blue;">在服务器端，有两个系统变量命名rsa私钥和公钥对文件：sha256_password_private_key_path和sha256_password_public_key_path。如果要使用的密钥文件的名称与系统变量默认值不同，则数据库管理员必须在服务器启动时设置这些变量。</p></li><li class="listitem"><p>
                            The server uses the
                            <a class="link" href="server-administration.html#sysvar_sha256_password_auto_generate_rsa_keys"><code class="literal">sha256_password_auto_generate_rsa_keys</code></a>
                            system variable to determine whether to automatically
                            generate the RSA key-pair files. See
                            <a class="xref" href="security.html#creating-ssl-rsa-files" title="6.3.3&nbsp;Creating SSL and RSA Certificates and Keys">Section&nbsp;6.3.3, “Creating SSL and RSA Certificates and Keys”</a>.
                        </p><p style="color:blue;">服务器使用SHA256_password_auto_generate_RSA_keys系统变量来确定是否自动生成RSA密钥对文件。参见第6.3.3节“创建SSL和RSA证书和密钥”。</p></li><li class="listitem"><p>
                            The <a class="link" href="server-administration.html#statvar_Rsa_public_key"><code class="literal">Rsa_public_key</code></a>
                            status variable displays the RSA public key value used by
                            the <code class="literal">sha256_password</code> authentication
                            plugin.
                        </p><p style="color:blue;">rsa_public_key status变量显示sha256_密码验证插件使用的rsa公钥值。</p></li><li class="listitem"><p>
                            Clients that are in possession of the RSA public key can
                            perform RSA key pair-based password exchange with the
                            server during the connection process, as described later.
                        </p><p style="color:blue;">拥有rsa公钥的客户端可以在连接过程中与服务器执行基于rsa密钥对的密码交换，如下所述。</p></li><li class="listitem"><p>
                            For connections by accounts that authenticate using
                            <code class="literal">sha256_password</code> and RSA public key
                            pair-based password exchange, the server sends the RSA
                            public key to the client as needed. However, if a copy of
                            the public key is available on the client host, the client
                            can use it to save a round trip in the client/server
                            protocol:
                        </p><p style="color:blue;">对于使用sha256_密码和基于rsa公钥对的密码交换进行身份验证的帐户的连接，服务器根据需要将rsa公钥发送给客户端。但是，如果公钥的副本在客户端主机上可用，则客户端可以使用它在客户端/服务器协议中保存往返：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    For these command-line clients, use the
                                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a>
                                    option to specify the RSA public key file:
                                    <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>,
                                    <span class="command"><strong>mysqltest</strong></span>, and (as of MySQL 5.7.23)
                                    <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlbinlog" title="4.6.7&nbsp;mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlcheck" title="4.5.3&nbsp;mysqlcheck — A Table Maintenance Program"><span class="command"><strong>mysqlcheck</strong></span></a>,
                                    <a class="link" href="programs.html#mysqldump" title="4.5.4&nbsp;mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlimport" title="4.5.5&nbsp;mysqlimport — A Data Import Program"><span class="command"><strong>mysqlimport</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlpump" title="4.5.6&nbsp;mysqlpump — A Database Backup Program"><span class="command"><strong>mysqlpump</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlshow" title="4.5.7&nbsp;mysqlshow — Display Database, Table, and Column Information"><span class="command"><strong>mysqlshow</strong></span></a>,
                                    <a class="link" href="programs.html#mysqlslap" title="4.5.8&nbsp;mysqlslap — Load Emulation Client"><span class="command"><strong>mysqlslap</strong></span></a>,
                                    <span class="command"><strong>mysqltest</strong></span>.
                                </p><p style="color:blue;">对于这些命令行客户机，使用--server public key path选项指定RSA公钥文件：mysql、mysqltest和（从mysql 5.7.23开始）mysqladmin、mysqlbinlog、mysqlcheck、mysqldump、mysqlimport、mysqlpump、mysqlshow、mysqlslap、mysqltest。</p></li><li class="listitem"><p>
                                    For programs that use the C API, call
                                    <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> to
                                    specify the RSA public key file by passing the
                                    <code class="literal">MYSQL_SERVER_PUBLIC_KEY</code> option and
                                    the name of the file.
                                </p><p style="color:blue;">对于使用C API的程序，调用mysql_options（）通过传递mysql_server_public_key选项和文件名来指定RSA公钥文件。</p></li><li class="listitem"><p>
                                    For replication slaves, RSA key pair-based password
                                    exchange cannot be used to connect to master servers
                                    for accounts that authenticate with the
                                    <code class="literal">sha256_password</code> plugin. For such
                                    accounts, only secure connections can be used.
                                </p><p style="color:blue;">对于复制从属服务器，基于RSA密钥对的密码交换不能用于连接到使用SHA256_密码插件进行身份验证的帐户的主服务器。对于此类帐户，只能使用安全连接。</p></li></ul>
                            </div>
                        </li></ul>
                    </div>
                    <p>
                        For clients that use the <code class="literal">sha256_password</code>
                        plugin, passwords are never exposed as cleartext when
                        connecting to the server. How password transmission occurs
                        depends on whether a secure connection or RSA encryption is
                        used:
                    </p><p style="color:blue;">对于使用sha256_密码插件的客户机，在连接到服务器时，密码永远不会以明文形式公开。密码传输的方式取决于使用的是安全连接还是RSA加密：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the connection is secure, an RSA key pair is
                            unnecessary and is not used. This applies to encrypted
                            connections that use TLS. The password is sent as
                            cleartext but cannot be snooped because the connection is
                            secure.
                        </p><p style="color:blue;">如果连接是安全的，则不需要rsa密钥对，也不使用rsa密钥对。这适用于使用TLS的加密连接。密码以明文形式发送，但由于连接安全，因此无法窥探。</p></li><li class="listitem"><p>
                            If the connection is not secure, and an RSA key pair is
                            available, the connection remains unencrypted. This
                            applies to unencrypted connections without TLS. RSA is
                            used only for password exchange between client and server,
                            to prevent password snooping. When the server receives the
                            encrypted password, it decrypts it. A scramble is used in
                            the encryption to prevent repeat attacks.
                        </p><p style="color:blue;">如果连接不安全，并且RSA密钥对可用，则连接将保持未加密状态。这适用于没有tls的未加密连接。rsa仅用于客户端和服务器之间的密码交换，以防止密码窥探。当服务器收到加密的密码时，它将对其进行解密。加密中使用了加扰以防止重复攻击。</p></li><li class="listitem"><p>
                            If a secure connection is not used and RSA encryption is
                            not available, the connection attempt fails because the
                            password cannot be sent without being exposed as
                            cleartext.
                        </p><p style="color:blue;">如果未使用安全连接且RSA加密不可用，则连接尝试将失败，因为在未公开为明文的情况下无法发送密码。</p></li></ul>
                    </div>
                    <p>
                        As mentioned previously, RSA password encryption is available
                        only if MySQL was compiled using OpenSSL. The implication for
                        MySQL distributions compiled using yaSSL is that, to use
                        SHA-256 passwords, clients <span class="emphasis"><em>must</em></span> use an
                        encrypted connection to access the server. See
                        <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                    </p><p style="color:blue;">如前所述，只有使用openssl编译mysql时，rsa密码加密才可用。使用yassl编译的mysql发行版的含义是，要使用sha-256密码，客户端必须使用加密连接来访问服务器。请参阅6.3.1节，“配置MySQL以使用加密连接”。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            To use RSA password encryption with
                            <code class="literal">sha256_password</code>, the client and server
                            both must be compiled using OpenSSL, not just one of them.
                        </p><p style="color:blue;">要对sha256_密码使用rsa密码加密，客户端和服务器都必须使用openssl进行编译，而不仅仅是其中之一。</p>
                    </div>
                    <p>
                        Assuming that MySQL has been compiled using OpenSSL, use the
                        following procedure to enable use of an RSA key pair for
                        password exchange during the client connection process:
                    </p><p style="color:blue;">假设mysql已使用openssl编译，请使用以下过程在客户端连接过程中启用rsa密钥对进行密码交换：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create the RSA private and public key-pair files using the
                            instructions in <a class="xref" href="security.html#creating-ssl-rsa-files" title="6.3.3&nbsp;Creating SSL and RSA Certificates and Keys">Section&nbsp;6.3.3, “Creating SSL and RSA Certificates and Keys”</a>.
                        </p><p style="color:blue;">使用第6.3.3节“创建SSL和RSA证书和密钥”中的说明创建RSA私钥和公钥对文件。</p></li><li class="listitem"><p>
                            If the private and public key files are located in the
                            data directory and are named
                            <code class="filename">private_key.pem</code> and
                            <code class="filename">public_key.pem</code> (the default values of
                            the
                            <a class="link" href="server-administration.html#sysvar_sha256_password_private_key_path"><code class="literal">sha256_password_private_key_path</code></a>
                            and
                            <a class="link" href="server-administration.html#sysvar_sha256_password_public_key_path"><code class="literal">sha256_password_public_key_path</code></a>
                            system variables), the server uses them automatically at
                            startup.
                        </p><p style="color:blue;">如果私钥和公钥文件位于数据目录中，并命名为private_key.pem和public_key.pem（sha256_password_private_key_path和sha256_password_public_key_path系统变量的默认值），则服务器在启动时会自动使用它们。</p><p>
                            Otherwise, to name the key files explicitly, set the
                            system variables to the key file names in the server
                            option file. If the files are located in the server data
                            directory, you need not specify their full path names:
                        </p><p style="color:blue;">否则，若要显式命名密钥文件，请将系统变量设置为服务器选项文件中的密钥文件名。如果文件位于服务器数据目录中，则无需指定其完整路径名：</p><pre data-lang="ini" class="programlisting">[mysqld]
sha256_password_private_key_path=myprivkey.pem
sha256_password_public_key_path=mypubkey.pem
</pre><p>
                            If the key files are not located in the data directory, or
                            to make their locations explicit in the system variable
                            values, use full path names:
                        </p><p style="color:blue;">如果密钥文件不在数据目录中，或者要在系统变量值中明确它们的位置，请使用完整路径名：</p><pre data-lang="ini" class="programlisting">[mysqld]
sha256_password_private_key_path=/usr/local/mysql/myprivkey.pem
sha256_password_public_key_path=/usr/local/mysql/mypubkey.pem
</pre></li><li class="listitem"><p>
                            Restart the server, then connect to it and check the
                            <a class="link" href="server-administration.html#statvar_Rsa_public_key"><code class="literal">Rsa_public_key</code></a> status
                            variable value. The value will differ from that shown
                            here, but should be nonempty:
                        </p><p style="color:blue;">重新启动服务器，然后连接到它并检查rsa_public_key status变量值。该值与此处显示的值不同，但应为非空值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'Rsa_public_key'\G</code></strong>
*************************** 1. row ***************************
Variable_name: Rsa_public_key
        Value: -----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDO9nRUDd+KvSZgY7cNBZMNpwX6
MvE1PbJFXO7u18nJ9lwc99Du/E7lw6CVXw7VKrXPeHbVQUzGyUNkf45Nz/ckaaJa
aLgJOBCIDmNVnyU54OT/1lcs2xiyfaDMe8fCJ64ZwTnKbY2gkt1IMjUAB5Ogd5kJ
g8aV7EtKwyhHb0c30QIDAQAB
-----END PUBLIC KEY-----
</pre><p>
                            If the value is empty, the server found some problem with
                            the key files. Check the error log for diagnostic
                            information.
                        </p><p style="color:blue;">如果该值为空，则服务器发现密钥文件有问题。检查错误日志以获取诊断信息。</p></li></ol>
                    </div>
                    <p>
                        After the server has been configured with the RSA key files,
                        accounts that authenticate with the
                        <code class="literal">sha256_password</code> plugin have the option of
                        using those key files to connect to the server. As mentioned
                        previously, such accounts can use either a secure connection
                        (in which case RSA is not used) or an unencrypted connection
                        that performs password exchange using RSA. Suppose that an
                        unencrypted connection is used. For example:
                    </p><p style="color:blue;">使用rsa密钥文件配置服务器后，使用sha256_密码插件进行身份验证的帐户可以选择使用这些密钥文件连接到服务器。如前所述，此类帐户可以使用安全连接（在这种情况下不使用rsa）或使用rsa执行密码交换的未加密连接。假设使用了未加密的连接。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --ssl-mode=DISABLED -u sha256user -p</code></strong>
Enter password: <em class="replaceable"><code>password</code></em>
</pre><p>
                    For this connection attempt by <code class="literal">sha256user</code>,
                    the server determines that <code class="literal">sha256_password</code>
                    is the appropriate authentication plugin and invokes it
                    (because that was the plugin specified at
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> time). The plugin
                    finds that the connection is not encrypted and thus requires
                    the password to be transmitted using RSA encryption. In this
                    case, the plugin sends the RSA public key to the client, which
                    uses it to encrypt the password and returns the result to the
                    server. The plugin uses the RSA private key on the server side
                    to decrypt the password and accepts or rejects the connection
                    based on whether the password is correct.
                </p><p style="color:blue;">对于SHA256USER的此连接尝试，服务器确定SHA256U密码是适当的身份验证插件并调用它（因为这是在创建用户时指定的插件）。插件发现连接未加密，因此需要使用rsa加密来传输密码。在这种情况下，插件将rsa公钥发送给客户端，客户端使用它来加密密码并将结果返回给服务器。插件使用服务器端的rsa私钥解密密码，并根据密码是否正确接受或拒绝连接。</p><p>
                    The server sends the RSA public key to the client as needed.
                    However, if the client has a file containing a local copy of
                    the RSA public key required by the server, it can specify the
                    file using the
                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a> option:
                </p><p style="color:blue;">服务器根据需要向客户端发送rsa公钥。但是，如果客户端有包含服务器所需的rsa公钥的本地副本的文件，则可以使用--server public key path选项指定该文件：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --ssl-mode=DISABLED -u sha256user -p --server-public-key-path=<em class="replaceable"><code>file_name</code></em></code></strong>
Enter password: <em class="replaceable"><code>password</code></em>
</pre><p>
                    The public key value in the file named by the
                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a> option
                    should be the same as the key value in the server-side file
                    named by the
                    <a class="link" href="server-administration.html#sysvar_sha256_password_public_key_path"><code class="literal">sha256_password_public_key_path</code></a>
                    system variable. If the key file contains a valid public key
                    value but the value is incorrect, an access-denied error
                    occurs. If the key file does not contain a valid public key,
                    the client program cannot use it. In this case, the
                    <code class="literal">sha256_password</code> plugin sends the public key
                    to the client as if no
                    <a class="link" href="programs.html#option_mysql_server-public-key-path"><code class="option">--server-public-key-path</code></a> option
                    had been specified.
                </p><p style="color:blue;">由--server public key path选项命名的文件中的公钥值应与由SHA256_password_public_key_path系统变量命名的服务器端文件中的密钥值相同。如果密钥文件包含有效的公钥值，但该值不正确，则会发生拒绝访问错误。如果密钥文件不包含有效的公钥，则客户端程序无法使用它。在本例中，sha256_密码插件将公钥发送到客户端，就好像没有指定--server公钥路径选项一样。</p><p>
                    Client users can obtain the RSA public key two ways:
                </p><p style="color:blue;">客户端用户可以通过两种方式获取RSA公钥：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The database administrator can provide a copy of the
                            public key file.
                        </p><p style="color:blue;">数据库管理员可以提供公钥文件的副本。</p></li><li class="listitem"><p>
                            A client user who can connect to the server some other way
                            can use a <code class="literal">SHOW STATUS LIKE
                            'Rsa_public_key'</code> statement and save the returned
                            key value in a file.
                        </p><p style="color:blue;">可以通过其他方式连接到服务器的客户端用户可以使用“rsa_public_key”语句之类的显示状态，并将返回的密钥值保存在文件中。</p></li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="cleartext-pluggable-authentication"></a>6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286886075504"></a><a class="indexterm" name="idm140286886074400"></a><p>
                A client-side authentication plugin is available that enables
                clients to send passwords to the server as cleartext, without
                hashing or encryption. This plugin is built into the MySQL
                client library.
            </p><p style="color:blue;">有一个客户端身份验证插件，使客户端能够以明文形式向服务器发送密码，而无需哈希或加密。这个插件内置在mysql客户端库中。</p><p>
                The following table shows the plugin name.
            </p><p style="color:blue;">下表显示了插件名称。</p>
                <div class="table">
                    <a name="idm140286886071808"></a><p class="title"><b>Table&nbsp;6.12&nbsp;Plugin and Library Names for Cleartext Authentication</b></p><p style="color:blue;">表6.12明文认证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for cleartext password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td>None, see discussion</td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">mysql_clear_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td>None (plugin is built in)</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                Many client-side authentication plugins perform hashing or
                encryption of a password before the client sends it to the
                server. This enables clients to avoid sending passwords as
                cleartext.
            </p><p style="color:blue;">许多客户端身份验证插件在客户端将密码发送到服务器之前对其执行哈希或加密。这使客户端能够避免以明文形式发送密码。</p><p>
                Hashing or encryption cannot be done for authentication schemes
                that require the server to receive the password as entered on
                the client side. In such cases, the client-side
                <code class="literal">mysql_clear_password</code> plugin is used, which
                enables the client to send the password to the server as
                cleartext. There is no corresponding server-side plugin. Rather,
                <code class="literal">mysql_clear_password</code> can be used on the
                client side in concert with any server-side plugin that needs a
                cleartext password. (Examples are the PAM and simple LDAP
                authentication plugins; see
                <a class="xref" href="security.html#pam-pluggable-authentication" title="6.4.1.7&nbsp;PAM Pluggable Authentication">Section&nbsp;6.4.1.7, “PAM Pluggable Authentication”</a>, and
                <a class="xref" href="security.html#ldap-pluggable-authentication" title="6.4.1.9&nbsp;LDAP Pluggable Authentication">Section&nbsp;6.4.1.9, “LDAP Pluggable Authentication”</a>.)
            </p><p style="color:blue;">无法对要求服务器接收在客户端输入的密码的身份验证方案执行哈希或加密。在这种情况下，使用客户端mysql_clear_password插件，它使客户端能够将密码作为明文发送到服务器。没有相应的服务器端插件。相反，mysql_clear_password可以与任何需要cleartext密码的服务器端插件一起在客户端使用。（例如pam和简单的ldap身份验证插件；请参阅6.4.1.7节，“pam可插拔身份验证”和6.4.1.9节，“ldap可插拔身份验证”。）</p><p>
                The following discussion provides usage information specific to
                cleartext pluggable authentication. For general information
                about pluggable authentication in MySQL, see
                <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
            </p><p style="color:blue;">下面的讨论提供了特定于cleartext可插入认证的使用信息。有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Sending passwords as cleartext may be a security problem in
                        some configurations. To avoid problems if there is any
                        possibility that the password would be intercepted, clients
                        should connect to MySQL Server using a method that protects
                        the password. Possibilities include SSL (see
                        <a class="xref" href="security.html#encrypted-connections" title="6.3&nbsp;Using Encrypted Connections">Section&nbsp;6.3, “Using Encrypted Connections”</a>), IPsec, or a private
                        network.
                    </p><p style="color:blue;">在某些配置中，以明文形式发送密码可能是一个安全问题。为了避免密码可能被截获时出现问题，客户端应该使用保护密码的方法连接到mysql服务器。可能包括ssl（参见第6.3节，“使用加密连接”）、ipsec或专用网络。</p>
                </div>
                <p>
                    To make inadvertent use of the
                    <code class="literal">mysql_clear_password</code> plugin less likely,
                    MySQL clients must explicitly enable it. This can be done in
                    several ways:
                </p><p style="color:blue;">为了减少无意中使用mysql_clear_密码插件的可能性，mysql客户端必须显式启用它。这可以通过几种方式实现：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Set the <code class="literal">LIBMYSQL_ENABLE_CLEARTEXT_PLUGIN</code>
                        environment variable to a value that begins with
                        <code class="literal">1</code>, <code class="literal">Y</code>, or
                        <code class="literal">y</code>. This enables the plugin for all client
                        connections.
                    </p><p style="color:blue;">将libmysql_enable_cleartext_plugin环境变量设置为以1、y或y开头的值。这将为所有客户端连接启用该插件。</p></li><li class="listitem"><p>
                        The <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>, <a class="link" href="programs.html#mysqladmin" title="4.5.2&nbsp;mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin</strong></span></a>,
                        and <a class="link" href="programs.html#mysqlslap" title="4.5.8&nbsp;mysqlslap — Load Emulation Client"><span class="command"><strong>mysqlslap</strong></span></a> client programs (also
                        <a class="link" href="programs.html#mysqlcheck" title="4.5.3&nbsp;mysqlcheck — A Table Maintenance Program"><span class="command"><strong>mysqlcheck</strong></span></a>, <a class="link" href="programs.html#mysqldump" title="4.5.4&nbsp;mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>,
                        and <a class="link" href="programs.html#mysqlshow" title="4.5.7&nbsp;mysqlshow — Display Database, Table, and Column Information"><span class="command"><strong>mysqlshow</strong></span></a> for MySQL 5.7.10 and later)
                        support an <code class="option">--enable-cleartext-plugin</code> option
                        that enables the plugin on a per-invocation basis.
                    </p><p style="color:blue;">mysql、mysqladmin和mysqlslap客户端程序（也包括mysqlcheck、mysqldump和mysqlshow for mysql 5.7.10及更高版本）支持--enable cleartext plugin选项，该选项在每次调用的基础上启用插件。</p></li><li class="listitem"><p>
                        The <a class="link" href="connectors-apis.html#mysql-options" title="27.8.7.50&nbsp;mysql_options()"><code class="literal">mysql_options()</code></a> C API
                        function supports a
                        <code class="literal">MYSQL_ENABLE_CLEARTEXT_PLUGIN</code> option that
                        enables the plugin on a per-connection basis. Also, any
                        program that uses <code class="literal">libmysqlclient</code> and
                        reads option files can enable the plugin by including an
                        <code class="literal">enable-cleartext-plugin</code> option in an
                        option group read by the client library.
                    </p><p style="color:blue;">mysql_options（）c api函数支持mysql_enable_cleartext_plugin选项，该选项在每个连接的基础上启用该插件。此外，任何使用libmysqlclient并读取选项文件的程序都可以通过在客户端库读取的选项组中包含enable cleartext plugin选项来启用插件。</p></li></ul>
                </div>

            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="pam-pluggable-authentication"></a>6.4.1.7&nbsp;PAM Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286886030720"></a><a class="indexterm" name="idm140286886029616"></a><a class="indexterm" name="idm140286886028128"></a><a class="indexterm" name="idm140286886026656"></a><a class="indexterm" name="idm140286886025184"></a><a class="indexterm" name="idm140286886024096"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        PAM pluggable authentication is an extension included in
                        MySQL Enterprise Edition, a commercial product. To learn more about commercial
                        products, see <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                    </p><p style="color:blue;">pam可插拔身份验证是mysql企业版（一种商业产品）中包含的扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
                </div>
                <p>
                    MySQL Enterprise Edition supports an authentication method that enables MySQL
                    Server to use PAM (Pluggable Authentication Modules) to
                    authenticate MySQL users. PAM enables a system to use a standard
                    interface to access various kinds of authentication methods,
                    such as traditional Unix passwords or an LDAP directory.
                </p><p style="color:blue;">mysql企业版支持一种身份验证方法，使mysql服务器能够使用pam（可插入的身份验证模块）对mysql用户进行身份验证。pam使系统能够使用标准接口访问各种身份验证方法，例如传统的unix密码或ldap目录。</p><p>
                PAM pluggable authentication provides these capabilities:
            </p><p style="color:blue;">pam可插拔身份验证提供了以下功能：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        External authentication: PAM authentication enables MySQL
                        Server to accept connections from users defined outside the
                        MySQL grant tables and that authenticate using methods
                        supported by PAM.
                    </p><p style="color:blue;">外部身份验证：pam身份验证使mysql服务器能够接受来自mysql授权表外部定义的用户的连接，这些用户使用pam支持的方法进行身份验证。</p></li><li class="listitem"><p>
                        Proxy user support: PAM authentication can return to MySQL a
                        user name different from the external user name passed by
                        the client program, based on the PAM groups the external
                        user is a member of and the authentication string provided.
                        This means that the plugin can return the MySQL user that
                        defines the privileges the external PAM-authenticated user
                        should have. For example, an operating sytem user named
                        <code class="literal">joe</code> can connect and have the privileges
                        of a MySQL user named <code class="literal">developer</code>.
                    </p><p style="color:blue;">代理用户支持：pam身份验证可以根据外部用户所属的pam组和提供的身份验证字符串，向mysql返回与客户端程序传递的外部用户名不同的用户名。这意味着插件可以返回mysql用户，该用户定义外部pam身份验证用户应该具有的权限。例如，名为joe的操作系统用户可以连接并拥有名为developer的mysql用户的权限。</p></li></ul>
                </div>
                <p>
                    PAM pluggable authentication has been tested on Linux and macOS.
                </p><p style="color:blue;">pam可插拔认证已经在linux和macos上进行了测试。</p><p>
                The following table shows the plugin and library file names. The
                file name suffix might differ on your system. The file must be
                located in the directory named by the
                <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable. For
                installation information, see
                <a class="xref" href="security.html#pam-pluggable-authentication-installation" title="Installing PAM Pluggable Authentication">Installing PAM Pluggable Authentication</a>.
            </p><p style="color:blue;">下表显示了插件和库文件名。系统上的文件名后缀可能不同。文件必须位于plugin_dir系统变量命名的目录中。有关安装信息，请参阅安装pam可插入身份验证。</p>
                <div class="table">
                    <a name="idm140286886012304"></a><p class="title"><b>Table&nbsp;6.13&nbsp;Plugin and Library Names for PAM Authentication</b></p><p style="color:blue;">表6.13 PAM身份验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for PAM password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">authentication_pam</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">mysql_clear_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td><code class="filename">authentication_pam.so</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The client-side <code class="literal">mysql_clear_password</code>
                cleartext plugin that communicates with the server-side PAM
                plugin is built into the <code class="literal">libmysqlclient</code>
                client library and is included in all distributions, including
                community distributions. Inclusion of the client-side cleartext
                plugin in all MySQL distributions enables clients from any
                distribution to connect to a server that has the server-side PAM
                plugin loaded.
            </p><p style="color:blue;">与服务器端pam插件通信的客户端mysql_clear_password cleartext插件内置于libmysqlclient客户端库中，并包含在所有发行版（包括社区发行版）中。在所有mysql发行版中包含客户端cleartext插件使任何发行版的客户端都可以连接到加载了服务器端pam插件的服务器。</p><p>
                The following sections provide installation and usage
                information specific to PAM pluggable authentication:
            </p><p style="color:blue;">以下部分提供特定于pam可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#pam-pluggable-authentication-how-it-works" title="How PAM Authentication of MySQL Users Works">How PAM Authentication of MySQL Users Works</a></p><p style="color:blue;">mysql用户的pam身份验证工作原理</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-pluggable-authentication-installation" title="Installing PAM Pluggable Authentication">Installing PAM Pluggable Authentication</a></p><p style="color:blue;">安装pam可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-pluggable-authentication-uninstallation" title="Uninstalling PAM Pluggable Authentication">Uninstalling PAM Pluggable Authentication</a></p><p style="color:blue;">卸载pam可插入身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-pluggable-authentication-usage" title="Using PAM Pluggable Authentication">Using PAM Pluggable Authentication</a></p><p style="color:blue;">使用pam可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-authentication-unix-without-proxy" title="PAM Unix Password Authentication without Proxy Users">PAM Unix Password Authentication without Proxy Users</a></p><p style="color:blue;">无代理用户的pam unix密码身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-authentication-ldap-without-proxy" title="PAM LDAP Authentication without Proxy Users">PAM LDAP Authentication without Proxy Users</a></p><p style="color:blue;">无代理用户的pam ldap身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-authentication-unix-with-proxy" title="PAM Unix Password Authentication with Proxy Users and Group Mapping">PAM Unix Password Authentication with Proxy Users and Group Mapping</a></p><p style="color:blue;">带有代理用户和组映射的pam unix密码身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-authentication-unix-password-store" title="PAM Authentication Access to Unix Password Store">PAM Authentication Access to Unix Password Store</a></p><p style="color:blue;">对unix密码存储的pam身份验证访问</p></li><li class="listitem"><p><a class="xref" href="security.html#pam-pluggable-authentication-debugging" title="PAM Authentication Debugging">PAM Authentication Debugging</a></p><p style="color:blue;">PAM身份验证调试</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. For information
                    about the <code class="literal">mysql_clear_password</code> plugin, see
                    <a class="xref" href="security.html#cleartext-pluggable-authentication" title="6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.6, “Client-Side Cleartext Pluggable Authentication”</a>. For proxy
                    user information, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。有关mysql_clear_password插件的信息，请参阅第6.4.1.6节“客户端cleartext可插入身份验证”。有关代理用户信息，请参见第6.2.14节“代理用户”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="pam-pluggable-authentication-how-it-works"></a>How PAM Authentication of MySQL Users Works</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        This section provides a general overview of how MySQL and PAM
                        work together to authenticate MySQL users. For examples
                        showing how to set up MySQL accounts to use specific PAM
                        services, see
                        <a class="xref" href="security.html#pam-pluggable-authentication-usage" title="Using PAM Pluggable Authentication">Using PAM Pluggable Authentication</a>.
                    </p><p style="color:blue;">本节概述了mysql和pam如何协同工作来验证mysql用户。有关如何设置mysql帐户以使用特定pam服务的示例，请参阅使用pam可插入身份验证。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            The client program and the server communicate, with the
                            client sending to the server the client user name (the
                            operating system user name by default) and password:
                        </p><p style="color:blue;">客户端程序和服务器通信，客户端向服务器发送客户端用户名（默认为操作系统用户名）和密码：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    The client user name is the external user name.
                                </p><p style="color:blue;">客户端用户名是外部用户名。</p></li><li class="listitem"><p>
                                    For accounts that use the PAM server-side
                                    authentication plugin, the corresponding client-side
                                    plugin is <code class="literal">mysql_clear_password</code>.
                                    This client-side plugin performs no password hashing,
                                    with the result that the client sends the password to
                                    the server as cleartext.
                                </p><p style="color:blue;">对于使用pam服务器端身份验证插件的帐户，对应的客户端插件是mysql_clear_password。这个客户端插件不执行密码散列，结果是客户端将密码作为明文发送到服务器。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            The server finds a matching MySQL account based on the
                            external user name and the host from which the client
                            connects. The PAM plugin uses the information passed to it
                            by MySQL Server (such as user name, host name, password,
                            and authentication string). When you define a MySQL
                            account that authenticates using PAM, the authentication
                            string contains:
                        </p><p style="color:blue;">服务器根据外部用户名和客户端连接的主机查找匹配的mysql帐户。pam插件使用mysql服务器传递给它的信息（例如用户名、主机名、密码和身份验证字符串）。定义使用pam进行身份验证的mysql帐户时，身份验证字符串包含：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    A PAM service name, which is a name that the system
                                    administrator can use to refer to an authentication
                                    method for a particular application. There can be
                                    multiple applications associated with a single
                                    database server instance, so the choice of service
                                    name is left to the SQL application developer.
                                </p><p style="color:blue;">pam服务名称，系统管理员可以使用该名称来引用特定应用程序的身份验证方法。可以有多个应用程序与一个数据库服务器实例关联，因此服务名称的选择权留给SQL应用程序开发人员。</p></li><li class="listitem"><p>
                                    Optionally, if proxying is to be used, a mapping from
                                    PAM groups to MySQL user names.
                                </p><p style="color:blue;">（可选）如果要使用代理，则从pam组到mysql用户名的映射。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            The plugin uses the PAM service named in the
                            authentication string to check the user credentials and
                            returns <code class="literal">'Authentication succeeded, Username is
                            <em class="replaceable"><code>user_name</code></em>'</code> or
                            <code class="literal">'Authentication failed'</code>. The password
                            must be appropriate for the password store used by the PAM
                            service. Examples:
                        </p><p style="color:blue;">插件使用身份验证字符串中命名的pam服务检查用户凭据，并返回“身份验证成功，用户名为用户名”或“身份验证失败”。密码必须适合pam服务使用的密码存储。示例：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    For traditional Unix passwords, the service looks up
                                    passwords stored in the
                                    <code class="filename">/etc/shadow</code> file.
                                </p><p style="color:blue;">对于传统的unix密码，该服务查找存储在/etc/shadow文件中的密码。</p></li><li class="listitem"><p>
                                    For LDAP, the service looks up passwords stored in an
                                    LDAP directory.
                                </p><p style="color:blue;">对于LDAP，该服务查找存储在LDAP目录中的密码。</p></li></ul>
                            </div>
                            <p>
                                If the credentials check fails, the server refuses the
                                connection.
                            </p><p style="color:blue;">如果凭据检查失败，服务器将拒绝连接。</p></li><li class="listitem"><p>
                            Otherwise, the authentication string indicates whether
                            proxying occurs. If the string contains no PAM group
                            mapping, proxying does not occur. In this case, the MySQL
                            user name is the same as the external user name.
                        </p><p style="color:blue;">否则，验证字符串指示是否进行代理。如果字符串不包含pam组映射，则不会进行代理。在本例中，mysql用户名与外部用户名相同。</p></li><li class="listitem"><p>
                            Otherwise, proxying is indicated based on the PAM group
                            mapping, with the MySQL user name determined based on the
                            first matching group in the mapping list. The meaning of
                            <span class="quote">“<span class="quote">PAM group</span>”</span> depends on the PAM service.
                            Examples:
                        </p><p style="color:blue;">否则，代理将基于pam组映射指示，mysql用户名将基于映射列表中的第一个匹配组确定。“pam group”的含义取决于pam服务。示例：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    For traditional Unix passwords, groups are Unix groups
                                    defined in the <code class="filename">/etc/group</code> file,
                                    possibly supplemented with additional PAM information
                                    in a file such as
                                    <code class="filename">/etc/security/group.conf</code>.
                                </p><p style="color:blue;">对于传统的unix密码，组是在/etc/group文件中定义的unix组，可能会在/etc/security/group.conf文件中添加额外的pam信息。</p></li><li class="listitem"><p>
                                    For LDAP, groups are LDAP groups defined in an LDAP
                                    directory.
                                </p><p style="color:blue;">对于LDAP，组是在LDAP目录中定义的LDAP组。</p></li></ul>
                            </div>
                            <p>
                                If the proxy user (the external user) has the
                                <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for the
                                proxied MySQL user name, proxying occurs, with the proxy
                                user assuming the privileges of the proxied user.
                            </p><p style="color:blue;">如果代理用户（外部用户）具有代理MySQL用户名的代理特权，则代理用户假定代理用户的特权发生代理。</p></li></ol>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-pluggable-authentication-installation"></a>Installing PAM Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes how to install the PAM authentication
                        plugin. For general information about installing plugins, see
                        <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                    </p><p style="color:blue;">本节介绍如何安装pam身份验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    The plugin library file base name is
                    <code class="literal">authentication_pam</code>. The file name suffix
                    differs per platform (for example, <code class="filename">.so</code>
                    for Unix and Unix-like systems, <code class="filename">.dll</code> for
                    Windows).
                </p><p style="color:blue;">插件库文件的基本名称是authentication_pam。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                    To load the plugin at server startup, use the
                    <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to
                    name the library file that contains it. With this
                    plugin-loading method, the option must be given each time the
                    server starts. For example, put these lines in the server
                    <code class="filename">my.cnf</code> file (adjust the
                    <code class="filename">.so</code> suffix for your platform as
                    necessary):
                </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含该插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=authentication_pam.so
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    Alternatively, to load the plugin at runtime, use this
                    statement (adjust the <code class="filename">.so</code> suffix for your
                    platform as necessary):
                </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN authentication_pam SONAME 'authentication_pam.so';
</pre><p>
                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                    immediately, and also registers it in the
                    <code class="literal">mysql.plugins</code> system table to cause the
                    server to load it for each subsequent normal startup without
                    the need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
                </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
                    or use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>
                    statement (see
                    <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE '%pam%';</code></strong>
+--------------------+---------------+
| PLUGIN_NAME        | PLUGIN_STATUS |
+--------------------+---------------+
| authentication_pam | ACTIVE        |
+--------------------+---------------+
</pre><p>
                    If the plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                    To associate MySQL accounts with the PAM plugin, see
                    <a class="xref" href="security.html#pam-pluggable-authentication-usage" title="Using PAM Pluggable Authentication">Using PAM Pluggable Authentication</a>.
                </p><p style="color:blue;">要将mysql帐户与pam插件关联，请参阅使用pam可插入身份验证。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-pluggable-authentication-uninstallation"></a>Uninstalling PAM Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The method used to uninstall the PAM authentication plugin
                        depends on how you installed it:
                    </p><p style="color:blue;">用于卸载pam身份验证插件的方法取决于安装方式：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you installed the plugin at server startup using a
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option,
                            restart the server without the option.
                        </p><p style="color:blue;">如果在服务器启动时使用--plugin load add选项安装插件，请在没有该选项的情况下重新启动服务器。</p></li><li class="listitem"><p>
                            If you installed the plugin at runtime using an
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement,
                            it remains installed across server restarts. To uninstall
                            it, use <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>:
                        </p><p style="color:blue;">如果在运行时使用install-plugin语句安装插件，则在服务器重新启动时仍会安装该插件。要卸载它，请使用卸载插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN authentication_pam;
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-pluggable-authentication-usage"></a>Using PAM Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes in general terms how to use the PAM
                        authentication plugin to connect from MySQL client programs to
                        the server. The following sections provide instructions for
                        using PAM authentication in specific ways. It is assumed that
                        the server is running with the server-side PAM plugin enabled,
                        as described in
                        <a class="xref" href="security.html#pam-pluggable-authentication-installation" title="Installing PAM Pluggable Authentication">Installing PAM Pluggable Authentication</a>.
                    </p><p style="color:blue;">本节一般介绍如何使用pam身份验证插件从mysql客户端程序连接到服务器。以下各节提供了以特定方式使用pam身份验证的说明。假设服务器运行时启用了服务器端pam插件，如安装pam可插入身份验证中所述。</p><p>
                    To refer to the PAM authentication plugin in the
                    <code class="literal">IDENTIFIED WITH</code> clause of a
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement, use the
                    name <code class="literal">authentication_pam</code>. For example:
                </p><p style="color:blue;">要引用create user语句的identified with子句中的pam authentication插件，请使用authentication-pam这个名称。例如：</p><pre data-lang="sql" class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH authentication_pam
  AS '<em class="replaceable"><code>auth_string</code></em>';
</pre><p>
                    The authentication string specifies the following types of
                    information:
                </p><p style="color:blue;">身份验证字符串指定以下类型的信息：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The PAM service name (see
                            <a class="xref" href="security.html#pam-pluggable-authentication-how-it-works" title="How PAM Authentication of MySQL Users Works">How PAM Authentication of MySQL Users Works</a>).
                            Examples in the following discussion use a service name of
                            <code class="literal">mysql-unix</code> for authentication using
                            traditional Unix passwords, and
                            <code class="literal">mysql-ldap</code> for authentication using
                            LDAP.
                        </p><p style="color:blue;">pam服务名称（请参阅mysql用户的pam身份验证工作原理）。以下讨论中的示例使用mysql unix的服务名使用传统unix密码进行身份验证，使用mysql ldap进行身份验证。</p></li><li class="listitem"><p>
                            For proxy support, PAM provides a way for a PAM module to
                            return to the server a MySQL user name other than the
                            external user name passed by the client program when it
                            connects to the server. Use the authentication string to
                            control the mapping from external user names to MySQL user
                            names. If you want to take advantage of proxy user
                            capabilities, the authentication string must include this
                            kind of mapping.
                        </p><p style="color:blue;">对于代理支持，pam提供了一种方法，使pam模块可以将mysql用户名返回给服务器，而不是客户端程序在连接到服务器时传递的外部用户名。使用身份验证字符串控制从外部用户名到mysql用户名的映射。如果要利用代理用户功能，则验证字符串必须包含此类映射。</p></li></ul>
                    </div>
                    <p>
                        For example, if an account uses the
                        <code class="literal">mysql-unix</code> PAM service name and should map
                        operating system users in the <code class="literal">root</code> and
                        <code class="literal">users</code> PAM groups to the
                        <code class="literal">developer</code> and <code class="literal">data_entry</code>
                        MySQL users, respectively, use a statement like this:
                    </p><p style="color:blue;">例如，如果一个帐户使用mysql unix pam服务名称，并且应该将根用户和用户pam组中的操作系统用户分别映射到开发人员和数据输入mysql用户，请使用如下语句：</p><pre data-lang="sql" class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH authentication_pam
  AS 'mysql-unix, root=developer, users=data_entry';
</pre><p>
                    Authentication string syntax for the PAM authentication plugin
                    follows these rules:
                </p><p style="color:blue;">pam身份验证插件的身份验证字符串语法遵循以下规则：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The string consists of a PAM service name, optionally
                            followed by a PAM group mapping list consisting of one or
                            more keyword/value pairs each specifying a PAM group name
                            and a MySQL user name:
                        </p><p style="color:blue;">字符串由pam服务名组成，后面是pam组映射列表（可选），该列表由一个或多个关键字/值对组成，每个关键字/值对指定pam组名和mysql用户名：</p><pre data-lang="none" class="programlisting"><em class="replaceable"><code>pam_service_name</code></em>[,<em class="replaceable"><code>pam_group_name</code></em>=<em class="replaceable"><code>mysql_user_name</code></em>]...
</pre><p>
                            The plugin parses the authentication string for each
                            connection attempt that uses the account. To minimize
                            overhead, keep the string as short as possible.
                        </p><p style="color:blue;">该插件为每个使用该帐户的连接尝试解析身份验证字符串。要尽量减少开销，请使字符串尽可能短。</p></li><li class="listitem"><p>
                            Each
                            <code class="literal"><em class="replaceable"><code>pam_group_name</code></em>=<em class="replaceable"><code>mysql_user_name</code></em></code>
                            pair must be preceded by a comma.
                        </p><p style="color:blue;">每个pam_group_name=mysql_user_name对前面必须加逗号。</p></li><li class="listitem"><p>
                            Leading and trailing spaces not inside double quotation
                            marks are ignored.
                        </p><p style="color:blue;">不在双引号内的前导和尾随空格将被忽略。</p></li><li class="listitem"><p>
                            Unquoted <em class="replaceable"><code>pam_service_name</code></em>,
                            <em class="replaceable"><code>pam_group_name</code></em>, and
                            <em class="replaceable"><code>mysql_user_name</code></em> values can
                            contain anything except equal sign, comma, or space.
                        </p><p style="color:blue;">未引用的pam_service_name、pam_group_name和mysql_user_name值可以包含除等号、逗号或空格之外的任何内容。</p></li><li class="listitem"><p>
                            If a <em class="replaceable"><code>pam_service_name</code></em>,
                            <em class="replaceable"><code>pam_group_name</code></em>, or
                            <em class="replaceable"><code>mysql_user_name</code></em> value is quoted
                            with double quotation marks, everything between the
                            quotation marks is part of the value. This is necessary,
                            for example, if the value contains space characters. All
                            characters are legal except double quotation mark and
                            backslash (<code class="literal">\</code>). To include either
                            character, escape it with a backslash.
                        </p><p style="color:blue;">如果pam_service_name、pam_group_name或mysql_user_name值用双引号引起来，则引号之间的所有内容都是该值的一部分。例如，如果值包含空格字符，则这是必需的。所有字符都是合法的，除了双引号和反斜杠（\）。要包含任一字符，请用反斜杠转义。</p></li></ul>
                    </div>
                    <p>
                        If the plugin successfully authenticates the external user
                        name (the name passed by the client), it looks for a PAM group
                        mapping list in the authentication string and, if present,
                        uses it to return a different MySQL user name to the MySQL
                        server based on which PAM groups the external user is a member
                        of:
                    </p><p style="color:blue;">如果插件成功地验证了外部用户名（客户端传递的名称），它将在验证字符串中查找pam group mapping列表，如果存在，则使用该列表将不同的mysql用户名返回到mysql服务器，根据该mysql服务器，外部用户是以下服务器的成员：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the authentication string contains no PAM group mapping
                            list, the plugin returns the external name.
                        </p><p style="color:blue;">如果验证字符串不包含pam组映射列表，则插件将返回外部名称。</p></li><li class="listitem"><p>
                            If the authentication string does contain a PAM group
                            mapping list, the plugin examines each
                            <code class="literal"><em class="replaceable"><code>pam_group_name</code></em>=<em class="replaceable"><code>mysql_user_name</code></em></code>
                            pair in the list from left to right and tries to find a
                            match for the <em class="replaceable"><code>pam_group_name</code></em>
                            value in a non-MySQL directory of the groups assigned to
                            the authenticated user and returns
                            <em class="replaceable"><code>mysql_user_name</code></em> for the first
                            match it finds. If the plugin finds no match for any PAM
                            group, it returns the external name. If the plugin is not
                            capable of looking up a group in a directory, it ignores
                            the PAM group mapping list and returns the external name.
                        </p><p style="color:blue;">如果验证字符串确实包含pam group mapping list，插件将从左到右检查列表中的每个pam_group_name=mysql_user_name对，并尝试在分配给已验证用户的组的非mysql目录中查找pam_group_name值的匹配项，并返回找到的第一个匹配项的mysql_user_name。如果插件找不到任何pam组的匹配项，它将返回外部名称。如果插件无法在目录中查找组，它将忽略pam组映射列表并返回外部名称。</p></li></ul>
                    </div>
                    <p>
                        The following sections describe how to set up several
                        authentication scenarios that use the PAM authentication
                        plugin:
                    </p><p style="color:blue;">以下各节介绍如何设置使用pam身份验证插件的多个身份验证方案：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            No proxy users. This uses PAM only to check login names
                            and passwords. Every external user permitted to connect to
                            MySQL Server should have a matching MySQL account that is
                            defined to use PAM authentication. (For a MySQL account of
                            <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'</code>
                            to match the external user,
                            <em class="replaceable"><code>user_name</code></em> must be the external
                            user name and <em class="replaceable"><code>host_name</code></em> must
                            match the host from which the client connects.)
                            Authentication can be performed by various PAM-supported
                            methods. Later discussion shows how to authenticate client
                            credentials using traditional Unix passwords, and
                            passwords in LDAP.
                        </p><p style="color:blue;">没有代理用户。这只使用pam来检查登录名和密码。允许连接到mysql服务器的每个外部用户都应该有一个匹配的mysql帐户，该帐户被定义为使用pam身份验证。（对于“用户名”@“主机名”的MySQL帐户，要与外部用户匹配，用户名必须是外部用户名，主机名必须与客户端连接的主机匹配。）可以通过各种PAM支持的方法执行身份验证。稍后的讨论将展示如何使用传统的unix密码和ldap中的密码对客户端凭据进行身份验证。</p><p>
                            PAM authentication, when not done through proxy users or
                            PAM groups, requires the MySQL user name to be same as the
                            operating system user name. MySQL user names are limited
                            to 32 characters (see <a class="xref" href="security.html#grant-tables" title="6.2.3&nbsp;Grant Tables">Section&nbsp;6.2.3, “Grant Tables”</a>),
                            which limits PAM nonproxy authentication to Unix accounts
                            with names of at most 32 characters.
                        </p><p style="color:blue;">pam身份验证（如果不是通过代理用户或pam组完成）要求mysql用户名与操作系统用户名相同。mysql用户名限制为32个字符（请参阅6.2.3节，“授权表”），它将pam非代理身份验证限制为名称最多为32个字符的unix帐户。</p></li><li class="listitem"><p>
                            Proxy users only, with PAM group mapping. For this
                            scenario, create one or more MySQL accounts that define
                            different sets of privileges. (Ideally, nobody should
                            connect using those accounts directly.) Then define a
                            default user authenticating through PAM that uses some
                            mapping scheme (usually based on the external PAM groups
                            the users are members of) to map all the external user
                            names to the few MySQL accounts holding the privilege
                            sets. Any client who connects and specifies an external
                            user name as the client user name is mapped to one of the
                            MySQL accounts and uses its privileges. The discussion
                            shows how to set this up using traditional Unix passwords,
                            but other PAM methods such as LDAP could be used instead.
                        </p><p style="color:blue;">仅代理用户，具有pam组映射。对于这个场景，创建一个或多个mysql帐户来定义不同的特权集。（理想情况下，没有人应该直接使用这些帐户进行连接。）然后定义一个通过pam进行身份验证的默认用户，该pam使用某种映射方案（通常基于用户所属的外部pam组）将所有外部用户名映射到持有权限集的少数mysql帐户。任何连接并指定外部用户名作为客户端用户名的客户端都将映射到一个mysql帐户并使用其权限。讨论展示了如何使用传统的unix密码来设置它，但是可以使用其他pam方法（比如ldap）。</p></li></ul>
                    </div>
                    <p>
                        Variations on these scenarios are possible:
                    </p><p style="color:blue;">这些场景可能会有变化：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            You can permit some users to log in directly (without
                            proxying) but require others to connect through proxy
                            accounts.
                        </p><p style="color:blue;">您可以允许某些用户直接登录（无需代理），但要求其他用户通过代理帐户连接。</p></li><li class="listitem"><p>
                            You can use one PAM authentication method for some users,
                            and another method for other users, by using differing PAM
                            service names among your PAM-authenticated accounts. For
                            example, you can use the <code class="literal">mysql-unix</code> PAM
                            service for some users, and <code class="literal">mysql-ldap</code>
                            for others.
                        </p><p style="color:blue;">通过在经过pam身份验证的帐户中使用不同的pam服务名称，可以为某些用户使用一种pam身份验证方法，为其他用户使用另一种方法。例如，可以对某些用户使用mysql unix pam服务，对其他用户使用mysql ldap。</p></li></ul>
                    </div>
                    <p>
                        The examples make the following assumptions. You might need to
                        make some adjustments if your system is set up differently.
                    </p><p style="color:blue;">这些例子做出了以下假设。如果系统设置不同，可能需要进行一些调整。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The login name and password are <code class="literal">antonio</code>
                            and <em class="replaceable"><code>antonio_password</code></em>,
                            respectively. Change these to correspond to the user you
                            want to authenticate.
                        </p><p style="color:blue;">登录名和密码分别是antonio和antonio_password。将这些更改为与要进行身份验证的用户相对应。</p></li><li class="listitem"><p>
                            The PAM configuration directory is
                            <code class="filename">/etc/pam.d</code>.
                        </p><p style="color:blue;">pam配置目录是/etc/pam.d。</p></li><li class="listitem"><p>
                            The PAM service name corresponds to the authentication
                            method (<code class="literal">mysql-unix</code> or
                            <code class="literal">mysql-ldap</code> in this discussion). To use
                            a given PAM service, you must set up a PAM file with the
                            same name in the PAM configuration directory (creating the
                            file if it does not exist). In addition, you must name the
                            PAM service in the authentication string of the
                            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement for
                            any account that authenticates using that PAM service.
                        </p><p style="color:blue;">pam服务名对应于身份验证方法（本文讨论的是mysql unix或mysql ldap）。若要使用给定的PAM服务，必须在PAM配置目录中设置同名的PAM文件（如果文件不存在则创建文件）。此外，必须在create user语句的身份验证字符串中为使用pam服务进行身份验证的任何帐户命名pam服务。</p></li></ul>
                    </div>
                    <p>
                        The PAM authentication plugin checks at initialization time
                        whether the <code class="literal">AUTHENTICATION_PAM_LOG</code>
                        environment value is set in the server's startup environment.
                        If so, the plugin enables logging of diagnostic messages to
                        the standard output. Depending on how your server is started,
                        the message might appear on the console or in the error log.
                        These messages can be helpful for debugging PAM-related issues
                        that occur when the plugin performs authentication. For more
                        information, see
                        <a class="xref" href="security.html#pam-pluggable-authentication-debugging" title="PAM Authentication Debugging">PAM Authentication Debugging</a>.
                    </p><p style="color:blue;">pam authentication插件在初始化时检查是否在服务器的启动环境中设置了authentication_pam_log environment值。如果是的话，这个插件可以将诊断消息记录到标准输出中。根据服务器的启动方式，消息可能会显示在控制台或错误日志中。这些消息有助于调试插件执行身份验证时发生的与pam相关的问题。有关详细信息，请参阅pam身份验证调试。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-authentication-unix-without-proxy"></a>PAM Unix Password Authentication without Proxy Users</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This authentication scenario uses PAM to check external users
                        defined in terms of operating system user names and Unix
                        passwords, without proxying. Every such external user
                        permitted to connect to MySQL Server should have a matching
                        MySQL account that is defined to use PAM authentication
                        through traditional Unix password store.
                    </p><p style="color:blue;">此身份验证方案使用pam检查根据操作系统用户名和unix密码定义的外部用户，而不进行代理。允许连接到mysql服务器的每个这样的外部用户都应该有一个匹配的mysql帐户，该帐户被定义为通过传统的unix密码存储使用pam身份验证。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Traditional Unix passwords are checked using the
                            <code class="filename">/etc/shadow</code> file. For information
                            regarding possible issues related to this file, see
                            <a class="xref" href="security.html#pam-authentication-unix-password-store" title="PAM Authentication Access to Unix Password Store">PAM Authentication Access to Unix Password Store</a>.
                        </p><p style="color:blue;">使用/etc/shadow文件检查传统的unix密码。有关与此文件相关的可能问题的信息，请参阅pam authentication access to unix password store。</p>
                    </div>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Verify that Unix authentication permits logins to the
                            operating system with the user name
                            <code class="literal">antonio</code> and password
                            <em class="replaceable"><code>antonio_password</code></em>.
                        </p><p style="color:blue;">验证Unix身份验证是否允许使用用户名antonio和密码antonio_password登录到操作系统。</p></li><li class="listitem"><p>
                            Set up PAM to authenticate MySQL connections using
                            traditional Unix passwords by creating a
                            <code class="literal">mysql-unix</code> PAM service file named
                            <code class="filename">/etc/pam.d/mysql-unix</code>. The file
                            contents are system dependent, so check existing
                            login-related files in the <code class="filename">/etc/pam.d</code>
                            directory to see what they look like. On Linux, the
                            <code class="filename">mysql-unix</code> file might look like this:
                        </p><p style="color:blue;">通过创建名为/etc/pam.d/mysql-unix的mysql unix pam服务文件，设置pam以使用传统unix密码验证mysql连接。文件内容与系统相关，因此检查/ETC/PAAM.D目录中现有的登录相关文件以查看它们的外观。在Linux上，mysql unix文件可能如下所示：</p><pre data-lang="none" class="programlisting">#%PAM-1.0
auth            include         password-auth
account         include         password-auth
</pre><p>
                            For macOS, use <code class="literal">login</code> rather than
                            <code class="literal">password-auth</code>.
                        </p><p style="color:blue;">对于MacOS，使用登录而不是密码验证。</p><p>
                            The PAM file format might differ on some systems. For
                            example, on Ubuntu and other Debian-based systems, use
                            these file contents instead:
                        </p><p style="color:blue;">在某些系统上，pam文件格式可能不同。例如，在ubuntu和其他基于debian的系统上，使用以下文件内容：</p><pre data-lang="none" class="programlisting">@include common-auth
@include common-account
@include common-session-noninteractive
</pre></li><li class="listitem"><p>
                            Create a MySQL account with the same user name as the
                            operating system user name and define it to authenticate
                            using the PAM plugin and the <code class="literal">mysql-unix</code>
                            PAM service:
                        </p><p style="color:blue;">使用与操作系统用户名相同的用户名创建一个mysql帐户，并定义它以使用pam插件和mysql unix pam服务进行身份验证：</p><pre data-lang="sql" class="programlisting">CREATE USER 'antonio'@'localhost'
  IDENTIFIED WITH authentication_pam
  AS 'mysql-unix';
GRANT ALL PRIVILEGES
  ON mydb.*
  TO 'antonio'@'localhost';
</pre><p>
                            Here, the authentication string contains only the PAM
                            service name, <code class="literal">mysql-unix</code>, which
                            authenticates Unix passwords.
                        </p><p style="color:blue;">在这里，身份验证字符串只包含pam服务名mysql unix，它对unix密码进行身份验证。</p></li><li class="listitem"><p>
                            Use the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command-line client to
                            connect to the MySQL server as <code class="literal">antonio</code>.
                            For example:
                        </p><p style="color:blue;">使用mysql命令行客户机作为antonio连接到mysql服务器。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=antonio --password --enable-cleartext-plugin</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>antonio_password</code></em></code></strong>
</pre><p>
                            The server should permit the connection and the following
                            query should return output as shown:
                        </p><p style="color:blue;">服务器应允许连接，以下查询应返回如下所示的输出：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-------------------+-------------------+--------------+
| USER()            | CURRENT_USER()    | @@proxy_user |
+-------------------+-------------------+--------------+
| antonio@localhost | antonio@localhost | NULL         |
+-------------------+-------------------+--------------+
</pre><p>
                            This demonstrates that the <code class="literal">antonio</code>
                            operating system user is authenticated to have the
                            privileges granted to the <code class="literal">antonio</code> MySQL
                            user, and that no proxying has occurred.
                        </p><p style="color:blue;">这表明antonio操作系统用户经过身份验证，拥有授予antonio mysql用户的权限，并且没有发生代理。</p></li></ol>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            The client-side <code class="literal">mysql_clear_password</code>
                            authentication plugin leaves the password untouched, so
                            client programs send it to the MySQL server as cleartext.
                            This enables the password to be passed as is to PAM. A
                            cleartext password is necessary to use the server-side PAM
                            library, but may be a security problem in some
                            configurations. These measures minimize the risk:
                        </p><p style="color:blue;">客户端mysql_clear_password authentication插件使密码保持不变，因此客户端程序将其作为cleartext发送到mysql服务器。这使密码能够像传递给pam一样传递。使用服务器端pam库需要明文密码，但在某些配置中可能存在安全问题。这些措施将风险降至最低：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                To make inadvertent use of the
                                <code class="literal">mysql_clear_password</code> plugin less
                                likely, MySQL clients must explicitly enable it (for
                                example, with the
                                <code class="option">--enable-cleartext-plugin</code> option). See
                                <a class="xref" href="security.html#cleartext-pluggable-authentication" title="6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.6, “Client-Side Cleartext Pluggable Authentication”</a>.
                            </p><p style="color:blue;">为了减少无意中使用mysql_clear_password插件的可能性，mysql客户机必须显式地启用它（例如，使用--enable cleartext plugin选项）。见第6.4.1.6节，“客户端明文可插拔认证”。</p></li><li class="listitem"><p>
                                To avoid password exposure with the
                                <code class="literal">mysql_clear_password</code> plugin enabled,
                                MySQL clients should connect to the MySQL server using
                                an encrypted connection. See
                                <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                            </p><p style="color:blue;">为避免启用mysql_clear_密码插件时暴露密码，mysql客户端应使用加密连接连接到mysql服务器。请参阅6.3.1节，“配置MySQL以使用加密连接”。</p></li></ul>
                        </div>

                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-authentication-ldap-without-proxy"></a>PAM LDAP Authentication without Proxy Users</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This authentication scenario uses PAM to check external users
                        defined in terms of operating system user names and LDAP
                        passwords, without proxying. Every such external user
                        permitted to connect to MySQL Server should have a matching
                        MySQL account that is defined to use PAM authentication
                        through LDAP.
                    </p><p style="color:blue;">此身份验证方案使用pam检查根据操作系统用户名和ldap密码定义的外部用户，而无需代理。允许连接到mysql服务器的每个这样的外部用户都应该有一个匹配的mysql帐户，该帐户被定义为通过ldap使用pam身份验证。</p><p>
                    To use PAM LDAP pluggable authentication for MySQL, these
                    prerequisites must be satisfied:
                </p><p style="color:blue;">要对mysql使用pam ldap可插入身份验证，必须满足以下先决条件：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            An LDAP server must be available for the PAM LDAP service
                            to communicate with.
                        </p><p style="color:blue;">必须有LDAP服务器才能与PAM LDAP服务通信。</p></li><li class="listitem"><p>
                            LDAP users to be authenticated by MySQL must be present in
                            the directory managed by the LDAP server.
                        </p><p style="color:blue;">要通过mysql验证的ldap用户必须存在于ldap服务器管理的目录中。</p></li></ul>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Another way to use LDAP for MySQL user authentication is to
                            use the LDAP-specific authentication plugins. See
                            <a class="xref" href="security.html#ldap-pluggable-authentication" title="6.4.1.9&nbsp;LDAP Pluggable Authentication">Section&nbsp;6.4.1.9, “LDAP Pluggable Authentication”</a>.
                        </p><p style="color:blue;">使用ldap进行mysql用户身份验证的另一种方法是使用特定于ldap的身份验证插件。参见第6.4.1.9节“LDAP可插拔身份验证”。</p>
                    </div>
                    <p>
                        Configure MySQL for PAM LDAP authentication as follows:
                    </p><p style="color:blue;">为pam ldap身份验证配置mysql，如下所示：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Verify that Unix authentication permits logins to the
                            operating system with the user name
                            <code class="literal">antonio</code> and password
                            <em class="replaceable"><code>antonio_password</code></em>.
                        </p><p style="color:blue;">验证Unix身份验证是否允许使用用户名antonio和密码antonio_password登录到操作系统。</p></li><li class="listitem"><p>
                            Set up PAM to authenticate MySQL connections using LDAP by
                            creating a <code class="literal">mysql-ldap</code> PAM service file
                            named <code class="filename">/etc/pam.d/mysql-ldap</code>. The file
                            contents are system dependent, so check existing
                            login-related files in the <code class="filename">/etc/pam.d</code>
                            directory to see what they look like. On Linux, the
                            <code class="filename">mysql-ldap</code> file might look like this:
                        </p><p style="color:blue;">通过创建名为/etc/pam.d/mysql-ldap的mysql ldap pam服务文件，设置pam以使用ldap验证mysql连接。文件内容与系统相关，因此检查/ETC/PAAM.D目录中现有的登录相关文件以查看它们的外观。在Linux上，mysql ldap文件可能如下所示：</p><pre data-lang="none" class="programlisting">#%PAM-1.0
auth        required    pam_ldap.so
account     required    pam_ldap.so
</pre><p>
                            If PAM object files have a suffix different from
                            <code class="filename">.so</code> on your system, substitute the
                            correct suffix.
                        </p><p style="color:blue;">如果pam对象文件的后缀与.so不同，请在系统中替换正确的后缀。</p><p>
                            The PAM file format might differ on some systems.
                        </p><p style="color:blue;">在某些系统上，pam文件格式可能不同。</p></li><li class="listitem"><p>
                            Create a MySQL account with the same user name as the
                            operating system user name and define it to authenticate
                            using the PAM plugin and the <code class="literal">mysql-ldap</code>
                            PAM service:
                        </p><p style="color:blue;">使用与操作系统用户名相同的用户名创建一个mysql帐户，并定义它以使用pam插件和mysql ldap pam服务进行身份验证：</p><pre data-lang="sql" class="programlisting">CREATE USER 'antonio'@'localhost'
  IDENTIFIED WITH authentication_pam
  AS 'mysql-ldap';
GRANT ALL PRIVILEGES
  ON mydb.*
  TO 'antonio'@'localhost';
</pre><p>
                            Here, the authentication string contains only the PAM
                            service name, <code class="literal">mysql-ldap</code>, which
                            authenticates using LDAP.
                        </p><p style="color:blue;">这里，身份验证字符串只包含pam服务名mysql ldap，它使用ldap进行身份验证。</p></li><li class="listitem"><p>
                            Connecting to the server is the same as described in
                            <a class="xref" href="security.html#pam-authentication-unix-without-proxy" title="PAM Unix Password Authentication without Proxy Users">PAM Unix Password Authentication without Proxy Users</a>.
                        </p><p style="color:blue;">连接到服务器与pam unix password authentication（不带代理用户）中描述的相同。</p></li></ol>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-authentication-unix-with-proxy"></a>PAM Unix Password Authentication with Proxy Users and Group Mapping</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286885797104"></a><p>
                    The authentication scheme described here uses proxying and PAM
                    group mapping to map connecting MySQL users who authenticate
                    using PAM onto other MySQL accounts that define different sets
                    of privileges. Users do not connect directly through the
                    accounts that define the privileges. Instead, they connect
                    through a default proxy account authenticated using PAM, such
                    that all the external users are mapped to the MySQL accounts
                    that hold the privileges. Any user who connects using the
                    proxy account is mapped to one of those MySQL accounts, the
                    privileges for which determine the database operations
                    permitted to the external user.
                </p><p style="color:blue;">这里描述的身份验证方案使用代理和pam组映射将使用pam进行身份验证的mysql用户映射到定义不同权限集的其他mysql帐户。用户不直接通过定义权限的帐户进行连接。相反，它们通过使用pam进行身份验证的默认代理帐户进行连接，这样所有外部用户都映射到拥有特权的mysql帐户。使用代理帐户连接的任何用户都将映射到其中一个mysql帐户，该帐户的权限决定允许外部用户执行的数据库操作。</p><p>
                    The procedure shown here uses Unix password authentication. To
                    use LDAP instead, see the early steps of
                    <a class="xref" href="security.html#pam-authentication-ldap-without-proxy" title="PAM LDAP Authentication without Proxy Users">PAM LDAP Authentication without Proxy Users</a>.
                </p><p style="color:blue;">此处显示的过程使用Unix密码身份验证。要改用LDAP，请参阅不带代理用户的PAM LDAP身份验证的早期步骤。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Traditional Unix passwords are checked using the
                            <code class="filename">/etc/shadow</code> file. For information
                            regarding possible issues related to this file, see
                            <a class="xref" href="security.html#pam-authentication-unix-password-store" title="PAM Authentication Access to Unix Password Store">PAM Authentication Access to Unix Password Store</a>.
                        </p><p style="color:blue;">使用/etc/shadow文件检查传统的unix密码。有关与此文件相关的可能问题的信息，请参阅pam authentication access to unix password store。</p>
                    </div>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Verify that Unix authentication permits logins to the
                            operating system with the user name
                            <code class="literal">antonio</code> and password
                            <em class="replaceable"><code>antonio_password</code></em>.
                        </p><p style="color:blue;">验证Unix身份验证是否允许使用用户名antonio和密码antonio_password登录到操作系统。</p></li><li class="listitem"><p>
                            Verify that <code class="literal">antonio</code> is a member of the
                            <code class="literal">root</code> or <code class="literal">users</code> PAM
                            group.
                        </p><p style="color:blue;">验证antonio是根用户pam组的成员。</p></li><li class="listitem"><p>
                            Set up PAM to authenticate the
                            <code class="literal">mysql-unix</code> PAM service through
                            operating system users by creating a file named
                            <code class="filename">/etc/pam.d/mysql-unix</code>. The file
                            contents are system dependent, so check existing
                            login-related files in the <code class="filename">/etc/pam.d</code>
                            directory to see what they look like. On Linux, the
                            <code class="filename">mysql-unix</code> file might look like this:
                        </p><p style="color:blue;">通过创建名为/etc/pam.d/mysql-unix的文件，设置pam以通过操作系统用户验证mysql unix pam服务。文件内容与系统相关，因此检查/ETC/PAAM.D目录中现有的登录相关文件以查看它们的外观。在Linux上，mysql unix文件可能如下所示：</p><pre data-lang="none" class="programlisting">#%PAM-1.0
auth            include         password-auth
account         include         password-auth
</pre><p>
                            For macOS, use <code class="literal">login</code> rather than
                            <code class="literal">password-auth</code>.
                        </p><p style="color:blue;">对于MacOS，使用登录而不是密码验证。</p><p>
                            The PAM file format might differ on some systems. For
                            example, on Ubuntu and other Debian-based systems, use
                            these file contents instead:
                        </p><p style="color:blue;">在某些系统上，pam文件格式可能不同。例如，在ubuntu和其他基于debian的系统上，使用以下文件内容：</p><pre data-lang="none" class="programlisting">@include common-auth
@include common-account
@include common-session-noninteractive
</pre></li><li class="listitem"><p>
                            Create a default proxy user (<code class="literal">''@''</code>)
                            that maps external PAM users to the proxied accounts:
                        </p><p style="color:blue;">创建一个默认的代理用户（“@”），将外部PAM用户映射到代理帐户：</p><pre data-lang="sql" class="programlisting">CREATE USER ''@''
  IDENTIFIED WITH authentication_pam
  AS 'mysql-unix, root=developer, users=data_entry';
</pre><p>
                            Here, the authentication string contains the PAM service
                            name, <code class="literal">mysql-unix</code>, which authenticates
                            Unix passwords. The authentication string also maps
                            external users in the <code class="literal">root</code> and
                            <code class="literal">users</code> PAM groups to the
                            <code class="literal">developer</code> and
                            <code class="literal">data_entry</code> MySQL user names,
                            respectively.
                        </p><p style="color:blue;">这里，身份验证字符串包含pam服务名mysql unix，用于验证unix密码。身份验证字符串还将根组和用户pam组中的外部用户分别映射到developer和data_entry mysql用户名。</p><p>
                            The PAM group mapping list following the PAM service name
                            is required when you set up proxy users. Otherwise, the
                            plugin cannot tell how to perform mapping from external
                            user names to the proper proxied MySQL user names.
                        </p><p style="color:blue;">当您设置代理用户时，需要在pam服务名称后面的pam组映射列表。否则，插件无法告诉如何执行从外部用户名到适当代理的MySQL用户名的映射。</p>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    If your MySQL installation has anonymous users, they
                                    might conflict with the default proxy user. For more
                                    information about this issue, and ways of dealing with
                                    it, see <a class="xref" href="security.html#proxy-users-conflicts" title="Default Proxy User and Anonymous User Conflicts">Default Proxy User and Anonymous User Conflicts</a>.
                                </p><p style="color:blue;">如果您的mysql安装有匿名用户，它们可能与默认代理用户冲突。有关此问题及其处理方法的详细信息，请参阅默认代理用户和匿名用户冲突。</p>
                            </div>
                        </li><li class="listitem"><p>
                            Create the proxied accounts and grant to them the
                            privileges required for MySQL access:
                        </p><p style="color:blue;">创建代理帐户并授予MySQL访问所需的特权：</p><pre data-lang="sql" class="programlisting">CREATE USER 'developer'@'localhost'
  IDENTIFIED WITH mysql_no_login;
CREATE USER 'data_entry'@'localhost'
  IDENTIFIED WITH mysql_no_login;

GRANT ALL PRIVILEGES
  ON mydevdb.*
  TO 'developer'@'localhost';
GRANT ALL PRIVILEGES
  ON mydb.*
  TO 'data_entry'@'localhost';
</pre><p>
                            The proxied accounts use the
                            <code class="literal">mysql_no_login</code> authentication plugin to
                            prevent clients from using the accounts to log in directly
                            to the MySQL server. Instead, it is expected that users
                            who authenticate using PAM will use the
                            <code class="literal">developer</code> or
                            <code class="literal">data_entry</code> account by proxy based on
                            their PAM group. (This assumes that the plugin is
                            installed. For instructions, see
                            <a class="xref" href="security.html#no-login-pluggable-authentication" title="6.4.1.10&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.10, “No-Login Pluggable Authentication”</a>.) For
                            alternative methods of protecting proxied accounts against
                            direct use, see
                            <a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
                        </p><p style="color:blue;">代理帐户使用MySQL LoNoLogIn身份验证插件来防止客户端使用帐户直接登录到MySQL服务器。相反，预期使用pam进行身份验证的用户将根据其pam组通过代理使用开发人员或数据输入帐户。（这假设插件已安装。有关说明，请参阅第6节4.4.1.10节，“没有登录可插入的认证”。对于保护代理帐户的替代方法不直接使用，请参阅防止直接登录代理帐户。</p></li><li class="listitem"><p>
                            Grant to the proxy account the
                            <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for each
                            proxied account:
                        </p><p style="color:blue;">给代理帐户授予代理权限：</p><pre data-lang="sql" class="programlisting">GRANT PROXY
  ON 'developer'@'localhost'
  TO ''@'';
GRANT PROXY
  ON 'data_entry'@'localhost'
  TO ''@'';
</pre></li><li class="listitem"><p>
                            Use the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command-line client to
                            connect to the MySQL server as <code class="literal">antonio</code>.
                        </p><p style="color:blue;">使用mysql命令行客户机作为antonio连接到mysql服务器。</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=antonio --password --enable-cleartext-plugin</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>antonio_password</code></em></code></strong>
</pre><p>
                            The server authenticates the connection using the default
                            <code class="literal">''@''</code> proxy account. The resulting
                            privileges for <code class="literal">antonio</code> depend on which
                            PAM groups <code class="literal">antonio</code> is a member of. If
                            <code class="option">antonio</code> is a member of the
                            <code class="literal">root</code> PAM group, the PAM plugin maps
                            <code class="literal">root</code> to the
                            <code class="literal">developer</code> MySQL user name and returns
                            that name to the server. The server verifies that
                            <code class="literal">''@''</code> has the
                            <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for
                            <code class="literal">developer</code> and permits the connection.
                            The following query should return output as shown:
                        </p><p style="color:blue;">服务器使用默认的“@”代理帐户对连接进行身份验证。安东尼奥的特权取决于安东尼奥是哪个pam组的成员。如果antonio是根pam组的成员，pam插件将根映射到开发人员mysql用户名，并将该名称返回到服务器。服务器验证“@”是否具有开发人员的代理权限并允许连接。以下查询应返回如下所示的输出：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-------------------+---------------------+--------------+
| USER()            | CURRENT_USER()      | @@proxy_user |
+-------------------+---------------------+--------------+
| antonio@localhost | developer@localhost | ''@''        |
+-------------------+---------------------+--------------+
</pre><p>
                            This demonstrates that the <code class="literal">antonio</code>
                            operating system user is authenticated to have the
                            privileges granted to the <code class="literal">developer</code>
                            MySQL user, and that proxying occurred through the default
                            proxy account.
                        </p><p style="color:blue;">这表明Antonio操作系统用户已通过身份验证，具有授予开发人员MySQL用户的权限，并且通过默认代理帐户进行代理。</p><p>
                            If <code class="literal">antonio</code> is not a member of the
                            <code class="literal">root</code> PAM group but is a member of the
                            <code class="literal">users</code> PAM group, a similar process
                            occurs, but the plugin maps <code class="literal">user</code> PAM
                            group membership to the <code class="literal">data_entry</code>
                            MySQL user name and returns that name to the server:
                        </p><p style="color:blue;">如果antonio不是根pam组的成员，而是用户pam组的成员，则会发生类似的过程，但插件会将用户pam组成员身份映射到数据项mysql用户名，并将该名称返回到服务器：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-------------------+----------------------+--------------+
| USER()            | CURRENT_USER()       | @@proxy_user |
+-------------------+----------------------+--------------+
| antonio@localhost | data_entry@localhost | ''@''        |
+-------------------+----------------------+--------------+
</pre><p>
                            This demonstrates that the <code class="literal">antonio</code>
                            operating system user is authenticated to have the
                            privileges of the <code class="literal">data_entry</code> MySQL
                            user, and that proxying occurred through the default proxy
                            account.
                        </p><p style="color:blue;">这表明Antonio操作系统用户经过身份验证，具有数据入口MySQL用户的权限，并且通过默认代理帐户进行代理。</p></li></ol>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            The client-side <code class="literal">mysql_clear_password</code>
                            authentication plugin leaves the password untouched, so
                            client programs send it to the MySQL server as cleartext.
                            This enables the password to be passed as is to PAM. A
                            cleartext password is necessary to use the server-side PAM
                            library, but may be a security problem in some
                            configurations. These measures minimize the risk:
                        </p><p style="color:blue;">客户端mysql_clear_password authentication插件使密码保持不变，因此客户端程序将其作为cleartext发送到mysql服务器。这使密码能够像传递给pam一样传递。使用服务器端pam库需要明文密码，但在某些配置中可能存在安全问题。这些措施将风险降至最低：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                To make inadvertent use of the
                                <code class="literal">mysql_clear_password</code> plugin less
                                likely, MySQL clients must explicitly enable it (for
                                example, with the
                                <code class="option">--enable-cleartext-plugin</code> option). See
                                <a class="xref" href="security.html#cleartext-pluggable-authentication" title="6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.6, “Client-Side Cleartext Pluggable Authentication”</a>.
                            </p><p style="color:blue;">为了减少无意中使用mysql_clear_password插件的可能性，mysql客户机必须显式地启用它（例如，使用--enable cleartext plugin选项）。见第6.4.1.6节，“客户端明文可插拔认证”。</p></li><li class="listitem"><p>
                                To avoid password exposure with the
                                <code class="literal">mysql_clear_password</code> plugin enabled,
                                MySQL clients should connect to the MySQL server using
                                an encrypted connection. See
                                <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                            </p><p style="color:blue;">为避免启用mysql_clear_密码插件时暴露密码，mysql客户端应使用加密连接连接到mysql服务器。请参阅6.3.1节，“配置MySQL以使用加密连接”。</p></li></ul>
                        </div>

                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-authentication-unix-password-store"></a>PAM Authentication Access to Unix Password Store</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        On some systems, Unix authentication uses a password store
                        such as <code class="filename">/etc/shadow</code>, a file that
                        typically has restricted access permissions. This can cause
                        MySQL PAM-based authentication to fail. Unfortunately, the PAM
                        implementation does not permit distinguishing <span class="quote">“<span class="quote">password
          could not be checked</span>”</span> (due, for example, to inability
                        to read <code class="filename">/etc/shadow</code>) from <span class="quote">“<span class="quote">password
          does not match.</span>”</span> If you are using Unix password store
                        for PAM authentication, you may be able to enable access to it
                        from MySQL using one of the following methods:
                    </p><p style="color:blue;">在某些系统上，unix身份验证使用密码存储，如/etc/shadow，该文件通常具有受限的访问权限。这可能会导致基于mysql pam的身份验证失败。遗憾的是，pam实现不允许将“password could not check”（例如，由于无法读取/etc/shadow）与“password not match”（密码不匹配）区分开来。如果使用unix密码存储进行pam身份验证，则可以使用以下方法之一从mysql访问它：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Assuming that the MySQL server is run from the
                            <code class="literal">mysql</code> operating system account, put
                            that account in the <code class="literal">shadow</code> group that
                            has <code class="filename">/etc/shadow</code> access:
                        </p><p style="color:blue;">假设mysql服务器是从mysql操作系统帐户运行的，将该帐户放入具有/etc/shadow访问权限的卷影组中：</p>
                            <div class="orderedlist">
                                <ol class="orderedlist" type="1"><li class="listitem"><p>
                                    Create a <code class="literal">shadow</code> group in
                                    <code class="filename">/etc/group</code>.
                                </p><p style="color:blue;">在/etc/group中创建一个阴影组。</p></li><li class="listitem"><p>
                                    Add the <code class="literal">mysql</code> operating system user
                                    to the <code class="literal">shadow</code> group in
                                    <code class="filename">/etc/group</code>.
                                </p><p style="color:blue;">将mysql操作系统用户添加到/etc/group中的shadow组。</p></li><li class="listitem"><p>
                                    Assign <code class="filename">/etc/group</code> to the
                                    <code class="literal">shadow</code> group and enable the group
                                    read permission:
                                </p><p style="color:blue;">将/etc/group分配给卷影组并启用组读取权限：</p><pre data-lang="terminal" class="programlisting">chgrp shadow /etc/shadow
chmod g+r /etc/shadow
</pre></li><li class="listitem"><p>
                                    Restart the MySQL server.
                                </p><p style="color:blue;">重新启动mysql服务器。</p></li></ol>
                            </div>
                        </li><li class="listitem"><p>
                            If you are using the <code class="literal">pam_unix</code> module
                            and the <span class="command"><strong>unix_chkpwd</strong></span> utility, enable
                            password store access as follows:
                        </p><p style="color:blue;">如果使用的是pam_unix模块和unix_chkpwd实用程序，请按如下方式启用密码存储访问：</p><pre data-lang="terminal" class="programlisting">chmod u-s /usr/sbin/unix_chkpwd
setcap cap_dac_read_search+ep /usr/sbin/unix_chkpwd
</pre><p>
                            Adjust the path to <span class="command"><strong>unix_chkpwd</strong></span> as
                            necessary for your platform.
                        </p><p style="color:blue;">根据平台的需要调整到unix chkpwd的路径。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="pam-pluggable-authentication-debugging"></a>PAM Authentication Debugging</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286885699584"></a><a class="indexterm" name="idm140286885698480"></a><p>
                    The PAM authentication plugin checks at initialization time
                    whether the <code class="literal">AUTHENTICATION_PAM_LOG</code>
                    environment value is set (the value does not matter). If so,
                    the plugin enables logging of diagnostic messages to the
                    standard output. These messages may be helpful for debugging
                    PAM-related issues that occur when the plugin performs
                    authentication.
                </p><p style="color:blue;">pam authentication插件在初始化时检查是否设置了authentication_pam_log environment值（该值无关紧要）。如果是的话，这个插件可以将诊断消息记录到标准输出中。这些消息可能有助于调试插件执行身份验证时发生的与pam相关的问题。</p><p>
                    Some messages include reference to PAM plugin source files and
                    line numbers, which enables plugin actions to be tied more
                    closely to the location in the code where they occur.
                </p><p style="color:blue;">一些消息包括对pam插件源文件的引用和行号，这使得插件操作能够更紧密地绑定到代码中它们发生的位置。</p><p>
                    Another technique for debugging connection failures and
                    determining what is happening during connection attempts is to
                    configure PAM authentication to permit all connections, then
                    check the system log files. This technique should be used only
                    on a <span class="emphasis"><em>temporary</em></span> basis, and not on a
                    production server.
                </p><p style="color:blue;">另一种调试连接失败并确定连接尝试期间发生的情况的技术是将pam身份验证配置为允许所有连接，然后检查系统日志文件。这种技术只能在临时基础上使用，不能在生产服务器上使用。</p><p>
                    Configure a PAM service file named
                    <code class="filename">/etc/pam.d/mysql-any-password</code> with these
                    contents (the format may differ on some systems):
                </p><p style="color:blue;">使用这些内容配置名为/etc/pam.d/mysql-any-password的pam服务文件（在某些系统上格式可能不同）：</p><pre data-lang="none" class="programlisting">#%PAM-1.0
auth        required    pam_permit.so
account     required    pam_permit.so
</pre><p>
                    Create an account that uses the PAM plugin and names the
                    <code class="literal">mysql-any-password</code> PAM service:
                </p><p style="color:blue;">创建一个使用pam插件并命名mysql any password pam服务的帐户：</p><pre data-lang="sql" class="programlisting">CREATE USER 'testuser'@'localhost'
  IDENTIFIED WITH authentication_pam
  AS 'mysql-any-password';
</pre><p>
                    The <code class="literal">mysql-any-password</code> service file causes
                    any authentication attempt to return true, even for incorrect
                    passwords. If an authentication attempt fails, that tells you
                    the configuration problem is on the MySQL side. Otherwise, the
                    problem is on the operating system/PAM side. To see what might
                    be happening, check system log files such as
                    <code class="filename">/var/log/secure</code>,
                    <code class="filename">/var/log/audit.log</code>,
                    <code class="filename">/var/log/syslog</code>, or
                    <code class="filename">/var/log/messages</code>.
                </p><p style="color:blue;">mysql any password服务文件会导致任何身份验证尝试返回true，即使密码不正确。如果身份验证尝试失败，说明配置问题在mysql方面。否则，问题就出在操作系统/pam方面。要查看可能发生的情况，请检查系统日志文件，如/var/log/secure、/var/log/audit.log、/var/log/syslog或/var/log/messages。</p><p>
                    After determining what the problem is, remove the
                    <code class="filename">mysql-any-password</code> PAM service file to
                    disable any-password access.
                </p><p style="color:blue;">确定问题所在后，删除mysql any password pam服务文件以禁用任何密码访问。</p>
                </div>

            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="windows-pluggable-authentication"></a>6.4.1.8&nbsp;Windows Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286885682160"></a><a class="indexterm" name="idm140286885681056"></a><a class="indexterm" name="idm140286885679568"></a><a class="indexterm" name="idm140286885678464"></a><a class="indexterm" name="idm140286885676960"></a><a class="indexterm" name="idm140286885675456"></a><a class="indexterm" name="idm140286885673952"></a><a class="indexterm" name="idm140286885672864"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Windows pluggable authentication is an extension included in
                        MySQL Enterprise Edition, a commercial product. To learn more about commercial
                        products, see <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                    </p><p style="color:blue;">windows可插拔身份验证是mysql企业版（一种商业产品）中包含的扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
                </div>
                <p>
                    MySQL Enterprise Edition for Windows supports an authentication method that
                    performs external authentication on Windows, enabling MySQL
                    Server to use native Windows services to authenticate client
                    connections. Users who have logged in to Windows can connect
                    from MySQL client programs to the server based on the
                    information in their environment without specifying an
                    additional password.
                </p><p style="color:blue;">mysql enterprise edition for windows支持在windows上执行外部身份验证的身份验证方法，使mysql服务器能够使用本机windows服务对客户端连接进行身份验证。登录到Windows的用户可以根据其环境中的信息从MySQL客户端程序连接到服务器，而无需指定其他密码。</p><p>
                The client and server exchange data packets in the
                authentication handshake. As a result of this exchange, the
                server creates a security context object that represents the
                identity of the client in the Windows OS. This identity includes
                the name of the client account. Windows pluggable authentication
                uses the identity of the client to check whether it is a given
                account or a member of a group. By default, negotiation uses
                Kerberos to authenticate, then NTLM if Kerberos is unavailable.
            </p><p style="color:blue;">客户端和服务器在身份验证握手中交换数据包。此交换的结果是，服务器创建一个安全上下文对象，该对象表示Windows操作系统中客户端的标识。此标识包括客户端帐户的名称。windows可插拔身份验证使用客户端的标识来检查它是给定的帐户还是组的成员。默认情况下，协商使用kerberos进行身份验证，如果kerberos不可用，则使用ntlm。</p><p>
                Windows pluggable authentication provides these capabilities:
            </p><p style="color:blue;">Windows可插拔身份验证提供以下功能：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        External authentication: Windows authentication enables
                        MySQL Server to accept connections from users defined
                        outside the MySQL grant tables who have logged in to
                        Windows.
                    </p><p style="color:blue;">外部身份验证：windows身份验证使mysql服务器能够接受来自mysql授权表外部定义的用户的连接，这些用户已登录到windows。</p></li><li class="listitem"><p>
                        Proxy user support: Windows authentication can return to
                        MySQL a user name different from the external user name
                        passed by the client program. This means that the plugin can
                        return the MySQL user that defines the privileges the
                        external Windows-authenticated user should have. For
                        example, a Windows user named <code class="literal">joe</code> can
                        connect and have the privileges of a MySQL user named
                        <code class="literal">developer</code>.
                    </p><p style="color:blue;">代理用户支持：windows身份验证可以向mysql返回与客户端程序传递的外部用户名不同的用户名。这意味着插件可以返回mysql用户，该用户定义外部windows身份验证用户应该具有的权限。例如，名为joe的windows用户可以连接并拥有名为developer的mysql用户的权限。</p></li></ul>
                </div>
                <p>
                    The following table shows the plugin and library file names. The
                    file must be located in the directory named by the
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
                </p><p style="color:blue;">下表显示了插件和库文件名。文件必须位于plugin_dir系统变量命名的目录中。</p>
                <div class="table">
                    <a name="idm140286885661696"></a><p class="title"><b>Table&nbsp;6.14&nbsp;Plugin and Library Names for Windows Authentication</b></p><p style="color:blue;">表6.14用于Windows身份验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for Windows password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">authentication_windows</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">authentication_windows_client</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td><code class="filename">authentication_windows.dll</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The library file includes only the server-side plugin. The
                client-side plugin is built into the
                <code class="literal">libmysqlclient</code> client library.
            </p><p style="color:blue;">库文件只包括服务器端插件。客户端插件内置在libmysqlclient客户端库中。</p><p>
                The server-side Windows authentication plugin is included only
                in MySQL Enterprise Edition. It is not included in MySQL community distributions.
                The client-side plugin is included in all distributions,
                including community distributions. This permits clients from any
                distribution to connect to a server that has the server-side
                plugin loaded.
            </p><p style="color:blue;">服务器端windows身份验证插件仅包含在mysql企业版中。它不包含在mysql社区发行版中。客户端插件包含在所有发行版中，包括社区发行版。这允许来自任何发行版的客户端连接到加载了服务器端插件的服务器。</p><p>
                The Windows authentication plugin is supported on any version of
                Windows supported by MySQL 5.7 (see
                <a class="ulink" href="https://www.mysql.com/support/supportedplatforms/database.html" target="_top">https://www.mysql.com/support/supportedplatforms/database.html</a>).
            </p><p style="color:blue;">MySQL5.7支持的任何版本的Windows都支持Windows身份验证插件（请参见https://www.mysql.com/support/supportedplatforms/database.html）。</p><p>
                The following sections provide installation and usage
                information specific to Windows pluggable authentication:
            </p><p style="color:blue;">以下部分提供特定于Windows可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#windows-pluggable-authentication-installation" title="Installing Windows Pluggable Authentication">Installing Windows Pluggable Authentication</a></p><p style="color:blue;">安装Windows可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#windows-pluggable-authentication-uninstallation" title="Uninstalling Windows Pluggable Authentication">Uninstalling Windows Pluggable Authentication</a></p><p style="color:blue;">卸载Windows可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#windows-pluggable-authentication-usage" title="Using Windows Pluggable Authentication">Using Windows Pluggable Authentication</a></p><p style="color:blue;">使用windows可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. For proxy user
                    information, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。有关代理用户信息，请参见第6.2.14节“代理用户”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="windows-pluggable-authentication-installation"></a>Installing Windows Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        This section describes how to install the Windows
                        authentication plugin. For general information about
                        installing plugins, see <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                    </p><p style="color:blue;">本节介绍如何安装Windows身份验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    To load the plugin at server startup, use the
                    <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to
                    name the library file that contains it. With this
                    plugin-loading method, the option must be given each time the
                    server starts. For example, put these lines in the server
                    <code class="filename">my.cnf</code> file:
                </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含该插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=authentication_windows.dll
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    Alternatively, to load the plugin at runtime, use this
                    statement:
                </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN authentication_windows SONAME 'authentication_windows.dll';
</pre><p>
                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                    immediately, and also registers it in the
                    <code class="literal">mysql.plugins</code> system table to cause the
                    server to load it for each subsequent normal startup without
                    the need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
                </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
                    or use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>
                    statement (see
                    <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE '%windows%';</code></strong>
+------------------------+---------------+
| PLUGIN_NAME            | PLUGIN_STATUS |
+------------------------+---------------+
| authentication_windows | ACTIVE        |
+------------------------+---------------+
</pre><p>
                    If the plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                    To associate MySQL accounts with the Windows authentication
                    plugin, see
                    <a class="xref" href="security.html#windows-pluggable-authentication-usage" title="Using Windows Pluggable Authentication">Using Windows Pluggable Authentication</a>.
                    Additional plugin control is provided by the
                    <a class="link" href="server-administration.html#sysvar_authentication_windows_use_principal_name"><code class="literal">authentication_windows_use_principal_name</code></a>
                    and
                    <a class="link" href="server-administration.html#sysvar_authentication_windows_log_level"><code class="literal">authentication_windows_log_level</code></a>
                    system variables. See
                    <a class="xref" href="server-administration.html#server-system-variables" title="5.1.7&nbsp;Server System Variables">Section&nbsp;5.1.7, “Server System Variables”</a>.
                </p><p style="color:blue;">要将MySQL帐户与Windows身份验证插件关联，请参阅使用Windows可插拔身份验证。其他插件控件由authentication_windows_use_principal_name和authentication_windows_log_level系统变量提供。见第5.1.7节“服务器系统变量”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="windows-pluggable-authentication-uninstallation"></a>Uninstalling Windows Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The method used to uninstall the Windows authentication plugin
                        depends on how you installed it:
                    </p><p style="color:blue;">用于卸载Windows身份验证插件的方法取决于安装方式：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you installed the plugin at server startup using a
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option,
                            restart the server without the option.
                        </p><p style="color:blue;">如果在服务器启动时使用--plugin load add选项安装插件，请在没有该选项的情况下重新启动服务器。</p></li><li class="listitem"><p>
                            If you installed the plugin at runtime using an
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement,
                            it remains installed across server restarts. To uninstall
                            it, use <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>:
                        </p><p style="color:blue;">如果在运行时使用install-plugin语句安装插件，则在服务器重新启动时仍会安装该插件。要卸载它，请使用卸载插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN authentication_windows;
</pre></li></ul>
                    </div>
                    <p>
                        In addition, remove any startup options that set Windows
                        plugin-related system variables.
                    </p><p style="color:blue;">此外，删除任何设置windows插件相关系统变量的启动选项。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="windows-pluggable-authentication-usage"></a>Using Windows Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The Windows authentication plugin supports the use of MySQL
                        accounts such that users who have logged in to Windows can
                        connect to the MySQL server without having to specify an
                        additional password. It is assumed that the server is running
                        with the server-side plugin enabled, as described in
                        <a class="xref" href="security.html#windows-pluggable-authentication-installation" title="Installing Windows Pluggable Authentication">Installing Windows Pluggable Authentication</a>.
                        Once the DBA has enabled the server-side plugin and set up
                        accounts to use it, clients can connect using those accounts
                        with no other setup required on their part.
                    </p><p style="color:blue;">Windows身份验证插件支持使用MySQL帐户，这样登录到Windows的用户就可以连接到MySQL服务器，而无需指定额外的密码。假设服务器运行时启用了服务器端插件，如安装Windows可插拔身份验证中所述。一旦dba启用了服务器端插件并设置了使用该插件的帐户，客户端就可以使用这些帐户进行连接，而无需进行其他设置。</p><p>
                    To refer to the Windows authentication plugin in the
                    <code class="literal">IDENTIFIED WITH</code> clause of a
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement, use the
                    name <code class="literal">authentication_windows</code>. Suppose that
                    the Windows users <code class="literal">Rafal</code> and
                    <code class="literal">Tasha</code> should be permitted to connect to
                    MySQL, as well as any users in the
                    <code class="literal">Administrators</code> or <code class="literal">Power
                    Users</code> group. To set this up, create a MySQL account
                    named <code class="literal">sql_admin</code> that uses the Windows
                    plugin for authentication:
                </p><p style="color:blue;">要引用create user语句的identified with子句中的windows身份验证插件，请使用authentication\u windows名称。假设windows用户rafal和tasha应该被允许连接到mysql，以及administrators或power users组中的任何用户。要设置此设置，请创建一个名为sql_admin的MySQL帐户，该帐户使用Windows插件进行身份验证：</p><pre data-lang="sql" class="programlisting">CREATE USER sql_admin
  IDENTIFIED WITH authentication_windows
  AS 'Rafal, Tasha, Administrators, "Power Users"';
</pre><p>
                    The plugin name is <code class="literal">authentication_windows</code>.
                    The string following the <code class="literal">AS</code> keyword is the
                    authentication string. It specifies that the Windows users
                    named <code class="literal">Rafal</code> or <code class="literal">Tasha</code> are
                    permitted to authenticate to the server as the MySQL user
                    <code class="literal">sql_admin</code>, as are any Windows users in the
                    <code class="literal">Administrators</code> or <code class="literal">Power
                    Users</code> group. The latter group name contains a space,
                    so it must be quoted with double quote characters.
                </p><p style="color:blue;">插件名是authentication\u windows。as关键字后面的字符串是身份验证字符串。它指定允许名为rafal或tasha的windows用户以mysql用户sql_admin身份向服务器进行身份验证，administrators或power users组中的任何windows用户也是如此。后一个组名包含空格，因此必须用双引号字符引用。</p><p>
                    After you create the <code class="literal">sql_admin</code> account, a
                    user who has logged in to Windows can attempt to connect to
                    the server using that account:
                </p><p style="color:blue;">创建SQL_管理帐户后，已登录到Windows的用户可以尝试使用该帐户连接到服务器：</p><pre data-lang="terminal" class="programlisting">C:\&gt; <strong class="userinput"><code>mysql --user=sql_admin</code></strong>
</pre><p>
                    No password is required here. The
                    <code class="literal">authentication_windows</code> plugin uses the
                    Windows security API to check which Windows user is
                    connecting. If that user is named <code class="literal">Rafal</code> or
                    <code class="literal">Tasha</code>, or is a member of the
                    <code class="literal">Administrators</code> or <code class="literal">Power
                    Users</code> group, the server grants access and the client
                    is authenticated as <code class="literal">sql_admin</code> and has
                    whatever privileges are granted to the
                    <code class="literal">sql_admin</code> account. Otherwise, the server
                    denies access.
                </p><p style="color:blue;">这里不需要密码。身份验证Windows插件使用Windows安全API来检查哪个Windows用户正在连接。如果该用户名为rafal或tasha，或者是administrators或power users组的成员，则服务器将授予访问权限，客户端将被验证为sql_admin，并且具有授予sql_admin帐户的任何权限。否则，服务器拒绝访问。</p><p>
                    Authentication string syntax for the Windows authentication
                    plugin follows these rules:
                </p><p style="color:blue;">Windows身份验证插件的身份验证字符串语法遵循以下规则：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The string consists of one or more user mappings separated
                            by commas.
                        </p><p style="color:blue;">字符串由一个或多个由逗号分隔的用户映射组成。</p></li><li class="listitem"><p>
                            Each user mapping associates a Windows user or group name
                            with a MySQL user name:
                        </p><p style="color:blue;">每个用户映射都将Windows用户名或组名与MySQL用户名相关联：</p><pre data-lang="none" class="programlisting"><em class="replaceable"><code>win_user_or_group_name=mysql_user_name</code></em>
<em class="replaceable"><code>win_user_or_group_name</code></em>
</pre><p>
                            For the latter syntax, with no
                            <em class="replaceable"><code>mysql_user_name</code></em> value given,
                            the implicit value is the MySQL user created by the
                            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement.
                            Thus, these statements are equivalent:
                        </p><p style="color:blue;">对于后一种语法，在没有给定mysql_user_name值的情况下，隐式值是create user语句创建的mysql用户。因此，这些陈述相当于：</p><pre data-lang="sql" class="programlisting">CREATE USER sql_admin
  IDENTIFIED WITH authentication_windows
  AS 'Rafal, Tasha, Administrators, "Power Users"';

CREATE USER sql_admin
  IDENTIFIED WITH authentication_windows
  AS 'Rafal=sql_admin, Tasha=sql_admin, Administrators=sql_admin,
      "Power Users"=sql_admin';
</pre></li><li class="listitem"><p>
                            Each backslash character (<code class="literal">\</code>) in a value
                            must be doubled because backslash is the escape character
                            in MySQL strings.
                        </p><p style="color:blue;">值中的每个反斜杠字符（\）必须加倍，因为反斜杠是MySQL字符串中的转义字符。</p></li><li class="listitem"><p>
                            Leading and trailing spaces not inside double quotation
                            marks are ignored.
                        </p><p style="color:blue;">不在双引号内的前导和尾随空格将被忽略。</p></li><li class="listitem"><p>
                            Unquoted <em class="replaceable"><code>win_user_or_group_name</code></em>
                            and <em class="replaceable"><code>mysql_user_name</code></em> values can
                            contain anything except equal sign, comma, or space.
                        </p><p style="color:blue;">未引用的win_user_或_group_name和mysql_user_name值可以包含除等号、逗号或空格之外的任何内容。</p></li><li class="listitem"><p>
                            If a <em class="replaceable"><code>win_user_or_group_name</code></em> and
                            or <em class="replaceable"><code>mysql_user_name</code></em> value is
                            quoted with double quotation marks, everything between the
                            quotation marks is part of the value. This is necessary,
                            for example, if the name contains space characters. All
                            characters within double quotes are legal except double
                            quotation mark and backslash. To include either character,
                            escape it with a backslash.
                        </p><p style="color:blue;">如果win_user_或_group_name和/或mysql_user_name值用双引号引起来，则引号之间的所有内容都是该值的一部分。这是必要的，例如，如果名称包含空格字符。双引号中的所有字符都是合法的，双引号和反斜杠除外。要包含任一字符，请用反斜杠转义。</p></li><li class="listitem"><p>
                            <em class="replaceable"><code>win_user_or_group_name</code></em> values
                            use conventional syntax for Windows principals, either
                            local or in a domain. Examples (note the doubling of
                            backslashes):
                        </p><p style="color:blue;">win_user_或_group_name值对windows主体（本地或域中）使用传统语法。示例（注意反斜杠加倍）：</p><pre data-lang="none" class="programlisting">domain\\user
.\\user
domain\\group
.\\group
BUILTIN\\WellKnownGroup
</pre></li></ul>
                    </div>
                    <p>
                        When invoked by the server to authenticate a client, the
                        plugin scans the authentication string left to right for a
                        user or group match to the Windows user. If there is a match,
                        the plugin returns the corresponding
                        <em class="replaceable"><code>mysql_user_name</code></em> to the MySQL
                        server. If there is no match, authentication fails.
                    </p><p style="color:blue;">当服务器调用该插件对客户端进行身份验证时，该插件将从左到右扫描身份验证字符串，以查找与windows用户匹配的用户或组。如果有匹配项，插件会将相应的mysql_用户名返回到mysql服务器。如果没有匹配项，则验证失败。</p><p>
                    A user name match takes preference over a group name match.
                    Suppose that the Windows user named
                    <code class="literal">win_user</code> is a member of
                    <code class="literal">win_group</code> and the authentication string
                    looks like this:
                </p><p style="color:blue;">用户名匹配优先于组名匹配。假设名为win_user的windows用户是win_组的成员，并且身份验证字符串如下所示：</p><pre data-lang="none" class="programlisting">'win_group = sql_user1, win_user = sql_user2'
</pre><p>
                    When <code class="literal">win_user</code> connects to the MySQL server,
                    there is a match both to <code class="literal">win_group</code> and to
                    <code class="literal">win_user</code>. The plugin authenticates the user
                    as <code class="literal">sql_user2</code> because the more-specific user
                    match takes precedence over the group match, even though the
                    group is listed first in the authentication string.
                </p><p style="color:blue;">当win_user连接到mysql服务器时，win_group和win_user是匹配的。插件将用户身份验证为sql_user2，因为更具体的用户匹配优先于组匹配，即使组在身份验证字符串中列在第一位。</p><p>
                    Windows authentication always works for connections from the
                    same computer on which the server is running. For
                    cross-computer connections, both computers must be registered
                    with Windows Active Directory. If they are in the same Windows
                    domain, it is unnecessary to specify a domain name. It is also
                    possible to permit connections from a different domain, as in
                    this example:
                </p><p style="color:blue;">Windows身份验证始终适用于运行服务器的同一台计算机上的连接。对于跨计算机连接，两台计算机都必须注册到windows活动目录。如果它们在同一个Windows域中，则无需指定域名。也可以允许来自不同域的连接，如以下示例所示：</p><pre data-lang="sql" class="programlisting">CREATE USER sql_accounting
  IDENTIFIED WITH authentication_windows
  AS 'SomeDomain\\Accounting';
</pre><p>
                    Here <code class="literal">SomeDomain</code> is the name of the other
                    domain. The backslash character is doubled because it is the
                    MySQL escape character within strings.
                </p><p style="color:blue;">这里somedomain是另一个域的名称。反斜杠字符加倍，因为它是字符串中的mysql转义字符。</p><a class="indexterm" name="idm140286885548240"></a><p>
                    MySQL supports the concept of proxy users whereby a client can
                    connect and authenticate to the MySQL server using one account
                    but while connected has the privileges of another account (see
                    <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>). Suppose that you want Windows
                    users to connect using a single user name but be mapped based
                    on their Windows user and group names onto specific MySQL
                    accounts as follows:
                </p><p style="color:blue;">mysql支持代理用户的概念，通过代理用户，客户端可以使用一个帐户连接到mysql服务器并进行身份验证，但在连接时拥有另一个帐户的权限（请参阅第6.2.14节“代理用户”）。假设您希望windows用户使用单个用户名进行连接，但要根据其windows用户名和组名映射到特定的mysql帐户，如下所示：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The <code class="literal">local_user</code> and
                            <code class="literal">MyDomain\domain_user</code> local and domain
                            Windows users should map to the
                            <code class="literal">local_wlad</code> MySQL account.
                        </p><p style="color:blue;">本地_用户和mydomain\domain_用户本地和域windows用户应映射到本地_wlad mysql帐户。</p></li><li class="listitem"><p>
                            Users in the <code class="literal">MyDomain\Developers</code> domain
                            group should map to the <code class="literal">local_dev</code> MySQL
                            account.
                        </p><p style="color:blue;">mydomain\developers域组中的用户应映射到本地的_dev mysql帐户。</p></li><li class="listitem"><p>
                            Local machine administrators should map to the
                            <code class="literal">local_admin</code> MySQL account.
                        </p><p style="color:blue;">本地计算机管理员应映射到本地的管理员mysql帐户。</p></li></ul>
                    </div>
                    <p>
                        To set this up, create a proxy account for Windows users to
                        connect to, and configure this account so that users and
                        groups map to the appropriate MySQL accounts
                        (<code class="literal">local_wlad</code>, <code class="literal">local_dev</code>,
                        <code class="literal">local_admin</code>). In addition, grant the MySQL
                        accounts the privileges appropriate to the operations they
                        need to perform. The following instructions use
                        <code class="literal">win_proxy</code> as the proxy account, and
                        <code class="literal">local_wlad</code>, <code class="literal">local_dev</code>,
                        and <code class="literal">local_admin</code> as the proxied accounts.
                    </p><p style="color:blue;">要设置此设置，请为Windows用户创建一个要连接的代理帐户，并配置此帐户，以便用户和组映射到适当的MySQL帐户（local_wlad、local_dev、local_admin）。此外，授予mysql帐户与它们需要执行的操作相应的权限。下面的说明使用Win代理作为代理帐户，LoalAlxWLAD、LoalAdvDEV和LoalAuthAdmin作为代理帐户。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create the proxy MySQL account:
                        </p><p style="color:blue;">创建代理MySQL帐户：</p><pre data-lang="sql" class="programlisting">CREATE USER win_proxy
  IDENTIFIED WITH  authentication_windows
  AS 'local_user = local_wlad,
      MyDomain\\domain_user = local_wlad,
      MyDomain\\Developers = local_dev,
      BUILTIN\\Administrators = local_admin';
</pre></li><li class="listitem"><p>
                            For proxying to work, the proxied accounts must exist, so
                            create them:
                        </p><p style="color:blue;">若要工作，则必须存在子查询帐户，因此创建它们：</p><pre data-lang="sql" class="programlisting">CREATE USER local_wlad
  IDENTIFIED WITH mysql_no_login;
CREATE USER local_dev
  IDENTIFIED WITH mysql_no_login;
CREATE USER local_admin
  IDENTIFIED WITH mysql_no_login;
</pre><p>
                            The proxied accounts use the
                            <code class="literal">mysql_no_login</code> authentication plugin to
                            prevent clients from using the accounts to log in directly
                            to the MySQL server. Instead, it is expected that users
                            who authenticate using Windows will use the
                            <code class="literal">win_proxy</code> proxy account. (This assumes
                            that the plugin is installed. For instructions, see
                            <a class="xref" href="security.html#no-login-pluggable-authentication" title="6.4.1.10&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.10, “No-Login Pluggable Authentication”</a>.) For
                            alternative methods of protecting proxied accounts against
                            direct use, see
                            <a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
                        </p><p style="color:blue;">代理帐户使用MySQL LoNoLogIn身份验证插件来防止客户端使用帐户直接登录到MySQL服务器。相反，使用Windows进行身份验证的用户将使用Win_代理代理帐户。（这假设插件已安装。有关说明，请参阅第6节4.4.1.10节，“没有登录可插入的认证”。对于保护代理帐户的替代方法不直接使用，请参阅防止直接登录代理帐户。</p><p>
                            You should also execute
                            <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a> statements (not
                            shown) that grant each proxied account the privileges
                            required for MySQL access.
                        </p><p style="color:blue;">还应该执行授予语句（未示出），授予每个代理帐户的MySQL访问所需的特权。</p></li><li class="listitem"><p>
                            Grant to the proxy account the
                            <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for each
                            proxied account:
                        </p><p style="color:blue;">给代理帐户授予代理权限：</p><pre data-lang="sql" class="programlisting">GRANT PROXY ON local_wlad TO win_proxy;
GRANT PROXY ON local_dev TO win_proxy;
GRANT PROXY ON local_admin TO win_proxy;
</pre></li></ol>
                    </div>
                    <p>
                        Now the Windows users <code class="literal">local_user</code> and
                        <code class="literal">MyDomain\domain_user</code> can connect to the
                        MySQL server as <code class="literal">win_proxy</code> and when
                        authenticated have the privileges of the account given in the
                        authentication string (in this case,
                        <code class="literal">local_wlad</code>). A user in the
                        <code class="literal">MyDomain\Developers</code> group who connects as
                        <code class="literal">win_proxy</code> has the privileges of the
                        <code class="literal">local_dev</code> account. A user in the
                        <code class="literal">BUILTIN\Administrators</code> group has the
                        privileges of the <code class="literal">local_admin</code> account.
                    </p><p style="color:blue;">现在，windows用户local_user和mydomain\domain_user可以作为win_proxy连接到mysql服务器，并且在经过身份验证时具有身份验证字符串中给定的帐户权限（在本例中为local_wlad）。mydomain\developers组中作为win_proxy连接的用户具有本地_dev帐户的权限。内置管理员组中的用户具有本地管理员帐户的权限。</p><p>
                    To configure authentication so that all Windows users who do
                    not have their own MySQL account go through a proxy account,
                    substitute the default proxy account
                    (<code class="literal">''@''</code>) for <code class="literal">win_proxy</code> in
                    the preceding instructions. For information about default
                    proxy accounts, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">若要配置身份验证以使所有没有自己mysql帐户的windows用户通过代理帐户，请在前面的说明中将默认代理帐户（'@''）替换为win_proxy。有关默认代理帐户的信息，请参阅第6.2.14节“代理用户”。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            If your MySQL installation has anonymous users, they might
                            conflict with the default proxy user. For more information
                            about this issue, and ways of dealing with it, see
                            <a class="xref" href="security.html#proxy-users-conflicts" title="Default Proxy User and Anonymous User Conflicts">Default Proxy User and Anonymous User Conflicts</a>.
                        </p><p style="color:blue;">如果您的mysql安装有匿名用户，它们可能与默认代理用户冲突。有关此问题及其处理方法的详细信息，请参阅默认代理用户和匿名用户冲突。</p>
                    </div>
                    <p>
                        To use the Windows authentication plugin with Connector/NET
                        connection strings in Connector/NET 6.4.4 and higher, see
                        <a class="ulink" href="https://dev.mysql.com/doc/connector-net/en/connector-net-programming-authentication-windows-native.html" target="_top">Using the Windows Native Authentication Plugin</a>.
                    </p><p style="color:blue;">要将Windows身份验证插件与连接器/NET 6.4.4及更高版本中的连接器/NET连接字符串一起使用，请参阅使用Windows本机身份验证插件。</p>
                </div>

            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="ldap-pluggable-authentication"></a>6.4.1.9&nbsp;LDAP Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286885504160"></a><a class="indexterm" name="idm140286885502656"></a><a class="indexterm" name="idm140286885501152"></a><a class="indexterm" name="idm140286885499648"></a><a class="indexterm" name="idm140286885498160"></a><a class="indexterm" name="idm140286885497072"></a><a class="indexterm" name="idm140286885495568"></a><a class="indexterm" name="idm140286885494080"></a><a class="indexterm" name="idm140286885492592"></a><a class="indexterm" name="idm140286885491104"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        LDAP pluggable authentication is an extension included in
                        MySQL Enterprise Edition, a commercial product. To learn more about commercial
                        products, see <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                    </p><p style="color:blue;">ldap可插拔身份验证是mysql企业版（一种商业产品）中包含的扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
                </div>
                <p>
                    As of MySQL 5.7.19, MySQL Enterprise Edition supports an authentication method that
                    enables MySQL Server to use LDAP (Lightweight Directory Access
                    Protocol) to authenticate MySQL users by accessing directory
                    services such as X.500. MySQL uses LDAP to fetch user,
                    credential, and group information.
                </p><p style="color:blue;">从mysql 5.7.19开始，mysql企业版支持一种身份验证方法，使mysql服务器能够使用ldap（轻量级目录访问协议）通过访问x.500等目录服务对mysql用户进行身份验证。mysql使用ldap来获取用户、凭据和组信息。</p><p>
                LDAP pluggable authentication provides these capabilities:
            </p><p style="color:blue;">LDAP可插拔身份验证提供了以下功能：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        External authentication: LDAP authentication enables MySQL
                        Server to accept connections from users defined outside the
                        MySQL grant tables in LDAP directories.
                    </p><p style="color:blue;">外部身份验证：ldap身份验证使mysql服务器能够接受来自ldap目录中mysql授权表外部定义的用户的连接。</p></li><li class="listitem"><p>
                        Proxy user support: LDAP authentication can return to MySQL
                        a user name different from the external user name passed by
                        the client program, based on the LDAP groups the external
                        user is a member of. This means that an LDAP plugin can
                        return the MySQL user that defines the privileges the
                        external LDAP-authenticated user should have. For example,
                        an LDAP user named <code class="literal">joe</code> can connect and
                        have the privileges of a MySQL user named
                        <code class="literal">developer</code>, if the LDAP group for
                        <code class="literal">joe</code> is <code class="literal">developer</code>.
                    </p><p style="color:blue;">代理用户支持：LDAP身份验证可以根据外部用户所属的LDAP组，向MySQL返回与客户端程序传递的外部用户名不同的用户名。这意味着ldap插件可以返回mysql用户，该用户定义外部ldap身份验证用户应该具有的权限。例如，如果joe的ldap组是developer，则名为joe的ldap用户可以连接并拥有名为developer的mysql用户的权限。</p></li><li class="listitem"><p>
                        Security: Using TLS, connections to the LDAP server can be
                        secure.
                    </p><p style="color:blue;">安全性：使用tls，到ldap服务器的连接可以是安全的。</p></li></ul>
                </div>
                <p>
                    The following table shows the plugin and library file names. The
                    file name suffix might differ on your system. The files must be
                    located in the directory named by the
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
                </p><p style="color:blue;">下表显示了插件和库文件名。系统上的文件名后缀可能不同。文件必须位于plugin_dir系统变量命名的目录中。</p>
                <div class="table">
                    <a name="idm140286885478608"></a><p class="title"><b>Table&nbsp;6.15&nbsp;Plugin and Library Names for LDAP Authentication</b></p><p style="color:blue;">表6.15 LDAP身份验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for LDAP password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin names</td>
                            <td><code class="literal">authentication_ldap_sasl</code>,
                                <code class="literal">authentication_ldap_simple</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin names</td>
                            <td><code class="literal">authentication_ldap_sasl_client</code>,
                                <code class="literal">mysql_clear_password</code></td>
                        </tr><tr>
                            <td scope="row">Library file names</td>
                            <td><code class="filename">authentication_ldap_sasl.so</code>,
                                <code class="filename">authentication_ldap_sasl_client.so</code>,
                                <code class="filename">authentication_ldap_simple.so</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The library files include only the
                <code class="literal">authentication_ldap_<em class="replaceable"><code>XXX</code></em></code>
                authentication plugins. The client-side
                <code class="literal">mysql_clear_password</code> plugin is built into the
                <code class="literal">libmysqlclient</code> client library.
            </p><p style="color:blue;">库文件仅包括authentication_ldap_xxx authentication插件。客户端mysql_clear_密码插件内置在libmysqlclient客户端库中。</p><p>
                The two server-side LDAP plugins each work with a specific
                client-side plugin:
            </p><p style="color:blue;">两个服务器端LDAP插件分别与一个特定的客户端插件一起工作：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The server-side
                        <code class="literal">authentication_ldap_simple</code> plugin
                        performs simple LDAP authentication. For connections by
                        accounts that use this plugin, client programs use the
                        client-side <code class="literal">mysql_clear_password</code> plugin,
                        which sends the password to the server as cleartext. No
                        password hashing or encryption is used, so a secure
                        connection between the MySQL client and server is
                        recommended to prevent password exposure.
                    </p><p style="color:blue;">服务器端身份验证LDAP简单插件执行简单LDAP身份验证。对于使用此插件的帐户连接，客户端程序使用客户端mysql_clear_password插件，该插件将密码作为明文发送到服务器。不使用密码散列或加密，因此建议在mysql客户端和服务器之间建立安全连接，以防止密码泄露。</p></li><li class="listitem"><p>
                        The server-side <code class="literal">authentication_ldap_sasl</code>
                        plugin performs SASL-based LDAP authentication. For
                        connections by accounts that use this plugin, client
                        programs use the client-side
                        <code class="literal">authentication_ldap_sasl_client</code> plugin.
                        The client-side and server-side SASL LDAP plugins use SASL
                        messages for secure transmission of credentials within the
                        LDAP protocol, to avoid sending the cleartext password
                        between the MySQL client and server.
                    </p><p style="color:blue;">服务器端身份验证LDAP SASL插件执行基于SASL的LDAP身份验证。对于使用此插件的帐户的连接，客户端程序使用客户端身份验证插件。客户端和服务器端sasldap插件使用sasl消息在ldap协议内安全传输凭据，以避免在mysql客户端和服务器之间发送明文密码。</p></li></ul>
                </div>
                <p>
                    The following sections provide installation and usage
                    information specific to LDAP pluggable authentication:
                </p><p style="color:blue;">以下部分提供特定于LDAP可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-prerequisites" title="Prerequisites for LDAP Pluggable Authentication">Prerequisites for LDAP Pluggable Authentication</a></p><p style="color:blue;">LDAP可插入身份验证的先决条件</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-how-it-works" title="How LDAP Authentication of MySQL Users Works">How LDAP Authentication of MySQL Users Works</a></p><p style="color:blue;">mysql用户的ldap认证工作原理</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-installation" title="Installing LDAP Pluggable Authentication">Installing LDAP Pluggable Authentication</a></p><p style="color:blue;">安装LDAP可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-uninstallation" title="Uninstalling LDAP Pluggable Authentication">Uninstalling LDAP Pluggable Authentication</a></p><p style="color:blue;">卸载LDAP可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-usage" title="Using LDAP Pluggable Authentication">Using LDAP Pluggable Authentication</a></p><p style="color:blue;">使用LDAP可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-usage-simple" title="Simple LDAP Authentication">Simple LDAP Authentication</a></p><p style="color:blue;">简单LDAP身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-usage-sasl" title="SASL-Based LDAP Authentication">SASL-Based LDAP Authentication</a></p><p style="color:blue;">基于sasl的ldap认证</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-usage-user-dn-suffix" title="LDAP Authentication User DN Suffixes">LDAP Authentication User DN Suffixes</a></p><p style="color:blue;">LDAP身份验证用户DN后缀</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a></p><p style="color:blue;">使用代理的LDAP身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#ldap-pluggable-authentication-usage-group-mapping" title="LDAP Authentication Group Preference and Mapping Specification">LDAP Authentication Group Preference and Mapping Specification</a></p><p style="color:blue;">LDAP身份验证组首选项和映射规范</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. For information
                    about the <code class="literal">mysql_clear_password</code> plugin, see
                    <a class="xref" href="security.html#cleartext-pluggable-authentication" title="6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.6, “Client-Side Cleartext Pluggable Authentication”</a>. For proxy
                    user information, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。有关mysql_clear_password插件的信息，请参阅第6.4.1.6节“客户端cleartext可插入身份验证”。有关代理用户信息，请参见第6.2.14节“代理用户”。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        If your system supports PAM and permits LDAP as a PAM
                        authentication method, another way to use LDAP for MySQL user
                        authentication is to use the server-side
                        <code class="literal">authentication_pam</code> plugin. See
                        <a class="xref" href="security.html#pam-pluggable-authentication" title="6.4.1.7&nbsp;PAM Pluggable Authentication">Section&nbsp;6.4.1.7, “PAM Pluggable Authentication”</a>.
                    </p><p style="color:blue;">如果您的系统支持pam并允许ldap作为pam身份验证方法，那么使用ldap进行mysql用户身份验证的另一种方法是使用服务器端身份验证pam插件。见第6.4.1.7节“PAM可插拔认证”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-prerequisites"></a>Prerequisites for LDAP Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To use LDAP pluggable authentication for MySQL, these
                        prerequisites must be satisfied:
                    </p><p style="color:blue;">要对MySQL使用LDAP可插拔身份验证，必须满足以下先决条件：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            An LDAP server must be available for the LDAP
                            authentication plugins to communicate with.
                        </p><p style="color:blue;">LDAP服务器必须可用，以便LDAP身份验证插件与之通信。</p></li><li class="listitem"><p>
                            LDAP users to be authenticated by MySQL must be present in
                            the directory managed by the LDAP server.
                        </p><p style="color:blue;">要通过mysql验证的ldap用户必须存在于ldap服务器管理的目录中。</p></li><li class="listitem"><p>
                            An LDAP client library must be available on systems where
                            the server-side
                            <code class="literal">authentication_ldap_sasl</code> or
                            <code class="literal">authentication_ldap_simple</code> plugin is
                            used. Currently, supported libraries are the Windows
                            native LDAP library, or the OpenLDAP library on
                            non-Windows systems.
                        </p><p style="color:blue;">LDAP客户端库必须在使用服务器端身份验证或身份验证简单插件的系统上可用。目前，支持的库是windows本地ldap库，或非windows系统上的openldap库。</p></li><li class="listitem"><p>
                            To use SASL-based LDAP authentication:
                        </p><p style="color:blue;">要使用基于sasl的ldap身份验证，请执行以下操作：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    The LDAP server must be configured to communicate with
                                    a SASL server.
                                </p><p style="color:blue;">LDAP服务器必须配置为与SASL服务器通信。</p></li><li class="listitem"><p>
                                    A SASL client library must be is available on systems
                                    where the client-side
                                    <code class="literal">authentication_ldap_sasl_client</code>
                                    plugin is used. Currently, the only supported library
                                    is the Cyrus SASL library.
                                </p><p style="color:blue;">在使用客户端身份验证ldap_sasl_客户端插件的系统上，必须提供sasl客户端库。目前，唯一受支持的库是cyrus sasl库。</p></li></ul>
                            </div>
                        </li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-how-it-works"></a>How LDAP Authentication of MySQL Users Works</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section provides a general overview of how MySQL and LDAP
                        work together to authenticate MySQL users. For examples
                        showing how to set up MySQL accounts to use specific LDAP
                        authentication plugins, see
                        <a class="xref" href="security.html#ldap-pluggable-authentication-usage" title="Using LDAP Pluggable Authentication">Using LDAP Pluggable Authentication</a>.
                    </p><p style="color:blue;">本节概述了mysql和ldap如何协同工作来验证mysql用户。有关如何设置MySQL帐户以使用特定LDAP身份验证插件的示例，请参阅使用LDAP可插入身份验证。</p><p>
                    The client connects to the MySQL server, providing the MySQL
                    client user name and the LDAP password:
                </p><p style="color:blue;">客户端连接到mysql服务器，提供mysql客户端用户名和ldap密码：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            For simple LDAP authentication, the client-side and
                            server-side plugins communicate the password as cleartext.
                        </p><p style="color:blue;">对于简单的LDAP身份验证，客户端和服务器端插件将密码作为明文进行通信。</p></li><li class="listitem"><p>
                            For SASL-based LDAP authentication, the client-side and
                            server-side plugins use SASL messages for secure
                            transmission of credentials within the LDAP protocol, to
                            avoid sending the cleartext password between the MySQL
                            client and server.
                        </p><p style="color:blue;">对于基于sasl的ldap身份验证，客户端和服务器端插件使用sasl消息在ldap协议内安全传输凭据，以避免在mysql客户端和服务器之间发送明文密码。</p></li></ul>
                    </div>
                    <p>
                        If the client user name and host name match no MySQL account,
                        the connection is rejected.
                    </p><p style="color:blue;">如果客户端用户名和主机名不匹配MySQL帐户，则拒绝连接。</p><p>
                    If there is a matching MySQL account, authentication against
                    LDAP occurs. The LDAP server looks for an entry matching the
                    user and authenticates the entry against the LDAP password:
                </p><p style="color:blue;">如果有一个匹配的mysql帐户，则会对ldap进行身份验证。LDAP服务器查找与用户匹配的条目，并根据LDAP密码验证该条目：</p><a class="indexterm" name="idm140286885416800"></a><a class="indexterm" name="idm140286885415312"></a>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the MySQL account names an the LDAP user distinguished
                            name (DN), LDAP authentication uses that value and the
                            LDAP password provided by the client. (To associate an
                            LDAP user DN with a MySQL account, include a
                            <code class="literal">BY</code> clause that specifies an
                            authentication string in the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
                            USER</code></a> statement that creates the account.)
                        </p><p style="color:blue;">如果mysql帐户命名ldap用户可分辨名称（dn），ldap身份验证将使用该值和客户端提供的ldap密码。（若要将LDAP用户DN与MySQL帐户关联，请在创建帐户的CREATE USER语句中包含指定身份验证字符串的BY子句。）</p></li><li class="listitem"><p>
                            If the MySQL account names no LDAP user DN, LDAP
                            authentication uses the user name and LDAP password
                            provided by the client. In this case, the authentication
                            plugin first binds to the LDAP server using the root DN
                            and password as credentials to find the user DN based on
                            the client user name, then authenticates that user DN
                            against the LDAP password. This bind using the root
                            credentials fails if the root DN and password are set to
                            incorrect values, or are empty (not set) and the LDAP
                            server does not permit anonymous connections.
                        </p><p style="color:blue;">如果mysql帐户没有ldap用户dn，ldap身份验证将使用客户端提供的用户名和ldap密码。在这种情况下，身份验证插件首先使用根dn和密码作为凭据绑定到ldap服务器，以根据客户端用户名查找用户dn，然后根据ldap密码对该用户dn进行身份验证。如果根dn和密码设置为不正确的值，或者为空（未设置），并且ldap服务器不允许匿名连接，则使用根凭据的绑定将失败。</p></li></ul>
                    </div>
                    <p>
                        If the LDAP server finds no match or multiple matches,
                        authentication fails and the client connection is rejected.
                    </p><p style="color:blue;">如果LDAP服务器找不到匹配项或多个匹配项，则验证失败，客户端连接被拒绝。</p><p>
                    If the LDAP server finds a single match, LDAP authentication
                    succeeds (assuming that the password is correct), the LDAP
                    server returns the LDAP entry, and the authentication plugin
                    determines the name of the authenticated user based on that
                    entry:
                </p><p style="color:blue;">如果ldap服务器找到一个匹配项，ldap身份验证将成功（假设密码正确），ldap服务器将返回ldap条目，并且身份验证插件将根据该条目确定经过身份验证的用户的名称：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the LDAP entry has a group attribute (by default, the
                            <code class="literal">cn</code> attribute), the plugin returns its
                            value as the authenticated user name.
                        </p><p style="color:blue;">如果ldap条目有一个group属性（默认情况下是cn属性），插件将返回其值作为经过身份验证的用户名。</p></li><li class="listitem"><p>
                            If the LDAP entry has no group attribute, the
                            authentication plugin returns the client user name as the
                            authenticated user name.
                        </p><p style="color:blue;">如果LDAP条目没有组属性，则验证插件将客户端用户名作为已验证的用户名返回。</p></li></ul>
                    </div>
                    <p>
                        The MySQL server compares the client user name with the
                        authenticated user name to determine whether proxying occurs
                        for the client session:
                    </p><p style="color:blue;">MySQL服务器将客户端用户名与经过身份验证的用户名进行比较，以确定客户端会话是否发生代理：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the names are the same, no proxying occurs: The MySQL
                            account matching the client user name is used for
                            privilege checking.
                        </p><p style="color:blue;">如果名称相同，则不会发生代理：与客户端用户名匹配的mysql帐户用于权限检查。</p></li><li class="listitem"><p>
                            If the names differ, proxying occurs: MySQL looks for an
                            account matching the authenticated user name. That account
                            becomes the proxied user, which is used for privilege
                            checking. The MySQL account that matched the client user
                            name is treated as the external proxy user.
                        </p><p style="color:blue;">如果名称不同，则会进行代理：mysql会查找与经过身份验证的用户名匹配的帐户。该帐户成为代理用户，用于特权检查。与客户端用户名匹配的mysql帐户将被视为外部代理用户。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-installation"></a>Installing LDAP Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes how to install the LDAP authentication
                        plugins. For general information about installing plugins, see
                        <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                    </p><p style="color:blue;">本节介绍如何安装LDAP验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                    To be usable by the server, the plugin library files must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    The server-side plugin library file base names are
                    <code class="literal">authentication_ldap_sasl</code> and
                    <code class="literal">authentication_ldap_simple</code>. The file name
                    suffix differs per platform (for example,
                    <code class="filename">.so</code> for Unix and Unix-like systems,
                    <code class="filename">.dll</code> for Windows).
                </p><p style="color:blue;">服务器端插件库文件的基本名称是authentication_ldap_sasl和authentication_ldap_simple。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                    To load the plugins at server startup, use
                    <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> options to
                    name the library files that contain them. With this
                    plugin-loading method, the options must be given each time the
                    server starts. Also, specify values for any plugin-provided
                    system variables you wish to configure.
                </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add options命名包含插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供选项。另外，为您希望配置的任何插件提供的系统变量指定值。</p><p>
                    Each server-side LDAP plugin exposes a set of system variables
                    that enable its operation to be configured. Setting most of
                    these is optional, but you must set the variables that specify
                    the LDAP server host (so the plugin knows where to connect)
                    and base distinguished name for LDAP bind operations (to limit
                    the scope of searches and obtain faster searches). For details
                    about all LDAP system variables, see
                    <a class="xref" href="security.html#pluggable-authentication-system-variables" title="6.4.1.13&nbsp;Pluggable Authentication System Variables">Section&nbsp;6.4.1.13, “Pluggable Authentication System Variables”</a>.
                </p><p style="color:blue;">每个服务器端ldap插件都公开一组系统变量，这些变量允许配置其操作。设置其中大部分是可选的，但是必须设置指定LDAP服务器主机（以便插件知道连接位置）和LDAP绑定操作的基本可分辨名称（以限制搜索范围并获得更快的搜索）的变量。有关所有LDAP系统变量的详细信息，请参阅6.4.1.13节，“可插入身份验证系统变量”。</p><p>
                    To load the plugins and set the LDAP server host and base
                    distinguished name for LDAP bind operations, put lines such as
                    these in your <code class="filename">my.cnf</code> file (adjust the
                    <code class="filename">.so</code> suffix for your platform as
                    necessary):
                </p><p style="color:blue;">要加载插件并设置ldap服务器主机和ldap绑定操作的基本可分辨名称，请在my.cnf文件中放置这些行（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=authentication_ldap_sasl.so
authentication_ldap_sasl_server_host=127.0.0.1
authentication_ldap_sasl_bind_base_dn="dc=example,dc=com"
plugin-load-add=authentication_ldap_simple.so
authentication_ldap_simple_server_host=127.0.0.1
authentication_ldap_simple_bind_base_dn="dc=example,dc=com"
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    Alternatively, to load the plugins at runtime, use these
                    statements (adjust the <code class="filename">.so</code> suffix for
                    your platform as necessary):
                </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN authentication_ldap_sasl
  SONAME 'authentication_ldap_sasl.so';
INSTALL PLUGIN authentication_ldap_simple
  SONAME 'authentication_ldap_simple.so';
</pre><p>
                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                    immediately, and also registers it in the
                    <code class="literal">mysql.plugins</code> system table to cause the
                    server to load it for each subsequent normal startup without
                    the need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
                </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                    After installing the plugins at runtime, their system
                    variables become available and you can add settings for them
                    to your <code class="filename">my.cnf</code> file to configure the
                    plugins for subsequent restarts. For example:
                </p><p style="color:blue;">在运行时安装插件后，它们的系统变量变为可用，您可以将它们的设置添加到my.cnf文件中，以配置插件以便随后重新启动。例如：</p><pre data-lang="ini" class="programlisting">[mysqld]
authentication_ldap_sasl_server_host=127.0.0.1
authentication_ldap_sasl_bind_base_dn="dc=example,dc=com"
authentication_ldap_simple_server_host=127.0.0.1
authentication_ldap_simple_bind_base_dn="dc=example,dc=com"
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
                    or use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>
                    statement (see
                    <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE '%ldap%';</code></strong>
+----------------------------+---------------+
| PLUGIN_NAME                | PLUGIN_STATUS |
+----------------------------+---------------+
| authentication_ldap_sasl   | ACTIVE        |
| authentication_ldap_simple | ACTIVE        |
+----------------------------+---------------+
</pre><p>
                    If a plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                    To associate MySQL accounts with an LDAP plugin, see
                    <a class="xref" href="security.html#ldap-pluggable-authentication-usage" title="Using LDAP Pluggable Authentication">Using LDAP Pluggable Authentication</a>.
                </p><p style="color:blue;">要将MySQL帐户与LDAP插件关联，请参阅使用LDAP可插入身份验证。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Additional Notes for SELinux
                        </div>
                        <a class="indexterm" name="idm140286885365360"></a><p>
                        On systems running EL6 or EL that have SELinux enabled,
                        changes to the SELinux policy are required to enable the
                        MySQL LDAP plugins to communicate with the LDAP service:
                    </p><p style="color:blue;">在运行EL6或EL且启用了SELinux的系统上，需要更改SELinux策略才能使MySQL LDAP插件与LDAP服务通信：</p>
                        <div class="orderedlist">
                            <ol class="orderedlist" type="1"><li class="listitem"><p>
                                Create a file <code class="filename">mysqlldap.te</code> with
                                these contents:
                            </p><p style="color:blue;">创建包含以下内容的文件mysqlldap.te：</p><pre data-lang="simple" class="programlisting">module mysqlldap 1.0;

require {
        type ldap_port_t;
        type mysqld_t;
        class tcp_socket name_connect;
}

#============= mysqld_t ==============

allow mysqld_t ldap_port_t:tcp_socket name_connect;
</pre></li><li class="listitem"><p>
                                Compile the security policy module into a binary
                                representation:
                            </p><p style="color:blue;">将安全策略模块编译为二进制表示：</p><pre data-lang="terminal" class="programlisting">checkmodule -M -m mysqlldap.te -o mysqlldap.mod
</pre></li><li class="listitem"><p>
                                Create an SELinux policy module package:
                            </p><p style="color:blue;">创建selinux策略模块包：</p><pre data-lang="terminal" class="programlisting">semodule_package -m mysqlldap.mod  -o mysqlldap.pp
</pre></li><li class="listitem"><p>
                                Install the module package:
                            </p><p style="color:blue;">安装模块包：</p><pre data-lang="terminal" class="programlisting">semodule -i mysqlldap.pp
</pre></li><li class="listitem"><p>
                                When the SELinux policy changes has been made, restart
                                the MySQL server:
                            </p><p style="color:blue;">更改selinux策略后，重新启动mysql服务器：</p><pre data-lang="terminal" class="programlisting">service mysqld restart
</pre></li></ol>
                        </div>

                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-uninstallation"></a>Uninstalling LDAP Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The method used to uninstall the LDAP authentication plugins
                        depends on how you installed them:
                    </p><p style="color:blue;">用于卸载LDAP身份验证插件的方法取决于您如何安装它们：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you installed the plugins at server startup using
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> options,
                            restart the server without those options.
                        </p><p style="color:blue;">如果在服务器启动时使用--plugin load add选项安装插件，请在没有这些选项的情况下重新启动服务器。</p></li><li class="listitem"><p>
                            If you installed the plugins at runtime using
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>, they remain
                            installed across server restarts. To uninstall them, use
                            <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>:
                        </p><p style="color:blue;">如果您在运行时使用install plugin安装插件，则它们将在服务器重新启动时保持安装状态。要卸载它们，请使用卸载插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN authentication_ldap_sasl;
UNINSTALL PLUGIN authentication_ldap_simple;
</pre></li></ul>
                    </div>
                    <p>
                        In addition, remove from your <code class="filename">my.cnf</code> file
                        any startup options that set LDAP plugin-related system
                        variables.
                    </p><p style="color:blue;">此外，从my.cnf文件中删除设置LDAP插件相关系统变量的任何启动选项。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-usage"></a>Using LDAP Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes how to enable MySQL accounts to connect
                        to the MySQL server using LDAP pluggable authentication. It is
                        assumed that the server is running with the appropriate
                        server-side plugins enabled, as described in
                        <a class="xref" href="security.html#ldap-pluggable-authentication-installation" title="Installing LDAP Pluggable Authentication">Installing LDAP Pluggable Authentication</a>,
                        and that the appropriate client-side plugins are available on
                        the client host.
                    </p><p style="color:blue;">本节介绍如何使用LDAP可插拔身份验证使MySQL帐户连接到MySQL服务器。假设服务器运行时启用了适当的服务器端插件，如安装LDAP可插拔身份验证中所述，并且适当的客户端插件在客户端主机上可用。</p><p>
                    This section does not describe LDAP configuration or
                    administration. It is assumed that you are familiar with those
                    topics.
                </p><p style="color:blue;">本节不介绍LDAP配置或管理。假设您熟悉这些主题。</p><p>
                    The two server-side LDAP plugins each work with a specific
                    client-side plugin:
                </p><p style="color:blue;">两个服务器端LDAP插件分别与一个特定的客户端插件一起工作：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The server-side
                            <code class="literal">authentication_ldap_simple</code> plugin
                            performs simple LDAP authentication. For connections by
                            accounts that use this plugin, client programs use the
                            client-side <code class="literal">mysql_clear_password</code>
                            plugin, which sends the password to the server as
                            cleartext. No password hashing or encryption is used, so a
                            secure connection between the MySQL client and server is
                            recommended to prevent password exposure.
                        </p><p style="color:blue;">服务器端身份验证LDAP简单插件执行简单LDAP身份验证。对于使用此插件的帐户连接，客户端程序使用客户端mysql_clear_password插件，该插件将密码作为明文发送到服务器。不使用密码散列或加密，因此建议在mysql客户端和服务器之间建立安全连接，以防止密码泄露。</p></li><li class="listitem"><p>
                            The server-side
                            <code class="literal">authentication_ldap_sasl</code> plugin
                            performs SASL-based LDAP authentication. For connections
                            by accounts that use this plugin, client programs use the
                            client-side
                            <code class="literal">authentication_ldap_sasl_client</code> plugin.
                            The client-side and server-side SASL LDAP plugins use SASL
                            messages for secure transmission of credentials within the
                            LDAP protocol, to avoid sending the cleartext password
                            between the MySQL client and server.
                        </p><p style="color:blue;">服务器端身份验证LDAP SASL插件执行基于SASL的LDAP身份验证。对于使用此插件的帐户的连接，客户端程序使用客户端身份验证插件。客户端和服务器端sasldap插件使用sasl消息在ldap协议内安全传输凭据，以避免在mysql客户端和服务器之间发送明文密码。</p></li></ul>
                    </div>
                    <p>
                        Overall requirements for LDAP authentication of MySQL users:
                    </p><p style="color:blue;">MySQL用户LDAP认证总体要求：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            There must be an LDAP directory entry for each user to be
                            authenticated.
                        </p><p style="color:blue;">每个用户都必须有一个LDAP目录项才能进行身份验证。</p></li><li class="listitem"><p>
                            There must be a MySQL user account that specifies a
                            server-side LDAP authentication plugin and optionally
                            names the associated LDAP user distinguished name (DN).
                            (To associate an LDAP user DN with a MySQL account,
                            include a <code class="literal">BY</code> clause in the
                            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement that
                            creates the account.) If an account names no LDAP string,
                            LDAP authentication uses the user name specified by the
                            client to find the LDAP entry.
                        </p><p style="color:blue;">必须有一个mysql用户帐户，该帐户指定服务器端ldap身份验证插件并可选地命名关联的ldap用户可分辨名称（dn）。（若要将LDAP用户DN与MySQL帐户关联，请在创建帐户的CREATE USER语句中包含BY子句。）如果帐户没有命名LDAP字符串，LDAP身份验证将使用客户端指定的用户名来查找LDAP条目。</p></li><li class="listitem"><p>
                            Client programs connect using the connection method
                            appropriate for the server-side authentication plugin the
                            MySQL account uses. For LDAP authentication, connections
                            require the MySQL user name and LDAP password. In
                            addition, for accounts that use the server-side
                            <code class="literal">authentication_ldap_simple</code> plugin,
                            invoke client programs with the
                            <code class="option">--enable-cleartext-plugin</code> option to
                            enable the client-side
                            <code class="literal">mysql_clear_password</code> plugin.
                        </p><p style="color:blue;">客户端程序使用适合mysql帐户使用的服务器端身份验证插件的连接方法进行连接。对于LDAP身份验证，连接需要MySQL用户名和LDAP密码。此外，对于使用服务器端身份验证简单插件的帐户，使用--enable cleartext plugin选项调用客户端程序以启用客户端mysql_clear_密码插件。</p></li></ul>
                    </div>
                    <p>
                        The instructions here assume the following scenario:
                    </p><p style="color:blue;">此处的说明假设以下情况：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            MySQL users <code class="literal">betsy</code> and
                            <code class="literal">boris</code> authenticate to the LDAP entries
                            for <code class="literal">betsy_ldap</code> and
                            <code class="literal">boris_ldap</code>, respectively. (It is not
                            necessary that the MySQL and LDAP user names differ. The
                            use of different names in this discussion helps clarify
                            whether an operation context is MySQL or LDAP.)
                        </p><p style="color:blue;">mysql用户betsy和boris分别对betsy-ldap和boris-ldap的ldap条目进行身份验证。（MySQL和LDAP用户名不一定不同。在此讨论中使用不同的名称有助于澄清操作上下文是mysql还是ldap。）</p></li><li class="listitem"><p>
                            LDAP entries use the <code class="literal">uid</code> attribute to
                            specify user names. This may vary depending on LDAP
                            server. Some LDAP servers use the <code class="literal">cn</code>
                            attribute for user names rather than
                            <code class="literal">uid</code>. To change the attribute, modify
                            the
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
                            or
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
                            system variable appropriately.
                        </p><p style="color:blue;">LDAP条目使用uid属性指定用户名。这可能因LDAP服务器而异。有些ldap服务器使用cn属性而不是uid。要更改属性，请适当修改authentication_ldap_simple_user_search_attr或authentication_ldap_sasl_user_search_attr系统变量。</p></li><li class="listitem"><p>
                            These LDAP entries are available in the directory managed
                            by the LDAP server, to provide distinguished name values
                            that uniquely identify each user:
                        </p><p style="color:blue;">这些LDAP条目在LDAP服务器管理的目录中可用，以提供唯一标识每个用户的可分辨名称值：</p><pre data-lang="ini" class="programlisting">uid=betsy_ldap,ou=People,dc=example,dc=com
uid=boris_ldap,ou=People,dc=example,dc=com
</pre></li><li class="listitem"><p>
                            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statements that
                            create MySQL accounts name an LDAP user in the
                            <code class="literal">BY</code> clause, to indicate which LDAP entry
                            the MySQL account authenticates against.
                        </p><p style="color:blue;">创建用于创建mysql帐户的用户语句在by子句中命名ldap用户，以指示mysql帐户对哪个ldap条目进行身份验证。</p></li></ul>
                    </div>
                    <p>
                        The instructions for setting up an account that uses LDAP
                        authentication depend on which server-side LDAP plugin is
                        used. The following sections describe several usage scenarios.
                    </p><p style="color:blue;">设置使用LDAP身份验证的帐户的说明取决于使用的服务器端LDAP插件。以下部分描述了几种使用场景。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-usage-simple"></a>Simple LDAP Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To configure a MySQL account for simple LDAP authentication,
                        the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement
                        specifies the <code class="literal">authentication_ldap_simple</code>
                        plugin, and optionally names the LDAP user distinguished name
                        (DN):
                    </p><p style="color:blue;">要为简单LDAP身份验证配置MySQL帐户，CREATE USER语句指定身份验证LDAP简单插件，并可选地命名LDAP用户可分辨名称（DN）：</p><pre data-lang="sql" class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH authentication_ldap_simple
  [BY '<em class="replaceable"><code>LDAP user DN</code></em>'];
</pre><p>
                    Suppose that a MySQL user <code class="literal">betsy</code> has this
                    entry in the LDAP directory:
                </p><p style="color:blue;">假设mysql用户betsy在ldap目录中有这个条目：</p><pre data-lang="ini" class="programlisting">uid=betsy_ldap,ou=People,dc=example,dc=com
</pre><p>
                    Then the statement to create the MySQL account for
                    <code class="literal">betsy</code> looks like this:
                </p><p style="color:blue;">然后为betsy创建mysql帐户的语句如下所示：</p><pre data-lang="sql" class="programlisting">CREATE USER 'betsy'@'localhost'
  IDENTIFIED WITH authentication_ldap_simple
  AS 'uid=betsy_ldap,ou=People,dc=example,dc=com';
</pre><p>
                    The authentication string specified in the
                    <code class="literal">BY</code> clause does not include the LDAP
                    password. That must be provided by the client user at connect
                    time.
                </p><p style="color:blue;">by子句中指定的身份验证字符串不包括LDAP密码。必须由客户端用户在连接时提供。</p><p>
                    Clients connect to the MySQL server by providing the MySQL
                    user name and LDAP password, and by enabling the client-side
                    <code class="literal">mysql_clear_password</code> plugin:
                </p><p style="color:blue;">客户端通过提供mysql用户名和ldap密码以及启用客户端mysql_clear_password插件连接到mysql服务器：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=betsy --password --enable-cleartext-plugin</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>betsy_password</code></em></code></strong> <em class="replaceable"><code>(betsy_ldap LDAP password)</code></em>
</pre>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            The client-side <code class="literal">mysql_clear_password</code>
                            authentication plugin leaves the password untouched, so
                            client programs send it to the MySQL server as cleartext.
                            This enables the password to be passed as is to the LDAP
                            server. A cleartext password is necessary to use the
                            server-side LDAP library without SASL, but may be a security
                            problem in some configurations. These measures minimize the
                            risk:
                        </p><p style="color:blue;">客户端mysql_clear_password authentication插件使密码保持不变，因此客户端程序将其作为cleartext发送到mysql服务器。这使密码能够按原样传递给LDAP服务器。使用不带sasl的服务器端ldap库需要明文密码，但在某些配置中可能是安全问题。这些措施将风险降至最低：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                To make inadvertent use of the
                                <code class="literal">mysql_clear_password</code> plugin less
                                likely, MySQL clients must explicitly enable it (for
                                example, with the
                                <code class="option">--enable-cleartext-plugin</code> option). See
                                <a class="xref" href="security.html#cleartext-pluggable-authentication" title="6.4.1.6&nbsp;Client-Side Cleartext Pluggable Authentication">Section&nbsp;6.4.1.6, “Client-Side Cleartext Pluggable Authentication”</a>.
                            </p><p style="color:blue;">为了减少无意中使用mysql_clear_password插件的可能性，mysql客户机必须显式地启用它（例如，使用--enable cleartext plugin选项）。见第6.4.1.6节，“客户端明文可插拔认证”。</p></li><li class="listitem"><p>
                                To avoid password exposure with the
                                <code class="literal">mysql_clear_password</code> plugin enabled,
                                MySQL clients should connect to the MySQL server using
                                an encrypted connection. See
                                <a class="xref" href="security.html#using-encrypted-connections" title="6.3.1&nbsp;Configuring MySQL to Use Encrypted Connections">Section&nbsp;6.3.1, “Configuring MySQL to Use Encrypted Connections”</a>.
                            </p><p style="color:blue;">为避免启用mysql_clear_密码插件时暴露密码，mysql客户端应使用加密连接连接到mysql服务器。请参阅6.3.1节，“配置MySQL以使用加密连接”。</p></li></ul>
                        </div>

                    </div>
                    <p>
                        The authentication process occurs as follows:
                    </p><p style="color:blue;">认证过程如下：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            The client-side plugin sends <code class="literal">betsy</code> and
                            <em class="replaceable"><code>betsy_password</code></em> as the client
                            user name and LDAP password to the MySQL server.
                        </p><p style="color:blue;">客户端插件将betsy和betsy_密码作为客户端用户名和ldap密码发送到mysql服务器。</p></li><li class="listitem"><p>
                            The connection attempt matches the
                            <code class="literal">'betsy'@'localhost'</code> account. The
                            server-side LDAP plugin finds that this account has an
                            authentication string of
                            <code class="literal">'uid=betsy_ldap,ou=People,dc=example,dc=com'</code>
                            to name the LDAP user DN. The plugin sends this string and
                            the LDAP password to the LDAP server.
                        </p><p style="color:blue;">连接尝试与“betsy”@“localhost”帐户匹配。服务器端LDAP插件发现此帐户有一个身份验证字符串“uid=betsy_ldap，ou=people，dc=example，dc=com”来命名LDAP用户DN。插件将此字符串和LDAP密码发送到LDAP服务器。</p></li><li class="listitem"><p>
                            The LDAP server finds the LDAP entry for
                            <code class="literal">betsy_ldap</code> and the password matches, so
                            LDAP authentication succeeds.
                        </p><p style="color:blue;">ldap服务器查找betsy_ldap的ldap条目和密码匹配，因此ldap身份验证成功。</p></li><li class="listitem"><p>
                            The LDAP entry has no group attribute, so the server-side
                            plugin returns the client user name
                            (<code class="literal">betsy</code>) as the authenticated user. This
                            is the same user name supplied by the client, so no
                            proxying occurs and the client session uses the
                            <code class="literal">'betsy'@'localhost'</code> account for
                            privilege checking.
                        </p><p style="color:blue;">ldap条目没有组属性，因此服务器端插件返回客户端用户名（betsy）作为经过身份验证的用户。这与客户端提供的用户名相同，因此不会发生代理，客户端会话使用“betsy”@“localhost”帐户进行权限检查。</p></li></ol>
                    </div>
                    <p>
                        Had the matching LDAP entry contained a group attribute, that
                        attribute value would have been the authenticated user name
                        and, if the value differed from <code class="literal">betsy</code>,
                        proxying would have occurred. For examples that use the group
                        attribute, see
                        <a class="xref" href="security.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>.
                    </p><p style="color:blue;">如果匹配的LDAP条目包含组属性，则该属性值将是经过身份验证的用户名，如果该值与Betsy不同，则会发生代理。有关使用“组”属性的示例，请参见使用代理的LDAP身份验证。</p><p>
                    Had the <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement
                    contained no <code class="literal">BY</code> clause to specify the
                    <code class="literal">betsy_ldap</code> LDAP distinguished name,
                    authentication attempts would use the user name provided by
                    the client (in this case, <code class="literal">betsy</code>). In the
                    absence of an LDAP entry for <code class="literal">betsy</code>,
                    authentication would fail.
                </p><p style="color:blue;">如果create user语句不包含指定betsy_ldap ldap可分辨名称的by子句，则身份验证尝试将使用客户端提供的用户名（在本例中为betsy）。如果betsy没有ldap条目，身份验证将失败。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-usage-sasl"></a>SASL-Based LDAP Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To configure a MySQL account for SASL LDAP authentication, the
                        <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement specifies
                        the <code class="literal">authentication_ldap_sasl</code> plugin, and
                        optionally names the LDAP user distinguished name (DN):
                    </p><p style="color:blue;">要为SASL LDAP身份验证配置MySQL帐户，CREATE USER语句指定身份验证LDAP SASL插件，并可选地命名LDAP用户可分辨名称（DN）：</p><pre data-lang="sql" class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em>
  IDENTIFIED WITH authentication_ldap_sasl
  [BY '<em class="replaceable"><code>LDAP user DN</code></em>'];
</pre><p>
                    Suppose that a MySQL user <code class="literal">boris</code> has this
                    entry in the LDAP directory:
                </p><p style="color:blue;">假设mysql用户boris在ldap目录中有这个条目：</p><pre data-lang="ini" class="programlisting">uid=boris_ldap,ou=People,dc=example,dc=com
</pre><p>
                    Then the statement to create the MySQL account for
                    <code class="literal">boris</code> looks like this:
                </p><p style="color:blue;">然后为boris创建mysql帐户的语句如下所示：</p><pre data-lang="sql" class="programlisting">CREATE USER 'boris'@'localhost'
  IDENTIFIED WITH authentication_ldap_sasl
  AS 'uid=boris_ldap,ou=People,dc=example,dc=com';
</pre><p>
                    The authentication string specified in the
                    <code class="literal">BY</code> clause does not include the LDAP
                    password. That must be provided by the client user at connect
                    time.
                </p><p style="color:blue;">by子句中指定的身份验证字符串不包括LDAP密码。必须由客户端用户在连接时提供。</p><p>
                    Clients connect to the MySQL server by providing the MySQL
                    user name and LDAP password:
                </p><p style="color:blue;">客户端通过提供mysql用户名和ldap密码连接到mysql服务器：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=boris --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>boris_password</code></em></code></strong> <em class="replaceable"><code>(boris_ldap LDAP password)</code></em>
</pre><p>
                    For the server-side
                    <code class="literal">authentication_ldap_sasl</code> plugin, clients
                    use the client-side
                    <code class="literal">authentication_ldap_sasl_client</code> plugin. If
                    a client program does not find the client-side plugin, specify
                    a <code class="option">--plugin-dir</code> option that names the
                    directory where the plugin library file is installed.
                </p><p style="color:blue;">对于服务器端authentication_ldap_sasl插件，客户端使用客户端authentication_ldap_sasl_client插件。如果客户端程序找不到客户端插件，请指定一个--plugin dir选项，该选项将命名安装插件库文件的目录。</p><p>
                    The authentication process for <code class="literal">boris</code> is
                    similar to that previously described for
                    <code class="literal">betsy</code> with simple LDAP authentication,
                    except that the client-side and server-side SASL LDAP plugins
                    use SASL messages for secure transmission of credentials
                    within the LDAP protocol, to avoid sending the cleartext
                    password between the MySQL client and server.
                </p><p style="color:blue;">Boris的身份验证过程与前面描述的Betsy的简单LDAP身份验证过程类似，只是客户端和服务器端SASL LDAP插件使用SASL消息在LDAP协议内安全传输凭据，以避免在MySQL客户端和服务器之间发送明文密码。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-usage-user-dn-suffix"></a>LDAP Authentication User DN Suffixes</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        As of MySQL 5.7.21, LDAP authentication plugins permit the
                        authentication string that provides user DN information to
                        begin with a <code class="literal">+</code> prefix character:
                    </p><p style="color:blue;">从mysql 5.7.21开始，ldap身份验证插件允许提供用户dn信息的身份验证字符串以+前缀字符开头：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            In the absence of a <code class="literal">+</code> character, the
                            authentication string value is treated as is without
                            modification.
                        </p><p style="color:blue;">在没有+字符的情况下，身份验证字符串值将被视为未经修改的原样。</p></li><li class="listitem"><p>
                            If the authentication string begins with
                            <code class="literal">+</code>, the plugin constructs the full user
                            DN value from the user name sent by the client, together
                            with the DN specified in the authentication string (with
                            the <code class="literal">+</code> removed). In the constructed DN,
                            the client user name becomes the value of the attribute
                            that specifies LDAP user names. This is
                            <code class="literal">uid</code> by default; to change the
                            attribute, modify the
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
                            or
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
                            system variable appropriately. The authentication string
                            is stored as given in the <code class="literal">mysql.user</code>
                            system table, with the full user DN constructed on the fly
                            before authentication.
                        </p><p style="color:blue;">如果身份验证字符串以+开头，则插件将从客户端发送的用户名以及身份验证字符串中指定的DN（删除+后）构造完整的用户DN值。在构造的dn中，客户端用户名成为指定ldap用户名的属性值。默认情况下，这是uid；若要更改属性，请适当修改authentication_ldap_simple_user_search_attr或authentication_ldap_sasl_user_search_attr系统变量。身份验证字符串存储在mysql.user系统表中，在身份验证之前动态构建完整的用户DN。</p></li></ul>
                    </div>
                    <p>
                        This account authentication string does not have
                        <code class="literal">+</code> at the beginning, so it is taken as the
                        full user DN:
                    </p><p style="color:blue;">此帐户身份验证字符串开头没有“+”，因此它被视为完整的用户DN:</p><pre data-lang="sql" class="programlisting">CREATE USER 'baldwin'
  IDENTIFIED WITH authentication_ldap_simple
  AS 'uid=admin,ou=People,dc=example,dc=com';
</pre><p>
                    The client connects with the user name specified in the
                    account (<code class="literal">baldwin</code>). In this case, that name
                    is not used because the authentication string has no prefix
                    and thus fully specifies the user DN.
                </p><p style="color:blue;">客户端连接到帐户中指定的用户名（baldwin）。在这种情况下，不使用该名称，因为身份验证字符串没有前缀，因此完全指定用户DN。</p><p>
                    This account authentication string does have
                    <code class="literal">+</code> at the beginning, so it is taken as just
                    part of the user DN:
                </p><p style="color:blue;">此帐户身份验证字符串的开头确实有+号，因此它仅被视为用户DN的一部分：</p><pre data-lang="sql" class="programlisting">CREATE USER 'accounting'
  IDENTIFIED WITH authentication_ldap_simple
  AS '+ou=People,dc=example,dc=com';
</pre><p>
                    The client connects with the user name specified in the
                    account (<code class="literal">accounting</code>), which in this case is
                    used as the <code class="literal">uid</code> attribute together with the
                    authentication string to construct the user DN:
                    <code class="literal">uid=accounting,ou=People,dc=example,dc=com</code>
                </p><p style="color:blue;">客户端连接到帐户（accounting）中指定的用户名，在本例中，该用户名与身份验证字符串一起用作uid属性，以构造用户dn:uid=accounting，ou=people，dc=example，dc=com</p><p>
                    The accounts in the preceding examples have a nonempty user
                    name, so the client always connects to the MySQL server using
                    the same name as specified in the account definition. If an
                    account has an empty user name, such as the default anonymous
                    <code class="literal">''@'%'</code> proxy account described in
                    <a class="xref" href="security.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>,
                    clients might connect to the MySQL server with varying user
                    names. But the principle is the same: If the authentication
                    string begins with <code class="literal">+</code>, the plugin uses the
                    user name sent by the client together with the authentication
                    string to construct the user DN.
                </p><p style="color:blue;">前面示例中的帐户具有非空用户名，因此客户端始终使用帐户定义中指定的相同名称连接到mysql服务器。如果某个帐户的用户名为空，例如LDAP Authentication with Proxying中描述的默认匿名“@”%”代理帐户，则客户端可能使用不同的用户名连接到MySQL服务器。但原理是相同的：如果认证字符串以+开头，插件将使用客户端发送的用户名和认证字符串来构造用户dn。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-usage-proxying"></a>LDAP Authentication with Proxying</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286885223904"></a><p>
                    LDAP authentication plugins support proxying, enabling a user
                    to connect to the MySQL server as one user but assume the
                    privileges of a different user. This section describes basic
                    LDAP plugin proxy support. The LDAP plugins also support
                    specification of group preference and proxy user mapping; see
                    <a class="xref" href="security.html#ldap-pluggable-authentication-usage-group-mapping" title="LDAP Authentication Group Preference and Mapping Specification">LDAP Authentication Group Preference and Mapping Specification</a>.
                </p><p style="color:blue;">LDAP身份验证插件支持代理，允许用户以一个用户的身份连接到MySQL服务器，但假定具有其他用户的权限。本节介绍基本的LDAP插件代理支持。LDAP插件还支持组首选项和代理用户映射的规范；请参阅LDAP身份验证组首选项和映射规范。</p><p>
                    The authentication scheme described here uses proxying based
                    on mapping LDAP group attribute values to connecting MySQL
                    users who authenticate using LDAP onto other MySQL accounts
                    that define different sets of privileges. Users do not connect
                    directly through the accounts that define the privileges.
                    Instead, they connect through a default proxy account
                    authenticated with LDAP, such that all the external logins are
                    mapped to the MySQL accounts that hold the privileges. Any
                    user who connects using the proxy account is mapped to one of
                    those MySQL accounts, the privileges for which determine the
                    database operations permitted to the external user.
                </p><p style="color:blue;">这里描述的身份验证方案使用基于映射LDAP组属性值的代理，将使用LDAP进行身份验证的MySQL用户连接到定义不同权限集的其他MySQL帐户。用户不直接通过定义权限的帐户进行连接。相反，它们通过一个通过LDAP验证的默认代理帐户进行连接，这样所有外部登录都映射到拥有特权的MySQL帐户。使用代理帐户连接的任何用户都将映射到其中一个mysql帐户，该帐户的权限决定允许外部用户执行的数据库操作。</p><p>
                    The instructions here assume the following scenario:
                </p><p style="color:blue;">此处的说明假设以下情况：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            LDAP entries use the <code class="literal">uid</code> and
                            <code class="literal">cn</code> attributes to specify user name and
                            group values, respectively. To use different user and
                            group attribute names, set the appropriate system
                            variables to configure the plugin:
                        </p><p style="color:blue;">LDAP条目使用uid和cn属性分别指定用户名和组值。要使用不同的用户和组属性名称，请设置适当的系统变量来配置插件：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    For <code class="literal">authentication_ldap_simple</code>: Set
                                    <a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
                                    and
                                    <a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_attr"><code class="literal">authentication_ldap_simple_group_search_attr</code></a>.
                                </p><p style="color:blue;">对于authentication_ldap_simple：设置authentication_ldap_simple_user_search_attr和authentication_ldap_simple_group_search_attr。</p></li><li class="listitem"><p>
                                    For <code class="literal">authentication_ldap_sasl</code>: Set
                                    <a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
                                    and
                                    <a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_attr"><code class="literal">authentication_ldap_sasl_group_search_attr</code></a>.
                                </p><p style="color:blue;">对于authentication_ldap_sasl：设置authentication_ldap_sasl_user_search_attr和authentication_ldap_sasl_group_search_attr。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            These LDAP entries are available in the directory managed
                            by the LDAP server, to provide distinguished name values
                            that uniquely identify each user:
                        </p><p style="color:blue;">这些LDAP条目在LDAP服务器管理的目录中可用，以提供唯一标识每个用户的可分辨名称值：</p><pre data-lang="ini" class="programlisting">uid=basha,ou=People,dc=example,dc=com,cn=accounting
uid=basil,ou=People,dc=example,dc=com,cn=front_office
</pre><p>
                            The group attribute values will become the authenticated
                            user names, so they name the <code class="literal">accounting</code>
                            and <code class="literal">front_office</code> proxied accounts.
                        </p><p style="color:blue;">组属性值将成为经过验证的用户名，因此它们命名了会计和FrangtOffice代理帐户。</p></li><li class="listitem"><p>
                            The examples assume use of SASL LDAP authentication. Make
                            the appropriate adjustments for simple LDAP
                            authentication.
                        </p><p style="color:blue;">这些示例假设使用sasldap身份验证。对简单LDAP身份验证进行适当的调整。</p></li></ul>
                    </div>
                    <p>
                        Create the default proxy MySQL account:
                    </p><p style="color:blue;">创建默认代理MySQL帐户：</p><pre data-lang="sql" class="programlisting">CREATE USER ''@'%'
  IDENTIFIED WITH authentication_ldap_simple;
</pre><p>
                    The proxy account definition has no <code class="literal">AS
                    '<em class="replaceable"><code>auth_string</code></em>'</code> clause to
                    name an LDAP user DN. Thus:
                </p><p style="color:blue;">代理帐户定义没有as'auth_string'子句来命名LDAP用户DN。因此：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            When clients connect, the client user name is used as the
                            LDAP user name to search for.
                        </p><p style="color:blue;">当客户端连接时，客户端用户名用作要搜索的LDAP用户名。</p></li><li class="listitem"><p>
                            The matching LDAP entry is expected to include a group
                            attribute naming the proxied MySQL account that defines
                            the privileges the client should have.
                        </p><p style="color:blue;">匹配的LDAP条目预计将包含一个组属性，命名为代理MySQL帐户，定义了客户端应该拥有的特权。</p></li></ul>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            If your MySQL installation has anonymous users, they might
                            conflict with the default proxy user. For more information
                            about this issue, and ways of dealing with it, see
                            <a class="xref" href="security.html#proxy-users-conflicts" title="Default Proxy User and Anonymous User Conflicts">Default Proxy User and Anonymous User Conflicts</a>.
                        </p><p style="color:blue;">如果您的mysql安装有匿名用户，它们可能与默认代理用户冲突。有关此问题及其处理方法的详细信息，请参阅默认代理用户和匿名用户冲突。</p>
                    </div>
                    <p>
                        Create the proxied accounts and grant to them the privileges
                        required for MySQL access:
                    </p><p style="color:blue;">创建代理帐户并授予MySQL访问所需的特权：</p><pre data-lang="sql" class="programlisting">CREATE USER 'accounting'@'localhost';
  IDENTIFIED WITH mysql_no_login;
CREATE USER 'front_office'@'localhost';
  IDENTIFIED WITH mysql_no_login;

GRANT ALL PRIVILEGES
  ON accountingdb.*
  TO 'accounting'@'localhost';
GRANT ALL PRIVILEGES
  ON frontdb.*
  TO 'front_office'@'localhost';
</pre><p>
                    The proxied accounts use the <code class="literal">mysql_no_login</code>
                    authentication plugin to prevent clients from using the
                    accounts to log in directly to the MySQL server. Instead, it
                    is expected that users who authenticate using LDAP will use
                    the default <code class="literal">''@'%'</code> proxy account. (This
                    assumes that the plugin is installed. For instructions, see
                    <a class="xref" href="security.html#no-login-pluggable-authentication" title="6.4.1.10&nbsp;No-Login Pluggable Authentication">Section&nbsp;6.4.1.10, “No-Login Pluggable Authentication”</a>.) For
                    alternative methods of protecting proxied accounts against
                    direct use, see
                    <a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
                </p><p style="color:blue;">代理帐户使用MySQL LoNoLogIn身份验证插件来防止客户端使用帐户直接登录到MySQL服务器。相反，预期使用LDAP进行身份验证的用户将使用默认的“@%”代理帐户。（这假设插件已安装。有关说明，请参阅第6节4.4.1.10节，“没有登录可插入的认证”。对于保护代理帐户的替代方法不直接使用，请参阅防止直接登录代理帐户。</p><p>
                    Grant to the proxy account the
                    <a class="link" href="security.html#priv_proxy"><code class="literal">PROXY</code></a> privilege for each
                    proxied account:
                </p><p style="color:blue;">给代理帐户授予代理权限：</p><pre data-lang="sql" class="programlisting">GRANT PROXY
  ON 'accounting'@'localhost'
  TO ''@'%';
GRANT PROXY
  ON 'front_office'@'localhost'
  TO ''@'%';
</pre><p>
                    Use the <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> command-line client to
                    connect to the MySQL server as <code class="literal">basha</code>.
                </p><p style="color:blue;">使用mysql命令行客户机作为basha连接到mysql服务器。</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=basha --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>basha_password</code></em></code></strong> <em class="replaceable"><code>(basha LDAP password)</code></em>
</pre><p>
                    Authentication occurs as follows:
                </p><p style="color:blue;">身份验证按如下方式进行：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            The server authenticates the connection using the default
                            <code class="literal">''@'%'</code> proxy account, for client user
                            <code class="literal">basha</code>.
                        </p><p style="color:blue;">服务器使用客户端用户basha的默认“@%”代理帐户对连接进行身份验证。</p></li><li class="listitem"><p>
                            The matching LDAP entry is:
                        </p><p style="color:blue;">匹配的LDAP条目是：</p><pre data-lang="ini" class="programlisting">uid=basha,ou=People,dc=example,dc=com,cn=accounting
</pre></li><li class="listitem"><p>
                            The matching LDAP entry has group attribute
                            <code class="literal">cn=accounting</code>, so
                            <code class="literal">accounting</code> becomes the authenticated
                            user.
                        </p><p style="color:blue;">匹配的LDAP条目具有组属性cn=accounting，因此accounting成为经过身份验证的用户。</p></li><li class="listitem"><p>
                            The authenticated user differs from the client user name
                            <code class="literal">basha</code>, with the result that
                            <code class="literal">basha</code> is treated as a proxy for
                            <code class="literal">accounting</code>, and
                            <code class="literal">basha</code> assumes the privileges of the
                            <code class="literal">accounting</code> account. The following query
                            should return output as shown:
                        </p><p style="color:blue;">经过身份验证的用户与客户端用户名basha不同，其结果是basha被视为记帐的代理，而basha拥有记帐帐户的权限。以下查询应返回如下所示的输出：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-----------------+----------------------+--------------+
| USER()          | CURRENT_USER()       | @@proxy_user |
+-----------------+----------------------+--------------+
| basha@localhost | accounting@localhost | ''@'%'       |
+-----------------+----------------------+--------------+
</pre></li></ol>
                    </div>
                    <p>
                        This demonstrates that <code class="literal">basha</code> uses the
                        privileges granted to the <code class="literal">accounting</code> MySQL
                        account, and that proxying occurred through the default proxy
                        user account.
                    </p><p style="color:blue;">这表明basha使用授予记帐mysql帐户的权限，并且代理是通过默认代理用户帐户进行的。</p><p>
                    Now connect as <code class="literal">basil</code> instead:
                </p><p style="color:blue;">现在改为basil连接：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=basil --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>basil_password</code></em></code></strong> <em class="replaceable"><code>(basil LDAP password)</code></em>
</pre><p>
                    The authentication process for <code class="literal">basil</code> is
                    similar to that previously described for
                    <code class="literal">basha</code>:
                </p><p style="color:blue;">basil的身份验证过程与前面为basha描述的过程类似：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            The server authenticates the connection using the default
                            <code class="literal">''@'%'</code> proxy account, for client user
                            <code class="literal">basil</code>.
                        </p><p style="color:blue;">服务器使用客户端用户basil的默认“@%”代理帐户对连接进行身份验证。</p></li><li class="listitem"><p>
                            The matching LDAP entry is:
                        </p><p style="color:blue;">匹配的LDAP条目是：</p><pre data-lang="ini" class="programlisting">uid=basil,ou=People,dc=example,dc=com,cn=front_office
</pre></li><li class="listitem"><p>
                            The matching LDAP entry has group attribute
                            <code class="literal">cn=front_office</code>, so
                            <code class="literal">front_office</code> becomes the authenticated
                            user.
                        </p><p style="color:blue;">匹配的LDAP条目具有组属性cn=front_office，因此front_office成为经过身份验证的用户。</p></li><li class="listitem"><p>
                            The authenticated user differs from the client user name
                            <code class="literal">basil</code>, with the result that
                            <code class="literal">basil</code> is treated as a proxy for
                            <code class="literal">front_office</code>, and
                            <code class="literal">basil</code> assumes the privileges of the
                            <code class="literal">front_office</code> account. The following
                            query should return output as shown:
                        </p><p style="color:blue;">经过身份验证的用户与客户端用户名basil不同，其结果是basil被视为front_office的代理，而basil承担front_office帐户的权限。以下查询应返回如下所示的输出：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER(), CURRENT_USER(), @@proxy_user;</code></strong>
+-----------------+------------------------+--------------+
| USER()          | CURRENT_USER()         | @@proxy_user |
+-----------------+------------------------+--------------+
| basil@localhost | front_office@localhost | ''@'%'       |
+-----------------+------------------------+--------------+
</pre></li></ol>
                    </div>
                    <p>
                        This demonstrates that <code class="literal">basil</code> uses the
                        privileges granted to the <code class="literal">front_office</code>
                        MySQL account, and that proxying occurred through the default
                        proxy user account.
                    </p><p style="color:blue;">这表明basil使用授予front_office mysql帐户的权限，并且代理是通过默认代理用户帐户进行的。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="ldap-pluggable-authentication-usage-group-mapping"></a>LDAP Authentication Group Preference and Mapping Specification</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286885141632"></a><a class="indexterm" name="idm140286885140144"></a><p>
                    As described in
                    <a class="xref" href="security.html#ldap-pluggable-authentication-usage-proxying" title="LDAP Authentication with Proxying">LDAP Authentication with Proxying</a>,
                    basic LDAP authentication proxying works by the principle that
                    the plugin uses the first group name returned by the LDAP
                    server as the MySQL proxy user account name. This simple
                    capability does not enable specifying any preference about
                    which group name to use if the LDAP server returns multiple
                    names, or any name other than the group name as the proxy user
                    name.
                </p><p style="color:blue;">如ldap authentication with proxying中所述，基本ldap authentication proxying的工作原理是插件使用ldap服务器返回的第一个组名作为mysql代理用户帐户名。如果LDAP服务器返回多个名称，或将组名以外的任何名称作为代理用户名，则此简单功能不允许指定要使用的组名的任何首选项。</p><p>
                    As of MySQL 5.7.25, for MySQL accounts that use LDAP
                    authentication, the authentication string can specify the
                    following information to enable greater proxying flexibility:
                </p><p style="color:blue;">对于MySQL 5.7.25，对于使用LDAP身份验证的MySQL帐户，身份验证字符串可以指定以下信息以启用更大的代理灵活性：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            A list of groups in preference order, such that the plugin
                            uses the first group name in the list that matches a group
                            returned by the LDAP server.
                        </p><p style="color:blue;">按优先顺序排列的组列表，以便插件使用列表中与LDAP服务器返回的组匹配的第一个组名。</p></li><li class="listitem"><p>
                            A mapping from group names to proxy user names, such that
                            a group name when matched can provide a specified name to
                            use as the proxy user. This provides an alternative to
                            using the group name as the proxy user.
                        </p><p style="color:blue;">从组名到代理用户名的映射，以便组名匹配时可以提供指定的名称用作代理用户。这为使用组名作为代理用户提供了一种替代方法。</p></li></ul>
                    </div>
                    <p>
                        Consider the following MySQL proxy account definition:
                    </p><p style="color:blue;">请考虑以下mysql代理帐户定义：</p><pre data-lang="sql" class="programlisting">CREATE USER ''@'%'
  IDENTIFIED WITH authentication_ldap_sasl
  AS '+ou=People,dc=example,dc=com#grp1=usera,grp2,grp3=userc';
</pre><p>
                    The authentication string has a user DN suffix
                    <code class="literal">ou=People,dc=example,dc=com</code> prefixed by the
                    <code class="literal">+</code> character. Thus, as described in
                    <a class="xref" href="security.html#ldap-pluggable-authentication-usage-user-dn-suffix" title="LDAP Authentication User DN Suffixes">LDAP Authentication User DN Suffixes</a>,
                    the full user DN is constructed from the user DN suffix as
                    specified, plus the client user name as the
                    <code class="literal">uid</code> attribute.
                </p><p style="color:blue;">身份验证字符串有一个用户DN后缀ou=people，dc=example，dc=com，前缀是+字符。因此，如ldap身份验证用户dn后缀中所述，完整的用户dn由指定的用户dn后缀加上作为uid属性的客户端用户名构成。</p><p>
                    The remaining part of the authentication string begins with
                    <code class="literal">#</code>, which signifies the beginning of group
                    preference and mapping information. This part of the
                    authentication string lists group names in the order
                    <code class="literal">grp1</code>, <code class="literal">grp2</code>,
                    <code class="literal">grp3</code>. The LDAP plugin compares that list
                    with the set of group names returned by the LDAP server,
                    looking in list order for a match against the returned names.
                    The plugin uses the first match, or if there is no match,
                    authentication fails.
                </p><p style="color:blue;">身份验证字符串的其余部分以开头，表示组首选项和映射信息的开头。认证字符串的这一部分按grp1、grp2、grp3的顺序列出组名。ldap插件将该列表与ldap服务器返回的组名集进行比较，按列表顺序查找与返回名称的匹配项。插件使用第一个匹配项，如果没有匹配项，则验证失败。</p><p>
                    Suppose that the LDAP server returns groups
                    <code class="literal">grp3</code>, <code class="literal">grp2</code>, and
                    <code class="literal">grp7</code>. The LDAP plugin uses
                    <code class="literal">grp2</code> because it is the first group in the
                    authentication string that matches, even though it is not the
                    first group returned by the LDAP server. If the LDAP server
                    returns <code class="literal">grp4</code>, <code class="literal">grp2</code>, and
                    <code class="literal">grp1</code>, the plugin uses
                    <code class="literal">grp1</code> even though <code class="literal">grp2</code>
                    also matches. <code class="literal">grp1</code> has a precedence higher
                    than <code class="literal">grp2</code> because it is listed earlier in
                    the authentication string.
                </p><p style="color:blue;">假设LDAP服务器返回GRP3、GRP2和GRP7组。LDAP插件使用GRP2，因为它是身份验证字符串中匹配的第一个组，即使它不是LDAP服务器返回的第一个组。如果LDAP服务器返回grp4、grp2和grp1，则插件使用grp1，即使grp2也匹配。GRP1的优先级高于GRP2，因为它在身份验证字符串的前面列出。</p><p>
                    Assuming that the plugin finds a group name match, it performs
                    mapping from that group name to the MySQL proxy user name, if
                    there is one. For the example proxy account, mapping occurs as
                    follows:
                </p><p style="color:blue;">假设插件发现一个组名匹配，它将执行从该组名到mysql代理用户名（如果有）的映射。对于示例代理帐户，映射如下所示：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the matching group name is <code class="literal">grp1</code> or
                            <code class="literal">grp3</code>, those are associated in the
                            authentication string with user names
                            <code class="literal">usera</code> and <code class="literal">userc</code>,
                            respectively. The plugin uses the corresponding associated
                            user name as the proxy user name.
                        </p><p style="color:blue;">如果匹配的组名是grp1或grp3，则在身份验证字符串中，这些组名分别与用户名usera和userc关联。插件使用相应的关联用户名作为代理用户名。</p></li><li class="listitem"><p>
                            If the matching group name is <code class="literal">grp2</code>,
                            there is no associated user name in the authentication
                            string. The plugin uses <code class="literal">grp2</code> as the
                            proxy user name.
                        </p><p style="color:blue;">如果匹配的组名是grp2，则验证字符串中没有关联的用户名。插件使用grp2作为代理用户名。</p></li></ul>
                    </div>
                    <p>
                        If the LDAP server returns a group in DN format, the LDAP
                        plugin parses the group DN to extract the group name from it.
                    </p><p style="color:blue;">如果LDAP服务器以DN格式返回组，LDAP插件将解析组DN以从中提取组名。</p><p>
                    To specify LDAP group preference and mapping information,
                    these principles apply:
                </p><p style="color:blue;">要指定LDAP组首选项和映射信息，请应用以下原则：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Begin the group preference and mapping part of the
                            authentication string with a <code class="literal">#</code> prefix
                            character.
                        </p><p style="color:blue;">以前缀字符开始组首选项和身份验证字符串的映射部分。</p></li><li class="listitem"><p>
                            The group preference and mapping specification is a list
                            of one or more items, separated by commas. Each item has
                            the form
                            <code class="literal"><em class="replaceable"><code>group_name</code></em>=<em class="replaceable"><code>user_name</code></em></code>
                            or <em class="replaceable"><code>group_name</code></em>. Items should be
                            listed in group name preference order. For a group name
                            selected by the plugin as a match from set of group names
                            returned by the LDAP server, the two syntaxes differ in
                            effect as follows:
                        </p><p style="color:blue;">组首选项和映射规范是一个或多个项的列表，用逗号分隔。每个项的格式为group_name=user_name或group_name。项目应按组名首选项顺序列出。对于插件从LDAP服务器返回的一组组组名中选择作为匹配项的组名，这两个语法的效果不同，如下所示：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    For an item specified as
                                    <code class="literal"><em class="replaceable"><code>group_name</code></em>=<em class="replaceable"><code>user_name</code></em></code>
                                    (with a user name), the group name maps to the user
                                    name, which is used as the MySQL proxy user name.
                                </p><p style="color:blue;">对于指定为group_name=user_name（带用户名）的项，组名映射到用户名，该用户名用作mysql代理用户名。</p></li><li class="listitem"><p>
                                    For an item specified as
                                    <em class="replaceable"><code>group_name</code></em> (with no user
                                    name), the group name is used as the MySQL proxy user
                                    name.
                                </p><p style="color:blue;">对于指定为组名（没有用户名）的项，组名将用作mysql代理用户名。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            To quote a group or user name that contains special
                            characters such as space, surround it by double quote
                            (<code class="literal">"</code>) characters. For example, if an item
                            has group and user names of <code class="literal">my group
                            name</code> and <code class="literal">my user name</code>, it
                            must be written in a group mapping using quotes:
                        </p><p style="color:blue;">要引用包含特殊字符（如空格）的组或用户名，请用双引号（“）字符将其括起来。例如，如果某个项具有组名和用户名“我的组名”和“我的用户名”，则必须使用引号将其写入组映射中：</p><pre data-lang="none" class="programlisting">"my group name"="my user name"
</pre><p>
                            If an item has group and user names of
                            <code class="literal">my_group_name</code> and
                            <code class="literal">my_user_name</code> (which contain no special
                            characters), it may but need not be written using quotes.
                            Any of the following are valid:
                        </p><p style="color:blue;">如果项目的组名和用户名为“我的组名”和“我的用户名”（不包含特殊字符），则可以但不必使用引号来编写。下列任何一项均有效：</p><pre data-lang="none" class="programlisting">my_group_name=my_user_name
my_group_name="my_user_name"
"my_group_name"=my_user_name
"my_group_name"="my_user_name"
</pre></li><li class="listitem"><p>
                            To escape a character, precede it by a backslash
                            (<code class="literal">\</code>). This is useful particularly to
                            include a literal double quote or backslash, which are
                            otherwise not included literally.
                        </p><p style="color:blue;">要转义字符，请在其前面加上反斜杠（\）。这对于包含字面上的双引号或反斜杠特别有用，否则字面上不包含。</p></li><li class="listitem"><p>
                            A user DN need not be present in the authentication
                            string, but if present, it must precede the group
                            preference and mapping part. A user DN can be given as a
                            full user DN, or as a user DN suffix with a
                            <code class="literal">+</code> prefix character.
                        </p><p style="color:blue;">用户DN不必出现在身份验证字符串中，但如果存在，它必须位于组首选项和映射部分之前。用户dn可以作为完整的用户dn，也可以作为带有+前缀字符的用户dn后缀。</p></li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="no-login-pluggable-authentication"></a>6.4.1.10&nbsp;No-Login Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286885087200"></a><a class="indexterm" name="idm140286885086112"></a><p>
                The <code class="literal">mysql_no_login</code> server-side authentication
                plugin prevents all client connections to any account that uses
                it. Use cases for this plugin include:
            </p><p style="color:blue;">mysql_no_登录服务器端身份验证插件防止所有客户端连接到使用它的任何帐户。此插件的用例包括：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Accounts that must be able to execute stored programs and
                        views with elevated privileges without exposing those
                        privileges to ordinary users.
                    </p><p style="color:blue;">必须能够以提升的权限执行存储程序和视图而不向普通用户公开这些权限的帐户。</p></li><li class="listitem"><p>
                        Proxied accounts that should never permit direct login but
                        are intended to be accessed only through proxy accounts.
                    </p><p style="color:blue;">代理帐户，不应允许直接登录，但只能通过代理帐户访问。</p></li></ul>
                </div>
                <p>
                    The following table shows the plugin and library file names. The
                    file name suffix might differ on your system. The file must be
                    located in the directory named by the
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
                </p><p style="color:blue;">下表显示了插件和库文件名。系统上的文件名后缀可能不同。文件必须位于plugin_dir系统变量命名的目录中。</p>
                <div class="table">
                    <a name="idm140286885079216"></a><p class="title"><b>Table&nbsp;6.16&nbsp;Plugin and Library Names for No-Login Authentication</b></p><p style="color:blue;">表6.16没有登录身份验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for no-login password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">mysql_no_login</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td>None</td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td><code class="filename">mysql_no_login.so</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to no-login pluggable authentication:
            </p><p style="color:blue;">以下各节提供了特定于无登录可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#no-login-pluggable-authentication-installation" title="Installing No-Login Pluggable Authentication">Installing No-Login Pluggable Authentication</a></p><p style="color:blue;">安装无登录可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#no-login-pluggable-authentication-uninstallation" title="Uninstalling No-Login Pluggable Authentication">Uninstalling No-Login Pluggable Authentication</a></p><p style="color:blue;">卸载无登录可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#no-login-pluggable-authentication-usage" title="Using No-Login Pluggable Authentication">Using No-Login Pluggable Authentication</a></p><p style="color:blue;">使用无登录可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>. For proxy user
                    information, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。有关代理用户信息，请参见第6.2.14节“代理用户”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="no-login-pluggable-authentication-installation"></a>Installing No-Login Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        This section describes how to install the no-login
                        authentication plugin. For general information about
                        installing plugins, see <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                    </p><p style="color:blue;">本节介绍如何安装无登录身份验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    The plugin library file base name is
                    <code class="literal">mysql_no_login</code>. The file name suffix
                    differs per platform (for example, <code class="filename">.so</code>
                    for Unix and Unix-like systems, <code class="filename">.dll</code> for
                    Windows).
                </p><p style="color:blue;">插件库文件的基本名称是mysql_no_login。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                    To load the plugin at server startup, use the
                    <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to
                    name the library file that contains it. With this
                    plugin-loading method, the option must be given each time the
                    server starts. For example, put these lines in the server
                    <code class="filename">my.cnf</code> file (adjust the
                    <code class="filename">.so</code> suffix for your platform as
                    necessary):
                </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含该插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=mysql_no_login.so
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    Alternatively, to load the plugin at runtime, use this
                    statement (adjust the <code class="filename">.so</code> suffix for your
                    platform as necessary):
                </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN mysql_no_login SONAME 'mysql_no_login.so';
</pre><p>
                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                    immediately, and also registers it in the
                    <code class="literal">mysql.plugins</code> system table to cause the
                    server to load it for each subsequent normal startup without
                    the need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
                </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
                    or use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>
                    statement (see
                    <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE '%login%';</code></strong>
+----------------+---------------+
| PLUGIN_NAME    | PLUGIN_STATUS |
+----------------+---------------+
| mysql_no_login | ACTIVE        |
+----------------+---------------+
</pre><p>
                    If the plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                    To associate MySQL accounts with the no-login plugin, see
                    <a class="xref" href="security.html#no-login-pluggable-authentication-usage" title="Using No-Login Pluggable Authentication">Using No-Login Pluggable Authentication</a>.
                </p><p style="color:blue;">要将mysql帐户与无登录插件相关联，请参阅使用无登录插件身份验证。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="no-login-pluggable-authentication-uninstallation"></a>Uninstalling No-Login Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The method used to uninstall the no-login authentication
                        plugin depends on how you installed it:
                    </p><p style="color:blue;">用于卸载无登录身份验证插件的方法取决于安装方式：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you installed the plugin at server startup using a
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option,
                            restart the server without the option.
                        </p><p style="color:blue;">如果在服务器启动时使用--plugin load add选项安装插件，请在没有该选项的情况下重新启动服务器。</p></li><li class="listitem"><p>
                            If you installed the plugin at runtime using an
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement,
                            it remains installed across server restarts. To uninstall
                            it, use <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>:
                        </p><p style="color:blue;">如果在运行时使用install-plugin语句安装插件，则在服务器重新启动时仍会安装该插件。要卸载它，请使用卸载插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN mysql_no_login;
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="no-login-pluggable-authentication-usage"></a>Using No-Login Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes how to use the no-login authentication
                        plugin to prevent accounts from being used for connecting from
                        MySQL client programs to the server. It is assumed that the
                        server is running with the no-login plugin enabled, as
                        described in
                        <a class="xref" href="security.html#no-login-pluggable-authentication-installation" title="Installing No-Login Pluggable Authentication">Installing No-Login Pluggable Authentication</a>.
                    </p><p style="color:blue;">本节介绍如何使用无登录身份验证插件防止帐户用于从mysql客户端程序连接到服务器。假设服务器运行时启用了无登录插件，如安装无登录插件身份验证中所述。</p><p>
                    To refer to the no-login authentication plugin in the
                    <code class="literal">IDENTIFIED WITH</code> clause of a
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement, use the
                    name <code class="literal">mysql_no_login</code>.
                </p><p style="color:blue;">要引用create user语句的identified with子句中的no login身份验证插件，请使用mysql_no_login名称。</p><p>
                    An account that authenticates using
                    <code class="literal">mysql_no_login</code> may be used as the
                    <code class="literal">DEFINER</code> for stored program and view
                    objects. If such an object definition also includes
                    <code class="literal">SQL SECURITY DEFINER</code>, it executes with that
                    account's privileges. DBAs can use this behavior to provide
                    access to confidential or sensitive data that is exposed only
                    through well-controlled interfaces.
                </p><p style="color:blue;">使用mysql-no-u登录进行身份验证的帐户可以用作存储程序和视图对象的定义者。如果这样的对象定义还包括sql安全定义器，则它将使用该帐户的权限执行。dba可以使用此行为提供对机密或敏感数据的访问，这些数据仅通过控制良好的接口公开。</p><p>
                    The following example illustrates these principles. It defines
                    an account that does not permit client connections, and
                    associates with it a view that exposes only certain columns of
                    the <code class="literal">mysql.user</code> system table:
                </p><p style="color:blue;">下面的示例说明了这些原则。它定义了一个不允许客户端连接的帐户，并与之关联一个仅公开mysql.user系统表的某些列的视图：</p><pre data-lang="sql" class="programlisting">CREATE DATABASE nologindb;
CREATE USER 'nologin'@'localhost'
  IDENTIFIED WITH mysql_no_login;
GRANT ALL ON nologindb.*
  TO 'nologin'@'localhost';
GRANT SELECT ON mysql.user
  TO 'nologin'@'localhost';
CREATE DEFINER = 'nologin'@'localhost'
  SQL SECURITY DEFINER
  VIEW nologindb.myview
  AS SELECT User, Host FROM mysql.user;
</pre><p>
                    To provide protected access to the view to an ordinary user,
                    do this:
                </p><p style="color:blue;">要向普通用户提供对视图的受保护访问，请执行以下操作：</p><pre data-lang="sql" class="programlisting">GRANT SELECT ON nologindb.myview
  TO 'ordinaryuser'@'localhost';
</pre><p>
                    Now the ordinary user can use the view to access the limited
                    information it presents:
                </p><p style="color:blue;">现在，普通用户可以使用该视图访问其显示的有限信息：</p><pre data-lang="sql" class="programlisting">SELECT * FROM nologindb.myview;
</pre><p>
                    Attempts by the user to access columns other than those
                    exposed by the view result in an error, as do attempts to
                    select from the view by users not granted access to it.
                </p><p style="color:blue;">用户尝试访问视图所公开的列以外的列会导致错误，未被授予访问权限的用户尝试从视图中进行选择也会导致错误。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Because the <code class="literal">nologin</code> account cannot be
                            used directly, the operations required to set up objects
                            that it uses must be performed by <code class="literal">root</code> or
                            similar account that has the privileges required to create
                            the objects and set <code class="literal">DEFINER</code> values.
                        </p><p style="color:blue;">由于无法直接使用nologin帐户，因此设置其使用的对象所需的操作必须由具有创建对象和设置定义器值所需权限的根帐户或类似帐户执行。</p>
                    </div>
                    <p>
                        The <code class="literal">mysql_no_login</code> plugin is also useful in
                        proxying scenarios. (For a discussion of concepts involved in
                        proxying, see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.) An account that
                        authenticates using <code class="literal">mysql_no_login</code> may be
                        used as a proxied user for proxy accounts:
                    </p><p style="color:blue;">mysql_no_登录插件在代理场景中也很有用。（为了讨论代理中涉及的概念，请参阅第6节第2.2.14节，“代理用户”。使用MySqLyNoLogin认证的帐户可以用作代理帐户的代理用户：</p><pre data-lang="sql" class="programlisting">-- create proxied account
CREATE USER 'proxied_user'@'localhost'
  IDENTIFIED WITH mysql_no_login;
-- grant privileges to proxied account
GRANT ...
  ON ...
  TO 'proxied_user'@'localhost';
-- permit proxy_user to be a proxy account for proxied account
GRANT PROXY
  ON 'proxied_user'@'localhost'
  TO 'proxy_user'@'localhost';
</pre><p>
                    This enables clients to access MySQL through the proxy account
                    (<code class="literal">proxy_user</code>) but not to bypass the proxy
                    mechanism by connecting directly as the proxied user
                    (<code class="literal">proxied_user</code>). A client who connects using
                    the <code class="literal">proxy_user</code> account has the privileges
                    of the <code class="literal">proxied_user</code> account, but
                    <code class="literal">proxied_user</code> itself cannot be used to
                    connect.
                </p><p style="color:blue;">这使得客户端可以通过代理帐户（PROXYOR用户）访问MySQL，而不直接通过代理用户（PROXEDIGHULL）连接来绕过代理机制。使用PROXYUL用户帐户连接的客户端具有PROXIEDY用户帐户的特权，但PROXIEDUSSULL本身不能用于连接。</p><p>
                    For alternative methods of protecting proxied accounts against
                    direct use, see
                    <a class="xref" href="security.html#preventing-proxied-account-direct-login" title="Preventing Direct Login to Proxied Accounts">Preventing Direct Login to Proxied Accounts</a>.
                </p><p style="color:blue;">对于保护代理帐户免于直接使用的替代方法，请参见防止直接登录代理帐户。</p>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="socket-pluggable-authentication"></a>6.4.1.11&nbsp;Socket Peer-Credential Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286884993184"></a><a class="indexterm" name="idm140286884992144"></a><p>
                The server-side <code class="literal">auth_socket</code> authentication
                plugin authenticates clients that connect from the local host
                through the Unix socket file. The plugin uses the
                <code class="literal">SO_PEERCRED</code> socket option to obtain
                information about the user running the client program. Thus, the
                plugin can be used only on systems that support the
                <code class="literal">SO_PEERCRED</code> option, such as Linux.
            </p><p style="color:blue;">服务器端auth_socket authentication插件对通过unix套接字文件从本地主机连接的客户端进行身份验证。插件使用sou peercred socket选项获取有关运行客户端程序的用户的信息。因此，插件只能在支持so peercred选项的系统上使用，比如linux。</p><p>
                The source code for this plugin can be examined as a relatively
                simple example demonstrating how to write a loadable
                authentication plugin.
            </p><p style="color:blue;">这个插件的源代码可以作为一个相对简单的示例来检查，演示如何编写一个可加载的身份验证插件。</p><p>
                The following table shows the plugin and library file names. The
                file must be located in the directory named by the
                <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
            </p><p style="color:blue;">下表显示了插件和库文件名。文件必须位于plugin_dir系统变量命名的目录中。</p>
                <div class="table">
                    <a name="idm140286884985392"></a><p class="title"><b>Table&nbsp;6.17&nbsp;Plugin and Library Names for Socket Peer-Credential Authentication</b></p><p style="color:blue;">表6.17套接字对等凭据身份验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for socket peer-credential password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">auth_socket</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td>None, see discussion</td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td><code class="filename">auth_socket.so</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to socket pluggable authentication:
            </p><p style="color:blue;">以下部分提供特定于套接字可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#socket-pluggable-authentication-installation" title="Installing Socket Pluggable Authentication">Installing Socket Pluggable Authentication</a></p><p style="color:blue;">安装套接字可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#socket-pluggable-authentication-uninstallation" title="Uninstalling Socket Pluggable Authentication">Uninstalling Socket Pluggable Authentication</a></p><p style="color:blue;">卸载套接字可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#socket-pluggable-authentication-usage" title="Using Socket Pluggable Authentication">Using Socket Pluggable Authentication</a></p><p style="color:blue;">使用套接字可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="socket-pluggable-authentication-installation"></a>Installing Socket Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        This section describes how to install the socket
                        authentication plugin. For general information about
                        installing plugins, see <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                    </p><p style="color:blue;">本节介绍如何安装套接字身份验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    To load the plugin at server startup, use the
                    <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to
                    name the library file that contains it. With this
                    plugin-loading method, the option must be given each time the
                    server starts. For example, put these lines in the server
                    <code class="filename">my.cnf</code> file:
                </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含该插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=auth_socket.so
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    Alternatively, to load the plugin at runtime, use this
                    statement:
                </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN auth_socket SONAME 'auth_socket.so';
</pre><p>
                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                    immediately, and also registers it in the
                    <code class="literal">mysql.plugins</code> system table to cause the
                    server to load it for each subsequent normal startup without
                    the need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
                </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
                    or use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>
                    statement (see
                    <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE '%socket%';</code></strong>
+-------------+---------------+
| PLUGIN_NAME | PLUGIN_STATUS |
+-------------+---------------+
| auth_socket | ACTIVE        |
+-------------+---------------+
</pre><p>
                    If the plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                    To associate MySQL accounts with the socket plugin, see
                    <a class="xref" href="security.html#socket-pluggable-authentication-usage" title="Using Socket Pluggable Authentication">Using Socket Pluggable Authentication</a>.
                </p><p style="color:blue;">要将MySQL帐户与套接字插件关联，请参阅使用套接字可插拔身份验证。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="socket-pluggable-authentication-uninstallation"></a>Uninstalling Socket Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The method used to uninstall the socket authentication plugin
                        depends on how you installed it:
                    </p><p style="color:blue;">用于卸载套接字身份验证插件的方法取决于安装方式：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you installed the plugin at server startup using a
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option,
                            restart the server without the option.
                        </p><p style="color:blue;">如果在服务器启动时使用--plugin load add选项安装插件，请在没有该选项的情况下重新启动服务器。</p></li><li class="listitem"><p>
                            If you installed the plugin at runtime using an
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement,
                            it remains installed across server restarts. To uninstall
                            it, use <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>:
                        </p><p style="color:blue;">如果在运行时使用install-plugin语句安装插件，则在服务器重新启动时仍会安装该插件。要卸载它，请使用卸载插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN auth_socket;
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="socket-pluggable-authentication-usage"></a>Using Socket Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The socket plugin checks whether the socket user name (the
                        operating system user name) matches the MySQL user name
                        specified by the client program to the server. If the names do
                        not match, the plugin checks whether the socket user name
                        matches the name specified in the
                        <code class="literal">authentication_string</code> column of the
                        <code class="literal">mysql.user</code> system table row. If a match is
                        found, the plugin permits the connection. The
                        <code class="literal">authentication_string</code> value can be
                        specified using an <code class="literal">IDENTIFIED ...AS</code> clause
                        with <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> or
                        <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>.
                    </p><p style="color:blue;">套接字插件检查套接字用户名（操作系统用户名）是否与客户端程序指定的mysql用户名匹配到服务器。如果名称不匹配，插件将检查套接字用户名是否与mysql.user system表行authentication_string列中指定的名称匹配。如果找到匹配项，则插件允许连接。可以使用带有create user或alter user的identified…as子句指定authentication_string值。</p><p>
                    Suppose that a MySQL account is created for an operating
                    system user named <code class="literal">valerie</code> who is to be
                    authenticated by the <code class="literal">auth_socket</code> plugin for
                    connections from the local host through the socket file:
                </p><p style="color:blue;">假设为一个名为valerie的操作系统用户创建了一个mysql帐户，该用户将通过auth_socket插件进行身份验证，以便通过socket文件从本地主机进行连接：</p><pre data-lang="sql" class="programlisting">CREATE USER 'valerie'@'localhost' IDENTIFIED WITH auth_socket;
</pre><p>
                    If a user on the local host with a login name of
                    <code class="literal">stefanie</code> invokes <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a>
                    with the option <code class="option">--user=valerie</code> to connect
                    through the socket file, the server uses
                    <code class="literal">auth_socket</code> to authenticate the client. The
                    plugin determines that the <code class="option">--user</code> option
                    value (<code class="literal">valerie</code>) differs from the client
                    user's name (<code class="literal">stephanie</code>) and refuses the
                    connection. If a user named <code class="literal">valerie</code> tries
                    the same thing, the plugin finds that the user name and the
                    MySQL user name are both <code class="literal">valerie</code> and
                    permits the connection. However, the plugin refuses the
                    connection even for <code class="literal">valerie</code> if the
                    connection is made using a different protocol, such as TCP/IP.
                </p><p style="color:blue;">如果本地主机上登录名为stefanie的用户使用选项--user=valerie调用mysql通过套接字文件进行连接，服务器将使用auth_socket对客户端进行身份验证。插件确定--user选项值（valerie）与客户端用户名（stephanie）不同，并拒绝连接。如果一个名为valerie的用户尝试相同的操作，插件会发现用户名和mysql用户名都是valerie，并且允许连接。但是，如果连接是使用不同的协议（如TCP/IP）进行的，插件甚至会拒绝Valerie的连接。</p><p>
                    To permit both the <code class="literal">valerie</code> and
                    <code class="literal">stephanie</code> operating system users to access
                    MySQL through socket file connections that use the account,
                    this can be done two ways:
                </p><p style="color:blue;">要允许Valerie和Stephanie操作系统用户通过使用该帐户的套接字文件连接访问MySQL，可以通过两种方式进行：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Name both users at account-creation time, one following
                            <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>, and the other
                            in the authentication string:
                        </p><p style="color:blue;">在创建帐户时命名两个用户，一个在创建用户之后，另一个在身份验证字符串中：</p><pre data-lang="sql" class="programlisting">CREATE USER 'valerie'@'localhost' IDENTIFIED WITH auth_socket AS 'stephanie';
</pre></li><li class="listitem"><p>
                            If you have already used <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
                            USER</code></a> to create the account for a single user,
                            use <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> to add the
                            second user:
                        </p><p style="color:blue;">如果已使用create user为单个用户创建帐户，请使用alter user添加第二个用户：</p><pre data-lang="sql" class="programlisting">CREATE USER 'valerie'@'localhost' IDENTIFIED WITH auth_socket;
ALTER USER 'valerie'@'localhost' IDENTIFIED WITH auth_socket AS 'stephanie';
</pre></li></ul>
                    </div>
                    <p>
                        To access the account, both <code class="literal">valerie</code> and
                        <code class="literal">stephanie</code> specify
                        <code class="option">--user=valerie</code> at connect time.
                    </p><p style="color:blue;">要访问该帐户，Valerie和Stephanie在连接时都指定--user=Valerie。</p>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="test-pluggable-authentication"></a>6.4.1.12&nbsp;Test Pluggable Authentication</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286884901328"></a><a class="indexterm" name="idm140286884900224"></a><a class="indexterm" name="idm140286884898736"></a><a class="indexterm" name="idm140286884897648"></a><p>
                MySQL includes a test plugin that checks account credentials and
                logs success or failure to the server error log. This is a
                loadable plugin (not built in) and must be installed prior to
                use.
            </p><p style="color:blue;">mysql包含一个测试插件，用于检查帐户凭据并将成功或失败记录到服务器错误日志中。这是一个可加载的插件（不是内置的），必须在使用前安装。</p><p>
                The test plugin source code is separate from the server source,
                unlike the built-in native plugin, so it can be examined as a
                relatively simple example demonstrating how to write a loadable
                authentication plugin.
            </p><p style="color:blue;">与内置的本机插件不同，测试插件源代码与服务器源代码是分开的，因此可以将其作为一个相对简单的示例进行检查，演示如何编写可加载的身份验证插件。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        This plugin is intended for testing and development purposes,
                        and is not for use in production environments or on servers
                        that are exposed to public networks.
                    </p><p style="color:blue;">此插件用于测试和开发目的，不用于生产环境或暴露于公共网络的服务器。</p>
                </div>
                <p>
                    The following table shows the plugin and library file names. The
                    file name suffix might differ on your system. The file must be
                    located in the directory named by the
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
                </p><p style="color:blue;">下表显示了插件和库文件名。系统上的文件名后缀可能不同。文件必须位于plugin_dir系统变量命名的目录中。</p>
                <div class="table">
                    <a name="idm140286884892064"></a><p class="title"><b>Table&nbsp;6.18&nbsp;Plugin and Library Names for Test Authentication</b></p><p style="color:blue;">表6.18用于测试身份验证的插件和库名称</p>
                    <div class="table-contents">
                        <table summary="Names for the plugins and library file used for test password authentication."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                            <th scope="col">Plugin or File</th>
                            <th scope="col">Plugin or File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">Server-side plugin</td>
                            <td><code class="literal">test_plugin_server</code></td>
                        </tr><tr>
                            <td scope="row">Client-side plugin</td>
                            <td><code class="literal">auth_test_plugin</code></td>
                        </tr><tr>
                            <td scope="row">Library file</td>
                            <td><code class="filename">auth_test_plugin.so</code></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break"><p>
                The following sections provide installation and usage
                information specific to test pluggable authentication:
            </p><p style="color:blue;">以下各节提供了特定于测试可插拔身份验证的安装和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#test-pluggable-authentication-installation" title="Installing Test Pluggable Authentication">Installing Test Pluggable Authentication</a></p><p style="color:blue;">安装测试可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#test-pluggable-authentication-uninstallation" title="Uninstalling Test Pluggable Authentication">Uninstalling Test Pluggable Authentication</a></p><p style="color:blue;">卸载测试可插拔身份验证</p></li><li class="listitem"><p><a class="xref" href="security.html#test-pluggable-authentication-usage" title="Using Test Pluggable Authentication">Using Test Pluggable Authentication</a></p><p style="color:blue;">使用测试可插拔身份验证</p></li></ul>
                </div>
                <p>
                    For general information about pluggable authentication in MySQL,
                    see <a class="xref" href="security.html#pluggable-authentication" title="6.2.13&nbsp;Pluggable Authentication">Section&nbsp;6.2.13, “Pluggable Authentication”</a>.
                </p><p style="color:blue;">有关MySQL中可插入身份验证的一般信息，请参阅第6.2.13节“可插入身份验证”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="test-pluggable-authentication-installation"></a>Installing Test Pluggable Authentication</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        This section describes how to install the test authentication
                        plugin. For general information about installing plugins, see
                        <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                    </p><p style="color:blue;">本节介绍如何安装测试身份验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    To load the plugin at server startup, use the
                    <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to
                    name the library file that contains it. With this
                    plugin-loading method, the option must be given each time the
                    server starts. For example, put these lines in the server
                    <code class="filename">my.cnf</code> file (adjust the
                    <code class="filename">.so</code> suffix for your platform as
                    necessary):
                </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含该插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=auth_test_plugin.so
</pre><p>
                    After modifying <code class="filename">my.cnf</code>, restart the
                    server to cause the new settings to take effect.
                </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                    Alternatively, to load the plugin at runtime, use this
                    statement (adjust the <code class="filename">.so</code> suffix for your
                    platform as necessary):
                </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN test_plugin_server SONAME 'auth_test_plugin.so';
</pre><p>
                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                    immediately, and also registers it in the
                    <code class="literal">mysql.plugins</code> system table to cause the
                    server to load it for each subsequent normal startup without
                    the need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
                </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table
                    or use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a>
                    statement (see
                    <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE '%test_plugin%';</code></strong>
+--------------------+---------------+
| PLUGIN_NAME        | PLUGIN_STATUS |
+--------------------+---------------+
| test_plugin_server | ACTIVE        |
+--------------------+---------------+
</pre><p>
                    If the plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                    To associate MySQL accounts with the test plugin, see
                    <a class="xref" href="security.html#test-pluggable-authentication-usage" title="Using Test Pluggable Authentication">Using Test Pluggable Authentication</a>.
                </p><p style="color:blue;">要将mysql帐户与测试插件关联，请参阅使用测试可插拔身份验证。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="test-pluggable-authentication-uninstallation"></a>Uninstalling Test Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The method used to uninstall the test authentication plugin
                        depends on how you installed it:
                    </p><p style="color:blue;">用于卸载测试身份验证插件的方法取决于安装方式：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you installed the plugin at server startup using a
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option,
                            restart the server without the option.
                        </p><p style="color:blue;">如果在服务器启动时使用--plugin load add选项安装插件，请在没有该选项的情况下重新启动服务器。</p></li><li class="listitem"><p>
                            If you installed the plugin at runtime using an
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement,
                            it remains installed across server restarts. To uninstall
                            it, use <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a>:
                        </p><p style="color:blue;">如果在运行时使用install-plugin语句安装插件，则在服务器重新启动时仍会安装该插件。要卸载它，请使用卸载插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN test_plugin_server;
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="test-pluggable-authentication-usage"></a>Using Test Pluggable Authentication</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To use the test authentication plugin, create an account and
                        name that plugin in the <code class="literal">IDENTIFIED WITH</code>
                        clause:
                    </p><p style="color:blue;">要使用测试身份验证插件，请在identified with子句中创建该插件的帐户和名称：</p><pre data-lang="sql" class="programlisting">CREATE USER 'testuser'@'localhost'
IDENTIFIED WITH test_plugin_server
BY '<em class="replaceable"><code>testpassword</code></em>';
</pre><p>
                    Then provide the <a class="link" href="programs.html#option_general_user"><code class="option">--user</code></a> and
                    <a class="link" href="programs.html#option_general_password"><code class="option">--password</code></a> options for that
                    account when you connect to the server. For example:
                </p><p style="color:blue;">然后在连接到服务器时为该帐户提供--user和--password选项。例如：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql --user=testuser --password</code></strong>
Enter password: <strong class="userinput"><code><em class="replaceable"><code>testpassword</code></em></code></strong>
</pre><p>
                    The plugin fetches the password as received from the client
                    and compares it with the value stored in the
                    <code class="literal">authentication_string</code> column of the account
                    row in the <code class="literal">mysql.user</code> system table. If the
                    two values match, the plugin returns the
                    <code class="literal">authentication_string</code> value as the new
                    effective user ID.
                </p><p style="color:blue;">插件获取从客户端接收到的密码，并将其与mysql.user系统表中account行authentication_string列中存储的值进行比较。如果两个值匹配，插件将返回authentication_string值作为新的有效用户id。</p><p>
                    You can look in the server error log for a message indicating
                    whether authentication succeeded (notice that the password is
                    reported as the <span class="quote">“<span class="quote">user</span>”</span>):
                </p><p style="color:blue;">您可以在服务器错误日志中查找指示身份验证是否成功的消息（请注意，密码报告为“用户”）：</p><pre data-lang="none" class="programlisting">[Note] Plugin test_plugin_server reported:
'successfully authenticated user <em class="replaceable"><code>testpassword</code></em>'
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="pluggable-authentication-system-variables"></a>6.4.1.13&nbsp;Pluggable Authentication System Variables</h4>

                        </div>

                    </div>

                </div>
                <p>
                    These variables are unavailable unless the appropriate
                    server-side plugin is installed:
                </p><p style="color:blue;">除非安装了相应的服务器端插件，否则这些变量不可用：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">authentication_ldap_sasl</code> for system
                        variables with names of the form
                        <code class="literal">authentication_ldap_sasl_<em class="replaceable"><code>xxx</code></em></code>
                    </p><p style="color:blue;">authentication_ldap_sasl，用于名为authentication_ldap_sasl_xxx的系统变量</p></li><li class="listitem"><p>
                        <code class="literal">authentication_ldap_simple</code> for system
                        variables with names of the form
                        <code class="literal">authentication_ldap_simple_<em class="replaceable"><code>xxx</code></em></code>
                    </p><p style="color:blue;">authentication_ldap_simple用于名为authentication_ldap_simple_xxx的系统变量</p></li></ul>
                </div>
                <div class="table">
                    <a name="idm140286884816880"></a><p class="title"><b>Table&nbsp;6.19&nbsp;Authentication Plugin System Variable
                    Summary</b></p><p style="color:blue;">表6.19认证插件系统变量摘要</p>
                    <div class="table-contents">
                        <table frame="box" rules="all" summary="Reference for authentication plugin system variables."><colgroup><col width="20%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"></colgroup><thead><tr><th scope="col">Name</th>
                            <th scope="col">Cmd-Line</th>
                            <th scope="col">Option File</th>
                            <th scope="col">System Var</th>
                            <th scope="col">Status Var</th>
                            <th scope="col">Var Scope</th>
                            <th scope="col">Dynamic</th>
                        </tr></thead><tbody><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_auth_method_name">authentication_ldap_sasl_auth_method_name</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_base_dn">authentication_ldap_sasl_bind_base_dn</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_dn">authentication_ldap_sasl_bind_root_dn</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_pwd">authentication_ldap_sasl_bind_root_pwd</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_ca_path">authentication_ldap_sasl_ca_path</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_attr">authentication_ldap_sasl_group_search_attr</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_filter">authentication_ldap_sasl_group_search_filter</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_init_pool_size">authentication_ldap_sasl_init_pool_size</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_log_status">authentication_ldap_sasl_log_status</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size">authentication_ldap_sasl_max_pool_size</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_server_host">authentication_ldap_sasl_server_host</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_server_port">authentication_ldap_sasl_server_port</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_tls">authentication_ldap_sasl_tls</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr">authentication_ldap_sasl_user_search_attr</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_auth_method_name">authentication_ldap_simple_auth_method_name</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_base_dn">authentication_ldap_simple_bind_base_dn</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_dn">authentication_ldap_simple_bind_root_dn</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_pwd">authentication_ldap_simple_bind_root_pwd</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_ca_path">authentication_ldap_simple_ca_path</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_attr">authentication_ldap_simple_group_search_attr</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_filter">authentication_ldap_simple_group_search_filter</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_init_pool_size">authentication_ldap_simple_init_pool_size</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_log_status">authentication_ldap_simple_log_status</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size">authentication_ldap_simple_max_pool_size</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_server_host">authentication_ldap_simple_server_host</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_server_port">authentication_ldap_simple_server_port</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_tls">authentication_ldap_simple_tls</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr">authentication_ldap_simple_user_search_attr</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>Yes</td>
                        </tr><tr><td scope="row"><a class="link" href="server-administration.html#sysvar_authentication_windows_log_level">authentication_windows_log_level</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>No</td>
                        </tr><tr><td scope="row"><a class="link" href="server-administration.html#sysvar_authentication_windows_use_principal_name">authentication_windows_use_principal_name</a></td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td>Yes</td>
                            <td></td>
                            <td>Global</td>
                            <td>No</td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break">
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_auth_method_name"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_auth_method_name"><code class="literal">authentication_ldap_sasl_auth_method_name</code></a>
                    </p><p style="color:blue;">身份验证方法名称</p><a class="indexterm" name="idm140286884586288"></a><a class="indexterm" name="idm140286884585168"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_auth_method_name"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-auth-method-name=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_auth_method_name">authentication_ldap_sasl_auth_method_name</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">SCRAM-SHA-1</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the authentication method
                            name. Communication between the authentication plugin and
                            the LDAP server occurs according to this authentication
                            method. These authentication method values are permitted:
                        </p><p style="color:blue;">对于sasldap身份验证，身份验证方法名。根据这种身份验证方法，身份验证插件和LDAP服务器之间进行通信。允许使用以下身份验证方法值：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                <code class="literal">SCRAM-SHA-1</code>: Authentication uses a
                                SASL challenge-response mechanism to ensure password
                                security.
                            </p><p style="color:blue;">scram-sha-1：身份验证使用sasl质询响应机制来确保密码安全。</p><p>
                                The client-side
                                <code class="literal">authentication_ldap_sasl_client</code>
                                plugin communicates with the SASL server, using the
                                password to create a challenge and obtain a SASL request
                                buffer, then passes this buffer to the server-side
                                <code class="literal">authentication_ldap_sasl</code> plugin. The
                                client-side and server-side SASL LDAP plugins use SASL
                                messages for secure transmission of credentials within
                                the LDAP protocol, to avoid sending the cleartext
                                password between the MySQL client and server.
                            </p><p style="color:blue;">客户端authentication_ldap_sasl_客户端插件与sasl服务器通信，使用密码创建质询并获取sasl请求缓冲区，然后将该缓冲区传递给服务器端authentication_ldap_sasl插件。客户端和服务器端sasldap插件使用sasl消息在ldap协议内安全传输凭据，以避免在mysql客户端和服务器之间发送明文密码。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_bind_base_dn"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_base_dn"><code class="literal">authentication_ldap_sasl_bind_base_dn</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286884549376"></a><a class="indexterm" name="idm140286884548336"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_bind_base_dn"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-bind-base-dn=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_base_dn">authentication_ldap_sasl_bind_base_dn</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the base distinguished name
                            (DN). This variable can be used to limit the scope of
                            searches by anchoring them at a certain location (the
                            <span class="quote">“<span class="quote">base</span>”</span>) within the search tree.
                        </p><p style="color:blue;">对于sasldap身份验证，基本可分辨名称（dn）。此变量可用于限制搜索范围，方法是将它们锚定在搜索树中的特定位置（“基”）。</p><p>
                            Suppose that members of one set of LDAP user entries each
                            have this form:
                        </p><p style="color:blue;">假设一组LDAP用户条目的成员都具有以下表单：</p><pre data-lang="ini" class="programlisting">uid=<em class="replaceable"><code>user_name</code></em>,ou=People,dc=example,dc=com
</pre><p>
                            And that members of another set of LDAP user entries each
                            have this form:
                        </p><p style="color:blue;">另一组LDAP用户条目的成员都具有以下表单：</p><pre data-lang="ini" class="programlisting">uid=<em class="replaceable"><code>user_name</code></em>,ou=Admin,dc=example,dc=com
</pre><p>
                            Then searches work like this for different base DN values:
                        </p><p style="color:blue;">然后像这样搜索不同的基本DN值：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                If the base DN is
                                <code class="literal">ou=People,dc=example,dc=com</code>: Searches
                                find user entries only in the first set.
                            </p><p style="color:blue;">如果基本DN是ou=people，dc=example，dc=com:searches只在第一个集合中查找用户条目。</p></li><li class="listitem"><p>
                                If the base DN is
                                <code class="literal">ou=Admin,dc=example,dc=com</code>: Searches
                                find user entries only in the second set.
                            </p><p style="color:blue;">如果基本DN是ou=admin，dc=example，dc=com:searches只在第二个集合中查找用户条目。</p></li><li class="listitem"><p>
                                If the base DN is
                                <code class="literal">ou=dc=example,dc=com</code>: Searches find
                                user entries in the first or second set.
                            </p><p style="color:blue;">如果基dn是ou=dc=example，dc=com:searches在第一个或第二个集合中查找用户条目。</p></li></ul>
                        </div>
                        <p>
                            In general, more specific base DN values result in faster
                            searches because they limit the search scope more.
                        </p><p style="color:blue;">通常，更具体的基dn值会导致更快的搜索，因为它们对搜索范围的限制更大。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_bind_root_dn"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_dn"><code class="literal">authentication_ldap_sasl_bind_root_dn</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286884506512"></a><a class="indexterm" name="idm140286884505472"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_bind_root_dn"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-bind-root-dn=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_dn">authentication_ldap_sasl_bind_root_dn</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the root distinguished name
                            (DN). This variable is used in conjunction with
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_pwd"><code class="literal">authentication_ldap_sasl_bind_root_pwd</code></a>
                            as the credentials for authenticating to the LDAP server for
                            the purpose of performing searches. Authentication uses
                            either one or two LDAP bind operations, depending on whether
                            the MySQL account names an LDAP user DN:
                        </p><p style="color:blue;">对于sasldap身份验证，根可分辨名称（dn）。此变量与authentication_ldap_sasl_bind_root_pwd一起使用，作为验证LDAP服务器以执行搜索的凭据。身份验证使用一个或两个LDAP绑定操作，具体取决于MySQL帐户是否命名LDAP用户DN:</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                If the account does not name a user DN:
                                <code class="literal">authentication_ldap_sasl</code> performs an
                                initial LDAP binding using
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_dn"><code class="literal">authentication_ldap_sasl_bind_root_dn</code></a>
                                and
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_pwd"><code class="literal">authentication_ldap_sasl_bind_root_pwd</code></a>.
                                (These are both empty by default, so if they are not
                                set, the LDAP server must permit anonymous connections.)
                                The resulting bind LDAP handle is used to search for the
                                user DN, based on the client user name.
                                <code class="literal">authentication_ldap_sasl</code> performs a
                                second bind using the user DN and client-supplied
                                password.
                            </p><p style="color:blue;">如果帐户未命名用户DN:authentication_ldap_sasl使用authentication_ldap_sasl_bind_root_dn和authentication_ldap_sasl_bind_root_pwd执行初始LDAP绑定。（默认情况下，这两个都是空的，因此如果没有设置，LDAP服务器必须允许匿名连接。）生成的绑定LDAP句柄用于根据客户端用户名搜索用户DN。authentication_ldap_sasl使用用户dn和客户端提供的密码执行第二次绑定。</p></li><li class="listitem"><p>
                                If the account does name a user DN: The first bind
                                operation is unnecessary in this case.
                                <code class="literal">authentication_ldap_sasl</code> performs a
                                single bind using the user DN and client-supplied
                                password. This is faster than if the MySQL account does
                                not specify an LDAP user DN.
                            </p><p style="color:blue;">如果帐户确实命名了用户dn：在这种情况下，第一个绑定操作是不必要的。authentication_ldap_sasl使用用户dn和客户端提供的密码执行单个绑定。这比mysql帐户不指定ldap用户dn的速度快。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_bind_root_pwd"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_pwd"><code class="literal">authentication_ldap_sasl_bind_root_pwd</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286884465056"></a><a class="indexterm" name="idm140286884464016"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_bind_root_pwd"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-bind-root-pwd=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_pwd">authentication_ldap_sasl_bind_root_pwd</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the password for the root
                            distinguished name. This variable is used in conjunction
                            with
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_bind_root_dn"><code class="literal">authentication_ldap_sasl_bind_root_dn</code></a>.
                            See the description of that variable.
                        </p><p style="color:blue;">对于sasldap身份验证，是根可分辨名称的密码。此变量与authentication_ldap_sasl_bind_root_dn一起使用。请参阅该变量的说明。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_ca_path"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_ca_path"><code class="literal">authentication_ldap_sasl_ca_path</code></a>
                    </p><p style="color:blue;">身份验证路径</p><a class="indexterm" name="idm140286884431632"></a><a class="indexterm" name="idm140286884430528"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_ca_path"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-ca-path=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_ca_path">authentication_ldap_sasl_ca_path</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the absolute path of the
                            certificate authority file. Specify this file if it is
                            desired that the authentication plugin perform verification
                            of the LDAP server certificate.
                        </p><p style="color:blue;">对于sasldap身份验证，是证书颁发机构文件的绝对路径。如果需要验证插件执行LDAP服务器证书的验证，请指定此文件。</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                In addition to setting the
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_ca_path"><code class="literal">authentication_ldap_sasl_ca_path</code></a>
                                variable to the file name, you must add the appropriate
                                certificate authority certificates to the file and enable
                                the
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_tls"><code class="literal">authentication_ldap_sasl_tls</code></a>
                                system variable.
                            </p><p style="color:blue;">除了将authentication_ldap_sasl_ca_path变量设置为文件名外，还必须将适当的证书颁发机构证书添加到文件并启用authentication_ldap_sasl_tls系统变量。</p>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_group_search_attr"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_attr"><code class="literal">authentication_ldap_sasl_group_search_attr</code></a>
                    </p><p style="color:blue;">身份验证组搜索属性</p><a class="indexterm" name="idm140286884395696"></a><a class="indexterm" name="idm140286884394576"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_group_search_attr"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-group-search-attr=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_attr">authentication_ldap_sasl_group_search_attr</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">cn</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the name of the attribute that
                            specifies group names in LDAP directory entries. If
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_attr"><code class="literal">authentication_ldap_sasl_group_search_attr</code></a>
                            has its default value of <code class="literal">cn</code>, searches
                            return the <code class="literal">cn</code> value as the group name.
                            For example, if an LDAP entry with a <code class="literal">uid</code>
                            value of <code class="literal">user1</code> has a
                            <code class="literal">cn</code> attribute of
                            <code class="literal">mygroup</code>, searches for
                            <code class="literal">user1</code> return <code class="literal">mygroup</code>
                            as the group name.
                        </p><p style="color:blue;">对于sasldap身份验证，在ldap目录项中指定组名的属性的名称。如果authentication_ldap_sasl_group_search_attr的默认值为cn，则searches返回cn值作为组名。例如，如果uid值为user1的ldap条目的cn属性为mygroup，则搜索user1并返回mygroup作为组名。</p><p>
                            This variable should be the empty string if you want no
                            group or proxy authentication.
                        </p><p style="color:blue;">如果不需要组或代理身份验证，则此变量应为空字符串。</p><p>
                            As of MySQL 5.7.21, if the group search attribute is
                            <code class="literal">isMemberOf</code>, LDAP authentication directly
                            retrieves the user attribute <code class="literal">isMemberOf</code>
                            value and assigns it as group information. If the group
                            search attribute is not <code class="literal">isMemberOf</code>, LDAP
                            authentication searches for all groups where the user is a
                            member. (The latter is the default behavior.) This behavior
                            is based on how LDAP group information can be stored two
                            ways: 1) A group entry can have an attribute named
                            <code class="literal">memberUid</code> or <code class="literal">member</code>
                            with a value that is a user name; 2) A user entry can have
                            an attribute named <code class="literal">isMemberOf</code> with values
                            that are group names.
                        </p><p style="color:blue;">从mysql 5.7.21开始，如果组搜索属性是ismemberof，ldap认证直接检索用户属性ismemberof值，并将其作为组信息分配。如果“组搜索”属性不是isMemberOf，LDAP身份验证将搜索用户所属的所有组。（后者是默认行为。）此行为基于LDAP组信息的存储方式有两种方式：1）组条目可以具有名为memberUid的属性或具有用户名值的成员；2）用户条目可以具有名为isMemberOf的属性以及具有组名值的属性。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_group_search_filter"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_filter"><code class="literal">authentication_ldap_sasl_group_search_filter</code></a>
                    </p><p style="color:blue;">身份验证ldap_sasl_group_search_过滤器</p><a class="indexterm" name="idm140286884350400"></a><a class="indexterm" name="idm140286884349280"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_group_search_filter"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-group-search-filter=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_group_search_filter">authentication_ldap_sasl_group_search_filter</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">(|(&amp;(objectClass=posixGroup)(memberUid=%s))(&amp;(objectClass=group)(member=%s)))</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the custom group search
                            filter.
                        </p><p style="color:blue;">对于sasldap身份验证，自定义组搜索筛选器。</p><p>
                            As of MySQL 5.7.22, the search filter value can contain
                            <code class="literal">{UA}</code> and <code class="literal">{UD}</code> notation
                            to represent the user name and the full user DN. For
                            example, <code class="literal">{UA}</code> is replaced with a user
                            name such as <code class="literal">"admin"</code>, whereas
                            <code class="literal">{UD}</code> is replaced with a use full DN such
                            as
                            <code class="literal">"uid=admin,ou=People,dc=example,dc=com"</code>.
                            The following value is the default, which supports both
                            OpenLDAP and Active Directory:
                        </p><p style="color:blue;">从mysql 5.7.22开始，搜索过滤器值可以包含{ua}和{ud}符号来表示用户名和完整的用户dn。例如，{ua}替换为用户名，如“admin”，而{ud}替换为使用完整DN，如“uid=admin，ou=people，dc=example，dc=com”。以下值是默认值，它同时支持openldap和active directory：</p><pre data-lang="simple" class="programlisting">(|(&amp;(objectClass=posixGroup)(memberUid={UA}))
  (&amp;(objectClass=group)(member={UD})))
</pre><p>
                            Previously, if the group search attribute was
                            <code class="literal">isMemberOf</code> or
                            <code class="literal">memberOf</code>, it was treated as a user
                            attribute that has group information. However, in some cases
                            for the user scenario, <code class="literal">memberOf</code> was a
                            simple user attribute that held no group information. For
                            additional flexibility, an optional <code class="literal">{GA}</code>
                            prefix now can be used with the group search attribute.
                            (Previously, it was assumed that if the group search
                            attribute is <code class="literal">isMemberOf</code>, it will be
                            treated differently. Now any group attribute with a {GA}
                            prefix is treated as a user attribute having group names.)
                            For example, with a value of
                            <code class="literal">{GA}MemberOf</code>, if the group value is the
                            DN, the first attribute value from the group DN is returned
                            as the group name.
                        </p><p style="color:blue;">以前，如果组搜索属性是ismemberof或memberof，则将其视为具有组信息的用户属性。但是，在某些情况下，对于用户场景，memberof是一个简单的用户属性，不包含任何组信息。为了获得额外的灵活性，现在可以将可选的{G}}前缀与组搜索属性一起使用。（以前，假设组搜索属性是isMemberof，则会对其进行不同的处理。现在，任何前缀为{ga}的组属性都被视为具有组名的用户属性。）例如，如果值为{ga}memberof，则如果组值是dn，则组dn中的第一个属性值将返回为组名。</p><p>
                            In MySQL 5.7.21, the search filter used
                            <code class="literal">%s</code> notation, expanding it to the user
                            name for OpenLDAP
                            (<code class="literal">&amp;(objectClass=posixGroup)(memberUid=%s)</code>)
                            and to the full user DN for Active Directory
                            (<code class="literal">&amp;(objectClass=group)(member=%s)</code>).
                        </p><p style="color:blue;">在mysql 5.7.21中，搜索筛选器使用%s表示法，将其扩展到openldap的用户名（&amp;（objectclass=posixgroup）（memberuid=%s））和active directory的完整用户DN（&amp;（objectclass=group）（member=%s））。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_init_pool_size"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_init_pool_size"><code class="literal">authentication_ldap_sasl_init_pool_size</code></a>
                    </p><p style="color:blue;">认证池大小</p><a class="indexterm" name="idm140286884303568"></a><a class="indexterm" name="idm140286884302528"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_init_pool_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-init-pool-size=#</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_init_pool_size">authentication_ldap_sasl_init_pool_size</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">10</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">0</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">32767</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the initial size of the pool
                            of connections to the LDAP server. Choose the value for this
                            variable based on the average number of concurrent
                            authentication requests to the LDAP server.
                        </p><p style="color:blue;">对于sasldap身份验证，LDAP服务器连接池的初始大小。根据对LDAP服务器的并发身份验证请求的平均数选择此变量的值。</p><p>
                            The plugin uses
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_init_pool_size"><code class="literal">authentication_ldap_sasl_init_pool_size</code></a>
                            and
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size"><code class="literal">authentication_ldap_sasl_max_pool_size</code></a>
                            together for connection-pool management:
                        </p><p style="color:blue;">该插件将authentication_ldap_sasl_init_pool_size和authentication_ldap_sasl_max_pool_size一起用于连接池管理：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                When the authentication plugin initializes, it creates
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_init_pool_size"><code class="literal">authentication_ldap_sasl_init_pool_size</code></a>
                                connections, unless
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size"><code class="literal">authentication_ldap_sasl_max_pool_size=0</code></a>
                                to disable pooling.
                            </p><p style="color:blue;">当身份验证插件初始化时，它将创建身份验证ldap_sasl_init_pool_size连接，除非身份验证ldap_sasl_max_pool_size=0以禁用池。</p></li><li class="listitem"><p>
                                If the plugin receives an anthentication request when
                                there are no free connections in the current connection
                                pool, the plugin can create a new connection, up to the
                                maximum connection pool size given by
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size"><code class="literal">authentication_ldap_sasl_max_pool_size</code></a>.
                            </p><p style="color:blue;">如果在当前连接池中没有空闲连接时，插件接收到一个请求，则该插件可以创建一个新的连接，直至连接池提供的最大连接池大小。</p></li><li class="listitem"><p>
                                If the plugin receives a request when the pool size is
                                already at its maximum and there are no free
                                connections, authentication fails.
                            </p><p style="color:blue;">如果插件在池大小已经达到最大值且没有空闲连接时收到请求，则验证失败。</p></li><li class="listitem"><p>
                                When the plugin unloads, it closes all pooled
                                connections.
                            </p><p style="color:blue;">当插件卸载时，它将关闭所有池连接。</p></li></ul>
                        </div>
                        <p>
                            Changes to plugin system variable settings may have no
                            effect on connections already in the pool. For example,
                            modifying the LDAP server host, port, or TLS settings does
                            not affect existing connections. However, if the original
                            variable values were invalid and the connection pool could
                            not be initialized, the plugin attempts to reinitialize the
                            pool for the next LDAP request. In this case, the new system
                            variable values are used for the reinitialization attempt.
                        </p><p style="color:blue;">对插件系统变量设置的更改可能不会影响池中已存在的连接。例如，修改LDAP服务器主机、端口或TLS设置不会影响现有连接。但是，如果原始变量值无效并且无法初始化连接池，则插件将尝试为下一个LDAP请求重新初始化该池。在这种情况下，新的系统变量值将用于重新初始化尝试。</p><p>
                            If
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size"><code class="literal">authentication_ldap_sasl_max_pool_size=0</code></a>
                            to disable pooling, each LDAP connection opened by the
                            plugin uses the values the system variables have at that
                            time.
                        </p><p style="color:blue;">如果authentication_ldap_sasl_max_pool_size=0以禁用池，则插件打开的每个LDAP连接都使用系统变量当时的值。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_log_status"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_log_status"><code class="literal">authentication_ldap_sasl_log_status</code></a>
                    </p><p style="color:blue;">身份验证状态</p><a class="indexterm" name="idm140286884250912"></a><a class="indexterm" name="idm140286884249872"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_log_status"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-log-status=#</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_log_status">authentication_ldap_sasl_log_status</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">5</code></td>
                            </tr></tbody></table>
                        </div>
                        <a class="indexterm" name="idm140286884215696"></a><p>
                            For SASL LDAP authentication, the logging level for messages
                            written to the error log. The following table shows the
                            permitted level values and their meanings.
                        </p><p style="color:blue;">对于sasldap身份验证，是写入错误日志的消息的日志级别。下表显示了允许的级别值及其含义。</p>
                        <div class="table">
                            <a name="idm140286884213600"></a><p class="title"><b>Table&nbsp;6.20&nbsp;Log Levels for authentication_ldap_sasl_log_status</b></p><p style="color:blue;">表6.20身份验证的日志级别ldap_sasl_log_status</p>
                            <div class="table-contents">
                                <table summary="authentication_ldap_sasl_log_status system variable option values and types of messages logged per value."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                                    <th scope="col">Option Value</th>
                                    <th scope="col">Types of Messages Logged</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">1</code></td>
                                    <td>No messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">2</code></td>
                                    <td>Error messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">3</code></td>
                                    <td>Error and warning messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">4</code></td>
                                    <td>Error, warning, and information messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">5</code></td>
                                    <td>Same as previous level plus debugging messages from MySQL</td>
                                </tr></tbody></table>
                            </div>

                        </div>
                        <br class="table-break"><a class="indexterm" name="idm140286884193536"></a><a class="indexterm" name="idm140286884192048"></a><a class="indexterm" name="idm140286884190944"></a><p>
                            On the client side, messages can be logged to the standard
                            output by setting the
                            <code class="literal">AUTHENTICATION_LDAP_CLIENT_LOG</code>
                            environment variable. The permitted and default values are
                            the same as for
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_log_status"><code class="literal">authentication_ldap_sasl_log_status</code></a>.
                        </p><p style="color:blue;">在客户端，可以通过设置authentication_ldap_client_log环境变量将消息记录到标准输出。允许值和默认值与身份验证的ldap_sasl_log_状态相同。</p><p>
                            The <code class="literal">AUTHENTICATION_LDAP_CLIENT_LOG</code>
                            environment variable applies only to SASL LDAP
                            authentication. It has no effect for simple LDAP
                            authentication because the client plugin in that case is
                            <code class="literal">mysql_clear_password</code>, which knows nothing
                            about LDAP operations.
                        </p><p style="color:blue;">authentication_ldap_client_log环境变量仅适用于SASL LDAP身份验证。它对简单的ldap身份验证没有影响，因为在这种情况下，客户端插件是mysql_clear_password，它对ldap操作一无所知。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_max_pool_size"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size"><code class="literal">authentication_ldap_sasl_max_pool_size</code></a>
                    </p><p style="color:blue;">身份验证最大池大小</p><a class="indexterm" name="idm140286884182064"></a><a class="indexterm" name="idm140286884181024"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_max_pool_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-max-pool-size=#</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_max_pool_size">authentication_ldap_sasl_max_pool_size</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">1000</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">0</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">32767</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the maximum size of the pool
                            of connections to the LDAP server. To disable connection
                            pooling, set this variable to 0.
                        </p><p style="color:blue;">对于SASL LDAP身份验证，连接到LDAP服务器的池的最大大小。要禁用连接池，请将此变量设置为0。</p><p>
                            This variable is used in conjunction with
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_init_pool_size"><code class="literal">authentication_ldap_sasl_init_pool_size</code></a>.
                            See the description of that variable.
                        </p><p style="color:blue;">此变量与authentication_ldap_sasl_init_pool_size一起使用。请参阅该变量的说明。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_server_host"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_server_host"><code class="literal">authentication_ldap_sasl_server_host</code></a>
                    </p><p style="color:blue;">身份验证服务器主机</p><a class="indexterm" name="idm140286884141872"></a><a class="indexterm" name="idm140286884140832"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_server_host"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-server-host=host_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_server_host">authentication_ldap_sasl_server_host</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the LDAP server host. The
                            permitted values for this variable depend on the
                            authentication method:
                        </p><p style="color:blue;">对于sasldap身份验证，ldap服务器主机。此变量的允许值取决于身份验证方法：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                For
                                <a class="link" href="security.html#sysvar_authentication_ldap_sasl_auth_method_name"><code class="literal">authentication_ldap_sasl_auth_method_name=SCRAM-SHA-1</code></a>:
                                The LDAP server host can be a host name or IP address.
                            </p><p style="color:blue;">对于authentication_ldap_sasl_auth_method_name=scram-sha-1：LDAP服务器主机可以是主机名或IP地址。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_server_port"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_server_port"><code class="literal">authentication_ldap_sasl_server_port</code></a>
                    </p><p style="color:blue;">验证ldap_sasl_服务器端口</p><a class="indexterm" name="idm140286884110096"></a><a class="indexterm" name="idm140286884109056"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_server_port"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-server-port=port_num</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_server_port">authentication_ldap_sasl_server_port</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">389</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">32376</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the LDAP server TCP/IP port
                            number.
                        </p><p style="color:blue;">对于SASL LDAP身份验证，LDAP服务器TCP/IP端口号。</p><p>
                            As of MySQL 5.7.25, if the LDAP port number is configured as
                            636 or 3269, the plugin uses LDAPS (LDAP over SSL) instead
                            of LDAP. (LDAPS differs from <code class="literal">startTLS</code>.)
                        </p><p style="color:blue;">从mysql 5.7.25开始，如果ldap端口号配置为636或3269，则插件使用ldap（ldap over ssl）而不是ldap。（ldaps与starttls不同。）</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_tls"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_tls"><code class="literal">authentication_ldap_sasl_tls</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286884070608"></a><a class="indexterm" name="idm140286884069504"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_tls"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-tls[={OFF|ON}]</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_tls">authentication_ldap_sasl_tls</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Boolean</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">OFF</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, whether connections by the
                            plugin to the LDAP server are secure. If this variable is
                            enabled, the plugin uses TLS to connect securely to the LDAP
                            server. If you enable this variable, you may also wish to
                            set the
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_ca_path"><code class="literal">authentication_ldap_sasl_ca_path</code></a>
                            variable.
                        </p><p style="color:blue;">对于sasldap身份验证，插件到ldap服务器的连接是否安全。如果启用此变量，则插件使用TLS安全地连接到LDAP服务器。如果启用此变量，则可能还希望设置authentication_ldap_sasl_ca_path变量。</p><p>
                            MySQL LDAP plugins support the StartTLS method, which
                            initializes TLS on top of a plain LDAP connection. The
                            <code class="literal">ldaps</code> method is deprecated and MySQL does
                            not support it.
                        </p><p style="color:blue;">mysql ldap插件支持starttls方法，该方法在普通ldap连接上初始化tls。ldaps方法已弃用，mysql不支持它。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_sasl_user_search_attr"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286884035616"></a><a class="indexterm" name="idm140286884034496"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_sasl_user_search_attr"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-sasl-user-search-attr=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr">authentication_ldap_sasl_user_search_attr</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">uid</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For SASL LDAP authentication, the name of the attribute that
                            specifies user names in LDAP directory entries. If a user
                            distinguished name is not provided, the authentication
                            plugin searches for the name using this attribute. For
                            example, if the
                            <a class="link" href="security.html#sysvar_authentication_ldap_sasl_user_search_attr"><code class="literal">authentication_ldap_sasl_user_search_attr</code></a>
                            value is <code class="literal">uid</code>, a search for the user name
                            <code class="literal">user1</code> finds entries with a
                            <code class="literal">uid</code> value of <code class="literal">user1</code>.
                        </p><p style="color:blue;">对于sasldap身份验证，在ldap目录项中指定用户名的属性的名称。如果未提供用户可分辨名称，则验证插件将使用此属性搜索该名称。例如，如果authentication_ldap_sasl_user_search_attr值是uid，则搜索用户名user1将查找uid值为user1的条目。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_auth_method_name"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_auth_method_name"><code class="literal">authentication_ldap_simple_auth_method_name</code></a>
                    </p><p style="color:blue;">身份验证ldap_simple_auth_method_name</p><a class="indexterm" name="idm140286883999024"></a><a class="indexterm" name="idm140286883997904"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_auth_method_name"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-auth-method-name=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_auth_method_name">authentication_ldap_simple_auth_method_name</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">SIMPLE</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the authentication method
                            name. Communication between the authentication plugin and
                            the LDAP server occurs according to this authentication
                            method. These authentication method values are permitted:
                        </p><p style="color:blue;">对于简单LDAP验证，验证方法名。根据这种身份验证方法，身份验证插件和LDAP服务器之间进行通信。允许使用以下身份验证方法值：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                <code class="literal">SIMPLE</code>: This authentication method
                                uses either one or two LDAP bind operations, depending
                                on whether the MySQL account names an LDAP user
                                distinguished name. See the description of
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_dn"><code class="literal">authentication_ldap_simple_bind_root_dn</code></a>.
                            </p><p style="color:blue;">简单：此身份验证方法使用一个或两个LDAP绑定操作，具体取决于MySQL帐户是否命名LDAP用户可分辨名称。请参阅authentication_ldap_simple_bind_root_dn的说明。</p></li><li class="listitem"><p>
                                <code class="literal">AD-FOREST</code>:
                                <code class="literal">authentication_ldap_simple</code> searches
                                all the domains in the Active Directory forest,
                                performing an LDAP bind to each Active Directory domain
                                until the user is found in some domain.
                            </p><p style="color:blue;">ad-forest:authentication-ldap-simple搜索活动目录林中的所有域，对每个活动目录域执行ldap绑定，直到在某个域中找到用户为止。</p></li></ul>
                        </div>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                For simple LDAP authentication, it is recommended to also
                                set TLS parameters to require that communication with the
                                LDAP server take place over secure connections.
                            </p><p style="color:blue;">对于简单的LDAP身份验证，建议还设置TLS参数，以要求通过安全连接与LDAP服务器进行通信。</p>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_bind_base_dn"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_base_dn"><code class="literal">authentication_ldap_simple_bind_base_dn</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286883959664"></a><a class="indexterm" name="idm140286883958624"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_bind_base_dn"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-bind-base-dn=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_base_dn">authentication_ldap_simple_bind_base_dn</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the base distinguished name
                            (DN). This variable can be used to limit the scope of
                            searches by anchoring them at a certain location (the
                            <span class="quote">“<span class="quote">base</span>”</span>) within the search tree.
                        </p><p style="color:blue;">对于简单LDAP身份验证，基本可分辨名称（DN）。此变量可用于限制搜索范围，方法是将它们锚定在搜索树中的特定位置（“基”）。</p><p>
                            Suppose that members of one set of LDAP user entries each
                            have this form:
                        </p><p style="color:blue;">假设一组LDAP用户条目的成员都具有以下表单：</p><pre data-lang="ini" class="programlisting">uid=<em class="replaceable"><code>user_name</code></em>,ou=People,dc=example,dc=com
</pre><p>
                            And that members of another set of LDAP user entries each
                            have this form:
                        </p><p style="color:blue;">另一组LDAP用户条目的成员都具有以下表单：</p><pre data-lang="ini" class="programlisting">uid=<em class="replaceable"><code>user_name</code></em>,ou=Admin,dc=example,dc=com
</pre><p>
                            Then searches work like this for different base DN values:
                        </p><p style="color:blue;">然后像这样搜索不同的基本DN值：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                If the base DN is
                                <code class="literal">ou=People,dc=example,dc=com</code>: Searches
                                find user entries only in the first set.
                            </p><p style="color:blue;">如果基本DN是ou=people，dc=example，dc=com:searches只在第一个集合中查找用户条目。</p></li><li class="listitem"><p>
                                If the base DN is
                                <code class="literal">ou=Admin,dc=example,dc=com</code>: Searches
                                find user entries only in the second set.
                            </p><p style="color:blue;">如果基本DN是ou=admin，dc=example，dc=com:searches只在第二个集合中查找用户条目。</p></li><li class="listitem"><p>
                                If the base DN is
                                <code class="literal">ou=dc=example,dc=com</code>: Searches find
                                user entries in the first or second set.
                            </p><p style="color:blue;">如果基dn是ou=dc=example，dc=com:searches在第一个或第二个集合中查找用户条目。</p></li></ul>
                        </div>
                        <p>
                            In general, more specific base DN values result in faster
                            searches because they limit the search scope more.
                        </p><p style="color:blue;">通常，更具体的基dn值会导致更快的搜索，因为它们对搜索范围的限制更大。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_bind_root_dn"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_dn"><code class="literal">authentication_ldap_simple_bind_root_dn</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286883916848"></a><a class="indexterm" name="idm140286883915808"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_bind_root_dn"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-bind-root-dn=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_dn">authentication_ldap_simple_bind_root_dn</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the root distinguished name
                            (DN). This variable is used in conjunction with
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_pwd"><code class="literal">authentication_ldap_simple_bind_root_pwd</code></a>
                            as the credentials for authenticating to the LDAP server for
                            the purpose of performing searches. Authentication uses
                            either one or two LDAP bind operations, depending on whether
                            the MySQL account names an LDAP user DN:
                        </p><p style="color:blue;">对于简单的LDAP身份验证，根可分辨名称（DN）。此变量与authentication_ldap_simple_bind_root_pwd一起使用，作为验证LDAP服务器以执行搜索的凭据。身份验证使用一个或两个LDAP绑定操作，具体取决于MySQL帐户是否命名LDAP用户DN:</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                If the account does not name a user DN:
                                <code class="literal">authentication_ldap_simple</code> performs
                                an initial LDAP binding using
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_dn"><code class="literal">authentication_ldap_simple_bind_root_dn</code></a>
                                and
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_pwd"><code class="literal">authentication_ldap_simple_bind_root_pwd</code></a>.
                                (These are both empty by default, so if they are not
                                set, the LDAP server must permit anonymous connections.)
                                The resulting bind LDAP handle is used to search for the
                                user DN, based on the client user name.
                                <code class="literal">authentication_ldap_simple</code> performs a
                                second bind using the user DN and client-supplied
                                password.
                            </p><p style="color:blue;">如果帐户未命名用户DN:authentication_ldap_simple使用authentication_ldap_simple_bind_root_dn和authentication_ldap_simple_bind_root_pwd执行初始LDAP绑定。（默认情况下，这两个都是空的，因此如果没有设置，LDAP服务器必须允许匿名连接。）生成的绑定LDAP句柄用于根据客户端用户名搜索用户DN。authentication_ldap_simple使用用户DN和客户端提供的密码执行第二次绑定。</p></li><li class="listitem"><p>
                                If the account does name a user DN: The first bind
                                operation is unnecessary in this case.
                                <code class="literal">authentication_ldap_simple</code> performs a
                                single bind using the user DN and client-supplied
                                password. This is faster than if the MySQL account does
                                not specify an LDAP user DN.
                            </p><p style="color:blue;">如果帐户确实命名了用户dn：在这种情况下，第一个绑定操作是不必要的。authentication_ldap_simple使用用户DN和客户端提供的密码执行单个绑定。这比mysql帐户不指定ldap用户dn的速度快。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_bind_root_pwd"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_pwd"><code class="literal">authentication_ldap_simple_bind_root_pwd</code></a>
                    </p><p style="color:blue;">身份验证_ldap_simple_bind_root_pwd</p><a class="indexterm" name="idm140286883875472"></a><a class="indexterm" name="idm140286883874352"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_bind_root_pwd"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-bind-root-pwd=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_pwd">authentication_ldap_simple_bind_root_pwd</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the password for the root
                            distinguished name. This variable is used in conjunction
                            with
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_bind_root_dn"><code class="literal">authentication_ldap_simple_bind_root_dn</code></a>.
                            See the description of that variable.
                        </p><p style="color:blue;">对于简单LDAP身份验证，是根可分辨名称的密码。此变量与authentication_ldap_simple_bind_root_dn一起使用。请参阅该变量的说明。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_ca_path"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_ca_path"><code class="literal">authentication_ldap_simple_ca_path</code></a>
                    </p><p style="color:blue;">验证LDAP路径</p><a class="indexterm" name="idm140286883841792"></a><a class="indexterm" name="idm140286883840752"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_ca_path"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-ca-path=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_ca_path">authentication_ldap_simple_ca_path</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">NULL</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the absolute path of the
                            certificate authority file. Specify this file if it is
                            desired that the authentication plugin perform verification
                            of the LDAP server certificate.
                        </p><p style="color:blue;">对于简单LDAP身份验证，是证书颁发机构文件的绝对路径。如果需要验证插件执行LDAP服务器证书的验证，请指定此文件。</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                In addition to setting the
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_ca_path"><code class="literal">authentication_ldap_simple_ca_path</code></a>
                                variable to the file name, you must add the appropriate
                                certificate authority certificates to the file and enable
                                the
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_tls"><code class="literal">authentication_ldap_simple_tls</code></a>
                                system variable.
                            </p><p style="color:blue;">除了将authentication_ldap_simple_ca_path变量设置为文件名外，还必须向文件中添加适当的证书颁发机构证书，并启用authentication_ldap_simple_tls系统变量。</p>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_group_search_attr"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_attr"><code class="literal">authentication_ldap_simple_group_search_attr</code></a>
                    </p><p style="color:blue;">身份验证_ldap_simple_group_search_attr</p><a class="indexterm" name="idm140286883805856"></a><a class="indexterm" name="idm140286883804736"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_group_search_attr"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-group-search-attr=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_attr">authentication_ldap_simple_group_search_attr</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">cn</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the name of the attribute
                            that specifies group names in LDAP directory entries. If
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_attr"><code class="literal">authentication_ldap_simple_group_search_attr</code></a>
                            has its default value of <code class="literal">cn</code>, searches
                            return the <code class="literal">cn</code> value as the group name.
                            For example, if an LDAP entry with a <code class="literal">uid</code>
                            value of <code class="literal">user1</code> has a
                            <code class="literal">cn</code> attribute of
                            <code class="literal">mygroup</code>, searches for
                            <code class="literal">user1</code> return <code class="literal">mygroup</code>
                            as the group name.
                        </p><p style="color:blue;">对于简单LDAP身份验证，在LDAP目录项中指定组名的属性的名称。如果authentication_ldap_simple_group_search_attr的默认值为cn，则searches返回cn值作为组名。例如，如果uid值为user1的ldap条目的cn属性为mygroup，则搜索user1并返回mygroup作为组名。</p><p>
                            As of MySQL 5.7.21, if the group search attribute is
                            <code class="literal">isMemberOf</code>, LDAP authentication directly
                            retrieves the user attribute <code class="literal">isMemberOf</code>
                            value and assigns it as group information. If the group
                            search attribute is not <code class="literal">isMemberOf</code>, LDAP
                            authentication searches for all groups where the user is a
                            member. (The latter is the default behavior.) This behavior
                            is based on how LDAP group information can be stored two
                            ways: 1) A group entry can have an attribute named
                            <code class="literal">memberUid</code> or <code class="literal">member</code>
                            with a value that is a user name; 2) A user entry can have
                            an attribute named <code class="literal">isMemberOf</code> with values
                            that are group names.
                        </p><p style="color:blue;">从mysql 5.7.21开始，如果组搜索属性是ismemberof，ldap认证直接检索用户属性ismemberof值，并将其作为组信息分配。如果“组搜索”属性不是isMemberOf，LDAP身份验证将搜索用户所属的所有组。（后者是默认行为。）此行为基于LDAP组信息的存储方式有两种方式：1）组条目可以具有名为memberUid的属性或具有用户名值的成员；2）用户条目可以具有名为isMemberOf的属性以及具有组名值的属性。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_group_search_filter"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_filter"><code class="literal">authentication_ldap_simple_group_search_filter</code></a>
                    </p><p style="color:blue;">身份验证LDAP简单组搜索筛选器</p><a class="indexterm" name="idm140286883761072"></a><a class="indexterm" name="idm140286883759952"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_group_search_filter"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-group-search-filter=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_group_search_filter">authentication_ldap_simple_group_search_filter</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">(|(&amp;(objectClass=posixGroup)(memberUid=%s))(&amp;(objectClass=group)(member=%s)))</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the custom group search
                            filter.
                        </p><p style="color:blue;">对于简单的LDAP身份验证，自定义组搜索筛选器。</p><p>
                            As of MySQL 5.7.22, the search filter value can contain
                            <code class="literal">{UA}</code> and <code class="literal">{UD}</code> notation
                            to represent the user name and the full user DN. For
                            example, <code class="literal">{UA}</code> is replaced with a user
                            name such as <code class="literal">"admin"</code>, whereas
                            <code class="literal">{UD}</code> is replaced with a use full DN such
                            as
                            <code class="literal">"uid=admin,ou=People,dc=example,dc=com"</code>.
                            The following value is the default, which supports both
                            OpenLDAP and Active Directory:
                        </p><p style="color:blue;">从mysql 5.7.22开始，搜索过滤器值可以包含{ua}和{ud}符号来表示用户名和完整的用户dn。例如，{ua}替换为用户名，如“admin”，而{ud}替换为使用完整DN，如“uid=admin，ou=people，dc=example，dc=com”。以下值是默认值，它同时支持openldap和active directory：</p><pre data-lang="simple" class="programlisting">(|(&amp;(objectClass=posixGroup)(memberUid={UA}))
  (&amp;(objectClass=group)(member={UD})))
</pre><p>
                            Previously, if the group search attribute was
                            <code class="literal">isMemberOf</code> or
                            <code class="literal">memberOf</code>, it was treated as a user
                            attribute that has group information. However, in some cases
                            for the user scenario, <code class="literal">memberOf</code> was a
                            simple user attribute that held no group information. For
                            additional flexibility, an optional <code class="literal">{GA}</code>
                            prefix now can be used with the group search attribute.
                            (Previously, it was assumed that if the group search
                            attribute is <code class="literal">isMemberOf</code>, it will be
                            treated differently. Now any group attribute with a {GA}
                            prefix is treated as a user attribute having group names.)
                            For example, with a value of
                            <code class="literal">{GA}MemberOf</code>, if the group value is the
                            DN, the first attribute value from the group DN is returned
                            as the group name.
                        </p><p style="color:blue;">以前，如果组搜索属性是ismemberof或memberof，则将其视为具有组信息的用户属性。但是，在某些情况下，对于用户场景，memberof是一个简单的用户属性，不包含任何组信息。为了获得额外的灵活性，现在可以将可选的{G}}前缀与组搜索属性一起使用。（以前，假设组搜索属性是isMemberof，则会对其进行不同的处理。现在，任何前缀为{ga}的组属性都被视为具有组名的用户属性。）例如，如果值为{ga}memberof，则如果组值是dn，则组dn中的第一个属性值将返回为组名。</p><p>
                            In MySQL 5.7.21, the search filter used
                            <code class="literal">%s</code> notation, expanding it to the user
                            name for OpenLDAP
                            (<code class="literal">&amp;(objectClass=posixGroup)(memberUid=%s)</code>)
                            and to the full user DN for Active Directory
                            (<code class="literal">&amp;(objectClass=group)(member=%s)</code>).
                        </p><p style="color:blue;">在mysql 5.7.21中，搜索筛选器使用%s表示法，将其扩展到openldap的用户名（&amp;（objectclass=posixgroup）（memberuid=%s））和active directory的完整用户DN（&amp;（objectclass=group）（member=%s））。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_init_pool_size"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_init_pool_size"><code class="literal">authentication_ldap_simple_init_pool_size</code></a>
                    </p><p style="color:blue;">身份验证ldap_simple_init_pool_大小</p><a class="indexterm" name="idm140286883714336"></a><a class="indexterm" name="idm140286883713216"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_init_pool_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-init-pool-size=#</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_init_pool_size">authentication_ldap_simple_init_pool_size</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">10</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">0</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">32767</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the initial size of the pool
                            of connections to the LDAP server. Choose the value for this
                            variable based on the average number of concurrent
                            authentication requests to the LDAP server.
                        </p><p style="color:blue;">对于简单的LDAP身份验证，是到LDAP服务器的连接池的初始大小。根据对LDAP服务器的并发身份验证请求的平均数选择此变量的值。</p><p>
                            The plugin uses
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_init_pool_size"><code class="literal">authentication_ldap_simple_init_pool_size</code></a>
                            and
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size"><code class="literal">authentication_ldap_simple_max_pool_size</code></a>
                            together for connection-pool management:
                        </p><p style="color:blue;">该插件将authentication_ldap_simple_init_pool_size和authentication_ldap_simple_max_pool_size一起用于连接池管理：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                When the authentication plugin initializes, it creates
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_init_pool_size"><code class="literal">authentication_ldap_simple_init_pool_size</code></a>
                                connections, unless
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size"><code class="literal">authentication_ldap_simple_max_pool_size=0</code></a>
                                to disable pooling.
                            </p><p style="color:blue;">当身份验证插件初始化时，它将创建身份验证ldap_simple_init_pool_size连接，除非身份验证ldap_simple_max_pool_size=0以禁用池。</p></li><li class="listitem"><p>
                                If the plugin receives an anthentication request when
                                there are no free connections in the current connection
                                pool, the plugin can create a new connection, up to the
                                maximum connection pool size given by
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size"><code class="literal">authentication_ldap_simple_max_pool_size</code></a>.
                            </p><p style="color:blue;">如果插件在当前连接池中没有空闲连接时接收到一个匿名请求，则插件可以创建一个新的连接，直到由AudioTestOpLLDAPHSimeLeMax PooLySelm给出的最大连接池大小。</p></li><li class="listitem"><p>
                                If the plugin receives a request when the pool size is
                                already at its maximum and there are no free
                                connections, authentication fails.
                            </p><p style="color:blue;">如果插件在池大小已经达到最大值且没有空闲连接时收到请求，则验证失败。</p></li><li class="listitem"><p>
                                When the plugin unloads, it closes all pooled
                                connections.
                            </p><p style="color:blue;">当插件卸载时，它将关闭所有池连接。</p></li></ul>
                        </div>
                        <p>
                            Changes to plugin system variable settings may have no
                            effect on connections already in the pool. For example,
                            modifying the LDAP server host, port, or TLS settings does
                            not affect existing connections. However, if the original
                            variable values were invalid and the connection pool could
                            not be initialized, the plugin attempts to reinitialize the
                            pool for the next LDAP request. In this case, the new system
                            variable values are used for the reinitialization attempt.
                        </p><p style="color:blue;">对插件系统变量设置的更改可能不会影响池中已存在的连接。例如，修改LDAP服务器主机、端口或TLS设置不会影响现有连接。但是，如果原始变量值无效并且无法初始化连接池，则插件将尝试为下一个LDAP请求重新初始化该池。在这种情况下，新的系统变量值将用于重新初始化尝试。</p><p>
                            If
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size"><code class="literal">authentication_ldap_simple_max_pool_size=0</code></a>
                            to disable pooling, each LDAP connection opened by the
                            plugin uses the values the system variables have at that
                            time.
                        </p><p style="color:blue;">如果authentication_ldap_simple_max_pool_size=0以禁用池，则插件打开的每个LDAP连接都使用系统变量当时的值。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_log_status"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_log_status"><code class="literal">authentication_ldap_simple_log_status</code></a>
                    </p><p style="color:blue;">身份验证LDAP简单日志状态</p><a class="indexterm" name="idm140286883661424"></a><a class="indexterm" name="idm140286883660384"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_log_status"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-log-status=#</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_log_status">authentication_ldap_simple_log_status</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">5</code></td>
                            </tr></tbody></table>
                        </div>
                        <a class="indexterm" name="idm140286883626192"></a><p>
                            For simple LDAP authentication, the logging level for
                            messages written to the error log. The following table shows
                            the permitted level values and their meanings.
                        </p><p style="color:blue;">对于简单LDAP身份验证，是写入错误日志的消息的日志级别。下表显示了允许的级别值及其含义。</p>
                        <div class="table">
                            <a name="idm140286883624096"></a><p class="title"><b>Table&nbsp;6.21&nbsp;Log Levels for authentication_ldap_simple_log_status</b></p><p style="color:blue;">表6.21身份验证的日志级别LDAP简单日志状态</p>
                            <div class="table-contents">
                                <table summary="authentication_ldap_simple_log_status system variable option values and types of messages logged per value."><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr>
                                    <th scope="col">Option Value</th>
                                    <th scope="col">Types of Messages Logged</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">1</code></td>
                                    <td>No messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">2</code></td>
                                    <td>Error messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">3</code></td>
                                    <td>Error and warning messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">4</code></td>
                                    <td>Error, warning, and information messages</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">5</code></td>
                                    <td>Same as previous level plus debugging messages from MySQL</td>
                                </tr></tbody></table>
                            </div>

                        </div>
                        <br class="table-break"></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_max_pool_size"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size"><code class="literal">authentication_ldap_simple_max_pool_size</code></a>
                    </p><p style="color:blue;">身份验证ldap_simple_max_pool_size</p><a class="indexterm" name="idm140286883601472"></a><a class="indexterm" name="idm140286883600352"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_max_pool_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-max-pool-size=#</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_max_pool_size">authentication_ldap_simple_max_pool_size</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">1000</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">0</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">32767</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the maximum size of the pool
                            of connections to the LDAP server. To disable connection
                            pooling, set this variable to 0.
                        </p><p style="color:blue;">对于简单LDAP身份验证，连接到LDAP服务器的池的最大大小。要禁用连接池，请将此变量设置为0。</p><p>
                            This variable is used in conjunction with
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_init_pool_size"><code class="literal">authentication_ldap_simple_init_pool_size</code></a>.
                            See the description of that variable.
                        </p><p style="color:blue;">此变量与authentication_ldap_simple_init_pool_size一起使用。请参阅该变量的说明。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_server_host"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_server_host"><code class="literal">authentication_ldap_simple_server_host</code></a>
                    </p><p style="color:blue;">身份验证LDAP简单服务器主机</p><a class="indexterm" name="idm140286883561152"></a><a class="indexterm" name="idm140286883560112"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_server_host"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-server-host=host_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_server_host">authentication_ldap_simple_server_host</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the LDAP server host. The
                            permitted values for this variable depend on the
                            authentication method:
                        </p><p style="color:blue;">对于简单的LDAP身份验证，LDAP服务器主机。此变量的允许值取决于身份验证方法：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                For
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_auth_method_name"><code class="literal">authentication_ldap_simple_auth_method_name=SIMPLE</code></a>:
                                The LDAP server host can be a host name or IP address.
                            </p><p style="color:blue;">对于authentication_ldap_simple_auth_method_name=simple:LDAP服务器主机可以是主机名或IP地址。</p></li><li class="listitem"><p>
                                For
                                <a class="link" href="security.html#sysvar_authentication_ldap_simple_auth_method_name"><code class="literal">authentication_ldap_simple_auth_method_name=AD-FOREST</code></a>.
                                The LDAP server host can be an Active Directory domain
                                name. For example, for an LDAP server URL of
                                <code class="literal">ldap://example.mem.local:389</code>, the
                                server name can be <code class="literal">mem.local</code>.
                            </p><p style="color:blue;">对于身份验证，ldap_simple_auth_method_name=ad-forest。LDAP服务器主机可以是活动目录域名。例如，对于ldap://example.mem.local:389的LDAP服务器URL，服务器名称可以是mem.local。</p><p>
                                An Active Directory forest setup can have multiple
                                domains (LDAP server IPs), which can be discovered using
                                DNS. On Unix and Unix-like systems, some additional
                                setup may be required to configure your DNS server with
                                SRV records that specify the LDAP servers for the Active
                                Directory domain. Suppose that your configuration has
                                these properties:
                            </p><p style="color:blue;">一个活动目录林设置可以有多个域（LDAP服务器IP），这些域可以使用DNS发现。在unix和类unix系统上，可能需要一些额外的安装程序，以便使用指定active directory域的ldap服务器的srv记录配置dns服务器。假设您的配置具有以下属性：</p>
                                <div class="itemizedlist">
                                    <ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                                        The name server that provides information about
                                        Active Directory domains has IP address
                                        <code class="literal">10.172.166.100</code>.
                                    </p><p style="color:blue;">提供有关活动目录域信息的名称服务器的IP地址为10.172.166.100。</p></li><li class="listitem"><p>
                                        The LDAP servers have names
                                        <code class="literal">ldap1.mem.local</code> through
                                        <code class="literal">ldap3.mem.local</code> and IP addresses
                                        <code class="literal">10.172.166.101</code> through
                                        <code class="literal">10.172.166.103</code>.
                                    </p><p style="color:blue;">LDAP服务器的名称为ldap1.mem.local到ldap3.mem.local，IP地址为10.172.166.101到10.172.166.103。</p></li></ul>
                                </div>
                                <p>
                                    You want the LDAP servers to be discoverable using SRV
                                    searches. For example, at the command line, a command
                                    like this should list the LDAP servers:
                                </p><p style="color:blue;">您希望使用srv搜索可以发现ldap服务器。例如，在命令行中，这样的命令应该列出LDAP服务器：</p><pre data-lang="terminal" class="programlisting">host -t SRV _ldap._tcp.mem.local
</pre><p>
                                    Perform the DNS configuration as follows:
                                </p><p style="color:blue;">按如下方式执行DNS配置：</p>
                                <div class="orderedlist">
                                    <ol class="orderedlist" type="1"><li class="listitem"><p>
                                        Add a line to <code class="filename">/etc/resolv.conf</code>
                                        to specify the name server that provides information
                                        about Active Directory domains:
                                    </p><p style="color:blue;">在/etc/resolv.conf中添加一行以指定提供有关活动目录域信息的名称服务器：</p><pre data-lang="none" class="programlisting">nameserver 10.172.166.100
</pre></li><li class="listitem"><p>
                                        Configure the appropriate zone file for the name
                                        server with SRV records for the LDAP servers:
                                    </p><p style="color:blue;">使用LDAP服务器的SRV记录为名称服务器配置适当的区域文件：</p><pre data-lang="none" class="programlisting">_ldap._tcp.mem.local. 86400 IN SRV 0 100 389 ldap1.mem.local.
_ldap._tcp.mem.local. 86400 IN SRV 0 100 389 ldap2.mem.local.
_ldap._tcp.mem.local. 86400 IN SRV 0 100 389 ldap3.mem.local.
</pre></li><li class="listitem"><p>
                                        It may also be necessary to specify the IP address
                                        for the LDAP servers in
                                        <code class="filename">/etc/hosts</code> if the server host
                                        cannot be resolved. For example, add lines like this
                                        to the file:
                                    </p><p style="color:blue;">如果无法解析服务器主机，可能还需要在/etc/hosts中指定LDAP服务器的IP地址。例如，在文件中添加这样的行：</p><pre data-lang="none" class="programlisting">10.172.166.101 ldap1.mem.local
10.172.166.102 ldap2.mem.local
10.172.166.103 ldap3.mem.local
</pre></li></ol>
                                </div>
                                <p>
                                    With the DNS configured as just described, the
                                    server-side LDAP plugin can discover the LDAP servers
                                    and will try to authenticate in all domains until
                                    authentication succeeds or there are no more servers.
                                </p><p style="color:blue;">如前所述配置dns后，服务器端ldap插件可以发现ldap服务器，并尝试在所有域中进行身份验证，直到身份验证成功或不再有服务器为止。</p><p>
                                    Windows needs no such settings as just described. Given
                                    the LDAP server host in the
                                    <a class="link" href="security.html#sysvar_authentication_ldap_simple_server_host"><code class="literal">authentication_ldap_simple_server_host</code></a>
                                    value, the Windows LDAP library searches all domains and
                                    attempts to authenticate.
                                </p><p style="color:blue;">windows不需要像刚才描述的那样的设置。给定authentication_ldap_simple_server_host值中的LDAP服务器主机，Windows LDAP库将搜索所有域并尝试进行身份验证。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_server_port"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_server_port"><code class="literal">authentication_ldap_simple_server_port</code></a>
                    </p><p style="color:blue;">身份验证LDAP简单服务器端口</p><a class="indexterm" name="idm140286883505760"></a><a class="indexterm" name="idm140286883504720"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_server_port"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-server-port=port_num</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_server_port">authentication_ldap_simple_server_port</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Integer</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">389</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                <td><code class="literal">1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                <td><code class="literal">32376</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the LDAP server TCP/IP port
                            number.
                        </p><p style="color:blue;">对于简单的LDAP身份验证，LDAP服务器TCP/IP端口号。</p><p>
                            As of MySQL 5.7.25, if the LDAP port number is configured as
                            636 or 3269, the plugin uses LDAPS (LDAP over SSL) instead
                            of LDAP. (LDAPS differs from <code class="literal">startTLS</code>.)
                        </p><p style="color:blue;">从mysql 5.7.25开始，如果ldap端口号配置为636或3269，则插件使用ldap（ldap over ssl）而不是ldap。（ldaps与starttls不同。）</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_tls"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_tls"><code class="literal">authentication_ldap_simple_tls</code></a>
                    </p><p style="color:blue;">身份验证</p><a class="indexterm" name="idm140286883466272"></a><a class="indexterm" name="idm140286883465168"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_tls"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-tls[={OFF|ON}]</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_tls">authentication_ldap_simple_tls</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Boolean</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">OFF</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, whether connections by the
                            plugin to the LDAP server are secure. If this variable is
                            enabled, the plugin uses TLS to connect securely to the LDAP
                            server. If you enable this variable, you may also wish to
                            set the
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_ca_path"><code class="literal">authentication_ldap_simple_ca_path</code></a>
                            variable.
                        </p><p style="color:blue;">对于简单的LDAP身份验证，插件到LDAP服务器的连接是否安全。如果启用此变量，则插件使用TLS安全地连接到LDAP服务器。如果启用此变量，则可能还希望设置authentication_ldap_simple_ca_path变量。</p><p>
                            MySQL LDAP plugins support the StartTLS method, which
                            initializes TLS on top of a plain LDAP connection. The
                            <code class="literal">ldaps</code> method is deprecated and MySQL does
                            not support it.
                        </p><p style="color:blue;">mysql ldap插件支持starttls方法，该方法在普通ldap连接上初始化tls。ldaps方法已弃用，mysql不支持它。</p></li><li class="listitem"><p><a name="sysvar_authentication_ldap_simple_user_search_attr"></a>
                        <a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
                    </p><p style="color:blue;">身份验证_ldap_simple_user_search_attr</p><a class="indexterm" name="idm140286883430992"></a><a class="indexterm" name="idm140286883429872"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for authentication_ldap_simple_user_search_attr"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--authentication-ldap-simple-user-search-attr=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr">authentication_ldap_simple_user_search_attr</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">uid</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For simple LDAP authentication, the name of the attribute
                            that specifies user names in LDAP directory entries. If a
                            user distinguished name is not provided, the authentication
                            plugin searches for the name using this attribute. For
                            example, if the
                            <a class="link" href="security.html#sysvar_authentication_ldap_simple_user_search_attr"><code class="literal">authentication_ldap_simple_user_search_attr</code></a>
                            value is <code class="literal">uid</code>, a search for the user name
                            <code class="literal">user1</code> finds entries with a
                            <code class="literal">uid</code> value of <code class="literal">user1</code>.
                        </p><p style="color:blue;">对于简单LDAP身份验证，在LDAP目录项中指定用户名的属性的名称。如果未提供用户可分辨名称，则验证插件将使用此属性搜索该名称。例如，如果authentication_ldap_simple_user_search_attr值是uid，则搜索用户名user1将查找uid值为user1的条目。</p></li></ul>
                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="connection-control"></a>6.4.2&nbsp;The Connection-Control Plugins</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#connection-control-installation">6.4.2.1 Connection-Control Plugin Installation</a></span></dt><dt><span class="section"><a href="security.html#connection-control-variables">6.4.2.2 Connection-Control System and Status Variables</a></span></dt></dl>
            </div>
            <p>
                As of MySQL 5.7.17, MySQL Server includes a plugin library that
                enables administrators to introduce an increasing delay in server
                response to clients after a certain number of consecutive failed
                connection attempts. This capability provides a deterrent that
                slows down brute force attacks that attempt to access MySQL user
                accounts. The plugin library contains two plugins:
            </p><p style="color:blue;">从mysql 5.7.17开始，mysql server包含了一个插件库，管理员可以通过该插件库在连接尝试连续失败一定次数后向客户端引入越来越大的服务器响应延迟。此功能提供了一种威慑，可以减缓试图访问mysql用户帐户的暴力攻击。插件库包含两个插件：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="literal">CONNECTION_CONTROL</code> checks incoming
                    connections and adds a delay to server responses as necessary.
                    This plugin also exposes system variables that enable its
                    operation to be configured and a status variable that provides
                    rudimentary monitoring information.
                </p><p style="color:blue;">连接控制检查传入的连接，并根据需要向服务器响应添加延迟。此插件还公开了使其操作得以配置的系统变量和提供基本监视信息的状态变量。</p><p>
                    The <code class="literal">CONNECTION_CONTROL</code> plugin uses the
                    audit plugin interface (see
                    <a class="xref" href="extending-mysql.html#writing-audit-plugins" title="28.2.4.8&nbsp;Writing Audit Plugins">Section&nbsp;28.2.4.8, “Writing Audit Plugins”</a>). To collect
                    information, it subscribes to the
                    <code class="literal">MYSQL_AUDIT_CONNECTION_CLASSMASK</code> event
                    class, and processes
                    <code class="literal">MYSQL_AUDIT_CONNECTION_CONNECT</code> and
                    <code class="literal">MYSQL_AUDIT_CONNECTION_CHANGE_USER</code>
                    subevents to check whether the server should introduce a delay
                    before responding to client connection attempts.
                </p><p style="color:blue;">连接控制插件使用审计插件接口（见第28.2.4.8节“编写审计插件”）。为了收集信息，它订阅mysql_audit_connection_classmask事件类，并处理mysql_audit_connection和mysql_audit_connection_change_user子事件，以检查服务器在响应客户端连接尝试之前是否应该引入延迟。</p></li><li class="listitem"><p>
                    <code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code>
                    implements an <code class="literal">INFORMATION_SCHEMA</code> table that
                    exposes more detailed monitoring information for failed
                    connection attempts.
                </p><p style="color:blue;">连接控制失败登录尝试实现一个信息架构表，该表公开失败连接尝试的更详细监视信息。</p></li></ul>
            </div>
            <p>
                The following sections provide information about
                connection-control plugin installation and configuration. For
                information about the
                <a class="link" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table"><code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code></a>
                table, see
                <a class="xref" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table">Section&nbsp;24.34.1, “The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table”</a>.
            </p><p style="color:blue;">以下部分提供有关连接控制插件安装和配置的信息。有关连接控制失败登录尝试表的信息，请参阅第24.34.1节“信息架构连接控制失败登录尝试表”。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="connection-control-installation"></a>6.4.2.1&nbsp;Connection-Control Plugin Installation</h4>
                        </div>
                    </div>
                </div>
                <a class="indexterm" name="idm140286883381136"></a><a class="indexterm" name="idm140286883379632"></a><a class="indexterm" name="idm140286883378144"></a><a class="indexterm" name="idm140286883376624"></a><p>
                This section describes how to install the connection-control
                plugins, <code class="literal">CONNECTION_CONTROL</code> and
                <code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code>. For
                general information about installing plugins, see
                <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
            </p><p style="color:blue;">本节介绍如何安装连接控制插件、连接控制和连接控制失败的登录尝试。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                To be usable by the server, the plugin library file must be
                located in the MySQL plugin directory (the directory named by
                the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                variable). If necessary, configure the plugin directory location
                by setting the value of
                <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
            </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                The plugin library file base name is
                <code class="literal">connection_control</code>. The file name suffix
                differs per platform (for example, <code class="filename">.so</code> for
                Unix and Unix-like systems, <code class="filename">.dll</code> for
                Windows).
            </p><p style="color:blue;">插件库文件基名称是连接控件。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                To load the plugins at server startup, use the
                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to name
                the library file that contains them. With this plugin-loading
                method, the option must be given each time the server starts.
                For example, put these lines in the server
                <code class="filename">my.cnf</code> file (adjust the
                <code class="filename">.so</code> suffix for your platform as necessary):
            </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=connection_control.so
</pre><p>
                After modifying <code class="filename">my.cnf</code>, restart the server
                to cause the new settings to take effect.
            </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                Alternatively, to load the plugins at runtime, use these
                statements (adjust the <code class="filename">.so</code> suffix for your
                platform as necessary):
            </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN CONNECTION_CONTROL
  SONAME 'connection_control.so';
INSTALL PLUGIN CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS
  SONAME 'connection_control.so';
</pre><p>
                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin
                immediately, and also registers it in the
                <code class="literal">mysql.plugins</code> system table to cause the
                server to load it for each subsequent normal startup without the
                need for <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
            </p><p style="color:blue;">install plugin立即加载插件，并将其注册到mysql.plugins系统表中，以便服务器在每次后续正常启动时加载插件，而无需--plugin load add。</p><p>
                To verify plugin installation, examine the
                <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table or
                use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a> statement
                (see <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For
                example:
            </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE 'connection%';</code></strong>
+------------------------------------------+---------------+
| PLUGIN_NAME                              | PLUGIN_STATUS |
+------------------------------------------+---------------+
| CONNECTION_CONTROL                       | ACTIVE        |
| CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS | ACTIVE        |
+------------------------------------------+---------------+
</pre><p>
                If a plugin failed to initialize, check the server error log for
                diagnostic messages.
            </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                If the plugins have been previously registered with
                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> or are loaded with
                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>, you can use
                the <code class="option">--connection-control</code> and
                <code class="option">--connection-control-failed-login-attempts</code>
                options at server startup to control plugin activation. For
                example, to load the plugins at startup and prevent them from
                being removed at runtime, use these options:
            </p><p style="color:blue;">如果这些插件以前已经用install plugin注册过，或者加载了--plugin load add，则可以在服务器启动时使用--connection control和--connection control failed login attempts选项来控制插件的激活。例如，要在启动时加载插件并防止在运行时将其删除，请使用以下选项：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=connection_control.so
connection-control=FORCE_PLUS_PERMANENT
connection-control-failed-login-attempts=FORCE_PLUS_PERMANENT
</pre><p>
                If it is desired to prevent the server from running without a
                given connection-control plugin, use an option value of
                <code class="literal">FORCE</code> or
                <code class="literal">FORCE_PLUS_PERMANENT</code> to force server startup
                to fail if the plugin does not initialize successfully.
            </p><p style="color:blue;">如果需要防止服务器在没有给定连接控制插件的情况下运行，请使用force或force_plus_permanent选项值，在插件未成功初始化时强制服务器启动失败。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        It is possible to install one plugin without the other, but
                        both must be installed for full connection-control capability.
                        In particular, installing only the
                        <code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code>
                        plugin is of little use because without the
                        <code class="literal">CONNECTION_CONTROL</code> plugin to provide the
                        data that populates the
                        <a class="link" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table"><code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code></a>
                        table, retrievals from the table will always be empty.
                    </p><p style="color:blue;">可以在不安装另一个插件的情况下安装一个插件，但必须同时安装这两个插件才能实现完全的连接控制功能。特别是，只安装连接控制失败登录尝试插件用处不大，因为如果没有连接控制插件提供填充连接控制失败登录尝试表的数据，则从表中检索的次数将始终为空。</p>
                </div>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#connection-control-plugin-delay-configuration" title="Connection Delay Configuration">Connection Delay Configuration</a></p><p style="color:blue;">连接延迟配置</p></li><li class="listitem"><p><a class="xref" href="security.html#connection-control-plugin-failure-assessment" title="Connection Failure Assessment">Connection Failure Assessment</a></p><p style="color:blue;">连接故障评估</p></li><li class="listitem"><p><a class="xref" href="security.html#connection-control-plugin-failure-monitoring" title="Connection Failure Monitoring">Connection Failure Monitoring</a></p><p style="color:blue;">连接故障监视</p></li></ul>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="connection-control-plugin-delay-configuration"></a>Connection Delay Configuration</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To enable you to configure its operation, the
                        <code class="literal">CONNECTION_CONTROL</code> plugin exposes several
                        system variables:
                    </p><p style="color:blue;">要使您能够配置其操作，连接控制插件将公开几个系统变量：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>:
                            The number of consecutive failed connection attempts
                            permitted to clients before the server adds a delay for
                            subsequent connection attempts.
                        </p><p style="color:blue;">连接控制失败的连接阈值：在服务器为以后的连接尝试添加延迟之前，允许到客户端的连续失败连接尝试数。</p></li><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>:
                            The amount of delay to add for each consecutive connection
                            failure above the threshold.
                        </p><p style="color:blue;">connection_control_min_connection_delay：为超过阈值的每个连续连接失败添加的延迟量。</p></li><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>:
                            The maximum delay to add.
                        </p><p style="color:blue;">连接控制，最大连接延迟：最大延迟添加。</p></li></ul>
                    </div>
                    <p>
                        To entirely disable checking for failed connection attempts,
                        set
                        <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                        to zero. If
                        <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                        is nonzero, the amount of delay is zero up through that many
                        consecutive failed connection attempts. Thereafter, the amount
                        of delay is the number of failed attempts above the threshold,
                        multiplied by
                        <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                        milliseconds. For example, with the default
                        <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                        and
                        <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                        values of 3 and 1000, respectively, there is no delay for the
                        first three consecutive failed connection attempts by a
                        client, a delay of 1000 milliseconds for the fourth failed
                        attempt, 2000 milliseconds for the fifth failed attempt, and
                        so on, up to the maximum delay permitted by
                        <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>.
                    </p><p style="color:blue;">若要完全禁用对失败连接尝试的检查，请将连接控制失败连接阈值设置为零。如果connection_control_failed_connections_threshold为非零，则通过多次连续失败的连接尝试，延迟量为零。此后，延迟量是超过阈值的失败尝试次数乘以连接控制最小连接延迟毫秒。例如，默认连接控制失败连接阈值和连接控制最小连接延迟值分别为3和1000，则客户端的前三次连续失败连接尝试没有延迟，第四次失败连接尝试的延迟为1000毫秒，对于第五次失败的尝试，2000毫秒，等等，直到由CONNECTION COMPRATION MAX CONNECTONECTION延迟所允许的最大延迟。</p><p>
                    You can set the <code class="literal">CONNECTION_CONTROL</code> system
                    variables at server startup or runtime. Suppose that you want
                    to permit four consecutive failed connection attempts before
                    the server starts delaying its responses, and to increase the
                    delay by 1500 milliseconds for each additional failure after
                    that. To set the relevant variables at server startup, put
                    these lines in the server <code class="filename">my.cnf</code> file:
                </p><p style="color:blue;">您可以在服务器启动或运行时设置连接控制系统变量。假设您希望在服务器开始延迟其响应之前允许四次连续失败的连接尝试，并在之后的每一次额外失败中增加1500毫秒的延迟。要在服务器启动时设置相关变量，请将这些行放入server my.cnf文件中：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=connection_control.so
connection_control_failed_connections_threshold=4
connection_control_min_connection_delay=1500
</pre><p>
                    To set the variables at runtime, use these statements:
                </p><p style="color:blue;">要在运行时设置变量，请使用以下语句：</p><pre data-lang="sql" class="programlisting">SET GLOBAL connection_control_failed_connections_threshold = 4;
SET GLOBAL connection_control_min_connection_delay = 1500;
</pre><p>
                    <a class="link" href="sql-syntax.html#set-variable" title="13.7.4.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET
                        GLOBAL</code></a> sets the value for the running MySQL
                    instance. To make the change permanent, add a line in your
                    <code class="filename">my.cnf</code> file, as shown previously.
                </p><p style="color:blue;">set global设置正在运行的mysql实例的值。要使更改永久，请在my.cnf文件中添加一行，如前所示。</p><p>
                    The
                    <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                    and
                    <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>
                    system variables have fixed minimum and maximum values of 1000
                    and 2147483647, respectively. In addition, the permitted range
                    of values of each variable also depends on the current value
                    of the other:
                </p><p style="color:blue;">连接控制、最小连接、延迟连接和最大控制连接的延迟系统变量分别具有1000和2147483647的固定最小值和最大值。此外，每个变量的允许值范围也取决于另一个变量的当前值：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                            cannot be set greater than the current value of
                            <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>.
                        </p><p style="color:blue;">连接控制最小连接延迟不能设置为大于连接控制最大连接延迟的当前值。</p></li><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>
                            cannot be set less than the current value of
                            <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>.
                        </p><p style="color:blue;">连接控制最大连接延迟不能设置为小于连接控制最小连接延迟的当前值。</p></li></ul>
                    </div>
                    <p>
                        Thus, to make the changes required for some configurations,
                        you might need to set the variables in a specific order.
                        Suppose that the current minimum and maximum delays are 1000
                        and 2000, and that you want to set them to 3000 and 5000. You
                        cannot first set
                        <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                        to 3000 because that is greater than the current
                        <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>
                        value of 2000. Instead, set
                        <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>
                        to 5000, then set
                        <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                        to 3000.
                    </p><p style="color:blue;">因此，要进行某些配置所需的更改，可能需要按特定顺序设置变量。假设当前最小和最大延迟分别为1000和2000，并且希望将它们设置为3000和5000。不能首先将连接控制最小连接延迟设置为3000，因为该值大于当前连接控制最大连接延迟值2000。相反，将connection_control_max_connection_delay设置为5000，然后将connection_control_min_connection_delay设置为3000。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="connection-control-plugin-failure-assessment"></a>Connection Failure Assessment</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        When the <code class="literal">CONNECTION_CONTROL</code> plugin is
                        installed, it checks connection attempts and tracks whether
                        they fail or succeed. For this purpose, a failed connection
                        attempt is one for which the client user and host match a
                        known MySQL account but the provided credentials are
                        incorrect, or do not match any known account.
                    </p><p style="color:blue;">安装连接控制插件时，它会检查连接尝试并跟踪它们是否失败或成功。为此，失败的连接尝试是指客户端用户和主机与已知的mysql帐户匹配，但提供的凭据不正确，或与任何已知帐户不匹配。</p><p>
                    Failed-connection counting is based on the user/host
                    combination for each connection attempt. Determination of the
                    applicable user name and host name takes proxying into account
                    and occurs as follows:
                </p><p style="color:blue;">失败的连接计数基于每次连接尝试的用户/主机组合。确定适用的用户名和主机名时要考虑代理，具体如下：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If the client user proxies another user, the proxying
                            user's information is used. For example, if
                            <code class="literal">external_user@example.com</code> proxies
                            <code class="literal">proxy_user@example.com</code>, connection
                            counting uses the proxying user,
                            <code class="literal">external_user@example.com</code>, rather than
                            the proxied user,
                            <code class="literal">proxy_user@example.com</code>. Both
                            <code class="literal">external_user@example.com</code> and
                            <code class="literal">proxy_user@example.com</code> must have valid
                            entries in the <code class="literal">mysql.user</code> system table
                            and a proxy relationship between them must be defined in
                            the <code class="literal">mysql.proxies_priv</code> system table
                            (see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>).
                        </p><p style="color:blue;">如果客户端用户代理另一个用户，则使用代理用户的信息。例如，如果ExualLuxUSER示例性代理代理PROXIOUSER @ ExpLe.com，连接计数使用代理用户，ExelalSuule@ ExpLe.com，而不是代理用户，PROXYUSSUR:Excel。在MySql用户系统表中，ExalualUsSerueExpLe.com和PrxyUsErr.Excel都必须有有效的条目，它们之间的代理关系必须在MySQL LoopXeSePiV系统表中定义（参见第6节2.2.14节，“代理用户”）。</p></li><li class="listitem"><p>
                            If the client user does not proxy another user, but does
                            match a <code class="literal">mysql.user</code> entry, counting uses
                            the <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> value
                            corresponding to that entry. For example, if a user
                            <code class="literal">user1</code> connecting from a host
                            <code class="literal">host1.example.com</code> matches a
                            <code class="literal">user1@host1.example.com</code> entry, counting
                            uses <code class="literal">user1@host1.example.com</code>. If the
                            user matches a <code class="literal">user1@%.example.com</code>,
                            <code class="literal">user1@%.com</code>, or
                            <code class="literal">user1@%</code> entry instead, counting uses
                            <code class="literal">user1@%.example.com</code>,
                            <code class="literal">user1@%.com</code>, or
                            <code class="literal">user1@%</code>, respectively.
                        </p><p style="color:blue;">如果客户端用户不代理其他用户，但与mysql.user条目匹配，那么counting将使用与该条目对应的当前_user（）值。例如，如果从主机host1.example.com连接的用户user1与user1@host1.example.com条目匹配，则计数使用user1@host1.example.com。如果用户与user1@%.example.com、user1@%.com或user1@%条目匹配，则计数将分别使用user1@%.example.com、user1@%.com或user1@%。</p></li></ul>
                    </div>
                    <p>
                        For the cases just described, the connection attempt matches
                        some <code class="literal">mysql.user</code> entry, and whether the
                        request succeeds or fails depends on whether the client
                        provides the correct authentication credentials. For example,
                        if the client presents an incorrect password, the connection
                        attempt fails.
                    </p><p style="color:blue;">对于刚才描述的情况，连接尝试与mysql.user条目匹配，请求是否成功取决于客户端是否提供了正确的身份验证凭据。例如，如果客户端提供的密码不正确，则连接尝试失败。</p><p>
                    If the connection attempt matches no
                    <code class="literal">mysql.user</code> entry, the attempt fails. In
                    this case, no <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>
                    value is available and connection-failure counting uses the
                    user name provided by the client and the client host as
                    determined by the server. For example, if a client attempts to
                    connect as user <code class="literal">user2</code> from host
                    <code class="literal">host2.example.com</code>, the user name part is
                    available in the client request and the server determines the
                    host information. The user/host combination used for counting
                    is <code class="literal">user2@host2.example.com</code>.
                </p><p style="color:blue;">如果连接尝试与mysql.user条目不匹配，则尝试失败。在这种情况下，没有当前的_user（）值可用，连接失败计数使用由服务器确定的客户端和客户端主机提供的用户名。例如，如果客户端尝试从host host2.example.com以用户user2身份连接，则在客户端请求中可以使用用户名部分，服务器将确定主机信息。用于计数的用户/主机组合是user2@host2.example.com。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            The server maintains information about which client hosts
                            can possibly connect to the server (essentially the union of
                            host values for <code class="literal">mysql.user</code> entries). If a
                            client attempts to connect from any other host, the server
                            rejects the attempt at an early stage of connection setup:
                        </p><p style="color:blue;">服务器维护有关哪些客户端主机可以连接到服务器的信息（本质上是mysql.user条目的主机值的联合）。如果客户端尝试从任何其他主机进行连接，服务器将在连接设置的早期阶段拒绝该尝试：</p><pre data-lang="none" class="programlisting">ERROR 1130 (HY000): Host '<em class="replaceable"><code>host_name</code></em>' is not
allowed to connect to this MySQL server
</pre><p>
                        Because this type of rejection occurs so early,
                        <code class="literal">CONNECTION_CONTROL</code> does not see it, and
                        does not count it.
                    </p><p style="color:blue;">由于此类拒绝发生得太早，连接控制不会看到它，也不会计算它。</p>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="connection-control-plugin-failure-monitoring"></a>Connection Failure Monitoring</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To monitor failed connections, use these information sources:
                    </p><p style="color:blue;">要监视失败的连接，请使用以下信息源：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The
                            <a class="link" href="security.html#statvar_Connection_control_delay_generated"><code class="literal">Connection_control_delay_generated</code></a>
                            status variable indicates the number of times the server
                            added a delay to its response to a failed connection
                            attempt. This does not count attempts that occur before
                            reaching the threshold defined by the
                            <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                            system variable.
                        </p><p style="color:blue;">连接控制延迟生成的状态变量指示服务器对失败连接尝试的响应添加延迟的次数。这不统计在达到连接控制失败的连接阈值系统变量定义的阈值之前发生的尝试。</p></li><li class="listitem"><p>
                            The <code class="literal">INFORMATION_SCHEMA</code>
                            <a class="link" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table"><code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code></a>
                            table provides information about the current number of
                            consecutive failed connection attempts per client
                            user/host combination. This counts all failed attempts,
                            regardless of whether they were delayed.
                        </p><p style="color:blue;">information_schema connection_control_failed_login_attempts表提供有关每个客户端用户/主机组合的当前连续失败连接尝试次数的信息。这将统计所有失败的尝试，无论它们是否被延迟。</p></li></ul>
                    </div>
                    <p>
                        Assigning a value to
                        <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                        at runtime resets all accumulated failed-connection counters
                        to zero, which has these visible effects:
                    </p><p style="color:blue;">在运行时为连接控制失败的连接分配值阈值会将所有累积的失败连接计数器重置为零，这会产生以下可见效果：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The
                            <a class="link" href="security.html#statvar_Connection_control_delay_generated"><code class="literal">Connection_control_delay_generated</code></a>
                            status variable is reset to zero.
                        </p><p style="color:blue;">连接控制延迟生成的状态变量重置为零。</p></li><li class="listitem"><p>
                            The
                            <a class="link" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table"><code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code></a>
                            table becomes empty.
                        </p><p style="color:blue;">连接控制失败登录尝试表变为空。</p></li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="connection-control-variables"></a>6.4.2.2&nbsp;Connection-Control System and Status Variables</h4>

                        </div>

                    </div>

                </div>
                <p>
                    This section describes the system and status variables that the
                    <code class="literal">CONNECTION_CONTROL</code> plugin provides to enable
                    its operation to be configured and monitored.
                </p><p style="color:blue;">本节介绍连接控制插件提供的系统变量和状态变量，以便配置和监视其操作。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#connection-control-plugin-system-variables" title="Connection-Control System Variables">Connection-Control System Variables</a></p><p style="color:blue;">连接控制系统变量</p></li><li class="listitem"><p><a class="xref" href="security.html#connection-control-plugin-status-variables" title="Connection-Control Status Variables">Connection-Control Status Variables</a></p><p style="color:blue;">连接控制状态变量</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="connection-control-plugin-system-variables"></a>Connection-Control System Variables</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286883236256"></a><p>
                    If the <code class="literal">CONNECTION_CONTROL</code> plugin is
                    installed, it exposes these system variables:
                </p><p style="color:blue;">如果安装了连接控制插件，它将公开以下系统变量：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_connection_control_failed_connections_threshold"></a>
                            <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                        </p><p style="color:blue;">连接控制失败连接阈值</p><a class="indexterm" name="idm140286883230928"></a><a class="indexterm" name="idm140286883229808"></a>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for connection_control_failed_connections_threshold"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--connection-control-failed-connections-threshold=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.17</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold">connection_control_failed_connections_threshold</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">3</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">0</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                    <td><code class="literal">2147483647</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The number of consecutive failed connection attempts
                                permitted to clients before the server adds a delay for
                                subsequent connection attempts:
                            </p><p style="color:blue;">在服务器为以后的连接尝试添加延迟之前，允许到客户端的连续失败连接尝试数：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    If the variable has a nonzero value
                                    <em class="replaceable"><code>N</code></em>, the server adds a delay
                                    beginning with consecutive failed attempt
                                    <em class="replaceable"><code>N</code></em>+1. If a client has
                                    reached the point where connection responses are
                                    delayed, the delay also occurs for the next subsequent
                                    successful connection.
                                </p><p style="color:blue;">如果变量的值为非零值n，则服务器会添加一个延迟，从连续失败的尝试n+1开始。如果客户机已到达延迟连接响应的点，则下次成功连接也会发生延迟。</p></li><li class="listitem"><p>
                                    Setting this variable to zero disables
                                    failed-connection counting. In this case, the server
                                    never adds delays.
                                </p><p style="color:blue;">将此变量设置为零将禁用失败的连接计数。在这种情况下，服务器从不添加延迟。</p></li></ul>
                            </div>
                            <p>
                                For information about how
                                <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                                interacts with other connection-control system and status
                                variables, see
                                <a class="xref" href="security.html#connection-control-installation" title="6.4.2.1&nbsp;Connection-Control Plugin Installation">Section&nbsp;6.4.2.1, “Connection-Control Plugin Installation”</a>.
                            </p><p style="color:blue;">有关连接控制失败连接阈值如何与其他连接控制系统和状态变量交互的信息，请参阅第6.4.2.1节“连接控制插件安装”。</p></li><li class="listitem"><p><a name="sysvar_connection_control_max_connection_delay"></a>
                            <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>
                        </p><p style="color:blue;">连接控制最大连接延迟</p><a class="indexterm" name="idm140286883186480"></a><a class="indexterm" name="idm140286883185440"></a>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for connection_control_max_connection_delay"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--connection-control-max-connection-delay=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.17</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_connection_control_max_connection_delay">connection_control_max_connection_delay</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">2147483647</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">1000</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                    <td><code class="literal">2147483647</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The maximum delay in milliseconds for server response to
                                failed connection attempts, if
                                <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                                is greater than zero.
                            </p><p style="color:blue;">如果连接连接控制失败，连接阈值大于0，则服务器响应失败的连接尝试的毫秒最大延迟。</p><p>
                                For information about how
                                <a class="link" href="security.html#sysvar_connection_control_max_connection_delay"><code class="literal">connection_control_max_connection_delay</code></a>
                                interacts with other connection-control system and status
                                variables, see
                                <a class="xref" href="security.html#connection-control-installation" title="6.4.2.1&nbsp;Connection-Control Plugin Installation">Section&nbsp;6.4.2.1, “Connection-Control Plugin Installation”</a>.
                            </p><p style="color:blue;">有关连接控制最大连接延迟如何与其他连接控制系统和状态变量交互的信息，请参阅第6.4.2.1节“连接控制插件安装”。</p></li><li class="listitem"><p><a name="sysvar_connection_control_min_connection_delay"></a>
                            <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                        </p><p style="color:blue;">连接控制最小连接延迟</p><a class="indexterm" name="idm140286883144224"></a><a class="indexterm" name="idm140286883143184"></a>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for connection_control_min_connection_delay"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--connection-control-min-connection-delay=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.17</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_connection_control_min_connection_delay">connection_control_min_connection_delay</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">1000</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">1000</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                    <td><code class="literal">2147483647</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The minimum delay in milliseconds for server response to
                                failed connection attempts, if
                                <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                                is greater than zero. This is also the amount by which the
                                server increases the delay for additional successive
                                failures once it begins delaying.
                            </p><p style="color:blue;">如果连接控制失败的连接阈值大于零，则服务器响应失败的连接尝试的最小延迟（毫秒）。这也是服务器在开始延迟后增加额外连续故障延迟的量。</p><p>
                                For information about how
                                <a class="link" href="security.html#sysvar_connection_control_min_connection_delay"><code class="literal">connection_control_min_connection_delay</code></a>
                                interacts with other connection-control system and status
                                variables, see
                                <a class="xref" href="security.html#connection-control-installation" title="6.4.2.1&nbsp;Connection-Control Plugin Installation">Section&nbsp;6.4.2.1, “Connection-Control Plugin Installation”</a>.
                            </p><p style="color:blue;">有关连接控制最小连接延迟如何与其他连接控制系统和状态变量交互的信息，请参阅第6.4.2.1节“连接控制插件安装”。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="connection-control-plugin-status-variables"></a>Connection-Control Status Variables</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286883102784"></a><p>
                    If the <code class="literal">CONNECTION_CONTROL</code> plugin is
                    installed, it exposes this status variable:
                </p><p style="color:blue;">如果安装了连接控制插件，它将公开此状态变量：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Connection_control_delay_generated"></a>
                            <a class="link" href="security.html#statvar_Connection_control_delay_generated"><code class="literal">Connection_control_delay_generated</code></a>
                        </p><p style="color:blue;">产生连接控制延迟</p><a class="indexterm" name="idm140286883097408"></a><a class="indexterm" name="idm140286883096368"></a><p>
                            The number of times the server added a delay to its
                            response to a failed connection attempt. This does not
                            count attempts that occur before reaching the threshold
                            defined by the
                            <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                            system variable.
                        </p><p style="color:blue;">服务器对失败连接尝试的响应添加延迟的次数。这不统计在达到连接控制失败的连接阈值系统变量定义的阈值之前发生的尝试。</p><p>
                            This variable provides a simple counter. For more detailed
                            connection-control monitoring information, examine the
                            <code class="literal">INFORMATION_SCHEMA</code>
                            <a class="link" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table"><code class="literal">CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS</code></a>
                            table; see
                            <a class="xref" href="information-schema.html#connection-control-failed-login-attempts-table" title="24.34.1&nbsp;The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table">Section&nbsp;24.34.1, “The INFORMATION_SCHEMA CONNECTION_CONTROL_FAILED_LOGIN_ATTEMPTS Table”</a>.
                        </p><p style="color:blue;">这个变量提供了一个简单的计数器。有关更详细的连接控制监视信息，请检查information_schema connection_control_failed_login_attempts表；请参阅第24.34.1节“information_schema connection_control_failed_login_attempts表”。</p><p>
                            Assigning a value to
                            <a class="link" href="security.html#sysvar_connection_control_failed_connections_threshold"><code class="literal">connection_control_failed_connections_threshold</code></a>
                            at runtime resets
                            <a class="link" href="security.html#statvar_Connection_control_delay_generated"><code class="literal">Connection_control_delay_generated</code></a>
                            to zero.
                        </p><p style="color:blue;">在运行时为连接控制失败的连接阈值将生成的连接控制延迟重置为零。</p><p>
                            This variable was added in MySQL 5.7.17.
                        </p><p style="color:blue;">这个变量是在mysql 5.7.17中添加的。</p></li></ul>
                    </div>

                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="validate-password"></a>6.4.3&nbsp;The Password Validation Plugin</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#validate-password-installation">6.4.3.1 Password Validation Plugin Installation</a></span></dt><dt><span class="section"><a href="security.html#validate-password-options-variables">6.4.3.2 Password Validation Plugin Options and Variables</a></span></dt></dl>
            </div>
            <a class="indexterm" name="idm140286883084112"></a><a class="indexterm" name="idm140286883083056"></a><a class="indexterm" name="idm140286883081984"></a><p>
            The <code class="literal">validate_password</code> plugin serves to improve
            security by requiring account passwords and enabling strength
            testing of potential passwords. This plugin exposes a set of
            system variables that enable you to configure password policy.
        </p><p style="color:blue;">validate_password插件通过要求帐户密码和启用潜在密码的强度测试来提高安全性。此插件公开一组系统变量，使您能够配置密码策略。</p><p>
            The <code class="literal">validate_password</code> plugin implements these
            capabilities:
        </p><p style="color:blue;">validate_password插件实现以下功能：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    For SQL statements that assign a password supplied as a
                    cleartext value, <code class="literal">validate_password</code> checks
                    the password against the current password policy and rejects
                    the password if it is weak (the statement returns an
                    <a class="link" href="error-handling.html#error_er_not_valid_password"><code class="literal">ER_NOT_VALID_PASSWORD</code></a> error).
                    This applies to the <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>,
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                    <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, and
                    <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> statements, and
                    passwords given as arguments to the
                    <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> and
                    <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> functions.
                </p><p style="color:blue;">对于指定作为明文值提供的密码的sql语句，validate_password将根据当前密码策略检查密码，如果密码较弱，则拒绝该密码（该语句返回er_not_valid_password错误）。这适用于alter user、create user、grant和set password语句，以及作为password（）和old_password（）函数的参数提供的密码。</p></li><li class="listitem"><p>
                    For <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statements,
                    <code class="literal">validate_password</code> requires that a password
                    be given, and that it satisfies the password policy. This is
                    true even if an account is locked initially because otherwise
                    unlocking the account later would cause it to become
                    accessible without a password that satisfies the policy.
                </p><p style="color:blue;">对于create user语句，validate_password要求给定一个密码，并且该密码满足密码策略。这是真的，即使一个帐户最初被锁定，否则稍后解锁该帐户将导致它在没有满足策略的密码的情况下变得可访问。</p></li><li class="listitem"><p>
                    <code class="literal">validate_password</code> implements a
                    <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>
                    SQL function that assesses the strength of potential
                    passwords. This function takes a password argument and returns
                    an integer from 0 (weak) to 100 (strong).
                </p><p style="color:blue;">validate_password实现一个validate_password_strength（）sql函数，用于评估潜在密码的强度。此函数接受一个password参数，并返回一个从0（弱）到100（强）的整数。</p></li></ul>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                <div class="admon-title">
                    Note
                </div>
                <p>
                    For statements that assign, modify, or generate account
                    passwords (<a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a>,
                    <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                    <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>, and
                    <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>; statements that use
                    <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> and
                    <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>), the
                    <code class="literal">validate_password</code> capabilities described here
                    apply only to accounts that use an authentication plugin that
                    stores credentials internally to MySQL. For accounts that use
                    plugins that perform authentication against a credentials system
                    external to MySQL, password management must be handled
                    externally against that system as well. For more information
                    about internal credentials storage, see
                    <a class="xref" href="security.html#password-management" title="6.2.11&nbsp;Password Management">Section&nbsp;6.2.11, “Password Management”</a>.
                </p><p style="color:blue;">对于分配、修改或生成帐户密码的语句（alter user、create user、grant和set password；使用password（）和old_password（）的语句），此处描述的validate_password功能仅适用于使用在mysql内部存储凭据的身份验证插件的帐户。对于使用插件对mysql外部的凭据系统执行身份验证的帐户，还必须对该系统在外部处理密码管理。有关内部凭据存储的更多信息，请参阅第6.2.11节“密码管理”。</p><p>
                The preceding restriction does not apply to use of the
                <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>
                function because it does not affect accounts directly.
            </p><p style="color:blue;">前面的限制不适用于validate_password_strength（）函数的使用，因为它不会直接影响帐户。</p>
            </div>
            <p>
                Examples:
            </p><p style="color:blue;">示例：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="literal">validate_password</code> checks the cleartext
                    password in the following statement. Under the default
                    password policy, which requires passwords to be at least 8
                    characters long, the password is weak and the statement
                    produces an error:
                </p><p style="color:blue;">validate_password检查以下语句中的明文密码。在默认密码策略（要求密码长度至少为8个字符）下，密码很弱，语句会产生错误：</p><a class="indexterm" name="idm140286883047056"></a><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER USER USER() IDENTIFIED BY 'abc';</code></strong>
ERROR 1819 (HY000): Your password does not satisfy the current
policy requirements
</pre></li><li class="listitem"><p>
                    Passwords specified as hashed values are not checked because
                    the original password value is not available for checking:
                </p><p style="color:blue;">未检查指定为哈希值的密码，因为原始密码值不可用于检查：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER USER 'jeffrey'@'localhost'</code></strong>
       <strong class="userinput"><code>IDENTIFIED WITH mysql_native_password</code></strong>
       <strong class="userinput"><code>AS '*0D3CED9BEC10A777AEC23CCC353A8C08A633045E';</code></strong>
Query OK, 0 rows affected (0.01 sec)
</pre></li><li class="listitem"><p>
                    This account-creation statement fails, even though the account
                    is locked initially, because it does not include a password
                    that satisfies the current password policy:
                </p><p style="color:blue;">即使帐户最初被锁定，此帐户创建语句也会失败，因为它不包含满足当前密码策略的密码：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE USER 'juanita'@'localhost' ACCOUNT LOCK;</code></strong>
ERROR 1819 (HY000): Your password does not satisfy the current
policy requirements
</pre></li><li class="listitem"><p>
                    To check a password, use the
                    <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>
                    function:
                </p><p style="color:blue;">要检查密码，请使用validate_password_strength（）函数：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VALIDATE_PASSWORD_STRENGTH('weak');</code></strong>
+------------------------------------+
| VALIDATE_PASSWORD_STRENGTH('weak') |
+------------------------------------+
|                                 25 |
+------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT VALIDATE_PASSWORD_STRENGTH('lessweak$_@123');</code></strong>
+----------------------------------------------+
| VALIDATE_PASSWORD_STRENGTH('lessweak$_@123') |
+----------------------------------------------+
|                                           50 |
+----------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT VALIDATE_PASSWORD_STRENGTH('N0Tweak$_@123!');</code></strong>
+----------------------------------------------+
| VALIDATE_PASSWORD_STRENGTH('N0Tweak$_@123!') |
+----------------------------------------------+
|                                          100 |
+----------------------------------------------+
</pre></li></ul>
            </div>
            <p>
                To configure password checking, modify the system variables having
                names of the form
                <code class="literal">validate_password_<em class="replaceable"><code>xxx</code></em></code>;
                these are the parameters that control password policy. See
                <a class="xref" href="security.html#validate-password-options-variables" title="6.4.3.2&nbsp;Password Validation Plugin Options and Variables">Section&nbsp;6.4.3.2, “Password Validation Plugin Options and Variables”</a>.
            </p><p style="color:blue;">要配置密码检查，请修改名为validate_password_xxx的系统变量；这些是控制密码策略的参数。参见第6.4.3.2节“密码验证插件选项和变量”。</p><p>
            If <code class="literal">validate_password</code> is not installed, the
            <code class="literal">validate_password_<em class="replaceable"><code>xxx</code></em></code>
            system variables are not available, passwords in statements are
            not checked, and the
            <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>
            function always returns 0. For example, without the plugin
            installed, accounts can be assigned passwords shorter than 8
            characters, or no password at all.
        </p><p style="color:blue;">如果未安装validate_password，则validate_password_xxx系统变量不可用，不检查语句中的密码，validate_password_strength（）函数始终返回0。例如，在没有安装插件的情况下，可以为帐户分配少于8个字符的密码，或者根本没有密码。</p><p>
            Assuming that <code class="literal">validate_password</code> is installed,
            it implements three levels of password checking:
            <code class="literal">LOW</code>, <code class="literal">MEDIUM</code>, and
            <code class="literal">STRONG</code>. The default is
            <code class="literal">MEDIUM</code>; to change this, modify the value of
            <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>. The
            policies implement increasingly strict password tests. The
            following descriptions refer to default parameter values, which
            can be modified by changing the appropriate system variables.
        </p><p style="color:blue;">假设安装了validate_password，它将实现三个级别的密码检查：低、中和强。默认值为“中”；若要更改此值，请修改“验证密码”策略的值。这些策略实施了越来越严格的密码测试。以下说明涉及默认参数值，可以通过更改相应的系统变量来修改这些值。</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="literal">LOW</code> policy tests password length only.
                    Passwords must be at least 8 characters long. To change this
                    length, modify
                    <a class="link" href="security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a>.
                </p><p style="color:blue;">低策略仅测试密码长度。密码长度必须至少为8个字符。若要更改此长度，请修改“验证密码长度”。</p></li><li class="listitem"><p>
                    <code class="literal">MEDIUM</code> policy adds the conditions that
                    passwords must contain at least 1 numeric character, 1
                    lowercase character, 1 uppercase character, and 1 special
                    (nonalphanumeric) character. To change these values, modify
                    <a class="link" href="security.html#sysvar_validate_password_number_count"><code class="literal">validate_password_number_count</code></a>,
                    <a class="link" href="security.html#sysvar_validate_password_mixed_case_count"><code class="literal">validate_password_mixed_case_count</code></a>,
                    and
                    <a class="link" href="security.html#sysvar_validate_password_special_char_count"><code class="literal">validate_password_special_char_count</code></a>.
                </p><p style="color:blue;">medium policy添加以下条件：密码必须至少包含1个数字字符、1个小写字符、1个大写字符和1个特殊（非字母数字）字符。要更改这些值，请修改validate_password_number_count、validate_password_mixed_case_count和validate_password_special_char_count。</p></li><li class="listitem"><p>
                    <code class="literal">STRONG</code> policy adds the condition that
                    password substrings of length 4 or longer must not match words
                    in the dictionary file, if one has been specified. To specify
                    the dictionary file, modify
                    <a class="link" href="security.html#sysvar_validate_password_dictionary_file"><code class="literal">validate_password_dictionary_file</code></a>.
                </p><p style="color:blue;">强策略添加长度为4或更长的密码子字符串与字典文件中的单词（如果已指定）不匹配的条件。要指定字典文件，请修改validate_password_dictionary_文件。</p></li></ul>
            </div>
            <p>
                In addition, as of MySQL 5.7.15,
                <code class="literal">validate_password</code> supports the capability of
                rejecting passwords that match the user name part of the effective
                user account for the current session, either forward or in
                reverse. To provide control over this capability,
                <code class="literal">validate_password</code> exposes a
                <a class="link" href="security.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a>
                system variable, which is enabled by default.
            </p><p style="color:blue;">此外，从mysql 5.7.15开始，validate_password支持拒绝与当前会话的有效用户帐户的用户名部分匹配的密码（正向或反向）。要提供对此功能的控制，validate_password将公开validate_password_check_user_name系统变量，该变量在默认情况下处于启用状态。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="validate-password-installation"></a>6.4.3.1&nbsp;Password Validation Plugin Installation</h4>
                        </div>
                    </div>
                </div>
                <a class="indexterm" name="idm140286883002320"></a><a class="indexterm" name="idm140286883000816"></a><p>
                This section describes how to install the
                <code class="literal">validate_password</code> password-validation plugin.
                For general information about installing plugins, see
                <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
            </p><p style="color:blue;">本节介绍如何安装验证密码验证插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        If you installed MySQL 5.7 using the
                        <a class="ulink" href="https://dev.mysql.com/downloads/repo/yum/" target="_top">MySQL Yum
                            repository</a>,
                        <a class="ulink" href="https://dev.mysql.com/downloads/repo/suse/" target="_top">MySQL SLES
                            Repository</a>, or
                        <a class="link" href="installing.html#linux-installation-rpm" title="2.5.5&nbsp;Installing MySQL on Linux Using RPM Packages from Oracle">RPM packages provided
                            by Oracle</a>, <code class="literal">validate_password</code> is
                        enabled by default after you start your MySQL Server for the
                        first time.
                    </p><p style="color:blue;">如果使用Oracle提供的mysql-Yum存储库、mysql-SLES存储库或RPM包安装mysql 5.7，则首次启动mysql服务器后，默认情况下会启用validate_password。</p>
                </div>
                <p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory location
                    by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                The plugin library file base name is
                <code class="literal">validate_password</code>. The file name suffix
                differs per platform (for example, <code class="filename">.so</code> for
                Unix and Unix-like systems, <code class="filename">.dll</code> for
                Windows).
            </p><p style="color:blue;">插件库文件的基本名称是validate\u password。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                To load the plugin at server startup, use the
                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option to name
                the library file that contains it. With this plugin-loading
                method, the option must be given each time the server starts.
                For example, put these lines in the server
                <code class="filename">my.cnf</code> file (adjust the
                <code class="filename">.so</code> suffix for your platform as necessary):
            </p><p style="color:blue;">要在服务器启动时加载插件，请使用--plugin load add选项命名包含该插件的库文件。使用此插件加载方法，每次服务器启动时都必须提供该选项。例如，将这些行放在server my.cnf文件中（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=validate_password.so
</pre><p>
                After modifying <code class="filename">my.cnf</code>, restart the server
                to cause the new settings to take effect.
            </p><p style="color:blue;">修改my.cnf后，重新启动服务器以使新设置生效。</p><p>
                Alternatively, to load the plugin at runtime, use this statement
                (adjust the <code class="filename">.so</code> suffix for your platform as
                necessary):
            </p><p style="color:blue;">或者，要在运行时加载插件，请使用以下语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN validate_password SONAME 'validate_password.so';
</pre><p>
                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> loads the plugin,
                and also registers it in the <code class="literal">mysql.plugins</code>
                system table to cause the plugin to be loaded for each
                subsequent normal server startup without the need for
                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>.
            </p><p style="color:blue;">install plugin加载插件，并将其注册到mysql.plugins系统表中，以便在以后每次正常服务器启动时加载插件，而无需--plugin load add。</p><p>
                To verify plugin installation, examine the
                <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table or
                use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a> statement
                (see <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For
                example:
            </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE 'validate%';</code></strong>
+-------------------+---------------+
| PLUGIN_NAME       | PLUGIN_STATUS |
+-------------------+---------------+
| validate_password | ACTIVE        |
+-------------------+---------------+
</pre><p>
                If the plugin failed to initialize, check the server error log
                for diagnostic messages.
            </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                If the plugin has been previously registered with
                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> or is loaded with
                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>, you can use
                the <code class="option">--validate-password</code> option at server
                startup to control plugin activation. For example, to load the
                plugin at startup and prevent it from being removed at runtime,
                use these options:
            </p><p style="color:blue;">如果插件以前已注册到install plugin或加载了--plugin load add，则可以在服务器启动时使用--validate password选项来控制插件激活。例如，要在启动时加载插件并防止在运行时将其删除，请使用以下选项：</p><pre data-lang="ini" class="programlisting">[mysqld]
plugin-load-add=validate_password.so
validate-password=FORCE_PLUS_PERMANENT
</pre><p>
                If it is desired to prevent the server from running without the
                password-validation plugin, use
                <a class="link" href="security.html#option_mysqld_validate-password"><code class="option">--validate-password</code></a> with a value
                of <code class="literal">FORCE</code> or
                <code class="literal">FORCE_PLUS_PERMANENT</code> to force server startup
                to fail if the plugin does not initialize successfully.
            </p><p style="color:blue;">如果需要防止服务器在没有密码验证插件的情况下运行，请使用--validate password（值为force）或force_plus_permanent，以在插件未成功初始化时强制服务器启动失败。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="validate-password-options-variables"></a>6.4.3.2&nbsp;Password Validation Plugin Options and Variables</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286882960400"></a><p>
                This section describes the options, system variables, and status
                variables that <code class="literal">validate_password</code> provides to
                enable its operation to be configured and monitored.
            </p><p style="color:blue;">本节介绍验证密码以配置和监视其操作所提供的选项、系统变量和状态变量。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#validate-password-options" title="Password Validation Plugin Options">Password Validation Plugin Options</a></p><p style="color:blue;">密码验证插件选项</p></li><li class="listitem"><p><a class="xref" href="security.html#validate-password-system-variables" title="Password Validation Plugin System Variables">Password Validation Plugin System Variables</a></p><p style="color:blue;">密码验证插件系统变量</p></li><li class="listitem"><p><a class="xref" href="security.html#validate-password-status-variables" title="Password Validation Plugin Status Variables">Password Validation Plugin Status Variables</a></p><p style="color:blue;">密码验证插件状态变量</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="validate-password-options"></a>Password Validation Plugin Options</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286882953008"></a><p>
                    To control activation of the
                    <code class="literal">validate_password</code> plugin, use this option:
                </p><p style="color:blue;">要控制Validate_Password插件的激活，请使用此选项：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_validate-password"></a>
                            <a class="indexterm" name="idm140286882949104"></a>

                            <a class="indexterm" name="idm140286882947648"></a>

                            <a class="link" href="security.html#option_mysqld_validate-password"><code class="option">--validate-password[=<em class="replaceable"><code>value</code></em>]</code></a>
                        </p><p style="color:blue;">--验证密码[=值]</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate-password"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password[=value]</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ON</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">ON</code></p><p style="color:blue;">打开</p><p class="valid-value"><code class="literal">OFF</code></p><p style="color:blue;">关闭</p><p class="valid-value"><code class="literal">FORCE</code></p><p style="color:blue;">武力</p><p class="valid-value"><code class="literal">FORCE_PLUS_PERMANENT</code></p><p style="color:blue;">永久强制</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                This option controls how the server loads the
                                <code class="literal">validate_password</code> plugin at startup.
                                The value should be one of those available for
                                plugin-loading options, as described in
                                <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>. For example,
                                <a class="link" href="security.html#option_mysqld_validate-password"><code class="option">--validate-password=FORCE_PLUS_PERMANENT</code></a>
                                tells the server to load the plugin at startup and
                                prevents it from being removed while the server is
                                running.
                            </p><p style="color:blue;">此选项控制服务器在启动时如何加载验证密码插件。该值应该是可用于插件加载选项的值之一，如第5.5.1节“安装和卸载插件”中所述。例如，--validate password=force_plus_permanent告诉服务器在启动时加载插件，并防止在服务器运行时将其删除。</p><p>
                                This option is available only if the
                                <code class="literal">validate_password</code> plugin has been
                                previously registered with <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL
                                PLUGIN</code></a> or is loaded with
                                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>. See
                                <a class="xref" href="security.html#validate-password-installation" title="6.4.3.1&nbsp;Password Validation Plugin Installation">Section&nbsp;6.4.3.1, “Password Validation Plugin Installation”</a>.
                            </p><p style="color:blue;">此选项仅在验证密码插件以前已使用install plugin注册或使用--plugin load add加载时可用。参见第6.4.3.1节“密码验证插件安装”。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="validate-password-system-variables"></a>Password Validation Plugin System Variables</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286882914464"></a><p>
                    If the <code class="literal">validate_password</code> plugin is enabled,
                    it exposes several system variables that enable configuration
                    of password checking:
                </p><p style="color:blue;">如果启用了validate_password插件，则它将公开几个启用密码检查配置的系统变量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'validate_password%';</code></strong>
+--------------------------------------+--------+
| Variable_name                        | Value  |
+--------------------------------------+--------+
| validate_password_check_user_name    | OFF    |
| validate_password_dictionary_file    |        |
| validate_password_length             | 8      |
| validate_password_mixed_case_count   | 1      |
| validate_password_number_count       | 1      |
| validate_password_policy             | MEDIUM |
| validate_password_special_char_count | 1      |
+--------------------------------------+--------+
</pre><p>
                    To change how passwords are checked, you can set these system
                    variables at server startup or at runtime. The following list
                    describes the meaning of each variable.
                </p><p style="color:blue;">要更改密码的检查方式，可以在服务器启动或运行时设置这些系统变量。下表描述了每个变量的含义。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_validate_password_check_user_name"></a>
                            <a class="indexterm" name="idm140286882907616"></a>

                            <a class="indexterm" name="idm140286882906576"></a>

                            <a class="link" href="security.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a>
                        </p><p style="color:blue;">验证密码检查用户名</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_check_user_name"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-check-user-name[={OFF|ON}]</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.15</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_check_user_name">validate_password_check_user_name</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Boolean</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">OFF</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                Whether <code class="literal">validate_password</code> compares
                                passwords to the user name part of the effective user
                                account for the current session and rejects them if they
                                match. This variable is unavailable unless
                                <code class="literal">validate_password</code> is installed.
                            </p><p style="color:blue;">validate_password是否将密码与当前会话的有效用户帐户的用户名部分进行比较，如果匹配则拒绝它们。除非安装了validate_password，否则此变量不可用。</p><p>
                                By default,
                                <a class="link" href="security.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a>
                                is disabled. This variable controls user name matching
                                independent of the value of
                                <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>.
                            </p><p style="color:blue;">默认情况下，禁用“验证密码检查用户名”。此变量控制用户名匹配，与validate_password_策略的值无关。</p><p>
                                When
                                <a class="link" href="security.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a>
                                is enabled, it has these effects:
                            </p><p style="color:blue;">当启用validate_password_check_user_name时，它具有以下效果：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    Checking occurs in all contexts for which
                                    <code class="literal">validate_password</code> is invoked, which
                                    includes use of statements such as
                                    <a class="link" href="sql-syntax.html#alter-user" title="13.7.1.1&nbsp;ALTER USER Syntax"><code class="literal">ALTER USER</code></a> or
                                    <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7&nbsp;SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> to change
                                    the current user's password, and invocation of
                                    functions such as
                                    <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> and
                                    <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>.
                                </p><p style="color:blue;">检查发生在调用validate_password的所有上下文中，包括使用alter user或set password等语句更改当前用户的密码，以及调用password（）和validate_password_strength（）等函数。</p></li><li class="listitem"><p>
                                    The user names used for comparison are taken from the
                                    values of the <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>
                                    and <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>
                                    functions for the current session. An implication is
                                    that a user who has sufficient privileges to set
                                    another user's password can set the password to that
                                    user's name, and cannot set that user's password to
                                    the name of the user executing the statement. For
                                    example, <code class="literal">'root'@'localhost'</code> can set
                                    the password for
                                    <code class="literal">'jeffrey'@'localhost'</code> to
                                    <code class="literal">'jeffrey'</code>, but cannot set the
                                    password to <code class="literal">'root</code>.
                                </p><p style="color:blue;">用于比较的用户名取自当前会话的user（）和current_user（）函数的值。这意味着，有足够权限设置另一个用户密码的用户可以将密码设置为该用户的名称，而不能将该用户的密码设置为执行语句的用户的名称。例如，'root'@'localhost'可以将'jeffrey'@'localhost'的密码设置为'jeffrey'，但不能将密码设置为'root'。</p></li><li class="listitem"><p>
                                    Only the user name part of the
                                    <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> and
                                    <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function
                                    values is used, not the host name part. If a user name
                                    is empty, no comparison occurs.
                                </p><p style="color:blue;">只使用user（）和current_user（）函数值的用户名部分，而不使用主机名部分。如果用户名为空，则不进行比较。</p></li><li class="listitem"><p>
                                    If a password is the same as the user name or its
                                    reverse, a match occurs and the password is rejected.
                                </p><p style="color:blue;">如果密码与用户名相同或与其相反，则发生匹配并拒绝该密码。</p></li><li class="listitem"><p>
                                    User-name matching is case sensitive. The password and
                                    user name values are compared as binary strings on a
                                    byte-by-byte basis.
                                </p><p style="color:blue;">用户名匹配区分大小写。密码和用户名值作为二进制字符串逐字节进行比较。</p></li><li class="listitem"><p>
                                    If a password matches the user name,
                                    <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>
                                    returns 0 regardless of how other
                                    <code class="literal">validate_password</code> system variables
                                    are set.
                                </p><p style="color:blue;">如果密码与用户名匹配，无论如何设置其他validate_password系统变量，validate_password_strength（）都将返回0。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p><a name="sysvar_validate_password_dictionary_file"></a>
                            <a class="indexterm" name="idm140286882846800"></a>

                            <a class="indexterm" name="idm140286882845760"></a>

                            <a class="link" href="security.html#sysvar_validate_password_dictionary_file"><code class="literal">validate_password_dictionary_file</code></a>
                        </p><p style="color:blue;">验证密码字典文件</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_dictionary_file"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-dictionary-file=file_name</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_dictionary_file">validate_password_dictionary_file</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span> (&gt;= 5.7.8)</td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span> (&lt;= 5.7.7)</td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>File name</td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The path name of the dictionary file that
                                <code class="literal">validate_password</code> uses for checking
                                passwords. This variable is unavailable unless
                                <code class="literal">validate_password</code> is installed.
                            </p><p style="color:blue;">验证密码用于检查密码的词典文件的路径名。除非安装了validate_password，否则此变量不可用。</p><p>
                                By default, this variable has an empty value and
                                dictionary checks are not performed. For dictionary checks
                                to occur, the variable value must be nonempty. If the file
                                is named as a relative path, it is interpreted relative to
                                the server data directory. File contents should be
                                lowercase, one word per line. Contents are treated as
                                having a character set of <code class="literal">utf8</code>. The
                                maximum permitted file size is 1MB.
                            </p><p style="color:blue;">默认情况下，此变量的值为空，不执行字典检查。要进行字典检查，变量值必须为非空。如果文件被命名为相对路径，则会相对于服务器数据目录进行解释。文件内容应为小写，每行一个字。内容被视为具有utf8字符集。最大允许文件大小为1MB。</p><p>
                                For the dictionary file to be used during password
                                checking, the password policy must be set to 2
                                (<code class="literal">STRONG</code>); see the description of the
                                <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>
                                system variable. Assuming that is true, each substring of
                                the password of length 4 up to 100 is compared to the
                                words in the dictionary file. Any match causes the
                                password to be rejected. Comparisons are not case
                                sensitive.
                            </p><p style="color:blue;">对于要在密码检查期间使用的字典文件，密码策略必须设置为2（强）；请参见validate_password_policy系统变量的说明。假设这是真的，长度为4到100的密码的每个子字符串都将与字典文件中的单词进行比较。任何匹配都会导致密码被拒绝。比较不区分大小写。</p><p>
                                For
                                <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a>,
                                the password is checked against all policies, including
                                <code class="literal">STRONG</code>, so the strength assessment
                                includes the dictionary check regardless of the
                                <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>
                                value.
                            </p><p style="color:blue;">对于validate_password_strength（），将根据所有策略（包括strong）检查密码，因此无论validate_password_策略值如何，强度评估都包括字典检查。</p><p>
                                <a class="link" href="security.html#sysvar_validate_password_dictionary_file"><code class="literal">validate_password_dictionary_file</code></a>
                                can be set at runtime and assigning a value causes the
                                named file to be read without a server restart.
                            </p><p style="color:blue;">可以在运行时设置validate_password_dictionary_文件，并且分配一个值将导致在不重新启动服务器的情况下读取命名文件。</p></li><li class="listitem"><p><a name="sysvar_validate_password_length"></a>
                            <a class="indexterm" name="idm140286882805776"></a>

                            <a class="indexterm" name="idm140286882804672"></a>

                            <a class="link" href="security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a>
                        </p><p style="color:blue;">验证密码长度</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_length"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-length=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_length">validate_password_length</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">8</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">0</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The minimum number of characters that
                                <code class="literal">validate_password</code> requires passwords to
                                have. This variable is unavailable unless
                                <code class="literal">validate_password</code> is installed.
                            </p><p style="color:blue;">验证密码的最小字符数需要密码。除非安装了validate_password，否则此变量不可用。</p><p>
                                The
                                <a class="link" href="security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a>
                                minimum value is a function of several other related
                                system variables. The value cannot be set less than the
                                value of this expression:
                            </p><p style="color:blue;">validate_password_length_最小值是其他几个相关系统变量的函数。不能将该值设置为小于此表达式的值：</p><pre data-lang="none" class="programlisting">validate_password_number_count
+ validate_password_special_char_count
+ (2 * validate_password_mixed_case_count)
</pre><p>
                                If <code class="literal">validate_password</code> adjusts the value
                                of
                                <a class="link" href="security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a>
                                due to the preceding constraint, it writes a message to
                                the error log.
                            </p><p style="color:blue;">如果validate_password由于前面的约束而调整validate_password_length的值，则它会将消息写入错误日志。</p></li><li class="listitem"><p><a name="sysvar_validate_password_mixed_case_count"></a>
                            <a class="indexterm" name="idm140286882766400"></a>

                            <a class="indexterm" name="idm140286882765360"></a>

                            <a class="link" href="security.html#sysvar_validate_password_mixed_case_count"><code class="literal">validate_password_mixed_case_count</code></a>
                        </p><p style="color:blue;">验证密码混合大小写计数</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_mixed_case_count"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-mixed-case-count=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_mixed_case_count">validate_password_mixed_case_count</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">1</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">0</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The minimum number of lowercase and uppercase characters
                                that <code class="literal">validate_password</code> requires
                                passwords to have if the password policy is
                                <code class="literal">MEDIUM</code> or stronger. This variable is
                                unavailable unless <code class="literal">validate_password</code> is
                                installed.
                            </p><p style="color:blue;">如果密码策略为“中”或“强”，则验证密码的小写和大写字符的最小数目需要密码。除非安装了validate_password，否则此变量不可用。</p><p>
                                For a given
                                <a class="link" href="security.html#sysvar_validate_password_mixed_case_count"><code class="literal">validate_password_mixed_case_count</code></a>
                                value, the password must have that many lowercase
                                characters, and that many uppercase characters.
                            </p><p style="color:blue;">对于给定的validate_password_mixed_case_count值，密码必须有那么多小写字符和那么多大写字符。</p></li><li class="listitem"><p><a name="sysvar_validate_password_number_count"></a>
                            <a class="indexterm" name="idm140286882729744"></a>

                            <a class="indexterm" name="idm140286882728640"></a>

                            <a class="link" href="security.html#sysvar_validate_password_number_count"><code class="literal">validate_password_number_count</code></a>
                        </p><p style="color:blue;">验证密码计数</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_number_count"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-number-count=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_number_count">validate_password_number_count</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">1</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">0</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The minimum number of numeric (digit) characters that
                                <code class="literal">validate_password</code> requires passwords to
                                have if the password policy is <code class="literal">MEDIUM</code>
                                or stronger. This variable is unavailable unless
                                <code class="literal">validate_password</code> is installed.
                            </p><p style="color:blue;">如果密码策略为“中”或“强”，则验证密码的最小数字（数字）字符数需要密码。除非安装了validate_password，否则此变量不可用。</p></li><li class="listitem"><p><a name="sysvar_validate_password_policy"></a>
                            <a class="indexterm" name="idm140286882695120"></a>

                            <a class="indexterm" name="idm140286882694016"></a>

                            <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>
                        </p><p style="color:blue;">验证密码策略</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_policy"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-policy=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_policy">validate_password_policy</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">1</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">0</code></p><p style="color:blue;">零</p><p class="valid-value"><code class="literal">1</code></p><p style="color:blue;">一</p><p class="valid-value"><code class="literal">2</code></p><p style="color:blue;">二</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The password policy enforced by
                                <code class="literal">validate_password</code>. This variable is
                                unavailable unless <code class="literal">validate_password</code> is
                                installed.
                            </p><p style="color:blue;">验证密码强制的密码策略。除非安装了validate_password，否则此变量不可用。</p><p>
                                <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>
                                affects how <code class="literal">validate_password</code> uses its
                                other policy-setting system variables, except for checking
                                passwords against user names, which is controlled
                                independently by
                                <a class="link" href="security.html#sysvar_validate_password_check_user_name"><code class="literal">validate_password_check_user_name</code></a>.
                            </p><p style="color:blue;">validate_password_policy影响validate_password使用其其他策略设置系统变量的方式，但根据用户名检查密码除外，用户名由validate_password_check_user_name独立控制。</p><p>
                                The
                                <a class="link" href="security.html#sysvar_validate_password_policy"><code class="literal">validate_password_policy</code></a>
                                value can be specified using numeric values 0, 1, 2, or
                                the corresponding symbolic values <code class="literal">LOW</code>,
                                <code class="literal">MEDIUM</code>, <code class="literal">STRONG</code>. The
                                following table describes the tests performed for each
                                policy. For the length test, the required length is the
                                value of the
                                <a class="link" href="security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a>
                                system variable. Similarly, the required values for the
                                other tests are given by other
                                <code class="literal">validate_password_<em class="replaceable"><code>xxx</code></em></code>
                                variables.
                            </p><p style="color:blue;">可以使用数值0、1、2或相应的符号值low、medium、strong指定validate_password_策略值。下表描述了为每个策略执行的测试。对于长度测试，所需长度是validate_password_length_系统变量的值。类似地，其他测试所需的值由其他validate_password_xxx变量给出。</p>
                            <div class="informaltable">
                                <table summary="Password policies enforced by the validate_password plugin and the tests performed for each policy."><colgroup><col width="20%"><col width="80%"></colgroup><thead><tr>
                                    <th scope="col">Policy</th>
                                    <th scope="col">Tests Performed</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">0</code> or <code class="literal">LOW</code></td>
                                    <td>Length</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">1</code> or <code class="literal">MEDIUM</code></td>
                                    <td>Length; numeric, lowercase/uppercase, and special characters</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">2</code> or <code class="literal">STRONG</code></td>
                                    <td>Length; numeric, lowercase/uppercase, and special characters; dictionary
                                        file</td>
                                </tr></tbody></table>
                            </div>
                        </li><li class="listitem"><p><a name="sysvar_validate_password_special_char_count"></a>
                            <a class="indexterm" name="idm140286882632416"></a>

                            <a class="indexterm" name="idm140286882631376"></a>

                            <a class="link" href="security.html#sysvar_validate_password_special_char_count"><code class="literal">validate_password_special_char_count</code></a>
                        </p><p style="color:blue;">验证密码特殊字符数</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for validate_password_special_char_count"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--validate-password-special-char-count=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_validate_password_special_char_count">validate_password_special_char_count</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">1</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">0</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The minimum number of nonalphanumeric characters that
                                <code class="literal">validate_password</code> requires passwords to
                                have if the password policy is <code class="literal">MEDIUM</code>
                                or stronger. This variable is unavailable unless
                                <code class="literal">validate_password</code> is installed.
                            </p><p style="color:blue;">如果密码策略为“中”或“强”，则验证密码的非字母数字字符的最小数目需要密码。除非安装了validate_password，否则此变量不可用。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="validate-password-status-variables"></a>Password Validation Plugin Status Variables</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286882597216"></a><p>
                    If the <code class="literal">validate_password</code> plugin is enabled,
                    it exposes status variables that provide operational
                    information:
                </p><p style="color:blue;">如果启用了validate_password插件，它将公开提供操作信息的状态变量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'validate_password%';</code></strong>
+-----------------------------------------------+---------------------+
| Variable_name                                 | Value               |
+-----------------------------------------------+---------------------+
| validate_password.dictionary_file_last_parsed | 2019-10-03 08:33:49 |
| validate_password_dictionary_file_words_count | 1902                |
+-----------------------------------------------+---------------------+
</pre><p>
                    The following list describes the meaning of each status
                    variable.
                </p><p style="color:blue;">下表描述了每个状态变量的含义。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_validate_password_dictionary_file_last_parsed"></a>
                            <a class="indexterm" name="idm140286882590624"></a>

                            <a class="indexterm" name="idm140286882589504"></a>

                            <a class="link" href="security.html#statvar_validate_password_dictionary_file_last_parsed"><code class="literal">validate_password_dictionary_file_last_parsed</code></a>
                        </p><p style="color:blue;">验证上次解析的密码字典文件</p><p>
                            When the dictionary file was last parsed.
                        </p><p style="color:blue;">上次解析字典文件的时间。</p></li><li class="listitem"><p><a name="statvar_validate_password_dictionary_file_words_count"></a>
                            <a class="indexterm" name="idm140286882584960"></a>

                            <a class="indexterm" name="idm140286882583840"></a>

                            <a class="link" href="security.html#statvar_validate_password_dictionary_file_words_count"><code class="literal">validate_password_dictionary_file_words_count</code></a>
                        </p><p style="color:blue;">验证密码字典文件字数</p><p>
                            The number of words read from the dictionary file.
                        </p><p style="color:blue;">从字典文件中读取的单词数。</p></li></ul>
                    </div>

                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="keyring"></a>6.4.4&nbsp;The MySQL Keyring</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#keyring-installation">6.4.4.1 Keyring Plugin Installation</a></span></dt><dt><span class="section"><a href="security.html#keyring-file-plugin">6.4.4.2 Using the keyring_file File-Based Plugin</a></span></dt><dt><span class="section"><a href="security.html#keyring-encrypted-file-plugin">6.4.4.3 Using the keyring_encrypted_file Keyring Plugin</a></span></dt><dt><span class="section"><a href="security.html#keyring-okv-plugin">6.4.4.4 Using the keyring_okv KMIP Plugin</a></span></dt><dt><span class="section"><a href="security.html#keyring-aws-plugin">6.4.4.5 Using the keyring_aws Amazon Web Services Keyring Plugin</a></span></dt><dt><span class="section"><a href="security.html#keyring-key-migration">6.4.4.6 Migrating Keys Between Keyring Keystores</a></span></dt><dt><span class="section"><a href="security.html#keyring-key-types">6.4.4.7 Supported Keyring Key Types and Lengths</a></span></dt><dt><span class="section"><a href="security.html#keyring-udfs-general-purpose">6.4.4.8 General-Purpose Keyring Key-Management Functions</a></span></dt><dt><span class="section"><a href="security.html#keyring-udfs-plugin-specific">6.4.4.9 Plugin-Specific Keyring Key-Management Functions</a></span></dt><dt><span class="section"><a href="security.html#keyring-options">6.4.4.10 Keyring Command Options</a></span></dt><dt><span class="section"><a href="security.html#keyring-system-variables">6.4.4.11 Keyring System Variables</a></span></dt></dl>
            </div>
            <a class="indexterm" name="idm140286882578736"></a><p>
            MySQL Server supports a keyring that enables internal server
            components and plugins to securely store sensitive information for
            later retrieval. The implementation is plugin-based:
        </p><p style="color:blue;">mysql服务器支持一个keyring，它允许内部服务器组件和插件安全地存储敏感信息，以便以后检索。实现基于插件：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    MySQL 5.7.11 and higher includes a keyring plugin,
                    <code class="literal">keyring_file</code>, that stores keyring data in a
                    file local to the server host. This plugin is available in all
                    MySQL distributions, Community Edition and Enterprise Edition
                    included. See <a class="xref" href="security.html#keyring-file-plugin" title="6.4.4.2&nbsp;Using the keyring_file File-Based Plugin">Section&nbsp;6.4.4.2, “Using the keyring_file File-Based Plugin”</a>.
                </p><p style="color:blue;">mysql 5.7.11及更高版本包括keyring插件keyring_file，它将keyring数据存储在服务器主机本地的文件中。这个插件在所有mysql发行版、社区版和企业版中都有。参见第6.4.4.2节“使用基于keyring文件的插件”。</p></li><li class="listitem"><p>
                    MySQL 5.7.21 and higher includes a keyring plugin,
                    <code class="literal">keyring_encrypted_file</code>, that stores keyring
                    data in an encrypted file local to the server host. This
                    plugin is available in MySQL Enterprise Edition distributions. See
                    <a class="xref" href="security.html#keyring-encrypted-file-plugin" title="6.4.4.3&nbsp;Using the keyring_encrypted_file Keyring Plugin">Section&nbsp;6.4.4.3, “Using the keyring_encrypted_file Keyring Plugin”</a>.
                </p><p style="color:blue;">mysql 5.7.21及更高版本包括keyring插件keyring_encrypted_file，它将keyring数据存储在服务器主机本地的加密文件中。此插件在mysql企业版发行版中可用。参见第6.4.4.3节，“使用keyring加密文件keyring插件”。</p></li><li class="listitem"><p>
                    MySQL 5.7.12 and higher includes
                    <code class="literal">keyring_okv</code>, a KMIP 1.1 plugin for use with
                    KMIP-compatible back end keyring storage products such as
                    Oracle Key Vault and Gemalto SafeNet KeySecure Appliance. This
                    plugin is available in MySQL Enterprise Edition distributions. See
                    <a class="xref" href="security.html#keyring-okv-plugin" title="6.4.4.4&nbsp;Using the keyring_okv KMIP Plugin">Section&nbsp;6.4.4.4, “Using the keyring_okv KMIP Plugin”</a>.
                </p><p style="color:blue;">mysql 5.7.12及更高版本包括keyring_okv，一个kmip 1.1插件，用于与kmip兼容的后端keyring存储产品，如oracle key vault和gemalto safenet keysecure appliance。此插件在mysql企业版发行版中可用。参见第6.4.4.4节，“使用keyring_okv kmip插件”。</p></li><li class="listitem"><p>
                    MySQL 5.7.19 and higher includes
                    <code class="literal">keyring_aws</code>, a plugin that communicates
                    with the Amazon Web Services Key Management Service for key
                    generation and uses a local file for key storage. This plugin
                    is available in MySQL Enterprise Edition distributions. See
                    <a class="xref" href="security.html#keyring-aws-plugin" title="6.4.4.5&nbsp;Using the keyring_aws Amazon Web Services Keyring Plugin">Section&nbsp;6.4.4.5, “Using the keyring_aws Amazon Web Services Keyring Plugin”</a>.
                </p><p style="color:blue;">mysql 5.7.19及更高版本包括keyring_aws，一个与amazon web服务密钥管理服务通信以生成密钥并使用本地文件存储密钥的插件。此插件在mysql企业版发行版中可用。参见第6.4.4.5节“使用keyring aws amazon web服务keyring插件”。</p></li><li class="listitem"><p>
                    MySQL 5.7.21 and higher supports a server operational mode
                    that enables migration of keys between underlying keyring
                    keystores. This enables DBAs to switch a MySQL installation
                    from one keyring plugin to another. See
                    <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>.
                </p><p style="color:blue;">mysql 5.7.21及更高版本支持一种服务器操作模式，允许在底层keyring密钥库之间迁移密钥。这使dba能够将mysql安装从一个keyring插件切换到另一个。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。</p></li><li class="listitem"><p>
                    MySQL 5.7.13 and higher includes an SQL interface for keyring
                    key management, implemented as a set of user-defined functions
                    (UDFs). See <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
                </p><p style="color:blue;">mysql 5.7.13及更高版本包含一个用于密钥环密钥管理的sql接口，作为一组用户定义函数（udf）实现。见第6.4.4.8节，“通用钥匙环钥匙管理功能”。</p></li></ul>
            </div>
            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
                <div class="admon-title">
                    Warning
                </div>
                <p>
                    The <code class="literal">keyring_file</code> and
                    <code class="literal">keyring_encrypted_file</code> plugins for encryption
                    key management are not intended as a regulatory compliance
                    solution. Security standards such as PCI, FIPS, and others
                    require use of key management systems to secure, manage, and
                    protect encryption keys in key vaults or hardware security
                    modules (HSMs).
                </p><p style="color:blue;">用于加密密钥管理的keyring_文件和keyring_加密_文件插件不打算用作法规遵从性解决方案。PCI、FIPS等安全标准要求使用密钥管理系统来保护、管理和保护密钥库或硬件安全模块（HSM）中的加密密钥。</p>
            </div>
            <p>
                Uses for the keyring within MySQL include:
            </p><p style="color:blue;">mysql中的keyring使用包括：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    The <code class="literal">InnoDB</code> storage engine uses the keyring
                    to store its key for tablespace encryption.
                    <code class="literal">InnoDB</code> can use any supported keyring
                    plugin.
                </p><p style="color:blue;">innodb存储引擎使用keyring存储表空间加密的密钥。innodb可以使用任何支持的keyring插件。</p></li><li class="listitem"><p>
                    MySQL Enterprise Audit uses the keyring to store the audit log file
                    encryption password. The audit log plugin can use any
                    supported keyring plugin.
                </p><p style="color:blue;">mysql企业审计使用keyring存储审计日志文件加密密码。审核日志插件可以使用任何支持的keyring插件。</p></li></ul>
            </div>
            <p>
                For general keyring installation instructions, see
                <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>. For information specific
                to a given keyring plugin, see the section describing that plugin.
            </p><p style="color:blue;">有关钥匙圈安装的一般说明，请参见第6.4.4.1节“钥匙圈插件安装”。有关特定于给定keyring插件的信息，请参阅描述该插件的部分。</p><p>
            For information about using the keyring UDFs, see
            <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
        </p><p style="color:blue;">有关使用keyring udf的信息，请参阅第6.4.4.8节“通用keyring密钥管理功能”。</p><p>
            Keyring plugins and UDFs access a keyring service that provides
            the interface for server components to the keyring. For
            information about accessing the keyring plugin service and writing
            keyring plugins, see <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>, and
            <a class="xref" href="extending-mysql.html#writing-keyring-plugins" title="28.2.4.12&nbsp;Writing Keyring Plugins">Section&nbsp;28.2.4.12, “Writing Keyring Plugins”</a>.
        </p><p style="color:blue;">keyring插件和udfs访问keyring服务，该服务为keyring的服务器组件提供接口。有关访问keyring插件服务和编写keyring插件的信息，请参阅第28.3.2节“keyring服务”和第28.2.4.12节“编写keyring插件”。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-installation"></a>6.4.4.1&nbsp;Keyring Plugin Installation</h4>
                        </div>
                    </div>
                </div>
                <a class="indexterm" name="idm140286882549792"></a><a class="indexterm" name="idm140286882548336"></a><a class="indexterm" name="idm140286882546848"></a><a class="indexterm" name="idm140286882545344"></a><a class="indexterm" name="idm140286882543856"></a><a class="indexterm" name="idm140286882542368"></a><a class="indexterm" name="idm140286882540880"></a><a class="indexterm" name="idm140286882539392"></a><p>
                Keyring service consumers require a keyring plugin to be
                installed. MySQL provides these plugin choices:
            </p><p style="color:blue;">keyring服务使用者需要安装keyring插件。mysql提供了以下插件选项：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">keyring_file</code>: A plugin that stores
                        keyring data in a file local to the server host. Available
                        in all MySQL distributions as of MySQL 5.7.11.
                    </p><p style="color:blue;">keyring_文件：在服务器主机本地文件中存储keyring数据的插件。从mysql 5.7.11开始，在所有mysql发行版中都可用。</p></li><li class="listitem"><p>
                        <code class="literal">keyring_encrypted_file</code>: A plugin that
                        stores keyring data in an encrypted file local to the server
                        host. Available in MySQL Enterprise Edition distributions as of MySQL 5.7.21.
                    </p><p style="color:blue;">keyring_encrypted_file：在服务器主机本地的加密文件中存储keyring数据的插件。从mysql 5.7.21开始在mysql企业版发行版中提供。</p></li><li class="listitem"><p>
                        <code class="literal">keyring_okv</code>: A plugin that uses
                        KMIP-compatible back end keyring storage products such as
                        Oracle Key Vault and Gemalto SafeNet KeySecure Appliance.
                        Available in MySQL Enterprise Edition distributions as of MySQL 5.7.12.
                    </p><p style="color:blue;">keyring_okv：一个插件，使用与kmip兼容的后端keyring存储产品，如oracle key vault和gemalto safenet keysecure appliance。从mysql 5.7.12开始，在mysql企业版发行版中提供。</p></li><li class="listitem"><p>
                        <code class="literal">keyring_aws</code>: A plugin that communicates
                        with the Amazon Web Services Key Management Service as a
                        back end for key generation and uses a local file for key
                        storage. Available in MySQL Enterprise Edition distributions as of MySQL
                        5.7.19.
                    </p><p style="color:blue;">keyring_aws：一个插件，作为密钥生成的后端与amazon web服务密钥管理服务通信，并使用本地文件存储密钥。从mysql 5.7.19开始，在mysql企业版发行版中提供。</p></li></ul>
                </div>
                <p>
                    This section describes how to install the keyring plugin of your
                    choosing. For general information about installing plugins, see
                    <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
                </p><p style="color:blue;">本节介绍如何安装您选择的keyring插件。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p><p>
                If you intend to use keyring user-defined functions (UDFs) in
                conjunction with the keyring plugin, install the UDFs following
                keyring installation using the instructions in
                <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
            </p><p style="color:blue;">如果要将keyring用户定义函数（udf）与keyring插件结合使用，请在安装keyring之后使用第6.4.4.8节“通用keyring密钥管理函数”中的说明安装udf。</p><p>
                To be usable by the server, the plugin library file must be
                located in the MySQL plugin directory (the directory named by
                the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                variable). If necessary, configure the plugin directory location
                by setting the value of
                <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
            </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                Installation for each keyring plugin is similar. The following
                instructions use <code class="literal">keyring_file</code>. Users of a
                different keyring plugin can substitute its name for
                <code class="literal">keyring_file</code>.
            </p><p style="color:blue;">每个keyring插件的安装是相似的。以下说明使用keyring_文件。不同keyring插件的用户可以用其名称替换keyring_文件。</p><p>
                The <code class="literal">keyring_file</code> plugin library file base
                name is <code class="literal">keyring_file</code>. The file name suffix
                differs per platform (for example, <code class="filename">.so</code> for
                Unix and Unix-like systems, <code class="filename">.dll</code> for
                Windows).
            </p><p style="color:blue;">keyring_文件插件库文件基名称是keyring_文件。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Only one keyring plugin should be enabled at a time. Enabling
                        multiple keyring plugins is unsupported and results may not be
                        as anticipated.
                    </p><p style="color:blue;">一次只能启用一个keyring插件。不支持启用多个keyring插件，结果可能与预期不同。</p>
                </div>
                <p>
                    The keyring plugin must be loaded early during the server
                    startup sequence so that server components can access it as
                    necessary during their own initialization. For example, the
                    <code class="literal">InnoDB</code> storage engine uses the keyring for
                    tablespace encryption, so the keyring plugin must be loaded and
                    available prior to <code class="literal">InnoDB</code> initialization.
                </p><p style="color:blue;">keyring插件必须在服务器启动序列的早期加载，以便服务器组件可以在自己的初始化过程中根据需要访问它。例如，innodb存储引擎使用keyring进行表空间加密，因此keyring插件必须在innodb初始化之前加载并可用。</p><p>
                To load the plugin, use the
                <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option to
                name the plugin library file that contains it. For example, on
                platforms where the plugin library file suffix is
                <code class="filename">.so</code>, use these lines in the server
                <code class="filename">my.cnf</code> file (adjust the
                <code class="filename">.so</code> suffix for your platform as necessary):
            </p><p style="color:blue;">要加载插件，请使用--early plugin load选项命名包含该插件的插件库文件。例如，在插件库文件后缀为.so的平台上，在服务器my.cnf文件中使用以下行（根据需要调整平台的.so后缀）：</p><pre data-lang="ini" class="programlisting">[mysqld]
early-plugin-load=keyring_file.so
</pre><p>
                As of MySQL 5.7.12, the default
                <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> value is
                empty. To load a keyring plugin, you must use an explicit
                <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option with a
                nonempty value.
            </p><p style="color:blue;">从mysql 5.7.12开始，默认的——早期插件加载值为空。要加载keyring插件，必须使用一个显式的--early-plugin加载选项和一个非空值。</p>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        In MySQL 5.7.11, the default
                        <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> value was
                        the name of the <code class="literal">keyring_file</code> plugin library
                        file, so that plugin was loaded by default.
                        <code class="literal">InnoDB</code> tablespace encryption requires the
                        <code class="literal">keyring_file</code> plugin to be loaded prior to
                        <code class="literal">InnoDB</code> initialization, so this change of
                        default <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a>
                        value introduces an incompatibility for upgrades from 5.7.11
                        to 5.7.12 or higher. Administrators who have encrypted
                        <code class="literal">InnoDB</code> tablespaces must take explicit
                        action to ensure continued loading of the
                        <code class="literal">keyring_file</code> plugin: Start the server with
                        an <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option
                        that names the plugin library file.
                    </p><p style="color:blue;">在mysql 5.7.11中，默认的——早期插件加载值是keyring_文件插件库文件的名称，因此默认情况下加载了该插件。InnoDB表空间加密要求在InnoDB初始化之前加载keyring_文件插件，因此此默认值的更改--早期插件加载值引入了从5.7.11升级到5.7.12或更高版本的不兼容性。加密了innodb表空间的管理员必须采取明确的措施来确保keyring_文件插件的继续加载：使用命名插件库文件的--early plugin load选项启动服务器。</p>
                </div>
                <p>
                    Before starting the server, check the notes for your chosen
                    keyring plugin to see whether it permits or requires additional
                    configuration:
                </p><p style="color:blue;">在启动服务器之前，请检查所选keyring插件的注释，以查看它是否允许或需要其他配置：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        For <code class="literal">keyring_file</code>:
                        <a class="xref" href="security.html#keyring-file-plugin" title="6.4.4.2&nbsp;Using the keyring_file File-Based Plugin">Section&nbsp;6.4.4.2, “Using the keyring_file File-Based Plugin”</a>.
                    </p><p style="color:blue;">对于keyring_文件：第6.4.4.2节，“使用基于keyring_文件的插件”。</p></li><li class="listitem"><p>
                        For <code class="literal">keyring_okv</code>:
                        <a class="xref" href="security.html#keyring-okv-plugin" title="6.4.4.4&nbsp;Using the keyring_okv KMIP Plugin">Section&nbsp;6.4.4.4, “Using the keyring_okv KMIP Plugin”</a>.
                    </p><p style="color:blue;">对于keyring_okv:section 6.4.4.4，“使用keyring_okv kmip插件”。</p></li><li class="listitem"><p>
                        For <code class="literal">keyring_aws</code>:
                        <a class="xref" href="security.html#keyring-aws-plugin" title="6.4.4.5&nbsp;Using the keyring_aws Amazon Web Services Keyring Plugin">Section&nbsp;6.4.4.5, “Using the keyring_aws Amazon Web Services Keyring Plugin”</a>
                    </p><p style="color:blue;">对于keyring aws:6.4.4.5节，“使用keyring aws amazon web服务keyring插件”</p></li></ul>
                </div>
                <p>
                    After performing any plugin-specific configuration, verify
                    plugin installation. With the MySQL server running, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table or
                    use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a> statement
                    (see <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For
                    example:
                </p><p style="color:blue;">执行任何特定于插件的配置后，请验证插件安装。在mysql服务器运行时，检查information\u schema.plugins表或使用show plugins语句（参见第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE 'keyring%';</code></strong>
+--------------+---------------+
| PLUGIN_NAME  | PLUGIN_STATUS |
+--------------+---------------+
| keyring_file | ACTIVE        |
+--------------+---------------+
</pre><p>
                If the plugin failed to initialize, check the server error log
                for diagnostic messages.
            </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                If no keyring plugin is available when a server component tries
                to access the keyring service, the service cannot be used by
                that component. As a result, the component may fail to
                initialize or may initialize with limited functionality. For
                example, if <code class="literal">InnoDB</code> finds that there are
                encrypted tablespaces when it initializes, it attempts to access
                the keyring. If the keyring is unavailable,
                <code class="literal">InnoDB</code> can access only unencrypted
                tablespaces. To ensure that <code class="literal">InnoDB</code> can access
                encrypted tablespaces as well, use
                <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> to load the
                keyring plugin.
            </p><p style="color:blue;">如果服务器组件尝试访问keyring服务时没有keyring插件可用，则该组件无法使用该服务。因此，组件可能无法初始化，或者可能使用有限的功能进行初始化。例如，如果innodb在初始化时发现有加密的表空间，它会尝试访问keyring。如果keyring不可用，innodb只能访问未加密的表空间。为了确保innodb也能访问加密的表空间，可以使用--early plugin load加载keyring插件。</p><p>
                Plugins can be loaded by other methods, such as the
                <a class="link" href="server-administration.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> or
                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> option or the
                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement.
                However, keyring plugins loaded using those methods may be
                available too late in the server startup sequence for certain
                server components, such as <code class="literal">InnoDB</code>:
            </p><p style="color:blue;">插件可以通过其他方法加载，例如--plugin load或--plugin load add选项或install plugin语句。但是，对于某些服务器组件（如innodb:</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Plugin loading using
                        <a class="link" href="server-administration.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> or
                        <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a> occurs
                        after <code class="literal">InnoDB</code> initialization.
                    </p><p style="color:blue;">使用--plugin load或--plugin load add加载插件在innodb初始化后进行。</p></li><li class="listitem"><p>
                        Plugins installed using <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL
                        PLUGIN</code></a> are registered in the
                        <code class="literal">mysql.plugin</code> system table and loaded
                        automatically for subsequent server restarts. However,
                        because <code class="literal">mysql.plugin</code> is an
                        <code class="literal">InnoDB</code> table, any plugins named in it can
                        be loaded during startup only after
                        <code class="literal">InnoDB</code> initialization.
                    </p><p style="color:blue;">使用install plugin安装的插件在mysql.plugin系统表中注册，并自动加载以便随后重新启动服务器。但是，由于mysql.plugin是一个innodb表，所以只有在innodb初始化之后，才可以在启动期间加载其中命名的任何插件。</p></li></ul>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-file-plugin"></a>6.4.4.2&nbsp;Using the keyring_file File-Based Plugin</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286882466080"></a><a class="indexterm" name="idm140286882465024"></a><p>
                The <code class="literal">keyring_file</code> plugin is a keyring plugin
                that stores keyring data in a file local to the server host.
            </p><p style="color:blue;">keyring_文件插件是一个keyring插件，它将keyring数据存储在服务器主机本地的文件中。</p>
                <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Warning
                    </div>
                    <p>
                        The <code class="literal">keyring_file</code> plugin for encryption key
                        management is not intended as a regulatory compliance
                        solution. Security standards such as PCI, FIPS, and others
                        require use of key management systems to secure, manage, and
                        protect encryption keys in key vaults or hardware security
                        modules (HSMs).
                    </p><p style="color:blue;">用于加密密钥管理的keyring_文件插件不打算用作法规遵从性解决方案。PCI、FIPS等安全标准要求使用密钥管理系统来保护、管理和保护密钥库或硬件安全模块（HSM）中的加密密钥。</p>
                </div>
                <p>
                    To install the <code class="literal">keyring_file</code> plugin, use the
                    general keyring installation instructions found in
                    <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>, together with the
                    configuration information specific to
                    <code class="literal">keyring_file</code> found here.
                </p><p style="color:blue;">要安装keyring_文件插件，请使用6.4.4.1节“keyring插件安装”中的常规keyring安装说明，以及此处找到的keyring_文件的特定配置信息。</p><p>
                To be usable during the server startup process,
                <code class="literal">keyring_file</code> must be loaded using the
                <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option. The
                <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> system
                variable optionally configures the location of the file used by
                the <code class="literal">keyring_file</code> plugin for data storage. The
                default value is platform specific. To configure the file
                location explicitly, set the variable value at startup. For
                example, use these lines in the server
                <code class="filename">my.cnf</code> file (adjust the
                <code class="filename">.so</code> suffix and file location for your
                platform as necessary):
            </p><p style="color:blue;">要在服务器启动过程中可用，必须使用--early plugin load选项加载keyring_文件。keyring_file_data系统变量可选地配置keyring_file插件用于数据存储的文件的位置。默认值是平台特定的。要显式配置文件位置，请在启动时设置变量值。例如，在server my.cnf文件中使用这些行（根据需要调整平台的.so后缀和文件位置）：</p><pre data-lang="ini" class="programlisting">[mysqld]
early-plugin-load=keyring_file.so
keyring_file_data=/usr/local/mysql/mysql-keyring/keyring
</pre><p>
                Keyring operations are transactional: The
                <code class="literal">keyring_file</code> plugin uses a backup file during
                write operations to ensure that it can roll back to the original
                file if an operation fails. The backup file has the same name as
                the value of the
                <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> system
                variable with a suffix of <code class="filename">.backup</code>.
            </p><p style="color:blue;">keyring操作是事务性的：keyring_文件插件在写操作期间使用备份文件，以确保在操作失败时可以回滚到原始文件。备份文件的名称与后缀为.backup的keyring_file_数据系统变量的值相同。</p><p>
                For additional information about
                <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a>, see
                <a class="xref" href="security.html#keyring-system-variables" title="6.4.4.11&nbsp;Keyring System Variables">Section&nbsp;6.4.4.11, “Keyring System Variables”</a>.
            </p><p style="color:blue;">有关keyring_file_data的更多信息，请参见第6.4.4.11节“keyring系统变量”。</p><p>
                As of MySQL 5.7.17, to ensure that keys are flushed only when
                the correct keyring storage file exists,
                <code class="literal">keyring_file</code> stores a SHA-256 checksum of the
                keyring in the file. Before updating the file, the plugin
                verifies that it contains the expected checksum.
            </p><p style="color:blue;">至于MySQL 5.7.17，为了确保只有在正确的密钥环存储文件存在时才刷新密钥，KyrRungIX文件在文件中存储密钥环的SAH-256校验和。在更新文件之前，插件验证它是否包含预期的校验和。</p><p>
                The <code class="literal">keyring_file</code> plugin supports the
                functions that comprise the standard MySQL Keyring service
                interface. Keyring operations performed by those functions are
                accessible at two levels:
            </p><p style="color:blue;">keyring_文件插件支持组成标准mysql keyring服务接口的函数。由这些功能执行的密钥环操作可在两个级别访问：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        SQL interface: In SQL statements, call the user-defined
                        functions (UDFs) described in
                        <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
                    </p><p style="color:blue;">SQL接口：在SQL语句中，调用第6.4.4.8节“通用密钥环密钥管理函数”中描述的用户定义函数（UDF）。</p></li><li class="listitem"><p>
                        C interface: In C-language code, call the keyring service
                        functions described in <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>.
                    </p><p style="color:blue;">c接口：在c语言代码中，调用第28.3.2节“keyring服务”中描述的keyring服务函数。</p></li></ul>
                </div>
                <p>
                    Example (using UDFs):
                </p><p style="color:blue;">示例（使用udf）：</p><pre data-lang="sql" class="programlisting">SELECT keyring_key_generate('MyKey', 'AES', 32);
SELECT keyring_key_remove('MyKey');
</pre><p>
                For information about the key types permitted by
                <code class="literal">keyring_file</code>, see
                <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
            </p><p style="color:blue;">有关keyring_文件允许的密钥类型的信息，请参阅第6.4.4.7节“支持的keyring密钥类型和长度”。</p>
            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-encrypted-file-plugin"></a>6.4.4.3&nbsp;Using the keyring_encrypted_file Keyring Plugin</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286882434032"></a><a class="indexterm" name="idm140286882432992"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The <code class="literal">keyring_encrypted_file</code> plugin is an
                        extension included in MySQL Enterprise Edition, a commercial product. To learn
                        more about commercial products, see
                        <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                    </p><p style="color:blue;">keyring_encrypted_file插件是商业产品mysql企业版中包含的扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
                </div>
                <p>
                    The <code class="literal">keyring_encrypted_file</code> plugin is a
                    keyring plugin that stores keyring data in an encrypted file
                    local to the server host. This plugin is available as of MySQL
                    5.7.21.
                </p><p style="color:blue;">keyring_encrypted_file插件是一个keyring插件，它将keyring数据存储在服务器主机本地的加密文件中。这个插件从mysql 5.7.21开始提供。</p>
                <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Warning
                    </div>
                    <p>
                        The <code class="literal">keyring_encrypted_file</code> plugin for
                        encryption key management is not intended as a regulatory
                        compliance solution. Security standards such as PCI, FIPS, and
                        others require use of key management systems to secure,
                        manage, and protect encryption keys in key vaults or hardware
                        security modules (HSMs).
                    </p><p style="color:blue;">用于加密密钥管理的keyring_encrypted_文件插件不打算用作法规遵从性解决方案。PCI、FIPS等安全标准要求使用密钥管理系统来保护、管理和保护密钥库或硬件安全模块（HSM）中的加密密钥。</p>
                </div>
                <p>
                    To install the <code class="literal">keyring_encrypted_file</code> plugin,
                    use the general keyring installation instructions found in
                    <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>, together with the
                    configuration information specific to
                    <code class="literal">keyring_encrypted_file</code> found here.
                </p><p style="color:blue;">要安装keyring_encrypted_文件插件，请使用6.4.4.1节“keyring plugin installation”中的常规keyring安装说明，以及此处找到的keyring_encrypted_文件的特定配置信息。</p><p>
                To be usable during the server startup process,
                <code class="literal">keyring_encrypted_file</code> must be loaded using
                the <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option.
                To specify the password for encrypting the keyring data file,
                set the
                <a class="link" href="security.html#sysvar_keyring_encrypted_file_password"><code class="literal">keyring_encrypted_file_password</code></a>
                system variable. (The password is mandatory; if not specified at
                server startup, <code class="literal">keyring_encrypted_file</code>
                initialization fails.) The
                <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                system variable optionally configures the location of the file
                used by the <code class="literal">keyring_encrypted_file</code> plugin for
                data storage. The default value is platform specific. To
                configure the file location explicitly, set the variable value
                at startup. For example, use these lines in the server
                <code class="filename">my.cnf</code> file (adjust the
                <code class="filename">.so</code> suffix and file location for your
                platform as necessary and substitute your chosen password):
            </p><p style="color:blue;">要在服务器启动过程中使用，必须使用--early plugin load选项加载keyring_encrypted_文件。要指定加密keyring数据文件的密码，请设置keyring_encrypted_file_password系统变量。（密码是必需的；如果在服务器启动时未指定，则keyring_encrypted_文件初始化失败。）keyring_encrypted_file_数据系统变量可以选择配置keyring_encrypted_文件插件用于数据存储的文件的位置。默认值是平台特定的。要显式配置文件位置，请在启动时设置变量值。例如，在server my.cnf文件中使用这些行（根据需要调整平台的.so后缀和文件位置，并替换您选择的密码）：</p><pre data-lang="ini" class="programlisting">[mysqld]
early-plugin-load=keyring_encrypted_file.so
keyring_encrypted_file_data=/usr/local/mysql/mysql-keyring/keyring-encrypted
keyring_encrypted_file_password=<em class="replaceable"><code>password</code></em>
</pre><p>
                Because the <code class="filename">my.cnf</code> file stores a password
                when written as shown, it should have a restrictive mode and be
                accessible only to the account used to run the MySQL server.
            </p><p style="color:blue;">由于my.cnf文件在如图所示写入时存储密码，因此它应该具有限制性模式，并且只能由用于运行mysql服务器的帐户访问。</p><p>
                Keyring operations are transactional: The
                <code class="literal">keyring_encrypted_file</code> plugin uses a backup
                file during write operations to ensure that it can roll back to
                the original file if an operation fails. The backup file has the
                same name as the value of the
                <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                system variable with a suffix of <code class="filename">.backup</code>.
            </p><p style="color:blue;">keyring操作是事务性的：keyring_encrypted_file插件在写操作期间使用备份文件，以确保在操作失败时可以回滚到原始文件。备份文件的名称与后缀为.backup的keyring_encrypted_file_data系统变量的值相同。</p><p>
                For additional information about the system variables used to
                configure the <code class="literal">keyring_encrypted_file</code> plugin,
                see <a class="xref" href="security.html#keyring-system-variables" title="6.4.4.11&nbsp;Keyring System Variables">Section&nbsp;6.4.4.11, “Keyring System Variables”</a>.
            </p><p style="color:blue;">有关用于配置keyring加密文件插件的系统变量的其他信息，请参阅第6.4.4.11节“keyring系统变量”。</p><p>
                To ensure that keys are flushed only when the correct keyring
                storage file exists, <code class="literal">keyring_encrypted_file</code>
                stores a SHA-256 checksum of the keyring in the file. Before
                updating the file, the plugin verifies that it contains the
                expected checksum. In addition,
                <code class="literal">keyring_encrypted_file</code> encrypts file contents
                using AES before writing the file, and decrypts file contents
                after reading the file.
            </p><p style="color:blue;">为了确保只有当正确的密钥环存储文件存在时，密钥才被刷新，KyrRigueBuffeldEx文件存储文件中的密钥环的SAH-256校验和。在更新文件之前，插件验证它是否包含预期的校验和。此外，keyring加密文件在写入文件之前使用aes加密文件内容，在读取文件之后解密文件内容。</p><p>
                The <code class="literal">keyring_encrypted_file</code> plugin supports
                the functions that comprise the standard MySQL Keyring service
                interface. Keyring operations performed by those functions are
                accessible at two levels:
            </p><p style="color:blue;">keyring_encrypted_file插件支持组成标准mysql keyring服务接口的函数。由这些功能执行的密钥环操作可在两个级别访问：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        SQL interface: In SQL statements, call the user-defined
                        functions (UDFs) described in
                        <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
                    </p><p style="color:blue;">SQL接口：在SQL语句中，调用第6.4.4.8节“通用密钥环密钥管理函数”中描述的用户定义函数（UDF）。</p></li><li class="listitem"><p>
                        C interface: In C-language code, call the keyring service
                        functions described in <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>.
                    </p><p style="color:blue;">c接口：在c语言代码中，调用第28.3.2节“keyring服务”中描述的keyring服务函数。</p></li></ul>
                </div>
                <p>
                    Example (using UDFs):
                </p><p style="color:blue;">示例（使用udf）：</p><pre data-lang="sql" class="programlisting">SELECT keyring_key_generate('MyKey', 'AES', 32);
SELECT keyring_key_remove('MyKey');
</pre><p>
                For information about the key types permitted by
                <code class="literal">keyring_encrypted_file</code>, see
                <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
            </p><p style="color:blue;">有关keyring_encrypted_文件允许的密钥类型的信息，请参阅第6.4.4.7节“支持的keyring密钥类型和长度”。</p>
            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-okv-plugin"></a>6.4.4.4&nbsp;Using the keyring_okv KMIP Plugin</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286882395552"></a><a class="indexterm" name="idm140286882394496"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The <code class="literal">keyring_okv</code> plugin is an extension
                        included in MySQL Enterprise Edition, a commercial product. To learn more about
                        commercial products, see <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                    </p><p style="color:blue;">keyring_okv插件是mysql企业版（一种商业产品）中包含的一个扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
                </div>
                <p>
                    The Key Management Interoperability Protocol (KMIP) enables
                    communication of cryptographic keys between a key management
                    server and its clients. The <code class="literal">keyring_okv</code>
                    keyring plugin uses the KMIP 1.1 protocol to communicate
                    securely as a client of a KMIP back end. Keyring material is
                    generated exclusively by the back end, not by
                    <code class="literal">keyring_okv</code>. The plugin works with these
                    KMIP-compatible products:
                </p><p style="color:blue;">密钥管理互操作性协议（kmip）支持密钥管理服务器与其客户端之间的加密密钥通信。keyring_okv keyring插件使用kmip 1.1协议作为kmip后端的客户端进行安全通信。钥匙圈材料仅由后端产生，而不是由钥匙圈产生。该插件适用于这些与KMIP兼容的产品：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Oracle Key Vault
                    </p><p style="color:blue;">Oracle密钥库</p></li><li class="listitem"><p>
                        Gemalto SafeNet KeySecure Appliance
                    </p><p style="color:blue;">Gemalto SafeNet密钥安全设备</p></li></ul>
                </div>
                <p>
                    The <code class="literal">keyring_okv</code> plugin supports the functions
                    that comprise the standard MySQL Keyring service interface.
                    Keyring operations performed by those functions are accessible
                    at two levels:
                </p><p style="color:blue;">keyring_okv插件支持组成标准mysql keyring服务接口的函数。由这些功能执行的密钥环操作可在两个级别访问：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        SQL interface: In SQL statements, call the user-defined
                        functions (UDFs) described in
                        <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
                    </p><p style="color:blue;">SQL接口：在SQL语句中，调用第6.4.4.8节“通用密钥环密钥管理函数”中描述的用户定义函数（UDF）。</p></li><li class="listitem"><p>
                        C interface: In C-language code, call the keyring service
                        functions described in <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>.
                    </p><p style="color:blue;">c接口：在c语言代码中，调用第28.3.2节“keyring服务”中描述的keyring服务函数。</p></li></ul>
                </div>
                <p>
                    Example (using UDFs):
                </p><p style="color:blue;">示例（使用udf）：</p><pre data-lang="sql" class="programlisting">SELECT keyring_key_generate('MyKey', 'AES', 32);
SELECT keyring_key_remove('MyKey');
</pre><p>
                For information about the key types permitted by
                <code class="literal">keyring_okv</code>,
                <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
            </p><p style="color:blue;">有关keyring_okv允许的密钥类型的信息，请参阅第6.4.4.7节“支持的keyring密钥类型和长度”。</p><p>
                To install the <code class="literal">keyring_okv</code> plugin, use the
                general keyring installation instructions found in
                <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>, together with the
                configuration information specific to
                <code class="literal">keyring_okv</code> found here.
            </p><p style="color:blue;">要安装keyring_okv插件，请使用第6.4.4.1节“keyring插件安装”中的常规keyring安装说明，以及此处找到的keyring_okv的特定配置信息。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#keyring-okv-configuration" title="General keyring_okv Configuration">General keyring_okv Configuration</a></p><p style="color:blue;">通用钥匙圈配置</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-okv-oracle-key-vault" title="Configuring keyring_okv for Oracle Key Vault">Configuring keyring_okv for Oracle Key Vault</a></p><p style="color:blue;">为Oracle密钥库配置keyring\u okv</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-okv-keysecure" title="Configuring keyring_okv for Gemalto SafeNet KeySecure Appliance">Configuring keyring_okv for Gemalto SafeNet KeySecure Appliance</a></p><p style="color:blue;">为Gemalto SafeNet密钥安全设备配置密钥环</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-okv-encrypt-key-file" title="Password-Protecting the keyring_okv Key File">Password-Protecting the keyring_okv Key File</a></p><p style="color:blue;">密码保护keyring\u okv密钥文件</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="keyring-okv-configuration"></a>General keyring_okv Configuration</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286882370032"></a><p>
                    Regardless of which KMIP back end the
                    <code class="literal">keyring_okv</code> plugin uses for keyring
                    storage, the
                    <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a> system
                    variable configures the location of the directory used by
                    <code class="literal">keyring_okv</code> for its support files. The
                    default value is empty, so you must set the variable to name a
                    properly configured directory before the plugin can
                    communicate with the KMIP back end. Unless you do so,
                    <code class="literal">keyring_okv</code> writes a message to the error
                    log during server startup that it cannot communicate:
                </p><p style="color:blue;">无论keyring_okv插件用于keyring存储的是哪个kmip后端，keyring_okv_conf_dir系统变量都会配置keyring_okv用于其支持文件的目录的位置。默认值为空，因此必须将变量设置为命名正确配置的目录，插件才能与KMIP后端通信。除非您这样做，否则keyring\u okv会在服务器启动期间向错误日志中写入一条消息，说明它无法通信：</p><pre data-lang="none" class="programlisting">[Warning] Plugin keyring_okv reported: 'For keyring_okv to be
initialized, please point the keyring_okv_conf_dir variable to a directory
containing Oracle Key Vault configuration file and ssl materials'
</pre><p>
                    The <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>
                    variable must name a directory that contains the following
                    items:
                </p><p style="color:blue;">keyring_okv_conf_dir变量必须命名包含以下项的目录：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="filename">okvclient.ora</code>: A file that contains
                            details of the KMIP back end with which
                            <code class="literal">keyring_okv</code> will communicate.
                        </p><p style="color:blue;">okvclient.ora：包含keyring_okv将与之通信的kmip后端的详细信息的文件。</p></li><li class="listitem"><p>
                            <code class="filename">ssl</code>: A directory that contains the
                            certificate and key files required to establish a secure
                            connection with the KMIP back end:
                            <code class="filename">CA.pem</code>,
                            <code class="filename">cert.pem</code>, and
                            <code class="filename">key.pem</code>. As of MySQL 5.7.20, if the
                            key file is password-protected, the
                            <code class="filename">ssl</code> directory can contain a
                            single-line text file named
                            <code class="filename">password.txt</code> containing the password
                            needed to decrypt the key file.
                        </p><p style="color:blue;">ssl：包含与kmip后端建立安全连接所需的证书和密钥文件的目录：ca.pem、cert.pem和key.pem。从mysql 5.7.20开始，如果密钥文件受密码保护，ssl目录可以包含一个名为password.txt的单行文本文件，其中包含解密密钥文件所需的密码。</p></li></ul>
                    </div>
                    <p>
                        Both the <code class="filename">okvclient.ora</code> file and
                        <code class="filename">ssl</code> directory with the certificate and
                        key files are required for <code class="literal">keyring_okv</code> to
                        work properly. The procedure used to populate the
                        configuration directory with these files depends on the KMIP
                        back end used with <code class="literal">keyring_okv</code>, as
                        described elsewhere.
                    </p><p style="color:blue;">密钥环要正常工作，需要okvclient.ora文件和带有证书和密钥文件的ssl目录。使用这些文件填充配置目录的过程取决于keyring_okv使用的kmip后端，如其他地方所述。</p><p>
                    The configuration directory used by
                    <code class="literal">keyring_okv</code> as the location for its support
                    files should have a restrictive mode and be accessible only to
                    the account used to run the MySQL server. For example, on Unix
                    and Unix-like systems, to use the
                    <code class="filename">/usr/local/mysql/mysql-keyring-okv</code>
                    directory, the following commands (executed as
                    <code class="literal">root</code>) create the directory and set its mode
                    and ownership:
                </p><p style="color:blue;">keyring_okv用作其支持文件位置的配置目录应具有限制模式，并且只能由用于运行mysql服务器的帐户访问。例如，在unix和类unix系统上，要使用/usr/local/mysql/mysql keyring okv目录，以下命令（以根用户身份执行）将创建该目录并设置其模式和所有权：</p><pre data-lang="terminal" class="programlisting">cd /usr/local/mysql
mkdir mysql-keyring-okv
chmod 750 mysql-keyring-okv
chown mysql mysql-keyring-okv
chgrp mysql mysql-keyring-okv
</pre><p>
                    To be usable during the server startup process,
                    <code class="literal">keyring_okv</code> must be loaded using the
                    <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option.
                    Also, set the
                    <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a> system
                    variable to tell <code class="literal">keyring_okv</code> where to find
                    its configuration directory. For example, use these lines in
                    the server <code class="filename">my.cnf</code> file (adjust the
                    <code class="filename">.so</code> suffix and directory location for
                    your platform as necessary):
                </p><p style="color:blue;">要在服务器启动过程中可用，必须使用--early plugin load选项加载keyring_okv。另外，将keyring_okv_conf_dir系统变量设置为告诉keyring_okv在哪里可以找到其配置目录。例如，在server my.cnf文件中使用这些行（根据需要调整平台的.so后缀和目录位置）：</p><pre data-lang="ini" class="programlisting">[mysqld]
early-plugin-load=keyring_okv.so
keyring_okv_conf_dir=/usr/local/mysql/mysql-keyring-okv
</pre><p>
                    For additional information about
                    <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>, see
                    <a class="xref" href="security.html#keyring-system-variables" title="6.4.4.11&nbsp;Keyring System Variables">Section&nbsp;6.4.4.11, “Keyring System Variables”</a>.
                </p><p style="color:blue;">有关keyring_okv_conf_dir的更多信息，请参见第6.4.4.11节“keyring系统变量”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-okv-oracle-key-vault"></a>Configuring keyring_okv for Oracle Key Vault</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286882335120"></a><a class="indexterm" name="idm140286882333664"></a><p>
                    The discussion here assumes that you are familiar with Oracle
                    Key Vault. Some pertinent information sources:
                </p><p style="color:blue;">此处的讨论假定您熟悉Oracle密钥保管库。一些相关信息来源：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="ulink" href="http://www.oracle.com/technetwork/database/options/key-management/overview/index.html" target="_top">Oracle
                                Key Vault site</a>
                        </p><p style="color:blue;">Oracle密钥保管库站点</p></li><li class="listitem"><p>
                            <a class="ulink" href="http://www.oracle.com/technetwork/database/options/key-management/documentation/index.html" target="_top">Oracle
                                Key Vault documentation</a>
                        </p><p style="color:blue;">Oracle密钥保管库文档</p></li></ul>
                    </div>
                    <p>
                        In Oracle Key Vault terminology, clients that use Oracle Key
                        Vault to store and retrieve security objects are called
                        endpoints. To communicate with Oracle Key Vault, it is
                        necessary to register as an endpoint and enroll by downloading
                        and installing endpoint support files.
                    </p><p style="color:blue;">在Oracle密钥库术语中，使用Oracle密钥库存储和检索安全对象的客户端称为端点。要与Oracle密钥保管库通信，必须注册为终结点并通过下载和安装终结点支持文件进行注册。</p><p>
                    The following procedure briefly summarizes the process of
                    setting up <code class="literal">keyring_okv</code> for use with Oracle
                    Key Vault:
                </p><p style="color:blue;">以下过程简要总结了设置keyring_okv以用于Oracle密钥保管库的过程：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create the configuration directory for the
                            <code class="literal">keyring_okv</code> plugin to use.
                        </p><p style="color:blue;">为keyring\u okv插件创建要使用的配置目录。</p></li><li class="listitem"><p>
                            Register an endpoint with Oracle Key Vault to obtain an
                            enrollment token.
                        </p><p style="color:blue;">向Oracle密钥保管库注册终结点以获取注册令牌。</p></li><li class="listitem"><p>
                            Use the enrollment token to obtain the
                            <code class="filename">okvclient.jar</code> client software
                            download.
                        </p><p style="color:blue;">使用注册令牌获取okvclient.jar客户端软件下载。</p></li><li class="listitem"><p>
                            Install the client software to populate the
                            <code class="literal">keyring_okv</code> configuration directory
                            that contains the Oracle Key Vault support files.
                        </p><p style="color:blue;">安装客户端软件以填充包含Oracle密钥保管库支持文件的keyring\u okv配置目录。</p></li></ol>
                    </div>
                    <p>
                        Use the following procedure to configure
                        <code class="literal">keyring_okv</code> and Oracle Key Vault to work
                        together. This description only summarizes how to interact
                        with Oracle Key Vault. For details, visit the
                        <a class="ulink" href="http://www.oracle.com/technetwork/database/options/key-management/overview/index.html" target="_top">Oracle
                            Key Vault</a> site and consult the Oracle Key Vault
                        Administrator's Guide.
                    </p><p style="color:blue;">使用以下过程将keyring_okv和oracle key vault配置为一起工作。此说明仅概述如何与Oracle密钥保管库交互。有关详细信息，请访问Oracle密钥保管库站点并参阅《Oracle密钥保管库管理员指南》。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create the configuration directory that will contain the
                            Oracle Key Vault support files, and make sure that the
                            <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>
                            system variable is set to name that directory (for
                            details, see <a class="xref" href="security.html#keyring-okv-configuration" title="General keyring_okv Configuration">General keyring_okv Configuration</a>).
                        </p><p style="color:blue;">创建将包含Oracle密钥库支持文件的配置目录，并确保keyring_okv_conf_dir系统变量设置为该目录的名称（有关详细信息，请参见常规keyring_okv配置）。</p></li><li class="listitem"><p>
                            Log in to the Oracle Key Vault management console as a
                            user who has the System Administrator role.
                        </p><p style="color:blue;">以具有系统管理员角色的用户身份登录到Oracle密钥保管库管理控制台。</p></li><li class="listitem"><p>
                            Select the Endpoints tab to arrive at the Endpoints page.
                            On the Endpoints page, click Add.
                        </p><p style="color:blue;">选择endpoints选项卡以到达endpoints页面。在“端点”页面上，单击“添加”。</p></li><li class="listitem"><p>
                            Provide the required endpoint information and click
                            Register. The endpoint type should be Other. Successful
                            registration results in an enrollment token.
                        </p><p style="color:blue;">提供所需的端点信息并单击register。终结点类型应为其他。成功注册会生成注册令牌。</p></li><li class="listitem"><p>
                            Log out from the Oracle Key Vault server.
                        </p><p style="color:blue;">从Oracle密钥保管库服务器注销。</p></li><li class="listitem"><p>
                            Connect again to the Oracle Key Vault server, this time
                            without logging in. Use the endpoint enrollment token to
                            enroll and request the <code class="filename">okvclient.jar</code>
                            software download. Save this file to your system.
                        </p><p style="color:blue;">再次连接到Oracle密钥保管库服务器，这次不登录。使用端点注册令牌注册并请求下载okvclient.jar软件。将此文件保存到系统中。</p></li><li class="listitem"><p>
                            Install the <code class="filename">okvclient.jar</code> file using
                            the following command (you must have JDK 1.4 or higher):
                        </p><p style="color:blue;">使用以下命令安装okvclient.jar文件（必须具有JDK 1.4或更高版本）：</p><pre data-lang="terminal" class="programlisting">java -jar okvclient.jar -d <em class="replaceable"><code>dir_name</code></em> [-v]
</pre><p>
                            The directory name following the <code class="option">-d</code>
                            option is the location in which to install extracted
                            files. The <code class="option">-v</code> option, if given, causes
                            log information to be produced that may be useful if the
                            command fails.
                        </p><p style="color:blue;">-d选项后面的目录名是安装解压缩文件的位置。如果给定-v选项，则会生成日志信息，如果命令失败，这些信息可能很有用。</p><p>
                            When the command asks for an Oracle Key Vault endpoint
                            password, do not provide one. Instead, press Enter. (The
                            result is that no password will be required when the
                            endpoint connects to Oracle Key Vault.)
                        </p><p style="color:blue;">当命令要求提供Oracle密钥保管库终结点密码时，请不要提供该密码。相反，请按回车键。（结果是，当端点连接到Oracle密钥保管库时，不需要密码。）</p></li><li class="listitem"><p>
                            The preceding command produces an
                            <code class="filename">okvclient.ora</code> file, which should be
                            in this location under the directory named by the
                            <code class="option">-d</code> option in the preceding <span class="command"><strong>java
              -jar</strong></span> command:
                        </p><p style="color:blue;">前面的命令生成一个okvclient.ora文件，该文件应该位于前面java-jar命令中-d选项命名的目录下的这个位置：</p><pre data-lang="terminal" class="programlisting">install_dir/conf/okvclient.ora
</pre><p>
                            The file contents include lines that look something like
                            this:
                        </p><p style="color:blue;">文件内容包括如下行：</p><pre data-lang="ini" class="programlisting">SERVER=<em class="replaceable"><code>host_ip</code></em>:<em class="replaceable"><code>port_num</code></em>
STANDBY_SERVER=<em class="replaceable"><code>host_ip</code></em>:<em class="replaceable"><code>port_num</code></em>
</pre><p>
                            The <code class="literal">keyring_okv</code> plugin attempts to
                            communicate with the server running on the host named by
                            the <code class="literal">SERVER</code> variable and falls back to
                            <code class="literal">STANDBY_SERVER</code> if that fails:
                        </p><p style="color:blue;">keyring_okv插件尝试与由服务器变量命名的主机上运行的服务器通信，如果失败，则返回到备用服务器：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    For the <code class="literal">SERVER</code> variable, a setting
                                    in the <code class="filename">okvclient.ora</code> file is
                                    mandatory.
                                </p><p style="color:blue;">对于服务器变量，okvclient.ora文件中的设置是必需的。</p></li><li class="listitem"><p>
                                    For the <code class="literal">STANDBY_SERVER</code> variable, a
                                    setting in the <code class="filename">okvclient.ora</code> file
                                    is optional, as of MySQL 5.7.19. Prior to MySQL
                                    5.7.19, a setting for
                                    <code class="literal">STANDBY_SERVER</code> is mandatory; if
                                    <code class="filename">okvclient.ora</code> is generated with
                                    no setting for <code class="literal">STANDBY_SERVER</code>,
                                    <code class="literal">keyring_okv</code> fails to initialize.
                                    The workaround is to check
                                    <code class="filename">oraclient.ora</code> and add a
                                    <span class="quote">“<span class="quote">dummy</span>”</span> setting for
                                    <code class="literal">STANDBY_SERVER</code>, if one is missing.
                                    For example:
                                </p><p style="color:blue;">对于standby_server变量，从mysql 5.7.19开始，okvclient.ora文件中的设置是可选的。在mysql 5.7.19之前，必须设置备用服务器；如果生成的okvclient.ora没有设置备用服务器，则keyring-okv无法初始化。解决方法是检查oraclient.ora并为备用服务器添加一个“哑”设置（如果缺少）。例如：</p><pre data-lang="ini" class="programlisting">STANDBY_SERVER=127.0.0.1:5696
</pre></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            Go to the Oracle Key Vault installer directory and test
                            the setup by running this command:
                        </p><p style="color:blue;">转到Oracle Key Vault安装程序目录并通过运行以下命令测试安装程序：</p><pre data-lang="terminal" class="programlisting">okvutil/bin/okvutil list
</pre><p>
                            The output should look something like this:
                        </p><p style="color:blue;">输出应该如下所示：</p><pre data-lang="none" class="programlisting">Unique ID                               Type            Identifier
255AB8DE-C97F-482C-E053-0100007F28B9	Symmetric Key	-
264BF6E0-A20E-7C42-E053-0100007FB29C	Symmetric Key	-
</pre><p>
                            For a fresh Oracle Key Vault server (a server without any
                            key in it), the output looks like this instead, to
                            indicate that there are no keys in the vault:
                        </p><p style="color:blue;">对于新的Oracle密钥保管库服务器（没有任何密钥的服务器），输出如下所示，以指示保管库中没有密钥：</p><pre data-lang="none" class="programlisting">no objects found
</pre></li><li class="listitem"><p>
                            Use this command to extract the <code class="filename">ssl</code>
                            directory containing SSL materials from the
                            <code class="filename">okvclient.jar</code> file:
                        </p><p style="color:blue;">使用此命令从okvclient.jar文件中提取包含SSL材料的SSL目录：</p><pre data-lang="terminal" class="programlisting">jar xf okvclient.jar ssl
</pre></li><li class="listitem"><p>
                            Copy the Oracle Key Vault support files (the
                            <code class="filename">okvclient.ora</code> file and the
                            <code class="filename">ssl</code> directory) into the configuration
                            directory.
                        </p><p style="color:blue;">将Oracle密钥保管库支持文件（okvclient.ora文件和ssl目录）复制到配置目录中。</p></li><li class="listitem"><p>
                            (Optional) If you wish to password-protect the key file,
                            use the instructions in
                            <a class="xref" href="security.html#keyring-okv-encrypt-key-file" title="Password-Protecting the keyring_okv Key File">Password-Protecting the keyring_okv Key File</a>.
                        </p><p style="color:blue;">（可选）如果要对密钥文件进行密码保护，请使用“密码保护密钥环”中的说明。</p></li></ol>
                    </div>
                    <p>
                        After completing the preceding procedure, restart the MySQL
                        server. It loads the <code class="literal">keyring_okv</code> plugin and
                        <code class="literal">keyring_okv</code> uses the files in its
                        configuration directory to communicate with Oracle Key Vault.
                    </p><p style="color:blue;">完成上述过程后，重新启动mysql服务器。它加载keyring_okv插件，keyring_okv使用其配置目录中的文件与oracle密钥库通信。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-okv-keysecure"></a>Configuring keyring_okv for Gemalto SafeNet KeySecure Appliance</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286882266480"></a><a class="indexterm" name="idm140286882265040"></a><a class="indexterm" name="idm140286882263520"></a><p>
                    Gemalto SafeNet KeySecure Appliance uses the KMIP protocol
                    (version 1.1 or 1.2). As of MySQL 5.7.18, the
                    <code class="literal">keyring_okv</code> keyring plugin (which supports
                    KMIP 1.1) can use KeySecure as its KMIP back end for keyring
                    storage.
                </p><p style="color:blue;">gemalto safenet密钥安全设备使用kmip协议（版本1.1或1.2）。从mysql 5.7.18开始，keyring_okv keyring插件（支持kmip 1.1）可以使用keysecure作为其用于keyring存储的kmip后端。</p><p>
                    Use the following procedure to configure
                    <code class="literal">keyring_okv</code> and KeySecure to work together.
                    The description only summarizes how to interact with
                    KeySecure. For details, consult the section named Add a KMIP
                    Server in the
                    <a class="ulink" href="https://safenet.gemalto.com/uploadedFiles/Support_and_Downloads/AWS/007-012362-001-keysecure-appliance-user-guide-v7.1.0.pdf" target="_top">KeySecure
                        User Guide</a>.
                </p><p style="color:blue;">使用以下步骤将keyring_okv和keysecure配置为一起工作。描述只总结了如何与密钥安全交互。有关详细信息，请参阅《keysecure用户指南》中名为“添加kmip服务器”的部分。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create the configuration directory that will contain the
                            KeySecure support files, and make sure that the
                            <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>
                            system variable is set to name that directory (for
                            details, see <a class="xref" href="security.html#keyring-okv-configuration" title="General keyring_okv Configuration">General keyring_okv Configuration</a>).
                        </p><p style="color:blue;">创建将包含keysecure支持文件的配置目录，并确保keyring_okv_conf_dir系统变量设置为该目录的名称（有关详细信息，请参见常规keyring_okv配置）。</p></li><li class="listitem"><p>
                            In the configuration directory, create a subdirectory
                            named <code class="filename">ssl</code> to use for storing the
                            required SSL certificate and key files.
                        </p><p style="color:blue;">在配置目录中，创建一个名为ssl的子目录，用于存储所需的ssl证书和密钥文件。</p></li><li class="listitem"><p>
                            In the configuration directory, create a file named
                            <code class="filename">okvclient.ora</code>. It should have
                            following format:
                        </p><p style="color:blue;">在配置目录中，创建一个名为okvclient.ora的文件。格式如下：</p><pre data-lang="ini" class="programlisting">SERVER=<em class="replaceable"><code>host_ip</code></em>:<em class="replaceable"><code>port_num</code></em>
STANDBY_SERVER=<em class="replaceable"><code>host_ip</code></em>:<em class="replaceable"><code>port_num</code></em>
</pre><p>
                            For example, if KeySecure is running on host 198.51.100.20
                            and listening on port 9002, the
                            <code class="filename">okvclient.ora</code> file looks like this:
                        </p><p style="color:blue;">例如，如果keysecure在主机198.51.100.20上运行，并在端口9002上侦听，则okvclient.ora文件如下所示：</p><pre data-lang="ini" class="programlisting">SERVER=198.51.100.20:9002
STANDBY_SERVER=198.51.100.20:9002
</pre></li><li class="listitem"><p>
                            Connect to the KeySecure Management Console as an
                            administrator with credentials for Certificate Authorities
                            access.
                        </p><p style="color:blue;">以具有证书颁发机构访问凭据的管理员身份连接到密钥安全管理控制台。</p></li><li class="listitem"><p>
                            Navigate to Security &gt;&gt; Local CAs and create a local
                            certificate authority (CA).
                        </p><p style="color:blue;">导航到安全性&gt;&gt;本地CA并创建本地证书颁发机构（CA）。</p></li><li class="listitem"><p>
                            Go to Trusted CA Lists. Select Default and click on
                            Properties. Then select Edit for Trusted Certificate
                            Authority List and add the CA just created.
                        </p><p style="color:blue;">转到受信任的CA列表。选择default并单击properties。然后选择EditforTrustedCertificateAuthority列表并添加刚刚创建的CA。</p></li><li class="listitem"><p>
                            Download the CA and save it in the
                            <code class="filename">ssl</code> directory as a file named
                            <code class="filename">CA.pem</code>.
                        </p><p style="color:blue;">下载ca并将其作为名为ca.pem的文件保存在ssl目录中。</p></li><li class="listitem"><p>
                            Navigate to Security &gt;&gt; Certificate Requests and
                            create a certificate. Then you will be able to download a
                            compressed <span class="command"><strong>tar</strong></span> file containing
                            certificate PEM files.
                        </p><p style="color:blue;">导航到安全性&gt;&gt;证书请求并创建证书。然后您将能够下载包含证书pem文件的压缩tar文件。</p></li><li class="listitem"><p>
                            Extract the PEM files from in the downloaded file. For
                            example, if the file name is
                            <code class="filename">csr_w_pk_pkcs8.gz</code>, decompress and
                            unpack it using this command:
                        </p><p style="color:blue;">从下载的文件中提取pem文件。例如，如果文件名为csr_w_pk_pkcs8.gz，请使用以下命令解压缩：</p><pre data-lang="terminal" class="programlisting">tar zxvf csr_w_pk_pkcs8.gz
</pre><p>
                            Two files result from the extraction operation:
                            <code class="filename">certificate_request.pem</code> and
                            <code class="filename">private_key_pkcs8.pem</code>.
                        </p><p style="color:blue;">提取操作产生两个文件：certificate_request.pem和private_key_pkcs8.pem。</p></li><li class="listitem"><p>
                            Use this <span class="command"><strong>openssl</strong></span> command to decrypt the
                            private key and create a file named
                            <code class="filename">key.pem</code>:
                        </p><p style="color:blue;">使用此openssl命令解密私钥并创建名为key.pem的文件：</p><pre data-lang="terminal" class="programlisting">openssl pkcs8 -in private_key_pkcs8.pem -out key.pem
</pre></li><li class="listitem"><p>
                            Copy the <code class="filename">key.pem</code> file into the
                            <code class="filename">ssl</code> directory.
                        </p><p style="color:blue;">将key.pem文件复制到ssl目录中。</p></li><li class="listitem"><p>
                            Copy the certificate request in
                            <code class="filename">certificate_request.pem</code> into the
                            clipboard.
                        </p><p style="color:blue;">将certificate_request.pem中的证书请求复制到剪贴板中。</p></li><li class="listitem"><p>
                            Navigate to Security &gt;&gt; Local CAs. Select the same
                            CA that you created earlier (the one you downloaded to
                            create the <code class="filename">CA.pem</code> file), and click
                            Sign Request. Paste the Certificate Request from the
                            clipboard, choose a certificate purpose of Client (the
                            keyring is a client of KeySecure), and click Sign Request.
                            The result is a certificate signed with the selected CA in
                            a new page.
                        </p><p style="color:blue;">导航到安全性&gt;&gt;本地CA。选择之前创建的同一个ca（下载用于创建ca.pem文件的ca），然后单击“签名请求”。从剪贴板粘贴证书请求，选择客户端的证书用途（keyring是keysecure的客户端），然后单击“签名请求”。结果是在新页中使用所选CA签名的证书。</p></li><li class="listitem"><p>
                            Copy the signed certificate to the clipboard, then save
                            the clipboard contents as a file named
                            <code class="filename">cert.pem</code> in the
                            <code class="filename">ssl</code> directory.
                        </p><p style="color:blue;">将签名证书复制到剪贴板，然后将剪贴板内容另存为ssl目录中名为cert.pem的文件。</p></li><li class="listitem"><p>
                            (Optional) If you wish to password-protect the key file,
                            use the instructions in
                            <a class="xref" href="security.html#keyring-okv-encrypt-key-file" title="Password-Protecting the keyring_okv Key File">Password-Protecting the keyring_okv Key File</a>.
                        </p><p style="color:blue;">（可选）如果要对密钥文件进行密码保护，请使用“密码保护密钥环”中的说明。</p></li></ol>
                    </div>
                    <p>
                        After completing the preceding procedure, restart the MySQL
                        server. It loads the <code class="literal">keyring_okv</code> plugin and
                        <code class="literal">keyring_okv</code> uses the files in its
                        configuration directory to communicate with KeySecure.
                    </p><p style="color:blue;">完成上述过程后，重新启动mysql服务器。它加载keyring_okv插件，keyring_okv使用其配置目录中的文件与keysecure通信。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-okv-encrypt-key-file"></a>Password-Protecting the keyring_okv Key File</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        As of MySQL 5.7.20, you can optionally protect the key file
                        with a password and supply a file containing the password to
                        enable the key file to be decrypted. To so do, change location
                        to the <code class="filename">ssl</code> directory and perform these
                        steps:
                    </p><p style="color:blue;">从mysql 5.7.20开始，您可以选择使用密码保护密钥文件，并提供包含密码的文件，以便对密钥文件进行解密。为此，请将位置更改为ssl目录并执行以下步骤：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Encrypt the <code class="filename">key.pem</code> key file. For
                            example, use a command like this, and enter the encryption
                            password at the prompts:
                        </p><p style="color:blue;">加密key.pem密钥文件。例如，使用这样的命令，并在提示下输入加密密码：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>openssl rsa -des3 -in key.pem -out key.pem.new</code></strong>
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
</pre></li><li class="listitem"><p>
                            Save the encryption password in a single-line text file
                            named <code class="filename">password.txt</code> in the
                            <code class="filename">ssl</code> directory.
                        </p><p style="color:blue;">将加密密码保存在ssl目录中名为password.txt的单行文本文件中。</p></li><li class="listitem"><p>
                            Verify that the encrypted key file can be decrypted using
                            the following command. The decrypted file should display
                            on the console:
                        </p><p style="color:blue;">使用以下命令验证加密的密钥文件是否可以解密。解密文件应显示在控制台上：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>openssl rsa -in key.pem.new -passin file:password.txt</code></strong>
</pre></li><li class="listitem"><p>
                            Remove the original <code class="filename">key.pem</code> file and
                            rename <code class="filename">key.pem.new</code> to
                            <code class="filename">key.pem</code>.
                        </p><p style="color:blue;">删除原来的key.pem文件并将key.pem.new重命名为key.pem。</p></li><li class="listitem"><p>
                            Change the ownership and access mode of new
                            <code class="filename">key.pem</code> file and
                            <code class="filename">password.txt</code> file as necessary to
                            ensure that they have the same restrictions as other files
                            in the <code class="filename">ssl</code> directory.
                        </p><p style="color:blue;">根据需要更改new key.pem文件和password.txt文件的所有权和访问模式，以确保它们与ssl目录中的其他文件具有相同的限制。</p></li></ol>
                    </div>

                </div>

            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-aws-plugin"></a>6.4.4.5&nbsp;Using the keyring_aws Amazon Web Services Keyring Plugin</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286882199648"></a><a class="indexterm" name="idm140286882198592"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The <code class="literal">keyring_aws</code> plugin is an extension
                        included in MySQL Enterprise Edition, a commercial product. To learn more about
                        commercial products, see <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                    </p><p style="color:blue;">keyring_aws插件是mysql企业版（一种商业产品）中包含的一个扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
                </div>
                <p>
                    The <code class="literal">keyring_aws</code> plugin is a keyring plugin
                    that communicates with the Amazon Web Services Key Management
                    Service (AWS KMS) as a back end for key generation and uses a
                    local file for key storage. All keyring material is generated
                    exclusively by the AWS server, not by
                    <code class="literal">keyring_aws</code>.
                </p><p style="color:blue;">keyring_AWS插件是一个keyring插件，它作为密钥生成的后端与Amazon Web Services密钥管理服务（AWS KMS）通信，并使用本地文件存储密钥。所有密钥环材料都是由aws服务器独家生成的，而不是由密钥环aws生成的。</p><p>
                <code class="literal">keyring_aws</code> is available on these platforms:
            </p><p style="color:blue;">keyring_aws可用于以下平台：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Debian 8
                    </p><p style="color:blue;">德比安8</p></li><li class="listitem"><p>
                        EL7
                    </p><p style="color:blue;">EL7型</p></li><li class="listitem"><p>
                        macOS 10.13 and 10.14
                    </p><p style="color:blue;">MacOS 10.13和10.14</p></li><li class="listitem"><p>
                        SLES 12
                    </p><p style="color:blue;">SLES 12号</p></li><li class="listitem"><p>
                        Ubuntu 14.04 and 16.04
                    </p><p style="color:blue;">ubuntu 14.04和16.04</p></li><li class="listitem"><p>
                        Windows
                    </p><p style="color:blue;">窗户</p></li></ul>
                </div>
                <p>
                    The discussion here assumes that you are familiar with AWS in
                    general and KMS in particular. Some pertinent information
                    sources:
                </p><p style="color:blue;">这里的讨论假设您一般都熟悉aws，特别是kms。一些相关信息来源：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="ulink" href="https://aws.amazon.com/kms/" target="_top">AWS site</a>
                    </p><p style="color:blue;">AWS站点</p></li><li class="listitem"><p>
                        <a class="ulink" href="https://docs.aws.amazon.com/kms/" target="_top">KMS
                            documentation</a>
                    </p><p style="color:blue;">KMS文档</p></li></ul>
                </div>
                <p>
                    The following sections provide configuration and usage
                    information for the <code class="literal">keyring_aws</code> keyring
                    plugin:
                </p><p style="color:blue;">以下部分提供keyring_aws keyring插件的配置和使用信息：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#keyring-aws-plugin-configuration" title="keyring_aws Configuration">keyring_aws Configuration</a></p><p style="color:blue;">钥匙圈配置</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-aws-plugin-operation" title="keyring_aws Operation">keyring_aws Operation</a></p><p style="color:blue;">钥匙圈操作</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-aws-plugin-credential-changes" title="keyring_aws Credential Changes">keyring_aws Credential Changes</a></p><p style="color:blue;">密钥环AWS凭据更改</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="keyring-aws-plugin-configuration"></a>keyring_aws Configuration</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To install the <code class="literal">keyring_aws</code> plugin, use the
                        general keyring installation instructions found in
                        <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>, together with the
                        plugin-specific configuration information found here.
                    </p><p style="color:blue;">要安装keyring_aws插件，请使用第6.4.4.1节“keyring插件安装”中的通用keyring安装说明以及此处的插件特定配置信息。</p><p>
                    The plugin library file contains the
                    <code class="literal">keyring_aws</code> plugin and two user-defined
                    functions (UDFs),
                    <a class="link" href="security.html#udf_keyring-aws-rotate-cmk"><code class="literal">keyring_aws_rotate_cmk()</code></a> and
                    <a class="link" href="security.html#udf_keyring-aws-rotate-keys"><code class="literal">keyring_aws_rotate_keys()</code></a>.
                </p><p style="color:blue;">插件库文件包含keyring_aws插件和两个用户定义函数（udf），keyring_aws_rotate_cmk（）和keyring_aws_rotate_keys（）。</p><p>
                    To configure <code class="literal">keyring_aws</code>, you must obtain a
                    secret access key that provides credentials for communicating
                    with AWS KMS and write it to a configuration file:
                </p><p style="color:blue;">要配置keyring_aws，必须获取一个密钥访问密钥，该密钥提供与aws kms通信的凭据，并将其写入配置文件：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Create an AWS KMS account.
                        </p><p style="color:blue;">创建一个aws kms帐户。</p></li><li class="listitem"><p>
                            Use AWS KMS to create a secret access key ID and secret
                            access key. The access key serves to verify your identity
                            and that of your applications.
                        </p><p style="color:blue;">使用aws kms创建密钥访问密钥id和密钥访问密钥。访问密钥用于验证您的身份和应用程序的身份。</p></li><li class="listitem"><p>
                            Use the AWS KMS account to create a customer master key
                            (CMK) ID. At MySQL startup, set the
                            <a class="link" href="security.html#sysvar_keyring_aws_cmk_id"><code class="literal">keyring_aws_cmk_id</code></a> system
                            variable to the CMK ID value. This variable is mandatory
                            and there is no default. (Its value can be changed at
                            runtime if desired using
                            <a class="link" href="sql-syntax.html#set-variable" title="13.7.4.1&nbsp;SET Syntax for Variable Assignment"><code class="literal">SET
                                GLOBAL</code></a>.)
                        </p><p style="color:blue;">使用aws kms帐户创建客户主密钥（cmk）id。在mysql启动时，将keyring_aws_cmk_id系统变量设置为cmk id值。此变量是必需的，不存在默认值。（如果需要，可以在运行时使用set global更改其值。）</p></li><li class="listitem"><p>
                            If necessary, create the directory in which the
                            configuration file will be located. The directory should
                            have a restrictive mode and be accessible only to the
                            account used to run the MySQL server. For example, on Unix
                            and Unix-like systems, to use
                            <code class="filename">/usr/local/mysql/mysql-keyring/keyring_aws_conf</code>
                            as the file name, the following commands (executed as
                            <code class="literal">root</code>) create its parent directory and
                            set the directory mode and ownership:
                        </p><p style="color:blue;">如有必要，请创建配置文件所在的目录。目录应该具有限制模式，并且只能由用于运行mysql服务器的帐户访问。例如，在unix和类unix系统上，要使用/usr/local/mysql/mysql keyring/keyring_aws_conf作为文件名，以下命令（以根用户身份执行）将创建其父目录并设置目录模式和所有权：</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local/mysql</code></strong>
shell&gt; <strong class="userinput"><code>mkdir mysql-keyring</code></strong>
shell&gt; <strong class="userinput"><code>chmod 750 mysql-keyring</code></strong>
shell&gt; <strong class="userinput"><code>chown mysql mysql-keyring</code></strong>
shell&gt; <strong class="userinput"><code>chgrp mysql mysql-keyring</code></strong>
</pre><p>
                            At MySQL startup, set the
                            <a class="link" href="security.html#sysvar_keyring_aws_conf_file"><code class="literal">keyring_aws_conf_file</code></a>
                            system variable to
                            <code class="filename">/usr/local/mysql/mysql-keyring/keyring_aws_conf</code>
                            to indicate the configuration file location to the server.
                        </p><p style="color:blue;">在mysql启动时，将keyring_aws_conf_file系统变量设置为/usr/local/mysql/mysql keyring/keyring_aws_conf，以指示服务器的配置文件位置。</p></li><li class="listitem"><p>
                            Prepare the <code class="literal">keyring_aws</code> configuration
                            file, which should contain two lines:
                        </p><p style="color:blue;">准备keyring_aws配置文件，该文件应包含两行：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    Line 1: The secret access key ID
                                </p><p style="color:blue;">第1行：密钥访问ID</p></li><li class="listitem"><p>
                                    Line 2: The secret access key
                                </p><p style="color:blue;">第二行：秘密访问密钥</p></li></ul>
                            </div>
                            <p>
                                For example, if the key ID is
                                <code class="literal">wwwwwwwwwwwwwEXAMPLE</code> and the key is
                                <code class="literal">xxxxxxxxxxxxx/yyyyyyy/zzzzzzzzEXAMPLEKEY</code>,
                                the configuration file looks like this:
                            </p><p style="color:blue;">例如，如果密钥id为wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww</p><pre data-lang="none" class="programlisting">wwwwwwwwwwwwwEXAMPLE
xxxxxxxxxxxxx/yyyyyyy/zzzzzzzzEXAMPLEKEY
</pre></li></ol>
                    </div>
                    <p>
                        To be usable during the server startup process,
                        <code class="literal">keyring_aws</code> must be loaded using the
                        <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a> option. The
                        <a class="link" href="security.html#sysvar_keyring_aws_cmk_id"><code class="literal">keyring_aws_cmk_id</code></a> system
                        variable is mandatory and configures the customer master key
                        (CMK) ID obtained from the AWS KMS server. The
                        <a class="link" href="security.html#sysvar_keyring_aws_conf_file"><code class="literal">keyring_aws_conf_file</code></a> and
                        <a class="link" href="security.html#sysvar_keyring_aws_data_file"><code class="literal">keyring_aws_data_file</code></a> system
                        variables optionally configure the locations of the files used
                        by the <code class="literal">keyring_aws</code> plugin for configuration
                        information and data storage. The file location variable
                        default values are platform specific. To configure the
                        locations explicitly, set the variable values at startup. For
                        example, use these lines in the server
                        <code class="filename">my.cnf</code> file (adjust the
                        <code class="filename">.so</code> suffix and file locations for your
                        platform as necessary):
                    </p><p style="color:blue;">要在服务器启动过程中可用，必须使用--early plugin load选项加载keyring_aws。keyring_aws_cmk_id系统变量是必需的，用于配置从aws kms服务器获取的客户主密钥（cmk）id。keyring_aws_conf_文件和keyring_aws_data_文件系统变量可以选择配置keyring_aws插件用于配置信息和数据存储的文件的位置。文件位置变量默认值是特定于平台的。要显式配置位置，请在启动时设置变量值。例如，在server my.cnf文件中使用这些行（根据需要调整平台的.so后缀和文件位置）：</p><pre data-lang="ini" class="programlisting">[mysqld]
early-plugin-load=keyring_aws.so
keyring_aws_cmk_id='arn:aws:kms:us-west-2:111122223333:key/abcd1234-ef56-ab12-cd34-ef56abcd1234'
keyring_aws_conf_file=/usr/local/mysql/mysql-keyring/keyring_aws_conf
keyring_aws_data_file=/usr/local/mysql/mysql-keyring/keyring_aws_data
</pre><p>
                    For the <code class="literal">keyring_aws</code> plugin to start
                    successfully, the configuration file must exist and contain
                    valid secret access key information, initialized as described
                    previously. The storage file need not exist. If it does not,
                    <code class="literal">keyring_aws</code> attempts to create it (as well
                    as its parent directory, if necessary).
                </p><p style="color:blue;">对于成功启动的KEYRIGNIGAWS插件，配置文件必须存在并包含有效的密钥访问密钥信息，如前面所述初始化。存储文件不需要存在。如果没有，keyring_aws会尝试创建它（如果需要，还会创建它的父目录）。</p><p>
                    For additional information about the system variables used to
                    configure the <code class="literal">keyring_aws</code> plugin, see
                    <a class="xref" href="security.html#keyring-system-variables" title="6.4.4.11&nbsp;Keyring System Variables">Section&nbsp;6.4.4.11, “Keyring System Variables”</a>.
                </p><p style="color:blue;">有关用于配置keyring_aws插件的系统变量的更多信息，请参阅第6.4.4.11节“keyring系统变量”。</p><p>
                    Start the MySQL server and install the UDFs associated with
                    the <code class="literal">keyring_aws</code> plugin. This is a one-time
                    operation, performed by executing the following statements
                    (adjust the <code class="filename">.so</code> suffix for your platform
                    as necessary):
                </p><p style="color:blue;">启动mysql服务器并安装与keyring_aws插件相关联的udf。这是一次性操作，通过执行以下语句执行（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">CREATE FUNCTION keyring_aws_rotate_cmk RETURNS INTEGER
  SONAME 'keyring_aws.so';
CREATE FUNCTION keyring_aws_rotate_keys RETURNS INTEGER
  SONAME 'keyring_aws.so';
</pre><p>
                    For additional information about the
                    <code class="literal">keyring_aws</code> UDFs, see
                    <a class="xref" href="security.html#keyring-udfs-plugin-specific" title="6.4.4.9&nbsp;Plugin-Specific Keyring Key-Management Functions">Section&nbsp;6.4.4.9, “Plugin-Specific Keyring Key-Management Functions”</a>.
                </p><p style="color:blue;">有关keyring_aws udfs的更多信息，请参阅第6.4.4.9节“特定于插件的keyring密钥管理功能”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-aws-plugin-operation"></a>keyring_aws Operation</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        At plugin startup, the <code class="literal">keyring_aws</code> plugin
                        reads the AWS secret access key ID and key from its
                        configuration file. It also reads any encrypted keys contained
                        in its storage file into its in-memory cache.
                    </p><p style="color:blue;">在插件启动时，keyring_aws插件从其配置文件中读取aws secret access key id和key。它还将存储文件中包含的任何加密密钥读入内存缓存。</p><p>
                    During operation, <code class="literal">keyring_aws</code> maintains
                    encrypted keys in the in-memory cache and uses the storage
                    file as local persistent storage. Each keyring operation is
                    transactional: <code class="literal">keyring_aws</code> either
                    successfully changes both the in-memory key cache and the
                    keyring storage file, or the operation fails and the keyring
                    state remains unchanged.
                </p><p style="color:blue;">在操作期间，keyring aws在内存缓存中维护加密的密钥，并将存储文件用作本地持久性存储。每个keyring操作都是事务性的：keyring可以成功地更改内存中的密钥缓存和keyring存储文件，或者操作失败并且keyring状态保持不变。</p><p>
                    To ensure that keys are flushed only when the correct keyring
                    storage file exists, <code class="literal">keyring_aws</code> stores a
                    SHA-256 checksum of the keyring in the file. Before updating
                    the file, the plugin verifies that it contains the expected
                    checksum.
                </p><p style="color:blue;">为了确保只有在正确的密钥环存储文件存在时才刷新密钥，KyrrgIGAWAWS在文件中存储密钥环的SAH-256校验和。在更新文件之前，插件验证它是否包含预期的校验和。</p><p>
                    The <code class="literal">keyring_aws</code> plugin supports the
                    functions that comprise the standard MySQL Keyring service
                    interface. Keyring operations performed by these functions are
                    accessible at two levels:
                </p><p style="color:blue;">keyring_aws插件支持组成标准mysql keyring服务接口的函数。通过这些功能执行的密钥环操作可在两个级别访问：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            C interface: In C-language code, call the keyring service
                            functions described in <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>.
                        </p><p style="color:blue;">c接口：在c语言代码中，调用第28.3.2节“keyring服务”中描述的keyring服务函数。</p></li><li class="listitem"><p>
                            SQL interface: In SQL statements, call the user-defined
                            functions (UDFs) described in
                            <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
                        </p><p style="color:blue;">SQL接口：在SQL语句中，调用第6.4.4.8节“通用密钥环密钥管理函数”中描述的用户定义函数（UDF）。</p></li></ul>
                    </div>
                    <p>
                        Example (using UDFs):
                    </p><p style="color:blue;">示例（使用udf）：</p><pre data-lang="sql" class="programlisting">SELECT keyring_key_generate('MyKey', 'AES', 32);
SELECT keyring_key_remove('MyKey');
</pre><p>
                    In addition, the
                    <a class="link" href="security.html#udf_keyring-aws-rotate-cmk"><code class="literal">keyring_aws_rotate_cmk()</code></a> and
                    <a class="link" href="security.html#udf_keyring-aws-rotate-keys"><code class="literal">keyring_aws_rotate_keys()</code></a> UDFs
                    <span class="quote">“<span class="quote">extend</span>”</span> the keyring plugin interface to provide
                    AWS-related capabilities not covered by the standard keyring
                    service interface. These capabilities are accessible only by
                    calling the UDFs. There are no corresponding C-languge key
                    service functions.
                </p><p style="color:blue;">此外，keyring_aws_rotate_cmk（）和keyring_aws_rotate_keys（）udfs“扩展”keyring插件接口，以提供标准keyring服务接口未涵盖的aws相关功能。只有通过调用udf才能访问这些功能。没有相应的C语言密钥服务功能。</p><p>
                    For information about the key types permitted by
                    <code class="literal">keyring_aws</code>, see
                    <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
                </p><p style="color:blue;">有关keyring-aws允许的密钥类型的信息，请参见第6.4.4.7节“支持的keyring密钥类型和长度”。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-aws-plugin-credential-changes"></a>keyring_aws Credential Changes</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Assuming that the <code class="literal">keyring_aws</code> plugin has
                        initialized properly at server startup, it is possible to
                        change the credentials used for communicating with AWS KMS:
                    </p><p style="color:blue;">假设keyring_aws插件在服务器启动时已正确初始化，则可以更改用于与aws kms通信的凭据：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Use AWS KMS to create a new secret access key ID and
                            secret access key.
                        </p><p style="color:blue;">使用aws kms创建新的密钥访问密钥id和密钥访问密钥。</p></li><li class="listitem"><p>
                            Store the new credentials in the configuration file (the
                            file named by the
                            <a class="link" href="security.html#sysvar_keyring_aws_conf_file"><code class="literal">keyring_aws_conf_file</code></a>
                            system variable). The file format is as described
                            previously.
                        </p><p style="color:blue;">将新凭据存储在配置文件（由keyring_aws_conf_file系统变量命名的文件）中。文件格式如前所述。</p></li><li class="listitem"><p>
                            Reinitialize the <code class="literal">keyring_aws</code> plugin so
                            that it rereads the configuration file. Assuming that the
                            new credentials are valid, the plugin should initialize
                            successfully.
                        </p><p style="color:blue;">重新初始化keyring aws插件，以便它重新读取配置文件。假设新凭据有效，则插件应成功初始化。</p><p>
                            There are two ways to reinitialize the plugin:
                        </p><p style="color:blue;">有两种方法可以重新初始化插件：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                    Restart the server. This is simpler and has no side
                                    effects, but is not suitable for installations that
                                    require minimal server downtime with as few restarts
                                    as possible.
                                </p><p style="color:blue;">重新启动服务器。这更简单，没有副作用，但不适合需要最少的服务器停机时间和尽可能少的重新启动的安装。</p></li><li class="listitem"><p>
                                    Reinitialize the plugin without restarting the server
                                    by executing the following statements (adjust the
                                    <code class="filename">.so</code> suffix for your platform as
                                    necessary):
                                </p><p style="color:blue;">通过执行以下语句（根据需要调整平台的.so后缀），在不重新启动服务器的情况下重新初始化插件：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN keyring_aws;
INSTALL PLUGIN keyring_aws SONAME 'keyring_aws.so';
</pre>
                                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                                        <div class="admon-title">
                                            Note
                                        </div>
                                        <p>
                                            In addition to loading a plugin at runtime,
                                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> has
                                            the side effect of registering the plugin it in the
                                            <code class="literal">mysql.plugin</code> system table.
                                            Because of this, if you decide to stop using
                                            <code class="literal">keyring_aws</code>, it is not sufficient
                                            to remove the
                                            <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a>
                                            option from the set of options used to start the
                                            server. That stops the plugin from loading early,
                                            but the server still attempts to load it when it
                                            gets to the point in the startup sequence where it
                                            loads the plugins registered in
                                            <code class="literal">mysql.plugin</code>.
                                        </p><p style="color:blue;">除了在运行时加载插件外，install plugin还具有在mysql.plugin系统表中注册插件的副作用。因此，如果决定停止使用keyring aws，则从用于启动服务器的选项集中删除--early plugin load选项是不够的。这阻止了插件的早期加载，但是当服务器到达启动序列中加载mysql.plugin中注册的插件的点时，它仍然试图加载插件。</p><p>
                                        Consequently, if you execute the
                                        <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> plus
                                        <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>
                                        sequence just described to change the AWS KMS
                                        credentials, then to stop using
                                        <code class="literal">keyring_aws</code>, it is necessary to
                                        execute <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL
                                        PLUGIN</code></a> again to unregister the plugin in
                                        addition to removing the
                                        <a class="link" href="server-administration.html#option_mysqld_early-plugin-load"><code class="option">--early-plugin-load</code></a>
                                        option.
                                    </p><p style="color:blue;">因此，如果执行刚才描述的uninstall plugin plugin plugin-plugin-install-plugin序列来更改aws kms凭据，然后要停止使用keyring aws，除了删除--early plugin load选项外，还需要再次执行uninstall plugin来注销插件。</p>
                                    </div>
                                </li></ul>
                            </div>
                        </li></ol>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-key-migration"></a>6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores</h4>

                        </div>

                    </div>

                </div>
                <p>
                    As of MySQL 5.7.21, the MySQL server supports an operational
                    mode that enables migration of keys between underlying keyring
                    keystores. This enables DBAs to switch a MySQL installation from
                    one keyring plugin to another. A migration server (that is, a
                    server started in key migration mode) does not accept client
                    connections. Instead, it runs only long enough to migrate keys,
                    then exits. A migration server reports errors to the console
                    (the standard error output).
                </p><p style="color:blue;">从mysql 5.7.21开始，mysql服务器支持一种操作模式，允许在底层keyring密钥库之间迁移密钥。这使dba能够将mysql安装从一个keyring插件切换到另一个。迁移服务器（即以密钥迁移模式启动的服务器）不接受客户端连接。相反，它运行的时间足够长，可以迁移密钥，然后退出。迁移服务器向控制台报告错误（标准错误输出）。</p><p>
                It is possible to perform offline or online key migration:
            </p><p style="color:blue;">可以执行脱机或联机密钥迁移：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If you are sure that no running server on the local host is
                        using the source or destination keystore, an offline
                        migration is possible. In this case, the migration server
                        can modify the keystores without possibility of a running
                        server modifying keystore content during the migration.
                    </p><p style="color:blue;">如果确定本地主机上没有正在运行的服务器正在使用源密钥库或目标密钥库，则可以进行脱机迁移。在这种情况下，迁移服务器可以修改密钥库，而不必让正在运行的服务器在迁移期间修改密钥库内容。</p></li><li class="listitem"><p>
                        If a running server on the local host is using the source or
                        destination keystore, an online migration must be performed.
                        In this case, the migration server connects to the running
                        server and instructs it to pause keyring operations while
                        key migration is in progress.
                    </p><p style="color:blue;">如果本地主机上正在运行的服务器正在使用源密钥库或目标密钥库，则必须执行联机迁移。在这种情况下，迁移服务器连接到正在运行的服务器，并指示它在进行密钥迁移时暂停密钥环操作。</p></li></ul>
                </div>
                <p>
                    The result of a key migration operation is that the destination
                    keystore contains the keys it had prior to the migration, plus
                    the keys from the source keystore. The source keystore is the
                    same before and after the migration because keys are copied, not
                    moved. If a key to be copied already exists in the destination
                    keystore, an error occurs and the destination keystore is
                    restored to its premigration state.
                </p><p style="color:blue;">密钥迁移操作的结果是，目标密钥库包含迁移之前的密钥，以及源密钥库中的密钥。源密钥库在迁移前后是相同的，因为密钥是复制的，而不是移动的。如果在目的地密钥存储库中已经存在要复制的密钥，则会发生错误，并将目标密钥存储库恢复到其预迁移状态。</p><p>
                The user who invokes the server in key-migration mode must not
                be the <code class="literal">root</code> operating system user, and must
                have permission to read and write the keyring files.
            </p><p style="color:blue;">以密钥迁移模式调用服务器的用户不能是根操作系统用户，并且必须具有读取和写入密钥环文件的权限。</p><p>
                To perform a key migration operation, determine which key
                migration options are needed. Migration options indicate which
                keyring plugins are involved, and whether to perform an offline
                or online migration:
            </p><p style="color:blue;">要执行密钥迁移操作，请确定需要哪些密钥迁移选项。迁移选项指示涉及哪些keyring插件，以及是执行脱机迁移还是联机迁移：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        To indicate the source and destination keyring plugins,
                        specify these options:
                    </p><p style="color:blue;">要指示源和目标keyring插件，请指定以下选项：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-source"><code class="option">--keyring-migration-source</code></a>:
                                The source keyring plugin that manages the keys to be
                                migrated.
                            </p><p style="color:blue;">--keyring迁移源：管理要迁移的密钥的源keyring插件。</p></li><li class="listitem"><p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-destination"><code class="option">--keyring-migration-destination</code></a>:
                                The destination keyring plugin to which the migrated
                                keys are to be copied.
                            </p><p style="color:blue;">--keyring迁移目标：要将迁移的密钥复制到的目标keyring插件。</p></li></ul>
                        </div>
                        <p>
                            These options tell the server to run in key migration mode.
                            Both options are mandatory for all key migration operations.
                            The source and destination plugins must differ, and the
                            migration server must support both plugins.
                        </p><p style="color:blue;">这些选项告诉服务器以密钥迁移模式运行。这两个选项对于所有关键迁移操作都是必需的。源插件和目标插件必须不同，迁移服务器必须同时支持这两个插件。</p></li><li class="listitem"><p>
                        For an offline migration, no additional key migration
                        options are needed.
                    </p><p style="color:blue;">对于脱机迁移，不需要其他密钥迁移选项。</p>
                        <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Warning
                            </div>
                            <p>
                                Do not perform offline migration involving a keystore that
                                is in use by a running server.
                            </p><p style="color:blue;">不要在运行中的服务器正在使用密钥库的情况下执行脱机迁移。</p>
                        </div>
                    </li><li class="listitem"><p>
                        For an online migration, some running server currently is
                        using the source or destination keystore. Specify the key
                        migration options that indicate how to connect to the
                        running server. This is necessary so that the migration
                        server can connect to the running server and tell it to
                        pause keyring use during the migration operation.
                    </p><p style="color:blue;">对于在线迁移，某些正在运行的服务器当前正在使用源密钥库或目标密钥库。指定指示如何连接到正在运行的服务器的密钥迁移选项。这是必要的，这样迁移服务器可以连接到正在运行的服务器，并告诉它在迁移操作期间暂停密钥环的使用。</p><p>
                        Use of any of the following options signifies an online
                        migration:
                    </p><p style="color:blue;">使用以下任一选项表示在线迁移：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-host"><code class="option">--keyring-migration-host</code></a>:
                                The host where the running server is located. This is
                                always the local host.
                            </p><p style="color:blue;">--keyring迁移主机：运行服务器所在的主机。这总是本地主机。</p></li><li class="listitem"><p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-user"><code class="option">--keyring-migration-user</code></a>,
                                <a class="link" href="security.html#option_mysqld_keyring-migration-password"><code class="option">--keyring-migration-password</code></a>:
                                The user name and password for the account to use to
                                connect to the running server.
                            </p><p style="color:blue;">--keyring migration user，--keyring migration password：用于连接正在运行的服务器的帐户的用户名和密码。</p></li><li class="listitem"><p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-port"><code class="option">--keyring-migration-port</code></a>:
                                For TCP/IP connections, the port number to connect to on
                                the running server.
                            </p><p style="color:blue;">--密钥环迁移端口：对于TCP/IP连接，是要连接到正在运行的服务器上的端口号。</p></li><li class="listitem"><p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-socket"><code class="option">--keyring-migration-socket</code></a>:
                                For Unix socket file or Windows named pipe connections,
                                the socket file or named pipe to connect to on the
                                running server.
                            </p><p style="color:blue;">--keyring迁移套接字：对于unix套接字文件或windows命名管道连接，在运行的服务器上连接到的套接字文件或命名管道。</p></li></ul>
                        </div>
                    </li></ul>
                </div>
                <p>
                    For additional details about the key migration options, see
                    <a class="xref" href="security.html#keyring-options" title="6.4.4.10&nbsp;Keyring Command Options">Section&nbsp;6.4.4.10, “Keyring Command Options”</a>.
                </p><p style="color:blue;">有关密钥迁移选项的其他详细信息，请参阅第6.4.4.10节“keyring命令选项”。</p><p>
                Start the migration server with the key migration options
                determined as just described, possibly with other options. Keep
                the following considerations in mind:
            </p><p style="color:blue;">使用如前所述确定的关键迁移选项（可能还有其他选项）启动迁移服务器。请记住以下注意事项：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Other server options might be required, such as other
                        configuration parameters for the two keyring plugins. For
                        example, if <code class="literal">keyring_file</code> is one of the
                        plugins, you must set the
                        <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> system
                        variable if the keyring data file location is not the
                        default location. Other non-keyring options may be required
                        as well. One way to specify these options is by using
                        <a class="link" href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> to name an
                        option file that contains the required options.
                    </p><p style="color:blue;">可能需要其他服务器选项，例如两个keyring插件的其他配置参数。例如，如果keyring_file是其中一个插件，则如果keyring数据文件位置不是默认位置，则必须设置keyring_file_数据系统变量。也可能需要其他非钥匙圈选项。指定这些选项的一种方法是使用--defaults file命名包含所需选项的选项文件。</p></li><li class="listitem"><p>
                        If you invoke the migration server from a system account
                        different from that normally used to run MySQL, it might
                        create keyring directories or files that are inaccessible to
                        the server during normal operation. Suppose that
                        <a class="link" href="programs.html#mysqld" title="4.3.1&nbsp;mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> normally runs as the
                        <code class="literal">mysql</code> operating system user, but you
                        invoke the migration server while logged in as
                        <code class="literal">isabel</code>. Any new directories or files
                        created by the migration server will be owned by
                        <code class="literal">isabel</code>. Subsequent startup will fail when
                        a server run as the <code class="literal">mysql</code> operating
                        system user attempts to access file system objects owned by
                        <code class="literal">isabel</code>.
                    </p><p style="color:blue;">如果从不同于通常用于运行mysql的系统帐户调用迁移服务器，它可能会创建在正常操作期间服务器无法访问的keyring目录或文件。假设mysqld通常以mysql操作系统用户的身份运行，但您在以isabel身份登录时调用迁移服务器。迁移服务器创建的任何新目录或文件都将归isabel所有。当mysql操作系统用户试图访问isabel拥有的文件系统对象时，服务器运行时，后续启动将失败。</p><p>
                        To avoid this issue, start the migration server as the
                        <code class="literal">root</code> operating system user and provide a
                        <code class="option">--user=<em class="replaceable"><code>user_name</code></em></code>
                        option, where <em class="replaceable"><code>user_name</code></em> is the
                        system account normally used to run MySQL.
                    </p><p style="color:blue;">要避免此问题，请以根操作系统用户身份启动迁移服务器，并提供一个--user=user_name选项，其中user_name是通常用于运行mysql的系统帐户。</p></li><li class="listitem"><p>
                        The migration server expects path name option values to be
                        full paths. Relative path names may not be resolved as you
                        expect.
                    </p><p style="color:blue;">迁移服务器要求路径名选项值为完整路径。可能无法按预期解析相对路径名。</p></li></ul>
                </div>
                <p>
                    Example command line for offline key migration:
                </p><p style="color:blue;">脱机密钥迁移的命令行示例：</p><pre data-lang="terminal" class="programlisting">mysqld --defaults-file=/usr/local/mysql/etc/my.cnf
  --keyring-migration-source=keyring_file.so
  --keyring-migration-destination=keyring_encrypted_file.so
  --keyring_encrypted_file_password=<em class="replaceable"><code>password</code></em>
</pre><p>
                Example command line for online key migration:
            </p><p style="color:blue;">用于在线密钥迁移的命令行示例：</p><pre data-lang="terminal" class="programlisting">mysqld --defaults-file=/usr/local/mysql/etc/my.cnf
  --keyring-migration-source=keyring_file.so
  --keyring-migration-destination=keyring_encrypted_file.so
  --keyring_encrypted_file_password=<em class="replaceable"><code>password</code></em>
  --keyring-migration-host=localhost
  --keyring-migration-user=root
  --keyring-migration-password=<em class="replaceable"><code>root_password</code></em>
</pre><p>
                The key migration server performs the migration operation as
                follows:
            </p><p style="color:blue;">密钥迁移服务器执行以下迁移操作：</p>
                <div class="orderedlist">
                    <ol class="orderedlist" type="1"><li class="listitem"><p>
                        (Online migration only) Connect to the running server using
                        the connection options. The account used to connect must
                        have the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege
                        required to modify the global
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a> system
                        variable.
                    </p><p style="color:blue;">（仅限在线迁移）使用连接选项连接到正在运行的服务器。用于连接的帐户必须具有修改全局keyring_operations系统变量所需的超级权限。</p></li><li class="listitem"><p>
                        (Online migration only) Disable
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a> on the
                        running server. (The running server must support
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a>, which
                        means it must be from MySQL 5.7.21 or higher.)
                    </p><p style="color:blue;">（仅限在线迁移）在正在运行的服务器上禁用keyring\u操作。（正在运行的服务器必须支持keyring_操作，这意味着它必须来自mysql 5.7.21或更高版本。）</p></li><li class="listitem"><p>
                        Load the source and destination keyring plugins.
                    </p><p style="color:blue;">加载源和目标keyring插件。</p></li><li class="listitem"><p>
                        Copy keys from the source keyring to the destination
                        keyring.
                    </p><p style="color:blue;">将密钥从源密钥环复制到目标密钥环。</p></li><li class="listitem"><p>
                        Unload the keyring plugins.
                    </p><p style="color:blue;">卸下钥匙圈插件。</p></li><li class="listitem"><p>
                        (Online migration only) Enable
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a> on the
                        running server.
                    </p><p style="color:blue;">（仅限在线迁移）在正在运行的服务器上启用keyring\u操作。</p></li><li class="listitem"><p>
                        (Online migration only) Disconnect from the running server.
                    </p><p style="color:blue;">（仅限在线迁移）断开与正在运行的服务器的连接。</p></li><li class="listitem"><p>
                        Exit.
                    </p><p style="color:blue;">出口。</p></li></ol>
                </div>
                <p>
                    If an error occurs during key migration, any keys that were
                    copied to the destination plugin are removed, leaving the
                    destination keystore unchanged.
                </p><p style="color:blue;">如果在密钥迁移期间发生错误，则将删除复制到目标插件的所有密钥，使目标密钥库保持不变。</p>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        For an online migration operation, the migration server takes
                        care of enabling and disabling
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a> on the
                        running server. However, if the migration server exits
                        abnormally (for example, if someone forcibly terminates it),
                        it is possible that
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a> will not
                        have been re-enabled on the running server, leaving it unable
                        to perform keyring operations. In this case, it may be
                        necessary to connect to the running server and enable
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a> manually.
                    </p><p style="color:blue;">对于在线迁移操作，迁移服务器负责启用和禁用正在运行的服务器上的keyring_操作。但是，如果迁移服务器异常地退出（例如，如果有人强制终止），则在运行的服务器上不会重新启用KEYRUNGIO操作，从而无法执行密钥环操作。在这种情况下，可能需要连接到正在运行的服务器并手动启用keyring_操作。</p>
                </div>
                <p>
                    After a successful online key migration operation, the running
                    server might need to be restarted:
                </p><p style="color:blue;">成功执行联机密钥迁移操作后，可能需要重新启动正在运行的服务器：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        If the running server was using the source keystore, it need
                        not be restarted after the migration.
                    </p><p style="color:blue;">如果正在运行的服务器正在使用源密钥库，则在迁移后不需要重新启动它。</p></li><li class="listitem"><p>
                        If the running server was using the source keystore before
                        the migration but should use the destination keystore after
                        the migration, it must be reconfigured to use the
                        destination keyring plugin and restarted.
                    </p><p style="color:blue;">如果正在运行的服务器在迁移之前使用了源密钥库，但在迁移之后应该使用目标密钥库，则必须将其重新配置为使用目标密钥环插件并重新启动。</p></li><li class="listitem"><p>
                        If the running server was using the destination keystore and
                        will continue to use it, it should be restarted after the
                        migration to load all keys migrated into the destination
                        keystore.
                    </p><p style="color:blue;">如果正在运行的服务器正在使用目标密钥库并将继续使用它，则应在迁移后重新启动该服务器，以便将迁移到目标密钥库的所有密钥加载到目标密钥库中。</p></li></ul>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        MySQL server key migration mode supports pausing a single
                        running server. To perform a key migration if multiple key
                        servers are using the keystores involved, use this procedure:
                    </p><p style="color:blue;">mysql服务器密钥迁移模式支持暂停单个正在运行的服务器。要在多个密钥服务器使用所涉及的密钥库时执行密钥迁移，请使用以下过程：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Connect to each running server manually and set
                            <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations=OFF</code></a>.
                        </p><p style="color:blue;">手动连接到每个正在运行的服务器，并将keyring_operations设置为off。</p></li><li class="listitem"><p>
                            Use the migration server to perform an offline key
                            migration.
                        </p><p style="color:blue;">使用迁移服务器执行脱机密钥迁移。</p></li><li class="listitem"><p>
                            Connect to each running server manually and set
                            <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations=ON</code></a>.
                        </p><p style="color:blue;">手动连接到每个正在运行的服务器并设置keyring_operations=on。</p></li></ol>
                    </div>
                    <p>
                        All running servers must support the
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations=ON</code></a> system
                        variable.
                    </p><p style="color:blue;">所有正在运行的服务器都必须支持keyring_operations=on系统变量。</p>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-key-types"></a>6.4.4.7&nbsp;Supported Keyring Key Types and Lengths</h4>

                        </div>

                    </div>

                </div>
                <p>
                    MySQL Keyring supports keys of different types (encryption
                    algorithms) and lengths:
                </p><p style="color:blue;">mysql keyring支持不同类型（加密算法）和长度的密钥：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        The available key types depend on which keyring plugin is
                        installed.
                    </p><p style="color:blue;">可用的密钥类型取决于安装了哪个keyring插件。</p></li><li class="listitem"><p>
                        The permitted key lengths are subject to multiple factors:
                    </p><p style="color:blue;">允许的密钥长度受多个因素的影响：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                General keyring UDF interface limits (for keys managed
                                using one of the keyring UDFs described in
                                <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>), or
                                limits from back end implementations. These length
                                limits can vary by key operation type.
                            </p><p style="color:blue;">通用密钥环udf接口限制（对于使用第6.4.4.8节“通用密钥环密钥管理功能”中描述的其中一个密钥环udf管理的密钥），或来自后端实现的限制。这些长度限制可能因键操作类型而异。</p></li><li class="listitem"><p>
                                In addition to the general limits, individual plugins
                                may impose restrictions on key lengths per key type.
                            </p><p style="color:blue;">除了一般限制之外，个别插件可能会对每种密钥类型的密钥长度施加限制。</p></li></ul>
                        </div>
                    </li></ul>
                </div>
                <p>
                    <a class="xref" href="security.html#keyring-general-key-length-limits-table" title="Table&nbsp;6.22&nbsp;General Keyring Key Length Limits">Table&nbsp;6.22, “General Keyring Key Length Limits”</a> shows
                    the general key length limits. (The lower limits for
                    <code class="literal">keyring_aws</code> are imposed by the AWS KMS
                    interface, not the keyring UDFs.)
                    <a class="xref" href="security.html#keyring-key-types-table" title="Table&nbsp;6.23&nbsp;Keyring Plugin Key Types and Lengths">Table&nbsp;6.23, “Keyring Plugin Key Types and Lengths”</a> shows for each keyring
                    plugin the key types it permits, as well as any plugin-specific
                    key-length restrictions.
                </p><p style="color:blue;">表6.22，“通用钥匙环钥匙长度限制”显示了通用钥匙长度限制。（keyring-aws的下限是由aws kms接口而不是keyring-udf设置的。）表6.23“keyring-plugin-key-types and lengths”显示了每个keyring插件允许的密钥类型，以及任何特定于插件的密钥长度限制。</p>
                <div class="table">
                    <a name="keyring-general-key-length-limits-table"></a><p class="title"><b>Table&nbsp;6.22&nbsp;General Keyring Key Length Limits</b></p><p style="color:blue;">表6.22一般钥匙环钥匙长度限制</p>
                    <div class="table-contents">
                        <table summary="General limits on keyring key lengths."><colgroup><col width="20%"><col width="80%"></colgroup><thead><tr>
                            <th scope="col">Key Operation</th>
                            <th scope="col">Maximum Key Length</th>
                        </tr></thead><tbody><tr>
                            <td scope="row" valign="top">Generate key</td>
                            <td><p class="valid-value">
                                2,048 bytes; 1,024 for <code class="literal">keyring_aws</code>
                            </p><p style="color:blue;">2048字节；1024用于密钥环</p></td>
                        </tr><tr>
                            <td scope="row" valign="top">Store key</td>
                            <td><p class="valid-value">
                                2,048 bytes
                            </p><p style="color:blue;">2048字节</p></td>
                        </tr><tr>
                            <td scope="row" valign="top">Fetch key</td>
                            <td><p class="valid-value">
                                2,048 bytes
                            </p><p style="color:blue;">2048字节</p></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break">
                <div class="table">
                    <a name="keyring-key-types-table"></a><p class="title"><b>Table&nbsp;6.23&nbsp;Keyring Plugin Key Types and Lengths</b></p><p style="color:blue;">表6.23键环插件键类型和长度</p>
                    <div class="table-contents">
                        <table summary="Key types and lengths supported by keyring plugins."><colgroup><col width="30%"><col width="25%"><col width="45%"></colgroup><thead><tr>
                            <th scope="col">Plugin Name</th>
                            <th scope="col">Permitted Key Type</th>
                            <th scope="col">Plugin-Specific Length Restrictions</th>
                        </tr></thead><tbody><tr>
                            <td scope="row" valign="top"><code class="literal">keyring_encrypted_file</code></td>
                            <td><p class="valid-value">
                                <code class="literal">AES</code>
                            </p><p style="color:blue;">爱依斯</p><p class="valid-value">
                                <code class="literal">DSA</code>
                            </p><p style="color:blue;">数字减影血管造影</p><p class="valid-value">
                                <code class="literal">RSA</code>
                            </p><p style="color:blue;">RSA公司</p></td>
                            <td><p class="valid-value">
                                None
                            </p><p style="color:blue;">无</p><p class="valid-value">
                                None
                            </p><p style="color:blue;">无</p><p class="valid-value">
                                None
                            </p><p style="color:blue;">无</p></td>
                        </tr><tr>
                            <td scope="row" valign="top"><code class="literal">keyring_file</code></td>
                            <td><p class="valid-value">
                                <code class="literal">AES</code>
                            </p><p style="color:blue;">爱依斯</p><p class="valid-value">
                                <code class="literal">DSA</code>
                            </p><p style="color:blue;">数字减影血管造影</p><p class="valid-value">
                                <code class="literal">RSA</code>
                            </p><p style="color:blue;">RSA公司</p></td>
                            <td><p class="valid-value">
                                None
                            </p><p style="color:blue;">无</p><p class="valid-value">
                                None
                            </p><p style="color:blue;">无</p><p class="valid-value">
                                None
                            </p><p style="color:blue;">无</p></td>
                        </tr><tr>
                            <td scope="row" valign="top"><code class="literal">keyring_okv</code></td>
                            <td><p class="valid-value">
                                <code class="literal">AES</code>
                            </p><p style="color:blue;">爱依斯</p></td>
                            <td><p class="valid-value">
                                16, 24, or 32 bytes
                            </p><p style="color:blue;">16、24或32字节</p></td>
                        </tr><tr>
                            <td scope="row" valign="top"><code class="literal">keyring_aws</code></td>
                            <td><p class="valid-value">
                                <code class="literal">AES</code>
                            </p><p style="color:blue;">爱依斯</p></td>
                            <td><p class="valid-value">
                                16, 24, or 32 bytes
                            </p><p style="color:blue;">16、24或32字节</p></td>
                        </tr></tbody></table>
                    </div>

                </div>
                <br class="table-break">
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-udfs-general-purpose"></a>6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286881938528"></a><a class="indexterm" name="idm140286881937040"></a><a class="indexterm" name="idm140286881935552"></a><p>
                MySQL Server supports a keyring service that enables internal
                server components and plugins to securely store sensitive
                information for later retrieval.
            </p><p style="color:blue;">mysql服务器支持keyring服务，使内部服务器组件和插件能够安全地存储敏感信息，以便以后检索。</p><p>
                As of MySQL 5.7.13, MySQL Server includes an SQL interface for
                keyring key management, implemented as a set of general-purpose
                user-defined functions (UDFs) that access the functions provided
                by the internal keyring service. The keyring UDFs are contained
                in a plugin library file, which also contains a
                <code class="literal">keyring_udf</code> plugin that must be enabled prior
                to UDF invocation. For these UDFs to be used, a keyring plugin
                such as <code class="literal">keyring_file</code> or
                <code class="literal">keyring_okv</code> must be enabled.
            </p><p style="color:blue;">从mysql 5.7.13开始，mysql server包含了一个用于keyring密钥管理的sql接口，该接口被实现为一组通用的用户定义函数（udf），用于访问内部keyring服务提供的函数。keyring udf包含在一个插件库文件中，该文件还包含一个keyring udf插件，该插件必须在调用udf之前启用。要使用这些udf，必须启用keyring_文件或keyring_okv等keyring插件。</p><p>
                The UDFs described here are general purpose and intended for use
                with any keyring plugin. A given keyring plugin might have UDFs
                of its own that are intended for use only with that plugin; see
                <a class="xref" href="security.html#keyring-udfs-plugin-specific" title="6.4.4.9&nbsp;Plugin-Specific Keyring Key-Management Functions">Section&nbsp;6.4.4.9, “Plugin-Specific Keyring Key-Management Functions”</a>.
            </p><p style="color:blue;">这里描述的udf是通用的，用于任何keyring插件。给定的keyring插件可能有其自己的udf，仅用于该插件；请参见第6.4.4.9节“特定于插件的keyring密钥管理功能”。</p><p>
                The following sections provide installation instructions for the
                keyring UDFs and demonstrate how to use them. For information
                about the keyring service functions invoked by the UDFs, see
                <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>. For general keyring
                information, see <a class="xref" href="security.html#keyring" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, “The MySQL Keyring”</a>.
            </p><p style="color:blue;">以下各节提供密钥环udf的安装说明，并演示如何使用它们。有关udfs调用的keyring服务函数的信息，请参阅第28.3.2节“keyring服务”。有关一般密钥环信息，请参阅第6.4.4节“MySQL密钥环”。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#keyring-udf-installation" title="Installing or Uninstalling General-Purpose Keyring Functions">Installing or Uninstalling General-Purpose Keyring Functions</a></p><p style="color:blue;">安装或卸载通用密钥环功能</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-udf-usage" title="Using General-Purpose Keyring Functions">Using General-Purpose Keyring Functions</a></p><p style="color:blue;">使用通用钥匙圈功能</p></li><li class="listitem"><p><a class="xref" href="security.html#keyring-udf-reference" title="General-Purpose Keyring Function Reference">General-Purpose Keyring Function Reference</a></p><p style="color:blue;">通用钥匙圈功能参考</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="keyring-udf-installation"></a>Installing or Uninstalling General-Purpose Keyring Functions</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286881922496"></a><a class="indexterm" name="idm140286881921040"></a><a class="indexterm" name="idm140286881919552"></a><a class="indexterm" name="idm140286881918064"></a><a class="indexterm" name="idm140286881916576"></a><a class="indexterm" name="idm140286881915088"></a><p>
                    This section describes how to install or uninstall the keyring
                    user-defined functions (UDFs), which are implemented in a
                    plugin library file that also contains a
                    <code class="literal">keyring_udf</code> plugin. For general information
                    about installing or uninstalling plugins and UDFs, see
                    <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>, and
                    <a class="xref" href="server-administration.html#udf-loading" title="5.6.1&nbsp;Installing and Uninstalling User-Defined Functions">Section&nbsp;5.6.1, “Installing and Uninstalling User-Defined Functions”</a>.
                </p><p style="color:blue;">本节介绍如何安装或卸载keyring用户定义函数（udf），这些函数在包含keyring udf插件的插件库文件中实现。有关安装或卸载插件和UDF的一般信息，请参阅第5.5.1节“安装和卸载插件”，以及第5.6.1节“安装和卸载用户定义函数”。</p><p>
                    The keyring UDFs enable keyring key management operations, but
                    the <code class="literal">keyring_udf</code> plugin must also be
                    installed because the UDFs will not work correctly without it.
                    Attempts to use the UDFs without the
                    <code class="literal">keyring_udf</code> plugin result in an error.
                </p><p style="color:blue;">keyring udf启用keyring密钥管理操作，但还必须安装keyring udf插件，因为没有它udf将无法正常工作。尝试在不使用keyring-udf插件的情况下使用udf会导致错误。</p><p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory
                    location by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                    The plugin library file base name is
                    <code class="literal">keyring_udf</code>. The file name suffix differs
                    per platform (for example, <code class="filename">.so</code> for Unix
                    and Unix-like systems, <code class="filename">.dll</code> for Windows).
                </p><p style="color:blue;">插件库文件的基本名称是keyring\u udf。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                    To install the <code class="literal">keyring_udf</code> plugin and the
                    UDFs, use the <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>
                    and <a class="link" href="sql-syntax.html#create-function" title="13.1.13&nbsp;CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statements
                    (adjust the <code class="filename">.so</code> suffix for your platform
                    as necessary):
                </p><p style="color:blue;">要安装keyring-udf插件和udf，请使用install-plugin和create-function语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN keyring_udf SONAME 'keyring_udf.so';
CREATE FUNCTION keyring_key_generate RETURNS INTEGER
  SONAME 'keyring_udf.so';
CREATE FUNCTION keyring_key_fetch RETURNS STRING
  SONAME 'keyring_udf.so';
CREATE FUNCTION keyring_key_length_fetch RETURNS INTEGER
  SONAME 'keyring_udf.so';
CREATE FUNCTION keyring_key_type_fetch RETURNS STRING
  SONAME 'keyring_udf.so';
CREATE FUNCTION keyring_key_store RETURNS INTEGER
  SONAME 'keyring_udf.so';
CREATE FUNCTION keyring_key_remove RETURNS INTEGER
  SONAME 'keyring_udf.so';
</pre><p>
                    If the plugin and UDFs are used on a master replication
                    server, install them on all slave servers as well to avoid
                    replication issues.
                </p><p style="color:blue;">如果插件和udf在主复制服务器上使用，请将它们安装在所有从服务器上，以避免复制问题。</p><p>
                    Once installed as just described, the plugin and UDFs remain
                    installed until uninstalled. To remove them, use the
                    <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> and
                    <a class="link" href="sql-syntax.html#drop-function" title="13.1.24&nbsp;DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> statements:
                </p><p style="color:blue;">如前所述安装后，插件和udf将保持安装状态，直到卸载。要删除它们，请使用uninstall plugin和drop function语句：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN keyring_udf;
DROP FUNCTION keyring_key_generate;
DROP FUNCTION keyring_key_fetch;
DROP FUNCTION keyring_key_length_fetch;
DROP FUNCTION keyring_key_type_fetch;
DROP FUNCTION keyring_key_store;
DROP FUNCTION keyring_key_remove;
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-udf-usage"></a>Using General-Purpose Keyring Functions</h5>

                            </div>

                        </div>

                    </div>
                    <a class="indexterm" name="idm140286881890656"></a><p>
                    Before using the keyring user-defined functions (UDFs),
                    install them according to the instructions provided in
                    <a class="xref" href="security.html#keyring-udf-installation" title="Installing or Uninstalling General-Purpose Keyring Functions">Installing or Uninstalling General-Purpose Keyring Functions</a>.
                </p><p style="color:blue;">在使用keyring用户定义函数（udf）之前，请按照安装或卸载通用keyring函数中提供的说明进行安装。</p><p>
                    The keyring UDFs are subject to these constraints:
                </p><p style="color:blue;">keyring udf受以下约束：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            To use any keyring UDF, the <code class="literal">keyring_udf</code>
                            plugin must be enabled. Otherwise, an error occurs:
                        </p><p style="color:blue;">要使用任何keyring udf，必须启用keyring udf插件。否则，将发生错误：</p><pre data-lang="none" class="programlisting">ERROR 1123 (HY000): Can't initialize function 'keyring_key_generate';
This function requires keyring_udf plugin which is not installed.
Please install
</pre><p>
                            To install the <code class="literal">keyring_udf</code> plugin, see
                            <a class="xref" href="security.html#keyring-udf-installation" title="Installing or Uninstalling General-Purpose Keyring Functions">Installing or Uninstalling General-Purpose Keyring Functions</a>.
                        </p><p style="color:blue;">要安装keyring_udf插件，请参阅安装或卸载通用keyring函数。</p></li><li class="listitem"><p>
                            The keyring UDFs invoke keyring service functions (see
                            <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>). The service functions
                            in turn use whatever keyring plugin is installed (for
                            example, <code class="literal">keyring_file</code> or
                            <code class="literal">keyring_okv</code>). Therefore, to use any
                            keyring UDF, some underlying keyring plugin must be
                            enabled. Otherwise, an error occurs:
                        </p><p style="color:blue;">keyring udf调用keyring服务函数（参见第28.3.2节“keyring服务”）。服务函数依次使用安装的任何keyring插件（例如keyring_file或keyring_okv）。因此，要使用任何keyring udf，必须启用一些底层keyring插件。否则，将发生错误：</p><pre data-lang="none" class="programlisting">ERROR 3188 (HY000): Function 'keyring_key_generate' failed because
underlying keyring service returned an error. Please check if a
keyring plugin is installed and that provided arguments are valid
for the keyring you are using.
</pre><p>
                            To install a keyring plugin, see
                            <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>.
                        </p><p style="color:blue;">要安装keyring插件，请参阅第6.4.4.1节“keyring插件安装”。</p></li><li class="listitem"><p>
                            To use any keyring UDF, a user must possess the global
                            <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege.
                            Otherwise, an error occurs:
                        </p><p style="color:blue;">要使用任何keyring udf，用户必须拥有全局执行权限。否则，将发生错误：</p><pre data-lang="none" class="programlisting">ERROR 1123 (HY000): Can't initialize function 'keyring_key_generate';
The user is not privileged to execute this function. User needs to
have EXECUTE
</pre><p>
                            To grant the global <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a>
                            privilege to a user, use this statement:
                        </p><p style="color:blue;">要向用户授予全局执行权限，请使用以下语句：</p><pre data-lang="sql" class="programlisting">GRANT EXECUTE ON *.* TO <em class="replaceable"><code>user</code></em>;
</pre><p>
                            Alternatively, should you prefer to avoid granting the
                            global <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege
                            while still permitting users to access specific
                            key-management operations, <span class="quote">“<span class="quote">wrapper</span>”</span> stored
                            programs can be defined (a technique described later in
                            this section).
                        </p><p style="color:blue;">或者，如果您希望避免授予全局执行权限，同时仍然允许用户访问特定的密钥管理操作，则可以定义“包装器”存储程序（本节后面将介绍这一技术）。</p></li><li class="listitem"><p>
                            A key stored in the keyring by a given user can be
                            manipulated later only by the same user. That is, the
                            value of the <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>
                            function at the time of key manipulation must have the
                            same value as when the key was stored in the keyring.
                            (This constraint rules out the use of the keyring UDFs for
                            manipulation of instance-wide keys, such as those created
                            by <code class="literal">InnoDB</code> to support tablespace
                            encryption.)
                        </p><p style="color:blue;">给定用户存储在密钥环中的密钥稍后只能由同一用户操作。也就是说，当前用户（）函数在操作密钥时的值必须与密钥存储在keyring中时的值相同。（这个约束排除了使用keyring udf来操作实例范围的密钥，比如innodb创建的支持表空间加密的密钥。）</p><p>
                            To enable multiple users to perform operations on the same
                            key, <span class="quote">“<span class="quote">wrapper</span>”</span> stored programs can be defined
                            (a technique described later in this section).
                        </p><p style="color:blue;">为了使多个用户能够对同一个密钥执行操作，可以定义“包装器”存储程序（本节后面将介绍这一技术）。</p></li><li class="listitem"><p>
                            Keyring UDFs support the key types and lengths supported
                            by the underlying keyring plugin. For information about
                            keys specific to a particular keyring plugin, see
                            <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
                        </p><p style="color:blue;">keyring udf支持底层keyring插件支持的键类型和长度。有关特定keyring插件特定密钥的信息，请参阅第6.4.4.7节“支持的keyring密钥类型和长度”。</p></li></ul>
                    </div>
                    <p>
                        To create a new random key and store it in the keyring, call
                        <a class="link" href="security.html#udf_keyring-key-generate"><code class="literal">keyring_key_generate()</code></a>, passing
                        to it an ID for the key, along with the key type (encryption
                        method) and its length in bytes. The following call creates a
                        2,048-bit DSA-encrypted key named <code class="literal">MyKey</code>:
                    </p><p style="color:blue;">要创建新的随机密钥并将其存储在keyring中，请调用keyring_key_generate（），向其传递密钥的ID以及密钥类型（加密方法）和长度（字节）。以下调用创建名为mykey的2048位dsa加密密钥：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('MyKey', 'DSA', 256);</code></strong>
+-------------------------------------------+
| keyring_key_generate('MyKey', 'DSA', 256) |
+-------------------------------------------+
|                                         1 |
+-------------------------------------------+
</pre><p>
                    A return value of 1 indicates success. If the key cannot be
                    created, the return value is <code class="literal">NULL</code> and an
                    error occurs. One reason this might be is that the underlying
                    keyring plugin does not support the specified combination of
                    key type and key length; see
                    <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
                </p><p style="color:blue;">返回值1表示成功。如果无法创建密钥，则返回值为空并发生错误。这可能是因为底层的keyring插件不支持指定的键类型和键长度组合；请参阅第6.4.4.7节“支持的keyring键类型和长度”。</p><p>
                    To be able to check the return type regardless of whether an
                    error occurs, use <code class="literal">SELECT ... INTO
                    @<em class="replaceable"><code>var_name</code></em></code> and test the
                    variable value:
                </p><p style="color:blue;">要能够检查返回类型而不管是否发生错误，请使用select…输入@var_name并测试变量值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('', '', -1) INTO @x;</code></strong>
ERROR 3188 (HY000): Function 'keyring_key_generate' failed because
underlying keyring service returned an error. Please check if a
keyring plugin is installed and that provided arguments are valid
for the keyring you are using.
mysql&gt; <strong class="userinput"><code>SELECT @x;</code></strong>
+------+
| @x   |
+------+
| NULL |
+------+
mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('x', 'AES', 16) INTO @x;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @x;</code></strong>
+------+
| @x   |
+------+
|    1 |
+------+
</pre><p>
                    This technique also applies to other keyring UDFs that for
                    failure return a value and an error.
                </p><p style="color:blue;">此技术还适用于其他密钥环udf，这些udf对于失败将返回一个值和一个错误。</p><p>
                    The ID passed to
                    <a class="link" href="security.html#udf_keyring-key-generate"><code class="literal">keyring_key_generate()</code></a> provides
                    a means by which to refer to the key in subsequent UDF calls.
                    For example, use the key ID to retrieve its type as a string
                    or its length in bytes as an integer:
                </p><p style="color:blue;">传递给keyring_key_generate（）的id提供了在随后的udf调用中引用密钥的方法。例如，使用键id将其类型检索为字符串，或将其长度（以字节为单位）检索为整数：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_type_fetch('MyKey');</code></strong>
+---------------------------------+
| keyring_key_type_fetch('MyKey') |
+---------------------------------+
| DSA                             |
+---------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT keyring_key_length_fetch('MyKey');</code></strong>
+-----------------------------------+
| keyring_key_length_fetch('MyKey') |
+-----------------------------------+
|                               256 |
+-----------------------------------+
</pre><p>
                    To retrieve a key value, pass the key ID to
                    <a class="link" href="security.html#udf_keyring-key-fetch"><code class="literal">keyring_key_fetch()</code></a>. The
                    following example uses <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a> to
                    display the key value because it may contain nonprintable
                    characters. The example also uses a short key for brevity, but
                    be aware that longer keys provide better security:
                </p><p style="color:blue;">要检索密钥值，请将密钥ID传递给keyring_key_fetch（）。下面的示例使用hex（）显示键值，因为它可能包含不可打印的字符。该示例还使用短密钥来简化，但请注意，较长的密钥提供更好的安全性：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('MyShortKey', 'DSA', 8);</code></strong>
+----------------------------------------------+
| keyring_key_generate('MyShortKey', 'DSA', 8) |
+----------------------------------------------+
|                                            1 |
+----------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(keyring_key_fetch('MyShortKey'));</code></strong>
+--------------------------------------+
| HEX(keyring_key_fetch('MyShortKey')) |
+--------------------------------------+
| 1DB3B0FC3328A24C                     |
+--------------------------------------+
</pre><p>
                    Keyring UDFs treat key IDs, types, and values as binary
                    strings, so comparisons are case-sensitive. For example, IDs
                    of <code class="literal">MyKey</code> and <code class="literal">mykey</code> refer
                    to different keys.
                </p><p style="color:blue;">keyring udf将键id、类型和值视为二进制字符串，因此比较区分大小写。例如，mykey和mykey的id引用不同的键。</p><p>
                    To remove a key, pass the key ID to
                    <a class="link" href="security.html#udf_keyring-key-remove"><code class="literal">keyring_key_remove()</code></a>:
                </p><p style="color:blue;">要移除密钥，请将密钥ID传递给keyring_key_remove（）：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_remove('MyKey');</code></strong>
+-----------------------------+
| keyring_key_remove('MyKey') |
+-----------------------------+
|                           1 |
+-----------------------------+
</pre><p>
                    To obfuscate and store a key that you provide, pass the key
                    ID, type, and value to
                    <a class="link" href="security.html#udf_keyring-key-store"><code class="literal">keyring_key_store()</code></a>:
                </p><p style="color:blue;">要混淆并存储您提供的密钥，请将密钥ID、类型和值传递给keyring_key_store（）：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_store('AES_key', 'AES', 'Secret string');</code></strong>
+------------------------------------------------------+
| keyring_key_store('AES_key', 'AES', 'Secret string') |
+------------------------------------------------------+
|                                                    1 |
+------------------------------------------------------+
</pre><p>
                    As indicated previously, a user must have the global
                    <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege to call
                    keyring UDFs, and the user who stores a key in the keyring
                    initially must be the same user who performs subsequent
                    operations on the key later, as determined from the
                    <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> value in effect
                    for each UDF call. To permit key operations to users who do
                    not have the global <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a>
                    privilege or who may not be the key <span class="quote">“<span class="quote">owner,</span>”</span> use
                    this technique:
                </p><p style="color:blue;">如前所述，用户必须具有调用keyring udf的全局执行权限，并且最初在keyring中存储密钥的用户必须是稍后对密钥执行后续操作的同一用户，这取决于每个udf调用的当前有效的_user（）值。要允许对不具有全局执行权限或可能不是密钥“所有者”的用户执行密钥操作，请使用以下技术：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            Define <span class="quote">“<span class="quote">wrapper</span>”</span> stored programs that
                            encapsulate the required key operations and have a
                            <code class="literal">DEFINER</code> value equal to the key owner.
                        </p><p style="color:blue;">定义“包装器”存储程序，该程序封装所需的密钥操作，并具有等于密钥所有者的定义器值。</p></li><li class="listitem"><p>
                            Grant the <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege
                            for specific stored programs to the individual users who
                            should be able to invoke them.
                        </p><p style="color:blue;">将特定存储程序的执行权限授予应该能够调用它们的各个用户。</p></li><li class="listitem"><p>
                            If the operations implemented by the wrapper stored
                            programs do not include key creation, create any necessary
                            keys in advance, using the account named as the
                            <code class="literal">DEFINER</code> in the stored program
                            definitions.
                        </p><p style="color:blue;">如果包装器存储程序实现的操作不包括密钥创建，请使用存储程序定义中名为definer的帐户预先创建任何必要的密钥。</p></li></ol>
                    </div>
                    <p>
                        This technique enables keys to be shared among users and
                        provides to DBAs more fine-grained control over who can do
                        what with keys, without having to grant global privileges.
                    </p><p style="color:blue;">此技术允许在用户之间共享密钥，并为dba提供了更细粒度的控制，使其能够在不授予全局权限的情况下使用密钥执行操作。</p><p>
                    The following example shows how to set up a shared key named
                    <code class="literal">SharedKey</code> that is owned by the DBA, and a
                    <code class="literal">get_shared_key()</code> stored function that
                    provides access to the current key value. The value can be
                    retrieved by any user with the
                    <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege for that
                    function, which is created in the
                    <code class="literal">key_schema</code> schema.
                </p><p style="color:blue;">下面的示例演示如何设置dba拥有的名为shared key的共享密钥，以及提供对当前密钥值的访问的get_shared_key（）存储函数。任何具有该函数执行权限的用户都可以检索该值，该权限是在密钥架构架构中创建的。</p><p>
                    From a MySQL administrative account
                    (<code class="literal">'root'@'localhost'</code> in this example),
                    create the administrative schema and the stored function to
                    access the key:
                </p><p style="color:blue;">从MySQL管理帐户（'root'@'localhost'在本例中），创建管理架构和存储函数以访问密钥：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE SCHEMA key_schema;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE DEFINER = 'root'@'localhost'</code></strong>
       <strong class="userinput"><code>FUNCTION key_schema.get_shared_key()</code></strong>
       <strong class="userinput"><code>RETURNS BLOB READS SQL DATA</code></strong>
       <strong class="userinput"><code>RETURN keyring_key_fetch('SharedKey');</code></strong>
</pre><p>
                    From the administrative account, ensure that the shared key
                    exists:
                </p><p style="color:blue;">从管理帐户中，确保共享密钥存在：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('SharedKey', 'DSA', 8);</code></strong>
+---------------------------------------------+
| keyring_key_generate('SharedKey', 'DSA', 8) |
+---------------------------------------------+
|                                           1 |
+---------------------------------------------+
</pre><p>
                    From the administrative account, create an ordinary user
                    account to which key access is to be granted:
                </p><p style="color:blue;">从管理帐户中，创建一个普通用户帐户，向其授予密钥访问权限：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE USER 'key_user'@'localhost'</code></strong>
       <strong class="userinput"><code>IDENTIFIED BY 'key_user_pwd';</code></strong>
</pre><p>
                    From the <code class="literal">key_user</code> account, verify that,
                    without the proper <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a>
                    privilege, the new account cannot access the shared key:
                </p><p style="color:blue;">从密钥用户帐户，验证没有正确的执行权限，新帐户无法访问共享密钥：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(key_schema.get_shared_key());</code></strong>
ERROR 1370 (42000): execute command denied to user 'key_user'@'localhost'
for routine 'key_schema.get_shared_key'
</pre><p>
                    From the administrative account, grant
                    <a class="link" href="security.html#priv_execute"><code class="literal">EXECUTE</code></a> to
                    <code class="literal">key_user</code> for the stored function:
                </p><p style="color:blue;">从管理帐户中，将执行授予存储函数的密钥用户：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>GRANT EXECUTE ON FUNCTION key_schema.get_shared_key</code></strong>
       <strong class="userinput"><code>TO 'key_user'@'localhost';</code></strong>
</pre><p>
                    From the <code class="literal">key_user</code> account, verify that the
                    key is now accessible:
                </p><p style="color:blue;">从密钥用户帐户，验证密钥现在是否可访问：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(key_schema.get_shared_key());</code></strong>
+----------------------------------+
| HEX(key_schema.get_shared_key()) |
+----------------------------------+
| 9BAFB9E75CEEB013                 |
+----------------------------------+
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="keyring-udf-reference"></a>General-Purpose Keyring Function Reference</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        For each general-purpose keyring user-defined function (UDF),
                        this section describes its purpose, calling sequence, and
                        return value. For information about the conditions under which
                        these UDFs can be invoked, see
                        <a class="xref" href="security.html#keyring-udf-usage" title="Using General-Purpose Keyring Functions">Using General-Purpose Keyring Functions</a>.
                    </p><p style="color:blue;">对于每个通用keyring用户定义函数（udf），本节描述其用途、调用序列和返回值。有关调用这些udf的条件的信息，请参阅使用通用keyring函数。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="udf_keyring-key-fetch"></a>
                            <a class="link" href="security.html#udf_keyring-key-fetch"><code class="literal">keyring_key_fetch(<em class="replaceable"><code>key_id</code></em>)</code></a>
                        </p><p style="color:blue;">密钥环获取（密钥ID）</p><a class="indexterm" name="idm140286881782784"></a><a class="indexterm" name="idm140286881781696"></a><p>
                            Given a key ID, deobfuscates and returns the key value.
                        </p><p style="color:blue;">给定一个密钥ID，则除掉并返回密钥值。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>key_id</code></em>: A string that
                                    specifies the key ID.
                                </p><p style="color:blue;">key_id：指定密钥id的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                Returns the key value as a string for success,
                                <code class="literal">NULL</code> if the key does not exist, or
                                <code class="literal">NULL</code> and an error for failure.
                            </p><p style="color:blue;">返回关键字值作为成功的字符串，如果不存在键，NULL为NULL，NULL为失败，错误为错误。</p>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    Key values retrieved using
                                    <a class="link" href="security.html#udf_keyring-key-fetch"><code class="literal">keyring_key_fetch()</code></a> are
                                    subject to the general keyring UDF limits described in
                                    <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>. A key value longer
                                    than that length can be stored using a keyring service
                                    function (see <a class="xref" href="extending-mysql.html#keyring-service" title="28.3.2&nbsp;The Keyring Service">Section&nbsp;28.3.2, “The Keyring Service”</a>), but if
                                    retrieved using
                                    <a class="link" href="security.html#udf_keyring-key-fetch"><code class="literal">keyring_key_fetch()</code></a> is
                                    truncated to the general keyring UDF limit.
                                </p><p style="color:blue;">使用keyring_key_fetch（）检索的键值受第6.4.4.7节“支持的keyring键类型和长度”中描述的常规keyring udf限制的约束。超过该长度的键值可以使用keyring服务函数存储（请参见第28.3.2节“keyring服务”），但如果使用keyring-key-fetch（）检索，则会截断为常规keyring udf限制。</p>
                            </div>
                            <p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('RSA_key', 'RSA', 16);</code></strong>
+--------------------------------------------+
| keyring_key_generate('RSA_key', 'RSA', 16) |
+--------------------------------------------+
|                                          1 |
+--------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(keyring_key_fetch('RSA_key'));</code></strong>
+-----------------------------------+
| HEX(keyring_key_fetch('RSA_key')) |
+-----------------------------------+
| 91C2253B696064D3556984B6630F891A  |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT keyring_key_type_fetch('RSA_key');</code></strong>
+-----------------------------------+
| keyring_key_type_fetch('RSA_key') |
+-----------------------------------+
| RSA                               |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT keyring_key_length_fetch('RSA_key');</code></strong>
+-------------------------------------+
| keyring_key_length_fetch('RSA_key') |
+-------------------------------------+
|                                  16 |
+-------------------------------------+
</pre><p>
                                The example uses <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a> to
                                display the key value because it may contain nonprintable
                                characters. The example also uses a short key for brevity,
                                but be aware that longer keys provide better security.
                            </p><p style="color:blue;">该示例使用hex（）显示键值，因为它可能包含不可打印的字符。该示例还使用了一个简短的密钥，但请注意，较长的密钥提供了更好的安全性。</p></li><li class="listitem"><p><a name="udf_keyring-key-generate"></a>
                            <a class="link" href="security.html#udf_keyring-key-generate"><code class="literal">keyring_key_generate(<em class="replaceable"><code>key_id</code></em>,
                                <em class="replaceable"><code>key_type</code></em>,
                                <em class="replaceable"><code>key_length</code></em>)</code></a>
                        </p><p style="color:blue;">密钥环生成（密钥ID、密钥类型、密钥长度）</p><a class="indexterm" name="idm140286881758768"></a><a class="indexterm" name="idm140286881757728"></a><p>
                            Generates a new random key with a given ID, type, and
                            length, and stores it in the keyring. The type and length
                            values must be consistent with the values supported by the
                            underlying keyring plugin. See
                            <a class="xref" href="security.html#keyring-key-types" title="6.4.4.7&nbsp;Supported Keyring Key Types and Lengths">Section&nbsp;6.4.4.7, “Supported Keyring Key Types and Lengths”</a>.
                        </p><p style="color:blue;">生成具有给定ID、类型和长度的新随机密钥，并将其存储在keyring中。类型和长度值必须与基础keyring插件支持的值一致。见第6.4.4.7节，“支撑键环键类型和长度”。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>key_id</code></em>: A string that
                                    specifies the key ID.
                                </p><p style="color:blue;">key_id：指定密钥id的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>key_type</code></em>: A string that
                                    specifies the key type.
                                </p><p style="color:blue;">键类型：指定键类型的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>key_length</code></em>: An integer that
                                    specifies the key length in bytes.
                                </p><p style="color:blue;">密钥长度：以字节为单位指定密钥长度的整数。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                Returns 1 for success, or <code class="literal">NULL</code> and an
                                error for failure.
                            </p><p style="color:blue;">如果成功，则返回1；如果失败，则返回null和错误。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_generate('RSA_key', 'RSA', 384);</code></strong>
+---------------------------------------------+
| keyring_key_generate('RSA_key', 'RSA', 384) |
+---------------------------------------------+
|                                           1 |
+---------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_keyring-key-length-fetch"></a>
                            <a class="link" href="security.html#udf_keyring-key-length-fetch"><code class="literal">keyring_key_length_fetch(<em class="replaceable"><code>key_id</code></em>)</code></a>
                        </p><p style="color:blue;">密钥环密钥长度获取（密钥ID）</p><a class="indexterm" name="idm140286881743184"></a><a class="indexterm" name="idm140286881742096"></a><p>
                            Given a key ID, returns the key length.
                        </p><p style="color:blue;">给定密钥ID，返回密钥长度。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>key_id</code></em>: A string that
                                    specifies the key ID.
                                </p><p style="color:blue;">key_id：指定密钥id的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                Returns the key length in bytes as an integer for success,
                                <code class="literal">NULL</code> if the key does not exist, or
                                <code class="literal">NULL</code> and an error for failure.
                            </p><p style="color:blue;">以字节为单位返回密钥长度作为成功的整数，如果密钥不存在，NULL为NULL，NULL和失败的错误。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><p>
                                See the description of
                                <a class="link" href="security.html#udf_keyring-key-fetch"><code class="literal">keyring_key_fetch()</code></a>.
                            </p><p style="color:blue;">请参见keyring_key_fetch（）的说明。</p></li><li class="listitem"><p><a name="udf_keyring-key-remove"></a>
                            <a class="link" href="security.html#udf_keyring-key-remove"><code class="literal">keyring_key_remove(<em class="replaceable"><code>key_id</code></em>)</code></a>
                        </p><p style="color:blue;">钥匙圈取出（钥匙ID）</p><a class="indexterm" name="idm140286881730672"></a><a class="indexterm" name="idm140286881729584"></a><p>
                            Removes the key with a given ID from the keyring.
                        </p><p style="color:blue;">从密钥环中移除具有给定ID的密钥。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>key_id</code></em>: A string that
                                    specifies the key ID.
                                </p><p style="color:blue;">key_id：指定密钥id的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                Returns 1 for success, or <code class="literal">NULL</code> for
                                failure.
                            </p><p style="color:blue;">返回1表示成功，或返回null表示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_remove('AES_key');</code></strong>
+-------------------------------+
| keyring_key_remove('AES_key') |
+-------------------------------+
|                             1 |
+-------------------------------+
</pre></li><li class="listitem"><p><a name="udf_keyring-key-store"></a>
                            <a class="link" href="security.html#udf_keyring-key-store"><code class="literal">keyring_key_store(<em class="replaceable"><code>key_id</code></em>,
                                <em class="replaceable"><code>key_type</code></em>,
                                <em class="replaceable"><code>key</code></em>)</code></a>
                        </p><p style="color:blue;">密钥存储（密钥ID、密钥类型、密钥）</p><a class="indexterm" name="idm140286881717936"></a><a class="indexterm" name="idm140286881716848"></a><p>
                            Obfuscates and stores a key in the keyring.
                        </p><p style="color:blue;">在钥匙圈中混淆并存储钥匙。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>key_id</code></em>: A string that
                                    specifies the key ID.
                                </p><p style="color:blue;">key_id：指定密钥id的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>key_type</code></em>: A string that
                                    specifies the key type.
                                </p><p style="color:blue;">键类型：指定键类型的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>key</code></em>: A string that
                                    specifies the key value.
                                </p><p style="color:blue;">key：指定键值的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                Returns 1 for success, or <code class="literal">NULL</code> and an
                                error for failure.
                            </p><p style="color:blue;">如果成功，则返回1；如果失败，则返回null和错误。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT keyring_key_store('new key', 'DSA', 'My key value');</code></strong>
+-----------------------------------------------------+
| keyring_key_store('new key', 'DSA', 'My key value') |
+-----------------------------------------------------+
|                                                   1 |
+-----------------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_keyring-key-type-fetch"></a>
                            <a class="link" href="security.html#udf_keyring-key-type-fetch"><code class="literal">keyring_key_type_fetch(<em class="replaceable"><code>key_id</code></em>)</code></a>
                        </p><p style="color:blue;">keyring_key_type_fetch（密钥ID）</p><a class="indexterm" name="idm140286881703120"></a><a class="indexterm" name="idm140286881702080"></a><p>
                            Given a key ID, returns the key type.
                        </p><p style="color:blue;">给定密钥ID，返回密钥类型。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>key_id</code></em>: A string that
                                    specifies the key ID.
                                </p><p style="color:blue;">key_id：指定密钥id的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                Returns the key type as a string for success,
                                <code class="literal">NULL</code> if the key does not exist, or
                                <code class="literal">NULL</code> and an error for failure.
                            </p><p style="color:blue;">将键类型返回为成功字符串，如果不存在键，NULL为NULL，NULL为失败，错误为错误。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><p>
                                See the description of
                                <a class="link" href="security.html#udf_keyring-key-fetch"><code class="literal">keyring_key_fetch()</code></a>.
                            </p><p style="color:blue;">请参见keyring_key_fetch（）的说明。</p></li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-udfs-plugin-specific"></a>6.4.4.9&nbsp;Plugin-Specific Keyring Key-Management Functions</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286881691824"></a><p>
                For each keyring plugin-specific user-defined function (UDF),
                this section describes its purpose, calling sequence, and return
                value. For information about general-purpose keyring UDFs, see
                <a class="xref" href="security.html#keyring-udfs-general-purpose" title="6.4.4.8&nbsp;General-Purpose Keyring Key-Management Functions">Section&nbsp;6.4.4.8, “General-Purpose Keyring Key-Management Functions”</a>.
            </p><p style="color:blue;">对于每个keyring插件特定的用户定义函数（udf），本节描述其用途、调用顺序和返回值。有关通用密钥环UDF的信息，请参阅第6.4.4.8节“通用密钥环密钥管理功能”。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="udf_keyring-aws-rotate-cmk"></a>
                        <a class="link" href="security.html#udf_keyring-aws-rotate-cmk"><code class="literal">keyring_aws_rotate_cmk()</code></a>
                    </p><p style="color:blue;">键环旋转</p><a class="indexterm" name="idm140286881686448"></a><a class="indexterm" name="idm140286881685344"></a><p>
                        Associated keyring plugin: <code class="literal">keyring_aws</code>
                    </p><p style="color:blue;">关联的keyring插件：keyring_aws</p><p>
                        <a class="link" href="security.html#udf_keyring-aws-rotate-cmk"><code class="literal">keyring_aws_rotate_cmk()</code></a>
                        rotates the customer master key (CMK). Rotation changes only
                        the key that AWS KMS uses for subsequent data key-encryption
                        operations. AWS KMS maintains previous CMK versions, so keys
                        generated using previous CMKs remain decryptable after
                        rotation.
                    </p><p style="color:blue;">keyring_aws_rotate_cmk（）旋转客户主密钥（cmk）。旋转仅更改aws kms用于后续数据密钥加密操作的密钥。aws-kms维护以前的cmk版本，因此使用以前的cmk生成的密钥在旋转之后仍然可以解密。</p><p>
                        Rotation changes the CMK value used inside AWS KMS but does
                        not change the ID used to refer to it, so there is no need
                        to change the
                        <a class="link" href="security.html#sysvar_keyring_aws_cmk_id"><code class="literal">keyring_aws_cmk_id</code></a> system
                        variable after calling
                        <a class="link" href="security.html#udf_keyring-aws-rotate-cmk"><code class="literal">keyring_aws_rotate_cmk()</code></a>.
                    </p><p style="color:blue;">旋转会更改AWS KMS中使用的CMK值，但不会更改用于引用该值的ID，因此在调用keyring_aws_rotate_cmk（）之后，无需更改keyring_aws_cmk_id系统变量。</p><p>
                        This UDF requires the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
                        privilege.
                    </p><p style="color:blue;">这个自定义项需要超级特权。</p><p>
                        Arguments:
                    </p><p style="color:blue;">论据：</p><p>
                        None.
                    </p><p style="color:blue;">没有。</p><p>
                        Return value:
                    </p><p style="color:blue;">返回值：</p><p>
                        Returns 1 for success, or <code class="literal">NULL</code> and an
                        error for failure.
                    </p><p style="color:blue;">如果成功，则返回1；如果失败，则返回null和错误。</p></li><li class="listitem"><p><a name="udf_keyring-aws-rotate-keys"></a>
                        <a class="link" href="security.html#udf_keyring-aws-rotate-keys"><code class="literal">keyring_aws_rotate_keys()</code></a>
                    </p><p style="color:blue;">钥匙圈旋转钥匙（）</p><a class="indexterm" name="idm140286881671008"></a><a class="indexterm" name="idm140286881669904"></a><p>
                        Associated keyring plugin: <code class="literal">keyring_aws</code>
                    </p><p style="color:blue;">关联的keyring插件：keyring_aws</p><p>
                        <a class="link" href="security.html#udf_keyring-aws-rotate-keys"><code class="literal">keyring_aws_rotate_keys()</code></a>
                        rotates keys stored in the <code class="literal">keyring_aws</code>
                        storage file named by the
                        <a class="link" href="security.html#sysvar_keyring_aws_data_file"><code class="literal">keyring_aws_data_file</code></a>
                        system variable. Rotation sends each key stored in the file
                        to AWS KMS for re-encryption using the value of the
                        <a class="link" href="security.html#sysvar_keyring_aws_cmk_id"><code class="literal">keyring_aws_cmk_id</code></a> system
                        variable as the CMK value, and stores the new encrypted keys
                        in the file.
                    </p><p style="color:blue;">keyring_aws_rotate_keys（）旋转由keyring_aws_data_文件系统变量命名的keyring_aws存储文件中存储的键。旋转将文件中存储的每个密钥发送到aws kms，以使用keyring_aws_cmk_id系统变量的值作为cmk值进行重新加密，并将新的加密密钥存储在文件中。</p><p>
                        <a class="link" href="security.html#udf_keyring-aws-rotate-keys"><code class="literal">keyring_aws_rotate_keys()</code></a> is
                        useful for key re-encryption under these circumstances:
                    </p><p style="color:blue;">在以下情况下，keyring_aws_rotate_keys（）可用于密钥重新加密：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                After rotating the CMK; that is, after invoking the
                                <a class="link" href="security.html#udf_keyring-aws-rotate-cmk"><code class="literal">keyring_aws_rotate_cmk()</code></a>
                                UDF
                            </p><p style="color:blue;">在旋转cmk之后；也就是说，在调用keyring_aws_rotate_cmk（）udf之后</p></li><li class="listitem"><p>
                                After changing the
                                <a class="link" href="security.html#sysvar_keyring_aws_cmk_id"><code class="literal">keyring_aws_cmk_id</code></a>
                                system variable to a different key value
                            </p><p style="color:blue;">将keyring_aws_cmk_id系统变量更改为其他键值后</p></li></ul>
                        </div>
                        <p>
                            This UDF requires the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
                            privilege.
                        </p><p style="color:blue;">这个自定义项需要超级特权。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">没有。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            Returns 1 for success, or <code class="literal">NULL</code> and an
                            error for failure.
                        </p><p style="color:blue;">如果成功，则返回1；如果失败，则返回null和错误。</p></li></ul>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-options"></a>6.4.4.10&nbsp;Keyring Command Options</h4>

                        </div>

                    </div>

                </div>
                <p>
                    MySQL supports the following keyring-related command-line
                    options:
                </p><p style="color:blue;">mysql支持以下与keyring相关的命令行选项：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_keyring-migration-destination"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-destination"><code class="option">--keyring-migration-destination=<em class="replaceable"><code>plugin</code></em></code></a>
                    </p><p style="color:blue;">--keyring migration destination=插件</p><a class="indexterm" name="idm140286881646736"></a><a class="indexterm" name="idm140286881645232"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-destination"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-destination=plugin_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The destination keyring plugin for key migration. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>. The format and
                            interpretation of the option value is the same as described
                            for the
                            <a class="link" href="security.html#option_mysqld_keyring-migration-source"><code class="option">--keyring-migration-source</code></a>
                            option.
                        </p><p style="color:blue;">用于密钥迁移的目标密钥环插件。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。选项值的格式和解释与--keyring迁移源选项的描述相同。</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-source"><code class="option">--keyring-migration-source</code></a>
                                and
                                <a class="link" href="security.html#option_mysqld_keyring-migration-destination"><code class="option">--keyring-migration-destination</code></a>
                                are mandatory for all keyring migration operations. The
                                source and destination plugins must differ, and the
                                migration server must support both plugins.
                            </p><p style="color:blue;">--keyring迁移源和--keyring迁移目标对于所有keyring迁移操作都是必需的。源插件和目标插件必须不同，迁移服务器必须同时支持这两个插件。</p>
                        </div>
                    </li><li class="listitem"><p><a name="option_mysqld_keyring-migration-host"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-host"><code class="option">--keyring-migration-host=<em class="replaceable"><code>host_name</code></em></code></a>
                    </p><p style="color:blue;">--keyring migration host=主机名</p><a class="indexterm" name="idm140286881621552"></a><a class="indexterm" name="idm140286881620048"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-host"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-host=host_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">localhost</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The host location of the running server that is currently
                            using one of the key migration keystores. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>. Migration always
                            occurs on the local host, so the option always specifies a
                            value for connecting to a local server, such as
                            <code class="literal">localhost</code>, <code class="literal">127.0.0.1</code>,
                            <code class="literal">::1</code>, or the local host IP address or host
                            name.
                        </p><p style="color:blue;">当前正在使用某个密钥迁移密钥库的运行服务器的主机位置。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。迁移始终发生在本地主机上，因此该选项始终指定用于连接到本地服务器的值，例如local host、127.0.0.1、：：1或本地主机IP地址或主机名。</p></li><li class="listitem"><p><a name="option_mysqld_keyring-migration-password"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-password"><code class="option">--keyring-migration-password[=<em class="replaceable"><code>password</code></em>]</code></a>
                    </p><p style="color:blue;">--密钥环迁移密码[=密码]</p><a class="indexterm" name="idm140286881594800"></a><a class="indexterm" name="idm140286881593296"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-password"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-password[=password]</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The password for connecting to the running server that is
                            currently using one of the key migration keystores. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>. If you omit the
                            <em class="replaceable"><code>password</code></em> value following the
                            option name on the command line, the server prompts for one.
                        </p><p style="color:blue;">用于连接到当前正在使用密钥迁移密钥库之一的正在运行的服务器的密码。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。如果在命令行中省略选项名称后面的密码值，服务器将提示您输入密码。</p><p>
                            Specifying a password on the command line should be
                            considered insecure. See
                            <a class="xref" href="security.html#password-security-user" title="6.1.2.1&nbsp;End-User Guidelines for Password Security">Section&nbsp;6.1.2.1, “End-User Guidelines for Password Security”</a>. You can use an
                            option file to avoid giving the password on the command
                            line. In this case, the file should have a restrictive mode
                            and be accessible only to the account used to run the
                            migration server.
                        </p><p style="color:blue;">在命令行上指定密码应该被认为是不安全的。见第6.1.2.1节，“密码安全的最终用户指南”。可以使用选项文件来避免在命令行上提供密码。在这种情况下，该文件应具有限制模式，并且只能由用于运行迁移服务器的帐户访问。</p></li><li class="listitem"><p><a name="option_mysqld_keyring-migration-port"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-port"><code class="option">--keyring-migration-port=<em class="replaceable"><code>port_num</code></em></code></a>
                    </p><p style="color:blue;">--keyring migration port=端口号</p><a class="indexterm" name="idm140286881571744"></a><a class="indexterm" name="idm140286881570240"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-port"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-port=port_num</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Numeric</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">3306</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For TCP/IP connections, the port number for connecting to
                            the running server that is currently using one of the key
                            migration keystores. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>.
                        </p><p style="color:blue;">对于TCP/IP连接，连接到当前正在使用密钥迁移密钥库之一的正在运行的服务器的端口号。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。</p></li><li class="listitem"><p><a name="option_mysqld_keyring-migration-socket"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-socket"><code class="option">--keyring-migration-socket=<em class="replaceable"><code>path</code></em></code></a>
                    </p><p style="color:blue;">--keyring migration socket=路径</p><a class="indexterm" name="idm140286881547488"></a><a class="indexterm" name="idm140286881545984"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-socket"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-socket={file_name|pipe_name}</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            For Unix socket file or Windows named pipe connections, the
                            socket file or named pipe for connecting to the running
                            server that is currently using one of the key migration
                            keystores. See <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>.
                        </p><p style="color:blue;">对于Unix套接字文件或Windows命名管道连接，用于连接到当前使用密钥迁移密钥库之一的正在运行的服务器的套接字文件或命名管道。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。</p></li><li class="listitem"><p><a name="option_mysqld_keyring-migration-source"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-source"><code class="option">--keyring-migration-source=<em class="replaceable"><code>plugin</code></em></code></a>
                    </p><p style="color:blue;">--keyring migration source=插件</p><a class="indexterm" name="idm140286881526320"></a><a class="indexterm" name="idm140286881524816"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-source"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-source=plugin_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The source keyring plugin for key migration. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>.
                        </p><p style="color:blue;">用于密钥迁移的源密钥环插件。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。</p><p>
                            The option value is similar to that for
                            <a class="link" href="server-administration.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a>, except that
                            only one plugin library can be specified. The value is given
                            as
                            <em class="replaceable"><code>name</code></em><code class="literal">=</code><em class="replaceable"><code>plugin_library</code></em>
                            or <em class="replaceable"><code>plugin_library</code></em>. The
                            <em class="replaceable"><code>name</code></em> is the name of a plugin to
                            load, and <em class="replaceable"><code>plugin_library</code></em> is the
                            name of the library file that contains the plugin code. If
                            the plugin library is named without any preceding plugin
                            name, the server loads all plugins in the library. The
                            server looks for plugin library files in the directory named
                            by the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                            variable.
                        </p><p style="color:blue;">选项值与--plugin load类似，只是只能指定一个插件库。该值被指定为name=plugin_library或plugin_library。名称是要加载的插件的名称，plugin_library是包含插件代码的库文件的名称。如果插件库没有任何前面的插件名，服务器将加载库中的所有插件。服务器在plugin dir系统变量命名的目录中查找插件库文件。</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                <a class="link" href="security.html#option_mysqld_keyring-migration-source"><code class="option">--keyring-migration-source</code></a>
                                and
                                <a class="link" href="security.html#option_mysqld_keyring-migration-destination"><code class="option">--keyring-migration-destination</code></a>
                                are mandatory for all keyring migration operations. The
                                source and destination plugins must differ, and the
                                migration server must support both plugins.
                            </p><p style="color:blue;">--keyring迁移源和--keyring迁移目标对于所有keyring迁移操作都是必需的。源插件和目标插件必须不同，迁移服务器必须同时支持这两个插件。</p>
                        </div>
                    </li><li class="listitem"><p><a name="option_mysqld_keyring-migration-user"></a>
                        <a class="link" href="security.html#option_mysqld_keyring-migration-user"><code class="option">--keyring-migration-user=<em class="replaceable"><code>user_name</code></em></code></a>
                    </p><p style="color:blue;">--keyring migration user=用户名</p><a class="indexterm" name="idm140286881496496"></a><a class="indexterm" name="idm140286881494992"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring-migration-user"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-migration-user=user_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The user name for connecting to the running server that is
                            currently using one of the key migration keystores. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>.
                        </p><p style="color:blue;">用于连接到当前正在使用密钥迁移密钥库之一的正在运行的服务器的用户名。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。</p></li></ul>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="keyring-system-variables"></a>6.4.4.11&nbsp;Keyring System Variables</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286881476384"></a><p>
                MySQL Keyring plugins support the following system variables.
                Use them to configure keyring plugin operation. These variables
                are unavailable unless the appropriate keyring plugin is
                installed (see <a class="xref" href="security.html#keyring-installation" title="6.4.4.1&nbsp;Keyring Plugin Installation">Section&nbsp;6.4.4.1, “Keyring Plugin Installation”</a>).
            </p><p style="color:blue;">mysql keyring插件支持以下系统变量。使用它们来配置keyring插件操作。除非安装了相应的keyring插件，否则这些变量不可用（请参阅第6.4.4.1节“keyring插件安装”）。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_keyring_aws_cmk_id"></a>
                        <a class="indexterm" name="idm140286881472784"></a>

                        <a class="indexterm" name="idm140286881471744"></a>

                        <a class="link" href="security.html#sysvar_keyring_aws_cmk_id"><code class="literal">keyring_aws_cmk_id</code></a>
                    </p><p style="color:blue;">钥匙圈</p>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_aws_cmk_id"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-aws-cmk-id=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_aws_cmk_id">keyring_aws_cmk_id</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The customer master key (CMK) ID obtained from the AWS KMS
                            server and used by the <code class="literal">keyring_aws</code>
                            plugin. This variable is unavailable unless that plugin is
                            installed, but if it is installed, a value for this variable
                            is mandatory.
                        </p><p style="color:blue;">客户主密钥（cmk）id从aws kms服务器获得，并由keyring_aws插件使用。除非安装了插件，否则此变量不可用，但如果安装了插件，则此变量的值是必需的。</p></li><li class="listitem"><p><a name="sysvar_keyring_aws_conf_file"></a>
                        <a class="indexterm" name="idm140286881442976"></a>

                        <a class="indexterm" name="idm140286881441936"></a>

                        <a class="link" href="security.html#sysvar_keyring_aws_conf_file"><code class="literal">keyring_aws_conf_file</code></a>
                    </p><p style="color:blue;">keyring_aws_conf_文件</p>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_aws_conf_file"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-aws-conf-file=file_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_aws_conf_file">keyring_aws_conf_file</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>No</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>File name</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">platform specific</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The location of the configuration file for the
                            <code class="literal">keyring_aws</code> keyring plugin. This variable
                            is unavailable unless that plugin is installed.
                        </p><p style="color:blue;">keyring AWS keyring插件的配置文件的位置。除非安装了插件，否则此变量不可用。</p><p>
                            At plugin startup, <code class="literal">keyring_aws</code> reads the
                            AWS secret access key ID and key from the configuration
                            file. For the <code class="literal">keyring_aws</code> plugin to start
                            successfully, the configuration file must exist and contain
                            valid secret access key information, initialized as
                            described in <a class="xref" href="security.html#keyring-aws-plugin" title="6.4.4.5&nbsp;Using the keyring_aws Amazon Web Services Keyring Plugin">Section&nbsp;6.4.4.5, “Using the keyring_aws Amazon Web Services Keyring Plugin”</a>.
                        </p><p style="color:blue;">在插件启动时，keyring_aws从配置文件中读取aws secret access key id和key。对于成功启动的KirrgIGAWAs插件，配置文件必须存在并包含有效的秘密访问密钥信息，如第4.4.4.5节中所描述的初始化，“使用KyrrgIAWAmazon Web服务密钥环插件”。</p><p>
                            The default file name is
                            <code class="literal">keyring_aws_conf</code>, located in the default
                            keyring file directory. The location of this default
                            directory is the same as for the
                            <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> system
                            variable. See the description of that variable for details,
                            as well as for considerations to take into account if you
                            create the directory manually.
                        </p><p style="color:blue;">默认文件名为keyring_aws_conf，位于默认keyring文件目录中。此默认目录的位置与keyring_file_数据系统变量的位置相同。有关详细信息，以及手动创建目录时要考虑的事项，请参见该变量的说明。</p></li><li class="listitem"><p><a name="sysvar_keyring_aws_data_file"></a>
                        <a class="indexterm" name="idm140286881404640"></a>

                        <a class="indexterm" name="idm140286881403600"></a>

                        <a class="link" href="security.html#sysvar_keyring_aws_data_file"><code class="literal">keyring_aws_data_file</code></a>
                    </p><p style="color:blue;">密钥环aws_data_文件</p>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_aws_data_file"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-aws-data-file</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_aws_data_file">keyring_aws_data_file</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>No</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>File name</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">platform specific</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The location of the storage file for the
                            <code class="literal">keyring_aws</code> keyring plugin. This variable
                            is unavailable unless that plugin is installed.
                        </p><p style="color:blue;">keyring AWS keyring插件的存储文件的位置。除非安装了插件，否则此变量不可用。</p><p>
                            At plugin startup, if the value assigned to
                            <a class="link" href="security.html#sysvar_keyring_aws_data_file"><code class="literal">keyring_aws_data_file</code></a>
                            specifies a file that does not exist, the
                            <code class="literal">keyring_aws</code> plugin attempts to create it
                            (as well as its parent directory, if necessary). If the file
                            does exist, <code class="literal">keyring_aws</code> reads any
                            encrypted keys contained in the file into its in-memory
                            cache. <code class="literal">keyring_aws</code> does not cache
                            unencrypted keys in memory.
                        </p><p style="color:blue;">在插件启动时，如果分配给KirrgInAWSsDATAYfile文件的值指定不存在的文件，则KEYRIGIGAWAWS插件尝试创建它（以及如果需要的话，它的父目录）。如果文件确实存在，KerrgInAWAWS将文件中包含的任何加密密钥读入内存中的缓存中。密钥环aws不会在内存中缓存未加密的密钥。</p><p>
                            The default file name is
                            <code class="literal">keyring_aws_data</code>, located in the default
                            keyring file directory. The location of this default
                            directory is the same as for the
                            <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> system
                            variable. See the description of that variable for details,
                            as well as for considerations to take into account if you
                            create the directory manually.
                        </p><p style="color:blue;">默认文件名为keyring_aws_data，位于默认keyring文件目录中。此默认目录的位置与keyring_file_数据系统变量的位置相同。有关详细信息，以及手动创建目录时要考虑的事项，请参见该变量的说明。</p></li><li class="listitem"><p><a name="sysvar_keyring_aws_region"></a>
                        <a class="link" href="security.html#sysvar_keyring_aws_region"><code class="literal">keyring_aws_region</code></a>
                    </p><p style="color:blue;">锁环区</p><a class="indexterm" name="idm140286881363600"></a><a class="indexterm" name="idm140286881362560"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_aws_region"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-aws-region=value</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.19</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_aws_region">keyring_aws_region</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Enumeration</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">us-east-1</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                <td><p class="valid-value"><code class="literal">ap-northeast-1</code></p><p style="color:blue;">AP-东北-1</p><p class="valid-value"><code class="literal">ap-northeast-2</code></p><p style="color:blue;">AP-东北-2</p><p class="valid-value"><code class="literal">ap-south-1</code></p><p style="color:blue;">AP-南-1</p><p class="valid-value"><code class="literal">ap-southeast-1</code></p><p style="color:blue;">AP-东南-1</p><p class="valid-value"><code class="literal">ap-southeast-2</code></p><p style="color:blue;">AP-东南-2</p><p class="valid-value"><code class="literal">eu-central-1</code></p><p style="color:blue;">欧盟-中央-1</p><p class="valid-value"><code class="literal">eu-west-1</code></p><p style="color:blue;">欧盟-西方-1</p><p class="valid-value"><code class="literal">sa-east-1</code></p><p style="color:blue;">SA-东-1</p><p class="valid-value"><code class="literal">us-east-1</code></p><p style="color:blue;">美国东部-1</p><p class="valid-value"><code class="literal">us-west-1</code></p><p style="color:blue;">美国西部1</p><p class="valid-value"><code class="literal">us-west-2</code></p><p style="color:blue;">美国西部-2</p></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The AWS region.
                        </p><p style="color:blue;">AWS地区。</p></li><li class="listitem"><p><a name="sysvar_keyring_encrypted_file_data"></a>
                        <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                    </p><p style="color:blue;">加密文件数据</p><a class="indexterm" name="idm140286881318608"></a><a class="indexterm" name="idm140286881317504"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_encrypted_file_data"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-encrypted-file-data=file_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_encrypted_file_data">keyring_encrypted_file_data</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>File name</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">platform specific</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The path name of the data file used for secure data storage
                            by the <code class="literal">keyring_encrypted_file</code> plugin.
                            This variable is unavailable unless that plugin is
                            installed. The file location should be in a directory
                            considered for use only by keyring plugins. For example, do
                            not locate the file under the data directory.
                        </p><p style="color:blue;">密钥环加密文件插件用于安全数据存储的数据文件的路径名。除非安装了插件，否则此变量不可用。文件位置应该在只被keyring插件使用的目录中。例如，不要在数据目录下找到该文件。</p><p>
                            Keyring operations are transactional: The
                            <code class="literal">keyring_encrypted_file</code> plugin uses a
                            backup file during write operations to ensure that it can
                            roll back to the original file if an operation fails. The
                            backup file has the same name as the value of the
                            <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                            system variable with a suffix of
                            <code class="filename">.backup</code>.
                        </p><p style="color:blue;">keyring操作是事务性的：keyring_encrypted_file插件在写操作期间使用备份文件，以确保在操作失败时可以回滚到原始文件。备份文件的名称与后缀为.backup的keyring_encrypted_file_data系统变量的值相同。</p><p>
                            Do not use the same
                            <code class="literal">keyring_encrypted_file</code> data file for
                            multiple MySQL instances. Each instance should have its own
                            unique data file.
                        </p><p style="color:blue;">不要对多个mysql实例使用同一个keyring加密的文件数据文件。每个实例都应该有自己唯一的数据文件。</p><p>
                            The default file name is
                            <code class="filename">keyring_encrypted</code>, located in a
                            directory that is platform specific and depends on the value
                            of the <a class="link" href="installing.html#option_cmake_install_layout"><code class="option">INSTALL_LAYOUT</code></a>
                            <span class="command"><strong>CMake</strong></span> option, as shown in the following
                            table. To specify the default directory for the file
                            explicitly if you are building from source, use the
                            <a class="link" href="installing.html#option_cmake_install_mysqlkeyringdir"><code class="option">INSTALL_MYSQLKEYRINGDIR</code></a>
                            <span class="command"><strong>CMake</strong></span> option.
                        </p><p style="color:blue;">默认文件名为keyring_encrypted，位于特定于平台的目录中，取决于install_layout cmake选项的值，如下表所示。如果是从源代码生成，要显式指定文件的默认目录，请使用install_mysqlkeyringdir cmake选项。</p>
                        <div class="informaltable">
                            <table summary="The default keyring_encrypted_file_data value for different INSTALL_LAYOUT values."><colgroup><col width="35%"><col width="65%"></colgroup><thead><tr>
                                <th scope="col"><code class="literal">INSTALL_LAYOUT</code> Value</th>
                                <th scope="col">Default <code class="literal">keyring_encrypted_file_data</code> Value</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">DEB</code>, <code class="literal">RPM</code>, <code class="literal">SLES</code>,
                                    <code class="literal">SVR4</code></td>
                                <td><code class="filename">/var/lib/mysql-keyring/keyring_encrypted</code></td>
                            </tr><tr>
                                <td scope="row">Otherwise</td>
                                <td><code class="filename">keyring/keyring_encrypted</code> under the
                                    <a class="link" href="installing.html#option_cmake_cmake_install_prefix"><code class="option">CMAKE_INSTALL_PREFIX</code></a>
                                    value</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            At plugin startup, if the value assigned to
                            <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                            specifies a file that does not exist, the
                            <code class="literal">keyring_encrypted_file</code> plugin attempts to
                            create it (as well as its parent directory, if necessary).
                        </p><p style="color:blue;">在插件启动时，如果分配给KirrgInEngultEdIdFielyDATA的值指定不存在的文件，则KyrRiguBuffeldTyx文件插件尝试创建它（以及如果需要的话，它的父目录）。</p><p>
                            If you create the directory manually, it should have a
                            restrictive mode and be accessible only to the account used
                            to run the MySQL server. For example, on Unix and Unix-like
                            systems, to use the
                            <code class="filename">/usr/local/mysql/mysql-keyring</code>
                            directory, the following commands (executed as
                            <code class="literal">root</code>) create the directory and set its
                            mode and ownership:
                        </p><p style="color:blue;">如果手动创建目录，则该目录应具有限制模式，并且只能由用于运行mysql服务器的帐户访问。例如，在unix和类unix系统上，要使用/usr/local/mysql/mysql keyring目录，以下命令（以根用户身份执行）将创建该目录并设置其模式和所有权：</p><pre data-lang="terminal" class="programlisting">cd /usr/local/mysql
mkdir mysql-keyring
chmod 750 mysql-keyring
chown mysql mysql-keyring
chgrp mysql mysql-keyring
</pre><p>
                            If the <code class="literal">keyring_encrypted_file</code> plugin
                            cannot create or access its data file, it writes an error
                            message to the error log. If an attempted runtime assignment
                            to
                            <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                            results in an error, the variable value remains unchanged.
                        </p><p style="color:blue;">如果keyring加密的文件插件无法创建或访问其数据文件，则会将错误消息写入错误日志。如果尝试对keyring_encrypted_file_data进行运行时分配导致错误，则变量值保持不变。</p>
                        <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Important
                            </div>
                            <p>
                                Once the <code class="literal">keyring_encrypted_file</code> plugin
                                has created its data file and started to use it, it is
                                important not to remove the file. Loss of the file will
                                cause data encrypted using its keys to become
                                inaccessible. (It is permissible to rename or move the
                                file, as long as you change the value of
                                <a class="link" href="security.html#sysvar_keyring_encrypted_file_data"><code class="literal">keyring_encrypted_file_data</code></a>
                                to match.)
                            </p><p style="color:blue;">一旦keyring_encrypted_file插件创建了它的数据文件并开始使用它，不要删除该文件是很重要的。文件丢失将导致使用其密钥加密的数据变得不可访问。（只要更改keyring_encrypted_file_data的值以匹配，就可以重命名或移动文件。）</p>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_keyring_encrypted_file_password"></a>
                        <a class="link" href="security.html#sysvar_keyring_encrypted_file_password"><code class="literal">keyring_encrypted_file_password</code></a>
                    </p><p style="color:blue;">加密文件密码</p><a class="indexterm" name="idm140286881248144"></a><a class="indexterm" name="idm140286881247040"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_encrypted_file_password"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-encrypted-file-password=password</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_encrypted_file_password">keyring_encrypted_file_password</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>String</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The password used by the
                            <code class="literal">keyring_encrypted_file</code> plugin. This
                            variable is unavailable unless that plugin is installed. The
                            password is mandatory for plugin operation; if not specified
                            at server startup, <code class="literal">keyring_encrypted_file</code>
                            initialization fails.
                        </p><p style="color:blue;">密钥环加密文件插件使用的密码。除非安装了插件，否则此变量不可用。插件操作必须输入密码；如果在服务器启动时未指定密码，则密钥环加密的文件初始化将失败。</p><p>
                            If this variable is specified in an option file, the file
                            should have a restrictive mode and be accessible only to the
                            account used to run the MySQL server.
                        </p><p style="color:blue;">如果在选项文件中指定了此变量，则该文件应具有限制模式，并且只能由用于运行mysql服务器的帐户访问。</p>
                        <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Important
                            </div>
                            <p>
                                Once the
                                <a class="link" href="security.html#sysvar_keyring_encrypted_file_password"><code class="literal">keyring_encrypted_file_password</code></a>
                                value has been set, changing it does not rotate the
                                keyring password and could make the server inaccessible.
                                If an incorrect password is provided, the
                                <code class="literal">keyring_encrypted_file</code> plugin cannot
                                load keys from the encrypted keyring file.
                            </p><p style="color:blue;">一旦设置了keyring_encrypted_file_password值，更改它不会旋转keyring密码，并且可能会使服务器无法访问。如果提供的密码不正确，则keyring加密文件插件无法从加密keyring文件加载密钥。</p>
                        </div>
                        <p>
                            The password value cannot be displayed at runtime with
                            <a class="link" href="sql-syntax.html#show-variables" title="13.7.5.39&nbsp;SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a> or the
                            Performance Schema
                            <a class="link" href="performance-schema.html#performance-schema-system-variable-tables" title="25.12.13&nbsp;Performance Schema System Variable Tables"><code class="literal">global_variables</code></a> table because
                            the display value is obfuscated.
                        </p><p style="color:blue;">密码值不能在运行时与show variables或performance schema global_variables表一起显示，因为显示值是模糊的。</p></li><li class="listitem"><p><a name="sysvar_keyring_file_data"></a>
                        <a class="indexterm" name="idm140286881212096"></a>

                        <a class="indexterm" name="idm140286881211056"></a>

                        <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a>
                    </p><p style="color:blue;">密钥环文件数据</p>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_file_data"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-file-data=file_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.11</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_file_data">keyring_file_data</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>File name</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">platform specific</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The path name of the data file used for secure data storage
                            by the <code class="literal">keyring_file</code> plugin. This variable
                            is unavailable unless that plugin is installed. The file
                            location should be in a directory considered for use only by
                            keyring plugins. For example, do not locate the file under
                            the data directory.
                        </p><p style="color:blue;">密钥环文件插件用于安全数据存储的数据文件的路径名。除非安装了插件，否则此变量不可用。文件位置应该在只被keyring插件使用的目录中。例如，不要在数据目录下找到该文件。</p><p>
                            Keyring operations are transactional: The
                            <code class="literal">keyring_file</code> plugin uses a backup file
                            during write operations to ensure that it can roll back to
                            the original file if an operation fails. The backup file has
                            the same name as the value of the
                            <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> system
                            variable with a suffix of <code class="filename">.backup</code>.
                        </p><p style="color:blue;">keyring操作是事务性的：keyring_文件插件在写操作期间使用备份文件，以确保在操作失败时可以回滚到原始文件。备份文件的名称与后缀为.backup的keyring_file_数据系统变量的值相同。</p><p>
                            Do not use the same <code class="literal">keyring_file</code> data
                            file for multiple MySQL instances. Each instance should have
                            its own unique data file.
                        </p><p style="color:blue;">不要对多个mysql实例使用同一个keyring_文件数据文件。每个实例都应该有自己唯一的数据文件。</p><p>
                            The default file name is <code class="filename">keyring</code>,
                            located in a directory that is platform specific and depends
                            on the value of the
                            <a class="link" href="installing.html#option_cmake_install_layout"><code class="option">INSTALL_LAYOUT</code></a>
                            <span class="command"><strong>CMake</strong></span> option, as shown in the following
                            table. To specify the default directory for the file
                            explicitly if you are building from source, use the
                            <a class="link" href="installing.html#option_cmake_install_mysqlkeyringdir"><code class="option">INSTALL_MYSQLKEYRINGDIR</code></a>
                            <span class="command"><strong>CMake</strong></span> option.
                        </p><p style="color:blue;">默认文件名为keyring，位于特定于平台的目录中，取决于install_layout cmake选项的值，如下表所示。如果是从源代码生成，要显式指定文件的默认目录，请使用install_mysqlkeyringdir cmake选项。</p>
                        <div class="informaltable">
                            <table summary="The default keyring_file_data value for different INSTALL_LAYOUT values."><colgroup><col width="35%"><col width="65%"></colgroup><thead><tr>
                                <th scope="col"><code class="literal">INSTALL_LAYOUT</code> Value</th>
                                <th scope="col">Default <code class="literal">keyring_file_data</code> Value</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">DEB</code>, <code class="literal">RPM</code>, <code class="literal">SLES</code>,
                                    <code class="literal">SVR4</code></td>
                                <td><code class="filename">/var/lib/mysql-keyring/keyring</code></td>
                            </tr><tr>
                                <td scope="row">Otherwise</td>
                                <td><code class="filename">keyring/keyring</code> under the
                                    <a class="link" href="installing.html#option_cmake_cmake_install_prefix"><code class="option">CMAKE_INSTALL_PREFIX</code></a>
                                    value</td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            At plugin startup, if the value assigned to
                            <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> specifies
                            a file that does not exist, the
                            <code class="literal">keyring_file</code> plugin attempts to create it
                            (as well as its parent directory, if necessary).
                        </p><p style="color:blue;">在插件启动时，如果分配给KirrgIGFieleDATA的值指定不存在的文件，则KEYRIGIN文件插件会尝试创建它（以及如果需要的话，它的父目录）。</p><p>
                            If you create the directory manually, it should have a
                            restrictive mode and be accessible only to the account used
                            to run the MySQL server. For example, on Unix and Unix-like
                            systems, to use the
                            <code class="filename">/usr/local/mysql/mysql-keyring</code>
                            directory, the following commands (executed as
                            <code class="literal">root</code>) create the directory and set its
                            mode and ownership:
                        </p><p style="color:blue;">如果手动创建目录，则该目录应具有限制模式，并且只能由用于运行mysql服务器的帐户访问。例如，在unix和类unix系统上，要使用/usr/local/mysql/mysql keyring目录，以下命令（以根用户身份执行）将创建该目录并设置其模式和所有权：</p><pre data-lang="terminal" class="programlisting">cd /usr/local/mysql
mkdir mysql-keyring
chmod 750 mysql-keyring
chown mysql mysql-keyring
chgrp mysql mysql-keyring
</pre><p>
                            If the <code class="literal">keyring_file</code> plugin cannot create
                            or access its data file, it writes an error message to the
                            error log. If an attempted runtime assignment to
                            <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> results
                            in an error, the variable value remains unchanged.
                        </p><p style="color:blue;">如果keyring_文件插件无法创建或访问其数据文件，则会将错误消息写入错误日志。如果试图对keyring_file_数据进行运行时分配导致错误，则变量值保持不变。</p>
                        <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Important
                            </div>
                            <p>
                                Once the <code class="literal">keyring_file</code> plugin has
                                created its data file and started to use it, it is
                                important not to remove the file. For example,
                                <code class="literal">InnoDB</code> uses the file to store the
                                master key used to decrypt the data in tables that use
                                <code class="literal">InnoDB</code> tablespace encryption; see
                                <a class="xref" href="innodb-storage-engine.html#innodb-tablespace-encryption" title="14.6.3.8&nbsp;InnoDB Data-at-Rest Encryption">Section&nbsp;14.6.3.8, “InnoDB Data-at-Rest Encryption”</a>. Loss of
                                the file will cause data in such tables to become
                                inaccessible. (It is permissible to rename or move the
                                file, as long as you change the value of
                                <a class="link" href="security.html#sysvar_keyring_file_data"><code class="literal">keyring_file_data</code></a> to
                                match.) It is recommended that you create a separate
                                backup of the keyring data file immediately after you
                                create the first encrypted table and before and after
                                master key rotation.
                            </p><p style="color:blue;">一旦keyring_文件插件创建了它的数据文件并开始使用它，不要删除该文件是很重要的。例如，innodb使用文件来存储用于解密使用innodb表空间加密的表中数据的主密钥；请参阅14.6.3.8节，“innodb data at rest encryption”。文件丢失将导致此类表中的数据不可访问。（只要更改keyring_file_data的值使之匹配，就可以重命名或移动文件。）建议在创建第一个加密表之后以及主密钥旋转前后立即创建keyring数据文件的单独备份。</p>
                        </div>
                    </li><li class="listitem"><p><a name="sysvar_keyring_okv_conf_dir"></a>
                        <a class="indexterm" name="idm140286881139456"></a>

                        <a class="indexterm" name="idm140286881138416"></a>

                        <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>
                    </p><p style="color:blue;">钥匙圈_okv_conf_dir</p>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_okv_conf_dir"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                <td><code class="literal">--keyring-okv-conf-dir=dir_name</code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.12</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_okv_conf_dir">keyring_okv_conf_dir</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Directory name</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">empty string</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            The path name of the directory that stores configuration
                            information used by the <code class="literal">keyring_okv</code>
                            plugin. This variable is unavailable unless that plugin is
                            installed. The location should be a directory considered for
                            use only by the <code class="literal">keyring_okv</code> plugin. For
                            example, do not locate the directory under the data
                            directory.
                        </p><p style="color:blue;">存储keyring\u okv插件使用的配置信息的目录的路径名。除非安装了插件，否则此变量不可用。该位置应该是一个目录，仅供keyring_okv插件使用。例如，不要在数据目录下找到该目录。</p><p>
                            The default
                            <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a> value
                            is empty. For the <code class="literal">keyring_okv</code> plugin to
                            be able to access Oracle Key Vault, the value must be set to
                            a directory that contains Oracle Key Vault configuration and
                            SSL materials. For instructions on setting up this
                            directory, see <a class="xref" href="security.html#keyring-okv-plugin" title="6.4.4.4&nbsp;Using the keyring_okv KMIP Plugin">Section&nbsp;6.4.4.4, “Using the keyring_okv KMIP Plugin”</a>.
                        </p><p style="color:blue;">默认keyring_okv_conf_dir值为空。要使keyring_okv插件能够访问Oracle密钥库，必须将该值设置为包含Oracle密钥库配置和SSL材料的目录。有关设置此目录的说明，请参阅6.4.4.4节，“使用keyring_okv kmip插件”。</p><p>
                            The directory should have a restrictive mode and be
                            accessible only to the account used to run the MySQL server.
                            For example, on Unix and Unix-like systems, to use the
                            <code class="filename">/usr/local/mysql/mysql-keyring-okv</code>
                            directory, the following commands (executed as
                            <code class="literal">root</code>) create the directory and set its
                            mode and ownership:
                        </p><p style="color:blue;">目录应该具有限制模式，并且只能由用于运行mysql服务器的帐户访问。例如，在unix和类unix系统上，要使用/usr/local/mysql/mysql keyring okv目录，以下命令（以根用户身份执行）将创建该目录并设置其模式和所有权：</p><pre data-lang="terminal" class="programlisting">cd /usr/local/mysql
mkdir mysql-keyring-okv
chmod 750 mysql-keyring-okv
chown mysql mysql-keyring-okv
chgrp mysql mysql-keyring-okv
</pre><p>
                            If the value assigned to
                            <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>
                            specifies a directory that does not exist, or that does not
                            contain configuration information that enables a connection
                            to Oracle Key Vault to be established,
                            <code class="literal">keyring_okv</code> writes an error message to
                            the error log. If an attempted runtime assignment to
                            <a class="link" href="security.html#sysvar_keyring_okv_conf_dir"><code class="literal">keyring_okv_conf_dir</code></a>
                            results in an error, the variable value and keyring
                            operation remain unchanged.
                        </p><p style="color:blue;">如果分配给KirrgIOKOKVYCOMPUDIIR的值指定不存在的目录，或者不包含能够建立到Oracle密钥库的连接的配置信息，KyrrgIO-OKV将错误消息写入错误日志。如果尝试对keyring_okv_conf_dir进行运行时分配导致错误，则变量值和keyring操作保持不变。</p></li><li class="listitem"><p><a name="sysvar_keyring_operations"></a>
                        <a class="link" href="security.html#sysvar_keyring_operations"><code class="literal">keyring_operations</code></a>
                    </p><p style="color:blue;">钥匙环操作</p><a class="indexterm" name="idm140286881093696"></a><a class="indexterm" name="idm140286881092656"></a>
                        <div class="informaltable">
                            <table frame="box" rules="all" summary="Properties for keyring_operations"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                <th scope="col">Value</th>
                            </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                <td>5.7.21</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                <td><code class="literal"><a class="link" href="security.html#sysvar_keyring_operations">keyring_operations</a></code></td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                <td>Global</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                <td>Boolean</td>
                            </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                <td><code class="literal">ON</code></td>
                            </tr></tbody></table>
                        </div>
                        <p>
                            Whether keyring operations are enabled. This variable is
                            used during key migration operations. See
                            <a class="xref" href="security.html#keyring-key-migration" title="6.4.4.6&nbsp;Migrating Keys Between Keyring Keystores">Section&nbsp;6.4.4.6, “Migrating Keys Between Keyring Keystores”</a>.
                        </p><p style="color:blue;">是否启用密钥环操作。此变量在密钥迁移操作期间使用。参见第6.4.4.6节“在密钥环密钥库之间迁移密钥”。</p></li></ul>
                </div>

            </div>

        </div>

        <div class="section">

            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="audit-log"></a>6.4.5&nbsp;MySQL Enterprise Audit</h3>

                    </div>

                </div>

            </div>

            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#audit-log-components">6.4.5.1 Audit Log Components</a></span></dt><dt><span class="section"><a href="security.html#audit-log-installation">6.4.5.2 Installing or Uninstalling MySQL Enterprise Audit</a></span></dt><dt><span class="section"><a href="security.html#audit-log-security">6.4.5.3 MySQL Enterprise Audit Security Considerations</a></span></dt><dt><span class="section"><a href="security.html#audit-log-file-formats">6.4.5.4 Audit Log File Formats</a></span></dt><dt><span class="section"><a href="security.html#audit-log-logging-configuration">6.4.5.5 Audit Log Logging Configuration</a></span></dt><dt><span class="section"><a href="security.html#audit-log-filtering">6.4.5.6 Audit Log Filtering</a></span></dt><dt><span class="section"><a href="security.html#audit-log-filter-definitions">6.4.5.7 Writing Audit Log Filter Definitions</a></span></dt><dt><span class="section"><a href="security.html#audit-log-legacy-filtering">6.4.5.8 Legacy Mode Audit Log Filtering</a></span></dt><dt><span class="section"><a href="security.html#audit-log-reference">6.4.5.9 Audit Log Reference</a></span></dt><dt><span class="section"><a href="security.html#audit-log-restrictions">6.4.5.10 Audit Log Restrictions</a></span></dt></dl>
            </div>
            <a class="indexterm" name="idm140286881064992"></a><a class="indexterm" name="idm140286881063920"></a><a class="indexterm" name="idm140286881062432"></a><a class="indexterm" name="idm140286881061360"></a>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    MySQL Enterprise Audit is an extension included in MySQL Enterprise Edition, a commercial
                    product. To learn more about commercial products, see
                    <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                </p><p style="color:blue;">mysql企业审计是商业产品mysql企业版的扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
            </div>
            <p>
                MySQL Enterprise Edition includes MySQL Enterprise Audit, implemented using a server plugin named
                <code class="literal">audit_log</code>. MySQL Enterprise Audit uses the open MySQL Audit
                API to enable standard, policy-based monitoring, logging, and
                blocking of connection and query activity executed on specific
                MySQL servers. Designed to meet the Oracle audit specification,
                MySQL Enterprise Audit provides an out of box, easy to use auditing and
                compliance solution for applications that are governed by both
                internal and external regulatory guidelines.
            </p><p style="color:blue;">mysql企业版包括mysql企业审计，使用名为audit_log的服务器插件实现。mysql enterprise audit使用openmysql审计api实现对特定mysql服务器上执行的连接和查询活动的标准、基于策略的监视、日志记录和阻塞。mysql enterprise audit是为满足oracle审计规范而设计的，它为同时受内部和外部监管准则约束的应用程序提供了一个开箱即用、易于使用的审计和法规遵从性解决方案。</p><p>
            When installed, the audit plugin enables MySQL Server to produce a
            log file containing an audit record of server activity. The log
            contents include when clients connect and disconnect, and what
            actions they perform while connected, such as which databases and
            tables they access.
        </p><p style="color:blue;">安装后，审计插件使mysql服务器能够生成包含服务器活动审计记录的日志文件。日志内容包括客户端连接和断开连接的时间，以及它们在连接时执行的操作，例如它们访问的数据库和表。</p><p>
            After you install the audit plugin (see
            <a class="xref" href="security.html#audit-log-installation" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”</a>), it writes an audit log
            file. By default, the file is named <code class="filename">audit.log</code>
            in the server data directory. To change the name of the file, set
            the <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> system
            variable at server startup.
        </p><p style="color:blue;">安装审计插件（请参阅第6.4.5.2节“安装或卸载mysql企业审计”）后，它将编写审计日志文件。默认情况下，服务器数据目录中的文件名为audit.log。要更改文件名，请在服务器启动时设置audit_log_file系统变量。</p><p>
            By default, audit log file contents are written in new-style XML
            format, without compression or encryption. To select the file
            format, set the <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a>
            system variable at server startup. For details on file format and
            contents, see <a class="xref" href="security.html#audit-log-file-formats" title="6.4.5.4&nbsp;Audit Log File Formats">Section&nbsp;6.4.5.4, “Audit Log File Formats”</a>.
        </p><p style="color:blue;">默认情况下，审核日志文件内容是以新样式的XML格式编写的，无需压缩或加密。要选择文件格式，请在服务器启动时设置AUDIT U LOG U FORMAT系统变量。有关文件格式和内容的详细信息，请参阅第6.4.5.4节“审核日志文件格式”。</p><p>
            For more information about controlling how logging occurs,
            including audit log file naming and format selection, see
            <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>. To perform
            filtering of audited events, see
            <a class="xref" href="security.html#audit-log-filtering" title="6.4.5.6&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.6, “Audit Log Filtering”</a>. For descriptions of the
            parameters used to configure the audit log plugin, see
            <a class="xref" href="security.html#audit-log-options-variables" title="Audit Log Options and Variables">Audit Log Options and Variables</a>.
        </p><p style="color:blue;">有关如何控制日志记录的更多信息，包括审核日志文件命名和格式选择，请参阅第6.4.5.5节“审核日志记录配置”。要对已审核事件进行筛选，请参阅第6.4.5.6节“审核日志筛选”。有关用于配置审核日志插件的参数的说明，请参阅审核日志选项和变量。</p><p>
            If the audit log plugin is enabled, the Performance Schema (see
            <a class="xref" href="performance-schema.html" title="Chapter&nbsp;25&nbsp;MySQL Performance Schema">Chapter&nbsp;25, <i>MySQL Performance Schema</i></a>) has instrumentation for it.
            To identify the relevant instruments, use this query:
        </p><p style="color:blue;">如果启用了审计日志插件，则性能模式（请参阅第25章mysql性能模式）具有该插件的检测功能。要识别相关工具，请使用以下查询：</p><pre data-lang="sql" class="programlisting">SELECT NAME FROM performance_schema.setup_instruments
WHERE NAME LIKE '%/alog/%';
</pre>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-components"></a>6.4.5.1&nbsp;Audit Log Components</h4>
                        </div>
                    </div>
                </div>
                <p>
                    MySQL Enterprise Audit is based on the audit log plugin and related
                    components:
                </p><p style="color:blue;">mysql企业审计基于审计日志插件和相关组件：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        A server-side plugin named <code class="literal">audit_log</code>
                        examines auditable events and determines whether to write
                        them to the audit log.
                    </p><p style="color:blue;">名为audit_log的服务器端插件检查可审核事件并确定是否将其写入审核日志。</p></li><li class="listitem"><p>
                        User-defined functions enable manipulation of filtering
                        definitions that control logging behavior, the encryption
                        password, and log file reading.
                    </p><p style="color:blue;">用户定义的函数允许操作控制日志记录行为、加密密码和日志文件读取的筛选定义。</p></li><li class="listitem"><p>
                        Tables in the <code class="literal">mysql</code> system database
                        provide persistent storage of filter and user account data.
                    </p><p style="color:blue;">mysql系统数据库中的表提供过滤器和用户帐户数据的持久存储。</p></li><li class="listitem"><p>
                        System variables enable audit log configuration and status
                        variables provide runtime operational information.
                    </p><p style="color:blue;">系统变量启用审核日志配置，状态变量提供运行时操作信息。</p></li></ul>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Prior to MySQL 5.7.13, MySQL Enterprise Audit consists only of the
                        <code class="literal">audit_log</code> plugin and operates in legacy
                        mode. See <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>.
                    </p><p style="color:blue;">在mysql 5.7.13之前，mysql enterprise audit只包含audit_log插件，并以传统模式运行。见第6.4.5.8节，“传统模式审计日志过滤”。</p>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-installation"></a>6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286881030976"></a><a class="indexterm" name="idm140286881029520"></a><p>
                This section describes how to install or uninstall MySQL Enterprise Audit,
                which is implemented using the audit log plugin and related
                components described in <a class="xref" href="security.html#audit-log-components" title="6.4.5.1&nbsp;Audit Log Components">Section&nbsp;6.4.5.1, “Audit Log Components”</a>.
                For general information about installing plugins, see
                <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>.
            </p><p style="color:blue;">本节介绍如何安装或卸载mysql enterprise audit，它是使用audit log plugin和第6.4.5.1节“audit log components”中描述的相关组件实现的。有关安装插件的一般信息，请参阅第5.5.1节“安装和卸载插件”。</p>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        Read this entire section before following its instructions.
                        Parts of the procedure differ depending on your environment.
                    </p><p style="color:blue;">在遵循说明之前，请阅读整个章节。程序的部分内容因环境而异。</p>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        If installed, the <code class="literal">audit_log</code> plugin involves
                        some minimal overhead even when disabled. To avoid this
                        overhead, do not install MySQL Enterprise Audit unless you plan to use it.
                    </p><p style="color:blue;">如果安装了audit_log插件，那么即使禁用了它，它也会带来一些最小的开销。为了避免这种开销，除非计划使用mysql企业审计，否则不要安装它。</p>
                </div>
                <p>
                    To be usable by the server, the plugin library file must be
                    located in the MySQL plugin directory (the directory named by
                    the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                    variable). If necessary, configure the plugin directory location
                    by setting the value of
                    <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
                </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The instructions here apply for MySQL 5.7.13 or higher. For
                        MySQL versions prior to 5.7.13, see
                        <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/audit-log-installation.html" target="_top">Installing MySQL Enterprise Audit</a> in
                        <a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/" target="_top">MySQL 5.6 Reference Manual</a>.
                    </p><p style="color:blue;">这里的说明适用于mysql 5.7.13或更高版本。对于5.7.13之前的mysql版本，请参见mysql 5.6参考手册中的安装mysql企业审计。</p><p>
                    Also, prior to MySQL 5.7.13, MySQL Enterprise Audit consists only of the
                    <code class="literal">audit_log</code> plugin and includes none of the
                    other components described in
                    <a class="xref" href="security.html#audit-log-components" title="6.4.5.1&nbsp;Audit Log Components">Section&nbsp;6.4.5.1, “Audit Log Components”</a>. As of MySQL 5.7.13, if
                    the <code class="literal">audit_log</code> plugin is already installed
                    from a version of MySQL prior to 5.7.13, uninstall it using
                    the following statement and restart the server before
                    installing the current version:
                </p><p style="color:blue;">此外，在mysql 5.7.13之前，mysql enterprise audit只包含audit_log插件，不包含第6.4.5.1节“audit log components”中描述的其他组件。从MySQL 5.7.13开始，如果Audit_Log插件已经从5.7.13之前的MySQL版本安装，请使用以下语句卸载它，并在安装当前版本之前重新启动服务器：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN audit_log;
</pre>
                </div>
                <p>
                    To install MySQL Enterprise Audit, look in the <code class="filename">share</code>
                    directory of your MySQL installation and choose the script that
                    is appropriate for your platform. The available scripts differ
                    in the suffix used to refer to the plugin library file:
                </p><p style="color:blue;">要安装mysql企业审计，请查看mysql安装的共享目录，然后选择适合您的平台的脚本。可用的脚本在用于引用插件库文件的后缀上有所不同：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="filename">audit_log_filter_win_install.sql</code>:
                        Choose this script for Windows systems that use
                        <code class="filename">.dll</code> as the file name suffix.
                    </p><p style="color:blue;">audit_log_filter_win_install.sql:为使用.dll作为文件名后缀的Windows系统选择此脚本。</p></li><li class="listitem"><p>
                        <code class="filename">audit_log_filter_linux_install.sql</code>:
                        Choose this script for Linux and similar systems that use
                        <code class="filename">.so</code> as the file name suffix.
                    </p><p style="color:blue;">audit_log_filter_linux_install.sql：为Linux和使用.so作为文件名后缀的类似系统选择此脚本。</p></li></ul>
                </div>
                <p>
                    Run the script as follows. The example here uses the Linux
                    installation script. Make the appropriate substitution for your
                    system.
                </p><p style="color:blue;">按如下方式运行脚本。这里的示例使用Linux安装脚本。对系统进行适当的替换。</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root -p &lt; audit_log_filter_linux_install.sql</code></strong>
Enter password: <em class="replaceable"><code>(enter root password here)</code></em>
</pre>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        Some MySQL versions have introduced changes to the structure
                        of the MySQL Enterprise Audit tables. To ensure that your tables are up to
                        date for upgrades from earlier versions of MySQL
                        5.7, run <a class="link" href="programs.html#mysql-upgrade" title="4.4.7&nbsp;mysql_upgrade — Check and Upgrade MySQL Tables"><span class="command"><strong>mysql_upgrade --force</strong></span></a>
                        (which will also perform any other needed updates). If you
                        prefer to run the update statements only for the MySQL Enterprise Audit
                        tables, see the following discussion.
                    </p><p style="color:blue;">一些mysql版本对mysql企业审计表的结构进行了修改。为了确保您的表是从mysql 5.7的早期版本升级的最新版本，请运行mysql_upgrade--force（它还将执行任何其他需要的更新）。如果您希望只对mysql企业审计表运行update语句，请参阅下面的讨论。</p><p>
                    As of MySQL 5.7.23, for new MySQL installations, the
                    <code class="literal">USER</code> and <code class="literal">HOST</code> columns in
                    the <code class="literal">audit_log_user</code> table used by MySQL Enterprise Audit
                    have definitions that better correspond to the definitions of
                    the <code class="literal">User</code> and <code class="literal">Host</code>
                    columns in the <code class="literal">mysql.user</code> system table. For
                    upgrades to 5.7.23 or higher of an installation for which
                    MySQL Enterprise Audit is already installed, it is recommended that you
                    alter the table definitions as follows:
                </p><p style="color:blue;">从mysql 5.7.23开始，对于新的mysql安装，mysql enterprise audit使用的audit_log_user表中的用户和主机列的定义与mysql.user system表中的用户和主机列的定义更好地对应。对于已安装mysql enterprise audit的安装，升级到5.7.23或更高版本时，建议按以下方式更改表定义：</p><pre data-lang="sql" class="programlisting">ALTER TABLE mysql.audit_log_user
  DROP FOREIGN KEY audit_log_user_ibfk_1;
ALTER TABLE mysql.audit_log_filter
  ENGINE=InnoDB;
ALTER TABLE mysql.audit_log_filter
  CONVERT TO CHARACTER SET utf8 COLLATE utf8_bin;
ALTER TABLE mysql.audit_log_user
  ENGINE=InnoDB;
ALTER TABLE mysql.audit_log_user
  CONVERT TO CHARACTER SET utf8 COLLATE utf8_bin;
ALTER TABLE mysql.audit_log_user
  MODIFY COLUMN USER VARCHAR(32);
ALTER TABLE mysql.audit_log_user
  ADD FOREIGN KEY (FILTERNAME) REFERENCES mysql.audit_log_filter(NAME);
</pre><p>
                    As of MySQL 5.7.21, for a new installation of MySQL Enterprise Audit,
                    <code class="literal">InnoDB</code> is used instead of
                    <code class="literal">MyISAM</code> for the audit log tables. For
                    upgrades to 5.7.21 or higher of an installation for which
                    MySQL Enterprise Audit is already installed, it is recommended that you
                    alter the audit log tables to use <code class="literal">InnoDB</code>:
                </p><p style="color:blue;">从mysql 5.7.21开始，对于mysql企业审计的新安装，审计日志表使用innodb而不是myisam。对于已经安装了mysql enterprise audit的安装升级到5.7.21或更高版本，建议您更改审计日志表以使用innodb：</p><pre data-lang="sql" class="programlisting">ALTER TABLE mysql.audit_log_user ENGINE=InnoDB;
ALTER TABLE mysql.audit_log_filter ENGINE=InnoDB;
</pre>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        To use MySQL Enterprise Audit in the context of master/slave replication,
                        Group Replication, or InnoDB cluster, you must use MySQL
                        5.7.21 or higher, and ensure that the audit log tables use
                        <code class="literal">InnoDB</code> as just described. Then you must
                        prepare the slave or secondary nodes prior to running the
                        installation script on the master or primary node. This is
                        necessary because the <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL
                        PLUGIN</code></a> statement in the script is not replicated.
                    </p><p style="color:blue;">要在主/从复制、组复制或innodb cluster上下文中使用mysql enterprise audit，必须使用mysql 5.7.21或更高版本，并确保审计日志表如前所述使用innodb。然后，在主节点或主节点上运行安装脚本之前，必须准备从节点或辅助节点。这是必要的，因为脚本中的install plugin语句没有被复制。</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            On each slave or secondary node, extract the
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statement
                            from the installation script and execute it manually.
                        </p><p style="color:blue;">在每个从节点或辅助节点上，从安装脚本中提取install plugin语句并手动执行它。</p></li><li class="listitem"><p>
                            On the master or primary node, run the installation script
                            as described previously.
                        </p><p style="color:blue;">在主节点或主节点上，如前所述运行安装脚本。</p></li></ol>
                    </div>

                </div>
                <p>
                    To verify plugin installation, examine the
                    <a class="link" href="information-schema.html#plugins-table" title="24.17&nbsp;The INFORMATION_SCHEMA PLUGINS Table"><code class="literal">INFORMATION_SCHEMA.PLUGINS</code></a> table or
                    use the <a class="link" href="sql-syntax.html#show-plugins" title="13.7.5.25&nbsp;SHOW PLUGINS Syntax"><code class="literal">SHOW PLUGINS</code></a> statement
                    (see <a class="xref" href="server-administration.html#obtaining-plugin-information" title="5.5.2&nbsp;Obtaining Server Plugin Information">Section&nbsp;5.5.2, “Obtaining Server Plugin Information”</a>). For
                    example:
                </p><p style="color:blue;">要验证插件安装，请检查information\u schema.plugins表或使用show plugins语句（请参阅第5.5.2节“获取服务器插件信息”）。例如：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PLUGIN_NAME, PLUGIN_STATUS</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
       <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE 'audit%';</code></strong>
+-------------+---------------+
| PLUGIN_NAME | PLUGIN_STATUS |
+-------------+---------------+
| audit_log   | ACTIVE        |
+-------------+---------------+
</pre><p>
                If the plugin failed to initialize, check the server error log
                for diagnostic messages.
            </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p><p>
                After MySQL Enterprise Audit is installed, you can use the
                <code class="option">--audit-log</code> option for subsequent server
                startups to control <code class="literal">audit_log</code> plugin
                activation. For example, to prevent the plugin from being
                removed at runtime, use this option:
            </p><p style="color:blue;">安装mysql enterprise audit之后，您可以为后续服务器启动使用--audit log选项来控制audit_log插件的激活。例如，要防止插件在运行时被删除，请使用以下选项：</p><pre data-lang="ini" class="programlisting">[mysqld]
audit-log=FORCE_PLUS_PERMANENT
</pre><p>
                If it is desired to prevent the server from running without the
                audit plugin, use <a class="link" href="security.html#option_mysqld_audit-log"><code class="option">--audit-log</code></a>
                with a value of <code class="literal">FORCE</code> or
                <code class="literal">FORCE_PLUS_PERMANENT</code> to force server startup
                to fail if the plugin does not initialize successfully.
            </p><p style="color:blue;">如果需要防止服务器在没有审计插件的情况下运行，请使用值为force或force_plus_permanent的--audit log在插件未成功初始化时强制服务器启动失败。</p>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        By default, rule-based audit log filtering logs no auditable
                        events for any users. This differs from legacy audit log
                        behavior (prior to MySQL 5.7.13), which logs all auditable
                        events for all users (see
                        <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>). Should you wish
                        to produce log-everything behavior with rule-based filtering,
                        create a simple filter to enable logging and assign it to the
                        default account:
                    </p><p style="color:blue;">默认情况下，基于规则的审核日志筛选不会记录任何用户的可审核事件。这与传统审计日志行为（mysql 5.7.13之前）不同，后者记录所有用户的所有可审计事件（请参阅第6.4.5.8节“传统模式审计日志筛选”）。如果要使用基于规则的筛选生成日志所有内容行为，请创建一个简单的筛选器以启用日志记录并将其分配给默认帐户：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_set_filter('log_all', '{ "filter": { "log": true } }');
SELECT audit_log_filter_set_user('%', 'log_all');
</pre><p>
                    The filter assigned to <code class="literal">%</code> is used for
                    connections from any account that has no explicitly assigned
                    filter (which initially is true for all accounts).
                </p><p style="color:blue;">分配给%的筛选器用于来自任何没有显式分配筛选器的帐户的连接（最初对所有帐户都是如此）。</p>
                </div>
                <p>
                    Once installed as just described, MySQL Enterprise Audit remains installed
                    until uninstalled. To remove it, execute the following
                    statements:
                </p><p style="color:blue;">如前所述安装后，mysql enterprise audit将保持安装状态，直到卸载。要删除它，请执行以下语句：</p><pre data-lang="sql" class="programlisting">DROP TABLE IF EXISTS mysql.audit_log_user;
DROP TABLE IF EXISTS mysql.audit_log_filter;
UNINSTALL PLUGIN audit_log;
DROP FUNCTION audit_log_filter_set_filter;
DROP FUNCTION audit_log_filter_remove_filter;
DROP FUNCTION audit_log_filter_set_user;
DROP FUNCTION audit_log_filter_remove_user;
DROP FUNCTION audit_log_filter_flush;
DROP FUNCTION audit_log_encryption_password_get;
DROP FUNCTION audit_log_encryption_password_set;
DROP FUNCTION audit_log_read;
DROP FUNCTION audit_log_read_bookmark;
</pre>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-security"></a>6.4.5.3&nbsp;MySQL Enterprise Audit Security Considerations</h4>

                        </div>

                    </div>

                </div>
                <p>
                    By default, contents of audit log files produced by the audit
                    log plugin are not encrypted and may contain sensitive
                    information, such as the text of SQL statements. For security
                    reasons, audit log files should be written to a directory
                    accessible only to the MySQL server and to users with a
                    legitimate reason to view the log. The default file name is
                    <code class="filename">audit.log</code> in the data directory. This can
                    be changed by setting the
                    <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> system variable
                    at server startup. Other audit log files may exist due to log
                    rotation.
                </p><p style="color:blue;">默认情况下，由审核日志插件生成的审核日志文件的内容不会加密，并且可能包含敏感信息，例如SQL语句的文本。出于安全原因，审计日志文件应写入一个只有mysql服务器和有合法理由查看日志的用户才能访问的目录。数据目录中的默认文件名为audit.log。可以通过在服务器启动时设置audit_log_文件系统变量来更改此设置。由于日志旋转，其他审计日志文件可能存在。</p><p>
                For additional security, enable audit log file encryption. See
                <a class="xref" href="security.html#audit-log-file-encryption" title="Audit Log File Encryption">Audit Log File Encryption</a>.
            </p><p style="color:blue;">为了获得额外的安全性，请启用审核日志文件加密。请参阅审核日志文件加密。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-file-formats"></a>6.4.5.4&nbsp;Audit Log File Formats</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The MySQL server calls the audit log plugin to write an audit
                    record to its log file whenever an auditable event occurs.
                    Typically the first audit record written after plugin startup
                    contains the server description and startup options. Elements
                    following that one represent events such as client connect and
                    disconnect events, executed SQL statements, and so forth. Only
                    top-level statements are logged, not statements within stored
                    programs such as triggers or stored procedures. Contents of
                    files referenced by statements such as <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD
                    DATA</code></a> are not logged.
                </p><p style="color:blue;">每当发生可审核事件时，mysql服务器调用审核日志插件将审核记录写入其日志文件。通常，插件启动后写入的第一条审计记录包含服务器描述和启动选项。后面的元素表示事件，如客户机连接和断开连接事件、执行的SQL语句等。只记录顶级语句，而不记录存储程序（如触发器或存储过程）中的语句。不记录由语句（如加载数据）引用的文件的内容。</p><p>
                To select the log format that the audit log plugin uses to write
                its log file, set the
                <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a> system
                variable at server startup. These formats are available:
            </p><p style="color:blue;">若要选择审核日志插件用于写入其日志文件的日志格式，请在服务器启动时设置AUDIT U LOG U FORMAT系统变量。这些格式可用：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        New-style XML format
                        (<a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format=NEW</code></a>): An
                        XML format that has better compatibility with Oracle Audit
                        Vault than old-style XML format. MySQL 5.7 uses
                        new-style XML format by default.
                    </p><p style="color:blue;">新样式XML格式（audit_log_format=new）：与旧样式XML格式相比，与Oracle Audit Vault具有更好的兼容性的XML格式。mysql 5.7默认使用新样式的xml格式。</p></li><li class="listitem"><p>
                        Old-style XML format
                        (<a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format=OLD</code></a>): The
                        original audit log format used by default in older MySQL
                        series.
                    </p><p style="color:blue;">旧式XML格式（audit_log_format=old）：旧的MySQL系列中默认使用的原始审核日志格式。</p></li><li class="listitem"><p>
                        JSON format
                        (<a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format=JSON</code></a>)
                    </p><p style="color:blue;">json格式（audit_log_format=json）</p></li></ul>
                </div>
                <p>
                    By default, audit log file contents are written in new-style XML
                    format, without compression or encryption.
                </p><p style="color:blue;">默认情况下，审核日志文件内容是以新样式的XML格式编写的，无需压缩或加密。</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        For information about issues to consider when changing the log
                        format, see <a class="xref" href="security.html#audit-log-file-format" title="Audit Log File Format">Audit Log File Format</a>.
                    </p><p style="color:blue;">有关更改日志格式时要考虑的问题的信息，请参阅审核日志文件格式。</p>
                </div>
                <p>
                    The following sections describe the available audit logging
                    formats:
                </p><p style="color:blue;">以下各节介绍了可用的审核日志记录格式：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-new-style-xml-format" title="New-Style XML Audit Log File Format">New-Style XML Audit Log File Format</a></p><p style="color:blue;">新型xml审计日志文件格式</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-old-style-xml-format" title="Old-Style XML Audit Log File Format">Old-Style XML Audit Log File Format</a></p><p style="color:blue;">旧式XML审核日志文件格式</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-json-format" title="JSON Audit Log File Format">JSON Audit Log File Format</a></p><p style="color:blue;">JSON审核日志文件格式</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-new-style-xml-format"></a>New-Style XML Audit Log File Format</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Here is a sample log file in new-style XML format
                        (<a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format=NEW</code></a>),
                        reformatted slightly for readability:
                    </p><p style="color:blue;">下面是一个新样式XML格式的示例日志文件（audit_log_format=new），为了可读性，稍微重新格式化：</p><pre data-lang="xml" class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;AUDIT&gt;
 &lt;AUDIT_RECORD&gt;
  &lt;TIMESTAMP&gt;2019-10-03T14:06:33 UTC&lt;/TIMESTAMP&gt;
  &lt;RECORD_ID&gt;1_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
  &lt;NAME&gt;Audit&lt;/NAME&gt;
  &lt;SERVER_ID&gt;1&lt;/SERVER_ID&gt;
  &lt;VERSION&gt;1&lt;/VERSION&gt;
  &lt;STARTUP_OPTIONS&gt;/usr/local/mysql/bin/mysqld
    --socket=/usr/local/mysql/mysql.sock
    --port=3306&lt;/STARTUP_OPTIONS&gt;
  &lt;OS_VERSION&gt;i686-Linux&lt;/OS_VERSION&gt;
  &lt;MYSQL_VERSION&gt;5.7.21-log&lt;/MYSQL_VERSION&gt;
 &lt;/AUDIT_RECORD&gt;
 &lt;AUDIT_RECORD&gt;
  &lt;TIMESTAMP&gt;2019-10-03T14:09:38 UTC&lt;/TIMESTAMP&gt;
  &lt;RECORD_ID&gt;2_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
  &lt;NAME&gt;Connect&lt;/NAME&gt;
  &lt;CONNECTION_ID&gt;5&lt;/CONNECTION_ID&gt;
  &lt;STATUS&gt;0&lt;/STATUS&gt;
  &lt;STATUS_CODE&gt;0&lt;/STATUS_CODE&gt;
  &lt;USER&gt;root&lt;/USER&gt;
  &lt;OS_LOGIN/&gt;
  &lt;HOST&gt;localhost&lt;/HOST&gt;
  &lt;IP&gt;127.0.0.1&lt;/IP&gt;
  &lt;COMMAND_CLASS&gt;connect&lt;/COMMAND_CLASS&gt;
  &lt;CONNECTION_TYPE&gt;SSL/TLS&lt;/CONNECTION_TYPE&gt;
  &lt;PRIV_USER&gt;root&lt;/PRIV_USER&gt;
  &lt;PROXY_USER/&gt;
  &lt;DB&gt;test&lt;/DB&gt;
 &lt;/AUDIT_RECORD&gt;

...

 &lt;AUDIT_RECORD&gt;
  &lt;TIMESTAMP&gt;2019-10-03T14:09:38 UTC&lt;/TIMESTAMP&gt;
  &lt;RECORD_ID&gt;6_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
  &lt;NAME&gt;Query&lt;/NAME&gt;
  &lt;CONNECTION_ID&gt;5&lt;/CONNECTION_ID&gt;
  &lt;STATUS&gt;0&lt;/STATUS&gt;
  &lt;STATUS_CODE&gt;0&lt;/STATUS_CODE&gt;
  &lt;USER&gt;root[root] @ localhost [127.0.0.1]&lt;/USER&gt;
  &lt;OS_LOGIN/&gt;
  &lt;HOST&gt;localhost&lt;/HOST&gt;
  &lt;IP&gt;127.0.0.1&lt;/IP&gt;
  &lt;COMMAND_CLASS&gt;drop_table&lt;/COMMAND_CLASS&gt;
  &lt;SQLTEXT&gt;DROP TABLE IF EXISTS t&lt;/SQLTEXT&gt;
 &lt;/AUDIT_RECORD&gt;

...

 &lt;AUDIT_RECORD&gt;
  &lt;TIMESTAMP&gt;2019-10-03T14:09:39 UTC&lt;/TIMESTAMP&gt;
  &lt;RECORD_ID&gt;8_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
  &lt;NAME&gt;Quit&lt;/NAME&gt;
  &lt;CONNECTION_ID&gt;5&lt;/CONNECTION_ID&gt;
  &lt;STATUS&gt;0&lt;/STATUS&gt;
  &lt;STATUS_CODE&gt;0&lt;/STATUS_CODE&gt;
  &lt;USER&gt;root&lt;/USER&gt;
  &lt;OS_LOGIN/&gt;
  &lt;HOST&gt;localhost&lt;/HOST&gt;
  &lt;IP&gt;127.0.0.1&lt;/IP&gt;
  &lt;COMMAND_CLASS&gt;connect&lt;/COMMAND_CLASS&gt;
  &lt;CONNECTION_TYPE&gt;SSL/TLS&lt;/CONNECTION_TYPE&gt;
 &lt;/AUDIT_RECORD&gt;

...

 &lt;AUDIT_RECORD&gt;
  &lt;TIMESTAMP&gt;2019-10-03T14:09:43 UTC&lt;/TIMESTAMP&gt;
  &lt;RECORD_ID&gt;11_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
  &lt;NAME&gt;Quit&lt;/NAME&gt;
  &lt;CONNECTION_ID&gt;6&lt;/CONNECTION_ID&gt;
  &lt;STATUS&gt;0&lt;/STATUS&gt;
  &lt;STATUS_CODE&gt;0&lt;/STATUS_CODE&gt;
  &lt;USER&gt;root&lt;/USER&gt;
  &lt;OS_LOGIN/&gt;
  &lt;HOST&gt;localhost&lt;/HOST&gt;
  &lt;IP&gt;127.0.0.1&lt;/IP&gt;
  &lt;COMMAND_CLASS&gt;connect&lt;/COMMAND_CLASS&gt;
  &lt;CONNECTION_TYPE&gt;SSL/TLS&lt;/CONNECTION_TYPE&gt;
 &lt;/AUDIT_RECORD&gt;
 &lt;AUDIT_RECORD&gt;
  &lt;TIMESTAMP&gt;2019-10-03T14:09:45 UTC&lt;/TIMESTAMP&gt;
  &lt;RECORD_ID&gt;12_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
  &lt;NAME&gt;NoAudit&lt;/NAME&gt;
  &lt;SERVER_ID&gt;1&lt;/SERVER_ID&gt;
 &lt;/AUDIT_RECORD&gt;
&lt;/AUDIT&gt;
</pre><p>
                    The audit log file is written as XML, using UTF-8 (up to 4
                    bytes per character). The root element is
                    <code class="literal">&lt;AUDIT&gt;</code>. The root element contains
                    <code class="literal">&lt;AUDIT_RECORD&gt;</code> elements, each of
                    which provides information about an audited event. When the
                    audit log plugin begins writing a new log file, it writes the
                    XML declaration and opening <code class="literal">&lt;AUDIT&gt;</code>
                    root element tag. When the plugin closes a log file, it writes
                    the closing <code class="literal">&lt;/AUDIT&gt;</code> root element
                    tag. The closing tag is not present while the file is open.
                </p><p style="color:blue;">审计日志文件以xml形式写入，使用utf-8（每个字符最多4个字节）。根元素是<audit>。根元素包含<audit_record>元素，每个元素都提供有关已审核事件的信息。当审计日志插件开始写入新的日志文件时，它会写入xml声明并打开<audit>根元素标记。当插件关闭一个日志文件时，它会写入关闭的根元素标记。文件打开时不存在结束标记。</audit></audit_record></audit></p><p>
                    Elements within <code class="literal">&lt;AUDIT_RECORD&gt;</code>
                    elements have these characteristics:
                </p><p style="color:blue;"><audit_record>元素中的元素具有以下特征：</audit_record></p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Some elements appear in every
                            <code class="literal">&lt;AUDIT_RECORD&gt;</code> element. Others
                            are optional and may appear depending on the audit record
                            type.
                        </p><p style="color:blue;">每个<audit_record>元素中都会出现一些元素。其他是可选的，可能根据审核记录类型而显示。</audit_record></p></li><li class="listitem"><p>
                            Order of elements within an
                            <code class="literal">&lt;AUDIT_RECORD&gt;</code> element is not
                            guaranteed.
                        </p><p style="color:blue;">不能保证<audit_record>元素中元素的顺序。</audit_record></p></li><li class="listitem"><p>
                            Element values are not fixed length. Long values may be
                            truncated as indicated in the element descriptions given
                            later.
                        </p><p style="color:blue;">元素值不是固定长度。长值可能会被截断，如后面给出的元素描述所示。</p></li><li class="listitem"><p>
                            The <code class="literal">&lt;</code>, <code class="literal">&gt;</code>,
                            <code class="literal">"</code>, and <code class="literal">&amp;</code>
                            characters are encoded as <code class="literal">&amp;lt;</code>,
                            <code class="literal">&amp;gt;</code>,
                            <code class="literal">&amp;quot;</code>, and
                            <code class="literal">&amp;amp;</code>, respectively. NUL bytes
                            (U+00) are encoded as the <code class="literal">?</code> character.
                        </p><p style="color:blue;">&lt;、&gt;、“”和&amp;字符分别编码为&lt;；、&gt;；、"；和&amp;；。NUL字节（U+00）编码为？性格。</p></li><li class="listitem"><p>
                            Characters not valid as XML characters are encoded using
                            numeric character references. Valid XML characters are:
                        </p><p style="color:blue;">由于XML字符是使用数字字符引用编码的，因此字符无效。有效的XML字符为：</p><pre data-lang="none" class="programlisting">#x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]
</pre></li></ul>
                    </div>
                    <p>
                        The following elements are mandatory in every
                        <code class="literal">&lt;AUDIT_RECORD&gt;</code> element:
                    </p><p style="color:blue;">每个<audit_record>元素都必须包含以下元素：</audit_record></p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">&lt;NAME&gt;</code>
                        </p><p>
                            A string representing the type of instruction that
                            generated the audit event, such as a command that the
                            server received from a client.
                        </p><p style="color:blue;">表示生成审核事件的指令类型的字符串，例如服务器从客户端接收的命令。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;NAME&gt;Query&lt;/NAME&gt;
</pre><p>
                            Some common <code class="literal">&lt;NAME&gt;</code> values:
                        </p><p style="color:blue;">一些常见的<name>值：</name></p><pre data-lang="none" class="programlisting">Audit    When auditing starts, which may be server startup time
Connect  When a client connects, also known as logging in
Query    An SQL statement (executed directly)
Prepare  Preparation of an SQL statement; usually followed by Execute
Execute  Execution of an SQL statement; usually follows Prepare
Shutdown Server shutdown
Quit     When a client disconnects
NoAudit  Auditing has been turned off
</pre><p>
                            The possible values are <code class="literal">Audit</code>,
                            <code class="literal">Binlog Dump</code>, <code class="literal">Change
                            user</code>, <code class="literal">Close stmt</code>,
                            <code class="literal">Connect Out</code>,
                            <code class="literal">Connect</code>, <code class="literal">Create DB</code>,
                            <code class="literal">Daemon</code>, <code class="literal">Debug</code>,
                            <code class="literal">Delayed insert</code>, <code class="literal">Drop
                            DB</code>, <code class="literal">Execute</code>,
                            <code class="literal">Fetch</code>, <code class="literal">Field List</code>,
                            <code class="literal">Init DB</code>, <code class="literal">Kill</code>,
                            <code class="literal">Long Data</code>, <code class="literal">NoAudit</code>,
                            <code class="literal">Ping</code>, <code class="literal">Prepare</code>,
                            <code class="literal">Processlist</code>, <code class="literal">Query</code>,
                            <code class="literal">Quit</code>, <code class="literal">Refresh</code>,
                            <code class="literal">Register Slave</code>, <code class="literal">Reset
                            stmt</code>, <code class="literal">Set option</code>,
                            <code class="literal">Shutdown</code>, <code class="literal">Sleep</code>,
                            <code class="literal">Statistics</code>, <code class="literal">Table
                            Dump</code>, <code class="literal">Time</code>.
                        </p><p style="color:blue;">可能的值包括audit、binlog dump、change user、close stmt、connect out、connect、create db、daemon、debug、delayed insert、drop db、execute、fetch、field list、init db、kill、long data、noaudit、ping、prepare、processlist、query、quit、refresh、register slave、reset stmt、set option、shutdown、sleep、statistics、table dump、time。</p><p>
                            With the exception of <code class="literal">Audit</code> and
                            <code class="literal">NoAudit</code>, these values correspond to the
                            <code class="literal">COM_<em class="replaceable"><code>xxx</code></em></code>
                            command values listed in the
                            <code class="filename">my_command.h</code> header file. For
                            example, <code class="literal">Create DB</code> and <code class="literal">Change
                            user</code> correspond to
                            <code class="literal">COM_CREATE_DB</code> and
                            <code class="literal">COM_CHANGE_USER</code>, respectively.
                        </p><p style="color:blue;">除了audit和noaudit之外，这些值对应于my_command.h头文件中列出的com_xxx命令值。例如，create db和change user分别对应于com_create_db和com_change_user。</p></li><li class="listitem"><p>
                            <code class="literal">&lt;RECORD_ID&gt;</code>
                        </p><p style="color:blue;">&lt;录制ID&gt;</p><p>
                            A unique identifier for the audit record. The value is
                            composed from a sequence number and timestamp, in the
                            format
                            <code class="literal"><em class="replaceable"><code>SEQ_TIMESTAMP</code></em></code>.
                            When the audit log plugin opens the audit log file, it
                            initializes the sequence number to the size of the audit
                            log file, then increments the sequence by 1 for each
                            record logged. The timestamp is a UTC value in
                            <code class="literal"><em class="replaceable"><code>YYYY-MM-DD</code></em>T<em class="replaceable"><code>hh:mm:ss</code></em></code>
                            format indicating the date and time when the audit log
                            plugin opened the file.
                        </p><p style="color:blue;">审核记录的唯一标识符。该值由序列号和时间戳组成，格式为seq_timestamp。当审计日志插件打开审计日志文件时，它将序列号初始化为审计日志文件的大小，然后将记录的每个记录的序列增加1。时间戳是一个UTC值，格式为yyyy-mm-ddthh:mm:ss，表示审核日志插件打开文件的日期和时间。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;RECORD_ID&gt;12_2019-10-03T14:06:33&lt;/RECORD_ID&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;TIMESTAMP&gt;</code>
                        </p><p style="color:blue;">&lt;时间戳&gt;</p><p>
                            A string representing a UTC value in
                            <code class="literal"><em class="replaceable"><code>YYYY-MM-DD</code></em>T<em class="replaceable"><code>hh:mm:ss</code></em>
                                UTC</code> format indicating the date and time when the
                            audit event was generated. For example, the event
                            corresponding to execution of an SQL statement received
                            from a client has a <code class="literal">&lt;TIMESTAMP&gt;</code>
                            value occurring after the statement finishes, not when it
                            was received.
                        </p><p style="color:blue;">表示UTC值的字符串，格式为yyyy-mm-ddthh:mm:ss-utc，表示生成审核事件的日期和时间。例如，对应于从客户机接收的sql语句的执行的事件有一个<timestamp>值，该值发生在语句完成之后，而不是在接收到该值时。</timestamp></p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;TIMESTAMP&gt;2019-10-03T14:09:45 UTC&lt;/TIMESTAMP&gt;
</pre></li></ul>
                    </div>
                    <p>
                        The following elements are optional in
                        <code class="literal">&lt;AUDIT_RECORD&gt;</code> elements. Many of them
                        occur only with specific <code class="literal">&lt;NAME&gt;</code>
                        element values.
                    </p><p style="color:blue;">以下元素在<audit_record>元素中是可选的。其中许多只出现在特定的<name>元素值中。</name></audit_record></p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">&lt;COMMAND_CLASS&gt;</code>
                        </p><p style="color:blue;">&lt;命令类&gt;</p><p>
                            A string that indicates the type of action performed.
                        </p><p style="color:blue;">指示执行的操作类型的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;COMMAND_CLASS&gt;drop_table&lt;/COMMAND_CLASS&gt;
</pre><p>
                            The values correspond to the
                            <code class="literal">statement/sql/<em class="replaceable"><code>xxx</code></em></code>
                            command counters. For example,
                            <em class="replaceable"><code>xxx</code></em> is
                            <code class="literal">drop_table</code> and
                            <code class="literal">select</code> for <a class="link" href="sql-syntax.html#drop-table" title="13.1.29&nbsp;DROP TABLE Syntax"><code class="literal">DROP
                            TABLE</code></a> and <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>
                            statements, respectively. The following statement displays
                            the possible names:
                        </p><p style="color:blue;">这些值对应于statement/sql/xxx命令计数器。例如，xxx分别是drop_table和select for drop table和select语句。以下语句显示可能的名称：</p><pre data-lang="sql" class="programlisting">SELECT REPLACE(EVENT_NAME, 'statement/sql/', '') AS name
FROM performance_schema.events_statements_summary_global_by_event_name
WHERE EVENT_NAME LIKE 'statement/sql/%'
ORDER BY name;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;CONNECTION_ID&gt;</code>
                        </p><p style="color:blue;">&lt;连接ID&gt;</p><p>
                            An unsigned integer representing the client connection
                            identifier. This is the same as the value returned by the
                            <a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> function
                            within the session.
                        </p><p style="color:blue;">表示客户端连接标识符的无符号整数。这与会话中connection_id（）函数返回的值相同。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;CONNECTION_ID&gt;127&lt;/CONNECTION_ID&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;CONNECTION_TYPE&gt;</code>
                        </p><p style="color:blue;">&lt;连接类型&gt;</p><p>
                            The security state of the connection to the server.
                            Permitted values are <code class="literal">TCP/IP</code> (TCP/IP
                            connection established without encryption),
                            <code class="literal">SSL/TLS</code> (TCP/IP connection established
                            with encryption), <code class="literal">Socket</code> (Unix socket
                            file connection), <code class="literal">Named Pipe</code> (Windows
                            named pipe connection), and <code class="literal">Shared
                            Memory</code> (Windows shared memory connection).
                        </p><p style="color:blue;">到服务器的连接的安全状态。允许的值包括TCP/IP（未经加密而建立的TCP/IP连接）、SSL/TLS（经加密而建立的TCP/IP连接）、套接字（Unix套接字文件连接）、命名管道（Windows命名管道连接）和共享内存（Windows共享内存连接）。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;CONNECTION_TYPE&gt;SSL/TLS&lt;/CONNECTION_TYPE&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;DB&gt;</code>
                        </p><p>
                            A string representing the default database name.
                        </p><p style="color:blue;">表示默认数据库名称的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;DB&gt;test&lt;/DB&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;HOST&gt;</code>
                        </p><p style="color:blue;">&lt;主持人&gt;</p><p>
                            A string representing the client host name.
                        </p><p style="color:blue;">表示客户端主机名的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;HOST&gt;localhost&lt;/HOST&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;IP&gt;</code>
                        </p><p>
                            A string representing the client IP address.
                        </p><p style="color:blue;">表示客户端IP地址的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;IP&gt;127.0.0.1&lt;/IP&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;MYSQL_VERSION&gt;</code>
                        </p><p style="color:blue;"><mysql>版本</mysql></p><p>
                            A string representing the MySQL server version. This is
                            the same as the value of the
                            <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a> function or
                            <a class="link" href="server-administration.html#sysvar_version"><code class="literal">version</code></a> system variable.
                        </p><p style="color:blue;">表示mysql服务器版本的字符串。这与version（）函数或version系统变量的值相同。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;MYSQL_VERSION&gt;5.7.21-log&lt;/MYSQL_VERSION&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;OS_LOGIN&gt;</code>
                        </p><p>
                            A string representing the external user name used during
                            the authentication process, as set by the plugin used to
                            authenticate the client. With native (built-in) MySQL
                            authentication, or if the plugin does not set the value,
                            this element is empty. The value is the same as that of
                            the <a class="link" href="server-administration.html#sysvar_external_user"><code class="literal">external_user</code></a> system
                            variable (see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>).
                        </p><p style="color:blue;">表示身份验证过程中使用的外部用户名的字符串，由用于对客户端进行身份验证的插件设置。使用本机（内置）mysql身份验证，或者如果插件未设置该值，则此元素为空。该值与外部用户系统变量的值相同（请参见第6.2.14节“代理用户”）。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;OS_LOGIN&gt;jeffrey&lt;/OS_LOGIN&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;OS_VERSION&gt;</code>
                        </p><p style="color:blue;">&lt;操作系统版本&gt;</p><p>
                            A string representing the operating system on which the
                            server was built or is running.
                        </p><p style="color:blue;">表示在其上生成或运行服务器的操作系统的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;OS_VERSION&gt;x86_64-Linux&lt;/OS_VERSION&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;PRIV_USER&gt;</code>
                        </p><p style="color:blue;">&lt;私人用户&gt;</p><p>
                            A string representing the user that the server
                            authenticated the client as. This is the user name that
                            the server uses for privilege checking, and may differ
                            from the <code class="literal">&lt;USER&gt;</code> value.
                        </p><p style="color:blue;">表示服务器将客户端验证为的用户的字符串。这是服务器用于权限检查的用户名，可能与<user>值不同。</user></p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;PRIV_USER&gt;jeffrey&lt;/PRIV_USER&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;PROXY_USER&gt;</code>
                        </p><p style="color:blue;">&lt;代理用户&gt;</p><p>
                            A string representing the proxy user (see
                            <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>). The value is empty if user
                            proxying is not in effect.
                        </p><p style="color:blue;">代表代理用户的字符串（见第6.2.14节“代理用户”）。如果用户代理未生效，则该值为空。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;PROXY_USER&gt;developer&lt;/PROXY_USER&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;SERVER_ID&gt;</code>
                        </p><p style="color:blue;">&lt;服务器ID&gt;</p><p>
                            An unsigned integer representing the server ID. This is
                            the same as the value of the
                            <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> system
                            variable.
                        </p><p style="color:blue;">表示服务器ID的无符号整数。这与服务器ID系统变量的值相同。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;SERVER_ID&gt;1&lt;/SERVER_ID&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;SQLTEXT&gt;</code>
                        </p><p>
                            A string representing the text of an SQL statement. The
                            value can be empty. Long values may be truncated. The
                            string, like the audit log file itself, is written using
                            UTF-8 (up to 4 bytes per character), so the value may be
                            the result of conversion. For example, the original
                            statement might have been received from the client as an
                            SJIS string.
                        </p><p style="color:blue;">表示SQL语句文本的字符串。值可以为空。长值可能被截断。字符串与审计日志文件本身一样，是使用utf-8（每个字符最多4个字节）编写的，因此该值可能是转换的结果。例如，原始语句可能作为sjis字符串从客户端接收。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;SQLTEXT&gt;DELETE FROM t1&lt;/SQLTEXT&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;STARTUP_OPTIONS&gt;</code>
                        </p><p style="color:blue;">&lt;启动选项&gt;</p><p>
                            A string representing the options that were given on the
                            command line or in option files when the MySQL server was
                            started. The first option is the path to the server
                            executable.
                        </p><p style="color:blue;">一个字符串，表示MySQL服务器启动时在命令行或选项文件中给定的选项。第一个选项是服务器可执行文件的路径。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;STARTUP_OPTIONS&gt;/usr/local/mysql/bin/mysqld
  --port=3306 --log_output=FILE&lt;/STARTUP_OPTIONS&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;STATUS&gt;</code>
                        </p><p style="color:blue;">&lt;状态&gt;</p><p>
                            An unsigned integer representing the command status: 0 for
                            success, nonzero if an error occurred. This is the same as
                            the value of the
                            <a class="link" href="connectors-apis.html#mysql-errno" title="27.8.7.14&nbsp;mysql_errno()"><code class="literal">mysql_errno()</code></a> C API
                            function. See the description for
                            <code class="literal">&lt;STATUS_CODE&gt;</code> for information
                            about how it differs from
                            <code class="literal">&lt;STATUS&gt;</code>.
                        </p><p style="color:blue;">表示命令状态的无符号整数：0表示成功，如果发生错误则为非零。这与mysql_errno（）c api函数的值相同。有关它与<status>的区别的信息，请参阅<status\u code="">的说明。</status\u></status></p><p>
                            The audit log does not contain the SQLSTATE value or error
                            message. To see the associations between error codes,
                            SQLSTATE values, and messages, see
                            <a class="xref" href="error-handling.html#server-error-reference" title="B.3.1&nbsp;Server Error Message Reference">Section&nbsp;B.3.1, “Server Error Message Reference”</a>.
                        </p><p style="color:blue;">审核日志不包含sqlstate值或错误消息。要查看错误代码、sqlstate值和消息之间的关联，请参阅“服务器错误消息参考”一节。</p><p>
                            Warnings are not logged.
                        </p><p style="color:blue;">未记录警告。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;STATUS&gt;1051&lt;/STATUS&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;STATUS_CODE&gt;</code>
                        </p><p style="color:blue;">&lt;状态代码&gt;</p><p>
                            An unsigned integer representing the command status: 0 for
                            success, 1 if an error occurred.
                        </p><p style="color:blue;">表示命令状态的无符号整数：0表示成功，1表示发生错误。</p><p>
                            The <code class="literal">STATUS_CODE</code> value differs from the
                            <code class="literal">STATUS</code> value:
                            <code class="literal">STATUS_CODE</code> is 0 for success and 1 for
                            error, which is compatible with the EZ_collector consumer
                            for Audit Vault. <code class="literal">STATUS</code> is the value of
                            the <a class="link" href="connectors-apis.html#mysql-errno" title="27.8.7.14&nbsp;mysql_errno()"><code class="literal">mysql_errno()</code></a> C API
                            function. This is 0 for success and nonzero for error, and
                            thus is not necessarily 1 for error.
                        </p><p style="color:blue;">status_code值与status值不同：status_code为0表示成功，为1表示错误，这与用于审核保管库的ez_收集器使用者兼容。status是mysql_errno（）c api函数的值。这是0表示成功，而非0表示错误，因此不一定是1表示错误。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;STATUS_CODE&gt;0&lt;/STATUS_CODE&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;USER&gt;</code>
                        </p><p style="color:blue;">&lt;用户&gt;</p><p>
                            A string representing the user name sent by the client.
                            This may differ from the
                            <code class="literal">&lt;PRIV_USER&gt;</code> value.
                        </p><p style="color:blue;">表示客户端发送的用户名的字符串。这可能与<priv_user>值不同。</priv_user></p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;USER&gt;root[root] @ localhost [127.0.0.1]&lt;/USER&gt;
</pre></li><li class="listitem"><p>
                            <code class="literal">&lt;VERSION&gt;</code>
                        </p><p style="color:blue;">&lt;版本&gt;</p><p>
                            An unsigned integer representing the version of the audit
                            log file format.
                        </p><p style="color:blue;">表示审核日志文件格式版本的无符号整数。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="xml" class="programlisting">&lt;VERSION&gt;1&lt;/VERSION&gt;
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-old-style-xml-format"></a>Old-Style XML Audit Log File Format</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Here is a sample log file in old-style XML format
                        (<a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format=OLD</code></a>),
                        reformatted slightly for readability:
                    </p><p style="color:blue;">下面是一个旧式XML格式（audit_log_format=old）的示例日志文件，为了可读性稍微重新格式化：</p><pre data-lang="xml" class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;AUDIT&gt;
  &lt;AUDIT_RECORD
    TIMESTAMP="2019-10-03T14:25:00 UTC"
    RECORD_ID="1_2019-10-03T14:25:00"
    NAME="Audit"
    SERVER_ID="1"
    VERSION="1"
    STARTUP_OPTIONS="--port=3306"
    OS_VERSION="i686-Linux"
    MYSQL_VERSION="5.7.21-log"/&gt;
  &lt;AUDIT_RECORD
    TIMESTAMP="2019-10-03T14:25:24 UTC"
    RECORD_ID="2_2019-10-03T14:25:00"
    NAME="Connect"
    CONNECTION_ID="4"
    STATUS="0"
    STATUS_CODE="0"
    USER="root"
    OS_LOGIN=""
    HOST="localhost"
    IP="127.0.0.1"
    COMMAND_CLASS="connect"
    CONNECTION_TYPE="SSL/TLS"
    PRIV_USER="root"
    PROXY_USER=""
    DB="test"/&gt;

...

  &lt;AUDIT_RECORD
    TIMESTAMP="2019-10-03T14:25:24 UTC"
    RECORD_ID="6_2019-10-03T14:25:00"
    NAME="Query"
    CONNECTION_ID="4"
    STATUS="0"
    STATUS_CODE="0"
    USER="root[root] @ localhost [127.0.0.1]"
    OS_LOGIN=""
    HOST="localhost"
    IP="127.0.0.1"
    COMMAND_CLASS="drop_table"
    SQLTEXT="DROP TABLE IF EXISTS t"/&gt;

...

  &lt;AUDIT_RECORD
    TIMESTAMP="2019-10-03T14:25:24 UTC"
    RECORD_ID="8_2019-10-03T14:25:00"
    NAME="Quit"
    CONNECTION_ID="4"
    STATUS="0"
    STATUS_CODE="0"
    USER="root"
    OS_LOGIN=""
    HOST="localhost"
    IP="127.0.0.1"
    COMMAND_CLASS="connect"
    CONNECTION_TYPE="SSL/TLS"/&gt;
  &lt;AUDIT_RECORD
    TIMESTAMP="2019-10-03T14:25:32 UTC"
    RECORD_ID="12_2019-10-03T14:25:00"
    NAME="NoAudit"
    SERVER_ID="1"/&gt;
&lt;/AUDIT&gt;
</pre><p>
                    The audit log file is written as XML, using UTF-8 (up to 4
                    bytes per character). The root element is
                    <code class="literal">&lt;AUDIT&gt;</code>. The root element contains
                    <code class="literal">&lt;AUDIT_RECORD&gt;</code> elements, each of
                    which provides information about an audited event. When the
                    audit log plugin begins writing a new log file, it writes the
                    XML declaration and opening <code class="literal">&lt;AUDIT&gt;</code>
                    root element tag. When the plugin closes a log file, it writes
                    the closing <code class="literal">&lt;/AUDIT&gt;</code> root element
                    tag. The closing tag is not present while the file is open.
                </p><p style="color:blue;">审计日志文件以xml形式写入，使用utf-8（每个字符最多4个字节）。根元素是<audit>。根元素包含<audit_record>元素，每个元素都提供有关已审核事件的信息。当审计日志插件开始写入新的日志文件时，它会写入xml声明并打开<audit>根元素标记。当插件关闭一个日志文件时，它会写入关闭的根元素标记。文件打开时不存在结束标记。</audit></audit_record></audit></p><p>
                    Attributes of <code class="literal">&lt;AUDIT_RECORD&gt;</code> elements
                    have these characteristics:
                </p><p style="color:blue;"><audit_record>元素的属性具有以下特征：</audit_record></p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Some attributes appear in every
                            <code class="literal">&lt;AUDIT_RECORD&gt;</code> element. Others
                            are optional and may appear depending on the audit record
                            type.
                        </p><p style="color:blue;">每个<audit_record>元素中都会出现一些属性。其他是可选的，可能根据审核记录类型而显示。</audit_record></p></li><li class="listitem"><p>
                            Order of attributes within an
                            <code class="literal">&lt;AUDIT_RECORD&gt;</code> element is not
                            guaranteed.
                        </p><p style="color:blue;">不能保证<audit_record>元素中属性的顺序。</audit_record></p></li><li class="listitem"><p>
                            Attribute values are not fixed length. Long values may be
                            truncated as indicated in the attribute descriptions given
                            later.
                        </p><p style="color:blue;">属性值不是固定长度。长值可能会被截断，如后面给出的属性描述所示。</p></li><li class="listitem"><p>
                            The <code class="literal">&lt;</code>, <code class="literal">&gt;</code>,
                            <code class="literal">"</code>, and <code class="literal">&amp;</code>
                            characters are encoded as <code class="literal">&amp;lt;</code>,
                            <code class="literal">&amp;gt;</code>,
                            <code class="literal">&amp;quot;</code>, and
                            <code class="literal">&amp;amp;</code>, respectively. NUL bytes
                            (U+00) are encoded as the <code class="literal">?</code> character.
                        </p><p style="color:blue;">&lt;、&gt;、“”和&amp;字符分别编码为&lt;；、&gt;；、"；和&amp;；。NUL字节（U+00）编码为？性格。</p></li><li class="listitem"><p>
                            Characters not valid as XML characters are encoded using
                            numeric character references. Valid XML characters are:
                        </p><p style="color:blue;">由于XML字符是使用数字字符引用编码的，因此字符无效。有效的XML字符为：</p><pre data-lang="none" class="programlisting">#x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]
</pre></li></ul>
                    </div>
                    <p>
                        The following attributes are mandatory in every
                        <code class="literal">&lt;AUDIT_RECORD&gt;</code> element:
                    </p><p style="color:blue;">每个<audit_record>元素都必须具有以下属性：</audit_record></p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">NAME</code>
                        </p><p style="color:blue;">姓名</p><p>
                            A string representing the type of instruction that
                            generated the audit event, such as a command that the
                            server received from a client.
                        </p><p style="color:blue;">表示生成审核事件的指令类型的字符串，例如服务器从客户端接收的命令。</p><p>
                            Example: <code class="literal">NAME="Query"</code>
                        </p><p style="color:blue;">示例：name=“query”</p><p>
                            Some common <code class="literal">NAME</code> values:
                        </p><p style="color:blue;">一些常见的名称值：</p><pre data-lang="none" class="programlisting">Audit    When auditing starts, which may be server startup time
Connect  When a client connects, also known as logging in
Query    An SQL statement (executed directly)
Prepare  Preparation of an SQL statement; usually followed by Execute
Execute  Execution of an SQL statement; usually follows Prepare
Shutdown Server shutdown
Quit     When a client disconnects
NoAudit  Auditing has been turned off
</pre><p>
                            The possible values are <code class="literal">Audit</code>,
                            <code class="literal">Binlog Dump</code>, <code class="literal">Change
                            user</code>, <code class="literal">Close stmt</code>,
                            <code class="literal">Connect Out</code>,
                            <code class="literal">Connect</code>, <code class="literal">Create DB</code>,
                            <code class="literal">Daemon</code>, <code class="literal">Debug</code>,
                            <code class="literal">Delayed insert</code>, <code class="literal">Drop
                            DB</code>, <code class="literal">Execute</code>,
                            <code class="literal">Fetch</code>, <code class="literal">Field List</code>,
                            <code class="literal">Init DB</code>, <code class="literal">Kill</code>,
                            <code class="literal">Long Data</code>, <code class="literal">NoAudit</code>,
                            <code class="literal">Ping</code>, <code class="literal">Prepare</code>,
                            <code class="literal">Processlist</code>, <code class="literal">Query</code>,
                            <code class="literal">Quit</code>, <code class="literal">Refresh</code>,
                            <code class="literal">Register Slave</code>, <code class="literal">Reset
                            stmt</code>, <code class="literal">Set option</code>,
                            <code class="literal">Shutdown</code>, <code class="literal">Sleep</code>,
                            <code class="literal">Statistics</code>, <code class="literal">Table
                            Dump</code>, <code class="literal">Time</code>.
                        </p><p style="color:blue;">可能的值包括audit、binlog dump、change user、close stmt、connect out、connect、create db、daemon、debug、delayed insert、drop db、execute、fetch、field list、init db、kill、long data、noaudit、ping、prepare、processlist、query、quit、refresh、register slave、reset stmt、set option、shutdown、sleep、statistics、table dump、time。</p><p>
                            With the exception of <code class="literal">"Audit"</code> and
                            <code class="literal">"NoAudit"</code>, these values correspond to
                            the <code class="literal">COM_<em class="replaceable"><code>xxx</code></em></code>
                            command values listed in the
                            <code class="filename">my_command.h</code> header file. For
                            example, <code class="literal">"Create DB"</code> and
                            <code class="literal">"Change user"</code> correspond to
                            <code class="literal">COM_CREATE_DB</code> and
                            <code class="literal">COM_CHANGE_USER</code>, respectively.
                        </p><p style="color:blue;">除了“audit”和“noaudit”，这些值对应于my_command.h头文件中列出的com_xxx命令值。例如，“create db”和“change user”分别对应于com_create_db和com_change_user。</p></li><li class="listitem"><p>
                            <code class="literal">RECORD_ID</code>
                        </p><p style="color:blue;">记录ID</p><p>
                            A unique identifier for the audit record. The value is
                            composed from a sequence number and timestamp, in the
                            format
                            <code class="literal"><em class="replaceable"><code>SEQ_TIMESTAMP</code></em></code>.
                            When the audit log plugin opens the audit log file, it
                            initializes the sequence number to the size of the audit
                            log file, then increments the sequence by 1 for each
                            record logged. The timestamp is a UTC value in
                            <code class="literal"><em class="replaceable"><code>YYYY-MM-DD</code></em>T<em class="replaceable"><code>hh:mm:ss</code></em></code>
                            format indicating the date and time when the audit log
                            plugin opened the file.
                        </p><p style="color:blue;">审核记录的唯一标识符。该值由序列号和时间戳组成，格式为seq_timestamp。当审计日志插件打开审计日志文件时，它将序列号初始化为审计日志文件的大小，然后将记录的每个记录的序列增加1。时间戳是一个UTC值，格式为yyyy-mm-ddthh:mm:ss，表示审核日志插件打开文件的日期和时间。</p><p>
                            Example:
                            <code class="literal">RECORD_ID="12_2019-10-03T14:25:00"</code>
                        </p><p style="color:blue;">示例：record_id=“12_2019-10-03t14:25:00”</p></li><li class="listitem"><p>
                            <code class="literal">TIMESTAMP</code>
                        </p><p style="color:blue;">时间戳</p><p>
                            A string representing a UTC value in
                            <code class="literal"><em class="replaceable"><code>YYYY-MM-DD</code></em>T<em class="replaceable"><code>hh:mm:ss</code></em>
                                UTC</code> format indicating the date and time when the
                            audit event was generated. For example, the event
                            corresponding to execution of an SQL statement received
                            from a client has a <code class="literal">TIMESTAMP</code> value
                            occurring after the statement finishes, not when it was
                            received.
                        </p><p style="color:blue;">表示UTC值的字符串，格式为yyyy-mm-ddthh:mm:ss-utc，表示生成审核事件的日期和时间。例如，与从客户端接收的SQL语句的执行相对应的事件具有在语句完成后发生的时间戳值，而不是在接收时发生的时间戳值。</p><p>
                            Example: <code class="literal">TIMESTAMP="2019-10-03T14:25:32
                            UTC"</code>
                        </p><p style="color:blue;">示例：timestamp=“2019-10-03t14:25:32 UTC”</p></li></ul>
                    </div>
                    <p>
                        The following attributes are optional in
                        <code class="literal">&lt;AUDIT_RECORD&gt;</code> elements. Many of them
                        occur only for elements with specific values of the
                        <code class="literal">NAME</code> attribute.
                    </p><p style="color:blue;">以下属性在<audit_record>元素中是可选的。其中许多只出现在具有name属性的特定值的元素中。</audit_record></p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">COMMAND_CLASS</code>
                        </p><p style="color:blue;">指挥类</p><p>
                            A string that indicates the type of action performed.
                        </p><p style="color:blue;">指示执行的操作类型的字符串。</p><p>
                            Example: <code class="literal">COMMAND_CLASS="drop_table"</code>
                        </p><p style="color:blue;">示例：command_class=“drop_table”</p><p>
                            The values correspond to the
                            <code class="literal">statement/sql/<em class="replaceable"><code>xxx</code></em></code>
                            command counters. For example,
                            <em class="replaceable"><code>xxx</code></em> is
                            <code class="literal">drop_table</code> and
                            <code class="literal">select</code> for <a class="link" href="sql-syntax.html#drop-table" title="13.1.29&nbsp;DROP TABLE Syntax"><code class="literal">DROP
                            TABLE</code></a> and <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>
                            statements, respectively. The following statement displays
                            the possible names:
                        </p><p style="color:blue;">这些值对应于statement/sql/xxx命令计数器。例如，xxx分别是drop_table和select for drop table和select语句。以下语句显示可能的名称：</p><pre data-lang="sql" class="programlisting">SELECT REPLACE(EVENT_NAME, 'statement/sql/', '') AS name
FROM performance_schema.events_statements_summary_global_by_event_name
WHERE EVENT_NAME LIKE 'statement/sql/%'
ORDER BY name;
</pre></li><li class="listitem"><p>
                            <code class="literal">CONNECTION_ID</code>
                        </p><p style="color:blue;">连接ID</p><p>
                            An unsigned integer representing the client connection
                            identifier. This is the same as the value returned by the
                            <a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> function
                            within the session.
                        </p><p style="color:blue;">表示客户端连接标识符的无符号整数。这与会话中connection_id（）函数返回的值相同。</p><p>
                            Example: <code class="literal">CONNECTION_ID="127"</code>
                        </p><p style="color:blue;">示例：connection_id=“127”</p></li><li class="listitem"><p>
                            <code class="literal">CONNECTION_TYPE</code>
                        </p><p style="color:blue;">连接类型</p><p>
                            The security state of the connection to the server.
                            Permitted values are <code class="literal">TCP/IP</code> (TCP/IP
                            connection established without encryption),
                            <code class="literal">SSL/TLS</code> (TCP/IP connection established
                            with encryption), <code class="literal">Socket</code> (Unix socket
                            file connection), <code class="literal">Named Pipe</code> (Windows
                            named pipe connection), and <code class="literal">Shared
                            Memory</code> (Windows shared memory connection).
                        </p><p style="color:blue;">到服务器的连接的安全状态。允许的值包括TCP/IP（未经加密而建立的TCP/IP连接）、SSL/TLS（经加密而建立的TCP/IP连接）、套接字（Unix套接字文件连接）、命名管道（Windows命名管道连接）和共享内存（Windows共享内存连接）。</p><p>
                            Example: <code class="literal">CONNECTION_TYPE="SSL/TLS"</code>
                        </p><p style="color:blue;">示例：connection_type=“ssl/tls”</p></li><li class="listitem"><p>
                            <code class="literal">DB</code>
                        </p><p style="color:blue;">分贝</p><p>
                            A string representing the default database name.
                        </p><p style="color:blue;">表示默认数据库名称的字符串。</p><p>
                            Example: <code class="literal">DB="test"</code>
                        </p><p style="color:blue;">示例：db=“测试”</p></li><li class="listitem"><p>
                            <code class="literal">HOST</code>
                        </p><p style="color:blue;">主持人</p><p>
                            A string representing the client host name.
                        </p><p style="color:blue;">表示客户端主机名的字符串。</p><p>
                            Example: <code class="literal">HOST="localhost"</code>
                        </p><p style="color:blue;">示例：host=“localhost”</p></li><li class="listitem"><p>
                            <code class="literal">IP</code>
                        </p><p style="color:blue;">知识产权</p><p>
                            A string representing the client IP address.
                        </p><p style="color:blue;">表示客户端IP地址的字符串。</p><p>
                            Example: <code class="literal">IP="127.0.0.1"</code>
                        </p><p style="color:blue;">示例：IP=“127.0.0.1”</p></li><li class="listitem"><p>
                            <code class="literal">MYSQL_VERSION</code>
                        </p><p style="color:blue;">mysql_版本</p><p>
                            A string representing the MySQL server version. This is
                            the same as the value of the
                            <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a> function or
                            <a class="link" href="server-administration.html#sysvar_version"><code class="literal">version</code></a> system variable.
                        </p><p style="color:blue;">表示mysql服务器版本的字符串。这与version（）函数或version系统变量的值相同。</p><p>
                            Example: <code class="literal">MYSQL_VERSION="5.7.21-log"</code>
                        </p><p style="color:blue;">示例：mysql_version=“5.7.21-log”</p></li><li class="listitem"><p>
                            <code class="literal">OS_LOGIN</code>
                        </p><p style="color:blue;">操作系统登录</p><p>
                            A string representing the external user name used during
                            the authentication process, as set by the plugin used to
                            authenticate the client. With native (built-in) MySQL
                            authentication, or if the plugin does not set the value,
                            this attribute is empty. The value is the same as that of
                            the <a class="link" href="server-administration.html#sysvar_external_user"><code class="literal">external_user</code></a> system
                            variable (see <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>).
                        </p><p style="color:blue;">表示身份验证过程中使用的外部用户名的字符串，由用于对客户端进行身份验证的插件设置。使用本机（内置）mysql身份验证，或者如果插件未设置该值，则此属性为空。该值与外部用户系统变量的值相同（请参见第6.2.14节“代理用户”）。</p><p>
                            Example: <code class="literal">OS_LOGIN="jeffrey"</code>
                        </p><p style="color:blue;">示例：os_login=“杰弗里”</p></li><li class="listitem"><p>
                            <code class="literal">OS_VERSION</code>
                        </p><p style="color:blue;">操作系统版本</p><p>
                            A string representing the operating system on which the
                            server was built or is running.
                        </p><p style="color:blue;">表示在其上生成或运行服务器的操作系统的字符串。</p><p>
                            Example: <code class="literal">OS_VERSION="x86_64-Linux"</code>
                        </p><p style="color:blue;">示例：os_version=“x86_64-linux”</p></li><li class="listitem"><p>
                            <code class="literal">PRIV_USER</code>
                        </p><p style="color:blue;">私人用户</p><p>
                            A string representing the user that the server
                            authenticated the client as. This is the user name that
                            the server uses for privilege checking, and it may differ
                            from the <code class="literal">USER</code> value.
                        </p><p style="color:blue;">表示服务器将客户端验证为的用户的字符串。这是服务器用于权限检查的用户名，可能与用户值不同。</p><p>
                            Example: <code class="literal">PRIV_USER="jeffrey"</code>
                        </p><p style="color:blue;">示例：priv_user=“jeffrey”</p></li><li class="listitem"><p>
                            <code class="literal">PROXY_USER</code>
                        </p><p style="color:blue;">代理用户</p><p>
                            A string representing the proxy user (see
                            <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>). The value is empty if user
                            proxying is not in effect.
                        </p><p style="color:blue;">代表代理用户的字符串（见第6.2.14节“代理用户”）。如果用户代理未生效，则该值为空。</p><p>
                            Example: <code class="literal">PROXY_USER="developer"</code>
                        </p><p style="color:blue;">示例：proxy_user=“开发人员”</p></li><li class="listitem"><p>
                            <code class="literal">SERVER_ID</code>
                        </p><p style="color:blue;">服务器ID</p><p>
                            An unsigned integer representing the server ID. This is
                            the same as the value of the
                            <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> system
                            variable.
                        </p><p style="color:blue;">表示服务器ID的无符号整数。这与服务器ID系统变量的值相同。</p><p>
                            Example: <code class="literal">SERVER_ID="1"</code>
                        </p><p style="color:blue;">示例：server_id=“1”</p></li><li class="listitem"><p>
                            <code class="literal">SQLTEXT</code>
                        </p><p style="color:blue;">SqlText格式</p><p>
                            A string representing the text of an SQL statement. The
                            value can be empty. Long values may be truncated. The
                            string, like the audit log file itself, is written using
                            UTF-8 (up to 4 bytes per character), so the value may be
                            the result of conversion. For example, the original
                            statement might have been received from the client as an
                            SJIS string.
                        </p><p style="color:blue;">表示SQL语句文本的字符串。值可以为空。长值可能被截断。字符串与审计日志文件本身一样，是使用utf-8（每个字符最多4个字节）编写的，因此该值可能是转换的结果。例如，原始语句可能作为sjis字符串从客户端接收。</p><p>
                            Example: <code class="literal">SQLTEXT="DELETE FROM t1"</code>
                        </p><p style="color:blue;">示例：sqltext=“从T1中删除”</p></li><li class="listitem"><p>
                            <code class="literal">STARTUP_OPTIONS</code>
                        </p><p style="color:blue;">启动选项</p><p>
                            A string representing the options that were given on the
                            command line or in option files when the MySQL server was
                            started.
                        </p><p style="color:blue;">一个字符串，表示MySQL服务器启动时在命令行或选项文件中给定的选项。</p><p>
                            Example: <code class="literal">STARTUP_OPTIONS="--port=3306
                            --log_output=FILE"</code>
                        </p><p style="color:blue;">示例：startup_options=“--port=3306--log_output=file”</p></li><li class="listitem"><p>
                            <code class="literal">STATUS</code>
                        </p><p style="color:blue;">地位</p><p>
                            An unsigned integer representing the command status: 0 for
                            success, nonzero if an error occurred. This is the same as
                            the value of the
                            <a class="link" href="connectors-apis.html#mysql-errno" title="27.8.7.14&nbsp;mysql_errno()"><code class="literal">mysql_errno()</code></a> C API
                            function. See the description for
                            <code class="literal">STATUS_CODE</code> for information about how
                            it differs from <code class="literal">STATUS</code>.
                        </p><p style="color:blue;">表示命令状态的无符号整数：0表示成功，如果发生错误则为非零。这与mysql_errno（）c api函数的值相同。有关它与状态的区别的信息，请参阅状态代码的说明。</p><p>
                            The audit log does not contain the SQLSTATE value or error
                            message. To see the associations between error codes,
                            SQLSTATE values, and messages, see
                            <a class="xref" href="error-handling.html#server-error-reference" title="B.3.1&nbsp;Server Error Message Reference">Section&nbsp;B.3.1, “Server Error Message Reference”</a>.
                        </p><p style="color:blue;">审核日志不包含sqlstate值或错误消息。要查看错误代码、sqlstate值和消息之间的关联，请参阅“服务器错误消息参考”一节。</p><p>
                            Warnings are not logged.
                        </p><p style="color:blue;">未记录警告。</p><p>
                            Example: <code class="literal">STATUS="1051"</code>
                        </p><p style="color:blue;">示例：status=“1051”</p></li><li class="listitem"><p>
                            <code class="literal">STATUS_CODE</code>
                        </p><p style="color:blue;">状态代码</p><p>
                            An unsigned integer representing the command status: 0 for
                            success, 1 if an error occurred.
                        </p><p style="color:blue;">表示命令状态的无符号整数：0表示成功，1表示发生错误。</p><p>
                            The <code class="literal">STATUS_CODE</code> value differs from the
                            <code class="literal">STATUS</code> value:
                            <code class="literal">STATUS_CODE</code> is 0 for success and 1 for
                            error, which is compatible with the EZ_collector consumer
                            for Audit Vault. <code class="literal">STATUS</code> is the value of
                            the <a class="link" href="connectors-apis.html#mysql-errno" title="27.8.7.14&nbsp;mysql_errno()"><code class="literal">mysql_errno()</code></a> C API
                            function. This is 0 for success and nonzero for error, and
                            thus is not necessarily 1 for error.
                        </p><p style="color:blue;">status_code值与status值不同：status_code为0表示成功，为1表示错误，这与用于审核保管库的ez_收集器使用者兼容。status是mysql_errno（）c api函数的值。这是0表示成功，而非0表示错误，因此不一定是1表示错误。</p><p>
                            Example: <code class="literal">STATUS_CODE="0"</code>
                        </p><p style="color:blue;">示例：status_code=“0”</p></li><li class="listitem"><p>
                            <code class="literal">USER</code>
                        </p><p style="color:blue;">用户</p><p>
                            A string representing the user name sent by the client.
                            This may differ from the <code class="literal">PRIV_USER</code>
                            value.
                        </p><p style="color:blue;">表示客户端发送的用户名的字符串。这可能与priv_用户值不同。</p></li><li class="listitem"><p>
                            <code class="literal">VERSION</code>
                        </p><p style="color:blue;">版本</p><p>
                            An unsigned integer representing the version of the audit
                            log file format.
                        </p><p style="color:blue;">表示审核日志文件格式版本的无符号整数。</p><p>
                            Example: <code class="literal">VERSION="1"</code>
                        </p><p style="color:blue;">示例：version=“1”</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-json-format"></a>JSON Audit Log File Format</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        For JSON-format audit logging
                        (<a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format=JSON</code></a>), the
                        log file contents form a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                        array with each array element representing an audited event as
                        a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash of key-value pairs.
                        Examples of complete event records appear later in this
                        section. The following is an excerpt of partial events:
                    </p><p style="color:blue;">对于json格式的审计日志（audit_log_format=json），日志文件内容形成一个json数组，每个数组元素将一个已审计事件表示为键值对的json散列。完整事件记录的示例将出现在本节后面。以下是部分事件的摘录：</p><pre data-lang="json" class="programlisting">[
  {
    "timestamp": "2019-10-03 13:50:01",
    "id": 0,
    "class": "audit",
    "event": "startup",
    ...
  },
  {
    "timestamp": "2019-10-03 15:02:32",
    "id": 0,
    "class": "connection",
    "event": "connect",
    ...
  },
  ...
  {
    "timestamp": "2019-10-03 17:37:26",
    "id": 0,
    "class": "table_access",
    "event": "insert",
      ...
  }
  ...
]
</pre><p>
                    The audit log file is written using UTF-8 (up to 4 bytes per
                    character). When the audit log plugin begins writing a new log
                    file, it writes the opening <code class="literal">[</code> array marker.
                    When the plugin closes a log file, it writes the closing
                    <code class="literal">]</code> array marker. The closing marker is not
                    present while the file is open.
                </p><p style="color:blue;">审核日志文件使用utf-8（每个字符最多4字节）写入。当审计日志插件开始写入新的日志文件时，它会写入opening[array marker]。当插件关闭日志文件时，它会写入关闭]数组标记。文件打开时，关闭标记不存在。</p><p>
                    Items within audit records have these characteristics:
                </p><p style="color:blue;">审计记录中的项目具有以下特征：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Some items appear in every audit record. Others are
                            optional and may appear depending on the audit record
                            type.
                        </p><p style="color:blue;">有些项目出现在每个审计记录中。其他是可选的，可能根据审核记录类型而显示。</p></li><li class="listitem"><p>
                            Order of items within an audit record is not guaranteed.
                        </p><p style="color:blue;">不保证审核记录中项目的顺序。</p></li><li class="listitem"><p>
                            Item values are not fixed length. Long values may be
                            truncated as indicated in the item descriptions given
                            later.
                        </p><p style="color:blue;">项值不是固定长度。长值可能会被截断，如后面给出的项描述所示。</p></li><li class="listitem"><p>
                            The <code class="literal">"</code> and <code class="literal">\</code>
                            characters are encoded as <code class="literal">\"</code> and
                            <code class="literal">\\</code>, respectively.
                        </p><p style="color:blue;">“和\字符分别编码为”和“\”。</p></li></ul>
                    </div>
                    <p>
                        The following examples show the JSON object formats for
                        different event types (as indicated by the
                        <code class="literal">class</code> and <code class="literal">event</code> items),
                        reformatted slightly for readability:
                    </p><p style="color:blue;">以下示例显示了不同事件类型（如类和事件项所示）的JSON对象格式，为可读性稍微重新格式化：</p><p>
                    Auditing startup event:
                </p><p style="color:blue;">审核启动事件：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 14:21:56",
  "id": 0,
  "class": "audit",
  "event": "startup",
  "connection_id": 0,
  "startup_data": { "server_id": 1,
                    "os_version": "i686-Linux",
                    "mysql_version": "5.7.21-log",
                    "args": ["/usr/local/mysql/bin/mysqld",
                             "--loose-audit-log-format=JSON",
                             "--log-error=log.err",
                             "--pid-file=mysqld.pid",
                             "--port=3306" ] } }
</pre><p>
                    When the audit log plugin starts as a result of server startup
                    (as opposed to being enabled at runtime),
                    <code class="literal">connection_id</code> is set to 0, and
                    <code class="literal">account</code> and <code class="literal">login</code> are
                    not present.
                </p><p style="color:blue;">当审核日志插件在服务器启动后启动（而不是在运行时启用）时，连接ID设置为0，并且帐户和登录不存在。</p><p>
                    Auditing shutdown event:
                </p><p style="color:blue;">审核关闭事件：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 14:28:20",
  "id": 3,
  "class": "audit",
  "event": "shutdown",
  "connection_id": 0,
  "shutdown_data": { "server_id": 1 } }
</pre><p>
                    When the audit log plugin is uninstalled as a result of server
                    shutdown (as opposed to being disabled at runtime),
                    <code class="literal">connection_id</code> is set to 0, and
                    <code class="literal">account</code> and <code class="literal">login</code> are
                    not present.
                </p><p style="color:blue;">如果由于服务器关闭而卸载审核日志插件（而不是在运行时禁用），则连接ID设置为0，并且不存在帐户和登录名。</p><p>
                    Connect or change-user event:
                </p><p style="color:blue;">连接或更改用户事件：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 14:23:18",
  "id": 1,
  "class": "connection",
  "event": "connect",
  "connection_id": 5,
  "account": { "user": "root", "host": "localhost" },
  "login": { "user": "root", "os": "", "ip": "::1", "proxy": "" },
  "connection_data": { "connection_type": "ssl",
                       "status": 0,
                       "db": "test" } }
</pre><p>
                    Disconnect event:
                </p><p style="color:blue;">断开连接事件：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 14:24:45",
  "id": 3,
  "class": "connection",
  "event": "disconnect",
  "connection_id": 5,
  "account": { "user": "root", "host": "localhost" },
  "login": { "user": "root", "os": "", "ip": "::1", "proxy": "" },
  "connection_data": { "connection_type": "ssl" } }
</pre><p>
                    Query event:
                </p><p style="color:blue;">查询事件：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 14:23:35",
  "id": 2,
  "class": "general",
  "event": "status",
  "connection_id": 5,
  "account": { "user": "root", "host": "localhost" },
  "login": { "user": "root", "os": "", "ip": "::1", "proxy": "" },
  "general_data": { "command": "Query",
                    "sql_command": "show_variables",
                    "query": "SHOW VARIABLES",
                    "status": 0 } }
</pre><p>
                    Table access event (read, delete, insert, update):
                </p><p style="color:blue;">表访问事件（读取、删除、插入、更新）：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 14:23:41",
  "id": 0,
  "class": "table_access",
  "event": "insert",
  "connection_id": 5,
  "account": { "user": "root", "host": "localhost" },
  "login": { "user": "root", "os": "", "ip": "127.0.0.1", "proxy": "" },
  "table_access_data": { "db": "test",
                         "table": "t1",
                         "query": "INSERT INTO t1 (i) VALUES(1),(2),(3)",
                         "sql_command": "insert" } }
</pre><p>
                    The items in the following list appear at the top level of
                    JSON-format audit records: Each item value is either a scalar
                    or a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash. For items that
                    have a hash value, the description lists only the item names
                    within that hash. For more complete descriptions of
                    second-level hash items, see later in this section.
                </p><p style="color:blue;">以下列表中的项显示在json格式审核记录的顶层：每个项值都是标量或json散列。对于具有哈希值的项，说明仅列出该哈希中的项名称。有关二级哈希项的更完整描述，请参阅本节后面的内容。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">account</code>
                        </p><p style="color:blue;">解释</p><p>
                            The MySQL account associated with the event. The value is
                            a hash containing these items equivalent to the value of
                            the <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function
                            within the section: <code class="literal">user</code>,
                            <code class="literal">host</code>.
                        </p><p style="color:blue;">与事件关联的MySQL帐户。该值是一个散列，包含这些项，这些项相当于“用户，主机”部分中当前的_user（）函数的值。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"account": { "user": "root", "host": "localhost" }
</pre></li><li class="listitem"><p>
                            <code class="literal">class</code>
                        </p><p style="color:blue;">班</p><p>
                            A string representing the event class. The class defines
                            the type of event, when taken together with the
                            <code class="literal">event</code> item that specifies the event
                            subclass.
                        </p><p style="color:blue;">表示事件类的字符串。当与指定事件子类的事件项一起使用时，该类定义事件的类型。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"class": "connection"
</pre><p>
                            The following table shows the permitted combinations of
                            <code class="literal">class</code> and <code class="literal">event</code>
                            values.
                        </p><p style="color:blue;">下表显示了类和事件值的允许组合。</p>
                            <div class="table">
                                <a name="audit-log-class-event-combinations"></a><p class="title"><b>Table&nbsp;6.24&nbsp;Audit Log Class and Event Combinations</b></p><p style="color:blue;">表6.24审计日志类和事件组合</p>
                                <div class="table-contents">
                                    <table summary="Permitted combinations of audit log class and event values."><colgroup><col width="30%"><col width="40%"></colgroup><thead><tr>
                                        <th scope="col">Class Value</th>
                                        <th scope="col">Permitted Event Values</th>
                                    </tr></thead><tbody><tr>
                                        <th scope="row" align="left"><code class="literal">audit</code></th>
                                        <td><code class="literal">startup</code>, <code class="literal">shutdown</code></td>
                                    </tr><tr>
                                        <th scope="row" align="left"><code class="literal">connection</code></th>
                                        <td><code class="literal">connect</code>, <code class="literal">change_user</code>,
                                            <code class="literal">disconnect</code></td>
                                    </tr><tr>
                                        <th scope="row" align="left"><code class="literal">general</code></th>
                                        <td><code class="literal">status</code></td>
                                    </tr><tr>
                                        <th scope="row" align="left"><code class="literal">table_access_data</code></th>
                                        <td><code class="literal">read</code>, <code class="literal">delete</code>,
                                            <code class="literal">insert</code>, <code class="literal">update</code></td>
                                    </tr></tbody></table>
                                </div>

                            </div>
                            <br class="table-break"></li><li class="listitem"><p>
                            <code class="literal">connection_data</code>
                        </p><p style="color:blue;">连接数据</p><p>
                            Information about a client connection. The value is a hash
                            containing these items:
                            <code class="literal">connection_type</code>,
                            <code class="literal">status</code>, <code class="literal">db</code>. This
                            item occurs only for audit records with a
                            <code class="literal">class</code> value of
                            <code class="literal">connection</code>.
                        </p><p style="color:blue;">有关客户端连接的信息。该值是包含以下项的哈希：连接类型、状态、数据库。此项仅对类值为connection的审核记录发生。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"connection_data": { "connection_type": "ssl",
                     "status": 0,
                     "db": "test" }
</pre></li><li class="listitem"><p>
                            <code class="literal">connection_id</code>
                        </p><p style="color:blue;">连接ID</p><p>
                            An unsigned integer representing the client connection
                            identifier. This is the same as the value returned by the
                            <a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a> function
                            within the session.
                        </p><p style="color:blue;">表示客户端连接标识符的无符号整数。这与会话中connection_id（）函数返回的值相同。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"connection_id": 5
</pre></li><li class="listitem"><p>
                            <code class="literal">event</code>
                        </p><p style="color:blue;">事件</p><p>
                            A string representing the subclass of the event class. The
                            subclass defines the type of event, when taken together
                            with the <code class="literal">class</code> item that specifies the
                            event class. For more information, see the
                            <code class="literal">class</code> item description.
                        </p><p style="color:blue;">表示事件类的子类的字符串。子类定义事件的类型，当与指定事件类的类项一起使用时。有关详细信息，请参见类项说明。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"event": "connect"
</pre></li><li class="listitem"><p>
                            <code class="literal">general_data</code>
                        </p><p style="color:blue;">通用数据</p><p>
                            Information about an executed statement or command. The
                            value is a hash containing these items:
                            <code class="literal">command</code>,
                            <code class="literal">sql_command</code>, <code class="literal">query</code>,
                            <code class="literal">status</code>. This item occurs only for audit
                            records with a <code class="literal">class</code> value of
                            <code class="literal">general</code>.
                        </p><p style="color:blue;">有关已执行语句或命令的信息。值是包含以下项的哈希：command、sql_command、query、status。此项仅适用于类值为“常规”的审核记录。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"general_data": { "command": "Query",
                  "sql_command": "show_variables",
                  "query": "SHOW VARIABLES",
                  "status": 0 }
</pre></li><li class="listitem"><p>
                            <code class="literal">id</code>
                        </p><p style="color:blue;">身份证件</p><p>
                            An unsigned integer representing an event ID.
                        </p><p style="color:blue;">表示事件ID的无符号整数。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"id": 2
</pre><p>
                            For audit records that have the same
                            <code class="literal">timestamp</code> value, their
                            <code class="literal">id</code> values distinguish them and form a
                            sequence. Within the audit log,
                            <code class="literal">timestamp</code>/<code class="literal">id</code> pairs
                            are unique. These pairs are bookmarks that identify event
                            locations within the log.
                        </p><p style="color:blue;">对于具有相同时间戳值的审核记录，它们的id值将它们区分开来并形成一个序列。在审核日志中，时间戳/ID对是唯一的。这些对是标识日志中事件位置的书签。</p></li><li class="listitem"><p>
                            <code class="literal">login</code>
                        </p><p style="color:blue;">登录</p><p>
                            Information indicating how a client connected to the
                            server. The value is a hash containing these items:
                            <code class="literal">user</code>, <code class="literal">os</code>,
                            <code class="literal">ip</code>, <code class="literal">proxy</code>.
                        </p><p style="color:blue;">指示客户端如何连接到服务器的信息。该值是包含以下项的哈希：用户、操作系统、IP、代理。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"login": { "user": "root", "os": "", "ip": "::1", "proxy": "" }
</pre></li><li class="listitem"><p>
                            <code class="literal">shutdown_data</code>
                        </p><p style="color:blue;">关机数据</p><p>
                            Information pertaining to audit log plugin termination.
                            The value is a hash containing these items:
                            <code class="literal">server_id</code> This item occurs only for
                            audit records with <code class="literal">class</code> and
                            <code class="literal">event</code> values of
                            <code class="literal">audit</code> and <code class="literal">shutdown</code>,
                            respectively.
                        </p><p style="color:blue;">有关审核日志插件终止的信息。该值是包含这些项的哈希值：server_id此项仅用于分别具有audit和shutdown类和事件值的审核记录。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"shutdown_data": { "server_id": 1 }
</pre></li><li class="listitem"><p>
                            <code class="literal">startup_data</code>
                        </p><p style="color:blue;">启动数据</p><p>
                            Information pertaining to audit log plugin initialization.
                            The value is a hash containing these items:
                            <code class="literal">server_id</code>,
                            <code class="literal">os_version</code>,
                            <code class="literal">mysql_version</code>, <code class="literal">args</code>.
                            This item occurs only for audit records with
                            <code class="literal">class</code> and <code class="literal">event</code>
                            values of <code class="literal">audit</code> and
                            <code class="literal">startup</code>, respectively.
                        </p><p style="color:blue;">有关审核日志插件初始化的信息。该值是包含以下项的哈希：服务器ID、操作系统版本、MySQL版本、参数。此项仅适用于分别具有“审核”和“启动”的类和事件值的审核记录。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"startup_data": { "server_id": 1,
                  "os_version": "i686-Linux",
                  "mysql_version": "5.7.21-log",
                  "args": ["/usr/local/mysql/bin/mysqld",
                           "--loose-audit-log-format=JSON",
                           "--log-error=log.err",
                           "--pid-file=mysqld.pid",
                           "--port=3306" ] }
</pre></li><li class="listitem"><p>
                            <code class="literal">table_access_data</code>
                        </p><p style="color:blue;">访问数据表</p><p>
                            Information about an access to a table. The value is a
                            hash containing these items: <code class="literal">db</code>,
                            <code class="literal">table</code>, <code class="literal">query</code>,
                            <code class="literal">sql_command</code>, This item occurs only for
                            audit records with a <code class="literal">class</code> value of
                            <code class="literal">table_access</code>.
                        </p><p style="color:blue;">有关访问表的信息。该值是包含以下项的哈希：db、table、query、sql_命令，此项仅对类值为table_access的审核记录发生。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"table_access_data": { "db": "test",
                       "table": "t1",
                       "query": "INSERT INTO t1 (i) VALUES(1),(2),(3)",
                       "sql_command": "insert" }
</pre></li><li class="listitem"><p>
                            <code class="literal">timestamp</code>
                        </p><p style="color:blue;">时间戳</p><p>
                            A string representing a UTC value in
                            <em class="replaceable"><code>YYYY-MM-DD hh:mm:ss</code></em> format
                            indicating the date and time when the audit event was
                            generated. For example, the event corresponding to
                            execution of an SQL statement received from a client has a
                            <code class="literal">timestamp</code> value occurring after the
                            statement finishes, not when it was received.
                        </p><p style="color:blue;">表示UTC值的字符串，格式为yyyy-mm-dd hh:mm:ss，表示生成审核事件的日期和时间。例如，与从客户端接收的SQL语句的执行相对应的事件具有在语句完成后发生的时间戳值，而不是在接收时发生的时间戳值。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"timestamp": "2019-10-03 13:50:01"
</pre><p>
                            For audit records that have the same
                            <code class="literal">timestamp</code> value, their
                            <code class="literal">id</code> values distinguish them and form a
                            sequence. Within the audit log,
                            <code class="literal">timestamp</code>/<code class="literal">id</code> pairs
                            are unique. These pairs are bookmarks that identify event
                            locations within the log.
                        </p><p style="color:blue;">对于具有相同时间戳值的审核记录，它们的id值将它们区分开来并形成一个序列。在审核日志中，时间戳/ID对是唯一的。这些对是标识日志中事件位置的书签。</p></li></ul>
                    </div>
                    <p>
                        These items appear within hash values associated with
                        top-level items of JSON-format audit records:
                    </p><p style="color:blue;">这些项出现在与json格式审核记录的顶级项关联的哈希值中：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">args</code>
                        </p><p style="color:blue;">阿尔茨海默病</p><p>
                            An array of options that were given on the command line or
                            in option files when the MySQL server was started. The
                            first option is the path to the server executable.
                        </p><p style="color:blue;">启动mysql服务器时在命令行或选项文件中提供的选项数组。第一个选项是服务器可执行文件的路径。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"args": ["/usr/local/mysql/bin/mysqld",
         "--loose-audit-log-format=JSON",
         "--log-error=log.err",
         "--pid-file=mysqld.pid",
         "--port=3306" ]
</pre></li><li class="listitem"><p>
                            <code class="literal">command</code>
                        </p><p style="color:blue;">命令</p><p>
                            A string representing the type of instruction that
                            generated the audit event, such as a command that the
                            server received from a client.
                        </p><p style="color:blue;">表示生成审核事件的指令类型的字符串，例如服务器从客户端接收的命令。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"command": "Query"
</pre></li><li class="listitem"><p>
                            <code class="literal">connection_type</code>
                        </p><p style="color:blue;">连接类型</p><p>
                            The security state of the connection to the server.
                            Permitted values are <code class="literal">tcp/ip</code> (TCP/IP
                            connection established without encryption),
                            <code class="literal">ssl</code> (TCP/IP connection established with
                            encryption), <code class="literal">socket</code> (Unix socket file
                            connection), <code class="literal">named_pipe</code> (Windows named
                            pipe connection), and <code class="literal">shared_memory</code>
                            (Windows shared memory connection).
                        </p><p style="color:blue;">到服务器的连接的安全状态。允许的值包括TCP/IP（未经加密而建立的TCP/IP连接）、SSL（经加密而建立的TCP/IP连接）、套接字（Unix套接字文件连接）、命名管道（Windows命名管道连接）和共享内存（Windows共享内存连接）。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"connection_type": "tcp/tcp"
</pre></li><li class="listitem"><p>
                            <code class="literal">db</code>
                        </p><p style="color:blue;">分贝</p><p>
                            A string representing a database name. For
                            <code class="literal">connection_data</code>, it is the default
                            database. For <code class="literal">table_access_data</code>, it is
                            the table database.
                        </p><p style="color:blue;">表示数据库名称的字符串。对于连接数据，它是默认数据库。对于表访问数据，它是表数据库。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"db": "test"
</pre></li><li class="listitem"><p>
                            <code class="literal">host</code>
                        </p><p style="color:blue;">主办</p><p>
                            A string representing the client host name.
                        </p><p style="color:blue;">表示客户端主机名的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"host": "localhost"
</pre></li><li class="listitem"><p>
                            <code class="literal">ip</code>
                        </p><p style="color:blue;">知识产权</p><p>
                            A string representing the client IP address.
                        </p><p style="color:blue;">表示客户端IP地址的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"ip": "::1"
</pre></li><li class="listitem"><p>
                            <code class="literal">mysql_version</code>
                        </p><p style="color:blue;">mysql_版本</p><p>
                            A string representing the MySQL server version. This is
                            the same as the value of the
                            <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a> function or
                            <a class="link" href="server-administration.html#sysvar_version"><code class="literal">version</code></a> system variable.
                        </p><p style="color:blue;">表示mysql服务器版本的字符串。这与version（）函数或version系统变量的值相同。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"mysql_version": "5.7.21-log"
</pre></li><li class="listitem"><p>
                            <code class="literal">os</code>
                        </p><p style="color:blue;">操作系统</p><p>
                            A string representing the external user name used during
                            the authentication process, as set by the plugin used to
                            authenticate the client. With native (built-in) MySQL
                            authentication, or if the plugin does not set the value,
                            this attribute is empty. The value is the same as that of
                            the <a class="link" href="server-administration.html#sysvar_external_user"><code class="literal">external_user</code></a> system
                            variable. See <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>.
                        </p><p style="color:blue;">表示身份验证过程中使用的外部用户名的字符串，由用于对客户端进行身份验证的插件设置。使用本机（内置）mysql身份验证，或者如果插件未设置该值，则此属性为空。该值与外部用户系统变量的值相同。见第6.2.14节“代理用户”。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"os": "jeffrey"
</pre></li><li class="listitem"><p>
                            <code class="literal">os_version</code>
                        </p><p style="color:blue;">操作系统版本</p><p>
                            A string representing the operating system on which the
                            server was built or is running.
                        </p><p style="color:blue;">表示在其上生成或运行服务器的操作系统的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"os_version": "i686-Linux"
</pre></li><li class="listitem"><p>
                            <code class="literal">proxy</code>
                        </p><p style="color:blue;">代理</p><p>
                            A string representing the proxy user (see
                            <a class="xref" href="security.html#proxy-users" title="6.2.14&nbsp;Proxy Users">Section&nbsp;6.2.14, “Proxy Users”</a>). The value is empty if user
                            proxying is not in effect.
                        </p><p style="color:blue;">代表代理用户的字符串（见第6.2.14节“代理用户”）。如果用户代理未生效，则该值为空。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"proxy": "developer"
</pre></li><li class="listitem"><p>
                            <code class="literal">query</code>
                        </p><p style="color:blue;">查询</p><p>
                            A string representing the text of an SQL statement. The
                            value can be empty. Long values may be truncated. The
                            string, like the audit log file itself, is written using
                            UTF-8 (up to 4 bytes per character), so the value may be
                            the result of conversion. For example, the original
                            statement might have been received from the client as an
                            SJIS string.
                        </p><p style="color:blue;">表示SQL语句文本的字符串。值可以为空。长值可能被截断。字符串与审计日志文件本身一样，是使用utf-8（每个字符最多4个字节）编写的，因此该值可能是转换的结果。例如，原始语句可能作为sjis字符串从客户端接收。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"query": "DELETE FROM t1"
</pre></li><li class="listitem"><p>
                            <code class="literal">server_id</code>
                        </p><p style="color:blue;">服务器ID</p><p>
                            An unsigned integer representing the server ID. This is
                            the same as the value of the
                            <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> system
                            variable.
                        </p><p style="color:blue;">表示服务器ID的无符号整数。这与服务器ID系统变量的值相同。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"server_id": 1
</pre></li><li class="listitem"><p>
                            <code class="literal">sql_command</code>
                        </p><p style="color:blue;">sql_命令</p><p>
                            A string that indicates the SQL statement type.
                        </p><p style="color:blue;">指示SQL语句类型的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"sql_command": "insert"
</pre><p>
                            The values correspond to the
                            <code class="literal">statement/sql/<em class="replaceable"><code>xxx</code></em></code>
                            command counters. For example,
                            <em class="replaceable"><code>xxx</code></em> is
                            <code class="literal">drop_table</code> and
                            <code class="literal">select</code> for <a class="link" href="sql-syntax.html#drop-table" title="13.1.29&nbsp;DROP TABLE Syntax"><code class="literal">DROP
                            TABLE</code></a> and <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a>
                            statements, respectively. The following statement displays
                            the possible names:
                        </p><p style="color:blue;">这些值对应于statement/sql/xxx命令计数器。例如，xxx分别是drop_table和select for drop table和select语句。以下语句显示可能的名称：</p><pre data-lang="sql" class="programlisting">SELECT REPLACE(EVENT_NAME, 'statement/sql/', '') AS name
FROM performance_schema.events_statements_summary_global_by_event_name
WHERE EVENT_NAME LIKE 'statement/sql/%'
ORDER BY name;
</pre></li><li class="listitem"><p>
                            <code class="literal">status</code>
                        </p><p style="color:blue;">地位</p><p>
                            An unsigned integer representing the command status: 0 for
                            success, nonzero if an error occurred. This is the same as
                            the value of the
                            <a class="link" href="connectors-apis.html#mysql-errno" title="27.8.7.14&nbsp;mysql_errno()"><code class="literal">mysql_errno()</code></a> C API
                            function.
                        </p><p style="color:blue;">表示命令状态的无符号整数：0表示成功，如果发生错误则为非零。这与mysql_errno（）c api函数的值相同。</p><p>
                            The audit log does not contain the SQLSTATE value or error
                            message. To see the associations between error codes,
                            SQLSTATE values, and messages, see
                            <a class="xref" href="error-handling.html#server-error-reference" title="B.3.1&nbsp;Server Error Message Reference">Section&nbsp;B.3.1, “Server Error Message Reference”</a>.
                        </p><p style="color:blue;">审核日志不包含sqlstate值或错误消息。要查看错误代码、sqlstate值和消息之间的关联，请参阅“服务器错误消息参考”一节。</p><p>
                            Warnings are not logged.
                        </p><p style="color:blue;">未记录警告。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"status": 1051
</pre></li><li class="listitem"><p>
                            <code class="literal">table</code>
                        </p><p style="color:blue;">桌子</p><p>
                            A string representing a table name.
                        </p><p style="color:blue;">表示表名的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"table": "t1"
</pre></li><li class="listitem"><p>
                            <code class="literal">user</code>
                        </p><p style="color:blue;">用户</p><p>
                            A string representing a user name. The meaning differs
                            depending on the item within which <code class="literal">user</code>
                            occurs:
                        </p><p style="color:blue;">表示用户名的字符串。含义因用户所在的项目而异：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    Within <code class="literal">account</code> items,
                                    <code class="literal">user</code> is a string representing the
                                    user that the server authenticated the client as. This
                                    is the user name that the server uses for privilege
                                    checking.
                                </p><p style="color:blue;">在帐户项中，user是一个字符串，表示服务器将客户端验证为的用户。这是服务器用于权限检查的用户名。</p></li><li class="listitem"><p>
                                    Within <code class="literal">login</code> items,
                                    <code class="literal">user</code> is a string representing the
                                    user name sent by the client.
                                </p><p style="color:blue;">在登录项中，user是表示客户端发送的用户名的字符串。</p></li></ul>
                            </div>
                            <p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="json" class="programlisting">"user": "root"
</pre></li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-logging-configuration"></a>6.4.5.5&nbsp;Audit Log Logging Configuration</h4>

                        </div>

                    </div>

                </div>
                <p>
                    This section describes how to configure audit logging
                    characteristics, such as the file to which the audit log plugin
                    writes events, the format of written events, and whether to
                    enable log file compression and encryption.
                </p><p style="color:blue;">本节介绍如何配置审核日志记录特性，例如审核日志插件向其写入事件的文件、写入事件的格式，以及是否启用日志文件压缩和加密。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-name" title="Audit Log File Name">Audit Log File Name</a></p><p style="color:blue;">审核日志文件名</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-format" title="Audit Log File Format">Audit Log File Format</a></p><p style="color:blue;">审核日志文件格式</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-compression" title="Audit Log File Compression">Audit Log File Compression</a></p><p style="color:blue;">审核日志文件压缩</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-encryption" title="Audit Log File Encryption">Audit Log File Encryption</a></p><p style="color:blue;">审核日志文件加密</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-uncompression-decryption" title="Audit Log File Manual Uncompression and Decryption">Audit Log File Manual Uncompression and Decryption</a></p><p style="color:blue;">审核日志文件手动解压缩和解密</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-space-management" title="Audit Log File Space Management and Name Rotation">Audit Log File Space Management and Name Rotation</a></p><p style="color:blue;">审核日志文件空间管理和名称循环</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-strategy" title="Audit Logging Write Strategy">Audit Logging Write Strategy</a></p><p style="color:blue;">审核日志写入策略</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-file-reading" title="Audit Log File Reading">Audit Log File Reading</a></p><p style="color:blue;">审核日志文件读取</p></li></ul>
                </div>
                <p>
                    For additional information about the user-defined functions and
                    system variables that affect audit logging, see
                    <a class="xref" href="security.html#audit-log-routines" title="Audit Log Functions">Audit Log Functions</a>, and
                    <a class="xref" href="security.html#audit-log-options-variables" title="Audit Log Options and Variables">Audit Log Options and Variables</a>.
                </p><p style="color:blue;">有关影响审核日志记录的用户定义函数和系统变量的其他信息，请参阅审核日志函数、审核日志选项和变量。</p><p>
                The audit log plugin can also control which audited events are
                written to the audit log file, based on event content or the
                account from which events originate. See
                <a class="xref" href="security.html#audit-log-filtering" title="6.4.5.6&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.6, “Audit Log Filtering”</a>.
            </p><p style="color:blue;">审核日志插件还可以根据事件内容或事件来源的帐户，控制将哪些已审核事件写入审核日志文件。见第6.4.5.6节“审计日志过滤”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-name"></a>Audit Log File Name</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        To configure the audit log file name, set the
                        <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> system
                        variable at server startup. By default, the name is
                        <code class="filename">audit.log</code> in the server data directory.
                        For security reasons, write the audit log file to a directory
                        accessible only to the MySQL server and to users with a
                        legitimate reason to view the log.
                    </p><p style="color:blue;">要配置审核日志文件名，请在服务器启动时设置审核日志文件系统变量。默认情况下，服务器数据目录中的名称为audit.log。出于安全原因，请将审核日志文件写入一个只有mysql服务器和有合法理由查看日志的用户才能访问的目录。</p><p>
                    As of MySQL 5.7.21, the plugin interprets the
                    <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value as
                    composed of a base name and an optional suffix. If compression
                    or encryption are enabled, the effective file name (the name
                    actually used to create the log file) differs from the
                    configured file name because it has additional suffixes:
                </p><p style="color:blue;">从mysql 5.7.21开始，该插件将audit_log_文件的值解释为由基名和可选后缀组成。如果启用了压缩或加密，则有效文件名（实际用于创建日志文件的名称）与配置的文件名不同，因为它有其他后缀：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If compression is enabled, the plugin adds a suffix of
                            <code class="filename">.gz</code>.
                        </p><p style="color:blue;">如果启用压缩，插件将添加后缀.gz。</p></li><li class="listitem"><p>
                            If encryption is enabled, the plugin adds a suffix of
                            <code class="filename">.enc</code>.
                        </p><p style="color:blue;">如果启用了加密，插件将添加后缀.enc。</p></li></ul>
                    </div>
                    <p>
                        The effective audit log file name is the name resulting from
                        the addition of applicable compression and encryption suffixes
                        to the configured file name. For example, if the configured
                        <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value is
                        <code class="filename">audit.log</code>, the effective file name is one
                        of the values shown in the following table.
                    </p><p style="color:blue;">有效的审核日志文件名是由于在配置的文件名中添加了适用的压缩和加密后缀而产生的名称。例如，如果配置的audit_log_file值为audit.log，则有效文件名是下表中显示的值之一。</p>
                    <div class="informaltable">
                        <table summary="audit_log effective file names for various combinations of the compression and encryption features."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
                            <th scope="col">Enabled Features</th>
                            <th scope="col">Effective File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">No compression or encryption</td>
                            <td><code class="filename">audit.log</code></td>
                        </tr><tr>
                            <td scope="row">Compression</td>
                            <td><code class="filename">audit.log.gz</code></td>
                        </tr><tr>
                            <td scope="row">Encryption</td>
                            <td><code class="filename">audit.log.enc</code></td>
                        </tr><tr>
                            <td scope="row">Compression, encryption</td>
                            <td><code class="filename">audit.log.gz.enc</code></td>
                        </tr></tbody></table>
                    </div>
                    <p>
                        Prior to MySQL 5.7.21, the configured and effective log file
                        names are the same. For example, if the configured
                        <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value is
                        <code class="filename">audit.log</code>, the audit log plugin writes to
                        <code class="filename">audit.log</code>.
                    </p><p style="color:blue;">在mysql 5.7.21之前，配置的和有效的日志文件名是相同的。例如，如果配置的audit_log_文件值为audit.log，则audit log插件将写入audit.log。</p><p>
                    The audit log plugin performs certain actions during
                    initialization and termination based on the effective audit
                    log file name:
                </p><p style="color:blue;">审核日志插件根据有效的审核日志文件名在初始化和终止期间执行某些操作：</p><p>
                    As of MySQL 5.7.21:
                </p><p style="color:blue;">从mysql 5.7.21开始：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            During initialization, the plugin checks whether a file
                            with the audit log file name already exists and renames it
                            if so. (In this case, the plugin assumes that the previous
                            server invocation exited unexpectedly with the audit log
                            plugin running.) The plugin then writes to a new empty
                            audit log file.
                        </p><p style="color:blue;">在初始化过程中，插件检查是否存在具有审核日志文件名的文件，如果存在，则重命名文件。（在这种情况下，插件假定以前的服务器调用意外地退出了审计日志插件。）插件然后写入一个新的空审计日志文件。</p></li><li class="listitem"><p>
                            During termination, the plugin renames the audit log file.
                        </p><p style="color:blue;">在终止期间，插件将重命名审核日志文件。</p></li><li class="listitem"><p>
                            File renaming (whether during plugin initialization or
                            termination) occurs according to the usual rules for
                            automatic log file rotation; see
                            <a class="xref" href="security.html#audit-log-space-management-automatic-rotation" title="Automatic Audit Log File Rotation">Automatic Audit Log File Rotation</a>.
                        </p><p style="color:blue;">文件重命名（无论是在插件初始化还是终止过程中）根据自动日志文件旋转的常规规则进行；请参阅自动审核日志文件旋转。</p></li></ul>
                    </div>
                    <p>
                        Prior to MySQL 5.7.21, only the XML log formats are available
                        and the plugin performs rudimentary integrity checking:
                    </p><p style="color:blue;">在mysql 5.7.21之前，只有xml日志格式可用，插件执行基本的完整性检查：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            During initialization, the plugin checks whether the file
                            ends with an <code class="literal">&lt;/AUDIT&gt;</code> tag and
                            truncates the tag before writing any
                            <code class="literal">&lt;AUDIT_RECORD&gt;</code> elements. If the
                            log file exists but does not end with
                            <code class="literal">&lt;/AUDIT&gt;</code> or the
                            <code class="literal">&lt;/AUDIT&gt;</code> tag cannot be truncated,
                            the plugin considers the file malformed and renames it.
                            (Such renaming can occur if the server exits unexpectedly
                            with the audit log plugin running.) The plugin then writes
                            to a new empty audit log file.
                        </p><p style="color:blue;">在初始化过程中，插件检查文件是否以标记结尾，并在写入任何<audit_record>元素之前截断标记。如果日志文件存在但不以<!--审计-->结束，或者<!--审计-->标签不能被截断，则插件认为文件变形并重命名它。（如果服务器在审计日志插件运行时意外退出），则该插件会写入一个新的空审计日志文件。</audit_record></p></li><li class="listitem"><p>
                            At termination, no file renaming occurs.
                        </p><p style="color:blue;">在终止时，不会发生文件重命名。</p></li><li class="listitem"><p>
                            When renaming occurs at plugin initialization, the renamed
                            file has <code class="filename">.corrupted</code>, a timestamp, and
                            <code class="filename">.xml</code> added to the end. For example,
                            if the file name is <code class="filename">audit.log</code>, the
                            plugin renames it to a value such as
                            <code class="filename">audit.log.corrupted.15081807937726520.xml</code>.
                            The timestamp value is similar to a Unix timestamp, with
                            the last 7 digits representing the fractional second part.
                            For information about interpreting the timestamp, see
                            <a class="xref" href="security.html#audit-log-space-management" title="Audit Log File Space Management and Name Rotation">Audit Log File Space Management and Name Rotation</a>.
                        </p><p style="color:blue;">当在插件初始化时进行重命名时，重命名的文件结尾处添加了.corrupted、时间戳和.xml。例如，如果文件名为audit.log，插件会将其重命名为audit.log.corrupted.15081807937726520.xml等值。时间戳值类似于unix时间戳，最后7位表示小数第二部分。有关解释时间戳的信息，请参阅审核日志文件空间管理和名称循环。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-format"></a>Audit Log File Format</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To configure the audit log file format, set the
                        <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a> system
                        variable at server startup. By default, the format is
                        <code class="literal">NEW</code> (new-style XML format). For details
                        about each format, see
                        <a class="xref" href="security.html#audit-log-file-formats" title="6.4.5.4&nbsp;Audit Log File Formats">Section&nbsp;6.4.5.4, “Audit Log File Formats”</a>.
                    </p><p style="color:blue;">若要配置审核日志文件格式，请在服务器启动时设置AUDIT U LOG U FORMAT系统变量。默认情况下，格式为new（新样式的xml格式）。有关每个格式的详细信息，请参阅第6.4.5.4节“审核日志文件格式”。</p><p>
                    If you change
                    <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a>, it is
                    recommended that you also change
                    <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a>. Otherwise,
                    there will be two sets of log files with the same base name
                    but different formats.
                </p><p style="color:blue;">如果更改审核日志格式，建议同时更改审核日志文件。否则，将有两组基本名称相同但格式不同的日志文件。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Prior to MySQL 5.7.21, changing the value of
                            <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a> can result
                            in writing log entries in one format to an existing log file
                            that contains entries in a different format. To avoid this
                            issue, use the following procedure:
                        </p><p style="color:blue;">在MySQL 5.7.21之前，更改AudiTyLogOrthFrad的值可能导致将日志条目以一种格式写入到包含不同格式的条目的现有日志文件中。要避免此问题，请使用以下步骤：</p>
                        <div class="orderedlist">
                            <ol class="orderedlist" type="1"><li class="listitem"><p>
                                Stop the server.
                            </p><p style="color:blue;">停止服务器。</p></li><li class="listitem"><p>
                                Either change the value of the
                                <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> system
                                variable so the plugin writes to a different file, or
                                rename the current audit log file manually.
                            </p><p style="color:blue;">请更改audit_log_file系统变量的值，以便插件写入其他文件，或者手动重命名当前的audit日志文件。</p></li><li class="listitem"><p>
                                Restart the server with the new value of
                                <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a>. The
                                audit log plugin creates a new log file and writes
                                entries to it in the selected format.
                            </p><p style="color:blue;">使用新值audit_log_format重新启动服务器。审核日志插件创建一个新的日志文件，并以选定的格式向其写入条目。</p></li></ol>
                        </div>

                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-compression"></a>Audit Log File Compression</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Audit log file compression is available as of MySQL 5.7.21.
                        Compression can be enabled for any log format.
                    </p><p style="color:blue;">从mysql 5.7.21开始，审计日志文件压缩可用。可以对任何日志格式启用压缩。</p><p>
                    To configure audit log file compression, set the
                    <a class="link" href="security.html#sysvar_audit_log_compression"><code class="literal">audit_log_compression</code></a> system
                    variable at server startup. Permitted values are
                    <code class="literal">NONE</code> (no compression; the default) and
                    <code class="literal">GZIP</code> (GNU Zip compression).
                </p><p style="color:blue;">要配置审核日志文件压缩，请在服务器启动时设置审核日志压缩系统变量。允许的值是none（无压缩；默认值）和gzip（gnu zip压缩）。</p><p>
                    If both compression and encryption are enabled, compression
                    occurs before encryption. To recover the original file
                    manually, first decrypt it, then uncompress it. See
                    <a class="xref" href="security.html#audit-log-file-uncompression-decryption" title="Audit Log File Manual Uncompression and Decryption">Audit Log File Manual Uncompression and Decryption</a>.
                </p><p style="color:blue;">如果同时启用压缩和加密，则在加密之前进行压缩。要手动恢复原始文件，请先解密，然后解压缩。请参阅审核日志文件手动解压缩和解密。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-encryption"></a>Audit Log File Encryption</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Audit log file encryption is available as of MySQL 5.7.21.
                        Encryption can be enabled for any log format. Encryption is
                        based on a user-defined password (with the exception of the
                        initial password, which the audit log plugin generates). To
                        use this feature, the MySQL keyring must be enabled because
                        audit logging uses it for password storage. Any keyring plugin
                        can be used; for instructions, see <a class="xref" href="security.html#keyring" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, “The MySQL Keyring”</a>.
                    </p><p style="color:blue;">从mysql 5.7.21开始，审计日志文件加密可用。可以对任何日志格式启用加密。加密基于用户定义的密码（审计日志插件生成的初始密码除外）。要使用此功能，必须启用mysql keyring，因为审核日志记录将其用于密码存储。可以使用任何keyring插件；有关说明，请参阅6.4.4节，“mysql keyring”。</p><p>
                    To configure audit log file encryption, set the
                    <a class="link" href="security.html#sysvar_audit_log_encryption"><code class="literal">audit_log_encryption</code></a> system
                    variable at server startup. Permitted values are
                    <code class="literal">NONE</code> (no encryption; the default) and
                    <code class="literal">AES</code> (AES-256-CBC cipher encryption).
                </p><p style="color:blue;">要配置审核日志文件加密，请在服务器启动时设置审核日志加密系统变量。允许的值是none（无加密；默认值）和aes（aes-256-cbc密码加密）。</p><p>
                    To set or get an encryption password, use these user-defined
                    functions (UDFs):
                </p><p style="color:blue;">要设置或获取加密密码，请使用以下用户定义函数（UDF）：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            To set the current encryption password, invoke
                            <a class="link" href="security.html#udf_audit-log-encryption-password-set"><code class="literal">audit_log_encryption_password_set()</code></a>.
                            This function stores the new password in the keyring. If
                            encryption is enabled, it also performs a log file
                            rotation operation that renames the current log file, and
                            begins a new log file encrypted with the password. File
                            renaming occurs according to the usual rules for automatic
                            log file rotation; see
                            <a class="xref" href="security.html#audit-log-space-management-automatic-rotation" title="Automatic Audit Log File Rotation">Automatic Audit Log File Rotation</a>.
                        </p><p style="color:blue;">要设置当前加密密码，请调用audit_log_encryption_password_set（）。此函数用于在密匙环中存储新密码。如果启用了加密，它还会执行日志文件循环操作，重命名当前日志文件，并开始使用密码加密的新日志文件。根据自动日志文件旋转的常用规则进行文件重命名；请参阅自动审核日志文件旋转。</p><p>
                            Previously written audit log files are not re-encrypted
                            with the new password. Keep a record of the previous
                            password should you need to decrypt those files manually.
                        </p><p style="color:blue;">以前写入的审核日志文件不会使用新密码重新加密。如果需要手动解密这些文件，请记录以前的密码。</p></li><li class="listitem"><p>
                            To get the current encryption password, invoke
                            <a class="link" href="security.html#udf_audit-log-encryption-password-get"><code class="literal">audit_log_encryption_password_get()</code></a>,
                            which retrieves the password from the keyring.
                        </p><p style="color:blue;">要获取当前的加密密码，请调用audit_log_encryption_password_get（），它从密匙环中检索密码。</p></li></ul>
                    </div>
                    <p>
                        For additional information about audit log encryption
                        functions, see <a class="xref" href="security.html#audit-log-routines" title="Audit Log Functions">Audit Log Functions</a>.
                    </p><p style="color:blue;">有关审核日志加密功能的其他信息，请参阅审核日志功能。</p><p>
                    When the audit log plugin initializes, if it finds that log
                    file encryption is enabled, it checks whether the keyring
                    contains an audit log encryption password. If not, the plugin
                    automatically generates a random initial encryption password
                    and stores it in the keyring. To discover this password,
                    invoke
                    <a class="link" href="security.html#udf_audit-log-encryption-password-get"><code class="literal">audit_log_encryption_password_get()</code></a>.
                </p><p style="color:blue;">当审计日志插件初始化时，如果发现日志文件加密已启用，它将检查密钥环是否包含审计日志加密密码。如果不是，插件会自动生成一个随机的初始加密密码并将其存储在密匙环中。要发现此密码，请调用audit-log-encryption-password-get（）。</p><p>
                    If both compression and encryption are enabled, compression
                    occurs before encryption. To recover the original file
                    manually, first decrypt it, then uncompress it. See
                    <a class="xref" href="security.html#audit-log-file-uncompression-decryption" title="Audit Log File Manual Uncompression and Decryption">Audit Log File Manual Uncompression and Decryption</a>.
                </p><p style="color:blue;">如果同时启用压缩和加密，则在加密之前进行压缩。要手动恢复原始文件，请先解密，然后解压缩。请参阅审核日志文件手动解压缩和解密。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-uncompression-decryption"></a>Audit Log File Manual Uncompression and Decryption</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Audit log files can be uncompressed and decrypted using
                        standard tools. This should be done only for log files that
                        have been closed (archived) and are no longer in use, not for
                        the log file that the audit log plugin is currently writing.
                        You can recognize archived log files because they have been
                        renamed by the audit log plugin to include a timestamp in the
                        file name just after the base name.
                    </p><p style="color:blue;">审计日志文件可以使用标准工具解压缩和解密。此操作只应针对已关闭（存档）且不再使用的日志文件，而不应针对审核日志插件当前正在写入的日志文件。您可以识别存档的日志文件，因为它们已由审核日志插件重命名，以便在文件名中的基本名称后面包含时间戳。</p><p>
                    For this discussion, assume that
                    <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> is set to
                    <code class="filename">audit.log</code>. In that case, an archived
                    audit log file has one of the names shown in the following
                    table.
                </p><p style="color:blue;">对于此讨论，假设audit_log_file设置为audit.log。在这种情况下，存档的审核日志文件具有下表中所示的名称之一。</p>
                    <div class="informaltable">
                        <table summary="audit_log archived file names for various combinations of the compression and encryption features."><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr>
                            <th scope="col">Enabled Features</th>
                            <th scope="col">Archived File Name</th>
                        </tr></thead><tbody><tr>
                            <td scope="row">No compression or encryption</td>
                            <td><code class="filename">audit.<em class="replaceable"><code>timestamp</code></em>.log</code></td>
                        </tr><tr>
                            <td scope="row">Compression</td>
                            <td><code class="filename">audit.<em class="replaceable"><code>timestamp</code></em>.log.gz</code></td>
                        </tr><tr>
                            <td scope="row">Encryption</td>
                            <td><code class="filename">audit.<em class="replaceable"><code>timestamp</code></em>.log.enc</code></td>
                        </tr><tr>
                            <td scope="row">Compression, encryption</td>
                            <td><code class="filename">audit.<em class="replaceable"><code>timestamp</code></em>.log.gz.enc</code></td>
                        </tr></tbody></table>
                    </div>
                    <p>
                        To uncompress a compressed log file manually, use
                        <span class="command"><strong>gunzip</strong></span>, <span class="command"><strong>gzip -d</strong></span>, or
                        equivalent command. For example:
                    </p><p style="color:blue;">要手动解压缩压缩日志文件，请使用gunzip、gzip-d或等效命令。例如：</p><pre data-lang="terminal" class="programlisting">gunzip -c audit.<em class="replaceable"><code>timestamp</code></em>.log.gz &gt; audit.<em class="replaceable"><code>timestamp</code></em>.log
</pre><p>
                    To decrypt an encrypted log file manually, use the
                    <span class="command"><strong>openssl</strong></span> command. For example:
                </p><p style="color:blue;">要手动解密加密的日志文件，请使用openssl命令。例如：</p><pre data-lang="terminal" class="programlisting">openssl enc -d -aes-256-cbc -pass pass:<em class="replaceable"><code>password</code></em> -md sha256
    -in audit.<em class="replaceable"><code>timestamp</code></em>.log.enc
    -out audit.<em class="replaceable"><code>timestamp</code></em>.log
</pre><p>
                    If both compression and encryption are enabled for audit
                    logging, compression occurs before encryption. In this case,
                    the file name has <code class="filename">.gz</code> and
                    <code class="filename">.enc</code> suffixes added, corresponding to the
                    order in which those operations occur. To recover the original
                    file manually, perform the operations in reverse. That is,
                    first decrypt the file, then uncompress it:
                </p><p style="color:blue;">如果为审核日志启用了压缩和加密，则在加密之前会进行压缩。在本例中，文件名添加了.gz和.enc后缀，与这些操作发生的顺序相对应。要手动恢复原始文件，请反向执行操作。也就是说，首先解密文件，然后解压缩：</p><pre data-lang="terminal" class="programlisting">openssl enc -d -aes-256-cbc -pass pass:<em class="replaceable"><code>password</code></em> -md sha256
    -in audit.<em class="replaceable"><code>timestamp</code></em>.log.gz.enc
    -out audit.<em class="replaceable"><code>timestamp</code></em>.log.gz
gunzip -c audit.<em class="replaceable"><code>timestamp</code></em>.log.gz &gt; audit.<em class="replaceable"><code>timestamp</code></em>.log
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-space-management"></a>Audit Log File Space Management and Name Rotation</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The audit log file has the potential to grow very large and
                        consume a lot of disk space. To enable management of the space
                        used by its log files, the audit log plugin provides for log
                        file rotation, either manually or automatically. Rotation
                        capabilities use the
                        <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> and
                        <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                        system variables:
                    </p><p style="color:blue;">审核日志文件可能会变得非常大并占用大量磁盘空间。为了管理日志文件使用的空间，审计日志插件提供了日志文件的手动或自动旋转。旋转功能使用audit_log_flush和audit_log_rotate_on_size系统变量：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            By default,
                            <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size=0</code></a>
                            and no log rotation occurs unless performed manually. In
                            this case, use
                            <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> to close
                            and reopen the current log file after manually renaming
                            it.
                        </p><p style="color:blue;">默认情况下，audit_log_rotate_on_size=0，除非手动执行，否则不会发生日志旋转。在这种情况下，使用audit_log_flush在手动重命名当前日志文件后关闭并重新打开它。</p></li><li class="listitem"><p>
                            If
                            <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                            is greater than 0, automatic rotation occurs when a write
                            to the current log file causes its size to exceed this
                            value. The audit log plugin closes the file, renames it,
                            and opens a new log file. With automatic rotation enabled,
                            <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> has no
                            effect.
                        </p><p style="color:blue;">如果audit_log_rotate_on_size大于0，则当对当前日志文件的写入导致其大小超过此值时，将发生自动旋转。审计日志插件关闭文件，重命名它，并打开一个新的日志文件。启用自动旋转后，审核日志刷新没有效果。</p></li><li class="listitem"><p>
                            Automatic rotation also occurs under several other
                            conditions, described later.
                        </p><p style="color:blue;">自动旋转也会在其他几种情况下发生，稍后介绍。</p></li></ul>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Renamed log files are not removed automatically. For
                            example, with size-based log file rotation, renamed log
                            files do not rotate off the end of the name sequence.
                            Instead, they have unique names and accumulate indefinitely.
                            To avoid excessive space use, remove old files periodically,
                            backing them up first as necessary.
                        </p><p style="color:blue;">重命名的日志文件不会自动删除。例如，使用基于大小的日志文件旋转，重命名的日志文件不会从名称序列的末尾旋转。取而代之的是，它们有唯一的名字，并且无限期地积累。为避免过度使用空间，请定期删除旧文件，必要时先备份它们。</p>
                    </div>
                    <p>
                        The following discussion describes log file rotation methods
                        in greater detail.
                    </p><p style="color:blue;">下面的讨论将更详细地描述日志文件旋转方法。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-space-management-manual-rotation" title="Manual Audit Log File Rotation">Manual Audit Log File Rotation</a></p><p style="color:blue;">手动审核日志文件轮换</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-space-management-automatic-rotation" title="Automatic Audit Log File Rotation">Automatic Audit Log File Rotation</a></p><p style="color:blue;">自动审核日志文件循环</p></li></ul>
                    </div>
                    <h6><a name="audit-log-space-management-manual-rotation"></a>Manual Audit Log File Rotation</h6><p>
                    If <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size=0</code></a>
                    (the default), no log rotation occurs unless performed
                    manually. In this case, the audit log plugin closes and
                    reopens the log file when the
                    <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> value changes
                    from disabled to enabled. Log file renaming must be done
                    externally to the server. Suppose that the log file name is
                    <code class="filename">audit.log</code> and you want to maintain the
                    three most recent log files, cycling through the names
                    <code class="filename">audit.log.1</code> through
                    <code class="filename">audit.log.3</code>. On Unix, perform rotation
                    manually like this:
                </p><p style="color:blue;">如果audit_log_rotate_on_size=0（默认值），则除非手动执行，否则不会发生日志旋转。在这种情况下，当审核日志刷新值从禁用更改为启用时，审核日志插件将关闭并重新打开日志文件。日志文件重命名必须在服务器外部完成。假设日志文件名为audit.log，您希望维护三个最新的日志文件，并在名称audit.log.1到audit.log.3之间循环。在UNIX上，手动执行旋转，如下所示：</p>
                    <div class="orderedlist">
                        <ol class="orderedlist" type="1"><li class="listitem"><p>
                            From the command line, rename the current log files:
                        </p><p style="color:blue;">在命令行中，重命名当前日志文件：</p><pre data-lang="terminal" class="programlisting">mv audit.log.2 audit.log.3
mv audit.log.1 audit.log.2
mv audit.log audit.log.1
</pre><p>
                            This strategy overwrites the current
                            <code class="filename">audit.log.3</code> contents, placing a bound
                            on the number of archived log files and the space they
                            use.
                        </p><p style="color:blue;">此策略覆盖当前的audit.log.3内容，对存档日志文件的数量及其使用的空间进行绑定。</p></li><li class="listitem"><p>
                            At this point, the plugin is still writing to the current
                            log file, which has been renamed to
                            <code class="filename">audit.log.1</code>. Connect to the server
                            and flush the log file so the plugin closes it and reopens
                            a new <code class="filename">audit.log</code> file:
                        </p><p style="color:blue;">此时，插件仍在写入当前的日志文件，该文件已重命名为audit.log.1。连接到服务器并刷新日志文件，以便插件将其关闭并重新打开新的audit.log文件：</p><pre data-lang="sql" class="programlisting">SET GLOBAL audit_log_flush = ON;
</pre><p>
                            <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> is
                            special in that its value remains <code class="literal">OFF</code>
                            so that you need not disable it explicitly before enabling
                            it again to perform another flush.
                        </p><p style="color:blue;">audit_log_flush的特殊之处在于它的值保持为关闭状态，因此在再次启用它以执行另一次刷新之前，不必显式禁用它。</p></li></ol>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            For JSON-format logging, renaming audit log files manually
                            makes them unavailable to the log-reading functions because
                            the audit log plugin no longer can determine that they are
                            part of the log file sequence (see
                            <a class="xref" href="security.html#audit-log-file-reading" title="Audit Log File Reading">Audit Log File Reading</a>). Consider setting
                            <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                            greater than 0 to use size-based rotation instead.
                        </p><p style="color:blue;">对于json格式的日志记录，手动重命名审核日志文件会使它们对日志读取函数不可用，因为审核日志插件不再能够确定它们是日志文件序列的一部分（请参阅审核日志文件读取）。考虑将audit_log_rotate_设置为大于0以使用基于大小的旋转。</p>
                    </div>
                    <h6><a name="audit-log-space-management-automatic-rotation"></a>Automatic Audit Log File Rotation</h6><p>
                    If <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                    is greater than 0, setting
                    <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> has no
                    effect. Instead, whenever a write to the current log file
                    causes its size to exceed the
                    <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                    value, the audit log plugin closes the file, renames it, and
                    opens a new log file.
                </p><p style="color:blue;">如果audit_log_rotate_on_size大于0，则设置audit_log_flush无效。相反，每当对当前日志文件的写入导致其大小超过audit-log-rotate-on-size值时，audit-log插件将关闭该文件，重命名它，并打开一个新的日志文件。</p><p>
                    Automatic rotation also occurs under these conditions:
                </p><p style="color:blue;">在以下情况下也会自动旋转：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            During plugin initialization, if a file with the audit log
                            file name already exists (see
                            <a class="xref" href="security.html#audit-log-file-name" title="Audit Log File Name">Audit Log File Name</a>).
                        </p><p style="color:blue;">在插件初始化期间，如果一个带有审核日志文件名的文件已经存在（参见审核日志文件名）。</p></li><li class="listitem"><p>
                            During plugin termination.
                        </p><p style="color:blue;">在插件终止期间。</p></li><li class="listitem"><p>
                            When the
                            <a class="link" href="security.html#udf_audit-log-encryption-password-set"><code class="literal">audit_log_encryption_password_set()</code></a>
                            function is called to set the encryption password.
                        </p><p style="color:blue;">调用audit_log_encryption_password_set（）函数设置加密密码时。</p></li></ul>
                    </div>
                    <p>
                        The plugin renames the original file as follows:
                    </p><p style="color:blue;">插件按如下方式重命名原始文件：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            As of MySQL 5.7.21, the renamed file has a timestamp
                            inserted after its base name and before its suffix. For
                            example, if the file name is
                            <code class="filename">audit.log</code>, the plugin renames it to a
                            value such as
                            <code class="filename">audit.20180115T140633.log</code>. The
                            timestamp is a UTC value in
                            <code class="literal"><em class="replaceable"><code>YYYYMMDD</code></em>T<em class="replaceable"><code>hhmmss</code></em></code>
                            format. The timestamp indicates rotation time for XML
                            logging, and the timestamp of the last event written to
                            the file for JSON logging.
                        </p><p style="color:blue;">从mysql 5.7.21开始，重命名的文件在其基名之后和后缀之前插入了时间戳。例如，如果文件名为audit.log，插件会将其重命名为audit.20180115t140633.log等值。时间戳是yyyymmddthhmms格式的UTC值。时间戳表示xml日志记录的循环时间，以及写入json日志记录文件的最后一个事件的时间戳。</p></li><li class="listitem"><p>
                            Prior to MySQL 5.7.21, the renamed file has a timestamp
                            and <code class="filename">.xml</code> added to the end. For
                            example, if the file name is
                            <code class="filename">audit.log</code>, the plugin renames it to a
                            value such as
                            <code class="filename">audit.log.15159344437726520.xml</code>. The
                            timestamp value is similar to a Unix timestamp, with the
                            last 7 digits representing the fractional second part. By
                            inserting a decimal point, the value can be interpreted
                            using the <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a>
                            function:
                        </p><p style="color:blue;">在mysql 5.7.21之前，重命名的文件的末尾添加了时间戳和.xml。例如，如果文件名为audit.log，插件会将其重命名为audit.log.15159344437726520.xml等值。时间戳值类似于unix时间戳，最后7位表示小数第二部分。通过插入小数点，可以使用from_unixtime（）函数解释该值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FROM_UNIXTIME(1515934443.7726520);</code></strong>
+-----------------------------------+
| FROM_UNIXTIME(1515934443.7726520) |
+-----------------------------------+
| 2018-01-14 06:54:03.772652        |
+-----------------------------------+
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-strategy"></a>Audit Logging Write Strategy</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The audit log plugin can use any of several strategies for log
                        writes. Regardless of strategy, logging occurs on a
                        best-effort basis, with no guarantee of consistency.
                    </p><p style="color:blue;">审核日志插件可以使用多种策略中的任何一种进行日志写入。不管策略如何，日志记录都是在尽最大努力的基础上进行的，不能保证一致性。</p><p>
                    To specify a write strategy, set the
                    <a class="link" href="security.html#sysvar_audit_log_strategy"><code class="literal">audit_log_strategy</code></a> system
                    variable at server startup. By default, the strategy value is
                    <code class="literal">ASYNCHRONOUS</code> and the plugin logs
                    asynchronously to a buffer, waiting if the buffer is full.
                    It's possible to tell the plugin not to wait
                    (<code class="literal">PERFORMANCE</code>) or to log synchronously,
                    either using file system caching
                    (<code class="literal">SEMISYNCHRONOUS</code>) or forcing output with a
                    <code class="literal">sync()</code> call after each write request
                    (<code class="literal">SYNCHRONOUS</code>).
                </p><p style="color:blue;">要指定写入策略，请在服务器启动时设置AUDIT LOG U STRATE系统变量。默认情况下，策略值是异步的，插件异步地记录到缓冲区中，等待缓冲区是否已满。可以告诉插件不要等待（性能）或同步记录，可以使用文件系统缓存（半同步）或在每次写入请求后使用sync（）调用强制输出（同步）。</p><p>
                    For asynchronous write strategy, the
                    <a class="link" href="security.html#sysvar_audit_log_buffer_size"><code class="literal">audit_log_buffer_size</code></a> system
                    variable is the buffer size in bytes. Set this variable at
                    server startup to change the buffer size. The plugin uses a
                    single buffer, which it allocates when it initializes and
                    removes when it terminates. The plugin does not allocate this
                    buffer for nonasynchronous write strategies.
                </p><p style="color:blue;">对于异步写入策略，AUDIT U LOG U BUFFER U SIZE系统变量是以字节为单位的缓冲区大小。在服务器启动时设置此变量以更改缓冲区大小。插件使用单个缓冲区，在初始化时分配，在终止时移除。插件不为非同步写入策略分配此缓冲区。</p><p>
                    Asynchronous logging strategy has these characteristics:
                </p><p style="color:blue;">异步日志记录策略具有以下特点：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Minimal impact on server performance and scalability.
                        </p><p style="color:blue;">对服务器性能和可伸缩性的影响最小。</p></li><li class="listitem"><p>
                            Blocking of threads that generate audit events for the
                            shortest possible time; that is, time to allocate the
                            buffer plus time to copy the event to the buffer.
                        </p><p style="color:blue;">在尽可能短的时间内生成审核事件的线程阻塞；也就是说，分配缓冲区的时间加上将事件复制到缓冲区的时间。</p></li><li class="listitem"><p>
                            Output goes to the buffer. A separate thread handles
                            writes from the buffer to the log file.
                        </p><p style="color:blue;">输出到缓冲区。单独的线程处理从缓冲区写入日志文件的操作。</p></li></ul>
                    </div>
                    <p>
                        With asynchronous logging, the integrity of the log file may
                        be compromised if a problem occurs during a write to the file
                        or if the plugin does not shut down cleanly (for example, in
                        the event that the server host exits unexpectedly). To reduce
                        this risk, set
                        <a class="link" href="security.html#sysvar_audit_log_strategy"><code class="literal">audit_log_strategy</code></a> to use
                        synchronous logging.
                    </p><p style="color:blue;">使用异步日志记录，如果在写入文件时出现问题，或者如果插件没有被关闭（例如，如果服务器主机意外退出），则日志文件的完整性可能受到损害。要降低此风险，请将审核日志策略设置为使用同步日志记录。</p><p>
                    A disadvantage of <code class="literal">PERFORMANCE</code> strategy is
                    that it drops events when the buffer is full. For a heavily
                    loaded server, the audit log may have events missing.
                </p><p style="color:blue;">性能策略的一个缺点是它在缓冲区已满时丢弃事件。对于负载较重的服务器，审核日志可能缺少事件。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-file-reading"></a>Audit Log File Reading</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The audit log plugin enables bookmarking and reading of
                        JSON-format audit log files. (These capabilities do not apply
                        to files written in other log formats.)
                    </p><p style="color:blue;">审计日志插件支持书签和读取json格式的审计日志文件。（这些功能不适用于以其他日志格式写入的文件。）</p><p>
                    When the audit log plugin initializes and is configured for
                    JSON logging, it uses the directory containing the audit log
                    file (determined from the
                    <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value) as the
                    location to search for readable audit log files. To do this,
                    it uses the value of
                    <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> to determine
                    the file base name and suffix values, then looks for files
                    with names that match the following pattern, where
                    <code class="literal">[...]</code> indicates optional file name parts:
                </p><p style="color:blue;">当审计日志插件初始化并配置为json日志时，它使用包含审计日志文件（由审计日志文件值确定）的目录作为搜索可读审计日志文件的位置。为此，它使用audit_log_file的值来确定文件的基名和后缀值，然后查找名称与以下模式匹配的文件，其中[…]表示可选的文件名部分：</p><pre data-lang="none" class="programlisting"><em class="replaceable"><code>basename</code></em>[.<em class="replaceable"><code>timestamp</code></em>].<em class="replaceable"><code>suffix</code></em>[.gz][.enc]
</pre><p>
                    The plugin opens each matching file, checks that it really
                    contains JSON audit records, and sorts them using the
                    timestamps from the first record of each file to construct a
                    list of log files that are subject to use with the log-reading
                    functions.
                </p><p style="color:blue;">插件打开每个匹配的文件，检查它是否真的包含json审计记录，并使用每个文件的第一个记录中的时间戳对它们进行排序，以构建一个日志文件列表，这些日志文件将与日志读取函数一起使用。</p><p>
                    The plugin cannot include in the sequence files that were
                    renamed manually and do not match the preceding pattern, or
                    that were encrypted with a password no longer available in the
                    keyring.
                </p><p style="color:blue;">插件不能包含在手动重命名的序列文件中，这些文件与前面的模式不匹配，或者使用密钥环中不再可用的密码进行加密。</p><p>
                    To read events from the audit log, use these user-defined
                    functions (UDFs):
                </p><p style="color:blue;">要从审核日志中读取事件，请使用以下用户定义函数（UDF）：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#udf_audit-log-read-bookmark"><code class="literal">audit_log_read_bookmark()</code></a>
                            returns a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string
                            representing a bookmark for the most recently written
                            audit log event. This bookmark is suitable for passing to
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> to indicate
                            to that function where to begin reading. Example bookmark:
                        </p><p style="color:blue;">audit_log_read_bookmark（）返回一个json字符串，表示最近写入的审核日志事件的书签。此书签适合传递到audit_log_read（）以指示该函数从何处开始读取。书签示例：</p><pre data-lang="json" class="programlisting">{ "timestamp": "2019-10-03 21:03:44", "id": 0 }
</pre></li><li class="listitem"><p>
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> reads
                            events from the audit log and returns a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string containing an
                            array of audit events.
                        </p><p style="color:blue;">audit_log_read（）从审核日志读取事件，并返回包含审核事件数组的json字符串。</p></li></ul>
                    </div>
                    <p>
                        Example <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a>
                        invocation using the current bookmark:
                    </p><p style="color:blue;">使用当前书签的audit_log_read（）调用示例：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_read(audit_log_read_bookmark());</code></strong>
+-----------------------------------------------------------------------+
| audit_log_read(audit_log_read_bookmark())                             |
+-----------------------------------------------------------------------+
| [ {"timestamp":"2019-10-03 22:41:24","id":0,"class":"connection", ... |
+-----------------------------------------------------------------------+
</pre><p>
                    Each event in the
                    <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> return value is
                    a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash, except that the
                    last array element may be a
                    <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> <code class="literal">null</code>
                    value to indicate no following events are available to read.
                    For example:
                </p><p style="color:blue;">audit_log_read（）返回值中的每个事件都是一个json散列，但最后一个数组元素可能是一个json空值，表示没有以下事件可供读取。例如：</p><pre data-lang="json" class="programlisting">[
  { "timestamp": "2019-10-03 22:08:08", "id": 10,
    "class": "general", "event": "status",
    ...
  },
  {
    "timestamp": "2019-10-03 22:08:08", "id": 11,
    "class": "connection", "event": "disconnect",
    ...
  },
  {
    "timestamp": "2019-10-03 13:39:33", "id": 0,
    "class": "connection", "event": "connect",
    ...
  },
  {
    "timestamp": "2019-10-03 13:39:33", "id": 1,
    "class": "general", "event": "status",
    ...
  },
  {
    "timestamp": "2019-10-03 13:39:33", "id": 2,
    "class": "connection", "event": "disconnect",
    ...
  },
  null
]
</pre><p>
                    Use <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> like this:
                </p><p style="color:blue;">使用audit_log_read（）如下：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            For the first call to
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> within a
                            session, pass a bookmark indicating where to begin
                            reading.
                        </p><p style="color:blue;">对于会话中首次调用audit_log_read（），请传递一个书签，指示从何处开始读取。</p></li><li class="listitem"><p>
                            If the final value of the returned array is not a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                            <code class="literal">null</code> value, there are more events
                            following those just read and
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> can be
                            called without or with a bookmark argument. Without an
                            argument, reading continues with the next unread event.
                            With a bookmark argument, reading continues from the
                            bookmark.
                        </p><p style="color:blue;">如果返回数组的最终值不是json空值，那么在刚刚读取的事件之后还有更多的事件，可以在不使用或使用bookmark参数的情况下调用audit_log_read（）。如果没有参数，阅读将继续进行下一个未读事件。使用bookmark参数时，从书签继续读取。</p></li><li class="listitem"><p>
                            If the final value of the returned array is a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                            <code class="literal">null</code> value, there are no more events
                            left to be read and the next call to
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> must
                            include a bookmark argument.
                        </p><p style="color:blue;">如果返回的数组的最终值为json空值，则不再有要读取的事件，下一次对audit_log_read（）的调用必须包含bookmark参数。</p></li></ul>
                    </div>
                    <p>
                        A bookmark is a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash that
                        indicates where and how much to read. The following items are
                        significant in the bookmark value (other items are ignored):
                    </p><p style="color:blue;">书签是一个json散列，指示在何处以及读取多少内容。以下项目在书签值中很重要（其他项目将被忽略）：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">timestamp</code>, <code class="literal">id</code>: The
                            location within the audit log of the first event to read.
                            Both items must be present to completely specify a
                            position.
                        </p><p style="color:blue;">timestamp，id：要读取的第一个事件在审核日志中的位置。两个项目都必须存在才能完全指定位置。</p></li><li class="listitem"><p>
                            <code class="literal">max_array_length</code>: The maximum number of
                            events to read from the log. If omitted, the default is to
                            read to the end of the log or until the read buffer is
                            full, whichever comes first.
                        </p><p style="color:blue;">最大值：从日志中读取的最大事件数。如果省略，默认值是读取到日志末尾或直到读取缓冲区已满，以先到者为准。</p></li></ul>
                    </div>
                    <p>
                        The result returned from either log-reading function is a
                        binary string. To use the string with functions that require a
                        nonbinary string (such as functions that manipulate
                        <code class="literal">JSON</code> values), perform a conversion to
                        <code class="literal">utf8mb4</code>. Suppose that a bookmark has this
                        value:
                    </p><p style="color:blue;">两个日志读取函数返回的结果都是二进制字符串。要将字符串与需要非二进制字符串的函数（例如操作json值的函数）一起使用，请执行到utf8mb4的转换。假设书签具有以下值：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET @mark := audit_log_read_bookmark();</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @mark;</code></strong>
+-------------------------------------------------+
| @mark                                           |
+-------------------------------------------------+
| { "timestamp": "2019-10-03 16:10:28", "id": 2 } |
+-------------------------------------------------+
</pre><p>
                    Calling <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> with
                    that bookmark can return multiple events. To limit
                    <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> to reading a
                    single event, convert the bookmark to
                    <code class="literal">utf8mb4</code>, then add to it a
                    <code class="literal">max_array_length</code> item with a value of 1.
                    For example, using the preceding bookmark, convert and modify
                    it as follows:
                </p><p style="color:blue;">使用该书签调用audit_log_read（）可以返回多个事件。若要将audit_log_read（）限制为读取单个事件，请将书签转换为utf8mb4，然后向其添加值为1的max_array_length_项。例如，使用前面的书签，将其转换和修改如下：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET @mark = CONVERT(@mark USING utf8mb4);</code></strong>
mysql&gt; <strong class="userinput"><code>SET @mark := JSON_SET(@mark, '$.max_array_length', 1);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @mark;</code></strong>
+----------------------------------------------------------------------+
| @mark                                                                |
+----------------------------------------------------------------------+
| {"id": 2, "timestamp": "2019-10-03 16:10:28", "max_array_length": 1} |
+----------------------------------------------------------------------+
</pre><p>
                    The modified bookmark, when passed to
                    <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a>, produces a
                    result of a single audit record.
                </p><p style="color:blue;">当传递给audit_log_read（）时，修改的书签将生成单个审核记录的结果。</p><p>
                    To set a limit on the number of bytes that
                    <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> reads, set the
                    <a class="link" href="security.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
                    system variable. As of MySQL 5.7.23, this variable has a
                    default of 32KB and can be set at runtime. Each client should
                    set its session value of
                    <a class="link" href="security.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
                    appropriately for its use of
                    <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a>. Prior to MySQL
                    5.7.23,
                    <a class="link" href="security.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
                    has a default of 1MB, affects all clients, and can be changed
                    only at server startup.
                </p><p style="color:blue;">要设置audit_log_read（）读取的字节数限制，请设置audit_log_read_buffer_size系统变量。从mysql 5.7.23开始，这个变量的默认值是32kb，可以在运行时设置。每个客户端都应该为其使用audit_log_read（）设置其audit_log_read缓冲区大小的会话值。在mysql 5.7.23之前，audit_log_read_buffer_size的默认值为1MB，影响所有客户端，并且只能在服务器启动时更改。</p><p>
                    For additional information about audit log-reading functions,
                    see <a class="xref" href="security.html#audit-log-routines" title="Audit Log Functions">Audit Log Functions</a>.
                </p><p style="color:blue;">有关审核日志读取函数的其他信息，请参阅审核日志函数。</p>
                </div>

            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-filtering"></a>6.4.5.6&nbsp;Audit Log Filtering</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286880097632"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        This section describes how audit log filtering works as of
                        MySQL 5.7.13 if the audit log plugin and the accompanying
                        audit tables and UDFs are installed. If the plugin is
                        installed but not the accompanying audit tables and UDFs, the
                        plugin operates in legacy filtering mode, described in
                        <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>. Legacy mode is
                        filtering behavior as it was prior to MySQL 5.7.13; that is,
                        before the introduction of rule-based filtering.
                    </p><p style="color:blue;">本节介绍自mysql 5.7.13起，如果安装了审计日志插件以及随附的审计表和udf，审计日志过滤是如何工作的。如果插件已安装，但未安装随附的审核表和UDF，则插件将在“传统模式审核日志筛选”一节中描述的传统筛选模式下运行。传统模式是与mysql 5.7.13之前一样的过滤行为；也就是说，在引入基于规则的过滤之前。</p>
                </div>
                <p>
                    The audit log plugin has the capability of controlling logging
                    of audited events by filtering them:
                </p><p style="color:blue;">审核日志插件通过过滤已审核事件来控制已审核事件的日志记录：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Audited events can be filtered using these characteristics:
                    </p><p style="color:blue;">可以使用以下特征筛选已审核的事件：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                User account
                            </p><p style="color:blue;">用户帐户</p></li><li class="listitem"><p>
                                Audit event class
                            </p><p style="color:blue;">审核事件类</p></li><li class="listitem"><p>
                                Audit event subclass
                            </p><p style="color:blue;">审核事件子类</p></li><li class="listitem"><p>
                                Value of event fields such as those that indicate
                                operation status or SQL statement executed
                            </p><p style="color:blue;">事件字段的值，例如指示操作状态或执行的SQL语句的值</p></li></ul>
                        </div>
                    </li><li class="listitem"><p>
                        Audit filtering is rule based:
                    </p><p style="color:blue;">审核筛选基于规则：</p>
                        <div class="itemizedlist">
                            <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                A filter definition creates a set of auditing rules.
                                Definitions can be configured to include or exclude
                                events for logging based on the characteristics just
                                described.
                            </p><p style="color:blue;">筛选器定义创建一组审核规则。可以根据刚才描述的特性将定义配置为包括或排除用于日志记录的事件。</p></li><li class="listitem"><p>
                                As of MySQL 5.7.20, filter rules have the capability of
                                blocking (aborting) execution of qualifying events, in
                                addition to existing capabilities for event logging.
                            </p><p style="color:blue;">至于MySQL 5.7.20，除了现有的事件日志记录能力之外，过滤规则还具有阻止（中止）符合条件的事件的能力。</p></li><li class="listitem"><p>
                                Multiple filters can be defined, and any given filter
                                can be assigned to any number of user accounts.
                            </p><p style="color:blue;">可以定义多个筛选器，任何给定的筛选器都可以分配给任意数量的用户帐户。</p></li><li class="listitem"><p>
                                It is possible to define a default filter to use with
                                any user account that has no explicitly assigned filter.
                            </p><p style="color:blue;">可以定义一个默认筛选器，用于没有显式分配筛选器的任何用户帐户。</p></li></ul>
                        </div>
                    </li><li class="listitem"><p>
                        Audit filters can be defined, displayed, and modified using
                        an SQL interface based on user-defined functions (UDFs).
                    </p><p style="color:blue;">可以使用基于用户定义函数（UDF）的SQL接口定义、显示和修改审核筛选器。</p></li><li class="listitem"><p>
                        Audit filter definitions are stored in the tables in the
                        <code class="literal">mysql</code> system database.
                    </p><p style="color:blue;">审核筛选器定义存储在mysql系统数据库的表中。</p></li><li class="listitem"><p>
                        Within a given session, the value of the read-only
                        <a class="link" href="security.html#sysvar_audit_log_filter_id"><code class="literal">audit_log_filter_id</code></a> system
                        variable indicates whether a filter has been assigned to the
                        session.
                    </p><p style="color:blue;">在给定会话中，只读audit_log_filter_id系统变量的值指示是否已将筛选器分配给该会话。</p></li></ul>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        By default, rule-based audit log filtering logs no auditable
                        events for any users. To log all auditable events for all
                        users, use the following statements, which create a simple
                        filter to enable logging and assign it to the default account:
                    </p><p style="color:blue;">默认情况下，基于规则的审核日志筛选不会记录任何用户的可审核事件。要记录所有用户的所有可审核事件，请使用以下语句，这些语句创建一个简单的筛选器以启用日志记录并将其分配给默认帐户：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_set_filter('log_all', '{ "filter": { "log": true } }');
SELECT audit_log_filter_set_user('%', 'log_all');
</pre><p>
                    The filter assigned to <code class="literal">%</code> is used for
                    connections from any account that has no explicitly assigned
                    filter (which initially is true for all accounts).
                </p><p style="color:blue;">分配给%的筛选器用于来自任何没有显式分配筛选器的帐户的连接（最初对所有帐户都是如此）。</p>
                </div>
                <p>
                    The following list briefly summarizes the UDFs that implement
                    the SQL interface for audit filtering control:
                </p><p style="color:blue;">下表简要总结了实现审核筛选控件的SQL接口的UDF：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a class="link" href="security.html#udf_audit-log-filter-set-filter"><code class="literal">audit_log_filter_set_filter()</code></a>:
                        Define a filter
                    </p><p style="color:blue;">audit_log_filter_set_filter（）：定义筛选器</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#udf_audit-log-filter-remove-filter"><code class="literal">audit_log_filter_remove_filter()</code></a>:
                        Remove a filter
                    </p><p style="color:blue;">audit_log_filter_remove_filter（）：删除筛选器</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#udf_audit-log-filter-set-user"><code class="literal">audit_log_filter_set_user()</code></a>:
                        Start filtering a user account
                    </p><p style="color:blue;">audit_log_filter_set_user（）：开始筛选用户帐户</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#udf_audit-log-filter-remove-user"><code class="literal">audit_log_filter_remove_user()</code></a>:
                        Stop filtering a user account
                    </p><p style="color:blue;">audit_log_filter_remove_user（）：停止筛选用户帐户</p></li><li class="listitem"><p>
                        <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>:
                        Flush manual changes to the filter tables to affect ongoing
                        filtering
                    </p><p style="color:blue;">audit_log_filter_flush（）：刷新对筛选表的手动更改以影响正在进行的筛选</p></li></ul>
                </div>
                <p>
                    For usage examples and complete details about the filtering
                    functions, see <a class="xref" href="security.html#audit-log-filtering-functions" title="Using Audit Log Filtering Functions">Using Audit Log Filtering Functions</a>,
                    and <a class="xref" href="security.html#audit-log-routines" title="Audit Log Functions">Audit Log Functions</a>.
                </p><p style="color:blue;">有关筛选函数的用法示例和完整详细信息，请参阅使用审核日志筛选函数和审核日志函数。</p><p>
                Audit log filtering functions are subject to these constraints:
            </p><p style="color:blue;">审核日志筛选功能受以下约束：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        To use any filtering function, the
                        <code class="literal">audit_log</code> plugin must be enabled or an
                        error occurs. In addition, the audit tables must exist or an
                        error occurs. To install the <code class="literal">audit_log</code>
                        plugin and its accompanying UDFs and tables, see
                        <a class="xref" href="security.html#audit-log-installation" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”</a>.
                    </p><p style="color:blue;">若要使用任何筛选功能，必须启用审核日志插件，否则将发生错误。此外，审计表必须存在或发生错误。要安装审计日志插件及其附带的udf和表，请参阅第6.4.5.2节“安装或卸载mysql企业审计”。</p></li><li class="listitem"><p>
                        To use any filtering function, a user must possess the
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege or an error
                        occurs. To grant the <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a>
                        privilege to a user account, use this statement:
                    </p><p style="color:blue;">若要使用任何筛选功能，用户必须拥有超级权限，否则将发生错误。要授予用户帐户超级权限，请使用以下语句：</p><pre data-lang="sql" class="programlisting">GRANT SUPER ON *.* TO <em class="replaceable"><code>user</code></em>;
</pre><p>
                        Alternatively, should you prefer to avoid granting the
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege while still
                        permitting users to access specific filtering functions,
                        <span class="quote">“<span class="quote">wrapper</span>”</span> stored programs can be defined. This
                        technique is described in the context of keyring UDFs in
                        <a class="xref" href="security.html#keyring-udf-usage" title="Using General-Purpose Keyring Functions">Using General-Purpose Keyring Functions</a>; it can be adapted for
                        use with filtering UDFs.
                    </p><p style="color:blue;">或者，如果您希望避免授予超级权限，同时仍允许用户访问特定的筛选函数，则可以定义“包装器”存储程序。在使用通用keyring函数时，在keyring udf的上下文中描述了此技术；它可以用于过滤udf。</p></li><li class="listitem"><p>
                        The <code class="literal">audit_log</code> plugin operates in legacy
                        mode if it is installed but the accompanying audit tables
                        and functions are not created. The plugin writes these
                        messages to the error log at server startup:
                    </p><p style="color:blue;">如果已安装Audit_Log插件，但未创建附带的审核表和函数，则该插件将以传统模式运行。插件在服务器启动时将这些消息写入错误日志：</p><a class="indexterm" name="idm140286880047776"></a><pre data-lang="none" class="programlisting">[Warning] Plugin audit_log reported: 'Failed to open the audit log filter tables.'
[Warning] Plugin audit_log reported: 'Audit Log plugin supports a filtering,
which has not been installed yet. Audit Log plugin will run in the legacy
mode, which will be disabled in the next release.'
</pre><p>
                        In legacy mode, filtering can be done based only on event
                        account or status. For details, see
                        <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>.
                    </p><p style="color:blue;">在传统模式下，只能根据事件帐户或状态进行筛选。有关详细信息，请参阅第6.4.5.8节“传统模式审核日志筛选”。</p></li></ul>
                </div>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-functions" title="Using Audit Log Filtering Functions">Using Audit Log Filtering Functions</a></p><p style="color:blue;">使用审核日志筛选功能</p></li></ul>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-functions"></a>Using Audit Log Filtering Functions</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Before using the audit log user-defined functions (UDFs),
                        install them according to the instructions provided in
                        <a class="xref" href="security.html#audit-log-installation" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”</a>. The
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege is required to
                        use any of these functions.
                    </p><p style="color:blue;">在使用审计日志用户定义函数（udf）之前，请按照6.4.5.2节“安装或卸载mysql企业审计”中提供的说明进行安装。使用任何这些函数都需要超级特权。</p><p>
                    The audit log filtering functions enable filtering control by
                    providing an interface to create, modify, and remove filter
                    definitions and assign filters to user accounts.
                </p><p style="color:blue;">审核日志筛选功能通过提供创建、修改和删除筛选器定义以及将筛选器分配给用户帐户的界面来启用筛选控制。</p><p>
                    Filter definitions are <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                    values. For information about using
                    <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> data in MySQL, see
                    <a class="xref" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type">Section&nbsp;11.6, “The JSON Data Type”</a>. This section shows some simple filter
                    definitions. For more information about filter definitions,
                    see <a class="xref" href="security.html#audit-log-filter-definitions" title="6.4.5.7&nbsp;Writing Audit Log Filter Definitions">Section&nbsp;6.4.5.7, “Writing Audit Log Filter Definitions”</a>.
                </p><p style="color:blue;">过滤器定义是json值。有关在mysql中使用json数据的信息，请参见第11.6节“json数据类型”。本节显示一些简单的筛选器定义。有关筛选器定义的详细信息，请参阅第6.4.5.7节“编写审核日志筛选器定义”。</p><p>
                    When a connection arrives, the audit log plugin determines
                    which filter to use for the new session by searching for the
                    user account name in the current filter assignments:
                </p><p style="color:blue;">当连接到达时，审核日志插件通过在当前筛选器分配中搜索用户帐户名来确定要为新会话使用哪个筛选器：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If a filter is assigned to the user, the audit log uses
                            that filter.
                        </p><p style="color:blue;">如果为用户分配了筛选器，则审核日志将使用该筛选器。</p></li><li class="listitem"><p>
                            Otherwise, if no user-specific filter assignment exists,
                            but there is a filter assigned to the default account
                            (<code class="literal">%</code>), the audit log uses the default
                            filter.
                        </p><p style="color:blue;">否则，如果不存在特定于用户的筛选器分配，但存在分配给默认帐户（%）的筛选器，则审核日志使用默认筛选器。</p></li><li class="listitem"><p>
                            Otherwise, the audit log selects no audit events from the
                            session for processing.
                        </p><p style="color:blue;">否则，审核日志不会从会话中选择要处理的审核事件。</p></li></ul>
                    </div>
                    <p>
                        If a change-user operation occurs during a session (see
                        <a class="xref" href="connectors-apis.html#mysql-change-user" title="27.8.7.3&nbsp;mysql_change_user()">Section&nbsp;27.8.7.3, “mysql_change_user()”</a>), filter assignment for
                        the session is updated using the same rules but for the new
                        user.
                    </p><p style="color:blue;">如果在会话期间发生更改用户操作（请参阅第27.8.7.3节“mysql_change_user（）”），则使用相同的规则更新会话的筛选器分配，但对新用户使用相同的规则。</p><p>
                    By default, no accounts have a filter assigned, so no
                    processing of auditable events occurs for any account.
                </p><p style="color:blue;">默认情况下，没有为任何帐户分配筛选器，因此不会对任何帐户处理可审核事件。</p><p>
                    Suppose that instead you want the default to be to log only
                    connection-related activity (for example, to see connect,
                    change-user, and disconnect events, but not the SQL statements
                    users execute while connected). To achieve this, define a
                    filter (shown here named <code class="literal">log_conn_events</code>)
                    that enables logging only of events in the
                    <code class="literal">connection</code> class, and assign that filter to
                    the default account, represented by the <code class="literal">%</code>
                    account name:
                </p><p style="color:blue;">假设您希望默认设置为只记录与连接相关的活动（例如，查看connect、change user和disconnect事件，而不是用户在连接时执行的sql语句）。为此，请定义一个筛选器（此处显示的名称为Log_Conn_Events），该筛选器只允许记录连接类中的事件，并将该筛选器分配给默认帐户，由%帐户名表示：</p><pre data-lang="sql" class="programlisting">SET @f = '{ "filter": { "class": { "name": "connection" } } }';
SELECT audit_log_filter_set_filter('log_conn_events', @f);
SELECT audit_log_filter_set_user('%', 'log_conn_events');
</pre><p>
                    Now the audit log uses this default account filter for
                    connections from any account that has no explicitly defined
                    filter.
                </p><p style="color:blue;">现在，审核日志对来自任何没有显式定义筛选器的帐户的连接使用此默认帐户筛选器。</p><p>
                    To assign a filter explicitly to a particular user account or
                    accounts, define the filter, then assign it to the relevant
                    accounts:
                </p><p style="color:blue;">要将筛选器显式分配给一个或多个特定用户帐户，请定义筛选器，然后将其分配给相关帐户：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_set_filter('log_all', '{ "filter": { "log": true } }');
SELECT audit_log_filter_set_user('user1@localhost', 'log_all');
SELECT audit_log_filter_set_user('user2@localhost', 'log_all');
</pre><p>
                    Now full logging is enabled for
                    <code class="literal">user1@localhost</code> and
                    <code class="literal">user2@localhost</code>. Connections from other
                    accounts continue to be filtered using the default account
                    filter.
                </p><p style="color:blue;">现在为user1@localhost和user2@localhost启用了完整日志记录。来自其他帐户的连接将继续使用默认帐户筛选器进行筛选。</p><p>
                    To disassociate a user account from its current filter, either
                    unassign the filter or assign a different filter:
                </p><p style="color:blue;">要解除用户帐户与其当前筛选器的关联，请取消分配筛选器或分配其他筛选器：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            To unassign the filter from the user account:
                        </p><p style="color:blue;">要从用户帐户取消分配筛选器，请执行以下操作：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_remove_user('user1@localhost');
</pre><p>
                            Filtering of current sessions for the account remains
                            unaffected. Subsequent connections from the account are
                            filtered using the default account filter if there is one,
                            and are not logged otherwise.
                        </p><p style="color:blue;">帐户当前会话的筛选不受影响。来自帐户的后续连接将使用默认帐户筛选器（如果有）进行筛选，否则不会记录。</p></li><li class="listitem"><p>
                            To assign a different filter to the user account:
                        </p><p style="color:blue;">要为用户帐户分配其他筛选器，请执行以下操作：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_set_filter('log_nothing', '{ "filter": { "log": false } }');
SELECT audit_log_filter_set_user('user1@localhost', 'log_nothing');
</pre><p>
                            Filtering of current sessions for the account remains
                            unaffected. Subsequent connections from the account are
                            filtered using the new filter. For the filter shown here,
                            that means no logging for new connections from
                            <code class="literal">user1@localhost</code>.
                        </p><p style="color:blue;">帐户当前会话的筛选不受影响。使用新筛选器筛选来自帐户的后续连接。对于这里显示的过滤器，这意味着不记录user1@localhost的新连接。</p></li></ul>
                    </div>
                    <p>
                        For audit log filtering, user name and host name comparisons
                        are case-sensitive. This differs from comparisons for
                        privilege checking, for which host name comparisons are not
                        case-sensitive.
                    </p><p style="color:blue;">对于审核日志筛选，用户名和主机名比较区分大小写。这与特权检查的比较不同，后者的主机名比较不区分大小写。</p><p>
                    To remove a filter, do this:
                </p><p style="color:blue;">要删除筛选器，请执行以下操作：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_remove_filter('log_nothing');
</pre><p>
                    Removing a filter also unassigns it from any users to whom it
                    has been assigned, including any current sessions for those
                    users.
                </p><p style="color:blue;">删除筛选器也会将其从已分配给它的任何用户（包括这些用户的任何当前会话）中取消分配。</p><p>
                    The filtering UDFs just described affect audit filtering
                    immediately and update the audit log tables in the
                    <code class="literal">mysql</code> system database that store filters
                    and user accounts (see <a class="xref" href="security.html#audit-log-tables" title="Audit Log Tables">Audit Log Tables</a>). It
                    is also possible to modify the audit log tables directly using
                    statements such as <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                    <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
                    <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a>, but such changes do not
                    affect filtering immediately. To flush your changes and make
                    them operational, call
                    <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>:
                </p><p style="color:blue;">刚才描述的过滤udf会立即影响审计过滤，并更新mysql系统数据库中存储过滤器和用户帐户的审计日志表（请参阅审计日志表）。也可以使用insert、update和delete等语句直接修改审计日志表，但这些更改不会立即影响筛选。要刷新更改并使其可操作，请调用audit_log_filter_flush（）：</p><pre data-lang="sql" class="programlisting">SELECT audit_log_filter_flush();
</pre>
                    <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Warning
                        </div>
                        <p>
                            <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                            should be used only after modifying the audit tables
                            directly, to force reloading all filters. Otherwise, this
                            function should be avoided. It is, in effect, a simplified
                            version of unloading and reloading the
                            <code class="literal">audit_log</code> plugin with
                            <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> plus
                            <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>.
                        </p><p style="color:blue;">audit_log_filter_flush（）只能在直接修改审核表之后使用，以强制重新加载所有筛选器。否则，应避免使用此功能。实际上，这是一个简单的版本，可以使用uninstall plugin plus install plugin卸载和重新加载审计日志插件。</p><p>
                        <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                        affects all current sessions and detaches them from their
                        previous filters. Current sessions are no longer logged
                        unless they disconnect and reconnect, or execute a
                        change-user operation.
                    </p><p style="color:blue;">audit_log_filter_flush（）会影响所有当前会话，并将它们与以前的筛选器分离。当前会话将不再记录，除非它们断开连接并重新连接，或执行更改用户操作。</p>
                    </div>
                    <p>
                        To determine whether a filter has been assigned to the current
                        session, check the session value of the read-only
                        <a class="link" href="security.html#sysvar_audit_log_filter_id"><code class="literal">audit_log_filter_id</code></a> system
                        variable. If the value is 0, no filter is assigned. A nonzero
                        value indicates the internally maintained ID of the assigned
                        filter:
                    </p><p style="color:blue;">要确定是否已将筛选器分配给当前会话，请检查只读audit_log_filter_id系统变量的会话值。如果值为0，则不分配筛选器。非零值表示指定筛选器的内部维护ID：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @@audit_log_filter_id;</code></strong>
+-----------------------+
| @@audit_log_filter_id |
+-----------------------+
|                     2 |
+-----------------------+
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-filter-definitions"></a>6.4.5.7&nbsp;Writing Audit Log Filter Definitions</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Filter definitions are <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                    values. For information about using
                    <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> data in MySQL, see
                    <a class="xref" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type">Section&nbsp;11.6, “The JSON Data Type”</a>.
                </p><p style="color:blue;">过滤器定义是json值。有关在mysql中使用json数据的信息，请参见第11.6节“json数据类型”。</p><p>
                Filter definitions have this form, where
                <em class="replaceable"><code>actions</code></em> indicates how filtering takes
                place:
            </p><p style="color:blue;">筛选器定义具有此窗体，其中的操作指示如何进行筛选：</p><pre data-lang="json" class="programlisting">{ "filter": <em class="replaceable"><code>actions</code></em> }
</pre><p>
                The following discussion describes permitted constructs in
                filter definitions.
            </p><p style="color:blue;">下面的讨论描述了过滤器定义中允许的构造。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-enabling-logging" title="Logging All Events">Logging All Events</a></p><p style="color:blue;">记录所有事件</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-class-logging" title="Logging Specific Event Classes">Logging Specific Event Classes</a></p><p style="color:blue;">记录特定事件类</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-subclass-logging" title="Logging Specific Event Subclasses">Logging Specific Event Subclasses</a></p><p style="color:blue;">记录特定的事件子类</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-inclusive-exclusive" title="Inclusive and Exclusive Logging">Inclusive and Exclusive Logging</a></p><p style="color:blue;">包含和独占日志记录</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-event-fields" title="Testing Event Field Values">Testing Event Field Values</a></p><p style="color:blue;">测试事件字段值</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-blocking-events" title="Blocking Execution of Specific Events">Blocking Execution of Specific Events</a></p><p style="color:blue;">阻止特定事件的执行</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-logical-operators" title="Logical Operators">Logical Operators</a></p><p style="color:blue;">逻辑运算符</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-predefined-variables" title="Referencing Predefined Variables">Referencing Predefined Variables</a></p><p style="color:blue;">引用预定义变量</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-predefined-functions" title="Referencing Predefined Functions">Referencing Predefined Functions</a></p><p style="color:blue;">引用预定义函数</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-filtering-filter-replacement" title="Replacing a User Filter">Replacing a User Filter</a></p><p style="color:blue;">替换用户筛选器</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-enabling-logging"></a>Logging All Events</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To explicitly enable or disable logging of all events, use a
                        <code class="literal">log</code> element in the filter:
                    </p><p style="color:blue;">要显式启用或禁用所有事件的日志记录，请在筛选器中使用日志元素：</p><pre data-lang="json" class="programlisting">{
  "filter": { "log": true }
}
</pre><p>
                    The <code class="literal">log</code> value can be either
                    <code class="literal">true</code> or <code class="literal">false</code>.
                </p><p style="color:blue;">日志值可以为true或false。</p><p>
                    The preceding filter enables logging of all events. It is
                    equivalent to:
                </p><p style="color:blue;">前面的过滤器允许记录所有事件。相当于：</p><pre data-lang="json" class="programlisting">{
  "filter": { }
}
</pre><p>
                    Logging behavior depends on the <code class="literal">log</code> value
                    and whether <code class="literal">class</code> or
                    <code class="literal">event</code> items are specified:
                </p><p style="color:blue;">日志记录行为取决于日志值以及是否指定了类或事件项：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            With <code class="literal">log</code> specified, its given value is
                            used.
                        </p><p style="color:blue;">如果指定了日志，则使用其给定值。</p></li><li class="listitem"><p>
                            Without <code class="literal">log</code> specified, logging is
                            <code class="literal">true</code> if no <code class="literal">class</code> or
                            <code class="literal">event</code> item is specified, and
                            <code class="literal">false</code> otherwise (in which case,
                            <code class="literal">class</code> or <code class="literal">event</code> can
                            include their own <code class="literal">log</code> item).
                        </p><p style="color:blue;">如果未指定日志，则如果未指定类或事件项，则日志记录为true；如果未指定类或事件项，则日志记录为false（在这种情况下，类或事件可以包含自己的日志项）。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-class-logging"></a>Logging Specific Event Classes</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To log events of a specific class, use a
                        <code class="literal">class</code> element in the filter, with its
                        <code class="literal">name</code> field denoting the name of the class
                        to log:
                    </p><p style="color:blue;">要记录特定类的事件，请在筛选器中使用class元素，其name字段指示要记录的类的名称：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": { "name": "connection" }
  }
}
</pre><p>
                    The <code class="literal">name</code> value can be
                    <code class="literal">connection</code>, <code class="literal">general</code>, or
                    <code class="literal">table_access</code> to log connection, general, or
                    table-access events, respectively.
                </p><p style="color:blue;">名称值可以是connection、general或table_访问日志连接、general或table访问事件。</p><p>
                    The preceding filter enables logging of events in the
                    <code class="literal">connection</code> class. It is equivalent to the
                    following filter with <code class="literal">log</code> items made
                    explicit:
                </p><p style="color:blue;">前面的过滤器允许记录连接类中的事件。它相当于以下筛选器，日志项显式显示：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "log": false,
    "class": { "log": true,
               "name": "connection" }
  }
}
</pre><p>
                    To enable logging of multiple classes, define the
                    <code class="literal">class</code> value as a
                    <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> array element that names
                    the classes:
                </p><p style="color:blue;">要启用多个类的日志记录，请将类值定义为命名这些类的json数组元素：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": [
      { "name": "connection" },
      { "name": "general" },
      { "name": "table_access" }
    ]
  }
}
</pre>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            When multiple instances of a given item appear at the same
                            level within a filter definition, the item values can be
                            combined into a single instance of that item within an array
                            value. The preceding definition can be written like this:
                        </p><p style="color:blue;">当给定项的多个实例出现在筛选器定义中的同一级别时，可以将这些项值组合到数组值中该项的单个实例中。前面的定义可以这样写：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": [
      { "name": [ "connection", "general", "table_access" ] }
    ]
  }
}
</pre>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-subclass-logging"></a>Logging Specific Event Subclasses</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To select specific event subclasses, use an
                        <code class="literal">event</code> item containing a
                        <code class="literal">name</code> item that names the subclasses. The
                        default action for events selected by an
                        <code class="literal">event</code> item is to log them. For example,
                        this filter enables logging for the named event subclasses:
                    </p><p style="color:blue;">要选择特定的事件子类，请使用包含命名子类的名称项的事件项。由事件项选择的事件的默认操作是记录它们。例如，此筛选器启用命名事件子类的日志记录：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": [
      {
        "name": "connection",
        "event": [
          { "name": "connect" },
          { "name": "disconnect" }
        ]
      },
      { "name": "general" },
      {
        "name": "table_access",
        "event": [
          { "name": "insert" },
          { "name": "delete" },
          { "name": "update" }
        ]
      }
    ]
  }
}
</pre><p>
                    The <code class="literal">event</code> item can also contain explicit
                    <code class="literal">log</code> items to indicate whether to log
                    qualifying events. This <code class="literal">event</code> item selects
                    multiple events and explicitly indicates logging behavior for
                    them:
                </p><p style="color:blue;">事件项还可以包含显式日志项，以指示是否记录符合条件的事件。此事件项选择多个事件并显式指示它们的日志记录行为：</p><pre data-lang="json" class="programlisting">"event": [
  { "name": "read", "log": false },
  { "name": "insert", "log": true },
  { "name": "delete", "log": true },
  { "name": "update", "log": true }
]
</pre><p>
                    As of MySQL 5.7.20, the <code class="literal">event</code> item can also
                    indicate whether to block qualifying events, if it contains an
                    <code class="literal">abort</code> item. For details, see
                    <a class="xref" href="security.html#audit-log-filtering-blocking-events" title="Blocking Execution of Specific Events">Blocking Execution of Specific Events</a>.
                </p><p style="color:blue;">从mysql 5.7.20开始，如果事件项包含中止项，则它还可以指示是否阻止符合条件的事件。有关详细信息，请参阅阻止特定事件的执行。</p><p>
                    <a class="xref" href="security.html#audit-log-event-subclass-combinations" title="Table&nbsp;6.25&nbsp;Event Class and Subclass Combinations">Table&nbsp;6.25, “Event Class and Subclass Combinations”</a>
                    describes the permitted subclass values for each event class.
                </p><p style="color:blue;">表6.25“事件类和子类组合”描述了每个事件类的允许子类值。</p>
                    <div class="table">
                        <a name="audit-log-event-subclass-combinations"></a><p class="title"><b>Table&nbsp;6.25&nbsp;Event Class and Subclass Combinations</b></p><p style="color:blue;">表6.25事件类和子类组合</p>
                        <div class="table-contents">
                            <table summary="Permitted combiniations of event class and subclass values."><colgroup><col width="20%"><col width="20%"><col width="60%"></colgroup><thead><tr>
                                <th scope="col">Event Class</th>
                                <th scope="col">Event Subclass</th>
                                <th scope="col">Description</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">connection</code></td>
                                <td><code class="literal">connect</code></td>
                                <td>Connection initiation (successful or unsuccessful)</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">connection</code></td>
                                <td><code class="literal">change_user</code></td>
                                <td>User re-authentication with different user/password during session</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">connection</code></td>
                                <td><code class="literal">disconnect</code></td>
                                <td>Connection termination</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general</code></td>
                                <td><code class="literal">status</code></td>
                                <td>General operation information</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">read</code></td>
                                <td>Table read statements, such as <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> or
                                    <a class="link" href="sql-syntax.html#insert-select" title="13.2.5.1&nbsp;INSERT ... SELECT Syntax"><code class="literal">INSERT
                                        INTO ... SELECT</code></a></td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">delete</code></td>
                                <td>Table delete statements, such as <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a>
                                    or <a class="link" href="sql-syntax.html#truncate-table" title="13.1.34&nbsp;TRUNCATE TABLE Syntax"><code class="literal">TRUNCATE TABLE</code></a></td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">insert</code></td>
                                <td>Table insert statements, such as <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>
                                    or <a class="link" href="sql-syntax.html#replace" title="13.2.8&nbsp;REPLACE Syntax"><code class="literal">REPLACE</code></a></td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">update</code></td>
                                <td>Table update statements, such as <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a></td>
                            </tr></tbody></table>
                        </div>

                    </div>
                    <br class="table-break"><p>
                    <a class="xref" href="security.html#audit-log-event-subclass-log-abort" title="Table&nbsp;6.26&nbsp;Log and Abort Characteristics Per Event Class and Subclass Combination">Table&nbsp;6.26, “Log and Abort Characteristics Per Event Class and Subclass Combination”</a> describes
                    for each event subclass whether it can be logged or aborted.
                </p><p style="color:blue;">表6.26，“每个事件类和子类组合的日志和中止特征”描述了每个事件子类是否可以被记录或中止。</p>
                    <div class="table">
                        <a name="audit-log-event-subclass-log-abort"></a><p class="title"><b>Table&nbsp;6.26&nbsp;Log and Abort Characteristics Per Event Class and Subclass Combination</b></p><p style="color:blue;">表6.26每个事件类和子类组合的日志和中止特征</p>
                        <div class="table-contents">
                            <table summary="Log and abort characteristics for event class and subclass combinations."><colgroup><col width="20%"><col width="20%"><col width="30%"><col width="30%"></colgroup><thead><tr>
                                <th scope="col">Event Class</th>
                                <th scope="col">Event Subclass</th>
                                <th scope="col">Can be Logged</th>
                                <th scope="col">Can be Aborted</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">connection</code></td>
                                <td><code class="literal">connect</code></td>
                                <td>Yes</td>
                                <td>No</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">connection</code></td>
                                <td><code class="literal">change_user</code></td>
                                <td>Yes</td>
                                <td>No</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">connection</code></td>
                                <td><code class="literal">disconnect</code></td>
                                <td>Yes</td>
                                <td>No</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general</code></td>
                                <td><code class="literal">status</code></td>
                                <td>Yes</td>
                                <td>No</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">read</code></td>
                                <td>Yes</td>
                                <td>Yes</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">delete</code></td>
                                <td>Yes</td>
                                <td>Yes</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">insert</code></td>
                                <td>Yes</td>
                                <td>Yes</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_access</code></td>
                                <td><code class="literal">update</code></td>
                                <td>Yes</td>
                                <td>Yes</td>
                            </tr></tbody></table>
                        </div>

                    </div>
                    <br class="table-break">
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-inclusive-exclusive"></a>Inclusive and Exclusive Logging</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        A filter can be defined in inclusive or exclusive mode:
                    </p><p style="color:blue;">可以在包含模式或独占模式下定义筛选器：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Inclusive mode logs only explicitly specified items.
                        </p><p style="color:blue;">包含模式只记录显式指定的项。</p></li><li class="listitem"><p>
                            Exclusive mode logs everything but explicitly specified
                            items.
                        </p><p style="color:blue;">独占模式记录除显式指定项之外的所有内容。</p></li></ul>
                    </div>
                    <p>
                        To perform inclusive logging, disable logging globally and
                        enable logging for specific classes. This filter logs
                        <code class="literal">connect</code> and <code class="literal">disconnect</code>
                        events in the <code class="literal">connection</code> class, and events
                        in the <code class="literal">general</code> class:
                    </p><p style="color:blue;">要执行包含日志记录，请全局禁用日志记录，并为特定类启用日志记录。此筛选器记录连接类中的连接和断开连接事件以及常规类中的事件：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "log": false,
    "class": [
      {
        "name": "connection",
        "event": [
          { "name": "connect", "log": true },
          { "name": "disconnect", "log": true }
        ]
      },
      { "name": "general", "log": true }
    ]
  }
}
</pre><p>
                    To perform exclusive logging, enable logging globally and
                    disable logging for specific classes. This filter logs
                    everything except events in the <code class="literal">general</code>
                    class:
                </p><p style="color:blue;">要执行独占日志记录，请全局启用日志记录并禁用特定类的日志记录。此筛选器记录除常规类中的事件之外的所有内容：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "log": true,
    "class":
      { "name": "general", "log": false }
  }
}
</pre><p>
                    This filter logs <code class="literal">change_user</code> events in the
                    <code class="literal">connection</code> class, and
                    <code class="literal">table_access</code> events:
                </p><p style="color:blue;">此筛选器记录连接类中的更改用户事件和表访问事件：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "log": true,
    "class": [
      {
        "name": "connection",
        "event": [
          { "name": "connect", "log": false },
          { "name": "disconnect", "log": false }
        ]
      },
      { "name": "general", "log": false }
    ]
  }
}
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-event-fields"></a>Testing Event Field Values</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To enable logging based on specific event field values,
                        specify a <code class="literal">field</code> item within the
                        <code class="literal">log</code> item that indicates the field name and
                        its expected value:
                    </p><p style="color:blue;">要基于特定事件字段值启用日志记录，请在日志项中指定一个字段项，该字段项指示字段名及其预期值：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": {
    "name": "general",
      "event": {
        "name": "status",
        "log": {
          "field": { "name": "general_command.str", "value": "Query" }
        }
      }
    }
  }
}
</pre><p>
                    Each event contains event class-specific fields that can be
                    accessed from within a filter to perform custom filtering.
                </p><p style="color:blue;">每个事件都包含特定于事件类的字段，可以从筛选器中访问这些字段以执行自定义筛选。</p><p>
                    A connection event indicates when a connection-related
                    activity occurs during a session, such as a user connecting to
                    or disconnecting from the server.
                    <a class="xref" href="security.html#audit-log-connection-event-fields" title="Table&nbsp;6.27&nbsp;Connection Event Fields">Table&nbsp;6.27, “Connection Event Fields”</a> indicates
                    the permitted fields for connection events.
                </p><p style="color:blue;">连接事件指示会话期间何时发生与连接相关的活动，例如连接到服务器或从服务器断开连接的用户。表6.27，“连接事件字段”表示允许的连接事件字段。</p>
                    <div class="table">
                        <a name="audit-log-connection-event-fields"></a><p class="title"><b>Table&nbsp;6.27&nbsp;Connection Event Fields</b></p><p style="color:blue;">表6.27连接事件字段</p>
                        <div class="table-contents">
                            <table summary="Permitted fields for connection events."><colgroup><col width="35%"><col width="20%"><col width="45%"></colgroup><thead><tr>
                                <th scope="col">Field Name</th>
                                <th scope="col">Field Type</th>
                                <th scope="col">Description</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">status</code></td>
                                <td>integer</td>
                                <td><p class="valid-value">
                                    Event status:
                                </p><p style="color:blue;">事件状态：</p><p class="valid-value">
                                    0: OK
                                </p><p style="color:blue;">0:好的</p><p class="valid-value">
                                    Otherwise: Failed
                                </p><p style="color:blue;">否则：失败</p></td>
                            </tr><tr>
                                <td scope="row"><code class="literal">connection_id</code></td>
                                <td>unsigned integer</td>
                                <td>Connection ID</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">user.str</code></td>
                                <td>string</td>
                                <td>User name specified during authentication</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">user.length</code></td>
                                <td>unsigned integer</td>
                                <td>User name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">priv_user.str</code></td>
                                <td>string</td>
                                <td>Authenticated user name (account user name)</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">priv_user.length</code></td>
                                <td>unsigned integer</td>
                                <td>Authenticated user name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">external_user.str</code></td>
                                <td>string</td>
                                <td>External user name (provided by third-party authentication plugin)</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">external_user.length</code></td>
                                <td>unsigned integer</td>
                                <td>External user name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">proxy_user.str</code></td>
                                <td>string</td>
                                <td>Proxy user name</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">proxy_user.length</code></td>
                                <td>unsigned integer</td>
                                <td>Proxy user name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">host.str</code></td>
                                <td>string</td>
                                <td>Connected user host</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">host.length</code></td>
                                <td>unsigned integer</td>
                                <td>Connected user host length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">ip.str</code></td>
                                <td>string</td>
                                <td>Connected user IP address</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">ip.length</code></td>
                                <td>unsigned integer</td>
                                <td>Connected user IP address length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">database.str</code></td>
                                <td>string</td>
                                <td>Database name specified at connect time</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">database.length</code></td>
                                <td>unsigned integer</td>
                                <td>Database name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">connection_type</code></td>
                                <td>integer</td>
                                <td><p class="valid-value">
                                    Connection type:
                                </p><p style="color:blue;">连接类型：</p><p class="valid-value">
                                    or <code class="literal">"::undefined"</code>: Undefined
                                </p><p style="color:blue;">或“：：未定义”：未定义</p><p class="valid-value">
                                    or <code class="literal">"::tcp/ip"</code>: TCP/IP
                                </p><p style="color:blue;">或“：：tcp/ip”：tcp/ip</p><p class="valid-value">
                                    or <code class="literal">"::socket"</code>: Socket
                                </p><p style="color:blue;">或“：：socket”：socket</p><p class="valid-value">
                                    or <code class="literal">"::named_pipe"</code>: Named pipe
                                </p><p style="color:blue;">或“：：named_pipe”：命名管道</p><p class="valid-value">
                                    or <code class="literal">"::ssl"</code>: TCP/IP with encryption
                                </p><p style="color:blue;">或“：：ssl”：带加密的TCP/IP</p><p class="valid-value">
                                    or <code class="literal">"::shared_memory"</code>: Shared memory
                                </p><p style="color:blue;">或“：：共享内存”：共享内存</p></td>
                            </tr></tbody></table>
                        </div>

                    </div>
                    <br class="table-break"><p>
                    The <code class="literal">"::<em class="replaceable"><code>xxx</code></em>"</code>
                    values are symbolic pseudo-constants that may be given instead
                    of the literal numeric values. They must be quoted as strings
                    and are case-sensitive.
                </p><p style="color:blue;">“：：xxx”值是符号伪常量，可以给出它而不是文字数字值。它们必须以字符串形式引用，并且区分大小写。</p><p>
                    A general event indicates the status code of an operation and
                    its details. <a class="xref" href="security.html#audit-log-general-event-fields" title="Table&nbsp;6.28&nbsp;General Event Fields">Table&nbsp;6.28, “General Event Fields”</a>
                    indicates the permitted fields for general events.
                </p><p style="color:blue;">一般事件表示操作的状态代码及其详细信息。表6.28，“一般事件字段”表示一般事件的允许字段。</p>
                    <div class="table">
                        <a name="audit-log-general-event-fields"></a><p class="title"><b>Table&nbsp;6.28&nbsp;General Event Fields</b></p><p style="color:blue;">表6.28一般事件字段</p>
                        <div class="table-contents">
                            <table summary="Permitted field types for general events."><colgroup><col width="35%"><col width="20%"><col width="45%"></colgroup><thead><tr>
                                <th scope="col">Field Name</th>
                                <th scope="col">Field Type</th>
                                <th scope="col">Description</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">general_error_code</code></td>
                                <td>integer</td>
                                <td><p class="valid-value">
                                    Event status:
                                </p><p style="color:blue;">事件状态：</p><p class="valid-value">
                                    0: OK
                                </p><p style="color:blue;">0:好的</p><p class="valid-value">
                                    Otherwise: Failed
                                </p><p style="color:blue;">否则：失败</p></td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_thread_id</code></td>
                                <td>unsigned integer</td>
                                <td>Connection/thread ID</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_user.str</code></td>
                                <td>string</td>
                                <td>User name specified during authentication</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_user.length</code></td>
                                <td>unsigned integer</td>
                                <td>User name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_command.str</code></td>
                                <td>string</td>
                                <td>Command name</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_command.length</code></td>
                                <td>unsigned integer</td>
                                <td>Command name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_query.str</code></td>
                                <td>string</td>
                                <td>SQL statement text</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_query.length</code></td>
                                <td>unsigned integer</td>
                                <td>SQL statement text length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_host.str</code></td>
                                <td>string</td>
                                <td>Host name</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_host.length</code></td>
                                <td>unsigned integer</td>
                                <td>Host name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_sql_command.str</code></td>
                                <td>string</td>
                                <td>SQL command type name</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_sql_command.length</code></td>
                                <td>unsigned integer</td>
                                <td>SQL command type name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_external_user.str</code></td>
                                <td>string</td>
                                <td>External user name (provided by third-party authentication plugin)</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_external_user.length</code></td>
                                <td>unsigned integer</td>
                                <td>External user name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_ip.str</code></td>
                                <td>string</td>
                                <td>Connected user IP address</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">general_ip.length</code></td>
                                <td>unsigned integer</td>
                                <td>Connection user IP address length</td>
                            </tr></tbody></table>
                        </div>

                    </div>
                    <br class="table-break"><p>
                    <code class="literal">general_command.str</code> indicates a command
                    name: <code class="literal">Query</code>, <code class="literal">Execute</code>,
                    <code class="literal">Quit</code>, or <code class="literal">Change user</code>.
                </p><p style="color:blue;">general_command.str指示命令名：query、execute、quit或change user。</p><p>
                    A general event with the
                    <code class="literal">general_command.str</code> field set to
                    <code class="literal">Query</code> or <code class="literal">Execute</code>
                    contains <code class="literal">general_sql_command.str</code> set to a
                    value that specifies the type of SQL command:
                    <code class="literal">alter_db</code>,
                    <code class="literal">alter_db_upgrade</code>,
                    <code class="literal">admin_commands</code>, and so forth. These values
                    can be seen as the last components of the Performance Schema
                    instruments displayed by this statement:
                </p><p style="color:blue;">将general_command.str字段设置为query或execute的常规事件包含general_sql_command.str，设置为指定sql命令类型的值：alter_db、alter_db_upgrade、admin_commands等。这些值可视为此语句显示的性能架构工具的最后一个组件：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NAME FROM performance_schema.setup_instruments</code></strong>
       <strong class="userinput"><code>WHERE NAME LIKE 'statement/sql/%' ORDER BY NAME;</code></strong>
+---------------------------------------+
| NAME                                  |
+---------------------------------------+
| statement/sql/alter_db                |
| statement/sql/alter_db_upgrade        |
| statement/sql/alter_event             |
| statement/sql/alter_function          |
| statement/sql/alter_instance          |
| statement/sql/alter_procedure         |
| statement/sql/alter_server            |
...
</pre><p>
                    A table-access event provides information about specific table
                    accesses.
                    <a class="xref" href="security.html#audit-log-table-access-event-fields" title="Table&nbsp;6.29&nbsp;Table-Access Event Fields">Table&nbsp;6.29, “Table-Access Event Fields”</a>
                    indicates the permitted fields for table-access events.
                </p><p style="color:blue;">表访问事件提供有关特定表访问的信息。表6.29，“表访问事件字段”表示表访问事件的允许字段。</p>
                    <div class="table">
                        <a name="audit-log-table-access-event-fields"></a><p class="title"><b>Table&nbsp;6.29&nbsp;Table-Access Event Fields</b></p><p style="color:blue;">表6.29表访问事件字段</p>
                        <div class="table-contents">
                            <table summary="Permitted fields for table-access events."><colgroup><col width="35%"><col width="20%"><col width="45%"></colgroup><thead><tr>
                                <th scope="col">Field Name</th>
                                <th scope="col">Field Type</th>
                                <th scope="col">Description</th>
                            </tr></thead><tbody><tr>
                                <td scope="row"><code class="literal">connection_id</code></td>
                                <td>unsigned integer</td>
                                <td>Event connection ID</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">sql_command_id</code></td>
                                <td>integer</td>
                                <td>SQL command ID</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">query.str</code></td>
                                <td>string</td>
                                <td>SQL statement text</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">query.length</code></td>
                                <td>unsigned integer</td>
                                <td>SQL statement text length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_database.str</code></td>
                                <td>string</td>
                                <td>Database name associated with event</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_database.length</code></td>
                                <td>unsigned integer</td>
                                <td>Database name length</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_name.str</code></td>
                                <td>string</td>
                                <td>Table name associated with event</td>
                            </tr><tr>
                                <td scope="row"><code class="literal">table_name.length</code></td>
                                <td>unsigned integer</td>
                                <td>Table name length</td>
                            </tr></tbody></table>
                        </div>

                    </div>
                    <br class="table-break"><p>
                    The following list shows which statements produce which
                    table-access events:
                </p><p style="color:blue;">下表显示了哪些语句生成哪些表访问事件：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">read</code> event:
                        </p><p style="color:blue;">读取事件：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">SELECT</code>
                                </p><p style="color:blue;">选择</p></li><li class="listitem"><p>
                                    <code class="literal">INSERT ... SELECT</code> (for tables
                                    referenced in <code class="literal">SELECT</code> clause)
                                </p><p style="color:blue;">插入…select（用于select子句中引用的表）</p></li><li class="listitem"><p>
                                    <code class="literal">REPLACE ... SELECT</code> (for tables
                                    referenced in <code class="literal">SELECT</code> clause)
                                </p><p style="color:blue;">替换…select（用于select子句中引用的表）</p></li><li class="listitem"><p>
                                    <code class="literal">UPDATE ... WHERE</code> (for tables
                                    referenced in <code class="literal">WHERE</code> clause)
                                </p><p style="color:blue;">更新。。。where（用于where子句中引用的表）</p></li><li class="listitem"><p>
                                    <code class="literal">HANDLER ... READ</code>
                                </p><p style="color:blue;">处理程序…阅读</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">delete</code> event:
                        </p><p style="color:blue;">删除事件：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">DELETE</code>
                                </p><p style="color:blue;">删除</p></li><li class="listitem"><p>
                                    <code class="literal">TRUNCATE TABLE</code>
                                </p><p style="color:blue;">截断表</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">insert</code> event:
                        </p><p style="color:blue;">插入事件：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">INSERT</code>
                                </p><p style="color:blue;">插入</p></li><li class="listitem"><p>
                                    <code class="literal">INSERT ... SELECT</code> (for table
                                    referenced in <code class="literal">INSERT</code> clause)
                                </p><p style="color:blue;">插入…select（用于insert子句中引用的表）</p></li><li class="listitem"><p>
                                    <code class="literal">REPLACE</code>
                                </p><p style="color:blue;">替换</p></li><li class="listitem"><p>
                                    <code class="literal">REPLACE ... SELECT</code> (for table
                                    referenced in <code class="literal">REPLACE</code> clause
                                </p><p style="color:blue;">替换…select（用于replace子句中引用的表</p></li><li class="listitem"><p>
                                    <code class="literal">LOAD DATA</code>
                                </p><p style="color:blue;">加载数据</p></li><li class="listitem"><p>
                                    <code class="literal">LOAD XML</code>
                                </p><p style="color:blue;">加载XML</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">update</code> event:
                        </p><p style="color:blue;">更新事件：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">UPDATE</code>
                                </p><p style="color:blue;">更新</p></li><li class="listitem"><p>
                                    <code class="literal">UPDATE ... WHERE</code> (for tables
                                    referenced in <code class="literal">UPDATE</code> clause)
                                </p><p style="color:blue;">更新。。。where（用于update子句中引用的表）</p></li></ul>
                            </div>
                        </li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-blocking-events"></a>Blocking Execution of Specific Events</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        As of MySQL 5.7.20, <code class="literal">event</code> items can include
                        an <code class="literal">abort</code> item that indicates whether to
                        prevent qualifying events from executing. For example,
                        <code class="literal">abort</code> enables rules to be written that
                        block execution of specific SQL statements.
                    </p><p style="color:blue;">从mysql 5.7.20开始，事件项可以包含一个abort项，指示是否阻止符合条件的事件执行。例如，abort允许编写阻止特定sql语句执行的规则。</p><p>
                    The <code class="literal">abort</code> item must appear within an
                    <code class="literal">event</code> item. For example:
                </p><p style="color:blue;">中止项必须出现在事件项中。例如：</p><pre data-lang="json" class="programlisting">"event": {
  "name": <em class="replaceable"><code>qualifying event subclass names</code></em>
  "abort": <em class="replaceable"><code>condition</code></em>
}
</pre><p>
                    For event subclasses selected by the <code class="literal">name</code>
                    item, the <code class="literal">abort</code> action is true or false,
                    depending on <em class="replaceable"><code>condition</code></em> evaluation.
                    If the condition evaluates to true, the event is blocked.
                    Otherwise, the event continues executing.
                </p><p style="color:blue;">对于由名称项选择的事件子类，中止操作为true或false，具体取决于条件求值。如果条件的计算结果为true，则阻止事件。否则，事件将继续执行。</p><p>
                    The <em class="replaceable"><code>condition</code></em> specification can be
                    as simple as <code class="literal">true</code> or
                    <code class="literal">false</code>, or it can be more complex such that
                    evaluation depends on event characteristics.
                </p><p style="color:blue;">条件规范可以简单到true或false，也可以更复杂，这样求值就取决于事件特征。</p><p>
                    This filter blocks <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                    <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
                    <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a> statements:
                </p><p style="color:blue;">此筛选器阻止插入、更新和删除语句：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": {
      "name": "table_access",
      "event": {
        "name": [ "insert", "update", "delete" ],
        "abort": true
      }
    }
  }
}
</pre><p>
                    This more complex filter blocks the same statements, but only
                    for a specific table
                    (<code class="literal">finances.bank_account</code>):
                </p><p style="color:blue;">这个更复杂的过滤器会阻塞相同的语句，但仅限于特定的表（financials.bank_account）：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": {
      "name": "table_access",
      "event": {
        "name": [ "insert", "update", "delete" ],
        "abort": {
          "and": [
            { "field": { "name": "table_database.str", "value": "finances" } },
            { "field": { "name": "table_name.str", "value": "bank_account" } }
          ]
        }
      }
    }
  }
}
</pre><p>
                    Statements matched and blocked by the filter return an error
                    to the client:
                </p><p style="color:blue;">筛选器匹配并阻止的语句将向客户端返回错误：</p><pre data-lang="none" class="programlisting">ERROR 1045 (28000): Statement was aborted by an audit log filter
</pre><p>
                    Not all events can be blocked (see
                    <a class="xref" href="security.html#audit-log-event-subclass-log-abort" title="Table&nbsp;6.26&nbsp;Log and Abort Characteristics Per Event Class and Subclass Combination">Table&nbsp;6.26, “Log and Abort Characteristics Per Event Class and Subclass Combination”</a>). For an
                    event that cannot, the audit log writes a warning to the error
                    log rather than blocking it.
                </p><p style="color:blue;">并非所有事件都可以被阻止（见表6.26，“每个事件类和子类组合的日志和中止特征”）。对于无法执行的事件，审核日志会将警告写入错误日志，而不是阻止它。</p><p>
                    For attempts to define a filter in which the
                    <code class="literal">abort</code> item appears elsewhere than in an
                    <code class="literal">event</code> item, an error occurs.
                </p><p style="color:blue;">如果试图定义一个筛选器，其中中止项出现在事件项之外的其他位置，则会发生错误。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-logical-operators"></a>Logical Operators</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Logical operators (<code class="literal">and</code>,
                        <code class="literal">or</code>, <code class="literal">not</code>) can be used in
                        <code class="literal">log</code> items. This permits construction of
                        more advanced filtering configurations:
                    </p><p style="color:blue;">逻辑运算符（and，or，not）可用于日志项中。这允许构建更高级的过滤配置：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": {
      "name": "general",
      "event": {
        "name": "status",
        "log": {
          "or": [
            {
              "and": [
                { "field": { "name": "general_command.str",    "value": "Query" } },
                { "field": { "name": "general_command.length", "value": 5 } }
              ]
            },
            {
              "and": [
                { "field": { "name": "general_command.str",    "value": "Execute" } },
                { "field": { "name": "general_command.length", "value": 7 } }
              ]
            }
          ]
        }
      }
    }
  }
}
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-predefined-variables"></a>Referencing Predefined Variables</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To refer to a predefined variable in a <code class="literal">log</code>
                        condition, use a <code class="literal">variable</code> item, which tests
                        equality against a given value:
                    </p><p style="color:blue;">若要在日志条件中引用预定义变量，请使用变量项，该项测试给定值的相等性：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": {
      "name": "general",
      "event": {
        "name": "status",
        "log": {
          "variable": {
            "name": "audit_log_connection_policy_value", "value": "::none"
          }
        }
      }
    }
  }
}
</pre><p>
                    Each predefined variable corresponds to a system variable. By
                    writing a filter that tests a predefined variable, you can
                    modify filter operation by setting the corresponding system
                    variable, without having to redefine the filter. For example,
                    by writing a filter that tests the value of the
                    <code class="literal">audit_log_connection_policy_value</code>
                    predefined variable, you can modify filter operation by
                    changing the value of the
                    <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                    system variable.
                </p><p style="color:blue;">每个预定义变量对应一个系统变量。通过编写测试预定义变量的筛选器，可以通过设置相应的系统变量来修改筛选器操作，而无需重新定义筛选器。例如，通过编写一个过滤器来测试audit_log_connection_policy_value预定义变量的值，可以通过更改audit_log_connection_policy系统变量的值来修改过滤器操作。</p><a class="indexterm" name="idm140286879517872"></a><p>
                    The
                    <code class="literal">audit_log_<em class="replaceable"><code>xxx</code></em>_policy</code>
                    system variables are used for the legacy mode audit log (see
                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>). With rule-based
                    audit log filtering, those variables remain visible (for
                    example, using <a class="link" href="sql-syntax.html#show-variables" title="13.7.5.39&nbsp;SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a>),
                    but changes to them have no effect unless you write filters
                    containing constructs that refer to them.
                </p><p style="color:blue;">审核日志xxx策略系统变量用于传统模式审核日志（请参阅第6.4.5.8节“传统模式审核日志筛选”）。使用基于规则的审核日志筛选，这些变量将保持可见（例如，使用show variables），但对它们的更改将无效，除非您编写包含引用它们的构造的筛选器。</p><p>
                    The following list describes the permitted predefined
                    variables for <code class="literal">variable</code> items:
                </p><p style="color:blue;">以下列表描述了变量项允许的预定义变量：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">audit_log_connection_policy_value</code>
                        </p><p style="color:blue;">审核日志连接策略值</p><p>
                            This variable corresponds to the value of the
                            <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                            system variable. The value is an unsigned integer.
                            <a class="xref" href="security.html#audit-log-connection-policy-value-values" title="Table&nbsp;6.30&nbsp;audit_log_connection_policy_value Values">Table&nbsp;6.30, “audit_log_connection_policy_value Values”</a>
                            shows the permitted values and the corresponding
                            <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                            values.
                        </p><p style="color:blue;">此变量与AUDIT LOG U CONNECTION U策略系统变量的值相对应。该值是无符号整数。表6.30“审计日志连接策略值”显示了允许值和相应的审计日志连接策略值。</p>
                            <div class="table">
                                <a name="audit-log-connection-policy-value-values"></a><p class="title"><b>Table&nbsp;6.30&nbsp;audit_log_connection_policy_value Values</b></p><p style="color:blue;">表6.30审计日志连接策略值</p>
                                <div class="table-contents">
                                    <table summary="Permitted audit_log_connection_policy_value values and the corresponding audit_log_connection_policy values."><colgroup><col width="20%"><col width="80%"></colgroup><thead><tr>
                                        <th scope="col">Value</th>
                                        <th scope="col">Corresponding audit_log_connection_policy Value</th>
                                    </tr></thead><tbody><tr>
                                        <td scope="row"><code class="literal">0</code> or <code class="literal">"::none"</code></td>
                                        <td><code class="literal">NONE</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">1</code> or <code class="literal">"::errors"</code></td>
                                        <td><code class="literal">ERRORS</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">2</code> or <code class="literal">"::all"</code></td>
                                        <td><code class="literal">ALL</code></td>
                                    </tr></tbody></table>
                                </div>

                            </div>
                            <br class="table-break"><p>
                                The <code class="literal">"::<em class="replaceable"><code>xxx</code></em>"</code>
                                values are symbolic pseudo-constants that may be given
                                instead of the literal numeric values. They must be quoted
                                as strings and are case-sensitive.
                            </p><p style="color:blue;">“：：xxx”值是符号伪常量，可以给出它而不是文字数字值。它们必须以字符串形式引用，并且区分大小写。</p></li><li class="listitem"><p>
                            <code class="literal">audit_log_policy_value</code>
                        </p><p style="color:blue;">审核日志策略值</p><p>
                            This variable corresponds to the value of the
                            <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> system
                            variable. The value is an unsigned integer.
                            <a class="xref" href="security.html#audit-log-policy-value-values" title="Table&nbsp;6.31&nbsp;audit_log_policy_value Values">Table&nbsp;6.31, “audit_log_policy_value Values”</a> shows the
                            permitted values and the corresponding
                            <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> values.
                        </p><p style="color:blue;">此变量对应于AUDIT LOG U POLICE系统变量的值。该值是无符号整数。表6.31“审计日志策略值”显示了允许值和相应的审计日志策略值。</p>
                            <div class="table">
                                <a name="audit-log-policy-value-values"></a><p class="title"><b>Table&nbsp;6.31&nbsp;audit_log_policy_value Values</b></p><p style="color:blue;">表6.31审计日志策略值</p>
                                <div class="table-contents">
                                    <table summary="Permitted audit_log_policy_value values and the corresponding audit_log_policy values."><colgroup><col width="20%"><col width="80%"></colgroup><thead><tr>
                                        <th scope="col">Value</th>
                                        <th scope="col">Corresponding audit_log_policy Value</th>
                                    </tr></thead><tbody><tr>
                                        <td scope="row"><code class="literal">0</code> or <code class="literal">"::none"</code></td>
                                        <td><code class="literal">NONE</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">1</code> or <code class="literal">"::logins"</code></td>
                                        <td><code class="literal">LOGINS</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">2</code> or <code class="literal">"::all"</code></td>
                                        <td><code class="literal">ALL</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">3</code> or <code class="literal">"::queries"</code></td>
                                        <td><code class="literal">QUERIES</code></td>
                                    </tr></tbody></table>
                                </div>

                            </div>
                            <br class="table-break"><p>
                                The <code class="literal">"::<em class="replaceable"><code>xxx</code></em>"</code>
                                values are symbolic pseudo-constants that may be given
                                instead of the literal numeric values. They must be quoted
                                as strings and are case-sensitive.
                            </p><p style="color:blue;">“：：xxx”值是符号伪常量，可以给出它而不是文字数字值。它们必须以字符串形式引用，并且区分大小写。</p></li><li class="listitem"><p>
                            <code class="literal">audit_log_statement_policy_value</code>
                        </p><p style="color:blue;">审核日志声明策略值</p><p>
                            This variable corresponds to the value of the
                            <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
                            system variable. The value is an unsigned integer.
                            <a class="xref" href="security.html#audit-log-statement-policy-value-values" title="Table&nbsp;6.32&nbsp;audit_log_statement_policy_value Values">Table&nbsp;6.32, “audit_log_statement_policy_value Values”</a>
                            shows the permitted values and the corresponding
                            <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
                            values.
                        </p><p style="color:blue;">此变量与AUDIT LOG U语句U POLICE系统变量的值相对应。该值是无符号整数。表6.32“审计日志声明策略值”显示了允许值和相应的审计日志声明策略值。</p>
                            <div class="table">
                                <a name="audit-log-statement-policy-value-values"></a><p class="title"><b>Table&nbsp;6.32&nbsp;audit_log_statement_policy_value Values</b></p><p style="color:blue;">表6.32审计日志声明政策价值</p>
                                <div class="table-contents">
                                    <table summary="Permitted audit_log_statement_policy_value values and the corresponding audit_log_statement_policy values."><colgroup><col width="20%"><col width="80%"></colgroup><thead><tr>
                                        <th scope="col">Value</th>
                                        <th scope="col">Corresponding audit_log_statement_policy Value</th>
                                    </tr></thead><tbody><tr>
                                        <td scope="row"><code class="literal">0</code> or <code class="literal">"::none"</code></td>
                                        <td><code class="literal">NONE</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">1</code> or <code class="literal">"::errors"</code></td>
                                        <td><code class="literal">ERRORS</code></td>
                                    </tr><tr>
                                        <td scope="row"><code class="literal">2</code> or <code class="literal">"::all"</code></td>
                                        <td><code class="literal">ALL</code></td>
                                    </tr></tbody></table>
                                </div>

                            </div>
                            <br class="table-break"><p>
                                The <code class="literal">"::<em class="replaceable"><code>xxx</code></em>"</code>
                                values are symbolic pseudo-constants that may be given
                                instead of the literal numeric values. They must be quoted
                                as strings and are case-sensitive.
                            </p><p style="color:blue;">“：：xxx”值是符号伪常量，可以给出它而不是文字数字值。它们必须以字符串形式引用，并且区分大小写。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-predefined-functions"></a>Referencing Predefined Functions</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To refer to a predefined function in a <code class="literal">log</code>
                        condition, use a <code class="literal">function</code> item, which takes
                        <code class="literal">name</code> and <code class="literal">args</code> values to
                        specify the function name and its arguments, respectively:
                    </p><p style="color:blue;">要在日志条件中引用预定义的函数，请使用函数项，该函数项接受name和args值，分别指定函数名及其参数：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "class": {
      "name": "general",
      "event": {
        "name": "status",
        "log": {
          "function": {
            "name": "find_in_include_list",
            "args": [ { "string": [ { "field": "user.str" },
                                    { "string": "@"},
                                    { "field": "host.str" } ] } ]
          }
        }
      }
    }
  }
}
</pre><p>
                    The function as specified in the <code class="literal">name</code> item
                    should be the function name only, without parentheses or the
                    argument list. Arguments in the <code class="literal">args</code> item,
                    if there is one, must be given in the order listed in the
                    function description. Arguments can refer to predefined
                    variables, event fields, or string or numeric constants.
                </p><p style="color:blue;">名称项中指定的函数应仅为函数名，不带括号或参数列表。args项中的参数（如果有）必须按照函数描述中列出的顺序给出。参数可以引用预定义的变量、事件字段、字符串或数值常量。</p><p>
                    The preceding filter determines whether to log
                    <code class="literal">general</code> class <code class="literal">status</code>
                    events depending on whether the current user is found in the
                    <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                    system variable. That user is constructed using fields in the
                    event.
                </p><p style="color:blue;">前一个筛选器决定是否记录常规类状态事件，具体取决于是否在AUDIT LOG INClude帐户系统变量中找到当前用户。该用户是使用事件中的字段构造的。</p><p>
                    The following list describes the permitted predefined
                    functions for <code class="literal">function</code> items:
                </p><p style="color:blue;">以下列表描述了功能项允许的预定义功能：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">audit_log_exclude_accounts_is_null()</code>
                        </p><p style="color:blue;">审核日志排除帐户为空（）</p><p>
                            Checks whether the
                            <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                            system variable is <code class="literal">NULL</code>. This function
                            can be helpful when defining filters that correspond to
                            the legacy audit log implementation.
                        </p><p style="color:blue;">检查审核日志排除帐户系统变量是否为空。在定义与旧版审核日志实现相对应的筛选器时，此函数可能会有所帮助。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">无</p></li><li class="listitem"><p>
                            <code class="literal">audit_log_include_accounts_is_null()</code>
                        </p><p style="color:blue;">审核日志包含帐户为空（）</p><p>
                            Checks whether the
                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                            system variable is <code class="literal">NULL</code>. This function
                            can be helpful when defining filters that correspond to
                            the legacy audit log implementation.
                        </p><p style="color:blue;">检查audit_log_include_accounts系统变量是否为空。在定义与旧版审核日志实现相对应的筛选器时，此函数可能会有所帮助。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">无</p></li><li class="listitem"><p>
                            <code class="literal">debug_sleep(millisec)</code>
                        </p><p style="color:blue;">调试睡眠（毫秒）</p><p>
                            Sleeps for the given number of milliseconds. This function
                            is used during performance measurement.
                        </p><p style="color:blue;">在给定的毫秒数内睡眠。此功能在性能测量期间使用。</p><p>
                            <code class="literal">debug_sleep()</code> is available for debug
                            builds only.
                        </p><p style="color:blue;">debug_sleep（）仅可用于调试生成。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>millisec</code></em>: An unsigned
                                    integer that specifies the number of milliseconds to
                                    sleep.
                                </p><p style="color:blue;">毫秒：指定睡眠毫秒数的无符号整数。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">find_in_exclude_list(account)</code>
                        </p><p style="color:blue;">在排除列表中查找帐户（帐户）</p><p>
                            Checks whether an account string exists in the audit log
                            exclude list (the value of the
                            <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                            system variable).
                        </p><p style="color:blue;">检查审核日志排除列表中是否存在帐户字符串（AudiTyLogOxExabdEyCype系统变量的值）。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>account</code></em>: A string that
                                    specifies the user account name.
                                </p><p style="color:blue;">account：指定用户帐户名的字符串。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">find_in_include_list(account)</code>
                        </p><p style="color:blue;">在包含列表（帐户）中查找</p><p>
                            Checks whether an account string exists in the audit log
                            include list (the value of the
                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                            system variable).
                        </p><p style="color:blue;">检查审核日志中是否存在帐户字符串包括列表（AuditLogLogyCopyDeCub系统变量的值）。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>account</code></em>: A string that
                                    specifies the user account name.
                                </p><p style="color:blue;">account：指定用户帐户名的字符串。</p></li></ul>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">string_find(text, substr)</code>
                        </p><p style="color:blue;">字符串查找（文本，子字符串）</p><p>
                            Checks whether the <code class="literal">substr</code> value is
                            contained in the <code class="literal">text</code> value. This
                            search is case-sensitive.
                        </p><p style="color:blue;">检查文本值中是否包含子字符串值。此搜索区分大小写。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>text</code></em>: The text string to
                                    search.
                                </p><p style="color:blue;">文本：要搜索的文本字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>substr</code></em>: The substring to
                                    search for in <em class="replaceable"><code>text</code></em>.
                                </p><p style="color:blue;">substr：要在文本中搜索的子字符串。</p></li></ul>
                            </div>
                        </li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-filtering-filter-replacement"></a>Replacing a User Filter</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        In some cases, the filter definition can be changed
                        dynamically. To do this, define a <code class="literal">filter</code>
                        configuration within an existing <code class="literal">filter</code>.
                        For example:
                    </p><p style="color:blue;">在某些情况下，可以动态更改筛选器定义。为此，在现有的筛选器中定义筛选器配置。例如：</p><pre data-lang="json" class="programlisting">{
  "filter": {
    "id": "main",
    "class": {
      "name": "table_access",
      "event": {
        "name": [ "update", "delete" ],
        "log": false,
        "filter": {
          "class": {
            "name": "general",
            "event" : { "name": "status",
                        "filter": { "ref": "main" } }
          },
          "activate": {
            "or": [
              { "field": { "name": "table_name.str", "value": "temp_1" } },
              { "field": { "name": "table_name.str", "value": "temp_2" } }
            ]
          }
        }
      }
    }
  }
}
</pre><p>
                    A new filter is activated when the <code class="literal">activate</code>
                    element within a subfilter evaluates to
                    <code class="literal">true</code>. Using <code class="literal">activate</code> in
                    a top-level <code class="literal">filter</code> is not permitted.
                </p><p style="color:blue;">当子筛选器中的activate元素计算为true时，将激活新筛选器。不允许在顶级筛选器中使用“激活”。</p><p>
                    A new filter can be replaced with the original one by using a
                    <code class="literal">ref</code> item inside the subfilter to refer to
                    the original filter <code class="literal">id</code>.
                </p><p style="color:blue;">通过使用子筛选器中的ref项引用原始筛选器id，可以用原始筛选器替换新筛选器。</p><p>
                    The filter shown operates like this:
                </p><p style="color:blue;">所示过滤器的工作方式如下：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The <code class="literal">main</code> filter waits for
                            <code class="literal">table_access</code> events, either
                            <code class="literal">update</code> or <code class="literal">delete</code>.
                        </p><p style="color:blue;">主筛选器等待表访问事件（更新或删除）。</p></li><li class="listitem"><p>
                            If the <code class="literal">update</code> or
                            <code class="literal">delete</code> <code class="literal">table_access</code>
                            event occurs on the <code class="literal">temp_1</code> or
                            <code class="literal">temp_2</code> table, the filter is replaced
                            with the internal one (without an <code class="literal">id</code>,
                            since there is no need to refer to it explicitly).
                        </p><p style="color:blue;">如果update或delete table_access事件发生在temp_1或temp_2表上，则过滤器将替换为内部过滤器（不带id，因为不需要显式引用它）。</p></li><li class="listitem"><p>
                            If the end of the command is signalled
                            (<code class="literal">general</code> / <code class="literal">status</code>
                            event), an entry is written to the audit log file and the
                            filter is replaced with the <code class="literal">main</code>
                            filter.
                        </p><p style="color:blue;">如果命令结束时发出信号（常规/状态事件），则会将条目写入审核日志文件，并用主筛选器替换该筛选器。</p></li></ul>
                    </div>
                    <p>
                        The filter is useful to log statements that update or delete
                        anything from the <code class="literal">temp_1</code> or
                        <code class="literal">temp_2</code> tables, such as this one:
                    </p><p style="color:blue;">此筛选器可用于记录更新或删除temp_1或temp_2表中任何内容的语句，例如：</p><pre data-lang="sql" class="programlisting">UPDATE temp_1, temp_3 SET temp_1.a=21, temp_3.a=23;
</pre><p>
                    The statement generates multiple
                    <code class="literal">table_access</code> events, but the audit log file
                    will contain only <code class="literal">general</code> /
                    <code class="literal">status</code> entries.
                </p><p style="color:blue;">语句生成多个表访问事件，但审核日志文件将只包含常规/状态项。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            Any <code class="literal">id</code> values used in the definition are
                            evaluated with respect only to that definition. They have
                            nothing to do with the value of the
                            <a class="link" href="security.html#sysvar_audit_log_filter_id"><code class="literal">audit_log_filter_id</code></a> system
                            variable.
                        </p><p style="color:blue;">定义中使用的任何id值都只根据该定义进行计算。它们与audit_log_filter_id系统变量的值无关。</p>
                    </div>

                </div>

            </div>

            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-legacy-filtering"></a>6.4.5.8&nbsp;Legacy Mode Audit Log Filtering</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286879350864"></a>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        This section describes legacy audit log filtering, which
                        applies under either of these circumstances:
                    </p><p style="color:blue;">本节介绍传统审核日志筛选，它适用于以下任一情况：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            Before MySQL 5.7.13, that is, prior to the introduction of
                            rule-based audit log filtering described in
                            <a class="xref" href="security.html#audit-log-filtering" title="6.4.5.6&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.6, “Audit Log Filtering”</a>.
                        </p><p style="color:blue;">在mysql 5.7.13之前，也就是说，在引入第6.4.5.6节“审计日志过滤”中描述的基于规则的审计日志过滤之前。</p></li><li class="listitem"><p>
                            As of MySQL 5.7.13, if the <code class="literal">audit_log</code>
                            plugin is installed but not the accompanying audit tables
                            and UDFs needed for rule-based filtering.
                        </p><p style="color:blue;">从mysql 5.7.13开始，如果安装了audit_log插件，但没有安装基于规则的筛选所需的随附审计表和udf。</p></li></ul>
                    </div>

                </div>
                <p>
                    The audit log plugin can filter audited events. This enables you
                    to control whether audited events are written to the audit log
                    file based on the account from which events originate or event
                    status. Status filtering occurs separately for connection events
                    and statement events.
                </p><p style="color:blue;">审核日志插件可以筛选审核的事件。这使您能够根据事件的来源帐户或事件状态来控制是否将已审核事件写入审核日志文件。对连接事件和语句事件分别进行状态筛选。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-account-filtering" title="Event Filtering by Account">Event Filtering by Account</a></p><p style="color:blue;">按帐户筛选事件</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-status-filtering" title="Event Filtering by Status">Event Filtering by Status</a></p><p style="color:blue;">按状态筛选事件</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="audit-log-account-filtering"></a>Event Filtering by Account</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To filter audited events based on the originating account, set
                        one of these system variables at server startup or runtime:
                    </p><p style="color:blue;">要基于原始帐户筛选已审核的事件，请在服务器启动或运行时设置以下系统变量之一：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>:
                            The accounts to include in audit logging. If this variable
                            is set, only these accounts are audited.
                        </p><p style="color:blue;">审核日志包含帐户：要包含在审核日志中的帐户。如果设置了此变量，则仅审核这些帐户。</p></li><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>:
                            The accounts to exclude from audit logging. If this
                            variable is set, all but these accounts are audited.
                        </p><p style="color:blue;">审核日志排除帐户：要从审核日志中排除的帐户。如果设置了此变量，则除这些帐户之外的所有帐户都将被审计。</p></li></ul>
                    </div>
                    <p>
                        The value for either variable can be <code class="literal">NULL</code>
                        or a string containing one or more comma-separated account
                        names, each in
                        <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                        format. By default, both variables are
                        <code class="literal">NULL</code>, in which case, no account filtering
                        is done and auditing occurs for all accounts.
                    </p><p style="color:blue;">变量的值可以为空，也可以是包含一个或多个逗号分隔的帐户名的字符串，每个帐户名的格式为user_name@host_name。默认情况下，两个变量都为空，在这种情况下，不进行帐户筛选，并且对所有帐户进行审核。</p><p>
                    Modifications to
                    <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a> or
                    <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                    affect only connections created subsequent to the
                    modification, not existing connections.
                </p><p style="color:blue;">对AuditLogLogyCopyDeCype或AdditLogLogyExtExeDeCype帐户的修改仅影响修改后创建的连接，而不影响现有连接。</p><p>
                    Example: To enable audit logging only for the
                    <code class="literal">user1</code> and <code class="literal">user2</code> local
                    host account accounts, set the
                    <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                    system variable like this:
                </p><p style="color:blue;">示例：若要仅对user1和user2本地主机帐户启用审核日志记录，请设置audit-log-include-accounts系统变量，如下所示：</p><pre data-lang="sql" class="programlisting">SET GLOBAL audit_log_include_accounts = 'user1@localhost,user2@localhost';
</pre><p>
                    Only one of
                    <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a> or
                    <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                    can be non-<code class="literal">NULL</code> at a time:
                </p><p style="color:blue;">一次只能有一个审核日志包含帐户或审核日志排除帐户为非空：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you set
                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>,
                            the server sets
                            <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                            to <code class="literal">NULL</code>.
                        </p><p style="color:blue;">如果将audit_log_include_帐户设置为空，则服务器将audit_log_exclude_帐户设置为空。</p></li><li class="listitem"><p>
                            If you attempt to set
                            <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>,
                            an error occurs unless
                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                            is <code class="literal">NULL</code>. In this case, you must first
                            clear
                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                            by setting it to <code class="literal">NULL</code>.
                        </p><p style="color:blue;">如果试图设置审核日志排除帐户，则会发生错误，除非审核日志包括帐户为空。在这种情况下，您必须首先将audit-log-include-accounts设置为空以清除它。</p></li></ul>
                    </div>
                    <pre data-lang="sql" class="programlisting">-- This sets audit_log_exclude_accounts to NULL
SET GLOBAL audit_log_include_accounts = <em class="replaceable"><code>value</code></em>;

-- This fails because audit_log_include_accounts is not NULL
SET GLOBAL audit_log_exclude_accounts = <em class="replaceable"><code>value</code></em>;

-- To set audit_log_exclude_accounts, first set
-- audit_log_include_accounts to NULL
SET GLOBAL audit_log_include_accounts = NULL;
SET GLOBAL audit_log_exclude_accounts = <em class="replaceable"><code>value</code></em>;
</pre><p>
                    If you inspect the value of either variable, be aware that
                    <a class="link" href="sql-syntax.html#show-variables" title="13.7.5.39&nbsp;SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a> displays
                    <code class="literal">NULL</code> as an empty string. To avoid this, use
                    <a class="link" href="sql-syntax.html#select" title="13.2.9&nbsp;SELECT Syntax"><code class="literal">SELECT</code></a> instead:
                </p><p style="color:blue;">如果检查任一变量的值，请注意show variables将空字符串显示为空。若要避免此问题，请改用“选择”：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'audit_log_include_accounts';</code></strong>
+----------------------------+-------+
| Variable_name              | Value |
+----------------------------+-------+
| audit_log_include_accounts |       |
+----------------------------+-------+
mysql&gt; <strong class="userinput"><code>SELECT @@audit_log_include_accounts;</code></strong>
+------------------------------+
| @@audit_log_include_accounts |
+------------------------------+
| NULL                         |
+------------------------------+
</pre><p>
                    If a user name or host name requires quoting because it
                    contains a comma, space, or other special character, quote it
                    using single quotes. If the variable value itself is quoted
                    with single quotes, double each inner single quote or escape
                    it with a backslash. The following statements each enable
                    audit logging for the local <code class="literal">root</code> account
                    and are equivalent, even though the quoting styles differ:
                </p><p style="color:blue;">如果用户名或主机名由于包含逗号、空格或其他特殊字符而需要引号，请使用单引号对其进行引号。如果变量值本身用单引号引起来，则将每个内部单引号加倍或用反斜杠转义。以下语句都为本地根帐户启用审核日志记录，并且是等效的，即使引用样式不同：</p><pre data-lang="sql" class="programlisting">SET GLOBAL audit_log_include_accounts = 'root@localhost';
SET GLOBAL audit_log_include_accounts = '''root''@''localhost''';
SET GLOBAL audit_log_include_accounts = '\'root\'@\'localhost\'';
SET GLOBAL audit_log_include_accounts = "'root'@'localhost'";
</pre><p>
                    The last statement will not work if the
                    <code class="literal">ANSI_QUOTES</code> SQL mode is enabled because in
                    that mode double quotes signify identifier quoting, not string
                    quoting.
                </p><p style="color:blue;">如果启用了ansi_quotes sql模式，则最后一条语句将不起作用，因为在该模式下，双引号表示标识符引号，而不是字符串引号。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-status-filtering"></a>Event Filtering by Status</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        To filter audited events based on status, set the following
                        system variables at server startup or runtime. These variables
                        apply only for legacy audit log filtering. For JSON audit log
                        filtering, different status variables apply; see
                        <a class="xref" href="security.html#audit-log-options-variables" title="Audit Log Options and Variables">Audit Log Options and Variables</a>.
                    </p><p style="color:blue;">要根据状态筛选已审核的事件，请在服务器启动或运行时设置以下系统变量。这些变量仅适用于旧的审核日志筛选。对于json审计日志过滤，应用不同的状态变量；请参见审计日志选项和变量。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>:
                            Logging policy for connection events
                        </p><p style="color:blue;">审核日志连接策略：连接事件的日志记录策略</p></li><li class="listitem"><p>
                            <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>:
                            Logging policy for statement events
                        </p><p style="color:blue;">审核日志语句策略：语句事件的日志策略</p></li></ul>
                    </div>
                    <p>
                        Each variable takes a value of <code class="literal">ALL</code> (log all
                        associated events; this is the default),
                        <code class="literal">ERRORS</code> (log only failed events), or
                        <code class="literal">NONE</code> (do not log events). For example, to
                        log all statement events but only failed connection events,
                        use these settings:
                    </p><p style="color:blue;">每个变量的值为all（记录所有关联的事件；这是默认值）、errors（只记录失败的事件）或none（不记录事件）。例如，要记录所有语句事件，但只记录失败的连接事件，请使用以下设置：</p><pre data-lang="sql" class="programlisting">SET GLOBAL audit_log_statement_policy = ALL;
SET GLOBAL audit_log_connection_policy = ERRORS;
</pre><p>
                    Another policy system variable,
                    <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a>, is
                    available but does not afford as much control as
                    <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                    and
                    <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>.
                    It can be set only at server startup. At runtime, it is a
                    read-only variable. It takes a value of <code class="literal">ALL</code>
                    (log all events; this is the default),
                    <code class="literal">LOGINS</code> (log connection events),
                    <code class="literal">QUERIES</code> (log statement events), or
                    <code class="literal">NONE</code> (do not log events). For any of those
                    values, the audit log plugin logs all selected events without
                    distinction as to success or failure. Use of
                    <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> at startup
                    works as follows:
                </p><p style="color:blue;">另一个策略系统变量audit_log_policy是可用的，但其控制能力不及audit_log_connection_policy和audit_log_statement_policy。只能在服务器启动时设置。在运行时，它是只读变量。它的值为all（记录所有事件；这是默认值）、logins（记录连接事件）、querys（记录语句事件）或none（不记录事件）。对于这些值中的任何一个，审计日志插件记录所有选定的事件，而不区分成功与失败。启动时使用审核日志策略的工作如下：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            If you do not set
                            <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> or set
                            it to its default of <code class="literal">ALL</code>, any explicit
                            settings for
                            <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                            or
                            <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
                            apply as specified. If not specified, they default to
                            <code class="literal">ALL</code>.
                        </p><p style="color:blue;">如果未设置audit_log_policy或将其设置为默认值all，则按指定应用audit_log_connection_policy或audit_log_statement_policy的任何显式设置。如果未指定，则默认为“全部”。</p></li><li class="listitem"><p>
                            If you set
                            <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> to a
                            non-<code class="literal">ALL</code> value, that value takes
                            precedence over and is used to set
                            <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                            and
                            <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>,
                            as indicated in the following table. If you also set
                            either of those variables to a value other than their
                            default of <code class="literal">ALL</code>, the server writes a
                            message to the error log to indicate that their values are
                            being overridden.
                        </p><p style="color:blue;">如果将audit_log_policy设置为非all值，则该值优先于并用于设置audit_log_connection_policy和audit_log_statement_policy，如下表所示。如果还将这些变量中的任何一个设置为默认值all以外的值，则服务器将向错误日志中写入一条消息，指示正在重写这些变量的值。</p>
                            <div class="informaltable">
                                <table summary="How the server uses audit_log_policy to set audit_log_connection_policy and audit_log_statement_policy at startup."><colgroup><col width="33%"><col width="33%"><col width="33%"></colgroup><thead><tr>
                                    <th scope="col">Startup audit_log_policy Value</th>
                                    <th scope="col">Resulting audit_log_connection_policy Value</th>
                                    <th scope="col">Resulting audit_log_statement_policy Value</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">LOGINS</code></td>
                                    <td><code class="literal">ALL</code></td>
                                    <td><code class="literal">NONE</code></td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">QUERIES</code></td>
                                    <td><code class="literal">NONE</code></td>
                                    <td><code class="literal">ALL</code></td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">NONE</code></td>
                                    <td><code class="literal">NONE</code></td>
                                    <td><code class="literal">NONE</code></td>
                                </tr></tbody></table>
                            </div>
                        </li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-reference"></a>6.4.5.9&nbsp;Audit Log Reference</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The following discussion serves as a reference to MySQL Enterprise Audit
                    components:
                </p><p style="color:blue;">以下讨论可作为mysql企业审计组件的参考：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#audit-log-tables" title="Audit Log Tables">Audit Log Tables</a></p><p style="color:blue;">审核日志表</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-routines" title="Audit Log Functions">Audit Log Functions</a></p><p style="color:blue;">审核日志函数</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-option-variable-reference" title="Audit Log Option and Variable Reference">Audit Log Option and Variable Reference</a></p><p style="color:blue;">审核日志选项和变量引用</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-options-variables" title="Audit Log Options and Variables">Audit Log Options and Variables</a></p><p style="color:blue;">审核日志选项和变量</p></li><li class="listitem"><p><a class="xref" href="security.html#audit-log-status-variables" title="Audit Log Status Variables">Audit Log Status Variables</a></p><p style="color:blue;">审核日志状态变量</p></li></ul>
                </div>
                <p>
                    To install the audit log tables and functions, use the
                    instructions provided in
                    <a class="xref" href="security.html#audit-log-installation" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”</a>. Unless those
                    components are installed, the <code class="literal">audit_log</code>
                    plugin operates in legacy mode. See
                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>.
                </p><p style="color:blue;">要安装审计日志表和函数，请使用第6.4.5.2节“安装或卸载mysql企业审计”中提供的说明。除非安装了这些组件，否则audit_log插件将以传统模式运行。见第6.4.5.8节，“传统模式审计日志过滤”。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="audit-log-tables"></a>Audit Log Tables</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        MySQL Enterprise Audit uses tables in the <code class="literal">mysql</code> system
                        database for persistent storage of filter and user account
                        data. The tables can be accessed only by users with privileges
                        for that database. The tables use the
                        <code class="literal">InnoDB</code> storage engine
                        (<code class="literal">MyISAM</code> prior to MySQL 5.7.21).
                    </p><p style="color:blue;">mysql企业审计使用mysql系统数据库中的表来持久存储筛选器和用户帐户数据。只有具有该数据库权限的用户才能访问这些表。这些表使用innodb存储引擎（mysam早于mysql 5.7.21）。</p><p>
                    If these tables are missing, the <code class="literal">audit_log</code>
                    plugin operates in legacy mode. See
                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>.
                </p><p style="color:blue;">如果缺少这些表，则audit_log插件将在传统模式下运行。见第6.4.5.8节，“传统模式审计日志过滤”。</p><p>
                    The <code class="literal">audit_log_filter</code> table stores filter
                    definitions. The table has these columns:
                </p><p style="color:blue;">audit_log_filter表存储筛选器定义。该表包含以下列：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">NAME</code>
                        </p><p style="color:blue;">姓名</p><p>
                            The filter name.
                        </p><p style="color:blue;">筛选器名称。</p></li><li class="listitem"><p>
                            <code class="literal">FILTER</code>
                        </p><p style="color:blue;">过滤器</p><p>
                            The filter definition associated with the filter name.
                            Definitions are stored as
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> values.
                        </p><p style="color:blue;">与筛选器名称关联的筛选器定义。定义存储为json值。</p></li></ul>
                    </div>
                    <p>
                        The <code class="literal">audit_log_user</code> table stores user
                        account information. The table has these columns:
                    </p><p style="color:blue;">审核日志用户表存储用户帐户信息。该表包含以下列：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">USER</code>
                        </p><p style="color:blue;">用户</p><p>
                            The user name part of an account. For an account
                            <code class="literal">user1@localhost</code>, the
                            <code class="literal">USER</code> part is <code class="literal">user1</code>.
                        </p><p style="color:blue;">帐户的用户名部分。对于帐户user1@localhost，用户部分是user1。</p></li><li class="listitem"><p>
                            <code class="literal">HOST</code>
                        </p><p style="color:blue;">主持人</p><p>
                            The host name part of an account. For an account
                            <code class="literal">user1@localhost</code>, the
                            <code class="literal">HOST</code> part is
                            <code class="literal">localhost</code>.
                        </p><p style="color:blue;">帐户的主机名部分。对于帐户user1@localhost，主机部分是localhost。</p></li><li class="listitem"><p>
                            <code class="literal">FILTERNAME</code>
                        </p><p style="color:blue;">过滤器名称</p><p>
                            The name of the filter assigned to the account. The filter
                            name associates the account with a filter defined in the
                            <code class="literal">audit_log_filter</code> table.
                        </p><p style="color:blue;">分配给帐户的筛选器的名称。筛选器名称将帐户与审核日志筛选器表中定义的筛选器相关联。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-routines"></a>Audit Log Functions</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes, for each audit log user-defined
                        function (UDF), its purpose, calling sequence, and return
                        value. For information about the conditions under which these
                        UDFs can be invoked, see
                        <a class="xref" href="security.html#audit-log-filtering" title="6.4.5.6&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.6, “Audit Log Filtering”</a>.
                    </p><p style="color:blue;">本节介绍每个审核日志用户定义函数（UDF）的用途、调用顺序和返回值。有关可以调用这些udf的条件的信息，请参阅第6.4.5.6节“审核日志筛选”。</p><p>
                    Each audit log UDF returns a string that indicates whether the
                    operation succeeded. <code class="literal">OK</code> indicates success.
                    <code class="literal">ERROR: <em class="replaceable"><code>message</code></em></code>
                    indicates failure.
                </p><p style="color:blue;">每个审核日志udf返回一个字符串，指示操作是否成功。确定表示成功。错误：消息指示失败。</p><p>
                    These audit log UDFs are available:
                </p><p style="color:blue;">这些审核日志自定义项可用：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="udf_audit-log-encryption-password-get"></a>
                            <a class="link" href="security.html#udf_audit-log-encryption-password-get"><code class="literal">audit_log_encryption_password_get()</code></a>
                        </p><p style="color:blue;">审核日志加密密码获取（）</p><a class="indexterm" name="idm140286879200160"></a><a class="indexterm" name="idm140286879199040"></a><p>
                            Retrieves the current audit log encryption password as a
                            binary string. The password is fetched from the MySQL
                            keyring, which must be enabled or an error occurs. Any
                            keyring plugin can be used; for instructions, see
                            <a class="xref" href="security.html#keyring" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, “The MySQL Keyring”</a>.
                        </p><p style="color:blue;">以二进制字符串形式检索当前审核日志加密密码。密码是从mysql密匙环获取的，必须启用该密匙环，否则将发生错误。可以使用任何keyring插件；有关说明，请参阅6.4.4节，“mysql keyring”。</p><p>
                            For additional information about audit log encryption, see
                            <a class="xref" href="security.html#audit-log-file-encryption" title="Audit Log File Encryption">Audit Log File Encryption</a>.
                        </p><p style="color:blue;">有关审核日志加密的其他信息，请参阅审核日志文件加密。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">没有。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            The password string for success (up to 766 bytes), or
                            <code class="literal">NULL</code> and an error for failure.
                        </p><p style="color:blue;">成功的密码字符串（最多766字节），或者为空，失败则为错误。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_encryption_password_get();</code></strong>
+-------------------------------------+
| audit_log_encryption_password_get() |
+-------------------------------------+
| secret                              |
+-------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-encryption-password-set"></a>
                            <a class="link" href="security.html#udf_audit-log-encryption-password-set"><code class="literal">audit_log_encryption_password_set(<em class="replaceable"><code>password</code></em>)</code></a>
                        </p><p style="color:blue;">审核日志加密密码集（密码）</p><a class="indexterm" name="idm140286879187232"></a><a class="indexterm" name="idm140286879186112"></a><p>
                            Sets the audit log encryption password to the argument,
                            stores the password in the MySQL keyring. If encryption is
                            enabled, the function performs a log file rotation
                            operation that renames the current log file, and begins a
                            new log file encrypted with the password. The keyring must
                            be enabled or an error occurs. Any keyring plugin can be
                            used; for instructions, see <a class="xref" href="security.html#keyring" title="6.4.4&nbsp;The MySQL Keyring">Section&nbsp;6.4.4, “The MySQL Keyring”</a>.
                        </p><p style="color:blue;">将审核日志加密密码设置为参数，将密码存储在mysql密匙环中。如果启用加密，则该函数执行日志文件循环操作，重命名当前日志文件，并开始使用密码加密的新日志文件。必须启用密钥环，否则将发生错误。可以使用任何keyring插件；有关说明，请参阅6.4.4节，“mysql keyring”。</p><p>
                            For additional information about audit log encryption, see
                            <a class="xref" href="security.html#audit-log-file-encryption" title="Audit Log File Encryption">Audit Log File Encryption</a>.
                        </p><p style="color:blue;">有关审核日志加密的其他信息，请参阅审核日志文件加密。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            <em class="replaceable"><code>password</code></em>: The password string.
                            The maximum permitted length is 766 bytes.
                        </p><p style="color:blue;">密码：密码字符串。最大允许长度为766字节。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            1 for success, 0 for failure.
                        </p><p style="color:blue;">1代表成功，0代表失败。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_encryption_password_set(<em class="replaceable"><code>password</code></em>);</code></strong>
+---------------------------------------------+
| audit_log_encryption_password_set(<em class="replaceable"><code>password</code></em>) |
+---------------------------------------------+
| 1                                           |
+---------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-filter-flush"></a>
                            <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                        </p><p style="color:blue;">审核日志筛选器刷新（）</p><a class="indexterm" name="idm140286879173952"></a><a class="indexterm" name="idm140286879172848"></a><p>
                            Calling any of the other filtering UDFs affects
                            operational audit log filtering immediately and updates
                            the audit log tables. If instead you modify the contents
                            of those tables directly using statements such as
                            <a class="link" href="sql-syntax.html#insert" title="13.2.5&nbsp;INSERT Syntax"><code class="literal">INSERT</code></a>,
                            <a class="link" href="sql-syntax.html#update" title="13.2.11&nbsp;UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
                            <a class="link" href="sql-syntax.html#delete" title="13.2.2&nbsp;DELETE Syntax"><code class="literal">DELETE</code></a>, the changes do not
                            affect filtering immediately. To flush your changes and
                            make them operational, call
                            <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>.
                        </p><p style="color:blue;">调用任何其他筛选自定义项都会立即影响操作审核日志筛选并更新审核日志表。如果直接使用INSERT、UPDATE和DELETE等语句修改这些表的内容，则这些更改不会立即影响筛选。要刷新更改并使其可操作，请调用audit_log_filter_flush（）。</p>
                            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Warning
                                </div>
                                <p>
                                    <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                                    should be used only after modifying the audit tables
                                    directly, to force reloading all filters. Otherwise,
                                    this function should be avoided. It is, in effect, a
                                    simplified version of unloading and reloading the
                                    <code class="literal">audit_log</code> plugin with
                                    <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> plus
                                    <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a>.
                                </p><p style="color:blue;">audit_log_filter_flush（）只能在直接修改审核表之后使用，以强制重新加载所有筛选器。否则，应避免使用此功能。实际上，这是一个简单的版本，可以使用uninstall plugin plus install plugin卸载和重新加载审计日志插件。</p><p>
                                <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>
                                affects all current sessions and detaches them from
                                their previous filters. Current sessions are no longer
                                logged unless they disconnect and reconnect, or execute
                                a change-user operation.
                            </p><p style="color:blue;">audit_log_filter_flush（）会影响所有当前会话，并将它们与以前的筛选器分离。当前会话将不再记录，除非它们断开连接并重新连接，或执行更改用户操作。</p>
                            </div>
                            <p>
                                If this function fails, an error message is returned and
                                the audit log is disabled until the next successful call
                                to <a class="link" href="security.html#udf_audit-log-filter-flush"><code class="literal">audit_log_filter_flush()</code></a>.
                            </p><p style="color:blue;">如果此函数失败，将返回一条错误消息并禁用审核日志，直到下次成功调用audit-log-filter-flush（）为止。</p><p>
                                Arguments:
                            </p><p style="color:blue;">论据：</p><p>
                                None.
                            </p><p style="color:blue;">没有。</p><p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the operation succeeded.
                                <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
                                <em class="replaceable"><code>message</code></em></code> indicates
                                failure.
                            </p><p style="color:blue;">指示操作是否成功的字符串。确定表示成功。错误：消息指示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_flush();</code></strong>
+--------------------------+
| audit_log_filter_flush() |
+--------------------------+
| OK                       |
+--------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-filter-remove-filter"></a>
                            <a class="link" href="security.html#udf_audit-log-filter-remove-filter"><code class="literal">audit_log_filter_remove_filter(<em class="replaceable"><code>filter_name</code></em>)</code></a>
                        </p><p style="color:blue;">审核日志筛选器移除筛选器（筛选器名称）</p><a class="indexterm" name="idm140286879147616"></a><a class="indexterm" name="idm140286879146496"></a><p>
                            Given a filter name, removes the filter from the current
                            set of filters. It is not an error for the filter not to
                            exist.
                        </p><p style="color:blue;">给定筛选器名称，从当前筛选器集中删除筛选器。这不是过滤器不存在的错误。</p><p>
                            If a removed filter is assigned to any user accounts,
                            those users stop being filtered (they are removed from the
                            <code class="literal">audit_log_user</code> table). Termination of
                            filtering includes any current sessions for those users:
                            They are detached from the filter and no longer logged.
                        </p><p style="color:blue;">如果已删除的筛选器分配给任何用户帐户，则这些用户将停止被筛选（它们将从audit_log_user表中删除）。终止筛选包括这些用户的任何当前会话：它们与筛选分离，不再记录。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>filter_name</code></em>: A string that
                                    specifies the filter name.
                                </p><p style="color:blue;">筛选器名称：指定筛选器名称的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the operation succeeded.
                                <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
                                <em class="replaceable"><code>message</code></em></code> indicates
                                failure.
                            </p><p style="color:blue;">指示操作是否成功的字符串。确定表示成功。错误：消息指示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_remove_filter('SomeFilter');</code></strong>
+----------------------------------------------+
| audit_log_filter_remove_filter('SomeFilter') |
+----------------------------------------------+
| OK                                           |
+----------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-filter-remove-user"></a>
                            <a class="link" href="security.html#udf_audit-log-filter-remove-user"><code class="literal">audit_log_filter_remove_user(<em class="replaceable"><code>user_name</code></em>)</code></a>
                        </p><p style="color:blue;">审核日志筛选器删除用户（用户名）</p><a class="indexterm" name="idm140286879132976"></a><a class="indexterm" name="idm140286879131872"></a><p>
                            Given a user account name, cause the user to be no longer
                            assigned to a filter. It is not an error if the user has
                            no filter assigned. Filtering of current sessions for the
                            user remains unaffected. New connections for the user are
                            filtered using the default account filter if there is one,
                            and are not logged otherwise.
                        </p><p style="color:blue;">给定用户帐户名，将导致用户不再分配给筛选器。如果用户没有分配筛选器，则不是错误。用户当前会话的筛选不受影响。如果有用户的新连接，则使用默认帐户筛选器进行筛选，否则不记录。</p><p>
                            If the name is <code class="literal">%</code>, the function removes
                            the default account filter that is used for any user
                            account that has no explicitly assigned filter.
                        </p><p style="color:blue;">如果名称为%，则函数将删除用于任何没有显式分配筛选器的用户帐户的默认帐户筛选器。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>user_name</code></em>: The user account
                                    name as a string in
                                    <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                                    format, or <code class="literal">%</code> to represent the
                                    default account.
                                </p><p style="color:blue;">用户名：用户名@主机名格式的字符串形式的用户帐户名，或%表示默认帐户。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the operation succeeded.
                                <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
                                <em class="replaceable"><code>message</code></em></code> indicates
                                failure.
                            </p><p style="color:blue;">指示操作是否成功的字符串。确定表示成功。错误：消息指示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_remove_user('user1@localhost');</code></strong>
+-------------------------------------------------+
| audit_log_filter_remove_user('user1@localhost') |
+-------------------------------------------------+
| OK                                              |
+-------------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-filter-set-filter"></a>
                            <a class="link" href="security.html#udf_audit-log-filter-set-filter"><code class="literal">audit_log_filter_set_filter(<em class="replaceable"><code>filter_name</code></em>,
                                <em class="replaceable"><code>definition</code></em>)</code></a>
                        </p><p style="color:blue;">审核日志筛选器集筛选器（筛选器名称、定义）</p><a class="indexterm" name="idm140286879115872"></a><a class="indexterm" name="idm140286879114768"></a><p>
                            Given a filter name and definition, adds the filter to the
                            current set of filters. If the filter already exists and
                            is used by any current sessions, those sessions are
                            detached from the filter and are no longer logged. This
                            occurs because the new filter definition has a new filter
                            ID that differs from its previous ID.
                        </p><p style="color:blue;">给定筛选器名称和定义，将筛选器添加到当前筛选器集。如果筛选器已经存在并被任何当前会话使用，则这些会话从筛选器中分离，并且不再被记录。发生这种情况的原因是新的筛选器定义有一个与其以前的ID不同的新筛选器ID。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>filter_name</code></em>: A string that
                                    specifies the filter name.
                                </p><p style="color:blue;">筛选器名称：指定筛选器名称的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>definition</code></em>: A
                                    <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> value that
                                    specifies the filter definition.
                                </p><p style="color:blue;">定义：指定筛选器定义的json值。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the operation succeeded.
                                <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
                                <em class="replaceable"><code>message</code></em></code> indicates
                                failure.
                            </p><p style="color:blue;">指示操作是否成功的字符串。确定表示成功。错误：消息指示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET @f = '{ "filter": { "log": false } }';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_set_filter('SomeFilter', @f);</code></strong>
+-----------------------------------------------+
| audit_log_filter_set_filter('SomeFilter', @f) |
+-----------------------------------------------+
| OK                                            |
+-----------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-filter-set-user"></a>
                            <a class="link" href="security.html#udf_audit-log-filter-set-user"><code class="literal">audit_log_filter_set_user(<em class="replaceable"><code>user_name</code></em>,
                                <em class="replaceable"><code>filter_name</code></em>)</code></a>
                        </p><p style="color:blue;">audit_log_filter_set_user（用户名，筛选器名称）</p><a class="indexterm" name="idm140286879098720"></a><a class="indexterm" name="idm140286879097616"></a><p>
                            Given a user account name and a filter name, assigns the
                            filter to the user. A user can be assigned only one
                            filter, so if the user was already assigned a filter, the
                            assignment is replaced. Filtering of current sessions for
                            the user remains unaffected. New connections are filtered
                            using the new filter.
                        </p><p style="color:blue;">给定用户帐户名和筛选器名，将筛选器分配给用户。一个用户只能分配一个筛选器，因此，如果已为该用户分配了筛选器，则会替换该分配。用户当前会话的筛选不受影响。使用新筛选器筛选新连接。</p><p>
                            As a special case, the name <code class="literal">%</code>
                            represents the default account. The filter is used for
                            connections from any user account that has no explicitly
                            assigned filter.
                        </p><p style="color:blue;">作为特殊情况，名称%表示默认帐户。此筛选器用于来自任何没有显式分配筛选器的用户帐户的连接。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>user_name</code></em>: The user account
                                    name as a string in
                                    <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                                    format, or <code class="literal">%</code> to represent the
                                    default account.
                                </p><p style="color:blue;">用户名：用户名@主机名格式的字符串形式的用户帐户名，或%表示默认帐户。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>filter_name</code></em>: A string that
                                    specifies the filter name.
                                </p><p style="color:blue;">筛选器名称：指定筛选器名称的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the operation succeeded.
                                <code class="literal">OK</code> indicates success. <code class="literal">ERROR:
                                <em class="replaceable"><code>message</code></em></code> indicates
                                failure.
                            </p><p style="color:blue;">指示操作是否成功的字符串。确定表示成功。错误：消息指示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_filter_set_user('user1@localhost', 'SomeFilter');</code></strong>
+------------------------------------------------------------+
| audit_log_filter_set_user('user1@localhost', 'SomeFilter') |
+------------------------------------------------------------+
| OK                                                         |
+------------------------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-read"></a>
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read([<em class="replaceable"><code>arg</code></em>])</code></a>
                        </p><p style="color:blue;">审核日志读取（[arg]）</p><a class="indexterm" name="idm140286879080672"></a><a class="indexterm" name="idm140286879079568"></a><p>
                            Reads events from the audit log and returns a binary
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string containing an
                            array of audit events. If the audit log format is not
                            <code class="literal">JSON</code>, an error occurs.
                        </p><p style="color:blue;">从审核日志读取事件并返回包含审核事件数组的二进制json字符串。如果审核日志格式不是json，则会发生错误。</p><p>
                            Each event in the return value is a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash, except that the
                            last array element may be a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                            <code class="literal">null</code> value to indicate no following
                            events are available to read.
                        </p><p style="color:blue;">返回值中的每个事件都是一个json散列，除了最后一个数组元素可能是一个json空值，表示没有可读取的以下事件。</p><p>
                            For the first call to
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> within a
                            session, pass a bookmark indicating where to begin
                            reading. If the final value of the returned array is not a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                            <code class="literal">null</code> value, there are more events
                            following those just read and
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> can be
                            called without or with a bookmark argument. Without an
                            argument, reading continues with the next unread event.
                            With a bookmark argument, reading continues from the
                            bookmark.
                        </p><p style="color:blue;">对于会话中首次调用audit_log_read（），请传递一个书签，指示从何处开始读取。如果返回数组的最终值不是json空值，那么在刚刚读取的事件之后还有更多的事件，可以在不使用或使用bookmark参数的情况下调用audit_log_read（）。如果没有参数，阅读将继续进行下一个未读事件。使用bookmark参数时，从书签继续读取。</p><p>
                            If the final value of the returned array is a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                            <code class="literal">null</code> value, there are no more events
                            left to be read and the next call to
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> must
                            include a bookmark argument.
                        </p><p style="color:blue;">如果返回的数组的最终值为json空值，则不再有要读取的事件，下一次对audit_log_read（）的调用必须包含bookmark参数。</p><p>
                            To obtain a bookmark for the most recently written event,
                            call
                            <a class="link" href="security.html#udf_audit-log-read-bookmark"><code class="literal">audit_log_read_bookmark()</code></a>.
                        </p><p style="color:blue;">要获取最近写入事件的书签，请调用audit_log_read_bookmark（）。</p><p>
                            For additional information about audit log-reading
                            functions, see <a class="xref" href="security.html#audit-log-file-reading" title="Audit Log File Reading">Audit Log File Reading</a>.
                        </p><p style="color:blue;">有关审核日志读取功能的其他信息，请参阅审核日志文件读取。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            <em class="replaceable"><code>arg</code></em>: An optional bookmark,
                            represented as a string containing a
                            <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash that indicates
                            where and how much to read. The following items are
                            significant in the <code class="literal">arg</code> value (other
                            items are ignored):
                        </p><p style="color:blue;">arg：一个可选的书签，表示为包含json散列的字符串，该散列指示读取的位置和数量。以下项目在arg值中很重要（忽略其他项目）：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">timestamp</code>, <code class="literal">id</code>:
                                    The location within the audit log of the first event
                                    to read. Both items must be present to completely
                                    specify a position.
                                </p><p style="color:blue;">timestamp，id：要读取的第一个事件在审核日志中的位置。两个项目都必须存在才能完全指定位置。</p></li><li class="listitem"><p>
                                    <code class="literal">max_array_length</code>: The maximum
                                    number of events to read from the log. If omitted, the
                                    default is to read to the end of the log or until the
                                    read buffer is full, whichever comes first.
                                </p><p style="color:blue;">最大值：从日志中读取的最大事件数。如果省略，默认值是读取到日志末尾或直到读取缓冲区已满，以先到者为准。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A binary <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string
                                containing an array of audit events for success, or
                                <code class="literal">NULL</code> and an error for failure.
                            </p><p style="color:blue;">一个二进制json字符串，包含成功的审核事件数组，或者为空，失败时为错误。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_read(audit_log_read_bookmark());</code></strong>
+-----------------------------------------------------------------------+
| audit_log_read(audit_log_read_bookmark())                             |
+-----------------------------------------------------------------------+
| [ {"timestamp":"2019-10-03 22:41:24","id":0,"class":"connection", ... |
+-----------------------------------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_audit-log-read-bookmark"></a>
                            <a class="link" href="security.html#udf_audit-log-read-bookmark"><code class="literal">audit_log_read_bookmark()</code></a>
                        </p><p style="color:blue;">审核日志读取书签（）</p><a class="indexterm" name="idm140286879044064"></a><a class="indexterm" name="idm140286879042960"></a><p>
                            Returns a binary <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a>
                            string representing a bookmark for the most recently
                            written audit log event. If the audit log format is not
                            <code class="literal">JSON</code>, an error occurs.
                        </p><p style="color:blue;">返回一个二进制json字符串，表示最近写入的审核日志事件的书签。如果审核日志格式不是json，则会发生错误。</p><p>
                            The bookmark is a <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> hash
                            with <code class="literal">timestamp</code> and
                            <code class="literal">id</code> items indicating the event position
                            within the audit log. It is suitable for passing to
                            <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a> to indicate
                            to that function where to begin reading.
                        </p><p style="color:blue;">书签是一个json散列，带有时间戳和id项，指示审核日志中的事件位置。它适合传递到audit_log_read（）以指示该函数从何处开始读取。</p><p>
                            For additional information about audit log-reading
                            functions, see <a class="xref" href="security.html#audit-log-file-reading" title="Audit Log File Reading">Audit Log File Reading</a>.
                        </p><p style="color:blue;">有关审核日志读取功能的其他信息，请参阅审核日志文件读取。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">没有。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            A binary <a class="link" href="data-types.html#json" title="11.6&nbsp;The JSON Data Type"><code class="literal">JSON</code></a> string
                            containing a bookmark for success, or
                            <code class="literal">NULL</code> and an error for failure.
                        </p><p style="color:blue;">一个二进制json字符串，包含书签表示成功，或空，错误表示失败。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT audit_log_read_bookmark();</code></strong>
+-------------------------------------------------+
| audit_log_read_bookmark()                       |
+-------------------------------------------------+
| { "timestamp": "2019-10-03 21:03:44", "id": 0 } |
+-------------------------------------------------+
</pre></li></ul>
                    </div>

                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="audit-log-option-variable-reference"></a>Audit Log Option and Variable Reference</h5>

                            </div>

                        </div>

                    </div>

                    <div class="table">
                        <a name="idm140286879025664"></a><p class="title"><b>Table&nbsp;6.33&nbsp;Audit Log Option and Variable Reference</b></p><p style="color:blue;">表6.33审计日志选项和变量参考</p>
                        <div class="table-contents">
                            <table frame="box" rules="all" summary="Reference for audit log command-line options, system variables, and status variables."><colgroup><col width="20%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"></colgroup><thead><tr><th scope="col">Name</th>
                                <th scope="col">Cmd-Line</th>
                                <th scope="col">Option File</th>
                                <th scope="col">System Var</th>
                                <th scope="col">Status Var</th>
                                <th scope="col">Var Scope</th>
                                <th scope="col">Dynamic</th>
                            </tr></thead><tbody><tr><td scope="row"><a class="link" href="security.html#option_mysqld_audit-log">audit-log</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_buffer_size">audit_log_buffer_size</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_compression">audit_log_compression</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_connection_policy">audit_log_connection_policy</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_current_session">audit_log_current_session</a></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td></td>
                                <td>Both</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_current_size">Audit_log_current_size</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_encryption">audit_log_encryption</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_event_max_drop_size">Audit_log_event_max_drop_size</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_events">Audit_log_events</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_events_filtered">Audit_log_events_filtered</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_events_lost">Audit_log_events_lost</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_events_written">Audit_log_events_written</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_exclude_accounts">audit_log_exclude_accounts</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_file">audit_log_file</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_filter_id">audit_log_filter_id</a></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td></td>
                                <td>Both</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_flush">audit_log_flush</a></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_format">audit_log_format</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_include_accounts">audit_log_include_accounts</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_policy">audit_log_policy</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_read_buffer_size">audit_log_read_buffer_size</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Varies</td>
                                <td>Varies</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_rotate_on_size">audit_log_rotate_on_size</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_statement_policy">audit_log_statement_policy</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>Yes</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#sysvar_audit_log_strategy">audit_log_strategy</a></td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td>Yes</td>
                                <td></td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_total_size">Audit_log_total_size</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr><tr><td scope="row"><a class="link" href="security.html#statvar_Audit_log_write_waits">Audit_log_write_waits</a></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Yes</td>
                                <td>Global</td>
                                <td>No</td>
                            </tr></tbody></table>
                        </div>

                    </div>
                    <br class="table-break">
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-options-variables"></a>Audit Log Options and Variables</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        This section describes the command options and system
                        variables that configure operation of MySQL Enterprise Audit. If values
                        specified at startup time are incorrect, the
                        <code class="literal">audit_log</code> plugin may fail to initialize
                        properly and the server does not load it. In this case, the
                        server may also produce error messages for other audit log
                        settings because it will not recognize them.
                    </p><p style="color:blue;">本节介绍配置mysql企业审计操作的命令选项和系统变量。如果在启动时指定的值不正确，则审核日志插件可能无法正确初始化，服务器也不会加载它。在这种情况下，服务器还可能为其他审核日志设置生成错误消息，因为它无法识别这些设置。</p><p>
                    To configure activation of the audit log plugin, use this
                    option:
                </p><p style="color:blue;">要配置审核日志插件的激活，请使用此选项：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_audit-log"></a>
                            <a class="indexterm" name="idm140286878832944"></a>

                            <a class="indexterm" name="idm140286878831488"></a>

                            <a class="link" href="security.html#option_mysqld_audit-log"><code class="option">--audit-log[=<em class="replaceable"><code>value</code></em>]</code></a>
                        </p><p style="color:blue;">--审核日志[=值]</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit-log"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log[=value]</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ON</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">ON</code></p><p style="color:blue;">打开（放）</p><p class="valid-value"><code class="literal">OFF</code></p><p style="color:blue;">关闭</p><p class="valid-value"><code class="literal">FORCE</code></p><p style="color:blue;">武力</p><p class="valid-value"><code class="literal">FORCE_PLUS_PERMANENT</code></p><p style="color:blue;">永久强制</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                This option controls how the server loads the
                                <code class="literal">audit_log</code> plugin at startup. It is
                                available only if the plugin has been previously
                                registered with <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL
                                PLUGIN</code></a> or is loaded with
                                <a class="link" href="server-administration.html#option_mysqld_plugin-load"><code class="option">--plugin-load</code></a> or
                                <a class="link" href="server-administration.html#option_mysqld_plugin-load-add"><code class="option">--plugin-load-add</code></a>. See
                                <a class="xref" href="security.html#audit-log-installation" title="6.4.5.2&nbsp;Installing or Uninstalling MySQL Enterprise Audit">Section&nbsp;6.4.5.2, “Installing or Uninstalling MySQL Enterprise Audit”</a>.
                            </p><p style="color:blue;">此选项控制服务器在启动时如何加载审核日志插件。仅当插件以前已注册到install plugin或加载了--plugin load或--plugin load add时，此选项才可用。参见第6.4.5.2节“安装或卸载mysql企业审计”。</p><p>
                                The option value should be one of those available for
                                plugin-loading options, as described in
                                <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>. For example,
                                <a class="link" href="security.html#option_mysqld_audit-log"><code class="option">--audit-log=FORCE_PLUS_PERMANENT</code></a>
                                tells the server to load the plugin and prevent it from
                                being removed while the server is running.
                            </p><p style="color:blue;">选项值应该是可用于插件加载选项的值之一，如5.5.1节“安装和卸载插件”中所述。例如，--audit log=force_plus_permanent告诉服务器加载插件并防止在服务器运行时将其删除。</p></li></ul>
                    </div>
                    <p>
                        If the audit log plugin is enabled, it exposes several system
                        variables that permit control over logging:
                    </p><p style="color:blue;">如果启用了审核日志插件，它将公开几个允许控制日志记录的系统变量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'audit_log%';</code></strong>
+-----------------------------+--------------+
| Variable_name               | Value        |
+-----------------------------+--------------+
| audit_log_buffer_size       | 1048576      |
| audit_log_connection_policy | ALL          |
| audit_log_current_session   | OFF          |
| audit_log_exclude_accounts  |              |
| audit_log_file              | audit.log    |
| audit_log_filter_id         | 0            |
| audit_log_flush             | OFF          |
| audit_log_format            | NEW          |
| audit_log_include_accounts  |              |
| audit_log_policy            | ALL          |
| audit_log_rotate_on_size    | 0            |
| audit_log_statement_policy  | ALL          |
| audit_log_strategy          | ASYNCHRONOUS |
+-----------------------------+--------------+
</pre><p>
                    You can set any of these variables at server startup, and some
                    of them at runtime. Those that are available only for legacy
                    mode audit log filtering are so noted.
                </p><p style="color:blue;">您可以在服务器启动时设置这些变量中的任何一个，也可以在运行时设置其中一些。仅可用于传统模式审核日志筛选的日志将被记录下来。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_audit_log_buffer_size"></a>
                            <a class="indexterm" name="idm140286878792176"></a>

                            <a class="indexterm" name="idm140286878791136"></a>

                            <a class="link" href="security.html#sysvar_audit_log_buffer_size"><code class="literal">audit_log_buffer_size</code></a>
                        </p><p style="color:blue;">审核日志缓冲区大小</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_buffer_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-buffer-size=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_buffer_size">audit_log_buffer_size</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">1048576</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span></td>
                                    <td><code class="literal">4096</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span> (64-bit platforms)</td>
                                    <td><code class="literal">18446744073709547520</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span> (32-bit platforms)</td>
                                    <td><code class="literal">4294967295</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                When the audit log plugin writes events to the log
                                asynchronously, it uses a buffer to store event contents
                                prior to writing them. This variable controls the size of
                                that buffer, in bytes. The server adjusts the value to a
                                multiple of 4096. The plugin uses a single buffer, which
                                it allocates when it initializes and removes when it
                                terminates. The plugin allocates this buffer only if
                                logging is asynchronous.
                            </p><p style="color:blue;">当审计日志插件异步地将事件写入日志时，它在写入事件内容之前使用缓冲区存储事件内容。此变量控制缓冲区的大小（字节）。服务器将该值调整为4096的倍数。插件使用单个缓冲区，在初始化时分配，在终止时移除。插件仅在日志记录是异步的情况下才分配此缓冲区。</p></li><li class="listitem"><p><a name="sysvar_audit_log_compression"></a>
                            <a class="link" href="security.html#sysvar_audit_log_compression"><code class="literal">audit_log_compression</code></a>
                        </p><p style="color:blue;">审核日志压缩</p><a class="indexterm" name="idm140286878748848"></a><a class="indexterm" name="idm140286878747808"></a>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_compression"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-compression=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.21</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_compression">audit_log_compression</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">NONE</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">NONE</code></p><p style="color:blue;">无</p><p class="valid-value"><code class="literal">GZIP</code></p><p style="color:blue;">广州国际机场</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The type of compression for the audit log file. Permitted
                                values are <code class="literal">NONE</code> (no compression; the
                                default) and <code class="literal">GZIP</code> (GNU Zip
                                compression). For more information, see
                                <a class="xref" href="security.html#audit-log-file-compression" title="Audit Log File Compression">Audit Log File Compression</a>.
                            </p><p style="color:blue;">审核日志文件的压缩类型。允许的值是none（无压缩；默认值）和gzip（gnu zip压缩）。有关详细信息，请参阅审核日志文件压缩。</p></li><li class="listitem"><p><a name="sysvar_audit_log_connection_policy"></a>
                            <a class="indexterm" name="idm140286878711520"></a>

                            <a class="indexterm" name="idm140286878710416"></a>

                            <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                        </p><p style="color:blue;">审核日志连接策略</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_connection_policy"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-connection-policy=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_connection_policy">audit_log_connection_policy</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ALL</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">ALL</code></p><p style="color:blue;">全部</p><p class="valid-value"><code class="literal">ERRORS</code></p><p style="color:blue;">错误</p><p class="valid-value"><code class="literal">NONE</code></p><p style="color:blue;">无</p></td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    This variable applies only to legacy mode audit log
                                    filtering (see
                                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>).
                                </p><p style="color:blue;">此变量仅适用于传统模式审核日志筛选（请参阅第6.4.5.8节“传统模式审核日志筛选”）。</p>
                            </div>
                            <p>
                                The policy controlling how the audit log plugin writes
                                connection events to its log file. The following table
                                shows the permitted values.
                            </p><p style="color:blue;">控制审核日志插件如何将连接事件写入其日志文件的策略。下表显示了允许的值。</p>
                            <div class="informaltable">
                                <table summary="Permitted values for the audit_log_connection_policy variable."><colgroup><col width="15%"><col width="85%"></colgroup><thead><tr>
                                    <th scope="col">Value</th>
                                    <th scope="col">Description</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">ALL</code></td>
                                    <td>Log all connection events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">ERRORS</code></td>
                                    <td>Log only failed connection events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">NONE</code></td>
                                    <td>Do not log connection events</td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    At server startup, any explicit value given for
                                    <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                                    may be overridden if
                                    <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> is
                                    also specified, as described in
                                    <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                                </p><p style="color:blue;">在服务器启动时，如果还指定了审核日志策略（如第6.4.5.5节“审核日志记录配置”中所述），则可以覆盖为审核日志连接策略给定的任何显式值。</p>
                            </div>
                        </li><li class="listitem"><p><a name="sysvar_audit_log_current_session"></a>
                            <a class="indexterm" name="idm140286878654128"></a>

                            <a class="indexterm" name="idm140286878653024"></a>

                            <a class="link" href="security.html#sysvar_audit_log_current_session"><code class="literal">audit_log_current_session</code></a>
                        </p><p style="color:blue;">审核日志当前会话</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_current_session"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_current_session">audit_log_current_session</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global, Session</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Boolean</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">depends on filtering policy</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                Whether audit logging is enabled for the current session.
                                The session value of this variable is read only. It is set
                                when the session begins based on the values of the
                                <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                                and
                                <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                                system variables. The audit log plugin uses the session
                                value to determine whether to audit events for the
                                session. (There is a global value, but the plugin does not
                                use it.)
                            </p><p style="color:blue;">是否为当前会话启用审核日志记录。此变量的会话值是只读的。它是在会话开始时根据audit_log_include_accounts和audit_log_exclude_accounts系统变量的值设置的。审核日志插件使用会话值来确定是否审核会话的事件。（有一个全局值，但插件不使用它。）</p></li><li class="listitem"><p><a name="sysvar_audit_log_encryption"></a>
                            <a class="link" href="security.html#sysvar_audit_log_encryption"><code class="literal">audit_log_encryption</code></a>
                        </p><p style="color:blue;">审核日志加密</p><a class="indexterm" name="idm140286878620912"></a><a class="indexterm" name="idm140286878619872"></a>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_encryption"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-encryption=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.21</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_encryption">audit_log_encryption</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">NONE</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">NONE</code></p><p style="color:blue;">无</p><p class="valid-value"><code class="literal">AES</code></p><p style="color:blue;">爱依斯</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The type of encryption for the audit log file. Permitted
                                values are <code class="literal">NONE</code> (no encryption; the
                                default) and <code class="literal">AES</code> (AES-256-CBC cipher
                                encryption). For more information, see
                                <a class="xref" href="security.html#audit-log-file-encryption" title="Audit Log File Encryption">Audit Log File Encryption</a>.
                            </p><p style="color:blue;">审核日志文件的加密类型。允许的值是none（无加密；默认值）和aes（aes-256-cbc密码加密）。有关详细信息，请参阅审核日志文件加密。</p></li><li class="listitem"><p><a name="sysvar_audit_log_exclude_accounts"></a>
                            <a class="indexterm" name="idm140286878583632"></a>

                            <a class="indexterm" name="idm140286878582528"></a>

                            <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                        </p><p style="color:blue;">审核日志排除帐户</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_exclude_accounts"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-exclude-accounts=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_exclude_accounts">audit_log_exclude_accounts</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>String</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">NULL</code></td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    This variable applies only to legacy mode audit log
                                    filtering (see
                                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>).
                                </p><p style="color:blue;">此变量仅适用于传统模式审核日志筛选（请参阅第6.4.5.8节“传统模式审核日志筛选”）。</p>
                            </div>
                            <p>
                                The accounts for which events should not be logged. The
                                value should be <code class="literal">NULL</code> or a string
                                containing a list of one or more comma-separated account
                                names. For more information, see
                                <a class="xref" href="security.html#audit-log-filtering" title="6.4.5.6&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.6, “Audit Log Filtering”</a>.
                            </p><p style="color:blue;">不应记录其事件的帐户。该值应为空或包含一个或多个逗号分隔的帐户名列表的字符串。有关详细信息，请参阅第6.4.5.6节“审核日志筛选”。</p><p>
                                Modifications to
                                <a class="link" href="security.html#sysvar_audit_log_exclude_accounts"><code class="literal">audit_log_exclude_accounts</code></a>
                                affect only connections created subsequent to the
                                modification, not existing connections.
                            </p><p style="color:blue;">对AuditLogLoguExtReDeCype帐户的修改仅影响修改后创建的连接，而不影响现有连接。</p></li><li class="listitem"><p><a name="sysvar_audit_log_file"></a>
                            <a class="indexterm" name="idm140286878546640"></a>

                            <a class="indexterm" name="idm140286878545584"></a>

                            <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a>
                        </p><p style="color:blue;">审核日志文件</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_file"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-file=file_name</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_file">audit_log_file</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>File name</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">audit.log</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The base name and suffix of the file to which the audit
                                log plugin writes events. The default value is
                                <code class="filename">audit.log</code>, regardless of logging
                                format. To have the name suffix correspond to the format,
                                set the name explicitly, choosing a different suffix (for
                                example, <code class="filename">audit.xml</code> for XML format,
                                <code class="filename">audit.json</code> for JSON format).
                            </p><p style="color:blue;">审核日志插件向其写入事件的文件的基名称和后缀。默认值为audit.log，与日志格式无关。要使名称后缀与格式对应，请显式设置名称，选择不同的后缀（例如，audit.xml表示XML格式，audit.json表示JSON格式）。</p><p>
                                If the value of
                                <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> is a
                                relative path name, the plugin interprets it relative to
                                the data directory. If the value is a full path name, the
                                plugin uses the value as is. A full path name may be
                                useful if it is desirable to locate audit files on a
                                separate file system or directory. For security reasons,
                                write the audit log file to a directory accessible only to
                                the MySQL server and to users with a legitimate reason to
                                view the log.
                            </p><p style="color:blue;">如果audit_log_file的值是相对路径名，则插件会将其解释为相对于数据目录。如果该值是完整路径名，则插件将按原样使用该值。如果希望在单独的文件系统或目录中定位审核文件，则完整路径名可能很有用。出于安全原因，请将审核日志文件写入一个只有mysql服务器和有合法理由查看日志的用户才能访问的目录。</p><p>
                                For details about how the audit log plugin interprets the
                                <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value and
                                the rules for file renaming that occurs at plugin
                                initialization and termination, see
                                <a class="xref" href="security.html#audit-log-file-name" title="Audit Log File Name">Audit Log File Name</a>.
                            </p><p style="color:blue;">有关审核日志插件如何解释审核日志文件值以及在插件初始化和终止时发生的文件重命名规则的详细信息，请参阅审核日志文件名。</p><p>
                                As of MySQL 5.7.21, the audit log plugin uses the
                                directory containing the audit log file (determined from
                                the <a class="link" href="security.html#sysvar_audit_log_file"><code class="literal">audit_log_file</code></a> value)
                                as the location to search for readable audit log files.
                                From these log files and the current file, the plugin
                                constructs a list of the ones that are subject to use with
                                the audit log bookmarking and reading functions. See
                                <a class="xref" href="security.html#audit-log-file-reading" title="Audit Log File Reading">Audit Log File Reading</a>.
                            </p><p style="color:blue;">从mysql 5.7.21开始，审计日志插件使用包含审计日志文件（由审计日志文件值确定）的目录作为搜索可读审计日志文件的位置。从这些日志文件和当前文件中，插件构建了一个列表，其中列出了要与审计日志书签和读取功能一起使用的日志。请参阅审核日志文件读取。</p></li><li class="listitem"><p><a name="sysvar_audit_log_filter_id"></a>
                            <a class="indexterm" name="idm140286878504864"></a>

                            <a class="indexterm" name="idm140286878503824"></a>

                            <a class="link" href="security.html#sysvar_audit_log_filter_id"><code class="literal">audit_log_filter_id</code></a>
                        </p><p style="color:blue;">审核日志筛选器ID</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_filter_id"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.13</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_filter_id">audit_log_filter_id</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global, Session</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The session value of this variable indicates the
                                internally maintained ID of the audit filter for the
                                current session. A value of 0 means that the session has
                                no filter assigned.
                            </p><p style="color:blue;">此变量的会话值指示当前会话的审核筛选器的内部维护ID。值为0表示会话未分配筛选器。</p></li><li class="listitem"><p><a name="sysvar_audit_log_flush"></a>
                            <a class="indexterm" name="idm140286878478112"></a>

                            <a class="indexterm" name="idm140286878477104"></a>

                            <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a>
                        </p><p style="color:blue;">审核日志刷新</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_flush"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_flush">audit_log_flush</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Boolean</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">OFF</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                When this variable is set to enabled (1 or
                                <code class="literal">ON</code>), the audit log plugin closes and
                                reopens its log file to flush it. (The value remains
                                <code class="literal">OFF</code> so that you need not disable it
                                explicitly before enabling it again to perform another
                                flush.) Enabling this variable has no effect unless
                                <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                                is 0. For more information, see
                                <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                            </p><p style="color:blue;">当此变量设置为enabled（1或on）时，审核日志插件将关闭并重新打开其日志文件以刷新它。（该值保持为关闭状态，以便在再次启用该值以执行另一次刷新之前不必显式禁用该值。）启用此变量无效，除非audit-log-rotate-on-size为0。有关更多信息，请参阅第6.4.5.5节“审核日志记录配置”。</p></li><li class="listitem"><p><a name="sysvar_audit_log_format"></a>
                            <a class="indexterm" name="idm140286878445696"></a>

                            <a class="indexterm" name="idm140286878444688"></a>

                            <a class="link" href="security.html#sysvar_audit_log_format"><code class="literal">audit_log_format</code></a>
                        </p><p style="color:blue;">审核日志格式</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_format"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-format=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_format">audit_log_format</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">NEW</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span> (&gt;= 5.7.21)</td>
                                    <td><p class="valid-value"><code class="literal">OLD</code></p><p style="color:blue;">旧的</p><p class="valid-value"><code class="literal">NEW</code></p><p style="color:blue;">新</p><p class="valid-value"><code class="literal">JSON</code></p><p style="color:blue;">JSON格式</p></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span> (&gt;= 5.7.9, &lt;= 5.7.20)</td>
                                    <td><p class="valid-value"><code class="literal">OLD</code></p><p style="color:blue;">旧的</p><p class="valid-value"><code class="literal">NEW</code></p><p style="color:blue;">新</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The audit log file format. Permitted values are
                                <code class="literal">OLD</code> (old-style XML),
                                <code class="literal">NEW</code> (new-style XML; the default), and
                                (as of MySQL 5.7.21) <code class="literal">JSON</code>. For details
                                about each format, see
                                <a class="xref" href="security.html#audit-log-file-formats" title="6.4.5.4&nbsp;Audit Log File Formats">Section&nbsp;6.4.5.4, “Audit Log File Formats”</a>.
                            </p><p style="color:blue;">审核日志文件格式。允许的值有old（旧样式xml）、new（新样式xml；默认值）和json（从mysql 5.7.21开始）。有关每个格式的详细信息，请参阅第6.4.5.4节“审核日志文件格式”。</p>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    For information about issues to consider when changing
                                    the log format, see
                                    <a class="xref" href="security.html#audit-log-file-format" title="Audit Log File Format">Audit Log File Format</a>.
                                </p><p style="color:blue;">有关更改日志格式时要考虑的问题的信息，请参阅审核日志文件格式。</p>
                            </div>
                        </li><li class="listitem"><p><a name="sysvar_audit_log_include_accounts"></a>
                            <a class="indexterm" name="idm140286878399296"></a>

                            <a class="indexterm" name="idm140286878398192"></a>

                            <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                        </p><p style="color:blue;">审核日志包括帐户</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_include_accounts"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-include-accounts=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_include_accounts">audit_log_include_accounts</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>String</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">NULL</code></td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    This variable applies only to legacy mode audit log
                                    filtering (see
                                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>).
                                </p><p style="color:blue;">此变量仅适用于传统模式审核日志筛选（请参阅第6.4.5.8节“传统模式审核日志筛选”）。</p>
                            </div>
                            <p>
                                The accounts for which events should be logged. The value
                                should be <code class="literal">NULL</code> or a string containing a
                                list of one or more comma-separated account names. For
                                more information, see
                                <a class="xref" href="security.html#audit-log-filtering" title="6.4.5.6&nbsp;Audit Log Filtering">Section&nbsp;6.4.5.6, “Audit Log Filtering”</a>.
                            </p><p style="color:blue;">应记录事件的帐户。该值应为空或包含一个或多个逗号分隔的帐户名列表的字符串。有关详细信息，请参阅第6.4.5.6节“审核日志筛选”。</p><p>
                                Modifications to
                                <a class="link" href="security.html#sysvar_audit_log_include_accounts"><code class="literal">audit_log_include_accounts</code></a>
                                affect only connections created subsequent to the
                                modification, not existing connections.
                            </p><p style="color:blue;">对AuditLogLogyCopyDeCype帐户的修改仅影响修改后创建的连接，而不影响现有连接。</p></li><li class="listitem"><p><a name="sysvar_audit_log_policy"></a>
                            <a class="indexterm" name="idm140286878362368"></a>

                            <a class="indexterm" name="idm140286878361312"></a>

                            <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a>
                        </p><p style="color:blue;">审核日志策略</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_policy"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-policy=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_policy">audit_log_policy</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ALL</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">ALL</code></p><p style="color:blue;">全部</p><p class="valid-value"><code class="literal">LOGINS</code></p><p style="color:blue;">登录</p><p class="valid-value"><code class="literal">QUERIES</code></p><p style="color:blue;">查询</p><p class="valid-value"><code class="literal">NONE</code></p><p style="color:blue;">无</p></td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    This variable applies only to legacy mode audit log
                                    filtering (see
                                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>).
                                </p><p style="color:blue;">此变量仅适用于传统模式审核日志筛选（请参阅第6.4.5.8节“传统模式审核日志筛选”）。</p>
                            </div>
                            <p>
                                The policy controlling how the audit log plugin writes
                                events to its log file. The following table shows the
                                permitted values.
                            </p><p style="color:blue;">控制审核日志插件如何将事件写入其日志文件的策略。下表显示了允许的值。</p>
                            <div class="informaltable">
                                <table summary="Permitted values for the audit_log_policy variable."><colgroup><col width="15%"><col width="85%"></colgroup><thead><tr>
                                    <th scope="col">Value</th>
                                    <th scope="col">Description</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">ALL</code></td>
                                    <td>Log all events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">LOGINS</code></td>
                                    <td>Log only login events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">QUERIES</code></td>
                                    <td>Log only query events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">NONE</code></td>
                                    <td>Log nothing (disable the audit stream)</td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> can be
                                set only at server startup. At runtime, it is a read-only
                                variable. Two other system variables,
                                <a class="link" href="security.html#sysvar_audit_log_connection_policy"><code class="literal">audit_log_connection_policy</code></a>
                                and
                                <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>,
                                provide finer control over logging policy and can be set
                                either at startup or at runtime. If you use
                                <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> at
                                startup instead of the other two variables, the server
                                uses its value to set those variables. For more
                                information about the policy variables and their
                                interaction, see
                                <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                            </p><p style="color:blue;">审核日志策略只能在服务器启动时设置。在运行时，它是只读变量。另外两个系统变量audit_log_connection_policy和audit_log_statement_policy可以更好地控制日志策略，并且可以在启动或运行时进行设置。如果在启动时使用audit_log_策略而不是其他两个变量，服务器将使用其值设置这些变量。有关策略变量及其交互的更多信息，请参阅第6.4.5.5节“审核日志记录配置”。</p></li><li class="listitem"><p><a name="sysvar_audit_log_read_buffer_size"></a>
                            <a class="link" href="security.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
                        </p><p style="color:blue;">审核日志读取缓冲区大小</p><a class="indexterm" name="idm140286878297664"></a><a class="indexterm" name="idm140286878296560"></a>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_read_buffer_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-read-buffer-size=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.21</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_read_buffer_size">audit_log_read_buffer_size</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span> (&gt;= 5.7.23)</td>
                                    <td>Global, Session</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span> (&lt;= 5.7.22)</td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span> (&gt;= 5.7.23)</td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span> (&lt;= 5.7.22)</td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span> (&gt;= 5.7.23)</td>
                                    <td><code class="literal">32768</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span> (&lt;= 5.7.22)</td>
                                    <td><code class="literal">1048576</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span> (&gt;= 5.7.23)</td>
                                    <td><code class="literal">32768</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Minimum Value</strong></span> (&lt;= 5.7.22)</td>
                                    <td><code class="literal">1024</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Maximum Value</strong></span></td>
                                    <td><code class="literal">4194304</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The buffer size for reading from the audit log file, in
                                bytes. The <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a>
                                function reads no more than this many bytes. Log file
                                reading is supported only for JSON log format. For more
                                information, see <a class="xref" href="security.html#audit-log-file-reading" title="Audit Log File Reading">Audit Log File Reading</a>.
                            </p><p style="color:blue;">用于从审核日志文件读取的缓冲区大小（字节）。audit_log_read（）函数读取的字节数不超过此数。只有json日志格式才支持日志文件读取。有关详细信息，请参阅审核日志文件读取。</p><p>
                                As of MySQL 5.7.23, this variable has a default of 32KB
                                and can be set at runtime. Each client should set its
                                session value of
                                <a class="link" href="security.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
                                appropriately for its use of
                                <a class="link" href="security.html#udf_audit-log-read"><code class="literal">audit_log_read()</code></a>. Prior to
                                MySQL 5.7.23,
                                <a class="link" href="security.html#sysvar_audit_log_read_buffer_size"><code class="literal">audit_log_read_buffer_size</code></a>
                                has a default of 1MB, affects all clients, and can be
                                changed only at server startup.
                            </p><p style="color:blue;">从mysql 5.7.23开始，这个变量的默认值是32kb，可以在运行时设置。每个客户端都应该为其使用audit_log_read（）设置其audit_log_read缓冲区大小的会话值。在mysql 5.7.23之前，audit_log_read_buffer_size的默认值为1MB，影响所有客户端，并且只能在服务器启动时更改。</p></li><li class="listitem"><p><a name="sysvar_audit_log_rotate_on_size"></a>
                            <a class="indexterm" name="idm140286878241168"></a>

                            <a class="indexterm" name="idm140286878240096"></a>

                            <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                        </p><p style="color:blue;">审核日志旋转大小</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_rotate_on_size"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-rotate-on-size=#</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_rotate_on_size">audit_log_rotate_on_size</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Integer</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">0</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                If the
                                <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                                value is 0, the audit log plugin does not perform
                                automatic log file rotation. Instead, use
                                <a class="link" href="security.html#sysvar_audit_log_flush"><code class="literal">audit_log_flush</code></a> to close
                                and reopen the log on demand. In this case, manually
                                rename the file externally to the server before flushing
                                it.
                            </p><p style="color:blue;">如果audit_log_rotate_on_size值为0，则audit日志插件不会执行自动日志文件旋转。相反，使用audit_log_flush关闭并按需重新打开日志。在这种情况下，请在刷新文件之前在外部将其手动重命名为服务器。</p><p>
                                If the
                                <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                                value is greater than 0, automatic size-based log file
                                rotation occurs. Whenever a write to the log file causes
                                its size to exceed the
                                <a class="link" href="security.html#sysvar_audit_log_rotate_on_size"><code class="literal">audit_log_rotate_on_size</code></a>
                                value, the audit log plugin closes the current log file,
                                renames it, and opens a new log file.
                            </p><p style="color:blue;">如果audit_log_rotate_on_size值大于0，则会发生基于大小的日志文件自动旋转。每当对日志文件的写入导致其大小超过audit-log-rotate-on-size值时，audit-log插件将关闭当前日志文件，重命名它，并打开一个新的日志文件。</p><p>
                                For more information about audit log file rotation, see
                                <a class="xref" href="security.html#audit-log-space-management" title="Audit Log File Space Management and Name Rotation">Audit Log File Space Management and Name Rotation</a>.
                            </p><p style="color:blue;">有关审核日志文件旋转的详细信息，请参阅审核日志文件空间管理和名称旋转。</p><p>
                                If you set this variable to a value that is not a multiple
                                of 4096, it is truncated to the nearest multiple. (Thus,
                                setting it to a value less than 4096 has the effect of
                                setting it to 0 and no rotation occurs, except manually.)
                            </p><p style="color:blue;">如果将此变量设置为不是4096的倍数的值，则会将其截断为最接近的倍数。（因此，将其设置为小于4096的值会产生将其设置为0的效果，并且不会发生旋转，除非手动操作。）</p></li><li class="listitem"><p><a name="sysvar_audit_log_statement_policy"></a>
                            <a class="indexterm" name="idm140286878201216"></a>

                            <a class="indexterm" name="idm140286878200112"></a>

                            <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
                        </p><p style="color:blue;">审核日志声明策略</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_statement_policy"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-statement-policy=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_statement_policy">audit_log_statement_policy</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ALL</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">ALL</code></p><p style="color:blue;">全部</p><p class="valid-value"><code class="literal">ERRORS</code></p><p style="color:blue;">错误</p><p class="valid-value"><code class="literal">NONE</code></p><p style="color:blue;">无</p></td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    This variable applies only to legacy mode audit log
                                    filtering (see
                                    <a class="xref" href="security.html#audit-log-legacy-filtering" title="6.4.5.8&nbsp;Legacy Mode Audit Log Filtering">Section&nbsp;6.4.5.8, “Legacy Mode Audit Log Filtering”</a>).
                                </p><p style="color:blue;">此变量仅适用于传统模式审核日志筛选（请参阅第6.4.5.8节“传统模式审核日志筛选”）。</p>
                            </div>
                            <p>
                                The policy controlling how the audit log plugin writes
                                statement events to its log file. The following table
                                shows the permitted values.
                            </p><p style="color:blue;">控制审核日志插件如何将语句事件写入其日志文件的策略。下表显示了允许的值。</p>
                            <div class="informaltable">
                                <table summary="Permitted values for the audit_log_statement_policy variable."><colgroup><col width="15%"><col width="85%"></colgroup><thead><tr>
                                    <th scope="col">Value</th>
                                    <th scope="col">Description</th>
                                </tr></thead><tbody><tr>
                                    <td scope="row"><code class="literal">ALL</code></td>
                                    <td>Log all statement events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">ERRORS</code></td>
                                    <td>Log only failed statement events</td>
                                </tr><tr>
                                    <td scope="row"><code class="literal">NONE</code></td>
                                    <td>Do not log statement events</td>
                                </tr></tbody></table>
                            </div>
                            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                                <div class="admon-title">
                                    Note
                                </div>
                                <p>
                                    At server startup, any explicit value given for
                                    <a class="link" href="security.html#sysvar_audit_log_statement_policy"><code class="literal">audit_log_statement_policy</code></a>
                                    may be overridden if
                                    <a class="link" href="security.html#sysvar_audit_log_policy"><code class="literal">audit_log_policy</code></a> is
                                    also specified, as described in
                                    <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                                </p><p style="color:blue;">在服务器启动时，如果还指定了audit_log_policy（如第6.4.5.5节“audit log logging configuration”中所述），则为audit_log_statement_policy指定的任何显式值都可能被重写。</p>
                            </div>
                        </li><li class="listitem"><p><a name="sysvar_audit_log_strategy"></a>
                            <a class="indexterm" name="idm140286878143872"></a>

                            <a class="indexterm" name="idm140286878142832"></a>

                            <a class="link" href="security.html#sysvar_audit_log_strategy"><code class="literal">audit_log_strategy</code></a>
                        </p><p style="color:blue;">审计日志策略</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for audit_log_strategy"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--audit-log-strategy=value</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_audit_log_strategy">audit_log_strategy</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>No</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Enumeration</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ASYNCHRONOUS</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Valid Values</strong></span></td>
                                    <td><p class="valid-value"><code class="literal">ASYNCHRONOUS</code></p><p style="color:blue;">异步的</p><p class="valid-value"><code class="literal">PERFORMANCE</code></p><p style="color:blue;">性能</p><p class="valid-value"><code class="literal">SEMISYNCHRONOUS</code></p><p style="color:blue;">半同步</p><p class="valid-value"><code class="literal">SYNCHRONOUS</code></p><p style="color:blue;">同步的</p></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                The logging method used by the audit log plugin. These
                                strategy values are permitted:
                            </p><p style="color:blue;">审核日志插件使用的日志记录方法。这些策略值是允许的：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">ASYNCHRONOUS</code>: Log asynchronously.
                                    Wait for space in the output buffer.
                                </p><p style="color:blue;">异步：异步记录。等待输出缓冲区中的空间。</p></li><li class="listitem"><p>
                                    <code class="literal">PERFORMANCE</code>: Log asynchronously.
                                    Drop requests for which there is insufficient space in
                                    the output buffer.
                                </p><p style="color:blue;">性能：异步日志。删除输出缓冲区中空间不足的请求。</p></li><li class="listitem"><p>
                                    <code class="literal">SEMISYNCHRONOUS</code>: Log synchronously.
                                    Permit caching by the operating system.
                                </p><p style="color:blue;">半同步：日志同步。允许操作系统缓存。</p></li><li class="listitem"><p>
                                    <code class="literal">SYNCHRONOUS</code>: Log synchronously.
                                    Call <code class="filename">sync()</code> after each request.
                                </p><p style="color:blue;">同步：同步记录。每次请求后调用sync（）。</p></li></ul>
                            </div>
                        </li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="audit-log-status-variables"></a>Audit Log Status Variables</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        If the audit log plugin is enabled, it exposes several status
                        variables that provide operational information. These
                        variables are available for legacy mode audit filtering and
                        JSON mode audit filtering.
                    </p><p style="color:blue;">如果审计日志插件被启用，它将公开几个提供操作信息的状态变量。这些变量可用于传统模式审核筛选和json模式审核筛选。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Audit_log_current_size"></a>
                            <a class="indexterm" name="idm140286878095808"></a>

                            <a class="indexterm" name="idm140286878094768"></a>

                            <a class="link" href="security.html#statvar_Audit_log_current_size"><code class="literal">Audit_log_current_size</code></a>
                        </p><p style="color:blue;">审核日志当前大小</p><p>
                            The size of the current audit log file. The value
                            increases when an event is written to the log and is reset
                            to 0 when the log is rotated.
                        </p><p style="color:blue;">当前审核日志文件的大小。该值在事件写入日志时增加，在日志旋转时重置为0。</p></li><li class="listitem"><p><a name="statvar_Audit_log_event_max_drop_size"></a>
                            <a class="indexterm" name="idm140286878090176"></a>

                            <a class="indexterm" name="idm140286878089072"></a>

                            <a class="link" href="security.html#statvar_Audit_log_event_max_drop_size"><code class="literal">Audit_log_event_max_drop_size</code></a>
                        </p><p style="color:blue;">审核日志事件最大丢弃大小</p><p>
                            The size of the largest dropped event in performance
                            logging mode. For a description of logging modes, see
                            <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                        </p><p style="color:blue;">性能日志记录模式中最大丢弃事件的大小。有关日志记录模式的说明，请参阅第6.4.5.5节“审核日志记录配置”。</p></li><li class="listitem"><p><a name="statvar_Audit_log_events"></a>
                            <a class="indexterm" name="idm140286878083840"></a>

                            <a class="indexterm" name="idm140286878082800"></a>

                            <a class="link" href="security.html#statvar_Audit_log_events"><code class="literal">Audit_log_events</code></a>
                        </p><p style="color:blue;">审核日志事件</p><p>
                            The number of events handled by the audit log plugin,
                            whether or not they were written to the log based on
                            filtering policy (see
                            <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>).
                        </p><p style="color:blue;">审核日志插件处理的事件数，无论它们是否基于筛选策略写入日志（请参阅第6.4.5.5节“审核日志记录配置”）。</p></li><li class="listitem"><p><a name="statvar_Audit_log_events_filtered"></a>
                            <a class="indexterm" name="idm140286878077504"></a>

                            <a class="indexterm" name="idm140286878076400"></a>

                            <a class="link" href="security.html#statvar_Audit_log_events_filtered"><code class="literal">Audit_log_events_filtered</code></a>
                        </p><p style="color:blue;">已筛选审核日志事件</p><p>
                            The number of events handled by the audit log plugin that
                            were filtered (not written to the log) based on filtering
                            policy (see
                            <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>).
                        </p><p style="color:blue;">根据筛选策略筛选（未写入日志）的审核日志插件处理的事件数（请参阅第6.4.5.5节“审核日志记录配置”）。</p></li><li class="listitem"><p><a name="statvar_Audit_log_events_lost"></a>
                            <a class="indexterm" name="idm140286878071120"></a>

                            <a class="indexterm" name="idm140286878070080"></a>

                            <a class="link" href="security.html#statvar_Audit_log_events_lost"><code class="literal">Audit_log_events_lost</code></a>
                        </p><p style="color:blue;">审核日志事件丢失</p><p>
                            The number of events lost in performance logging mode
                            because an event was larger than than the available audit
                            log buffer space. This value may be useful for assessing
                            how to set
                            <a class="link" href="security.html#sysvar_audit_log_buffer_size"><code class="literal">audit_log_buffer_size</code></a> to
                            size the buffer for performance mode. For a description of
                            logging modes, see
                            <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                        </p><p style="color:blue;">性能日志记录模式中由于事件大于可用审核日志缓冲区空间而丢失的事件数。此值可能有助于评估如何设置审核日志缓冲区大小以调整性能模式的缓冲区大小。有关日志记录模式的说明，请参阅第6.4.5.5节“审核日志记录配置”。</p></li><li class="listitem"><p><a name="statvar_Audit_log_events_written"></a>
                            <a class="indexterm" name="idm140286878063344"></a>

                            <a class="indexterm" name="idm140286878062240"></a>

                            <a class="link" href="security.html#statvar_Audit_log_events_written"><code class="literal">Audit_log_events_written</code></a>
                        </p><p style="color:blue;">审核日志事件</p><p>
                            The number of events written to the audit log.
                        </p><p style="color:blue;">写入审核日志的事件数。</p></li><li class="listitem"><p><a name="statvar_Audit_log_total_size"></a>
                            <a class="indexterm" name="idm140286878057776"></a>

                            <a class="indexterm" name="idm140286878056736"></a>

                            <a class="link" href="security.html#statvar_Audit_log_total_size"><code class="literal">Audit_log_total_size</code></a>
                        </p><p style="color:blue;">审核日志总大小</p><p>
                            The total size of events written to all audit log files.
                            Unlike
                            <a class="link" href="security.html#statvar_Audit_log_current_size"><code class="literal">Audit_log_current_size</code></a>,
                            the value of
                            <a class="link" href="security.html#statvar_Audit_log_total_size"><code class="literal">Audit_log_total_size</code></a>
                            increases even when the log is rotated.
                        </p><p style="color:blue;">写入所有审核日志文件的事件的总大小。与audit_log_current_size不同，audit_log_total_size的值即使在日志旋转时也会增加。</p></li><li class="listitem"><p><a name="statvar_Audit_log_write_waits"></a>
                            <a class="indexterm" name="idm140286878049616"></a>

                            <a class="indexterm" name="idm140286878048576"></a>

                            <a class="link" href="security.html#statvar_Audit_log_write_waits"><code class="literal">Audit_log_write_waits</code></a>
                        </p><p style="color:blue;">审核日志写入等待</p><p>
                            The number of times an event had to wait for space in the
                            audit log buffer in asynchronous logging mode. For a
                            description of logging modes, see
                            <a class="xref" href="security.html#audit-log-logging-configuration" title="6.4.5.5&nbsp;Audit Log Logging Configuration">Section&nbsp;6.4.5.5, “Audit Log Logging Configuration”</a>.
                        </p><p style="color:blue;">在异步日志记录模式下，事件必须在审核日志缓冲区中等待空间的次数。有关日志记录模式的说明，请参阅第6.4.5.5节“审核日志记录配置”。</p></li></ul>
                    </div>

                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="audit-log-restrictions"></a>6.4.5.10&nbsp;Audit Log Restrictions</h4>

                        </div>

                    </div>

                </div>
                <p>
                    MySQL Enterprise Audit is subject to these general restrictions:
                </p><p style="color:blue;">mysql企业审计受到以下一般限制：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Only SQL statements are logged. Changes made by no-SQL APIs,
                        such as memcached, Node.JS, and the NDB API, are not logged.
                    </p><p style="color:blue;">只记录SQL语句。不记录任何sql api（如memcached、node.js和ndb api）所做的更改。</p></li><li class="listitem"><p>
                        Only top-level statements are logged, not statements within
                        stored programs such as triggers or stored procedures.
                    </p><p style="color:blue;">只记录顶级语句，而不记录存储程序（如触发器或存储过程）中的语句。</p></li><li class="listitem"><p>
                        Contents of files referenced by statements such as
                        <a class="link" href="sql-syntax.html#load-data" title="13.2.6&nbsp;LOAD DATA Syntax"><code class="literal">LOAD DATA</code></a> are not logged.
                    </p><p style="color:blue;">不记录由语句（如加载数据）引用的文件的内容。</p></li><li class="listitem"><p>
                        Prior to MySQL 5.7.21, MySQL Enterprise Audit uses
                        <code class="literal">MyISAM</code> tables in the
                        <code class="literal">mysql</code> system database. Group Replication
                        does not support <code class="literal">MyISAM</code> tables.
                        Consequently, MySQL Enterprise Audit and Group Replication cannot be used
                        together.
                    </p><p style="color:blue;">在mysql 5.7.21之前，mysql企业审计使用mysql系统数据库中的myisam表。组复制不支持myisam表。因此，mysql企业审计和组复制不能一起使用。</p><a class="indexterm" name="idm140286878035024"></a><a class="indexterm" name="idm140286878033536"></a></li></ul>
                </div>
                <p><b>NDB Cluster.&nbsp;</b>
                    It is possible to use MySQL Enterprise Audit with MySQL NDB Cluster,
                    subject to the following conditions:
                </p><p style="color:blue;">ndb集群。在以下条件下，可以将mysql enterprise audit与mysql ndb cluster一起使用：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        All changes to be logged must be done using the SQL
                        interface. Changes using no-SQL interfaces, such as those
                        provided by the NDB API, memcached, or ClusterJ, are not
                        logged.
                    </p><p style="color:blue;">所有要记录的更改都必须使用sql接口完成。不记录使用非sql接口的更改，如ndb api、memcached或clusterj提供的更改。</p></li><li class="listitem"><p>
                        The plugin must be installed on each MySQL server that is
                        used to execute SQL on the cluster.
                    </p><p style="color:blue;">插件必须安装在用于在集群上执行sql的每个mysql服务器上。</p></li><li class="listitem"><p>
                        Audit plugin data must be aggregated amongst all MySQL
                        servers used with the cluster. This aggregation is the
                        responsibility of the application or user.
                    </p><p style="color:blue;">审核插件数据必须在集群使用的所有mysql服务器之间聚合。此聚合由应用程序或用户负责。</p></li></ul>
                </div>

            </div>

        </div>

        <div class="section">

            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="firewall"></a>6.4.6&nbsp;MySQL Enterprise Firewall</h3>

                    </div>

                </div>

            </div>

            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#firewall-components">6.4.6.1 MySQL Enterprise Firewall Components</a></span></dt><dt><span class="section"><a href="security.html#firewall-installation">6.4.6.2 Installing or Uninstalling MySQL Enterprise Firewall</a></span></dt><dt><span class="section"><a href="security.html#firewall-usage">6.4.6.3 Using MySQL Enterprise Firewall</a></span></dt><dt><span class="section"><a href="security.html#firewall-reference">6.4.6.4 MySQL Enterprise Firewall Reference</a></span></dt></dl>
            </div>
            <a class="indexterm" name="idm140286878025744"></a><a class="indexterm" name="idm140286878024688"></a>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                <div class="admon-title">
                    Note
                </div>
                <p>
                    MySQL Enterprise Firewall is an extension included in MySQL Enterprise Edition, a commercial product.
                    To learn more about commercial products, see
                    <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                </p><p style="color:blue;">mysql企业防火墙是商业产品mysql企业版中的一个扩展。有关商业产品的更多信息，请参见https://www.mysql.com/products/。</p>
            </div>
            <p>
                MySQL Enterprise Edition includes MySQL Enterprise Firewall, an application-level firewall that enables
                database administrators to permit or deny SQL statement execution
                based on matching against whitelists of accepted statement
                patterns. This helps harden MySQL Server against attacks such as
                SQL injection or attempts to exploit applications by using them
                outside of their legitimate query workload characteristics.
            </p><p style="color:blue;">mysql enterprise edition包括mysql enterprise firewall，这是一个应用程序级防火墙，它使数据库管理员能够根据与已接受的语句模式白名单的匹配来允许或拒绝sql语句的执行。这有助于加强mysql服务器抵御诸如sql注入之类的攻击，或者通过在合法的查询工作负载特征之外使用应用程序来利用它们。</p><p>
            Each MySQL account registered with the firewall has its own
            statement whitelist, enabling protection to be tailored per
            account. For a given account, the firewall can operate in
            recording, protecting, or detecting mode, for training in the
            accepted statement patterns, active protection against
            unacceptable statements, or passive detection of unacceptable
            statements. The diagram illustrates how the firewall processes
            incoming statements in each mode.
        </p><p style="color:blue;">在防火墙注册的每个mysql帐户都有自己的语句白名单，可以为每个帐户定制保护。对于给定的帐户，防火墙可以在记录、保护或检测模式下运行，以进行接受语句模式的培训、针对不可接受语句的主动保护或对不可接受语句的被动检测。该图说明了防火墙如何在每种模式下处理传入的语句。</p>
            <div class="figure">
                <a name="firewall-diagram"></a><p class="title"><b>Figure&nbsp;6.1&nbsp;MySQL Enterprise Firewall Operation</b></p><p style="color:blue;">图6.1 MySQL企业防火墙操作</p>
                <div class="figure-contents">

                    <div class="mediaobject">
                        <img src="images/firewall-diagram-1.png" width="682" height="481" alt="Flow chart showing how MySQL Enterprise Firewall processes incoming SQL statements in recording, protecting, and detecting modes.">
                    </div>

                </div>

            </div>
            <br class="figure-break"><p>
            The following sections describe the components of MySQL Enterprise Firewall, discuss
            how to install and use it, and provide reference information for
            its components.
        </p><p style="color:blue;">以下各节介绍mysql企业防火墙的组件，讨论如何安装和使用它，并为其组件提供参考信息。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="firewall-components"></a>6.4.6.1&nbsp;MySQL Enterprise Firewall Components</h4>
                        </div>
                    </div>
                </div>
                <p>
                    MySQL Enterprise Firewall is based on a plugin library that implements these
                    components:
                </p><p style="color:blue;">mysql enterprise firewall基于实现以下组件的插件库：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        A server-side plugin named <code class="literal">MYSQL_FIREWALL</code>
                        examines SQL statements before they execute and, based on
                        its in-memory cache, renders a decision whether to execute
                        or reject each statement.
                    </p><p style="color:blue;">一个名为mysql_firewall的服务器端插件在sql语句执行之前检查它们，并根据其内存缓存来决定是否执行或拒绝每个语句。</p></li><li class="listitem"><p>
                        Server-side plugins named
                        <code class="literal">MYSQL_FIREWALL_USERS</code> and
                        <code class="literal">MYSQL_FIREWALL_WHITELIST</code> implement
                        <code class="literal">INFORMATION_SCHEMA</code> tables that provide
                        views into the firewall data cache.
                    </p><p style="color:blue;">名为mysql_firewall_users和mysql_firewall_whitelist的服务器端插件实现了将视图提供到防火墙数据缓存中的信息架构表。</p></li><li class="listitem"><p>
                        System tables named <code class="literal">firewall_users</code> and
                        <code class="literal">firewall_whitelist</code> in the
                        <code class="literal">mysql</code> database provide persistent storage
                        of firewall data.
                    </p><p style="color:blue;">mysql数据库中名为firewall_users和firewall_whitelist的系统表提供防火墙数据的持久存储。</p></li><li class="listitem"><p>
                        Stored procedures named
                        <code class="literal">sp_set_firewall_mode()</code> and
                        <code class="literal">sp_reload_firewall_rules()</code> perform tasks
                        such as registering MySQL accounts with the firewall,
                        establishing their operational mode, and managing transfer
                        of firewall data between the cache and the underlying system
                        tables.
                    </p><p style="color:blue;">名为sp_set_firewall_mode（）和sp_reload_firewall_rules（）的存储过程执行以下任务：在防火墙中注册mysql帐户、建立其操作模式以及管理缓存与底层系统表之间的防火墙数据传输。</p></li><li class="listitem"><p>
                        A set of user-defined functions provides an SQL-level API
                        for lower-level tasks such as synchronizing the cache with
                        the underlying system tables.
                    </p><p style="color:blue;">一组用户定义的函数为低级任务（如将缓存与底层系统表同步）提供了sql级别的api。</p></li><li class="listitem"><p>
                        System variables enable firewall configuration and status
                        variables provide runtime operational information.
                    </p><p style="color:blue;">系统变量启用防火墙配置，状态变量提供运行时操作信息。</p></li></ul>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="firewall-installation"></a>6.4.6.2&nbsp;Installing or Uninstalling MySQL Enterprise Firewall</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286877996960"></a><a class="indexterm" name="idm140286877995488"></a><p>
                MySQL Enterprise Firewall installation is a one-time operation that installs the
                components described in <a class="xref" href="security.html#firewall-components" title="6.4.6.1&nbsp;MySQL Enterprise Firewall Components">Section&nbsp;6.4.6.1, “MySQL Enterprise Firewall Components”</a>.
                Installation can be performed using a graphical interface or
                manually:
            </p><p style="color:blue;">mysql enterprise firewall installation是一个一次性操作，用于安装第6.4.6.1节“mysql enterprise firewall components”中描述的组件。可以使用图形界面或手动执行安装：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        On Windows, MySQL Installer includes an option to enable MySQL Enterprise Firewall for
                        you.
                    </p><p style="color:blue;">在windows上，mysql安装程序包含一个选项，可以为您启用mysql企业防火墙。</p></li><li class="listitem"><p>
                        MySQL Workbench 6.3.4 or higher can install MySQL Enterprise Firewall, enable or
                        disable an installed firewall, or uninstall the firewall.
                    </p><p style="color:blue;">mysql workbench 6.3.4或更高版本可以安装mysql企业防火墙、启用或禁用已安装的防火墙或卸载防火墙。</p></li><li class="listitem"><p>
                        Manual MySQL Enterprise Firewall installation involves running a script located
                        in the <code class="filename">share</code> directory of your MySQL
                        installation.
                    </p><p style="color:blue;">手动安装mysql企业防火墙需要运行mysql安装的共享目录中的脚本。</p></li></ul>
                </div>
                <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Important
                    </div>
                    <p>
                        Read this entire section before following its instructions.
                        Parts of the procedure differ depending on your environment.
                    </p><p style="color:blue;">在遵循说明之前，请阅读整个章节。程序的部分内容因环境而异。</p>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        If installed, MySQL Enterprise Firewall involves some minimal overhead even when
                        disabled. To avoid this overhead, do not install the firewall
                        unless you plan to use it.
                    </p><p style="color:blue;">如果安装了mysql enterprise firewall，即使禁用了它，也只会占用很少的开销。为了避免这种开销，除非计划使用防火墙，否则不要安装它。</p>
                </div>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        MySQL Enterprise Firewall does not work together with the query cache. If the
                        query cache is enabled, disable it before installing the
                        firewall (see <a class="xref" href="optimization.html#query-cache-configuration" title="8.10.3.3&nbsp;Query Cache Configuration">Section&nbsp;8.10.3.3, “Query Cache Configuration”</a>).
                    </p><p style="color:blue;">mysql企业防火墙不能与查询缓存一起工作。如果已启用查询缓存，请在安装防火墙之前将其禁用（请参阅第8.10.3.3节“查询缓存配置”）。</p>
                </div>
                <p>
                    For usage instructions, see <a class="xref" href="security.html#firewall-usage" title="6.4.6.3&nbsp;Using MySQL Enterprise Firewall">Section&nbsp;6.4.6.3, “Using MySQL Enterprise Firewall”</a>.
                    For reference information, see
                    <a class="xref" href="security.html#firewall-reference" title="6.4.6.4&nbsp;MySQL Enterprise Firewall Reference">Section&nbsp;6.4.6.4, “MySQL Enterprise Firewall Reference”</a>.
                </p><p style="color:blue;">有关使用说明，请参阅第6.4.6.3节“使用MySQL企业防火墙”。有关参考信息，请参阅第6.4.6.4节“MySQL企业防火墙参考”。</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#firewall-install" title="Installing MySQL Enterprise Firewall">Installing MySQL Enterprise Firewall</a></p><p style="color:blue;">安装mysql企业防火墙</p></li><li class="listitem"><p><a class="xref" href="security.html#firewall-uninstall" title="Uninstalling MySQL Enterprise Firewall">Uninstalling MySQL Enterprise Firewall</a></p><p style="color:blue;">卸载mysql企业防火墙</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="firewall-install"></a>Installing MySQL Enterprise Firewall</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        If MySQL Enterprise Firewall is already installed from an older version of MySQL,
                        uninstall it using the instructions given later in this
                        section and then restart your server before installing the
                        current version. In this case, it is also necessary to
                        register your configuration again.
                    </p><p style="color:blue;">如果mysql enterprise firewall已经从较旧版本的mysql安装，请使用本节后面给出的说明将其卸载，然后在安装当前版本之前重新启动服务器。在这种情况下，还需要再次注册配置。</p><p>
                    On Windows, you can use MySQL Installer to install MySQL Enterprise Firewall, as shown in
                    <a class="xref" href="security.html#firewall-installation-windows-installer" title="Figure&nbsp;6.2&nbsp;MySQL Enterprise Firewall Installation on Windows">Figure&nbsp;6.2, “MySQL Enterprise Firewall Installation on Windows”</a>.
                    Check the <span class="guilabel">Enable Enterprise Firewall</span>
                    checkbox. (<span class="guilabel">Open Firewall port for network
          access</span> has a different purpose. It refers to
                    Windows Firewall and controls whether Windows blocks the
                    TCP/IP port on which the MySQL server listens for client
                    connections.)
                </p><p style="color:blue;">在windows上，可以使用mysql安装程序安装mysql企业防火墙，如图6.2“mysql企业防火墙在windows上的安装”所示。选中启用企业防火墙复选框。（用于网络访问的开放防火墙端口有不同的用途。它引用Windows防火墙并控制Windows是否阻止MySQL服务器侦听客户端连接的TCP/IP端口。）</p>
                    <div class="figure">
                        <a name="firewall-installation-windows-installer"></a><p class="title"><b>Figure&nbsp;6.2&nbsp;MySQL Enterprise Firewall Installation on Windows</b></p><p style="color:blue;">图6.2 Windows上的MySQL企业防火墙安装</p>
                        <div class="figure-contents">

                            <div class="mediaobject">
                                <img src="images/firewall-windows-installer-option.png" width="801" height="602" alt="Content is described in the surrounding text.">
                            </div>

                        </div>

                    </div>
                    <br class="figure-break"><p>
                    To install MySQL Enterprise Firewall using MySQL Workbench 6.3.4 or higher, see
                    <a class="ulink" href="https://dev.mysql.com/doc/workbench/en/wb-mysql-firewall.html" target="_top">MySQL Enterprise Firewall Interface</a>.
                </p><p style="color:blue;">要使用mysql workbench 6.3.4或更高版本安装mysql企业防火墙，请参阅mysql企业防火墙接口。</p><p>
                    To install MySQL Enterprise Firewall manually, look in the
                    <code class="filename">share</code> directory of your MySQL
                    installation and choose the script that is appropriate for
                    your platform. The available scripts differ in the suffix used
                    to refer to the plugin library file:
                </p><p style="color:blue;">要手动安装mysql企业防火墙，请查看mysql安装的共享目录，然后选择适合您的平台的脚本。可用的脚本在用于引用插件库文件的后缀上有所不同：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="filename">win_install_firewall.sql</code>: Choose this
                            script for Windows systems that use
                            <code class="filename">.dll</code> as the file name suffix.
                        </p><p style="color:blue;">win_install_firewall.sql:为使用.dll作为文件名后缀的Windows系统选择此脚本。</p></li><li class="listitem"><p>
                            <code class="filename">linux_install_firewall.sql</code>: Choose
                            this script for Linux and similar systems that use
                            <code class="filename">.so</code> as the file name suffix.
                        </p><p style="color:blue;">linux_install_firewall.sql：为Linux和使用.so作为文件名后缀的类似系统选择此脚本。</p></li></ul>
                    </div>
                    <p>
                        The installation script creates stored procedures in the
                        default database, so choose a database to use. Then run the
                        script as follows, naming the chosen database on the command
                        line. The example here uses the <code class="literal">mysql</code>
                        database and the Linux installation script. Make the
                        appropriate substitutions for your system.
                    </p><p style="color:blue;">安装脚本在默认数据库中创建存储过程，因此请选择要使用的数据库。然后按如下方式运行脚本，在命令行中命名所选数据库。这里的示例使用mysql数据库和linux安装脚本。为你的系统做适当的替换。</p><pre data-lang="terminal" class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root -p mysql &lt; linux_install_firewall.sql</code></strong>
Enter password: <em class="replaceable"><code>(enter root password here)</code></em>
</pre>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            As of MySQL 5.7.21, for a new installation of MySQL Enterprise Firewall,
                            <code class="literal">InnoDB</code> is used instead of
                            <code class="literal">MyISAM</code> for the firewall tables. For
                            upgrades to 5.7.21 or higher of an installation for which
                            MySQL Enterprise Firewall is already installed, it is recommended that you
                            alter the firewall tables to use <code class="literal">InnoDB</code>:
                        </p><p style="color:blue;">从mysql 5.7.21开始，对于mysql企业防火墙的新安装，防火墙表使用innodb而不是myisam。对于已经安装了mysql enterprise firewall的安装升级到5.7.21或更高版本，建议您更改防火墙表以使用innodb：</p><pre data-lang="sql" class="programlisting">ALTER TABLE mysql.firewall_users ENGINE=InnoDB;
ALTER TABLE mysql.firewall_whitelist ENGINE=InnoDB;
</pre>
                    </div>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            To use MySQL Enterprise Firewall in the context of master/slave replication,
                            Group Replication, or InnoDB cluster, you must use MySQL
                            5.7.21 or higher, and ensure that the firewall tables use
                            <code class="literal">InnoDB</code> as just described. Then you must
                            prepare the slave or secondary nodes prior to running the
                            installation script on the master or primary node. This is
                            necessary because the <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL
                            PLUGIN</code></a> statements in the script are not
                            replicated.
                        </p><p style="color:blue;">要在主/从复制、组复制或innodb集群的上下文中使用mysql enterprise firewall，必须使用mysql 5.7.21或更高版本，并确保防火墙表使用innodb，如前所述。然后，在主节点或主节点上运行安装脚本之前，必须准备从节点或辅助节点。这是必要的，因为脚本中的install plugin语句不会被复制。</p>
                        <div class="orderedlist">
                            <ol class="orderedlist" type="1"><li class="listitem"><p>
                                On each slave or secondary node, extract the
                                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> statements
                                from the installation script and execute them manually.
                            </p><p style="color:blue;">在每个从节点或辅助节点上，从安装脚本中提取install plugin语句并手动执行它们。</p></li><li class="listitem"><p>
                                On the master or primary node, run the installation
                                script as described previously.
                            </p><p style="color:blue;">在主节点或主节点上，如前所述运行安装脚本。</p></li></ol>
                        </div>

                    </div>
                    <p>
                        Installing MySQL Enterprise Firewall either using a graphical interface or
                        manually should enable the firewall. To verify that, connect
                        to the server and execute this statement:
                    </p><p style="color:blue;">使用图形界面或手动安装mysql企业防火墙应启用防火墙。要验证，请连接到服务器并执行以下语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GLOBAL VARIABLES LIKE 'mysql_firewall_mode';</code></strong>
+---------------------+-------+
| Variable_name       | Value |
+---------------------+-------+
| mysql_firewall_mode | ON    |
+---------------------+-------+
</pre><p>
                    If the plugin failed to initialize, check the server error log
                    for diagnostic messages.
                </p><p style="color:blue;">如果插件未能初始化，请检查服务器错误日志中的诊断消息。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="firewall-uninstall"></a>Uninstalling MySQL Enterprise Firewall</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL Enterprise Firewall can be uninstalled using MySQL Workbench or manually.
                    </p><p style="color:blue;">mysql企业防火墙可以使用mysql工作台卸载，也可以手动卸载。</p><p>
                    To uninstall MySQL Enterprise Firewall using MySQL Workbench 6.3.4 or higher, see
                    <a class="ulink" href="https://dev.mysql.com/doc/workbench/en/wb-mysql-firewall.html" target="_top">MySQL Enterprise Firewall Interface</a>.
                </p><p style="color:blue;">要使用mysql workbench 6.3.4或更高版本卸载mysql企业防火墙，请参阅mysql企业防火墙接口。</p><p>
                    To uninstall MySQL Enterprise Firewall manually, execute the following
                    statements. It is assumed that the stored procedures were
                    created in the <code class="literal">mysql</code> database. Adjust the
                    <a class="link" href="sql-syntax.html#drop-procedure" title="13.1.27&nbsp;DROP PROCEDURE and DROP FUNCTION Syntax"><code class="literal">DROP PROCEDURE</code></a> statements
                    appropriately if the procedures were created in a different
                    database.
                </p><p style="color:blue;">要手动卸载mysql enterprise firewall，请执行以下语句。假设存储过程是在mysql数据库中创建的。如果过程是在其他数据库中创建的，请适当调整DROP PROCEDURE语句。</p><pre data-lang="sql" class="programlisting">DROP TABLE mysql.firewall_whitelist;
DROP TABLE mysql.firewall_users;
UNINSTALL PLUGIN mysql_firewall;
UNINSTALL PLUGIN mysql_firewall_whitelist;
UNINSTALL PLUGIN mysql_firewall_users;
DROP FUNCTION set_firewall_mode;
DROP FUNCTION normalize_statement;
DROP FUNCTION read_firewall_whitelist;
DROP FUNCTION read_firewall_users;
DROP FUNCTION mysql_firewall_flush_status;
DROP PROCEDURE mysql.sp_set_firewall_mode;
DROP PROCEDURE mysql.sp_reload_firewall_rules;
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="firewall-usage"></a>6.4.6.3&nbsp;Using MySQL Enterprise Firewall</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286877934560"></a><p>
                Before using MySQL Enterprise Firewall, install it according to the instructions
                provided in <a class="xref" href="security.html#firewall-installation" title="6.4.6.2&nbsp;Installing or Uninstalling MySQL Enterprise Firewall">Section&nbsp;6.4.6.2, “Installing or Uninstalling MySQL Enterprise Firewall”</a>. Also,
                MySQL Enterprise Firewall does not work together with the query cache; disable the
                query cache if it is enabled (see
                <a class="xref" href="optimization.html#query-cache-configuration" title="8.10.3.3&nbsp;Query Cache Configuration">Section&nbsp;8.10.3.3, “Query Cache Configuration”</a>).
            </p><p style="color:blue;">在使用mysql企业防火墙之前，请按照6.4.6.2节“安装或卸载mysql企业防火墙”中提供的说明进行安装。此外，mysql enterprise firewall不与查询缓存一起工作；如果启用了查询缓存，请禁用它（请参阅第8.10.3.3节“查询缓存配置”）。</p><p>
                This section describes how to configure MySQL Enterprise Firewall using SQL
                statements. Alternatively, MySQL Workbench 6.3.4 or higher provides
                a graphical interface for firewall control. See
                <a class="ulink" href="https://dev.mysql.com/doc/workbench/en/wb-mysql-firewall.html" target="_top">MySQL Enterprise Firewall Interface</a>.
            </p><p style="color:blue;">本节介绍如何使用sql语句配置mysql企业防火墙。或者，mysql workbench 6.3.4或更高版本为防火墙控制提供了图形界面。请参阅mysql企业防火墙接口。</p><p>
                To enable or disable the firewall, set the
                <a class="link" href="security.html#sysvar_mysql_firewall_mode"><code class="literal">mysql_firewall_mode</code></a> system
                variable. By default, this variable is enabled when the firewall
                is installed. To control the initial firewall state explicitly,
                you can set the variable at server startup. For example, to
                enable the firewall in an option file, use these lines:
            </p><p style="color:blue;">要启用或禁用防火墙，请设置mysql_firewall_mode系统变量。默认情况下，此变量在安装防火墙时启用。要显式控制初始防火墙状态，可以在服务器启动时设置变量。例如，要在选项文件中启用防火墙，请使用以下行：</p><pre data-lang="ini" class="programlisting">[mysqld]
mysql_firewall_mode=ON
</pre><p>
                It is also possible to disable or enable the firewall at
                runtime:
            </p><p style="color:blue;">也可以在运行时禁用或启用防火墙：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SET GLOBAL mysql_firewall_mode = OFF;</code></strong>
mysql&gt; <strong class="userinput"><code>SET GLOBAL mysql_firewall_mode = ON;</code></strong>
</pre><p>
                In addition to the global on/off firewall mode, each account
                registered with the firewall has its own operational mode. For
                an account in recording mode, the firewall learns an
                application's <span class="quote">“<span class="quote">fingerprint,</span>”</span> that is, the
                acceptable statement patterns that, taken together, form a
                whitelist. After training, switch the firewall to protecting
                mode to harden MySQL against access by statements that deviate
                from the fingerprint. For additional training, switch the
                firewall back to recording mode as necessary to update the
                whitelist with new statement patterns. An intrusion-detection
                mode is available that writes suspicious statements to the error
                log but does not deny access.
            </p><p style="color:blue;">除了全局开/关防火墙模式外，在防火墙注册的每个帐户都有自己的操作模式。对于处于记录模式的帐户，防火墙将学习应用程序的“指纹”，即可接受的语句模式，这些模式结合在一起形成白名单。经过培训后，将防火墙切换到保护模式，以加强mysql对偏离指纹的语句的访问。对于其他培训，根据需要将防火墙切换回录制模式，以使用新的语句模式更新白名单。入侵检测模式可用于将可疑语句写入错误日志，但不拒绝访问。</p><p>
                The firewall maintains whitelist rules on a per-account basis,
                enabling implementation of protection strategies such as these:
            </p><p style="color:blue;">防火墙以每个帐户为基础维护白名单规则，从而实现以下保护策略：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        For an application that has unique protection requirements,
                        configure it to use an account that is not used for any
                        other purpose.
                    </p><p style="color:blue;">对于具有唯一保护要求的应用程序，请将其配置为使用不用于任何其他用途的帐户。</p></li><li class="listitem"><p>
                        For applications that are related and share protection
                        requirements, configure them as a group to use the same
                        account.
                    </p><p style="color:blue;">对于相关且共享保护要求的应用程序，将它们配置为一个组以使用相同的帐户。</p></li></ul>
                </div>
                <p>
                    Firewall operation is based on conversion of SQL statements to
                    normalized digest form. Firewall digests are like the statement
                    digests used by the Performance Schema (see
                    <a class="xref" href="performance-schema.html#performance-schema-statement-digests" title="25.10&nbsp;Performance Schema Statement Digests">Section&nbsp;25.10, “Performance Schema Statement Digests”</a>).
                    However, unlike the Performance Schema, the relevant
                    digest-related system variable is
                    <a class="link" href="server-administration.html#sysvar_max_digest_length"><code class="literal">max_digest_length</code></a>.
                </p><p style="color:blue;">防火墙操作基于将sql语句转换为规范化摘要形式。防火墙摘要类似于性能模式使用的语句摘要（请参阅25.10节，“性能模式语句摘要”）。但是，与性能模式不同，与摘要相关的系统变量是max_digest_length。</p><p>
                For a connection from a registered account, the firewall
                converts each incoming statement to normalized form and
                processes it according to the account mode:
            </p><p style="color:blue;">对于来自注册帐户的连接，防火墙将每个传入的语句转换为规范化格式，并根据帐户模式对其进行处理：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        In recording mode, the firewall adds the normalized
                        statement to the account whitelist rules.
                    </p><p style="color:blue;">在录制模式下，防火墙将规范化语句添加到帐户白名单规则中。</p></li><li class="listitem"><p>
                        In protecting mode, the firewall compares the normalized
                        statement to the account whitelist rules. If there is a
                        match, the statement passes and the server continues to
                        process it. Otherwise, the server rejects the statement and
                        returns an error to the client. The firewall also writes the
                        rejected statement to the error log if the
                        <a class="link" href="security.html#sysvar_mysql_firewall_trace"><code class="literal">mysql_firewall_trace</code></a> system
                        variable is enabled.
                    </p><p style="color:blue;">在保护模式下，防火墙将规范化语句与帐户白名单规则进行比较。如果存在匹配项，则语句通过，服务器继续处理它。否则，服务器将拒绝该语句并向客户端返回错误。如果启用mysql_firewall_trace系统变量，防火墙还会将被拒绝的语句写入错误日志。</p></li><li class="listitem"><p>
                        In detecting mode, the firewall matches statements as in
                        protecting mode, but writes nonmatching statements to the
                        error log without denying access.
                    </p><p style="color:blue;">在检测模式下，防火墙与保护模式下的语句匹配，但在不拒绝访问的情况下将非匹配语句写入错误日志。</p></li></ul>
                </div>
                <p>
                    Accounts that have a mode of <code class="literal">OFF</code> or are not
                    registered with the firewall are ignored by it.
                </p><p style="color:blue;">具有关闭模式或未在防火墙中注册的帐户将被忽略。</p><p>
                To protect an account using MySQL Enterprise Firewall, follow these steps:
            </p><p style="color:blue;">要使用MySQL企业防火墙保护帐户，请执行以下步骤：</p>
                <div class="orderedlist">
                    <ol class="orderedlist" type="1"><li class="listitem"><p>
                        Register the account and put it in recording mode.
                    </p><p style="color:blue;">注册帐户并将其置于录制模式。</p></li><li class="listitem"><p>
                        Connect to the MySQL server using the registered account and
                        execute statements to be learned. This establishes the
                        account's whitelist of accepted statements.
                    </p><p style="color:blue;">使用注册的帐户连接到mysql服务器并执行要学习的语句。这将建立帐户的白名单接受的声明。</p></li><li class="listitem"><p>
                        Switch the registered account to protecting mode.
                    </p><p style="color:blue;">将注册帐户切换到保护模式。</p></li></ol>
                </div>
                <p>
                    The following example shows how to register an account with the
                    firewall, use the firewall to learn acceptable statements for
                    that account, and protect the account against execution of
                    unacceptable statements. The example account,
                    <code class="literal">'fwuser'@'localhost'</code>, is for use by an
                    application that accesses tables in the
                    <code class="literal">sakila</code> database. (This database is available
                    at <a class="ulink" href="https://dev.mysql.com/doc/index-other.html" target="_top">https://dev.mysql.com/doc/index-other.html</a>.)
                </p><p style="color:blue;">下面的示例演示如何向防火墙注册帐户，使用防火墙学习该帐户的可接受语句，并保护该帐户不受不可接受语句的执行。示例帐户“fwuser”@“localhost”供访问sakila数据库中的表的应用程序使用。（此数据库位于https://dev.mysql.com/doc/index other.html。）</p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                    <div class="admon-title">
                        Note
                    </div>
                    <p>
                        The user and host parts of the account name are quoted
                        separately for statements such as <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2&nbsp;CREATE USER Syntax"><code class="literal">CREATE
                        USER</code></a> and <a class="link" href="sql-syntax.html#grant" title="13.7.1.4&nbsp;GRANT Syntax"><code class="literal">GRANT</code></a>,
                        whereas to specify an account for use with a firewall
                        component, name it as a single quoted string
                        <code class="literal">'fwuser@localhost'</code>.
                    </p><p style="color:blue;">对于create user和grant等语句，帐户名的用户部分和主机部分是分别引用的，而要指定用于防火墙组件的帐户，请将其命名为单引号字符串“fwuser@localhost”。</p><p>
                    The convention for naming accounts as a single quoted string
                    for firewall components means that you cannot use accounts
                    that have embedded <code class="literal">@</code> characters in the user
                    name.
                </p><p style="color:blue;">将帐户命名为防火墙组件的单引号字符串的约定意味着您不能使用在用户名中嵌入@字符的帐户。</p>
                </div>
                <p>
                    Perform the steps in the following procedure using an
                    administrative MySQL account, except those designated for
                    execution by the account registered with the firewall. The
                    default database should be <code class="literal">sakila</code> for
                    statements executed using the registered account.
                </p><p style="color:blue;">使用管理MySQL帐户执行以下过程中的步骤，但由注册到防火墙的帐户指定要执行的步骤除外。对于使用注册帐户执行的语句，默认数据库应为sakila。</p>
                <div class="orderedlist">
                    <ol class="orderedlist" type="1"><li class="listitem"><p>
                        If necessary, create the account to be protected (choose an
                        appropriate password) and grant it privileges for the
                        <code class="literal">sakila</code> database:
                    </p><p style="color:blue;">如有必要，请创建要保护的帐户（选择适当的密码），并授予它sakila数据库的权限：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE USER 'fwuser'@'localhost' IDENTIFIED BY 'fWp@3sw0rd';</code></strong>
mysql&gt; <strong class="userinput"><code>GRANT ALL ON sakila.* TO 'fwuser'@'localhost';</code></strong>
</pre></li><li class="listitem"><p>
                        Use the <code class="literal">sp_set_firewall_mode()</code> stored
                        procedure to register the account with the firewall and
                        place it in recording mode (if the procedure is located in a
                        database other than <code class="literal">mysql</code>, adjust the
                        statement accordingly):
                    </p><p style="color:blue;">使用sp_set_firewall_mode（）存储过程向防火墙注册帐户并将其置于记录模式（如果该过程位于MySQL以外的数据库中，请相应地调整语句）：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CALL mysql.sp_set_firewall_mode('fwuser@localhost', 'RECORDING');</code></strong>
</pre><p>
                        During the course of its execution, the stored procedure
                        invokes firewall user-defined functions, which may produce
                        output of their own.
                    </p><p style="color:blue;">在执行过程中，存储过程调用防火墙用户定义的函数，这些函数可能会产生自己的输出。</p></li><li class="listitem"><p>
                        Using the registered account, connect to the server, then
                        execute some statements that are legitimate for it:
                    </p><p style="color:blue;">使用注册的帐户，连接到服务器，然后执行一些对其合法的语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT first_name, last_name FROM customer WHERE customer_id = 1;</code></strong>
mysql&gt; <strong class="userinput"><code>UPDATE rental SET return_date = NOW() WHERE rental_id = 1;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT get_customer_balance(1, NOW());</code></strong>
</pre><p>
                        The firewall converts the statements to digest form and
                        records them in the account whitelist.
                    </p><p style="color:blue;">防火墙将语句转换为摘要形式并将其记录在帐户白名单中。</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                Until the account executes statements in recording mode,
                                its whitelist is empty, which is equivalent to <span class="quote">“<span class="quote">deny
              all.</span>”</span> If switched to protecting mode, the account
                                will be effectively prohibited from executing statements.
                            </p><p style="color:blue;">在帐户以记录模式执行语句之前，其白名单为空，相当于“全部拒绝”。如果切换到保护模式，将有效禁止帐户执行语句。</p>
                        </div>
                    </li><li class="listitem"><p>
                        At this point, the user and whitelist information is cached
                        and can be seen in the firewall
                        <code class="literal">INFORMATION_SCHEMA</code> tables:
                    </p><p style="color:blue;">此时，用户和白名单信息将被缓存，并可以在防火墙信息模式表中看到：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MODE FROM INFORMATION_SCHEMA.MYSQL_FIREWALL_USERS</code></strong>
       <strong class="userinput"><code>WHERE USERHOST = 'fwuser@localhost';</code></strong>
+-----------+
| MODE      |
+-----------+
| RECORDING |
+-----------+
mysql&gt; <strong class="userinput"><code>SELECT RULE FROM INFORMATION_SCHEMA.MYSQL_FIREWALL_WHITELIST</code></strong>
       <strong class="userinput"><code>WHERE USERHOST = 'fwuser@localhost';</code></strong>
+----------------------------------------------------------------------------+
| RULE                                                                       |
+----------------------------------------------------------------------------+
| SELECT `first_name` , `last_name` FROM `customer` WHERE `customer_id` = ?  |
| SELECT `get_customer_balance` ( ? , NOW ( ) )                              |
| UPDATE `rental` SET `return_date` = NOW ( ) WHERE `rental_id` = ?          |
| SELECT @@`version_comment` LIMIT ?                                         |
+----------------------------------------------------------------------------+
</pre>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                The <code class="literal">@@version_comment</code> rule comes from a
                                statement sent automatically by the
                                <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client when you connect to the
                                server as the registered user.
                            </p><p style="color:blue;">“@version”注释规则来自MySQL客户端作为注册用户连接到服务器时自动发送的语句。</p><p>
                            It is important to train the firewall under conditions
                            matching application use. For example, a given MySQL
                            connector might send statements to the server at the
                            beginning of a connection to determine server
                            characteristics and capabilities. If an application
                            normally is used through that connector, train the
                            firewall that way, too. That enables those initial
                            statements to become part of the whitelist for the account
                            associated with the application.
                        </p><p style="color:blue;">在与应用相匹配的条件下对防火墙进行训练是非常重要的。例如，给定的mysql连接器可能在连接开始时向服务器发送语句，以确定服务器的特性和功能。如果应用程序通常是通过该连接器使用的，那么也要通过这种方式训练防火墙。使这些初始语句成为与应用程序关联的帐户的白名单的一部分。</p>
                        </div>
                    </li><li class="listitem"><p>
                        Use the stored procedure to switch the registered user to
                        protecting mode:
                    </p><p style="color:blue;">使用存储过程将注册用户切换到保护模式：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CALL mysql.sp_set_firewall_mode('fwuser@localhost', 'PROTECTING');</code></strong>
</pre>
                        <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Important
                            </div>
                            <p>
                                Switching the account out of <code class="literal">RECORDING</code>
                                mode synchronizes its firewall cache data to the
                                underlying <code class="literal">mysql</code> system database tables
                                for persistent storage. If you do not switch the mode for
                                a user who is being recorded, the cached whitelist data is
                                not written to the system tables and will be lost when the
                                server is restarted.
                            </p><p style="color:blue;">将帐户从记录模式切换到将其防火墙缓存数据同步到底层mysql系统数据库表以进行持久存储。如果不切换正在录制的用户的模式，则缓存的白名单数据不会写入系统表，并且在服务器重新启动时将丢失。</p>
                        </div>
                    </li><li class="listitem"><p>
                        Using the registered account, execute some acceptable and
                        unacceptable statements. The firewall matches each one
                        against the account whitelist and accepts or rejects it.
                    </p><p style="color:blue;">使用注册帐户，执行一些可接受和不可接受的语句。防火墙根据帐户白名单匹配每一个并接受或拒绝它。</p><p>
                        This statement is not identical to a training statement but
                        produces the same normalized statement as one of them, so
                        the firewall accepts it:
                    </p><p style="color:blue;">此语句与训练语句不同，但生成的规范化语句与其中一个语句相同，因此防火墙接受它：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT first_name, last_name FROM customer WHERE customer_id = '48';</code></strong>
+------------+-----------+
| first_name | last_name |
+------------+-----------+
| ANN        | EVANS     |
+------------+-----------+
</pre><p>
                        These statements do not match anything in the whitelist and
                        each results in an error:
                    </p><p style="color:blue;">这些语句与白名单中的任何内容都不匹配，每个语句都会导致错误：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT first_name, last_name FROM customer WHERE customer_id = 1 OR TRUE;</code></strong>
ERROR 1045 (28000): Statement was blocked by Firewall
mysql&gt; <strong class="userinput"><code>SHOW TABLES LIKE 'customer%';</code></strong>
ERROR 1045 (28000): Statement was blocked by Firewall
mysql&gt; <strong class="userinput"><code>TRUNCATE TABLE mysql.slow_log;</code></strong>
ERROR 1045 (28000): Statement was blocked by Firewall
</pre><p>
                        The firewall also writes the rejected statements to the
                        error log if the
                        <a class="link" href="security.html#sysvar_mysql_firewall_trace"><code class="literal">mysql_firewall_trace</code></a> system
                        variable is enabled. For example:
                    </p><p style="color:blue;">如果启用mysql_firewall_trace系统变量，防火墙还会将被拒绝的语句写入错误日志。例如：</p><pre data-lang="none" class="programlisting">[Note] Plugin MYSQL_FIREWALL reported:
'ACCESS DENIED for fwuser@localhost. Reason: No match in whitelist.
Statement: TRUNCATE TABLE `mysql` . `slow_log` '
</pre><p>
                        You can use these log messages in your efforts to identify
                        the source of attacks.
                    </p><p style="color:blue;">您可以在识别攻击源时使用这些日志消息。</p></li><li class="listitem"><p>
                        You can log nonmatching statements as suspicious without
                        denying access. To do this, put the account in
                        intrusion-detecting mode:
                    </p><p style="color:blue;">您可以将非匹配语句记录为可疑语句而不拒绝访问。为此，请将帐户置于入侵检测模式：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CALL mysql.sp_set_firewall_mode('fwuser@localhost', 'DETECTING');</code></strong>
</pre></li><li class="listitem"><p>
                        Using the registered account, connect to the server, then
                        execute a statement that does not match the whitelist:
                    </p><p style="color:blue;">使用注册的帐户，连接到服务器，然后执行与白名单不匹配的语句：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TABLES LIKE 'customer%';</code></strong>
+------------------------------+
| Tables_in_sakila (customer%) |
+------------------------------+
| customer                     |
| customer_list                |
+------------------------------+
</pre><p>
                        In detecting mode, the firewall permits the nonmatching
                        statement to execute but writes a message to the error log:
                    </p><p style="color:blue;">在检测模式下，防火墙允许执行非匹配语句，但会将消息写入错误日志：</p><pre data-lang="none" class="programlisting">[Note] Plugin MYSQL_FIREWALL reported:
'SUSPICIOUS STATEMENT from 'fwuser@localhost'. Reason: No match in whitelist.
Statement: SHOW TABLES LIKE ? '
</pre>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                            <div class="admon-title">
                                Note
                            </div>
                            <p>
                                Detection mode writes messages as Notes, which are
                                information messages. To ensure that such messages appear
                                in the error log and are not discarded, make sure that the
                                <a class="link" href="server-administration.html#sysvar_log_error_verbosity"><code class="literal">log_error_verbosity</code></a>
                                system variable is set to a value of 3.
                            </p><p style="color:blue;">检测模式将消息作为注释写入，这是信息消息。要确保这些消息出现在错误日志中且不会被丢弃，请确保将LOG U ERROR U VERBOSITY系统变量的值设置为3。</p>
                        </div>
                    </li><li class="listitem"><p>
                        To assess firewall activity, examine its status variables:
                    </p><p style="color:blue;">要评估防火墙活动，请检查其状态变量：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GLOBAL STATUS LIKE 'Firewall%';</code></strong>
+----------------------------+-------+
| Variable_name              | Value |
+----------------------------+-------+
| Firewall_access_denied     | 3     |
| Firewall_access_granted    | 4     |
| Firewall_access_suspicious | 1     |
| Firewall_cached_entries    | 4     |
+----------------------------+-------+
</pre><p>
                        The variables indicate the number of statements rejected,
                        accepted, logged as suspicious, and added to the cache,
                        respectively. The
                        <a class="link" href="security.html#statvar_Firewall_access_granted"><code class="literal">Firewall_access_granted</code></a>
                        count is 4 because of the
                        <code class="literal">@@version_comment</code> statement sent by the
                        <a class="link" href="programs.html#mysql" title="4.5.1&nbsp;mysql — The MySQL Command-Line Client"><span class="command"><strong>mysql</strong></span></a> client each of the three time you
                        used it to connect as the registered user, plus the
                        <a class="link" href="sql-syntax.html#show-tables" title="13.7.5.37&nbsp;SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a> statement that
                        was not blocked in <code class="literal">DETECTING</code> mode.
                    </p><p style="color:blue;">这些变量分别表示拒绝、接受、记录为可疑和添加到缓存中的语句数。由于MySQL客户端以注册用户身份使用它进行连接的三次中的每一次发送的@@version@注释语句，以及在检测模式下未被阻止的show tables语句，因此防火墙访问被授予的计数为4。</p></li></ol>
                </div>
                <p>
                    Should additional training for an account be necessary, switch
                    it to recording mode again, then back to protecting mode after
                    executing statements to be added to the whitelist.
                </p><p style="color:blue;">如果需要对帐户进行额外的培训，请再次将其切换到录制模式，然后在执行要添加到白名单中的语句后返回到保护模式。</p>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="firewall-reference"></a>6.4.6.4&nbsp;MySQL Enterprise Firewall Reference</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The following discussion serves as a reference to MySQL Enterprise Firewall
                    components:
                </p><p style="color:blue;">以下讨论可作为mysql企业防火墙组件的参考：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#firewall-tables" title="MySQL Enterprise Firewall Tables">MySQL Enterprise Firewall Tables</a></p><p style="color:blue;">mysql企业防火墙表</p></li><li class="listitem"><p><a class="xref" href="security.html#firewall-routines" title="MySQL Enterprise Firewall Procedures and Functions">MySQL Enterprise Firewall Procedures and Functions</a></p><p style="color:blue;">mysql企业防火墙程序和功能</p></li><li class="listitem"><p><a class="xref" href="security.html#firewall-system-variables" title="MySQL Enterprise Firewall System Variables">MySQL Enterprise Firewall System Variables</a></p><p style="color:blue;">mysql企业防火墙系统变量</p></li><li class="listitem"><p><a class="xref" href="security.html#firewall-status-variables" title="MySQL Enterprise Firewall Status Variables">MySQL Enterprise Firewall Status Variables</a></p><p style="color:blue;">mysql企业防火墙状态变量</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="firewall-tables"></a>MySQL Enterprise Firewall Tables</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL Enterprise Firewall maintains account and whitelist information. It uses
                        <code class="literal">INFORMATION_SCHEMA</code> tables to provide views
                        into cached data, and tables in the <code class="literal">mysql</code>
                        system database to store this data in persistent form. When
                        enabled, the firewall bases its operational decisions on the
                        cached data.
                    </p><p style="color:blue;">mysql企业防火墙维护帐户和白名单信息。它使用information_schema表向缓存数据提供视图，使用mysql系统数据库中的表以持久形式存储这些数据。启用时，防火墙将其操作决策基于缓存的数据。</p><p>
                    The <code class="literal">INFORMATION_SCHEMA</code> tables are
                    accessible by anyone. The <code class="literal">mysql</code> tables can
                    be accessed only by users with privileges for that database.
                </p><p style="color:blue;">任何人都可以访问信息架构表。只有具有该数据库权限的用户才能访问mysql表。</p><p>
                    The <code class="literal">INFORMATION_SCHEMA.MYSQL_FIREWALL_USERS</code>
                    and <code class="literal">mysql.firewall_users</code> tables list
                    registered firewall accounts and their operational modes. The
                    tables have these columns:
                </p><p style="color:blue;">information_schema.mysql_firewall_users和mysql.firewall_users表列出注册的防火墙帐户及其操作模式。这些表有以下列：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">USERHOST</code>
                        </p><p style="color:blue;">用户主机</p><p>
                            An account registered with the firewall. Each account has
                            the format
                            <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                            and represents actual user and host names as authenticated
                            by the server. Patterns and netmasks should not be used
                            when registering users.
                        </p><p style="color:blue;">在防火墙注册的帐户。每个帐户的格式为user_name@host_name，并表示经过服务器身份验证的实际用户名和主机名。注册用户时不应使用模式和网络掩码。</p></li><li class="listitem"><p>
                            <code class="literal">MODE</code>
                        </p><p style="color:blue;">模式</p><p>
                            The current firewall operational mode for the account. The
                            permitted mode values are <code class="literal">OFF</code>,
                            <code class="literal">DETECTING</code>,
                            <code class="literal">PROTECTING</code>,
                            <code class="literal">RECORDING</code>, and
                            <code class="literal">RESET</code>. For details about their
                            meanings, see the description of
                            <code class="literal">sp_set_firewall_mode()</code> in
                            <a class="xref" href="security.html#firewall-routines" title="MySQL Enterprise Firewall Procedures and Functions">MySQL Enterprise Firewall Procedures and Functions</a>.
                        </p><p style="color:blue;">帐户的当前防火墙操作模式。允许的模式值为关闭、检测、保护、记录和重置。有关其含义的详细信息，请参阅mysql enterprise firewall procedures and functions中sp_set_firewall_mode（）的说明。</p></li></ul>
                    </div>
                    <p>
                        The
                        <code class="literal">INFORMATION_SCHEMA.MYSQL_FIREWALL_WHITELIST</code>
                        and <code class="literal">mysql.firewall_whitelist</code> tables list
                        registered firewall accounts and their whitelists. The tables
                        have these columns:
                    </p><p style="color:blue;">information_schema.mysql_firewall_白名单和mysql.firewall_白名单列出注册的防火墙帐户及其白名单。这些表有以下列：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">USERHOST</code>
                        </p><p style="color:blue;">用户主机</p><p>
                            An account registered with the firewall. The format is the
                            same as for the user account tables.
                        </p><p style="color:blue;">在防火墙注册的帐户。格式与用户帐户表的格式相同。</p></li><li class="listitem"><p>
                            <code class="literal">RULE</code>
                        </p><p style="color:blue;">规则</p><p>
                            A normalized statement indicating an acceptable statement
                            pattern for the account. An account whitelist is the union
                            of its rules.
                        </p><p style="color:blue;">指示帐户的可接受语句模式的规范化语句。帐户白名单是其规则的联合体。</p></li><li class="listitem"><p>
                            <code class="literal">ID</code>
                        </p><p style="color:blue;">身份证件</p><p>
                            An integer column that is a primary key for the table.
                            This column was added in MySQL 5.7.23.
                        </p><p style="color:blue;">作为表主键的整数列。此列是在mysql 5.7.23中添加的。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="firewall-routines"></a>MySQL Enterprise Firewall Procedures and Functions</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL Enterprise Firewall has stored procedures that perform tasks such as
                        registering MySQL accounts with the firewall, establishing
                        their operational mode, and managing transfer of firewall data
                        between the cache and the underlying system tables. It also
                        has a set of user-defined functions (UDFs) that provides an
                        SQL-level API for lower-level tasks such as synchronizing the
                        cache with the underlying system tables.
                    </p><p style="color:blue;">mysql enterprise firewall具有存储过程，这些存储过程执行以下任务：在防火墙中注册mysql帐户、建立其操作模式、管理缓存和底层系统表之间的防火墙数据传输。它还有一组用户定义函数（udf），为低级任务（如将缓存与底层系统表同步）提供sql级api。</p><p>
                    Under normal operation, the stored procedures implement the
                    user interface. The UDFs are invoked by the stored procedures,
                    not directly by users.
                </p><p style="color:blue;">在正常操作下，存储过程实现用户界面。udf由存储过程调用，而不是由用户直接调用。</p><p>
                    To invoke a stored procedure when the default database is not
                    the database that contains the procedure, qualify the
                    procedure name with the database name. For example:
                </p><p style="color:blue;">若要在默认数据库不是包含过程的数据库时调用存储过程，请使用数据库名称限定过程名称。例如：</p><pre data-lang="sql" class="programlisting">CALL mysql.sp_set_firewall_mode(<em class="replaceable"><code>user</code></em>, <em class="replaceable"><code>mode</code></em>);
</pre><p>
                    The following list describes each firewall stored procedure
                    and UDF:
                </p><p style="color:blue;">以下列表描述了每个防火墙存储过程和UDF：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">sp_reload_firewall_rules(<em class="replaceable"><code>user</code></em>)</code>
                        </p><p style="color:blue;">重新加载防火墙规则（用户）</p><p>
                            This stored procedure uses firewall UDFs to reset a
                            registered account and reload the in-memory rules for it
                            from the rules stored in the
                            <code class="literal">mysql.firewall_whitelist</code> table. This
                            procedure provides control over firewall operation for
                            individual accounts.
                        </p><p style="color:blue;">此存储过程使用防火墙UDF重置已注册的帐户，并从mysql.firewall_白名单中存储的规则中重新加载该帐户的内存中规则。此过程为单个帐户提供对防火墙操作的控制。</p><p>
                            The <em class="replaceable"><code>user</code></em> argument names the
                            affected account, as a string in
                            <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                            format.
                        </p><p style="color:blue;">user参数将受影响的帐户命名为user_name@host_name格式的字符串。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">CALL mysql.sp_reload_firewall_rules('fwuser@localhost');
</pre>
                            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Warning
                                </div>
                                <p>
                                    This procedure sets the account mode to
                                    <code class="literal">RESET</code>, which clears the account
                                    whitelist and sets its mode to <code class="literal">OFF</code>.
                                    If the account mode was not <code class="literal">OFF</code> prior
                                    to the <code class="literal">sp_reload_firewall_rules()</code>
                                    call, use <code class="literal">sp_set_firewall_mode()</code> to
                                    restore its previous mode after reloading the rules. For
                                    example, if the account was in
                                    <code class="literal">PROTECTING</code> mode, that is no longer
                                    true after calling
                                    <code class="literal">sp_reload_firewall_rules()</code> and you
                                    must set it to <code class="literal">PROTECTING</code> again
                                    explicitly.
                                </p><p style="color:blue;">此过程将帐户模式设置为重置，这将清除帐户白名单并将其模式设置为关闭。如果在sp_reload_firewall_rules（）调用之前帐户模式未关闭，请在重新加载规则后使用sp_set_firewall_mode（）还原其以前的模式。例如，如果该帐户处于保护模式，则在调用sp_reload_firewall_rules（）之后，该模式将不再正确，您必须将其显式设置为再次保护。</p>
                            </div>
                        </li><li class="listitem"><p>
                            <code class="literal">sp_set_firewall_mode(<em class="replaceable"><code>user</code></em>,
                                <em class="replaceable"><code>mode</code></em>)</code>
                        </p><p style="color:blue;">sp_set_firewall_mode（用户，模式）</p><p>
                            This stored procedure registers a MySQL account with the
                            firewall and establishes its operational mode. The
                            procedure also invokes firewall UDFs as necessary to
                            transfer firewall data between the cache and the
                            underlying system tables. This procedure may be called
                            even if the <code class="literal">mysql_firewall_mode</code> system
                            variable is <code class="literal">OFF</code>, although setting the
                            mode for an account has no operational effect while the
                            firewall is disabled.
                        </p><p style="color:blue;">此存储过程向防火墙注册一个mysql帐户并建立其操作模式。该过程还根据需要调用防火墙udf，以便在缓存和底层系统表之间传输防火墙数据。即使mysql_firewall_mode系统变量处于关闭状态，也可以调用此过程，不过在禁用防火墙时，为帐户设置模式没有操作效果。</p><p>
                            The <em class="replaceable"><code>user</code></em> argument names the
                            affected account, as a string in
                            <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
                            format.
                        </p><p style="color:blue;">user参数将受影响的帐户命名为user_name@host_name格式的字符串。</p><p>
                            The <em class="replaceable"><code>mode</code></em> is the operational
                            mode for the user, as a string. These mode values are
                            permitted:
                        </p><p style="color:blue;">模式是用户的操作模式，作为字符串。允许这些模式值：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <code class="literal">OFF</code>: Disable the firewall for the
                                    account.
                                </p><p style="color:blue;">关闭：禁用帐户的防火墙。</p></li><li class="listitem"><p>
                                    <code class="literal">DETECTING</code>: Intrusion-detection
                                    mode: Write suspicious (nonmatching) statements to the
                                    error log but do not deny access.
                                </p><p style="color:blue;">检测：入侵检测模式：将可疑（非匹配）语句写入错误日志，但不拒绝访问。</p></li><li class="listitem"><p>
                                    <code class="literal">PROTECTING</code>: Protect the account by
                                    matching incoming statements against the account
                                    whitelist.
                                </p><p style="color:blue;">保护：通过将传入语句与帐户白名单匹配来保护帐户。</p></li><li class="listitem"><p>
                                    <code class="literal">RECORDING</code>: Training mode: Record
                                    acceptable statements for the account. Incoming
                                    statements that do not immediately fail with a syntax
                                    error are recorded to become part of the account
                                    whitelist rules.
                                </p><p style="color:blue;">记录：培训方式：记录账户可接受的对账单。不会立即因语法错误而失败的传入语句将被记录为帐户白名单规则的一部分。</p></li><li class="listitem"><p>
                                    <code class="literal">RESET</code>: Clear the account whitelist
                                    and set the account mode to <code class="literal">OFF</code>.
                                </p><p style="color:blue;">重置：清除帐户白名单并将帐户模式设置为关闭。</p></li></ul>
                            </div>
                            <p>
                                Switching the mode for an account to any mode but
                                <code class="literal">RECORDING</code> synchronizes the firewall
                                cache data to the underlying <code class="literal">mysql</code>
                                system database tables for persistent storage. Switching
                                the mode from <code class="literal">OFF</code> to
                                <code class="literal">RECORDING</code> reloads the whitelist from
                                the <code class="literal">mysql.firewall_whitelist</code> table into
                                the cache.
                            </p><p style="color:blue;">将帐户的模式切换到任何模式，但录制会将防火墙缓存数据同步到底层mysql系统数据库表以进行持久存储。将模式从“关闭”切换到“录制”，将白名单从mysql.firewall_白名单表重新加载到缓存中。</p><p>
                                If an account has an empty whitelist, setting its mode to
                                <code class="literal">PROTECTING</code> produces an error message
                                that is returned in a result set, but not an SQL error:
                            </p><p style="color:blue;">如果帐户的白名单为空，则将其模式设置为“保护”将生成一条错误消息，该消息将在结果集中返回，但不会返回SQL错误：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>CALL mysql.sp_set_firewall_mode('a@b','PROTECTING');</code></strong>
+----------------------------------------------------------------------+
| set_firewall_mode(arg_userhost, arg_mode)                            |
+----------------------------------------------------------------------+
| ERROR: PROTECTING mode requested for a@b but the whitelist is empty. |
+----------------------------------------------------------------------+
1 row in set (0.02 sec)

Query OK, 0 rows affected (0.02 sec)
</pre></li><li class="listitem"><p>
                            <code class="literal">mysql_firewall_flush_status()</code>
                        </p><p style="color:blue;">MySQL防火墙刷新状态（）</p><p>
                            This UDF resets several firewall status variables to 0:
                        </p><p style="color:blue;">此UDF将多个防火墙状态变量重置为0：</p><pre data-lang="none" class="programlisting">Firewall_access_denied
Firewall_access_granted
Firewall_access_suspicious
</pre><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">SELECT mysql_firewall_flush_status();
</pre></li><li class="listitem"><p>
                            <code class="literal">normalize_statement(<em class="replaceable"><code>stmt</code></em>)</code>
                        </p><p style="color:blue;">normalize_语句（stmt）</p><p>
                            This UDF normalizes an SQL statement into the digest form
                            used for whitelist rules.
                        </p><p style="color:blue;">此UDF将SQL语句规范化为用于白名单规则的摘要形式。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">SELECT normalize_statement('SELECT * FROM t1 WHERE c1 &gt; 2');
</pre></li><li class="listitem"><p>
                            <code class="literal">read_firewall_users(<em class="replaceable"><code>user</code></em>,
                                <em class="replaceable"><code>mode</code></em>)</code>
                        </p><p style="color:blue;">读取防火墙用户（用户，模式）</p><p>
                            This aggregate UDF updates the firewall user cache through
                            a <code class="literal">SELECT</code> statement on the
                            <code class="literal">mysql.firewall_users</code> table.
                        </p><p style="color:blue;">此聚合UDF通过mysql.firewall_users表上的select语句更新防火墙用户缓存。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">SELECT read_firewall_users('fwuser@localhost', 'RECORDING')
FROM mysql.firewall_users;
</pre></li><li class="listitem"><p>
                            <code class="literal">read_firewall_whitelist(<em class="replaceable"><code>user</code></em>,
                                <em class="replaceable"><code>rule</code></em>)</code>
                        </p><p style="color:blue;">读取防火墙白名单（用户、规则）</p><p>
                            This aggregate UDF updates the recorded statement cache
                            through a <code class="literal">SELECT</code> statement on the
                            <code class="literal">mysql.firewall_whitelist</code> table.
                        </p><p style="color:blue;">此聚合UDF通过mysql.firewall_白名单上的select语句更新记录的语句缓存。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">SELECT read_firewall_whitelist('fwuser@localhost', 'RECORDING')
FROM mysql.firewall_whitelist;
</pre></li><li class="listitem"><p>
                            <code class="literal">set_firewall_mode(<em class="replaceable"><code>user</code></em>,
                                <em class="replaceable"><code>mode</code></em>)</code>
                        </p><p style="color:blue;">设置防火墙模式（用户，模式）</p><p>
                            This UDF manages the user cache and establishes the user
                            operational mode.
                        </p><p style="color:blue;">这个udf管理用户缓存并建立用户操作模式。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">SELECT set_firewall_mode('fwuser@localhost', 'RECORDING');
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="firewall-system-variables"></a>MySQL Enterprise Firewall System Variables</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL Enterprise Firewall supports the following system variables. Use them to
                        configure firewall operation. These variables are unavailable
                        unless the firewall is installed (see
                        <a class="xref" href="security.html#firewall-installation" title="6.4.6.2&nbsp;Installing or Uninstalling MySQL Enterprise Firewall">Section&nbsp;6.4.6.2, “Installing or Uninstalling MySQL Enterprise Firewall”</a>).
                    </p><p style="color:blue;">mysql enterprise firewall支持以下系统变量。使用它们来配置防火墙操作。除非安装了防火墙，否则这些变量不可用（请参阅第6.4.6.2节“安装或卸载mysql企业防火墙”）。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_mysql_firewall_mode"></a>
                            <a class="indexterm" name="idm140286877730592"></a>

                            <a class="indexterm" name="idm140286877729552"></a>

                            <a class="link" href="security.html#sysvar_mysql_firewall_mode"><code class="literal">mysql_firewall_mode</code></a>
                        </p><p style="color:blue;">mysql_防火墙模式</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for mysql_firewall_mode"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--mysql-firewall-mode[={OFF|ON}]</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_mysql_firewall_mode">mysql_firewall_mode</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Boolean</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">ON</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                Whether MySQL Enterprise Firewall is enabled (the default) or disabled.
                            </p><p style="color:blue;">mysql企业防火墙是启用（默认）还是禁用。</p></li><li class="listitem"><p><a name="sysvar_mysql_firewall_trace"></a>
                            <a class="indexterm" name="idm140286877698624"></a>

                            <a class="indexterm" name="idm140286877697584"></a>

                            <a class="link" href="security.html#sysvar_mysql_firewall_trace"><code class="literal">mysql_firewall_trace</code></a>
                        </p><p style="color:blue;">mysql_防火墙跟踪</p>
                            <div class="informaltable">
                                <table frame="box" rules="all" summary="Properties for mysql_firewall_trace"><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th scope="col">Property</th>
                                    <th scope="col">Value</th>
                                </tr></thead><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td>
                                    <td><code class="literal">--mysql-firewall-trace[={OFF|ON}]</code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Introduced</strong></span></td>
                                    <td>5.7.9</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>System Variable</strong></span></td>
                                    <td><code class="literal"><a class="link" href="security.html#sysvar_mysql_firewall_trace">mysql_firewall_trace</a></code></td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Scope</strong></span></td>
                                    <td>Global</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Dynamic</strong></span></td>
                                    <td>Yes</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Type</strong></span></td>
                                    <td>Boolean</td>
                                </tr><tr><td scope="row"><span class="bold"><strong>Default Value</strong></span></td>
                                    <td><code class="literal">OFF</code></td>
                                </tr></tbody></table>
                            </div>
                            <p>
                                Whether the MySQL Enterprise Firewall trace is enabled or disabled (the
                                default). When
                                <a class="link" href="security.html#sysvar_mysql_firewall_trace"><code class="literal">mysql_firewall_trace</code></a> is
                                enabled, for <code class="literal">PROTECTING</code> mode, the
                                firewall writes rejected statements to the error log.
                            </p><p style="color:blue;">mysql企业防火墙跟踪是启用还是禁用（默认设置）。启用mysql_firewall_trace时，为了保护模式，防火墙会将拒绝的语句写入错误日志。</p></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="firewall-status-variables"></a>MySQL Enterprise Firewall Status Variables</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL Enterprise Firewall supports the following status variables. Use them to
                        obtain information about firewall operational status. These
                        variables are unavailable unless the firewall is installed
                        (see <a class="xref" href="security.html#firewall-installation" title="6.4.6.2&nbsp;Installing or Uninstalling MySQL Enterprise Firewall">Section&nbsp;6.4.6.2, “Installing or Uninstalling MySQL Enterprise Firewall”</a>). Firewall status
                        variables are set to 0 whenever the
                        <code class="literal">MYSQL_FIREWALL</code> plugin is installed or the
                        server is started. Many of them are reset to zero by the
                        <code class="literal">mysql_firewall_flush_status()</code> UDF (see
                        <a class="xref" href="security.html#firewall-routines" title="MySQL Enterprise Firewall Procedures and Functions">MySQL Enterprise Firewall Procedures and Functions</a>).
                    </p><p style="color:blue;">mysql企业防火墙支持以下状态变量。使用它们获取有关防火墙操作状态的信息。除非安装了防火墙，否则这些变量不可用（请参阅第6.4.6.2节“安装或卸载mysql企业防火墙”）。安装mysql_防火墙插件或启动服务器时，防火墙状态变量设置为0。其中许多被mysql_firewall_flush_status（）udf重置为零（请参阅mysql enterprise firewall过程和函数）。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Firewall_access_denied"></a>
                            <a class="indexterm" name="idm140286877659264"></a>

                            <a class="indexterm" name="idm140286877658224"></a>

                            <a class="link" href="security.html#statvar_Firewall_access_denied"><code class="literal">Firewall_access_denied</code></a>
                        </p><p style="color:blue;">防火墙访问被拒绝</p><p>
                            The number of statements rejected by MySQL Enterprise Firewall.
                        </p><p style="color:blue;">MySQL企业防火墙拒绝的语句数。</p></li><li class="listitem"><p><a name="statvar_Firewall_access_granted"></a>
                            <a class="indexterm" name="idm140286877653792"></a>

                            <a class="indexterm" name="idm140286877652752"></a>

                            <a class="link" href="security.html#statvar_Firewall_access_granted"><code class="literal">Firewall_access_granted</code></a>
                        </p><p style="color:blue;">已授予防火墙访问权限</p><p>
                            The number of statements accepted by MySQL Enterprise Firewall.
                        </p><p style="color:blue;">mysql企业防火墙接受的语句数。</p></li><li class="listitem"><p><a name="statvar_Firewall_access_suspicious"></a>
                            <a class="indexterm" name="idm140286877648208"></a>

                            <a class="indexterm" name="idm140286877647104"></a>

                            <a class="link" href="security.html#statvar_Firewall_access_suspicious"><code class="literal">Firewall_access_suspicious</code></a>
                        </p><p style="color:blue;">防火墙访问可疑</p><p>
                            The number of statements logged by MySQL Enterprise Firewall as suspicious
                            for users who are in <code class="literal">DETECTING</code> mode.
                        </p><p style="color:blue;">mysql enterprise firewall记录的对处于检测模式的用户可疑的语句数。</p></li><li class="listitem"><p><a name="statvar_Firewall_cached_entries"></a>
                            <a class="indexterm" name="idm140286877641744"></a>

                            <a class="indexterm" name="idm140286877640704"></a>

                            <a class="link" href="security.html#statvar_Firewall_cached_entries"><code class="literal">Firewall_cached_entries</code></a>
                        </p><p style="color:blue;">防火墙缓存的条目</p><p>
                            The number of statements recorded by MySQL Enterprise Firewall, including
                            duplicates.
                        </p><p style="color:blue;">mysql enterprise firewall记录的语句数，包括重复的语句。</p></li></ul>
                    </div>

                </div>

            </div>

        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h3 class="title"><a name="data-masking"></a>6.4.7&nbsp;MySQL Enterprise Data Masking and De-Identification</h3>

                    </div>

                </div>

            </div>
            <div class="toc">
                <dl class="toc"><dt><span class="section"><a href="security.html#data-masking-components">6.4.7.1 MySQL Enterprise Data Masking and De-Identification Components</a></span></dt><dt><span class="section"><a href="security.html#data-masking-installation">6.4.7.2 Installing or Uninstalling MySQL Enterprise Data Masking and De-Identification</a></span></dt><dt><span class="section"><a href="security.html#data-masking-usage">6.4.7.3 Using MySQL Enterprise Data Masking and De-Identification</a></span></dt><dt><span class="section"><a href="security.html#data-masking-reference">6.4.7.4 MySQL Enterprise Data Masking and De-Identification User-Defined Function Reference</a></span></dt></dl>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                <div class="admon-title">
                    Note
                </div>
                <p>
                    MySQL Enterprise Data Masking and De-Identification is an extension included in MySQL Enterprise Edition, a commercial
                    product. To learn more about commercial products,
                    <a class="ulink" href="https://www.mysql.com/products/" target="_top">https://www.mysql.com/products/</a>.
                </p><p style="color:blue;">mysql企业数据屏蔽和反标识是商业产品mysql企业版中的一个扩展。要了解更多有关商业产品的信息，请访问https://www.mysql.com/products/。</p>
            </div>
            <p>
                As of MySQL 5.7.24, MySQL Enterprise Edition provides data masking and
                de-identification capabilities:
            </p><p style="color:blue;">从mysql 5.7.24开始，mysql企业版提供了数据屏蔽和反标识功能：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Transformation of existing data to mask it and remove
                    identifying characteristics, such as changing all digits of a
                    credit card number but the last four to <code class="literal">'X'</code>
                    characters.
                </p><p style="color:blue;">转换现有数据以掩饰它并移除识别特征，例如改变信用卡号码的所有数字，但改变最后的四到“X”字符。</p></li><li class="listitem"><p>
                    Generation of random data, such as email addresses and payment
                    card numbers.
                </p><p style="color:blue;">生成随机数据，如电子邮件地址和支付卡号。</p></li></ul>
            </div>
            <p>
                The way that applications use these capabilities depends on the
                purpose for which the data will be used and who will access it:
            </p><p style="color:blue;">应用程序使用这些功能的方式取决于数据的用途以及访问数据的人员：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Applications that use sensitive data may protect it by
                    performing data masking and permitting use of partially masked
                    data for client identification. Example: A call center may ask
                    for clients to provide their last four Social Security number
                    digits.
                </p><p style="color:blue;">使用敏感数据的应用程序可以通过执行数据屏蔽和允许使用部分屏蔽数据进行客户端标识来保护它。例如：呼叫中心可能要求客户提供其最后四位社保号码。</p></li><li class="listitem"><p>
                    Applications that require properly formatted data, but not
                    necessarily the original data, can synthesize sample data.
                    Example: An application developer who is testing data
                    validators but has no access to original data may synthesize
                    random data with the same format.
                </p><p style="color:blue;">需要正确格式化数据（但不一定是原始数据）的应用程序可以合成示例数据。示例：正在测试数据验证器但无法访问原始数据的应用程序开发人员可以合成具有相同格式的随机数据。</p></li></ul>
            </div>
            <p>
                Example 1:
            </p><p style="color:blue;">例1：</p><p>
            Medical research facilities can hold patient data that comprises a
            mix of personal and medical data. This may include genetic
            sequences (long strings), test results stored in JSON format, and
            other data types. Although the data may be used mostly by
            automated analysis software, access to genome data or test results
            of particular patients is still possible. In such cases, data
            masking should be used to render this information not personally
            identifiable.
        </p><p style="color:blue;">医学研究机构可以保存由个人和医学数据组成的病人数据。这可能包括遗传序列（长字符串）、以json格式存储的测试结果和其他数据类型。尽管这些数据可能主要由自动化分析软件使用，但仍有可能获得特定患者的基因组数据或检测结果。在这种情况下，应使用数据屏蔽使这些信息不可个人识别。</p><p>
            Example 2:
        </p><p style="color:blue;">例2：</p><p>
            A credit card processor company provides a set of services using
            sensitive data, such as:
        </p><p style="color:blue;">信用卡处理公司使用敏感数据提供一组服务，例如：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Processing a large number of financial transactions per
                    second.
                </p><p style="color:blue;">每秒处理大量金融交易。</p></li><li class="listitem"><p>
                    Storing a large amount of transaction-related data.
                </p><p style="color:blue;">存储大量与事务相关的数据。</p></li><li class="listitem"><p>
                    Protecting transaction-related data with strict requirements
                    for personal data.
                </p><p style="color:blue;">以严格的个人数据要求保护交易相关数据。</p></li><li class="listitem"><p>
                    Handling client complaints about transactions using reversible
                    or partially masked data.
                </p><p style="color:blue;">处理客户对使用可逆或部分屏蔽数据的交易的投诉。</p></li></ul>
            </div>
            <p>
                A typical transaction may include many types of sensitive
                information, including:
            </p><p style="color:blue;">典型的事务可能包括许多类型的敏感信息，包括：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Credit card number.
                </p><p style="color:blue;">信用卡号码。</p></li><li class="listitem"><p>
                    Transaction type and amount.
                </p><p style="color:blue;">交易类型和金额。</p></li><li class="listitem"><p>
                    Merchant type.
                </p><p style="color:blue;">商人类型。</p></li><li class="listitem"><p>
                    Transaction cryptogram (to confirm transaction legitimacy).
                </p><p style="color:blue;">交易密码（确认交易合法性）。</p></li><li class="listitem"><p>
                    Geolocation of GPS-equipped terminal (for fraud detection).
                </p><p style="color:blue;">配备GPS的终端的地理位置（用于欺诈检测）。</p></li></ul>
            </div>
            <p>
                Those types of information may then be joined within a bank or
                other card-issuing financial institution with client personal
                data, such as:
            </p><p style="color:blue;">然后，这些类型的信息可以与具有客户个人数据的银行或其他发卡金融机构合并，例如：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    Full client name (either person or company).
                </p><p style="color:blue;">客户全名（个人或公司）。</p></li><li class="listitem"><p>
                    Address.
                </p><p style="color:blue;">地址。</p></li><li class="listitem"><p>
                    Date of birth.
                </p><p style="color:blue;">出生日期。</p></li><li class="listitem"><p>
                    Social Security number.
                </p><p style="color:blue;">社会保险号码。</p></li><li class="listitem"><p>
                    Email address.
                </p><p style="color:blue;">电子邮件地址。</p></li><li class="listitem"><p>
                    Phone number.
                </p><p style="color:blue;">电话号码。</p></li></ul>
            </div>
            <p>
                Various employee roles within both the card processing company and
                the financial institution require access to that data. Some of
                these roles may require access only to masked data. Other roles
                may require access to the original data on a case-to-case basis,
                which is recorded in audit logs.
            </p><p style="color:blue;">卡处理公司和金融机构中的各种员工角色都需要访问这些数据。其中一些角色可能只需要访问屏蔽数据。其他角色可能需要逐个访问原始数据，这些数据记录在审核日志中。</p><p>
            Masking and de-identification are core to regulatory compliance,
            so MySQL Enterprise Data Masking and De-Identification can help application developers satisfy privacy
            requirements:
        </p><p style="color:blue;">屏蔽和取消标识是法规遵从性的核心，因此mysql企业数据屏蔽和取消标识可以帮助应用程序开发人员满足隐私要求：</p>
            <div class="itemizedlist">
                <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    PCI – DSS: Payment Card Data.
                </p><p style="color:blue;">PCI–DSS：支付卡数据。</p></li><li class="listitem"><p>
                    HIPAA: Privacy of Health Data, Health Information Technology
                    for Economic and Clinical Health Act (HITECH Act).
                </p><p style="color:blue;">HIPAA：健康数据隐私，健康信息技术促进经济和临床健康法案（Hitech法案）。</p></li><li class="listitem"><p>
                    EU General Data Protection Directive (GDPR): Protection of
                    Personal Data.
                </p><p style="color:blue;">欧盟通用数据保护指令（GDPR）：个人数据保护。</p></li><li class="listitem"><p>
                    Data Protection Act (UK): Protection of Personal Data.
                </p><p style="color:blue;">数据保护法（英国）：个人数据保护。</p></li><li class="listitem"><p>
                    Sarbanes Oxley, GLBA, The USA Patriot Act, Identity Theft and
                    Assumption Deterrence Act of 1998.
                </p><p style="color:blue;">萨班斯-奥克斯利法案、GLBA法案、美国爱国者法案、1998年身份盗窃和假设威慑法案。</p></li><li class="listitem"><p>
                    FERPA – Student Data, NASD, CA SB1386 and AB 1950, State
                    Data Protection Laws, Basel II.
                </p><p style="color:blue;">FERPA–学生数据，NASD，CA SB1386和AB 1950，州数据保护法，巴塞尔II。</p></li></ul>
            </div>
            <p>
                The following sections describe the components of MySQL Enterprise Data Masking and De-Identification,
                discuss how to install and use it, and provide reference
                information for its components.
            </p><p style="color:blue;">以下各节介绍mysql企业数据屏蔽和反标识的组件，讨论如何安装和使用它，并为其组件提供参考信息。</p>
            <div class="section">

                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="data-masking-components"></a>6.4.7.1&nbsp;MySQL Enterprise Data Masking and De-Identification Components</h4>
                        </div>
                    </div>
                </div>
                <a class="indexterm" name="idm140286877601184"></a><p>
                MySQL Enterprise Data Masking and De-Identification is based on a plugin library that implements these
                components:
            </p><p style="color:blue;">mysql企业数据屏蔽和反标识基于实现以下组件的插件库：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        A server-side plugin named <code class="literal">data_masking</code>.
                    </p><p style="color:blue;">一个名为数据屏蔽的服务器端插件。</p></li><li class="listitem"><p>
                        A set of user-defined functions (UDFs) provides an SQL-level
                        API for performing masking and de-identification operations.
                        Some of these functions require the
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege.
                    </p><p style="color:blue;">一组用户定义函数（UDF）提供了一个SQL级别的API，用于执行掩蔽和反标识操作。其中一些函数需要超级特权。</p></li></ul>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="data-masking-installation"></a>6.4.7.2&nbsp;Installing or Uninstalling MySQL Enterprise Data Masking and De-Identification</h4>

                        </div>

                    </div>

                </div>
                <a class="indexterm" name="idm140286877593664"></a><a class="indexterm" name="idm140286877592176"></a><a class="indexterm" name="idm140286877590688"></a><a class="indexterm" name="idm140286877589200"></a><p>
                This section describes how to install or uninstall MySQL Enterprise Data Masking and De-Identification,
                which is implemented as a plugin library file containing a
                plugin and user-defined functions (UDFs). For general
                information about installing or uninstalling plugins and UDFs,
                see <a class="xref" href="server-administration.html#plugin-loading" title="5.5.1&nbsp;Installing and Uninstalling Plugins">Section&nbsp;5.5.1, “Installing and Uninstalling Plugins”</a>, and
                <a class="xref" href="server-administration.html#udf-loading" title="5.6.1&nbsp;Installing and Uninstalling User-Defined Functions">Section&nbsp;5.6.1, “Installing and Uninstalling User-Defined Functions”</a>.
            </p><p style="color:blue;">本节介绍如何安装或卸载mysql企业数据屏蔽和反标识，它是作为包含插件和用户定义函数（udf）的插件库文件实现的。有关安装或卸载插件和UDF的一般信息，请参阅第5.5.1节“安装和卸载插件”，以及第5.6.1节“安装和卸载用户定义函数”。</p><p>
                To be usable by the server, the plugin library file must be
                located in the MySQL plugin directory (the directory named by
                the <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system
                variable). If necessary, configure the plugin directory location
                by setting the value of
                <a class="link" href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> at server startup.
            </p><p style="color:blue;">要使服务器可用，插件库文件必须位于mysql plugin目录（由plugin_dir系统变量命名的目录）中。如有必要，通过在服务器启动时设置plugin dir的值来配置插件目录位置。</p><p>
                The plugin library file base name is
                <code class="literal">data_masking</code>. The file name suffix differs
                per platform (for example, <code class="filename">.so</code> for Unix and
                Unix-like systems, <code class="filename">.dll</code> for Windows).
            </p><p style="color:blue;">插件库文件的基本名称是数据屏蔽。每个平台的文件名后缀不同（例如，.so对于unix和类unix系统，.dll对于windows）。</p><p>
                To install the MySQL Enterprise Data Masking and De-Identification plugin and UDFs, use the
                <a class="link" href="sql-syntax.html#install-plugin" title="13.7.3.3&nbsp;INSTALL PLUGIN Syntax"><code class="literal">INSTALL PLUGIN</code></a> and
                <a class="link" href="sql-syntax.html#create-function" title="13.1.13&nbsp;CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statements
                (adjust the <code class="filename">.so</code> suffix for your platform as
                necessary):
            </p><p style="color:blue;">要安装mysql企业数据屏蔽和反标识插件以及udf，请使用install plugin和create function语句（根据需要调整平台的.so后缀）：</p><pre data-lang="sql" class="programlisting">INSTALL PLUGIN data_masking SONAME 'data_masking.so';
CREATE FUNCTION gen_blacklist RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_dictionary RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_dictionary_drop RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_dictionary_load RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_range RETURNS INTEGER
  SONAME 'data_masking.so';
CREATE FUNCTION gen_rnd_email RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_rnd_pan RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_rnd_ssn RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION gen_rnd_us_phone RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION mask_inner RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION mask_outer RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION mask_pan RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION mask_pan_relaxed RETURNS STRING
  SONAME 'data_masking.so';
CREATE FUNCTION mask_ssn RETURNS STRING
  SONAME 'data_masking.so';
</pre><p>
                If the plugin and UDFs are used on a master replication server,
                install them on all slave servers as well to avoid replication
                issues.
            </p><p style="color:blue;">如果插件和udf在主复制服务器上使用，请将它们安装在所有从服务器上，以避免复制问题。</p><p>
                Once installed as just described, the plugin and UDFs remain
                installed until uninstalled. To remove them, use the
                <a class="link" href="sql-syntax.html#uninstall-plugin" title="13.7.3.4&nbsp;UNINSTALL PLUGIN Syntax"><code class="literal">UNINSTALL PLUGIN</code></a> and
                <a class="link" href="sql-syntax.html#drop-function" title="13.1.24&nbsp;DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> statements:
            </p><p style="color:blue;">如前所述安装后，插件和udf将保持安装状态，直到卸载。要删除它们，请使用uninstall plugin和drop function语句：</p><pre data-lang="sql" class="programlisting">UNINSTALL PLUGIN data_masking;
DROP FUNCTION gen_blacklist;
DROP FUNCTION gen_dictionary;
DROP FUNCTION gen_dictionary_drop;
DROP FUNCTION gen_dictionary_load;
DROP FUNCTION gen_range;
DROP FUNCTION gen_rnd_email;
DROP FUNCTION gen_rnd_pan;
DROP FUNCTION gen_rnd_ssn;
DROP FUNCTION gen_rnd_us_phone;
DROP FUNCTION mask_inner;
DROP FUNCTION mask_outer;
DROP FUNCTION mask_pan;
DROP FUNCTION mask_pan_relaxed;
DROP FUNCTION mask_ssn;
</pre>
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="data-masking-usage"></a>6.4.7.3&nbsp;Using MySQL Enterprise Data Masking and De-Identification</h4>

                        </div>

                    </div>

                </div>
                <p>
                    Before using MySQL Enterprise Data Masking and De-Identification, install it according to the instructions
                    provided at <a class="xref" href="security.html#data-masking-installation" title="6.4.7.2&nbsp;Installing or Uninstalling MySQL Enterprise Data Masking and De-Identification">Section&nbsp;6.4.7.2, “Installing or Uninstalling MySQL Enterprise Data Masking and De-Identification”</a>.
                </p><p style="color:blue;">在使用mysql企业数据屏蔽和反标识之前，请按照6.4.7.2节“安装或卸载mysql企业数据屏蔽和反标识”中提供的说明进行安装。</p><p>
                To use MySQL Enterprise Data Masking and De-Identification in applications, invoke the functions that are
                appropriate for the operations you wish to perform. For detailed
                function descriptions, see
                <a class="xref" href="security.html#data-masking-reference" title="6.4.7.4&nbsp;MySQL Enterprise Data Masking and De-Identification User-Defined Function Reference">Section&nbsp;6.4.7.4, “MySQL Enterprise Data Masking and De-Identification User-Defined Function Reference”</a>. This section
                demonstrates how to use the functions to carry out some
                representative tasks. It first presents an overview of the
                available functions, followed by some examples of how the
                functions might be used in real-world context:
            </p><p style="color:blue;">要在应用程序中使用mysql企业数据屏蔽和取消标识，请调用适合要执行的操作的函数。有关详细的功能描述，请参阅6.4.7.4节，“MySQL企业数据屏蔽和反标识用户定义函数参考”。本节演示如何使用这些函数执行一些具有代表性的任务。它首先概述了可用的函数，然后举例说明如何在实际环境中使用这些函数：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#data-masking-usage-masking-functions" title="Masking Data to Remove Identifying Characteristics">Masking Data to Remove Identifying Characteristics</a></p><p style="color:blue;">屏蔽数据以去除识别特征</p></li><li class="listitem"><p><a class="xref" href="security.html#data-masking-usage-generation-functions" title="Generating Random Data with Specific Characteristics">Generating Random Data with Specific Characteristics</a></p><p style="color:blue;">生成具有特定特征的随机数据</p></li><li class="listitem"><p><a class="xref" href="security.html#data-masking-usage-dictionary-functions" title="Generating Random Data Using Dictionaries">Generating Random Data Using Dictionaries</a></p><p style="color:blue;">使用字典生成随机数据</p></li><li class="listitem"><p><a class="xref" href="security.html#data-masking-usage-customer-identification" title="Using Masked Data for Customer Identification">Using Masked Data for Customer Identification</a></p><p style="color:blue;">使用屏蔽数据进行客户识别</p></li><li class="listitem"><p><a class="xref" href="security.html#data-masking-usage-views" title="Creating Views that Display Masked Data">Creating Views that Display Masked Data</a></p><p style="color:blue;">创建显示屏蔽数据的视图</p></li></ul>
                </div>

                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="data-masking-usage-masking-functions"></a>Masking Data to Remove Identifying Characteristics</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL provides general-purpose masking functions that mask
                        arbitrary strings, and special-purpose masking functions that
                        mask specific types of values.
                    </p><p style="color:blue;">mysql提供了屏蔽任意字符串的通用屏蔽函数，以及屏蔽特定类型值的专用屏蔽函数。</p><h6><a name="idm140286877557376"></a>General-Purpose Masking Functions</h6><p>
                    <a class="link" href="security.html#udf_mask-inner"><code class="literal">mask_inner()</code></a> and
                    <a class="link" href="security.html#udf_mask-outer"><code class="literal">mask_outer()</code></a> are general-purpose
                    functions that mask parts of arbitrary strings based on
                    position within the string:
                </p><p style="color:blue;">mask_inner（）和mask_outer（）是根据字符串中的位置屏蔽任意字符串部分的通用函数：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#udf_mask-inner"><code class="literal">mask_inner()</code></a> masks the
                            interior of its string argument, leaving the ends
                            unmasked. Other arguments specify the sizes of the
                            unmasked ends.
                        </p><p style="color:blue;">mask_inner（）遮罩其字符串参数的内部，使末端不加遮罩。其他参数指定未屏蔽端点的大小。</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_inner('This is a string', 5, 1);</code></strong>
+--------------------------------------+
| mask_inner('This is a string', 5, 1) |
+--------------------------------------+
| This XXXXXXXXXXg                     |
+--------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_inner('This is a string', 1, 5);</code></strong>
+--------------------------------------+
| mask_inner('This is a string', 1, 5) |
+--------------------------------------+
| TXXXXXXXXXXtring                     |
+--------------------------------------+
</pre></li><li class="listitem"><p>
                            <a class="link" href="security.html#udf_mask-outer"><code class="literal">mask_outer()</code></a> does the
                            reverse, masking the ends of its string argument, leaving
                            the interior unmasked. Other arguments specify the sizes
                            of the masked ends.
                        </p><p style="color:blue;">mask_outer（）执行相反的操作，屏蔽其字符串参数的结尾，而不隐藏内部参数。其他参数指定屏蔽端的大小。</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_outer('This is a string', 5, 1);</code></strong>
+--------------------------------------+
| mask_outer('This is a string', 5, 1) |
+--------------------------------------+
| XXXXXis a strinX                     |
+--------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_outer('This is a string', 1, 5);</code></strong>
+--------------------------------------+
| mask_outer('This is a string', 1, 5) |
+--------------------------------------+
| Xhis is a sXXXXX                     |
+--------------------------------------+
</pre></li></ul>
                    </div>
                    <p>
                        By default, <a class="link" href="security.html#udf_mask-inner"><code class="literal">mask_inner()</code></a> and
                        <a class="link" href="security.html#udf_mask-outer"><code class="literal">mask_outer()</code></a> use
                        <code class="literal">'X'</code> as the masking character, but permit an
                        optional masking-character argument:
                    </p><p style="color:blue;">默认情况下，mask_inner（）和mask_outer（）使用“x”作为屏蔽字符，但允许使用可选的屏蔽字符参数：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_inner('This is a string', 5, 1, '*');</code></strong>
+-------------------------------------------+
| mask_inner('This is a string', 5, 1, '*') |
+-------------------------------------------+
| This **********g                          |
+-------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_outer('This is a string', 5, 1, '#');</code></strong>
+-------------------------------------------+
| mask_outer('This is a string', 5, 1, '#') |
+-------------------------------------------+
| #####is a strin#                          |
+-------------------------------------------+
</pre><h6><a name="idm140286877535888"></a>Special-Purpose Masking Functions</h6><p>
                    Other masking functions expect a string argument representing
                    a specific type of value and mask it to remove identifying
                    characteristics.
                </p><p style="color:blue;">其他屏蔽函数需要一个表示特定类型值的字符串参数，并对其进行屏蔽以删除标识特征。</p>
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

                        <div class="admon-title">
                            Note
                        </div>
                        <p>
                            The examples here supply function arguments using the random
                            value generation functions that return the appropriate type
                            of value. For more information about generation functions,
                            see
                            <a class="xref" href="security.html#data-masking-usage-generation-functions" title="Generating Random Data with Specific Characteristics">Generating Random Data with Specific Characteristics</a>.
                        </p><p style="color:blue;">这里的示例使用返回适当类型值的随机值生成函数提供函数参数。有关生成函数的详细信息，请参见生成具有特定特性的随机数据。</p>
                    </div>
                    <p><b>Payment card Primary Account Number masking.&nbsp;</b>
                        Masking functions provide strict and relaxed masking of
                        Primary Account Numbers.
                    </p><p style="color:blue;">支付卡主帐号屏蔽。掩蔽函数提供对主帐号的严格和宽松掩蔽。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <a class="link" href="security.html#udf_mask-pan"><code class="literal">mask_pan()</code></a> masks all but the
                            last four digits of the number:
                        </p><p style="color:blue;">mask_pan（）屏蔽除数字的最后四位以外的所有数字：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_pan(gen_rnd_pan());</code></strong>
+-------------------------+
| mask_pan(gen_rnd_pan()) |
+-------------------------+
| XXXXXXXXXXXX2461        |
+-------------------------+
</pre></li><li class="listitem"><p>
                            <a class="link" href="security.html#udf_mask-pan-relaxed"><code class="literal">mask_pan_relaxed()</code></a> is
                            similar but does not mask the first six digits that
                            indicate the payment card issuer unmasked:
                        </p><p style="color:blue;">mask_pan_relaxed（）与此类似，但不屏蔽表示支付卡发行人未屏蔽的前六位数字：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_pan_relaxed(gen_rnd_pan());</code></strong>
+---------------------------------+
| mask_pan_relaxed(gen_rnd_pan()) |
+---------------------------------+
| 770630XXXXXX0807                |
+---------------------------------+
</pre></li></ul>
                    </div>
                    <p><b>U.S. Social Security number masking.&nbsp;</b>
                        <a class="link" href="security.html#udf_mask-ssn"><code class="literal">mask_ssn()</code></a> masks all but the
                        last four digits of the number:
                    </p><p style="color:blue;">美国社会保险号码屏蔽。mask_ssn（）屏蔽除数字的最后四位以外的所有数字：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_ssn(gen_rnd_ssn());</code></strong>
+-------------------------+
| mask_ssn(gen_rnd_ssn()) |
+-------------------------+
| XXX-XX-1723             |
+-------------------------+
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="data-masking-usage-generation-functions"></a>Generating Random Data with Specific Characteristics</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        Several functions generate random values. These values can be
                        used for testing, simulation, and so forth.
                    </p><p style="color:blue;">几个函数生成随机值。这些值可用于测试、模拟等。</p><p>
                    <a class="link" href="security.html#udf_gen-range"><code class="literal">gen_range()</code></a> returns a random
                    integer selected from a given range:
                </p><p style="color:blue;">gen_range（）返回从给定范围中选择的随机整数：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_range(1, 10);</code></strong>
+------------------+
| gen_range(1, 10) |
+------------------+
|                6 |
+------------------+
</pre><p>
                    <a class="link" href="security.html#udf_gen-rnd-email"><code class="literal">gen_rnd_email()</code></a> returns a random
                    email address in the <code class="literal">example.com</code> domain:
                </p><p style="color:blue;">gen_rnd_email（）返回example.com域中的随机电子邮件地址：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_email();</code></strong>
+---------------------------+
| gen_rnd_email()           |
+---------------------------+
| ayxnq.xmkpvvy@example.com |
+---------------------------+
</pre><p>
                    <a class="link" href="security.html#udf_gen-rnd-pan"><code class="literal">gen_rnd_pan()</code></a> returns a random
                    payment card Primary Account Number:
                </p><p style="color:blue;">gen_rnd_pan（）返回随机支付卡主帐号：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_pan();</code></strong>
</pre><p>
                    (The <a class="link" href="security.html#udf_gen-rnd-pan"><code class="literal">gen_rnd_pan()</code></a> function
                    result is not shown because its return values should be used
                    only for testing purposes, and not for publication. It cannot
                    be guaranteed the number is not assigned to a legitimate
                    payment account.)
                </p><p style="color:blue;">（gen_rnd_pan（）函数的结果未显示，因为它的返回值应仅用于测试目的，而不用于发布。无法保证该号码未分配给合法的付款帐户。）</p><p>
                    <a class="link" href="security.html#udf_gen-rnd-ssn"><code class="literal">gen_rnd_ssn()</code></a> returns a random
                    U.S. Social Security number with the first and second parts
                    each chosen from a range not used for legitimate numbers:
                </p><p style="color:blue;">gen_rnd_ssn（）返回一个随机的美国社会保险号码，其第一部分和第二部分均从不用于合法号码的范围中选择：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_ssn();</code></strong>
+---------------+
| gen_rnd_ssn() |
+---------------+
| 912-45-1615   |
+---------------+
</pre><p>
                    <a class="link" href="security.html#udf_gen-rnd-us-phone"><code class="literal">gen_rnd_us_phone()</code></a> returns a
                    random U.S. phone number in the 555 area code not used for
                    legitimate numbers:
                </p><p style="color:blue;">gen_rnd_u s_phone（）返回555区号中不用于合法号码的随机美国电话号码：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_us_phone();</code></strong>
+--------------------+
| gen_rnd_us_phone() |
+--------------------+
| 1-555-747-5627     |
+--------------------+
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="data-masking-usage-dictionary-functions"></a>Generating Random Data Using Dictionaries</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        MySQL Enterprise Data Masking and De-Identification enables dictionaries to be used as sources of random
                        values. To use a dictionary, it must first be loaded from a
                        file and given a name. Each loaded dictionary becomes part of
                        the dictionary registry. Items then can be selected from
                        registered dictionaries and used as random values or as
                        replacements for other values.
                    </p><p style="color:blue;">mysql企业数据屏蔽和反标识使字典可以用作随机值的源。要使用词典，首先必须从文件中加载词典并命名。每个加载的词典都成为词典注册表的一部分。然后，可以从已注册的词典中选择项，并将其用作随机值或其他值的替换。</p><p>
                    A valid dictionary file has these characteristics:
                </p><p style="color:blue;">有效的词典文件具有以下特征：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            The file contents are plain text, one term per line.
                        </p><p style="color:blue;">文件内容为纯文本，每行一个术语。</p></li><li class="listitem"><p>
                            Empty lines are ignored.
                        </p><p style="color:blue;">空行将被忽略。</p></li><li class="listitem"><p>
                            The file must contain at least one term.
                        </p><p style="color:blue;">文件必须至少包含一个术语。</p></li></ul>
                    </div>
                    <p>
                        Suppose that a file named <code class="filename">de_cities.txt</code>
                        contains these city names in Germany:
                    </p><p style="color:blue;">假设一个名为de_cities.txt的文件包含以下德国城市名称：</p><pre data-lang="none" class="programlisting">Berlin
Munich
Bremen
</pre><p>
                    Also suppose that a file named
                    <code class="filename">us_cities.txt</code> contains these city names
                    in the United States:
                </p><p style="color:blue;">另外，假设一个名为us_cities.txt的文件包含以下美国城市名称：</p><pre data-lang="none" class="programlisting">Chicago
Houston
Phoenix
El Paso
Detroit
</pre><p>
                    Assume that the
                    <a class="link" href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a> system
                    variable is set to
                    <code class="filename">/usr/local/mysql/mysql-files</code>. In that
                    case, copy the dictionary files to that directory so that the
                    MySQL server can access them. Then use
                    <a class="link" href="security.html#udf_gen-dictionary-load"><code class="literal">gen_dictionary_load()</code></a> to load
                    the dictionaries into the dictionary registry and assign them
                    names:
                </p><p style="color:blue;">假设secure_file_priv系统变量设置为/usr/local/mysql/mysql files。在这种情况下，将字典文件复制到该目录，以便mysql服务器可以访问它们。然后使用gen_dictionary_load（）将字典加载到字典注册表中并为其分配名称：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary_load('/usr/local/mysql/mysql-files/de_cities.txt', 'DE_Cities');</code></strong>
+--------------------------------------------------------------------------------+
| gen_dictionary_load('/usr/local/mysql/mysql-files/de_cities.txt', 'DE_Cities') |
+--------------------------------------------------------------------------------+
| Dictionary load success                                                        |
+--------------------------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary_load('/usr/local/mysql/mysql-files/us_cities.txt', 'US_Cities');</code></strong>
+--------------------------------------------------------------------------------+
| gen_dictionary_load('/usr/local/mysql/mysql-files/us_cities.txt', 'US_Cities') |
+--------------------------------------------------------------------------------+
| Dictionary load success                                                        |
+--------------------------------------------------------------------------------+
</pre><p>
                    To select a random term from a dictionary, use
                    <a class="link" href="security.html#udf_gen-dictionary"><code class="literal">gen_dictionary()</code></a>:
                </p><p style="color:blue;">要从字典中选择随机术语，请使用gen_dictionary（）：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary('DE_Cities');</code></strong>
+-----------------------------+
| gen_dictionary('DE_Cities') |
+-----------------------------+
| Berlin                      |
+-----------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary('US_Cities');</code></strong>
+-----------------------------+
| gen_dictionary('US_Cities') |
+-----------------------------+
| Phoenix                     |
+-----------------------------+
</pre><p>
                    To select a random term from multiple dictionaries, randomly
                    select one of the dictionaries, then select a term from it:
                </p><p style="color:blue;">要从多个词典中随机选择一个术语，请随机选择其中一个词典，然后从中选择一个术语：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary(ELT(gen_range(1,2), 'DE_Cities', 'US_Cities'));</code></strong>
+---------------------------------------------------------------+
| gen_dictionary(ELT(gen_range(1,2), 'DE_Cities', 'US_Cities')) |
+---------------------------------------------------------------+
| Detroit                                                       |
+---------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary(ELT(gen_range(1,2), 'DE_Cities', 'US_Cities'));</code></strong>
+---------------------------------------------------------------+
| gen_dictionary(ELT(gen_range(1,2), 'DE_Cities', 'US_Cities')) |
+---------------------------------------------------------------+
| Bremen                                                        |
+---------------------------------------------------------------+
</pre><p>
                    The <a class="link" href="security.html#udf_gen-blacklist"><code class="literal">gen_blacklist()</code></a> function
                    enables a term from one dictionary to be replaced by a term
                    from another dictionary, which effects masking by
                    substitution. Its arguments are the term to replace, the
                    dictionary in which the term appears, and the dictionary from
                    which to choose a replacement. For example, to substitute a
                    U.S. city for a German city, or vice versa, use
                    <a class="link" href="security.html#udf_gen-blacklist"><code class="literal">gen_blacklist()</code></a> like this:
                </p><p style="color:blue;">gen_blacklist（）函数使一个词典中的一个词被另一个词典中的一个词替换，从而通过替换实现屏蔽。它的参数是要替换的词、该词出现在其中的词典以及要从中选择替换的词典。例如，要将美国城市替换为德国城市，或者反之亦然，请使用gen_blacklist（），如下所示：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_blacklist('Munich', 'DE_Cities', 'US_Cities');</code></strong>
+---------------------------------------------------+
| gen_blacklist('Munich', 'DE_Cities', 'US_Cities') |
+---------------------------------------------------+
| Houston                                           |
+---------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_blacklist('El Paso', 'US_Cities', 'DE_Cities');</code></strong>
+----------------------------------------------------+
| gen_blacklist('El Paso', 'US_Cities', 'DE_Cities') |
+----------------------------------------------------+
| Bremen                                             |
+----------------------------------------------------+
</pre><p>
                    If the term to replace is not in the first dictionary,
                    <a class="link" href="security.html#udf_gen-blacklist"><code class="literal">gen_blacklist()</code></a> returns it
                    unchanged:
                </p><p style="color:blue;">如果要替换的术语不在第一个字典中，gen_blacklist（）将原封不动地返回：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_blacklist('Moscow', 'DE_Cities', 'US_Cities');</code></strong>
+---------------------------------------------------+
| gen_blacklist('Moscow', 'DE_Cities', 'US_Cities') |
+---------------------------------------------------+
| Moscow                                            |
+---------------------------------------------------+
</pre>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="data-masking-usage-customer-identification"></a>Using Masked Data for Customer Identification</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        At customer-service call centers, one common identity
                        verification technique is to ask customers to provide their
                        last four Social Security number (SSN) digits. For example, a
                        customer might say her name is Joanna Bond and that her last
                        four SSN digits are <code class="literal">0007</code>.
                    </p><p style="color:blue;">在客户服务呼叫中心，一种常见的身份验证技术是要求客户提供其最后四个社会保障号码（SSN）数字。例如，客户可能会说她的名字是Joanna Bond，最后四个SSN数字是0007。</p><p>
                    Suppose that a <code class="literal">customer</code> table containing
                    customer records has these columns:
                </p><p style="color:blue;">假设包含客户记录的客户表具有以下列：</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <code class="literal">id</code>: Customer ID number.
                        </p><p style="color:blue;">ID：客户ID号。</p></li><li class="listitem"><p>
                            <code class="literal">first_name</code>: Customer first name.
                        </p><p style="color:blue;">名字：客户名字。</p></li><li class="listitem"><p>
                            <code class="literal">last_name</code>: Customer last name.
                        </p><p style="color:blue;">姓氏：客户姓氏。</p></li><li class="listitem"><p>
                            <code class="literal">ssn</code>: Customer Social Security number.
                        </p><p style="color:blue;">SSN：客户社会保险号码。</p></li></ul>
                    </div>
                    <p>
                        For example, the table might be defined as follows:
                    </p><p style="color:blue;">例如，表的定义如下：</p><pre data-lang="sql" class="programlisting">CREATE TABLE customer
(
  id         BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(40),
  last_name  VARCHAR(40),
  ssn        VARCHAR(11)
);
</pre><p>
                    The application used by customer-service representatives to
                    check the customer SSN might execute a query like this:
                </p><p style="color:blue;">客户服务代表用于检查客户ssn的应用程序可能会执行如下查询：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, ssn</code></strong>
mysql&gt; <strong class="userinput"><code>FROM customer</code></strong>
mysql&gt; <strong class="userinput"><code>WHERE first_name = 'Joanna' AND last_name = 'Bond';</code></strong>
+-----+-------------+
| id  | ssn         |
+-----+-------------+
| 786 | 906-39-0007 |
+-----+-------------+
</pre><p>
                    However, that exposes the SSN to the customer-service
                    representative, who has no need to see anything but the last
                    four digits. Instead, the application can use this query to
                    display only the masked SSN:
                </p><p style="color:blue;">但是，这会将ssn暴露给客户服务代表，客户服务代表不需要看到任何东西，只需要看到最后四位数字。相反，应用程序可以使用此查询仅显示屏蔽的ssn：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, mask_ssn(CONVERT(ssn USING binary)) AS masked_ssn</code></strong>
mysql&gt; <strong class="userinput"><code>FROM customer</code></strong>
mysql&gt; <strong class="userinput"><code>WHERE first_name = 'Joanna' AND last_name = 'Bond';</code></strong>
+-----+-------------+
| id  | masked_ssn  |
+-----+-------------+
| 786 | XXX-XX-0007 |
+-----+-------------+
</pre><p>
                    Now the representative sees only what is necessary, and
                    customer privacy is preserved.
                </p><p style="color:blue;">现在，销售代表只看到必要的内容，客户隐私得到保护。</p><p>
                    Why was the <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> function
                    used for the argument to
                    <a class="link" href="security.html#udf_mask-ssn"><code class="literal">mask_ssn()</code></a>? Because
                    <a class="link" href="security.html#udf_mask-ssn"><code class="literal">mask_ssn()</code></a> requires an argument
                    of length 11. Thus, even though <code class="literal">ssn</code> is
                    defined as <code class="literal">VARCHAR(11)</code>, if the
                    <code class="literal">ssn</code> column has a multibyte character set,
                    it may appear to be longer than 11 bytes when passed to a UDF,
                    and an error occurs. Converting the value to a binary string
                    ensures that the UDF sees an argument of length 11.
                </p><p style="color:blue;">为什么convert（）函数用于参数掩码？因为mask_ssn（）需要长度为11的参数。因此，即使ssn被定义为varchar（11），如果ssn列有一个多字节字符集，那么当传递给udf时，它可能会超过11字节，并且会发生错误。将值转换为二进制字符串可确保UDF看到长度为11的参数。</p><p>
                    A similar technique may be needed for other data masking
                    functions when string arguments do not have a single-byte
                    character set.
                </p><p style="color:blue;">当字符串参数没有单字节字符集时，其他数据屏蔽函数可能需要类似的技术。</p>
                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="data-masking-usage-views"></a>Creating Views that Display Masked Data</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        If masked data from a table is used for multiple queries, it
                        may be convenient to define a view that produces masked data.
                        That way, applications can select from the view without
                        performing masking in individual queries.
                    </p><p style="color:blue;">如果表中的屏蔽数据用于多个查询，则可以方便地定义生成屏蔽数据的视图。这样，应用程序就可以从视图中进行选择，而不必在单个查询中执行屏蔽。</p><p>
                    For example, a masking view on the <code class="literal">customer</code>
                    table from the previous section can be defined like this:
                </p><p style="color:blue;">例如，可以这样定义上一节中customer表上的掩蔽视图：</p><pre data-lang="sql" class="programlisting">CREATE VIEW masked_customer AS
SELECT id, first_name, last_name,
mask_ssn(CONVERT(ssn USING binary)) AS masked_ssn
FROM customer;
</pre><p>
                    Then the query to look up a customer becomes simpler but still
                    returns masked data:
                </p><p style="color:blue;">然后查找客户的查询变得更简单，但仍然返回屏蔽数据：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, masked_ssn</code></strong>
mysql&gt; <strong class="userinput"><code>FROM masked_customer</code></strong>
mysql&gt; <strong class="userinput"><code>WHERE first_name = 'Joanna' AND last_name = 'Bond';</code></strong>
+-----+-------------+
| id  | masked_ssn  |
+-----+-------------+
| 786 | XXX-XX-0007 |
+-----+-------------+
</pre>
                </div>

            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h4 class="title"><a name="data-masking-reference"></a>6.4.7.4&nbsp;MySQL Enterprise Data Masking and De-Identification User-Defined Function Reference</h4>

                        </div>

                    </div>

                </div>
                <p>
                    The MySQL Enterprise Data Masking and De-Identification plugin library includes several user-defined
                    functions (UDFs), which may be grouped into these categories:
                </p><p style="color:blue;">mysql企业数据屏蔽和反标识插件库包括几个用户定义函数（udf），这些函数可以分为以下类别：</p>
                <div class="itemizedlist">
                    <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="security.html#data-masking-masking-functions" title="Data Masking Functions">Data Masking Functions</a></p><p style="color:blue;">数据屏蔽函数</p></li><li class="listitem"><p><a class="xref" href="security.html#data-masking-generation-functions" title="Random Data Generation Functions">Random Data Generation Functions</a></p><p style="color:blue;">随机数据生成函数</p></li><li class="listitem"><p><a class="xref" href="security.html#data-masking-dictionary-functions" title="Random Data Dictionary-Based Functions">Random Data Dictionary-Based Functions</a></p><p style="color:blue;">基于随机数据字典的函数</p></li></ul>
                </div>
                <p>
                    These UDFs treat string arguments as binary strings, which means
                    they are implicitly case sensitive. In addition, string UDF
                    return values are binary strings. If a string return value
                    should be in a different character set, convert it. The
                    following example shows how to convert the result of
                    <a class="link" href="security.html#udf_gen-rnd-email"><code class="literal">gen_rnd_email()</code></a> to the
                    <code class="literal">utf8mb4</code> character set:
                </p><p style="color:blue;">这些udf将字符串参数视为二进制字符串，这意味着它们隐式区分大小写。此外，字符串udf返回值是二进制字符串。如果字符串返回值应该在不同的字符集中，请将其转换。下面的示例演示如何将gen rnd_email（）的结果转换为utf8mb4字符集：</p><pre data-lang="sql" class="programlisting">SET @email = CONVERT(gen_rnd_email() USING utf8mb4);
</pre><p>
                It may also be necessary to convert string arguments, as
                illustrated in
                <a class="xref" href="security.html#data-masking-usage-customer-identification" title="Using Masked Data for Customer Identification">Using Masked Data for Customer Identification</a>.
            </p><p style="color:blue;">可能还需要转换字符串参数，如使用屏蔽数据进行客户标识中所示。</p>
                <div class="simplesect">

                    <div class="titlepage">
                        <div>

                            <div class="simple">
                                <h5 class="title"><a name="data-masking-masking-functions"></a>Data Masking Functions</h5>
                            </div>
                        </div>
                    </div>
                    <p>
                        Each function in this section performs a masking operation on
                        its string argument and returns the masked result.
                    </p><p style="color:blue;">本节中的每个函数对其字符串参数执行屏蔽操作并返回屏蔽结果。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="udf_mask-inner"></a>
                            <a class="link" href="security.html#udf_mask-inner"><code class="literal">mask_inner(<em class="replaceable"><code>str</code></em>,
                                <em class="replaceable"><code>margin1</code></em>,
                                <em class="replaceable"><code>margin2</code></em> [,
                                <em class="replaceable"><code>mask_char</code></em>])</code></a>
                        </p><p style="color:blue;">面具内部（str，margin1，margin2[，面具字符]）</p><a class="indexterm" name="idm140286877407888"></a><a class="indexterm" name="idm140286877406768"></a><p>
                            Masks the interior part of a string, leaving the ends
                            untouched, and returns the result. An optional masking
                            character can be specified.
                        </p><p style="color:blue;">屏蔽字符串的内部部分，使其末端保持不变，并返回结果。可以指定可选的屏蔽字符。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>str</code></em>: The string to mask.
                                </p><p style="color:blue;">要屏蔽的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>margin1</code></em>: A nonnegative
                                    integer that specifies the number of characters on the
                                    left end of the string to remain unmasked. If the
                                    value is 0, no left end characters remain unmasked.
                                </p><p style="color:blue;">margin1：一个非负整数，指定字符串左端要保持无掩码的字符数。如果该值为0，则左端字符不会保持未屏蔽状态。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>margin2</code></em>: A nonnegative
                                    integer that specifies the number of characters on the
                                    right end of the string to remain unmasked. If the
                                    value is 0, no right end characters remain unmasked.
                                </p><p style="color:blue;">margin2：一个非负整数，指定字符串右端要保持未屏蔽的字符数。如果该值为0，则右端字符不会保持未屏蔽状态。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>mask_char</code></em>: (Optional) The
                                    single character to use for masking. The default is
                                    <code class="literal">'X'</code> if
                                    <em class="replaceable"><code>mask_char</code></em> is not given.
                                </p><p style="color:blue;">mask_char：（可选）用于掩蔽的单个字符。如果未给定掩码字符，则默认值为“x”。</p><p>
                                    The masking character must be a single-byte character.
                                    Attempts to use a multibyte character produce an
                                    error.
                                </p><p style="color:blue;">屏蔽字符必须是单字节字符。尝试使用多字节字符会产生错误。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                The masked string, or <code class="literal">NULL</code> if either
                                margin is negative.
                            </p><p style="color:blue;">屏蔽的字符串，如果其中一个边距为负，则为空。</p><p>
                                If the sum of the margin values is larger than the
                                argument length, no masking occurs and the argument is
                                returned unchanged.
                            </p><p style="color:blue;">如果边距值之和大于参数长度，则不进行屏蔽，并且参数返回时保持不变。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_inner('abcdef', 1, 2), mask_inner('abcdef',0, 5);</code></strong>
+----------------------------+---------------------------+
| mask_inner('abcdef', 1, 2) | mask_inner('abcdef',0, 5) |
+----------------------------+---------------------------+
| aXXXef                     | Xbcdef                    |
+----------------------------+---------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_inner('abcdef', 1, 2, '*'), mask_inner('abcdef',0, 5, '#');</code></strong>
+---------------------------------+--------------------------------+
| mask_inner('abcdef', 1, 2, '*') | mask_inner('abcdef',0, 5, '#') |
+---------------------------------+--------------------------------+
| a***ef                          | #bcdef                         |
+---------------------------------+--------------------------------+
</pre></li><li class="listitem"><p><a name="udf_mask-outer"></a>
                            <a class="link" href="security.html#udf_mask-outer"><code class="literal">mask_outer(<em class="replaceable"><code>str</code></em>,
                                <em class="replaceable"><code>margin1</code></em>,
                                <em class="replaceable"><code>margin2</code></em> [,
                                <em class="replaceable"><code>mask_char</code></em>])</code></a>
                        </p><p style="color:blue;">面具外部（str，margin1，margin2[，面具字符]）</p><a class="indexterm" name="idm140286877386592"></a><a class="indexterm" name="idm140286877385472"></a><p>
                            Masks the left and right ends of a string, leaving the
                            interior unmasked, and returns the result. An optional
                            masking character can be specified.
                        </p><p style="color:blue;">屏蔽字符串的左端和右端，不隐藏内部，并返回结果。可以指定可选的屏蔽字符。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>str</code></em>: The string to mask.
                                </p><p style="color:blue;">要屏蔽的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>margin1</code></em>: A nonnegative
                                    integer that specifies the number of characters on the
                                    left end of the string to mask. If the value is 0, no
                                    left end characters are masked.
                                </p><p style="color:blue;">margin1：非负整数，指定要屏蔽的字符串左端的字符数。如果值为0，则不屏蔽左端字符。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>margin2</code></em>: A nonnegative
                                    integer that specifies the number of characters on the
                                    right end of the string to mask. If the value is 0, no
                                    right end characters are masked.
                                </p><p style="color:blue;">margin2：非负整数，指定要屏蔽的字符串右端的字符数。如果值为0，则不屏蔽右端字符。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>mask_char</code></em>: (Optional) The
                                    single character to use for masking. The default is
                                    <code class="literal">'X'</code> if
                                    <em class="replaceable"><code>mask_char</code></em> is not given.
                                </p><p style="color:blue;">mask_char：（可选）用于掩蔽的单个字符。如果未给定掩码字符，则默认值为“x”。</p><p>
                                    The masking character must be a single-byte character.
                                    Attempts to use a multibyte character produce an
                                    error.
                                </p><p style="color:blue;">屏蔽字符必须是单字节字符。尝试使用多字节字符会产生错误。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                The masked string, or <code class="literal">NULL</code> if either
                                margin is negative.
                            </p><p style="color:blue;">屏蔽的字符串，如果其中一个边距为负，则为空。</p><p>
                                If the sum of the margin values is larger than the
                                argument length, the entire argument is masked.
                            </p><p style="color:blue;">如果边距值之和大于参数长度，则整个参数将被屏蔽。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_outer('abcdef', 1, 2), mask_outer('abcdef',0, 5);</code></strong>
+----------------------------+---------------------------+
| mask_outer('abcdef', 1, 2) | mask_outer('abcdef',0, 5) |
+----------------------------+---------------------------+
| XbcdXX                     | aXXXXX                    |
+----------------------------+---------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_outer('abcdef', 1, 2, '*'), mask_outer('abcdef',0, 5, '#');</code></strong>
+---------------------------------+--------------------------------+
| mask_outer('abcdef', 1, 2, '*') | mask_outer('abcdef',0, 5, '#') |
+---------------------------------+--------------------------------+
| *bcd**                          | a#####                         |
+---------------------------------+--------------------------------+
</pre></li><li class="listitem"><p><a name="udf_mask-pan"></a>
                            <a class="link" href="security.html#udf_mask-pan"><code class="literal">mask_pan(<em class="replaceable"><code>str</code></em>)</code></a>
                        </p><p style="color:blue;">遮罩盘（str）</p><a class="indexterm" name="idm140286877366624"></a><a class="indexterm" name="idm140286877365504"></a><p>
                            Masks a payment card Primary Account Number and returns
                            the number with all but the last four digits replaced by
                            <code class="literal">'X'</code> characters.
                        </p><p style="color:blue;">屏蔽一个支付卡主帐号，并返回除最后四位数字外全部由“x”字符替换的号码。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>str</code></em>: The string to mask.
                                    The string must be a suitable length for the Primary
                                    Account Number, but is not otherwise checked.
                                </p><p style="color:blue;">要屏蔽的字符串。字符串必须是主帐号的适当长度，但不进行其他检查。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                The masked payment number as a string. If the argument is
                                shorter than required, it is returned unchanged.
                            </p><p style="color:blue;">以字符串形式隐藏的付款编号。如果参数比所需的短，则返回时将保持不变。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_pan(gen_rnd_pan());</code></strong>
+-------------------------+
| mask_pan(gen_rnd_pan()) |
+-------------------------+
| XXXXXXXXXXXX9102        |
+-------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan(gen_rnd_pan(19));</code></strong>
+---------------------------+
| mask_pan(gen_rnd_pan(19)) |
+---------------------------+
| XXXXXXXXXXXXXXX8268       |
+---------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan('a*Z');</code></strong>
+-----------------+
| mask_pan('a*Z') |
+-----------------+
| a*Z             |
+-----------------+
</pre></li><li class="listitem"><p><a name="udf_mask-pan-relaxed"></a>
                            <a class="link" href="security.html#udf_mask-pan-relaxed"><code class="literal">mask_pan_relaxed(<em class="replaceable"><code>str</code></em>)</code></a>
                        </p><p style="color:blue;">放松面具（str）</p><a class="indexterm" name="idm140286877352560"></a><a class="indexterm" name="idm140286877351424"></a><p>
                            Masks a payment card Primary Account Number and returns
                            the number with all but the first six and last four digits
                            replaced by <code class="literal">'X'</code> characters. The first
                            six digits indicate the payment card issuer.
                        </p><p style="color:blue;">屏蔽一个支付卡主帐号，并返回除前六位和后四位以外全部由“x”字符替换的号码。前六位数字表示支付卡发行人。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>str</code></em>: The string to mask.
                                    The string must be a suitable length for the Primary
                                    Account Number, but is not otherwise checked.
                                </p><p style="color:blue;">要屏蔽的字符串。字符串必须是主帐号的适当长度，但不进行其他检查。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                The masked payment number as a string. If the argument is
                                shorter than required, it is returned unchanged.
                            </p><p style="color:blue;">以字符串形式隐藏的付款编号。如果参数比所需的短，则返回时将保持不变。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_pan_relaxed(gen_rnd_pan());</code></strong>
+---------------------------------+
| mask_pan_relaxed(gen_rnd_pan()) |
+---------------------------------+
| 551279XXXXXX3108                |
+---------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan_relaxed(gen_rnd_pan(19));</code></strong>
+-----------------------------------+
| mask_pan_relaxed(gen_rnd_pan(19)) |
+-----------------------------------+
| 462634XXXXXXXXX6739               |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan_relaxed('a*Z');</code></strong>
+-------------------------+
| mask_pan_relaxed('a*Z') |
+-------------------------+
| a*Z                     |
+-------------------------+
</pre></li><li class="listitem"><p><a name="udf_mask-ssn"></a>
                            <a class="link" href="security.html#udf_mask-ssn"><code class="literal">mask_ssn(<em class="replaceable"><code>str</code></em>)</code></a>
                        </p><p style="color:blue;">掩码（str）</p><a class="indexterm" name="idm140286877338160"></a><a class="indexterm" name="idm140286877337040"></a><p>
                            Masks a U.S. Social Security number and returns the number
                            with all but the last four digits replaced by
                            <code class="literal">'X'</code> characters.
                        </p><p style="color:blue;">屏蔽一个美国社会保险号码，并返回该号码，除最后四位数字外，其他所有数字均替换为“X”字符。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>str</code></em>: The string to mask.
                                    The string must be 11 characters long, but is not
                                    otherwise checked.
                                </p><p style="color:blue;">要屏蔽的字符串。字符串长度必须为11个字符，但不进行其他检查。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                The masked Social Security number as a string, or
                                <code class="literal">NULL</code> if the argument is not the correct
                                length.
                            </p><p style="color:blue;">将屏蔽的社会保险号作为字符串，如果参数长度不正确，则为空。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_ssn('909-63-6922'), mask_ssn('abcdefghijk');</code></strong>
+-------------------------+-------------------------+
| mask_ssn('909-63-6922') | mask_ssn('abcdefghijk') |
+-------------------------+-------------------------+
| XXX-XX-6922             | XXX-XX-hijk             |
+-------------------------+-------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_ssn('909');</code></strong>
+-----------------+
| mask_ssn('909') |
+-----------------+
| NULL            |
+-----------------+
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="data-masking-generation-functions"></a>Random Data Generation Functions</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The functions in this section generate random values for
                        different types of data. When possible, generated values have
                        characteristics reserved for demonstration or test values, to
                        avoid having them mistaken for legitimate data. For example,
                        <a class="link" href="security.html#udf_gen-rnd-us-phone"><code class="literal">gen_rnd_us_phone()</code></a> returns a
                        U.S. phone number that uses the 555 area code, which is not
                        assigned to phone numbers in actual use. Individual function
                        descriptions describe any exceptions to this principle.
                    </p><p style="color:blue;">本节中的函数为不同类型的数据生成随机值。在可能的情况下，生成的值具有为演示或测试值保留的特性，以避免将其误认为合法数据。例如，gen_rnd_u s_phone（）返回使用555区号的美国电话号码，该区号在实际使用中未分配给电话号码。个别功能描述描述了此原则的任何例外情况。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="udf_gen-range"></a>
                            <a class="link" href="security.html#udf_gen-range"><code class="literal">gen_range(<em class="replaceable"><code>lower</code></em>,
                                <em class="replaceable"><code>upper</code></em>)</code></a>
                        </p><p style="color:blue;">发电机范围（上、下）</p><a class="indexterm" name="idm140286877319968"></a><a class="indexterm" name="idm140286877318848"></a><p>
                            Generates a random number chosen from a specified range.
                        </p><p style="color:blue;">生成从指定范围中选择的随机数。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>lower</code></em>: An integer that
                                    specifies the lower boundary of the range.
                                </p><p style="color:blue;">下限：指定范围下限的整数。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>upper</code></em>: An integer that
                                    specifies the upper boundary of the range, which must
                                    not be less than the lower boundary.
                                </p><p style="color:blue;">上限：一个整数，指定范围的上限，不能小于下限。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A random integer in the range from
                                <em class="replaceable"><code>lower</code></em> to
                                <em class="replaceable"><code>upper</code></em>, inclusive, or
                                <code class="literal">NULL</code> if the
                                <em class="replaceable"><code>upper</code></em> argument is less than
                                <em class="replaceable"><code>lower</code></em>.
                            </p><p style="color:blue;">从下到上、包含或空（如果上参数小于下）范围内的随机整数。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_range(100, 200), gen_range(-1000, -800);</code></strong>
+---------------------+------------------------+
| gen_range(100, 200) | gen_range(-1000, -800) |
+---------------------+------------------------+
|                 177 |                   -917 |
+---------------------+------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_range(1, 0);</code></strong>
+-----------------+
| gen_range(1, 0) |
+-----------------+
|            NULL |
+-----------------+
</pre></li><li class="listitem"><p><a name="udf_gen-rnd-email"></a>
                            <a class="link" href="security.html#udf_gen-rnd-email"><code class="literal">gen_rnd_email()</code></a>
                        </p><p style="color:blue;">通用电子邮件（）</p><a class="indexterm" name="idm140286877304160"></a><a class="indexterm" name="idm140286877303040"></a><p>
                            Generates a random email address in the
                            <code class="literal">example.com</code> domain.
                        </p><p style="color:blue;">在example.com域中生成随机电子邮件地址。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">没有。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            A random email address as a string.
                        </p><p style="color:blue;">作为字符串的随机电子邮件地址。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_email();</code></strong>
+---------------------------+
| gen_rnd_email()           |
+---------------------------+
| ijocv.mwvhhuf@example.com |
+---------------------------+
</pre></li><li class="listitem"><p><a name="udf_gen-rnd-pan"></a>
                            <a class="link" href="security.html#udf_gen-rnd-pan"><code class="literal">gen_rnd_pan([<em class="replaceable"><code>size</code></em>])</code></a>
                        </p><p style="color:blue;">发电机盘（[尺寸]）</p><a class="indexterm" name="idm140286877293520"></a><a class="indexterm" name="idm140286877292400"></a><p>
                            Generates a random payment card Primary Account Number.
                            The number passes the Luhn check (an algorithm that
                            performs a checksum verification against a check digit).
                        </p><p style="color:blue;">生成随机支付卡主帐号。数字通过了luhn校验（对校验位执行校验和验证的算法）。</p>
                            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Warning
                                </div>
                                <p>
                                    Values returned from
                                    <a class="link" href="security.html#udf_gen-rnd-pan"><code class="literal">gen_rnd_pan()</code></a> should be
                                    used only for test purposes, and are not suitable for
                                    publication. There is no way to guarantee that a given
                                    return value is not assigned to a legitimate payment
                                    account. Should it be necessary to publish a
                                    <a class="link" href="security.html#udf_gen-rnd-pan"><code class="literal">gen_rnd_pan()</code></a> result,
                                    consider masking it with
                                    <a class="link" href="security.html#udf_mask-pan"><code class="literal">mask_pan()</code></a> or
                                    <a class="link" href="security.html#udf_mask-pan-relaxed"><code class="literal">mask_pan_relaxed()</code></a>.
                                </p><p style="color:blue;">从gen_rnd_pan（）返回的值应仅用于测试目的，不适合发布。无法保证给定的返回值没有分配给合法的支付帐户。如果需要发布gen_rnd_pan（）结果，请考虑使用mask_pan（）或mask_pan_relaxed（）对其进行屏蔽。</p>
                            </div>
                            <p>
                                Arguments:
                            </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>size</code></em>: (Optional) An integer
                                    that specifies the size of the result. The default is
                                    16 if <em class="replaceable"><code>size</code></em> is not given. If
                                    given, <em class="replaceable"><code>size</code></em> must be an
                                    integer in the range from 12 to 19.
                                </p><p style="color:blue;">size：（可选）指定结果大小的整数。如果未给定大小，则默认值为16。如果给定，大小必须是12到19之间的整数。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A random payment number as a string, or
                                <code class="literal">NULL</code> if a
                                <em class="replaceable"><code>size</code></em> argument outside the
                                permitted range is given.
                            </p><p style="color:blue;">作为字符串的随机付款编号，如果给定了超出允许范围的大小参数，则为空。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT mask_pan(gen_rnd_pan());</code></strong>
+-------------------------+
| mask_pan(gen_rnd_pan()) |
+-------------------------+
| XXXXXXXXXXXX5805        |
+-------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan(gen_rnd_pan(19));</code></strong>
+---------------------------+
| mask_pan(gen_rnd_pan(19)) |
+---------------------------+
| XXXXXXXXXXXXXXX5067       |
+---------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan_relaxed(gen_rnd_pan());</code></strong>
+---------------------------------+
| mask_pan_relaxed(gen_rnd_pan()) |
+---------------------------------+
| 398403XXXXXX9547                |
+---------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT mask_pan_relaxed(gen_rnd_pan(19));</code></strong>
+-----------------------------------+
| mask_pan_relaxed(gen_rnd_pan(19)) |
+-----------------------------------+
| 578416XXXXXXXXX6509               |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_pan(11), gen_rnd_pan(20);</code></strong>
+-----------------+-----------------+
| gen_rnd_pan(11) | gen_rnd_pan(20) |
+-----------------+-----------------+
| NULL            | NULL            |
+-----------------+-----------------+
</pre></li><li class="listitem"><p><a name="udf_gen-rnd-ssn"></a>
                            <a class="link" href="security.html#udf_gen-rnd-ssn"><code class="literal">gen_rnd_ssn()</code></a>
                        </p><p style="color:blue;">发电机</p><a class="indexterm" name="idm140286877269968"></a><a class="indexterm" name="idm140286877268848"></a><p>
                            Generates a random U.S. Social Security number in
                            <code class="literal"><em class="replaceable"><code>AAA</code></em>-<em class="replaceable"><code>BB</code></em>-<em class="replaceable"><code>CCCC</code></em></code>
                            format. The <em class="replaceable"><code>AAA</code></em> part is greater
                            than 900 and the <em class="replaceable"><code>BB</code></em> part is
                            less than 70, which are characteristics not used for
                            legitimate Social Security numbers.
                        </p><p style="color:blue;">以AAA-BB-CCCC格式随机生成美国社会保险号码。AAA部分大于900，BB部分小于70，这是不用于合法社会保障号码的特征。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">没有。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            A random Social Security number as a string.
                        </p><p style="color:blue;">作为字符串的随机社会保险号。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_ssn();</code></strong>
+---------------+
| gen_rnd_ssn() |
+---------------+
| 951-26-0058   |
+---------------+
</pre></li><li class="listitem"><p><a name="udf_gen-rnd-us-phone"></a>
                            <a class="link" href="security.html#udf_gen-rnd-us-phone"><code class="literal">gen_rnd_us_phone()</code></a>
                        </p><p style="color:blue;">通用电话（）</p><a class="indexterm" name="idm140286877257760"></a><a class="indexterm" name="idm140286877256624"></a><p>
                            Generates a random U.S. phone number in
                            <code class="literal">1-555-<em class="replaceable"><code>AAA</code></em>-<em class="replaceable"><code>BBBB</code></em></code>
                            format. The 555 area code is not used for legitimate phone
                            numbers.
                        </p><p style="color:blue;">生成1-555-AAA-BBBB格式的随机美国电话号码。555区号不用于合法电话号码。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p><p>
                            None.
                        </p><p style="color:blue;">没有。</p><p>
                            Return value:
                        </p><p style="color:blue;">返回值：</p><p>
                            A random U.S. phone number as a string.
                        </p><p style="color:blue;">作为字符串的随机美国电话号码。</p><p>
                            Example:
                        </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_rnd_us_phone();</code></strong>
+--------------------+
| gen_rnd_us_phone() |
+--------------------+
| 1-555-682-5423     |
+--------------------+
</pre></li></ul>
                    </div>

                </div>
                <div class="simplesect">
                    <div class="titlepage">
                        <div>
                            <div class="simple">
                                <h5 class="title"><a name="data-masking-dictionary-functions"></a>Random Data Dictionary-Based Functions</h5>

                            </div>

                        </div>

                    </div>
                    <p>
                        The functions in this section manipulate dictionaries of terms
                        and perform generation and masking operations based on them.
                        Some of these functions require the
                        <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege.
                    </p><p style="color:blue;">本节中的函数操作术语词典并基于它们执行生成和屏蔽操作。其中一些函数需要超级特权。</p><p>
                    When a dictionary is loaded, it becomes part of the dictionary
                    registry and is assigned a name to be used by other dictionary
                    functions. Dictionaries are loaded from plain text files
                    containing one term per line. Empty lines are ignored. To be
                    valid, a dictionary file must contain at least one nonempty
                    line.
                </p><p style="color:blue;">加载词典时，它将成为词典注册表的一部分，并被分配一个名称供其他词典函数使用。词典是从每行包含一个词的纯文本文件加载的。空行将被忽略。字典文件必须至少包含一个非空行，才能生效。</p>
                    <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="udf_gen-blacklist"></a>
                            <a class="link" href="security.html#udf_gen-blacklist"><code class="literal">gen_blacklist(<em class="replaceable"><code>str</code></em>,
                                <em class="replaceable"><code>dictionary_name</code></em>,
                                <em class="replaceable"><code>replacement_dictionary_name</code></em>)</code></a>
                        </p><p style="color:blue;">gen_黑名单（str，dictionary_name，replacement_dictionary_name）</p><a class="indexterm" name="idm140286877241184"></a><a class="indexterm" name="idm140286877240064"></a><p>
                            Replaces a term present in one dictionary with a term from
                            a second dictionary and returns the replacement term. This
                            masks the original term by substitution.
                        </p><p style="color:blue;">用第二个词典中的词替换一个词典中的词，并返回替换词。这通过替换来掩盖原来的术语。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>str</code></em>: A string that
                                    indicates the term to replace.
                                </p><p style="color:blue;">str：表示要替换的术语的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>dictionary_name</code></em>: A string
                                    that names the dictionary containing the term to
                                    replace.
                                </p><p style="color:blue;">字典名称：为包含要替换的术语的字典命名的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>replacement_dictionary_name</code></em>:
                                    A string that names the dictionary from which to
                                    choose the replacement term.
                                </p><p style="color:blue;">replacement_dictionary_name：为要从中选择替换词的词典命名的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string randomly chosen from
                                <em class="replaceable"><code>replacement_dictionary_name</code></em> as
                                a replacement for <em class="replaceable"><code>str</code></em>, or
                                <em class="replaceable"><code>str</code></em> if it does not appear in
                                <em class="replaceable"><code>dictionary_name</code></em>, or
                                <code class="literal">NULL</code> if either dictionary name is not
                                in the dictionary registry.
                            </p><p style="color:blue;">从replacement_dictionary_name中随机选择的字符串，用作str的替换；如果str不出现在dictionary_name中，则为str；如果dictionary名称不在dictionary注册表中，则为null。</p><p>
                                If the term to replace appears in both dictionaries, it is
                                possible for the return value to be the same term.
                            </p><p style="color:blue;">如果要替换的项出现在两个词典中，则返回值可能是相同的项。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_blacklist('Berlin', 'DE_Cities', 'US_Cities');</code></strong>
+---------------------------------------------------+
| gen_blacklist('Berlin', 'DE_Cities', 'US_Cities') |
+---------------------------------------------------+
| Phoenix                                           |
+---------------------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_gen-dictionary"></a>
                            <a class="link" href="security.html#udf_gen-dictionary"><code class="literal">gen_dictionary(<em class="replaceable"><code>dictionary_name</code></em>)</code></a>
                        </p><p style="color:blue;">gen_dictionary（字典名称）</p><a class="indexterm" name="idm140286877223936"></a><a class="indexterm" name="idm140286877222800"></a><p>
                            Returns a random term from a dictionary.
                        </p><p style="color:blue;">从字典中返回随机项。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>dictionary_name</code></em>: A string
                                    that names the dictionary from which to choose the
                                    term.
                                </p><p style="color:blue;">dictionary_name：为要从中选择术语的词典命名的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A random term from the dictionary as a string, or
                                <code class="literal">NULL</code> if the dictionary name is not in
                                the dictionary registry.
                            </p><p style="color:blue;">字典中作为字符串的随机项，如果字典名称不在字典注册表中，则为空。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary('mydict');</code></strong>
+--------------------------+
| gen_dictionary('mydict') |
+--------------------------+
| My term                  |
+--------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary('no-such-dict');</code></strong>
+--------------------------------+
| gen_dictionary('no-such-dict') |
+--------------------------------+
| NULL                           |
+--------------------------------+
</pre></li><li class="listitem"><p><a name="udf_gen-dictionary-drop"></a>
                            <a class="link" href="security.html#udf_gen-dictionary-drop"><code class="literal">gen_dictionary_drop(<em class="replaceable"><code>dictionary_name</code></em>)</code></a>
                        </p><p style="color:blue;">gen_dictionary_drop（字典名称）</p><a class="indexterm" name="idm140286877210672"></a><a class="indexterm" name="idm140286877209536"></a><p>
                            Removes a dictionary from the dictionary registry.
                        </p><p style="color:blue;">从字典注册表中删除字典。</p><p>
                            This function requires the
                            <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege.
                        </p><p style="color:blue;">此函数需要超级权限。</p><p>
                            Arguments:
                        </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>dictionary_name</code></em>: A string
                                    that names the dictionary to remove from the
                                    dictionary registry.
                                </p><p style="color:blue;">dictionary_name：为要从字典注册表中删除的字典命名的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the drop operation
                                succeeded. <code class="literal">Dictionary removed</code> indicates
                                success. <code class="literal">Dictionary removal error</code>
                                indicates failure.
                            </p><p style="color:blue;">指示删除操作是否成功的字符串。删除字典表示成功。字典删除错误表示失败。</p><p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary_drop('mydict');</code></strong>
+-------------------------------+
| gen_dictionary_drop('mydict') |
+-------------------------------+
| Dictionary removed            |
+-------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary_drop('no-such-dict');</code></strong>
+-------------------------------------+
| gen_dictionary_drop('no-such-dict') |
+-------------------------------------+
| Dictionary removal error            |
+-------------------------------------+
</pre></li><li class="listitem"><p><a name="udf_gen-dictionary-load"></a>
                            <a class="link" href="security.html#udf_gen-dictionary-load"><code class="literal">gen_dictionary_load(<em class="replaceable"><code>dictionary_path</code></em>,
                                <em class="replaceable"><code>dictionary_name</code></em>)</code></a>
                        </p><p style="color:blue;">gen_dictionary_load（字典路径，字典名称）</p><a class="indexterm" name="idm140286877194576"></a><a class="indexterm" name="idm140286877193440"></a><p>
                            Loads a file into the dictionary registry and assigns the
                            dictionary a name to be used with other functions that
                            require a dictionary name argument.
                        </p><p style="color:blue;">将文件加载到字典注册表中，并为字典分配一个名称，以便与需要字典名称参数的其他函数一起使用。</p><p>
                            This function requires the
                            <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege.
                        </p><p style="color:blue;">此函数需要超级权限。</p>
                            <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

                                <div class="admon-title">
                                    Important
                                </div>
                                <p>
                                    Dictionaries are not persistent. Any dictionary used by
                                    applications must be loaded for each server startup.
                                </p><p style="color:blue;">字典不是持久的。应用程序使用的任何字典都必须在每次服务器启动时加载。</p>
                            </div>
                            <p>
                                Once loaded into the registry, a dictionary is used as is,
                                even if the underlying dictionary file changes. To reload
                                a dictionary, first drop it with
                                <a class="link" href="security.html#udf_gen-dictionary-drop"><code class="literal">gen_dictionary_drop()</code></a>, then
                                load it again with
                                <a class="link" href="security.html#udf_gen-dictionary-load"><code class="literal">gen_dictionary_load()</code></a>.
                            </p><p style="color:blue;">一旦加载到注册表中，字典将按原样使用，即使基础字典文件发生更改。要重新加载词典，请先使用gen_dictionary_drop（）将其删除，然后使用gen_dictionary_load（）再次加载。</p><p>
                                Arguments:
                            </p><p style="color:blue;">论据：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    <em class="replaceable"><code>dictionary_path</code></em>: A string
                                    that specifies the path name of the dictionary file.
                                </p><p style="color:blue;">字典路径：指定字典文件路径名的字符串。</p></li><li class="listitem"><p>
                                    <em class="replaceable"><code>dictionary_name</code></em>: A string
                                    that provides a name for the dictionary.
                                </p><p style="color:blue;">字典名称：为字典提供名称的字符串。</p></li></ul>
                            </div>
                            <p>
                                Return value:
                            </p><p style="color:blue;">返回值：</p><p>
                                A string that indicates whether the load operation
                                succeeded. <code class="literal">Dictionary load success</code>
                                indicates success. <code class="literal">Dictionary load
                                error</code> indicates failure. Dictionary load failure
                                can occur for several reasons, including:
                            </p><p style="color:blue;">指示加载操作是否成功的字符串。字典加载成功表示成功。字典加载错误表示失败。字典加载失败可能有以下几种原因：</p>
                            <div class="itemizedlist">
                                <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                    A dictionary with the given name is already loaded.
                                </p><p style="color:blue;">已加载具有给定名称的词典。</p></li><li class="listitem"><p>
                                    The dictionary file is not found.
                                </p><p style="color:blue;">找不到字典文件。</p></li><li class="listitem"><p>
                                    The dictionary file contains no terms.
                                </p><p style="color:blue;">字典文件不包含任何术语。</p></li><li class="listitem"><p>
                                    The <a class="link" href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a>
                                    system variable is set and the dictionary file is not
                                    located in the directory named by the variable.
                                </p><p style="color:blue;">已设置secure_file_priv系统变量，并且字典文件不在由该变量命名的目录中。</p></li></ul>
                            </div>
                            <p>
                                Example:
                            </p><p style="color:blue;">例子：</p><pre data-lang="sql" class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary_load('/usr/local/mysql/mysql-files/mydict','mydict');</code></strong>
+---------------------------------------------------------------------+
| gen_dictionary_load('/usr/local/mysql/mysql-files/mydict','mydict') |
+---------------------------------------------------------------------+
| Dictionary load success                                             |
+---------------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT gen_dictionary_load('/dev/null','null');</code></strong>
+-----------------------------------------+
| gen_dictionary_load('/dev/null','null') |
+-----------------------------------------+
| Dictionary load error                   |
+-----------------------------------------+
</pre></li></ul>
                    </div>

                </div>

            </div>

        </div>

    </div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
    <hr>
    <table width="100%" summary="Navigation footer">
        <tbody><tr>
            <td width="40%" align="left"><a accesskey="p" href="server-administration.html">Prev</a></td>
            <td width="20%" align="center"><a accesskey="u" href="">Up</a></td>
            <td width="40%" align="right">&nbsp;<a accesskey="n" href="backup-and-recovery.html">Next</a></td>
        </tr>
        <tr>
            <td width="40%" align="left" valign="top">Chapter&nbsp;5 MySQL Server Administration</td>
            <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
            <td width="40%" align="right" valign="top">Chapter&nbsp;7 Backup and Recovery</td>
        </tr>
        </tbody></table>
</div>


</body>